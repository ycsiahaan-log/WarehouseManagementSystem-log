(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){

},{}],2:[function(require,module,exports){
'use strict';

var GetIntrinsic = require('get-intrinsic');

var callBind = require('./');

var $indexOf = callBind(GetIntrinsic('String.prototype.indexOf'));

module.exports = function callBoundIntrinsic(name, allowMissing) {
	var intrinsic = GetIntrinsic(name, !!allowMissing);
	if (typeof intrinsic === 'function' && $indexOf(name, '.prototype.') > -1) {
		return callBind(intrinsic);
	}
	return intrinsic;
};

},{"./":3,"get-intrinsic":15}],3:[function(require,module,exports){
'use strict';

var bind = require('function-bind');
var GetIntrinsic = require('get-intrinsic');
var setFunctionLength = require('set-function-length');

var $TypeError = require('es-errors/type');
var $apply = GetIntrinsic('%Function.prototype.apply%');
var $call = GetIntrinsic('%Function.prototype.call%');
var $reflectApply = GetIntrinsic('%Reflect.apply%', true) || bind.call($call, $apply);

var $defineProperty = require('es-define-property');
var $max = GetIntrinsic('%Math.max%');

module.exports = function callBind(originalFunction) {
	if (typeof originalFunction !== 'function') {
		throw new $TypeError('a function is required');
	}
	var func = $reflectApply(bind, $call, arguments);
	return setFunctionLength(
		func,
		1 + $max(0, originalFunction.length - (arguments.length - 1)),
		true
	);
};

var applyBind = function applyBind() {
	return $reflectApply(bind, $apply, arguments);
};

if ($defineProperty) {
	$defineProperty(module.exports, 'apply', { value: applyBind });
} else {
	module.exports.apply = applyBind;
}

},{"es-define-property":5,"es-errors/type":11,"function-bind":14,"get-intrinsic":15,"set-function-length":24}],4:[function(require,module,exports){
'use strict';

var $defineProperty = require('es-define-property');

var $SyntaxError = require('es-errors/syntax');
var $TypeError = require('es-errors/type');

var gopd = require('gopd');

/** @type {import('.')} */
module.exports = function defineDataProperty(
	obj,
	property,
	value
) {
	if (!obj || (typeof obj !== 'object' && typeof obj !== 'function')) {
		throw new $TypeError('`obj` must be an object or a function`');
	}
	if (typeof property !== 'string' && typeof property !== 'symbol') {
		throw new $TypeError('`property` must be a string or a symbol`');
	}
	if (arguments.length > 3 && typeof arguments[3] !== 'boolean' && arguments[3] !== null) {
		throw new $TypeError('`nonEnumerable`, if provided, must be a boolean or null');
	}
	if (arguments.length > 4 && typeof arguments[4] !== 'boolean' && arguments[4] !== null) {
		throw new $TypeError('`nonWritable`, if provided, must be a boolean or null');
	}
	if (arguments.length > 5 && typeof arguments[5] !== 'boolean' && arguments[5] !== null) {
		throw new $TypeError('`nonConfigurable`, if provided, must be a boolean or null');
	}
	if (arguments.length > 6 && typeof arguments[6] !== 'boolean') {
		throw new $TypeError('`loose`, if provided, must be a boolean');
	}

	var nonEnumerable = arguments.length > 3 ? arguments[3] : null;
	var nonWritable = arguments.length > 4 ? arguments[4] : null;
	var nonConfigurable = arguments.length > 5 ? arguments[5] : null;
	var loose = arguments.length > 6 ? arguments[6] : false;

	/* @type {false | TypedPropertyDescriptor<unknown>} */
	var desc = !!gopd && gopd(obj, property);

	if ($defineProperty) {
		$defineProperty(obj, property, {
			configurable: nonConfigurable === null && desc ? desc.configurable : !nonConfigurable,
			enumerable: nonEnumerable === null && desc ? desc.enumerable : !nonEnumerable,
			value: value,
			writable: nonWritable === null && desc ? desc.writable : !nonWritable
		});
	} else if (loose || (!nonEnumerable && !nonWritable && !nonConfigurable)) {
		// must fall back to [[Set]], and was not explicitly asked to make non-enumerable, non-writable, or non-configurable
		obj[property] = value; // eslint-disable-line no-param-reassign
	} else {
		throw new $SyntaxError('This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.');
	}
};

},{"es-define-property":5,"es-errors/syntax":10,"es-errors/type":11,"gopd":16}],5:[function(require,module,exports){
'use strict';

var GetIntrinsic = require('get-intrinsic');

/** @type {import('.')} */
var $defineProperty = GetIntrinsic('%Object.defineProperty%', true) || false;
if ($defineProperty) {
	try {
		$defineProperty({}, 'a', { value: 1 });
	} catch (e) {
		// IE 8 has a broken defineProperty
		$defineProperty = false;
	}
}

module.exports = $defineProperty;

},{"get-intrinsic":15}],6:[function(require,module,exports){
'use strict';

/** @type {import('./eval')} */
module.exports = EvalError;

},{}],7:[function(require,module,exports){
'use strict';

/** @type {import('.')} */
module.exports = Error;

},{}],8:[function(require,module,exports){
'use strict';

/** @type {import('./range')} */
module.exports = RangeError;

},{}],9:[function(require,module,exports){
'use strict';

/** @type {import('./ref')} */
module.exports = ReferenceError;

},{}],10:[function(require,module,exports){
'use strict';

/** @type {import('./syntax')} */
module.exports = SyntaxError;

},{}],11:[function(require,module,exports){
'use strict';

/** @type {import('./type')} */
module.exports = TypeError;

},{}],12:[function(require,module,exports){
'use strict';

/** @type {import('./uri')} */
module.exports = URIError;

},{}],13:[function(require,module,exports){
'use strict';

/* eslint no-invalid-this: 1 */

var ERROR_MESSAGE = 'Function.prototype.bind called on incompatible ';
var toStr = Object.prototype.toString;
var max = Math.max;
var funcType = '[object Function]';

var concatty = function concatty(a, b) {
    var arr = [];

    for (var i = 0; i < a.length; i += 1) {
        arr[i] = a[i];
    }
    for (var j = 0; j < b.length; j += 1) {
        arr[j + a.length] = b[j];
    }

    return arr;
};

var slicy = function slicy(arrLike, offset) {
    var arr = [];
    for (var i = offset || 0, j = 0; i < arrLike.length; i += 1, j += 1) {
        arr[j] = arrLike[i];
    }
    return arr;
};

var joiny = function (arr, joiner) {
    var str = '';
    for (var i = 0; i < arr.length; i += 1) {
        str += arr[i];
        if (i + 1 < arr.length) {
            str += joiner;
        }
    }
    return str;
};

module.exports = function bind(that) {
    var target = this;
    if (typeof target !== 'function' || toStr.apply(target) !== funcType) {
        throw new TypeError(ERROR_MESSAGE + target);
    }
    var args = slicy(arguments, 1);

    var bound;
    var binder = function () {
        if (this instanceof bound) {
            var result = target.apply(
                this,
                concatty(args, arguments)
            );
            if (Object(result) === result) {
                return result;
            }
            return this;
        }
        return target.apply(
            that,
            concatty(args, arguments)
        );

    };

    var boundLength = max(0, target.length - args.length);
    var boundArgs = [];
    for (var i = 0; i < boundLength; i++) {
        boundArgs[i] = '$' + i;
    }

    bound = Function('binder', 'return function (' + joiny(boundArgs, ',') + '){ return binder.apply(this,arguments); }')(binder);

    if (target.prototype) {
        var Empty = function Empty() {};
        Empty.prototype = target.prototype;
        bound.prototype = new Empty();
        Empty.prototype = null;
    }

    return bound;
};

},{}],14:[function(require,module,exports){
'use strict';

var implementation = require('./implementation');

module.exports = Function.prototype.bind || implementation;

},{"./implementation":13}],15:[function(require,module,exports){
'use strict';

var undefined;

var $Error = require('es-errors');
var $EvalError = require('es-errors/eval');
var $RangeError = require('es-errors/range');
var $ReferenceError = require('es-errors/ref');
var $SyntaxError = require('es-errors/syntax');
var $TypeError = require('es-errors/type');
var $URIError = require('es-errors/uri');

var $Function = Function;

// eslint-disable-next-line consistent-return
var getEvalledConstructor = function (expressionSyntax) {
	try {
		return $Function('"use strict"; return (' + expressionSyntax + ').constructor;')();
	} catch (e) {}
};

var $gOPD = Object.getOwnPropertyDescriptor;
if ($gOPD) {
	try {
		$gOPD({}, '');
	} catch (e) {
		$gOPD = null; // this is IE 8, which has a broken gOPD
	}
}

var throwTypeError = function () {
	throw new $TypeError();
};
var ThrowTypeError = $gOPD
	? (function () {
		try {
			// eslint-disable-next-line no-unused-expressions, no-caller, no-restricted-properties
			arguments.callee; // IE 8 does not throw here
			return throwTypeError;
		} catch (calleeThrows) {
			try {
				// IE 8 throws on Object.getOwnPropertyDescriptor(arguments, '')
				return $gOPD(arguments, 'callee').get;
			} catch (gOPDthrows) {
				return throwTypeError;
			}
		}
	}())
	: throwTypeError;

var hasSymbols = require('has-symbols')();
var hasProto = require('has-proto')();

var getProto = Object.getPrototypeOf || (
	hasProto
		? function (x) { return x.__proto__; } // eslint-disable-line no-proto
		: null
);

var needsEval = {};

var TypedArray = typeof Uint8Array === 'undefined' || !getProto ? undefined : getProto(Uint8Array);

var INTRINSICS = {
	__proto__: null,
	'%AggregateError%': typeof AggregateError === 'undefined' ? undefined : AggregateError,
	'%Array%': Array,
	'%ArrayBuffer%': typeof ArrayBuffer === 'undefined' ? undefined : ArrayBuffer,
	'%ArrayIteratorPrototype%': hasSymbols && getProto ? getProto([][Symbol.iterator]()) : undefined,
	'%AsyncFromSyncIteratorPrototype%': undefined,
	'%AsyncFunction%': needsEval,
	'%AsyncGenerator%': needsEval,
	'%AsyncGeneratorFunction%': needsEval,
	'%AsyncIteratorPrototype%': needsEval,
	'%Atomics%': typeof Atomics === 'undefined' ? undefined : Atomics,
	'%BigInt%': typeof BigInt === 'undefined' ? undefined : BigInt,
	'%BigInt64Array%': typeof BigInt64Array === 'undefined' ? undefined : BigInt64Array,
	'%BigUint64Array%': typeof BigUint64Array === 'undefined' ? undefined : BigUint64Array,
	'%Boolean%': Boolean,
	'%DataView%': typeof DataView === 'undefined' ? undefined : DataView,
	'%Date%': Date,
	'%decodeURI%': decodeURI,
	'%decodeURIComponent%': decodeURIComponent,
	'%encodeURI%': encodeURI,
	'%encodeURIComponent%': encodeURIComponent,
	'%Error%': $Error,
	'%eval%': eval, // eslint-disable-line no-eval
	'%EvalError%': $EvalError,
	'%Float32Array%': typeof Float32Array === 'undefined' ? undefined : Float32Array,
	'%Float64Array%': typeof Float64Array === 'undefined' ? undefined : Float64Array,
	'%FinalizationRegistry%': typeof FinalizationRegistry === 'undefined' ? undefined : FinalizationRegistry,
	'%Function%': $Function,
	'%GeneratorFunction%': needsEval,
	'%Int8Array%': typeof Int8Array === 'undefined' ? undefined : Int8Array,
	'%Int16Array%': typeof Int16Array === 'undefined' ? undefined : Int16Array,
	'%Int32Array%': typeof Int32Array === 'undefined' ? undefined : Int32Array,
	'%isFinite%': isFinite,
	'%isNaN%': isNaN,
	'%IteratorPrototype%': hasSymbols && getProto ? getProto(getProto([][Symbol.iterator]())) : undefined,
	'%JSON%': typeof JSON === 'object' ? JSON : undefined,
	'%Map%': typeof Map === 'undefined' ? undefined : Map,
	'%MapIteratorPrototype%': typeof Map === 'undefined' || !hasSymbols || !getProto ? undefined : getProto(new Map()[Symbol.iterator]()),
	'%Math%': Math,
	'%Number%': Number,
	'%Object%': Object,
	'%parseFloat%': parseFloat,
	'%parseInt%': parseInt,
	'%Promise%': typeof Promise === 'undefined' ? undefined : Promise,
	'%Proxy%': typeof Proxy === 'undefined' ? undefined : Proxy,
	'%RangeError%': $RangeError,
	'%ReferenceError%': $ReferenceError,
	'%Reflect%': typeof Reflect === 'undefined' ? undefined : Reflect,
	'%RegExp%': RegExp,
	'%Set%': typeof Set === 'undefined' ? undefined : Set,
	'%SetIteratorPrototype%': typeof Set === 'undefined' || !hasSymbols || !getProto ? undefined : getProto(new Set()[Symbol.iterator]()),
	'%SharedArrayBuffer%': typeof SharedArrayBuffer === 'undefined' ? undefined : SharedArrayBuffer,
	'%String%': String,
	'%StringIteratorPrototype%': hasSymbols && getProto ? getProto(''[Symbol.iterator]()) : undefined,
	'%Symbol%': hasSymbols ? Symbol : undefined,
	'%SyntaxError%': $SyntaxError,
	'%ThrowTypeError%': ThrowTypeError,
	'%TypedArray%': TypedArray,
	'%TypeError%': $TypeError,
	'%Uint8Array%': typeof Uint8Array === 'undefined' ? undefined : Uint8Array,
	'%Uint8ClampedArray%': typeof Uint8ClampedArray === 'undefined' ? undefined : Uint8ClampedArray,
	'%Uint16Array%': typeof Uint16Array === 'undefined' ? undefined : Uint16Array,
	'%Uint32Array%': typeof Uint32Array === 'undefined' ? undefined : Uint32Array,
	'%URIError%': $URIError,
	'%WeakMap%': typeof WeakMap === 'undefined' ? undefined : WeakMap,
	'%WeakRef%': typeof WeakRef === 'undefined' ? undefined : WeakRef,
	'%WeakSet%': typeof WeakSet === 'undefined' ? undefined : WeakSet
};

if (getProto) {
	try {
		null.error; // eslint-disable-line no-unused-expressions
	} catch (e) {
		// https://github.com/tc39/proposal-shadowrealm/pull/384#issuecomment-1364264229
		var errorProto = getProto(getProto(e));
		INTRINSICS['%Error.prototype%'] = errorProto;
	}
}

var doEval = function doEval(name) {
	var value;
	if (name === '%AsyncFunction%') {
		value = getEvalledConstructor('async function () {}');
	} else if (name === '%GeneratorFunction%') {
		value = getEvalledConstructor('function* () {}');
	} else if (name === '%AsyncGeneratorFunction%') {
		value = getEvalledConstructor('async function* () {}');
	} else if (name === '%AsyncGenerator%') {
		var fn = doEval('%AsyncGeneratorFunction%');
		if (fn) {
			value = fn.prototype;
		}
	} else if (name === '%AsyncIteratorPrototype%') {
		var gen = doEval('%AsyncGenerator%');
		if (gen && getProto) {
			value = getProto(gen.prototype);
		}
	}

	INTRINSICS[name] = value;

	return value;
};

var LEGACY_ALIASES = {
	__proto__: null,
	'%ArrayBufferPrototype%': ['ArrayBuffer', 'prototype'],
	'%ArrayPrototype%': ['Array', 'prototype'],
	'%ArrayProto_entries%': ['Array', 'prototype', 'entries'],
	'%ArrayProto_forEach%': ['Array', 'prototype', 'forEach'],
	'%ArrayProto_keys%': ['Array', 'prototype', 'keys'],
	'%ArrayProto_values%': ['Array', 'prototype', 'values'],
	'%AsyncFunctionPrototype%': ['AsyncFunction', 'prototype'],
	'%AsyncGenerator%': ['AsyncGeneratorFunction', 'prototype'],
	'%AsyncGeneratorPrototype%': ['AsyncGeneratorFunction', 'prototype', 'prototype'],
	'%BooleanPrototype%': ['Boolean', 'prototype'],
	'%DataViewPrototype%': ['DataView', 'prototype'],
	'%DatePrototype%': ['Date', 'prototype'],
	'%ErrorPrototype%': ['Error', 'prototype'],
	'%EvalErrorPrototype%': ['EvalError', 'prototype'],
	'%Float32ArrayPrototype%': ['Float32Array', 'prototype'],
	'%Float64ArrayPrototype%': ['Float64Array', 'prototype'],
	'%FunctionPrototype%': ['Function', 'prototype'],
	'%Generator%': ['GeneratorFunction', 'prototype'],
	'%GeneratorPrototype%': ['GeneratorFunction', 'prototype', 'prototype'],
	'%Int8ArrayPrototype%': ['Int8Array', 'prototype'],
	'%Int16ArrayPrototype%': ['Int16Array', 'prototype'],
	'%Int32ArrayPrototype%': ['Int32Array', 'prototype'],
	'%JSONParse%': ['JSON', 'parse'],
	'%JSONStringify%': ['JSON', 'stringify'],
	'%MapPrototype%': ['Map', 'prototype'],
	'%NumberPrototype%': ['Number', 'prototype'],
	'%ObjectPrototype%': ['Object', 'prototype'],
	'%ObjProto_toString%': ['Object', 'prototype', 'toString'],
	'%ObjProto_valueOf%': ['Object', 'prototype', 'valueOf'],
	'%PromisePrototype%': ['Promise', 'prototype'],
	'%PromiseProto_then%': ['Promise', 'prototype', 'then'],
	'%Promise_all%': ['Promise', 'all'],
	'%Promise_reject%': ['Promise', 'reject'],
	'%Promise_resolve%': ['Promise', 'resolve'],
	'%RangeErrorPrototype%': ['RangeError', 'prototype'],
	'%ReferenceErrorPrototype%': ['ReferenceError', 'prototype'],
	'%RegExpPrototype%': ['RegExp', 'prototype'],
	'%SetPrototype%': ['Set', 'prototype'],
	'%SharedArrayBufferPrototype%': ['SharedArrayBuffer', 'prototype'],
	'%StringPrototype%': ['String', 'prototype'],
	'%SymbolPrototype%': ['Symbol', 'prototype'],
	'%SyntaxErrorPrototype%': ['SyntaxError', 'prototype'],
	'%TypedArrayPrototype%': ['TypedArray', 'prototype'],
	'%TypeErrorPrototype%': ['TypeError', 'prototype'],
	'%Uint8ArrayPrototype%': ['Uint8Array', 'prototype'],
	'%Uint8ClampedArrayPrototype%': ['Uint8ClampedArray', 'prototype'],
	'%Uint16ArrayPrototype%': ['Uint16Array', 'prototype'],
	'%Uint32ArrayPrototype%': ['Uint32Array', 'prototype'],
	'%URIErrorPrototype%': ['URIError', 'prototype'],
	'%WeakMapPrototype%': ['WeakMap', 'prototype'],
	'%WeakSetPrototype%': ['WeakSet', 'prototype']
};

var bind = require('function-bind');
var hasOwn = require('hasown');
var $concat = bind.call(Function.call, Array.prototype.concat);
var $spliceApply = bind.call(Function.apply, Array.prototype.splice);
var $replace = bind.call(Function.call, String.prototype.replace);
var $strSlice = bind.call(Function.call, String.prototype.slice);
var $exec = bind.call(Function.call, RegExp.prototype.exec);

/* adapted from https://github.com/lodash/lodash/blob/4.17.15/dist/lodash.js#L6735-L6744 */
var rePropName = /[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g;
var reEscapeChar = /\\(\\)?/g; /** Used to match backslashes in property paths. */
var stringToPath = function stringToPath(string) {
	var first = $strSlice(string, 0, 1);
	var last = $strSlice(string, -1);
	if (first === '%' && last !== '%') {
		throw new $SyntaxError('invalid intrinsic syntax, expected closing `%`');
	} else if (last === '%' && first !== '%') {
		throw new $SyntaxError('invalid intrinsic syntax, expected opening `%`');
	}
	var result = [];
	$replace(string, rePropName, function (match, number, quote, subString) {
		result[result.length] = quote ? $replace(subString, reEscapeChar, '$1') : number || match;
	});
	return result;
};
/* end adaptation */

var getBaseIntrinsic = function getBaseIntrinsic(name, allowMissing) {
	var intrinsicName = name;
	var alias;
	if (hasOwn(LEGACY_ALIASES, intrinsicName)) {
		alias = LEGACY_ALIASES[intrinsicName];
		intrinsicName = '%' + alias[0] + '%';
	}

	if (hasOwn(INTRINSICS, intrinsicName)) {
		var value = INTRINSICS[intrinsicName];
		if (value === needsEval) {
			value = doEval(intrinsicName);
		}
		if (typeof value === 'undefined' && !allowMissing) {
			throw new $TypeError('intrinsic ' + name + ' exists, but is not available. Please file an issue!');
		}

		return {
			alias: alias,
			name: intrinsicName,
			value: value
		};
	}

	throw new $SyntaxError('intrinsic ' + name + ' does not exist!');
};

module.exports = function GetIntrinsic(name, allowMissing) {
	if (typeof name !== 'string' || name.length === 0) {
		throw new $TypeError('intrinsic name must be a non-empty string');
	}
	if (arguments.length > 1 && typeof allowMissing !== 'boolean') {
		throw new $TypeError('"allowMissing" argument must be a boolean');
	}

	if ($exec(/^%?[^%]*%?$/, name) === null) {
		throw new $SyntaxError('`%` may not be present anywhere but at the beginning and end of the intrinsic name');
	}
	var parts = stringToPath(name);
	var intrinsicBaseName = parts.length > 0 ? parts[0] : '';

	var intrinsic = getBaseIntrinsic('%' + intrinsicBaseName + '%', allowMissing);
	var intrinsicRealName = intrinsic.name;
	var value = intrinsic.value;
	var skipFurtherCaching = false;

	var alias = intrinsic.alias;
	if (alias) {
		intrinsicBaseName = alias[0];
		$spliceApply(parts, $concat([0, 1], alias));
	}

	for (var i = 1, isOwn = true; i < parts.length; i += 1) {
		var part = parts[i];
		var first = $strSlice(part, 0, 1);
		var last = $strSlice(part, -1);
		if (
			(
				(first === '"' || first === "'" || first === '`')
				|| (last === '"' || last === "'" || last === '`')
			)
			&& first !== last
		) {
			throw new $SyntaxError('property names with quotes must have matching quotes');
		}
		if (part === 'constructor' || !isOwn) {
			skipFurtherCaching = true;
		}

		intrinsicBaseName += '.' + part;
		intrinsicRealName = '%' + intrinsicBaseName + '%';

		if (hasOwn(INTRINSICS, intrinsicRealName)) {
			value = INTRINSICS[intrinsicRealName];
		} else if (value != null) {
			if (!(part in value)) {
				if (!allowMissing) {
					throw new $TypeError('base intrinsic for ' + name + ' exists, but the property is not available.');
				}
				return void undefined;
			}
			if ($gOPD && (i + 1) >= parts.length) {
				var desc = $gOPD(value, part);
				isOwn = !!desc;

				// By convention, when a data property is converted to an accessor
				// property to emulate a data property that does not suffer from
				// the override mistake, that accessor's getter is marked with
				// an `originalValue` property. Here, when we detect this, we
				// uphold the illusion by pretending to see that original data
				// property, i.e., returning the value rather than the getter
				// itself.
				if (isOwn && 'get' in desc && !('originalValue' in desc.get)) {
					value = desc.get;
				} else {
					value = value[part];
				}
			} else {
				isOwn = hasOwn(value, part);
				value = value[part];
			}

			if (isOwn && !skipFurtherCaching) {
				INTRINSICS[intrinsicRealName] = value;
			}
		}
	}
	return value;
};

},{"es-errors":7,"es-errors/eval":6,"es-errors/range":8,"es-errors/ref":9,"es-errors/syntax":10,"es-errors/type":11,"es-errors/uri":12,"function-bind":14,"has-proto":18,"has-symbols":19,"hasown":21}],16:[function(require,module,exports){
'use strict';

var GetIntrinsic = require('get-intrinsic');

var $gOPD = GetIntrinsic('%Object.getOwnPropertyDescriptor%', true);

if ($gOPD) {
	try {
		$gOPD([], 'length');
	} catch (e) {
		// IE 8 has a broken gOPD
		$gOPD = null;
	}
}

module.exports = $gOPD;

},{"get-intrinsic":15}],17:[function(require,module,exports){
'use strict';

var $defineProperty = require('es-define-property');

var hasPropertyDescriptors = function hasPropertyDescriptors() {
	return !!$defineProperty;
};

hasPropertyDescriptors.hasArrayLengthDefineBug = function hasArrayLengthDefineBug() {
	// node v0.6 has a bug where array lengths can be Set but not Defined
	if (!$defineProperty) {
		return null;
	}
	try {
		return $defineProperty([], 'length', { value: 1 }).length !== 1;
	} catch (e) {
		// In Firefox 4-22, defining length on an array throws an exception.
		return true;
	}
};

module.exports = hasPropertyDescriptors;

},{"es-define-property":5}],18:[function(require,module,exports){
'use strict';

var test = {
	__proto__: null,
	foo: {}
};

var $Object = Object;

/** @type {import('.')} */
module.exports = function hasProto() {
	// @ts-expect-error: TS errors on an inherited property for some reason
	return { __proto__: test }.foo === test.foo
		&& !(test instanceof $Object);
};

},{}],19:[function(require,module,exports){
'use strict';

var origSymbol = typeof Symbol !== 'undefined' && Symbol;
var hasSymbolSham = require('./shams');

module.exports = function hasNativeSymbols() {
	if (typeof origSymbol !== 'function') { return false; }
	if (typeof Symbol !== 'function') { return false; }
	if (typeof origSymbol('foo') !== 'symbol') { return false; }
	if (typeof Symbol('bar') !== 'symbol') { return false; }

	return hasSymbolSham();
};

},{"./shams":20}],20:[function(require,module,exports){
'use strict';

/* eslint complexity: [2, 18], max-statements: [2, 33] */
module.exports = function hasSymbols() {
	if (typeof Symbol !== 'function' || typeof Object.getOwnPropertySymbols !== 'function') { return false; }
	if (typeof Symbol.iterator === 'symbol') { return true; }

	var obj = {};
	var sym = Symbol('test');
	var symObj = Object(sym);
	if (typeof sym === 'string') { return false; }

	if (Object.prototype.toString.call(sym) !== '[object Symbol]') { return false; }
	if (Object.prototype.toString.call(symObj) !== '[object Symbol]') { return false; }

	// temp disabled per https://github.com/ljharb/object.assign/issues/17
	// if (sym instanceof Symbol) { return false; }
	// temp disabled per https://github.com/WebReflection/get-own-property-symbols/issues/4
	// if (!(symObj instanceof Symbol)) { return false; }

	// if (typeof Symbol.prototype.toString !== 'function') { return false; }
	// if (String(sym) !== Symbol.prototype.toString.call(sym)) { return false; }

	var symVal = 42;
	obj[sym] = symVal;
	for (sym in obj) { return false; } // eslint-disable-line no-restricted-syntax, no-unreachable-loop
	if (typeof Object.keys === 'function' && Object.keys(obj).length !== 0) { return false; }

	if (typeof Object.getOwnPropertyNames === 'function' && Object.getOwnPropertyNames(obj).length !== 0) { return false; }

	var syms = Object.getOwnPropertySymbols(obj);
	if (syms.length !== 1 || syms[0] !== sym) { return false; }

	if (!Object.prototype.propertyIsEnumerable.call(obj, sym)) { return false; }

	if (typeof Object.getOwnPropertyDescriptor === 'function') {
		var descriptor = Object.getOwnPropertyDescriptor(obj, sym);
		if (descriptor.value !== symVal || descriptor.enumerable !== true) { return false; }
	}

	return true;
};

},{}],21:[function(require,module,exports){
'use strict';

var call = Function.prototype.call;
var $hasOwn = Object.prototype.hasOwnProperty;
var bind = require('function-bind');

/** @type {import('.')} */
module.exports = bind.call(call, $hasOwn);

},{"function-bind":14}],22:[function(require,module,exports){
(function (global){(function (){
var hasMap = typeof Map === 'function' && Map.prototype;
var mapSizeDescriptor = Object.getOwnPropertyDescriptor && hasMap ? Object.getOwnPropertyDescriptor(Map.prototype, 'size') : null;
var mapSize = hasMap && mapSizeDescriptor && typeof mapSizeDescriptor.get === 'function' ? mapSizeDescriptor.get : null;
var mapForEach = hasMap && Map.prototype.forEach;
var hasSet = typeof Set === 'function' && Set.prototype;
var setSizeDescriptor = Object.getOwnPropertyDescriptor && hasSet ? Object.getOwnPropertyDescriptor(Set.prototype, 'size') : null;
var setSize = hasSet && setSizeDescriptor && typeof setSizeDescriptor.get === 'function' ? setSizeDescriptor.get : null;
var setForEach = hasSet && Set.prototype.forEach;
var hasWeakMap = typeof WeakMap === 'function' && WeakMap.prototype;
var weakMapHas = hasWeakMap ? WeakMap.prototype.has : null;
var hasWeakSet = typeof WeakSet === 'function' && WeakSet.prototype;
var weakSetHas = hasWeakSet ? WeakSet.prototype.has : null;
var hasWeakRef = typeof WeakRef === 'function' && WeakRef.prototype;
var weakRefDeref = hasWeakRef ? WeakRef.prototype.deref : null;
var booleanValueOf = Boolean.prototype.valueOf;
var objectToString = Object.prototype.toString;
var functionToString = Function.prototype.toString;
var $match = String.prototype.match;
var $slice = String.prototype.slice;
var $replace = String.prototype.replace;
var $toUpperCase = String.prototype.toUpperCase;
var $toLowerCase = String.prototype.toLowerCase;
var $test = RegExp.prototype.test;
var $concat = Array.prototype.concat;
var $join = Array.prototype.join;
var $arrSlice = Array.prototype.slice;
var $floor = Math.floor;
var bigIntValueOf = typeof BigInt === 'function' ? BigInt.prototype.valueOf : null;
var gOPS = Object.getOwnPropertySymbols;
var symToString = typeof Symbol === 'function' && typeof Symbol.iterator === 'symbol' ? Symbol.prototype.toString : null;
var hasShammedSymbols = typeof Symbol === 'function' && typeof Symbol.iterator === 'object';
// ie, `has-tostringtag/shams
var toStringTag = typeof Symbol === 'function' && Symbol.toStringTag && (typeof Symbol.toStringTag === hasShammedSymbols ? 'object' : 'symbol')
    ? Symbol.toStringTag
    : null;
var isEnumerable = Object.prototype.propertyIsEnumerable;

var gPO = (typeof Reflect === 'function' ? Reflect.getPrototypeOf : Object.getPrototypeOf) || (
    [].__proto__ === Array.prototype // eslint-disable-line no-proto
        ? function (O) {
            return O.__proto__; // eslint-disable-line no-proto
        }
        : null
);

function addNumericSeparator(num, str) {
    if (
        num === Infinity
        || num === -Infinity
        || num !== num
        || (num && num > -1000 && num < 1000)
        || $test.call(/e/, str)
    ) {
        return str;
    }
    var sepRegex = /[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;
    if (typeof num === 'number') {
        var int = num < 0 ? -$floor(-num) : $floor(num); // trunc(num)
        if (int !== num) {
            var intStr = String(int);
            var dec = $slice.call(str, intStr.length + 1);
            return $replace.call(intStr, sepRegex, '$&_') + '.' + $replace.call($replace.call(dec, /([0-9]{3})/g, '$&_'), /_$/, '');
        }
    }
    return $replace.call(str, sepRegex, '$&_');
}

var utilInspect = require('./util.inspect');
var inspectCustom = utilInspect.custom;
var inspectSymbol = isSymbol(inspectCustom) ? inspectCustom : null;

module.exports = function inspect_(obj, options, depth, seen) {
    var opts = options || {};

    if (has(opts, 'quoteStyle') && (opts.quoteStyle !== 'single' && opts.quoteStyle !== 'double')) {
        throw new TypeError('option "quoteStyle" must be "single" or "double"');
    }
    if (
        has(opts, 'maxStringLength') && (typeof opts.maxStringLength === 'number'
            ? opts.maxStringLength < 0 && opts.maxStringLength !== Infinity
            : opts.maxStringLength !== null
        )
    ) {
        throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');
    }
    var customInspect = has(opts, 'customInspect') ? opts.customInspect : true;
    if (typeof customInspect !== 'boolean' && customInspect !== 'symbol') {
        throw new TypeError('option "customInspect", if provided, must be `true`, `false`, or `\'symbol\'`');
    }

    if (
        has(opts, 'indent')
        && opts.indent !== null
        && opts.indent !== '\t'
        && !(parseInt(opts.indent, 10) === opts.indent && opts.indent > 0)
    ) {
        throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');
    }
    if (has(opts, 'numericSeparator') && typeof opts.numericSeparator !== 'boolean') {
        throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');
    }
    var numericSeparator = opts.numericSeparator;

    if (typeof obj === 'undefined') {
        return 'undefined';
    }
    if (obj === null) {
        return 'null';
    }
    if (typeof obj === 'boolean') {
        return obj ? 'true' : 'false';
    }

    if (typeof obj === 'string') {
        return inspectString(obj, opts);
    }
    if (typeof obj === 'number') {
        if (obj === 0) {
            return Infinity / obj > 0 ? '0' : '-0';
        }
        var str = String(obj);
        return numericSeparator ? addNumericSeparator(obj, str) : str;
    }
    if (typeof obj === 'bigint') {
        var bigIntStr = String(obj) + 'n';
        return numericSeparator ? addNumericSeparator(obj, bigIntStr) : bigIntStr;
    }

    var maxDepth = typeof opts.depth === 'undefined' ? 5 : opts.depth;
    if (typeof depth === 'undefined') { depth = 0; }
    if (depth >= maxDepth && maxDepth > 0 && typeof obj === 'object') {
        return isArray(obj) ? '[Array]' : '[Object]';
    }

    var indent = getIndent(opts, depth);

    if (typeof seen === 'undefined') {
        seen = [];
    } else if (indexOf(seen, obj) >= 0) {
        return '[Circular]';
    }

    function inspect(value, from, noIndent) {
        if (from) {
            seen = $arrSlice.call(seen);
            seen.push(from);
        }
        if (noIndent) {
            var newOpts = {
                depth: opts.depth
            };
            if (has(opts, 'quoteStyle')) {
                newOpts.quoteStyle = opts.quoteStyle;
            }
            return inspect_(value, newOpts, depth + 1, seen);
        }
        return inspect_(value, opts, depth + 1, seen);
    }

    if (typeof obj === 'function' && !isRegExp(obj)) { // in older engines, regexes are callable
        var name = nameOf(obj);
        var keys = arrObjKeys(obj, inspect);
        return '[Function' + (name ? ': ' + name : ' (anonymous)') + ']' + (keys.length > 0 ? ' { ' + $join.call(keys, ', ') + ' }' : '');
    }
    if (isSymbol(obj)) {
        var symString = hasShammedSymbols ? $replace.call(String(obj), /^(Symbol\(.*\))_[^)]*$/, '$1') : symToString.call(obj);
        return typeof obj === 'object' && !hasShammedSymbols ? markBoxed(symString) : symString;
    }
    if (isElement(obj)) {
        var s = '<' + $toLowerCase.call(String(obj.nodeName));
        var attrs = obj.attributes || [];
        for (var i = 0; i < attrs.length; i++) {
            s += ' ' + attrs[i].name + '=' + wrapQuotes(quote(attrs[i].value), 'double', opts);
        }
        s += '>';
        if (obj.childNodes && obj.childNodes.length) { s += '...'; }
        s += '</' + $toLowerCase.call(String(obj.nodeName)) + '>';
        return s;
    }
    if (isArray(obj)) {
        if (obj.length === 0) { return '[]'; }
        var xs = arrObjKeys(obj, inspect);
        if (indent && !singleLineValues(xs)) {
            return '[' + indentedJoin(xs, indent) + ']';
        }
        return '[ ' + $join.call(xs, ', ') + ' ]';
    }
    if (isError(obj)) {
        var parts = arrObjKeys(obj, inspect);
        if (!('cause' in Error.prototype) && 'cause' in obj && !isEnumerable.call(obj, 'cause')) {
            return '{ [' + String(obj) + '] ' + $join.call($concat.call('[cause]: ' + inspect(obj.cause), parts), ', ') + ' }';
        }
        if (parts.length === 0) { return '[' + String(obj) + ']'; }
        return '{ [' + String(obj) + '] ' + $join.call(parts, ', ') + ' }';
    }
    if (typeof obj === 'object' && customInspect) {
        if (inspectSymbol && typeof obj[inspectSymbol] === 'function' && utilInspect) {
            return utilInspect(obj, { depth: maxDepth - depth });
        } else if (customInspect !== 'symbol' && typeof obj.inspect === 'function') {
            return obj.inspect();
        }
    }
    if (isMap(obj)) {
        var mapParts = [];
        if (mapForEach) {
            mapForEach.call(obj, function (value, key) {
                mapParts.push(inspect(key, obj, true) + ' => ' + inspect(value, obj));
            });
        }
        return collectionOf('Map', mapSize.call(obj), mapParts, indent);
    }
    if (isSet(obj)) {
        var setParts = [];
        if (setForEach) {
            setForEach.call(obj, function (value) {
                setParts.push(inspect(value, obj));
            });
        }
        return collectionOf('Set', setSize.call(obj), setParts, indent);
    }
    if (isWeakMap(obj)) {
        return weakCollectionOf('WeakMap');
    }
    if (isWeakSet(obj)) {
        return weakCollectionOf('WeakSet');
    }
    if (isWeakRef(obj)) {
        return weakCollectionOf('WeakRef');
    }
    if (isNumber(obj)) {
        return markBoxed(inspect(Number(obj)));
    }
    if (isBigInt(obj)) {
        return markBoxed(inspect(bigIntValueOf.call(obj)));
    }
    if (isBoolean(obj)) {
        return markBoxed(booleanValueOf.call(obj));
    }
    if (isString(obj)) {
        return markBoxed(inspect(String(obj)));
    }
    // note: in IE 8, sometimes `global !== window` but both are the prototypes of each other
    /* eslint-env browser */
    if (typeof window !== 'undefined' && obj === window) {
        return '{ [object Window] }';
    }
    if (
        (typeof globalThis !== 'undefined' && obj === globalThis)
        || (typeof global !== 'undefined' && obj === global)
    ) {
        return '{ [object globalThis] }';
    }
    if (!isDate(obj) && !isRegExp(obj)) {
        var ys = arrObjKeys(obj, inspect);
        var isPlainObject = gPO ? gPO(obj) === Object.prototype : obj instanceof Object || obj.constructor === Object;
        var protoTag = obj instanceof Object ? '' : 'null prototype';
        var stringTag = !isPlainObject && toStringTag && Object(obj) === obj && toStringTag in obj ? $slice.call(toStr(obj), 8, -1) : protoTag ? 'Object' : '';
        var constructorTag = isPlainObject || typeof obj.constructor !== 'function' ? '' : obj.constructor.name ? obj.constructor.name + ' ' : '';
        var tag = constructorTag + (stringTag || protoTag ? '[' + $join.call($concat.call([], stringTag || [], protoTag || []), ': ') + '] ' : '');
        if (ys.length === 0) { return tag + '{}'; }
        if (indent) {
            return tag + '{' + indentedJoin(ys, indent) + '}';
        }
        return tag + '{ ' + $join.call(ys, ', ') + ' }';
    }
    return String(obj);
};

function wrapQuotes(s, defaultStyle, opts) {
    var quoteChar = (opts.quoteStyle || defaultStyle) === 'double' ? '"' : "'";
    return quoteChar + s + quoteChar;
}

function quote(s) {
    return $replace.call(String(s), /"/g, '&quot;');
}

function isArray(obj) { return toStr(obj) === '[object Array]' && (!toStringTag || !(typeof obj === 'object' && toStringTag in obj)); }
function isDate(obj) { return toStr(obj) === '[object Date]' && (!toStringTag || !(typeof obj === 'object' && toStringTag in obj)); }
function isRegExp(obj) { return toStr(obj) === '[object RegExp]' && (!toStringTag || !(typeof obj === 'object' && toStringTag in obj)); }
function isError(obj) { return toStr(obj) === '[object Error]' && (!toStringTag || !(typeof obj === 'object' && toStringTag in obj)); }
function isString(obj) { return toStr(obj) === '[object String]' && (!toStringTag || !(typeof obj === 'object' && toStringTag in obj)); }
function isNumber(obj) { return toStr(obj) === '[object Number]' && (!toStringTag || !(typeof obj === 'object' && toStringTag in obj)); }
function isBoolean(obj) { return toStr(obj) === '[object Boolean]' && (!toStringTag || !(typeof obj === 'object' && toStringTag in obj)); }

// Symbol and BigInt do have Symbol.toStringTag by spec, so that can't be used to eliminate false positives
function isSymbol(obj) {
    if (hasShammedSymbols) {
        return obj && typeof obj === 'object' && obj instanceof Symbol;
    }
    if (typeof obj === 'symbol') {
        return true;
    }
    if (!obj || typeof obj !== 'object' || !symToString) {
        return false;
    }
    try {
        symToString.call(obj);
        return true;
    } catch (e) {}
    return false;
}

function isBigInt(obj) {
    if (!obj || typeof obj !== 'object' || !bigIntValueOf) {
        return false;
    }
    try {
        bigIntValueOf.call(obj);
        return true;
    } catch (e) {}
    return false;
}

var hasOwn = Object.prototype.hasOwnProperty || function (key) { return key in this; };
function has(obj, key) {
    return hasOwn.call(obj, key);
}

function toStr(obj) {
    return objectToString.call(obj);
}

function nameOf(f) {
    if (f.name) { return f.name; }
    var m = $match.call(functionToString.call(f), /^function\s*([\w$]+)/);
    if (m) { return m[1]; }
    return null;
}

function indexOf(xs, x) {
    if (xs.indexOf) { return xs.indexOf(x); }
    for (var i = 0, l = xs.length; i < l; i++) {
        if (xs[i] === x) { return i; }
    }
    return -1;
}

function isMap(x) {
    if (!mapSize || !x || typeof x !== 'object') {
        return false;
    }
    try {
        mapSize.call(x);
        try {
            setSize.call(x);
        } catch (s) {
            return true;
        }
        return x instanceof Map; // core-js workaround, pre-v2.5.0
    } catch (e) {}
    return false;
}

function isWeakMap(x) {
    if (!weakMapHas || !x || typeof x !== 'object') {
        return false;
    }
    try {
        weakMapHas.call(x, weakMapHas);
        try {
            weakSetHas.call(x, weakSetHas);
        } catch (s) {
            return true;
        }
        return x instanceof WeakMap; // core-js workaround, pre-v2.5.0
    } catch (e) {}
    return false;
}

function isWeakRef(x) {
    if (!weakRefDeref || !x || typeof x !== 'object') {
        return false;
    }
    try {
        weakRefDeref.call(x);
        return true;
    } catch (e) {}
    return false;
}

function isSet(x) {
    if (!setSize || !x || typeof x !== 'object') {
        return false;
    }
    try {
        setSize.call(x);
        try {
            mapSize.call(x);
        } catch (m) {
            return true;
        }
        return x instanceof Set; // core-js workaround, pre-v2.5.0
    } catch (e) {}
    return false;
}

function isWeakSet(x) {
    if (!weakSetHas || !x || typeof x !== 'object') {
        return false;
    }
    try {
        weakSetHas.call(x, weakSetHas);
        try {
            weakMapHas.call(x, weakMapHas);
        } catch (s) {
            return true;
        }
        return x instanceof WeakSet; // core-js workaround, pre-v2.5.0
    } catch (e) {}
    return false;
}

function isElement(x) {
    if (!x || typeof x !== 'object') { return false; }
    if (typeof HTMLElement !== 'undefined' && x instanceof HTMLElement) {
        return true;
    }
    return typeof x.nodeName === 'string' && typeof x.getAttribute === 'function';
}

function inspectString(str, opts) {
    if (str.length > opts.maxStringLength) {
        var remaining = str.length - opts.maxStringLength;
        var trailer = '... ' + remaining + ' more character' + (remaining > 1 ? 's' : '');
        return inspectString($slice.call(str, 0, opts.maxStringLength), opts) + trailer;
    }
    // eslint-disable-next-line no-control-regex
    var s = $replace.call($replace.call(str, /(['\\])/g, '\\$1'), /[\x00-\x1f]/g, lowbyte);
    return wrapQuotes(s, 'single', opts);
}

function lowbyte(c) {
    var n = c.charCodeAt(0);
    var x = {
        8: 'b',
        9: 't',
        10: 'n',
        12: 'f',
        13: 'r'
    }[n];
    if (x) { return '\\' + x; }
    return '\\x' + (n < 0x10 ? '0' : '') + $toUpperCase.call(n.toString(16));
}

function markBoxed(str) {
    return 'Object(' + str + ')';
}

function weakCollectionOf(type) {
    return type + ' { ? }';
}

function collectionOf(type, size, entries, indent) {
    var joinedEntries = indent ? indentedJoin(entries, indent) : $join.call(entries, ', ');
    return type + ' (' + size + ') {' + joinedEntries + '}';
}

function singleLineValues(xs) {
    for (var i = 0; i < xs.length; i++) {
        if (indexOf(xs[i], '\n') >= 0) {
            return false;
        }
    }
    return true;
}

function getIndent(opts, depth) {
    var baseIndent;
    if (opts.indent === '\t') {
        baseIndent = '\t';
    } else if (typeof opts.indent === 'number' && opts.indent > 0) {
        baseIndent = $join.call(Array(opts.indent + 1), ' ');
    } else {
        return null;
    }
    return {
        base: baseIndent,
        prev: $join.call(Array(depth + 1), baseIndent)
    };
}

function indentedJoin(xs, indent) {
    if (xs.length === 0) { return ''; }
    var lineJoiner = '\n' + indent.prev + indent.base;
    return lineJoiner + $join.call(xs, ',' + lineJoiner) + '\n' + indent.prev;
}

function arrObjKeys(obj, inspect) {
    var isArr = isArray(obj);
    var xs = [];
    if (isArr) {
        xs.length = obj.length;
        for (var i = 0; i < obj.length; i++) {
            xs[i] = has(obj, i) ? inspect(obj[i], obj) : '';
        }
    }
    var syms = typeof gOPS === 'function' ? gOPS(obj) : [];
    var symMap;
    if (hasShammedSymbols) {
        symMap = {};
        for (var k = 0; k < syms.length; k++) {
            symMap['$' + syms[k]] = syms[k];
        }
    }

    for (var key in obj) { // eslint-disable-line no-restricted-syntax
        if (!has(obj, key)) { continue; } // eslint-disable-line no-restricted-syntax, no-continue
        if (isArr && String(Number(key)) === key && key < obj.length) { continue; } // eslint-disable-line no-restricted-syntax, no-continue
        if (hasShammedSymbols && symMap['$' + key] instanceof Symbol) {
            // this is to prevent shammed Symbols, which are stored as strings, from being included in the string key section
            continue; // eslint-disable-line no-restricted-syntax, no-continue
        } else if ($test.call(/[^\w$]/, key)) {
            xs.push(inspect(key, obj) + ': ' + inspect(obj[key], obj));
        } else {
            xs.push(key + ': ' + inspect(obj[key], obj));
        }
    }
    if (typeof gOPS === 'function') {
        for (var j = 0; j < syms.length; j++) {
            if (isEnumerable.call(obj, syms[j])) {
                xs.push('[' + inspect(syms[j]) + ']: ' + inspect(obj[syms[j]], obj));
            }
        }
    }
    return xs;
}

}).call(this)}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./util.inspect":1}],23:[function(require,module,exports){
(function (global){(function (){
/*! https://mths.be/punycode v1.4.1 by @mathias */
;(function(root) {

	/** Detect free variables */
	var freeExports = typeof exports == 'object' && exports &&
		!exports.nodeType && exports;
	var freeModule = typeof module == 'object' && module &&
		!module.nodeType && module;
	var freeGlobal = typeof global == 'object' && global;
	if (
		freeGlobal.global === freeGlobal ||
		freeGlobal.window === freeGlobal ||
		freeGlobal.self === freeGlobal
	) {
		root = freeGlobal;
	}

	/**
	 * The `punycode` object.
	 * @name punycode
	 * @type Object
	 */
	var punycode,

	/** Highest positive signed 32-bit float value */
	maxInt = 2147483647, // aka. 0x7FFFFFFF or 2^31-1

	/** Bootstring parameters */
	base = 36,
	tMin = 1,
	tMax = 26,
	skew = 38,
	damp = 700,
	initialBias = 72,
	initialN = 128, // 0x80
	delimiter = '-', // '\x2D'

	/** Regular expressions */
	regexPunycode = /^xn--/,
	regexNonASCII = /[^\x20-\x7E]/, // unprintable ASCII chars + non-ASCII chars
	regexSeparators = /[\x2E\u3002\uFF0E\uFF61]/g, // RFC 3490 separators

	/** Error messages */
	errors = {
		'overflow': 'Overflow: input needs wider integers to process',
		'not-basic': 'Illegal input >= 0x80 (not a basic code point)',
		'invalid-input': 'Invalid input'
	},

	/** Convenience shortcuts */
	baseMinusTMin = base - tMin,
	floor = Math.floor,
	stringFromCharCode = String.fromCharCode,

	/** Temporary variable */
	key;

	/*--------------------------------------------------------------------------*/

	/**
	 * A generic error utility function.
	 * @private
	 * @param {String} type The error type.
	 * @returns {Error} Throws a `RangeError` with the applicable error message.
	 */
	function error(type) {
		throw new RangeError(errors[type]);
	}

	/**
	 * A generic `Array#map` utility function.
	 * @private
	 * @param {Array} array The array to iterate over.
	 * @param {Function} callback The function that gets called for every array
	 * item.
	 * @returns {Array} A new array of values returned by the callback function.
	 */
	function map(array, fn) {
		var length = array.length;
		var result = [];
		while (length--) {
			result[length] = fn(array[length]);
		}
		return result;
	}

	/**
	 * A simple `Array#map`-like wrapper to work with domain name strings or email
	 * addresses.
	 * @private
	 * @param {String} domain The domain name or email address.
	 * @param {Function} callback The function that gets called for every
	 * character.
	 * @returns {Array} A new string of characters returned by the callback
	 * function.
	 */
	function mapDomain(string, fn) {
		var parts = string.split('@');
		var result = '';
		if (parts.length > 1) {
			// In email addresses, only the domain name should be punycoded. Leave
			// the local part (i.e. everything up to `@`) intact.
			result = parts[0] + '@';
			string = parts[1];
		}
		// Avoid `split(regex)` for IE8 compatibility. See #17.
		string = string.replace(regexSeparators, '\x2E');
		var labels = string.split('.');
		var encoded = map(labels, fn).join('.');
		return result + encoded;
	}

	/**
	 * Creates an array containing the numeric code points of each Unicode
	 * character in the string. While JavaScript uses UCS-2 internally,
	 * this function will convert a pair of surrogate halves (each of which
	 * UCS-2 exposes as separate characters) into a single code point,
	 * matching UTF-16.
	 * @see `punycode.ucs2.encode`
	 * @see <https://mathiasbynens.be/notes/javascript-encoding>
	 * @memberOf punycode.ucs2
	 * @name decode
	 * @param {String} string The Unicode input string (UCS-2).
	 * @returns {Array} The new array of code points.
	 */
	function ucs2decode(string) {
		var output = [],
		    counter = 0,
		    length = string.length,
		    value,
		    extra;
		while (counter < length) {
			value = string.charCodeAt(counter++);
			if (value >= 0xD800 && value <= 0xDBFF && counter < length) {
				// high surrogate, and there is a next character
				extra = string.charCodeAt(counter++);
				if ((extra & 0xFC00) == 0xDC00) { // low surrogate
					output.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);
				} else {
					// unmatched surrogate; only append this code unit, in case the next
					// code unit is the high surrogate of a surrogate pair
					output.push(value);
					counter--;
				}
			} else {
				output.push(value);
			}
		}
		return output;
	}

	/**
	 * Creates a string based on an array of numeric code points.
	 * @see `punycode.ucs2.decode`
	 * @memberOf punycode.ucs2
	 * @name encode
	 * @param {Array} codePoints The array of numeric code points.
	 * @returns {String} The new Unicode string (UCS-2).
	 */
	function ucs2encode(array) {
		return map(array, function(value) {
			var output = '';
			if (value > 0xFFFF) {
				value -= 0x10000;
				output += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);
				value = 0xDC00 | value & 0x3FF;
			}
			output += stringFromCharCode(value);
			return output;
		}).join('');
	}

	/**
	 * Converts a basic code point into a digit/integer.
	 * @see `digitToBasic()`
	 * @private
	 * @param {Number} codePoint The basic numeric code point value.
	 * @returns {Number} The numeric value of a basic code point (for use in
	 * representing integers) in the range `0` to `base - 1`, or `base` if
	 * the code point does not represent a value.
	 */
	function basicToDigit(codePoint) {
		if (codePoint - 48 < 10) {
			return codePoint - 22;
		}
		if (codePoint - 65 < 26) {
			return codePoint - 65;
		}
		if (codePoint - 97 < 26) {
			return codePoint - 97;
		}
		return base;
	}

	/**
	 * Converts a digit/integer into a basic code point.
	 * @see `basicToDigit()`
	 * @private
	 * @param {Number} digit The numeric value of a basic code point.
	 * @returns {Number} The basic code point whose value (when used for
	 * representing integers) is `digit`, which needs to be in the range
	 * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is
	 * used; else, the lowercase form is used. The behavior is undefined
	 * if `flag` is non-zero and `digit` has no uppercase form.
	 */
	function digitToBasic(digit, flag) {
		//  0..25 map to ASCII a..z or A..Z
		// 26..35 map to ASCII 0..9
		return digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);
	}

	/**
	 * Bias adaptation function as per section 3.4 of RFC 3492.
	 * https://tools.ietf.org/html/rfc3492#section-3.4
	 * @private
	 */
	function adapt(delta, numPoints, firstTime) {
		var k = 0;
		delta = firstTime ? floor(delta / damp) : delta >> 1;
		delta += floor(delta / numPoints);
		for (/* no initialization */; delta > baseMinusTMin * tMax >> 1; k += base) {
			delta = floor(delta / baseMinusTMin);
		}
		return floor(k + (baseMinusTMin + 1) * delta / (delta + skew));
	}

	/**
	 * Converts a Punycode string of ASCII-only symbols to a string of Unicode
	 * symbols.
	 * @memberOf punycode
	 * @param {String} input The Punycode string of ASCII-only symbols.
	 * @returns {String} The resulting string of Unicode symbols.
	 */
	function decode(input) {
		// Don't use UCS-2
		var output = [],
		    inputLength = input.length,
		    out,
		    i = 0,
		    n = initialN,
		    bias = initialBias,
		    basic,
		    j,
		    index,
		    oldi,
		    w,
		    k,
		    digit,
		    t,
		    /** Cached calculation results */
		    baseMinusT;

		// Handle the basic code points: let `basic` be the number of input code
		// points before the last delimiter, or `0` if there is none, then copy
		// the first basic code points to the output.

		basic = input.lastIndexOf(delimiter);
		if (basic < 0) {
			basic = 0;
		}

		for (j = 0; j < basic; ++j) {
			// if it's not a basic code point
			if (input.charCodeAt(j) >= 0x80) {
				error('not-basic');
			}
			output.push(input.charCodeAt(j));
		}

		// Main decoding loop: start just after the last delimiter if any basic code
		// points were copied; start at the beginning otherwise.

		for (index = basic > 0 ? basic + 1 : 0; index < inputLength; /* no final expression */) {

			// `index` is the index of the next character to be consumed.
			// Decode a generalized variable-length integer into `delta`,
			// which gets added to `i`. The overflow checking is easier
			// if we increase `i` as we go, then subtract off its starting
			// value at the end to obtain `delta`.
			for (oldi = i, w = 1, k = base; /* no condition */; k += base) {

				if (index >= inputLength) {
					error('invalid-input');
				}

				digit = basicToDigit(input.charCodeAt(index++));

				if (digit >= base || digit > floor((maxInt - i) / w)) {
					error('overflow');
				}

				i += digit * w;
				t = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);

				if (digit < t) {
					break;
				}

				baseMinusT = base - t;
				if (w > floor(maxInt / baseMinusT)) {
					error('overflow');
				}

				w *= baseMinusT;

			}

			out = output.length + 1;
			bias = adapt(i - oldi, out, oldi == 0);

			// `i` was supposed to wrap around from `out` to `0`,
			// incrementing `n` each time, so we'll fix that now:
			if (floor(i / out) > maxInt - n) {
				error('overflow');
			}

			n += floor(i / out);
			i %= out;

			// Insert `n` at position `i` of the output
			output.splice(i++, 0, n);

		}

		return ucs2encode(output);
	}

	/**
	 * Converts a string of Unicode symbols (e.g. a domain name label) to a
	 * Punycode string of ASCII-only symbols.
	 * @memberOf punycode
	 * @param {String} input The string of Unicode symbols.
	 * @returns {String} The resulting Punycode string of ASCII-only symbols.
	 */
	function encode(input) {
		var n,
		    delta,
		    handledCPCount,
		    basicLength,
		    bias,
		    j,
		    m,
		    q,
		    k,
		    t,
		    currentValue,
		    output = [],
		    /** `inputLength` will hold the number of code points in `input`. */
		    inputLength,
		    /** Cached calculation results */
		    handledCPCountPlusOne,
		    baseMinusT,
		    qMinusT;

		// Convert the input in UCS-2 to Unicode
		input = ucs2decode(input);

		// Cache the length
		inputLength = input.length;

		// Initialize the state
		n = initialN;
		delta = 0;
		bias = initialBias;

		// Handle the basic code points
		for (j = 0; j < inputLength; ++j) {
			currentValue = input[j];
			if (currentValue < 0x80) {
				output.push(stringFromCharCode(currentValue));
			}
		}

		handledCPCount = basicLength = output.length;

		// `handledCPCount` is the number of code points that have been handled;
		// `basicLength` is the number of basic code points.

		// Finish the basic string - if it is not empty - with a delimiter
		if (basicLength) {
			output.push(delimiter);
		}

		// Main encoding loop:
		while (handledCPCount < inputLength) {

			// All non-basic code points < n have been handled already. Find the next
			// larger one:
			for (m = maxInt, j = 0; j < inputLength; ++j) {
				currentValue = input[j];
				if (currentValue >= n && currentValue < m) {
					m = currentValue;
				}
			}

			// Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,
			// but guard against overflow
			handledCPCountPlusOne = handledCPCount + 1;
			if (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {
				error('overflow');
			}

			delta += (m - n) * handledCPCountPlusOne;
			n = m;

			for (j = 0; j < inputLength; ++j) {
				currentValue = input[j];

				if (currentValue < n && ++delta > maxInt) {
					error('overflow');
				}

				if (currentValue == n) {
					// Represent delta as a generalized variable-length integer
					for (q = delta, k = base; /* no condition */; k += base) {
						t = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);
						if (q < t) {
							break;
						}
						qMinusT = q - t;
						baseMinusT = base - t;
						output.push(
							stringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0))
						);
						q = floor(qMinusT / baseMinusT);
					}

					output.push(stringFromCharCode(digitToBasic(q, 0)));
					bias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);
					delta = 0;
					++handledCPCount;
				}
			}

			++delta;
			++n;

		}
		return output.join('');
	}

	/**
	 * Converts a Punycode string representing a domain name or an email address
	 * to Unicode. Only the Punycoded parts of the input will be converted, i.e.
	 * it doesn't matter if you call it on a string that has already been
	 * converted to Unicode.
	 * @memberOf punycode
	 * @param {String} input The Punycoded domain name or email address to
	 * convert to Unicode.
	 * @returns {String} The Unicode representation of the given Punycode
	 * string.
	 */
	function toUnicode(input) {
		return mapDomain(input, function(string) {
			return regexPunycode.test(string)
				? decode(string.slice(4).toLowerCase())
				: string;
		});
	}

	/**
	 * Converts a Unicode string representing a domain name or an email address to
	 * Punycode. Only the non-ASCII parts of the domain name will be converted,
	 * i.e. it doesn't matter if you call it with a domain that's already in
	 * ASCII.
	 * @memberOf punycode
	 * @param {String} input The domain name or email address to convert, as a
	 * Unicode string.
	 * @returns {String} The Punycode representation of the given domain name or
	 * email address.
	 */
	function toASCII(input) {
		return mapDomain(input, function(string) {
			return regexNonASCII.test(string)
				? 'xn--' + encode(string)
				: string;
		});
	}

	/*--------------------------------------------------------------------------*/

	/** Define the public API */
	punycode = {
		/**
		 * A string representing the current Punycode.js version number.
		 * @memberOf punycode
		 * @type String
		 */
		'version': '1.4.1',
		/**
		 * An object of methods to convert from JavaScript's internal character
		 * representation (UCS-2) to Unicode code points, and back.
		 * @see <https://mathiasbynens.be/notes/javascript-encoding>
		 * @memberOf punycode
		 * @type Object
		 */
		'ucs2': {
			'decode': ucs2decode,
			'encode': ucs2encode
		},
		'decode': decode,
		'encode': encode,
		'toASCII': toASCII,
		'toUnicode': toUnicode
	};

	/** Expose `punycode` */
	// Some AMD build optimizers, like r.js, check for specific condition patterns
	// like the following:
	if (
		typeof define == 'function' &&
		typeof define.amd == 'object' &&
		define.amd
	) {
		define('punycode', function() {
			return punycode;
		});
	} else if (freeExports && freeModule) {
		if (module.exports == freeExports) {
			// in Node.js, io.js, or RingoJS v0.8.0+
			freeModule.exports = punycode;
		} else {
			// in Narwhal or RingoJS v0.7.0-
			for (key in punycode) {
				punycode.hasOwnProperty(key) && (freeExports[key] = punycode[key]);
			}
		}
	} else {
		// in Rhino or a web browser
		root.punycode = punycode;
	}

}(this));

}).call(this)}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],24:[function(require,module,exports){
'use strict';

var GetIntrinsic = require('get-intrinsic');
var define = require('define-data-property');
var hasDescriptors = require('has-property-descriptors')();
var gOPD = require('gopd');

var $TypeError = require('es-errors/type');
var $floor = GetIntrinsic('%Math.floor%');

/** @type {import('.')} */
module.exports = function setFunctionLength(fn, length) {
	if (typeof fn !== 'function') {
		throw new $TypeError('`fn` is not a function');
	}
	if (typeof length !== 'number' || length < 0 || length > 0xFFFFFFFF || $floor(length) !== length) {
		throw new $TypeError('`length` must be a positive 32-bit integer');
	}

	var loose = arguments.length > 2 && !!arguments[2];

	var functionLengthIsConfigurable = true;
	var functionLengthIsWritable = true;
	if ('length' in fn && gOPD) {
		var desc = gOPD(fn, 'length');
		if (desc && !desc.configurable) {
			functionLengthIsConfigurable = false;
		}
		if (desc && !desc.writable) {
			functionLengthIsWritable = false;
		}
	}

	if (functionLengthIsConfigurable || functionLengthIsWritable || !loose) {
		if (hasDescriptors) {
			define(/** @type {Parameters<define>[0]} */ (fn), 'length', length, true, true);
		} else {
			define(/** @type {Parameters<define>[0]} */ (fn), 'length', length);
		}
	}
	return fn;
};

},{"define-data-property":4,"es-errors/type":11,"get-intrinsic":15,"gopd":16,"has-property-descriptors":17}],25:[function(require,module,exports){
'use strict';

var GetIntrinsic = require('get-intrinsic');
var callBound = require('call-bind/callBound');
var inspect = require('object-inspect');

var $TypeError = require('es-errors/type');
var $WeakMap = GetIntrinsic('%WeakMap%', true);
var $Map = GetIntrinsic('%Map%', true);

var $weakMapGet = callBound('WeakMap.prototype.get', true);
var $weakMapSet = callBound('WeakMap.prototype.set', true);
var $weakMapHas = callBound('WeakMap.prototype.has', true);
var $mapGet = callBound('Map.prototype.get', true);
var $mapSet = callBound('Map.prototype.set', true);
var $mapHas = callBound('Map.prototype.has', true);

/*
* This function traverses the list returning the node corresponding to the given key.
*
* That node is also moved to the head of the list, so that if it's accessed again we don't need to traverse the whole list. By doing so, all the recently used nodes can be accessed relatively quickly.
*/
/** @type {import('.').listGetNode} */
var listGetNode = function (list, key) { // eslint-disable-line consistent-return
	/** @type {typeof list | NonNullable<(typeof list)['next']>} */
	var prev = list;
	/** @type {(typeof list)['next']} */
	var curr;
	for (; (curr = prev.next) !== null; prev = curr) {
		if (curr.key === key) {
			prev.next = curr.next;
			// eslint-disable-next-line no-extra-parens
			curr.next = /** @type {NonNullable<typeof list.next>} */ (list.next);
			list.next = curr; // eslint-disable-line no-param-reassign
			return curr;
		}
	}
};

/** @type {import('.').listGet} */
var listGet = function (objects, key) {
	var node = listGetNode(objects, key);
	return node && node.value;
};
/** @type {import('.').listSet} */
var listSet = function (objects, key, value) {
	var node = listGetNode(objects, key);
	if (node) {
		node.value = value;
	} else {
		// Prepend the new node to the beginning of the list
		objects.next = /** @type {import('.').ListNode<typeof value>} */ ({ // eslint-disable-line no-param-reassign, no-extra-parens
			key: key,
			next: objects.next,
			value: value
		});
	}
};
/** @type {import('.').listHas} */
var listHas = function (objects, key) {
	return !!listGetNode(objects, key);
};

/** @type {import('.')} */
module.exports = function getSideChannel() {
	/** @type {WeakMap<object, unknown>} */ var $wm;
	/** @type {Map<object, unknown>} */ var $m;
	/** @type {import('.').RootNode<unknown>} */ var $o;

	/** @type {import('.').Channel} */
	var channel = {
		assert: function (key) {
			if (!channel.has(key)) {
				throw new $TypeError('Side channel does not contain ' + inspect(key));
			}
		},
		get: function (key) { // eslint-disable-line consistent-return
			if ($WeakMap && key && (typeof key === 'object' || typeof key === 'function')) {
				if ($wm) {
					return $weakMapGet($wm, key);
				}
			} else if ($Map) {
				if ($m) {
					return $mapGet($m, key);
				}
			} else {
				if ($o) { // eslint-disable-line no-lonely-if
					return listGet($o, key);
				}
			}
		},
		has: function (key) {
			if ($WeakMap && key && (typeof key === 'object' || typeof key === 'function')) {
				if ($wm) {
					return $weakMapHas($wm, key);
				}
			} else if ($Map) {
				if ($m) {
					return $mapHas($m, key);
				}
			} else {
				if ($o) { // eslint-disable-line no-lonely-if
					return listHas($o, key);
				}
			}
			return false;
		},
		set: function (key, value) {
			if ($WeakMap && key && (typeof key === 'object' || typeof key === 'function')) {
				if (!$wm) {
					$wm = new $WeakMap();
				}
				$weakMapSet($wm, key, value);
			} else if ($Map) {
				if (!$m) {
					$m = new $Map();
				}
				$mapSet($m, key, value);
			} else {
				if (!$o) {
					// Initialize the linked list as an empty node, so that we don't have to special-case handling of the first node: we can always refer to it as (previous node).next, instead of something like (list).head
					$o = { key: {}, next: null };
				}
				listSet($o, key, value);
			}
		}
	};
	return channel;
};

},{"call-bind/callBound":2,"es-errors/type":11,"get-intrinsic":15,"object-inspect":22}],26:[function(require,module,exports){
'use strict';

var replace = String.prototype.replace;
var percentTwenties = /%20/g;

var Format = {
    RFC1738: 'RFC1738',
    RFC3986: 'RFC3986'
};

module.exports = {
    'default': Format.RFC3986,
    formatters: {
        RFC1738: function (value) {
            return replace.call(value, percentTwenties, '+');
        },
        RFC3986: function (value) {
            return String(value);
        }
    },
    RFC1738: Format.RFC1738,
    RFC3986: Format.RFC3986
};

},{}],27:[function(require,module,exports){
'use strict';

var stringify = require('./stringify');
var parse = require('./parse');
var formats = require('./formats');

module.exports = {
    formats: formats,
    parse: parse,
    stringify: stringify
};

},{"./formats":26,"./parse":28,"./stringify":29}],28:[function(require,module,exports){
'use strict';

var utils = require('./utils');

var has = Object.prototype.hasOwnProperty;
var isArray = Array.isArray;

var defaults = {
    allowDots: false,
    allowEmptyArrays: false,
    allowPrototypes: false,
    allowSparse: false,
    arrayLimit: 20,
    charset: 'utf-8',
    charsetSentinel: false,
    comma: false,
    decodeDotInKeys: false,
    decoder: utils.decode,
    delimiter: '&',
    depth: 5,
    duplicates: 'combine',
    ignoreQueryPrefix: false,
    interpretNumericEntities: false,
    parameterLimit: 1000,
    parseArrays: true,
    plainObjects: false,
    strictNullHandling: false
};

var interpretNumericEntities = function (str) {
    return str.replace(/&#(\d+);/g, function ($0, numberStr) {
        return String.fromCharCode(parseInt(numberStr, 10));
    });
};

var parseArrayValue = function (val, options) {
    if (val && typeof val === 'string' && options.comma && val.indexOf(',') > -1) {
        return val.split(',');
    }

    return val;
};

// This is what browsers will submit when the  character occurs in an
// application/x-www-form-urlencoded body and the encoding of the page containing
// the form is iso-8859-1, or when the submitted form has an accept-charset
// attribute of iso-8859-1. Presumably also with other charsets that do not contain
// the  character, such as us-ascii.
var isoSentinel = 'utf8=%26%2310003%3B'; // encodeURIComponent('&#10003;')

// These are the percent-encoded utf-8 octets representing a checkmark, indicating that the request actually is utf-8 encoded.
var charsetSentinel = 'utf8=%E2%9C%93'; // encodeURIComponent('')

var parseValues = function parseQueryStringValues(str, options) {
    var obj = { __proto__: null };

    var cleanStr = options.ignoreQueryPrefix ? str.replace(/^\?/, '') : str;
    cleanStr = cleanStr.replace(/%5B/gi, '[').replace(/%5D/gi, ']');
    var limit = options.parameterLimit === Infinity ? undefined : options.parameterLimit;
    var parts = cleanStr.split(options.delimiter, limit);
    var skipIndex = -1; // Keep track of where the utf8 sentinel was found
    var i;

    var charset = options.charset;
    if (options.charsetSentinel) {
        for (i = 0; i < parts.length; ++i) {
            if (parts[i].indexOf('utf8=') === 0) {
                if (parts[i] === charsetSentinel) {
                    charset = 'utf-8';
                } else if (parts[i] === isoSentinel) {
                    charset = 'iso-8859-1';
                }
                skipIndex = i;
                i = parts.length; // The eslint settings do not allow break;
            }
        }
    }

    for (i = 0; i < parts.length; ++i) {
        if (i === skipIndex) {
            continue;
        }
        var part = parts[i];

        var bracketEqualsPos = part.indexOf(']=');
        var pos = bracketEqualsPos === -1 ? part.indexOf('=') : bracketEqualsPos + 1;

        var key, val;
        if (pos === -1) {
            key = options.decoder(part, defaults.decoder, charset, 'key');
            val = options.strictNullHandling ? null : '';
        } else {
            key = options.decoder(part.slice(0, pos), defaults.decoder, charset, 'key');
            val = utils.maybeMap(
                parseArrayValue(part.slice(pos + 1), options),
                function (encodedVal) {
                    return options.decoder(encodedVal, defaults.decoder, charset, 'value');
                }
            );
        }

        if (val && options.interpretNumericEntities && charset === 'iso-8859-1') {
            val = interpretNumericEntities(val);
        }

        if (part.indexOf('[]=') > -1) {
            val = isArray(val) ? [val] : val;
        }

        var existing = has.call(obj, key);
        if (existing && options.duplicates === 'combine') {
            obj[key] = utils.combine(obj[key], val);
        } else if (!existing || options.duplicates === 'last') {
            obj[key] = val;
        }
    }

    return obj;
};

var parseObject = function (chain, val, options, valuesParsed) {
    var leaf = valuesParsed ? val : parseArrayValue(val, options);

    for (var i = chain.length - 1; i >= 0; --i) {
        var obj;
        var root = chain[i];

        if (root === '[]' && options.parseArrays) {
            obj = options.allowEmptyArrays && leaf === '' ? [] : [].concat(leaf);
        } else {
            obj = options.plainObjects ? Object.create(null) : {};
            var cleanRoot = root.charAt(0) === '[' && root.charAt(root.length - 1) === ']' ? root.slice(1, -1) : root;
            var decodedRoot = options.decodeDotInKeys ? cleanRoot.replace(/%2E/g, '.') : cleanRoot;
            var index = parseInt(decodedRoot, 10);
            if (!options.parseArrays && decodedRoot === '') {
                obj = { 0: leaf };
            } else if (
                !isNaN(index)
                && root !== decodedRoot
                && String(index) === decodedRoot
                && index >= 0
                && (options.parseArrays && index <= options.arrayLimit)
            ) {
                obj = [];
                obj[index] = leaf;
            } else if (decodedRoot !== '__proto__') {
                obj[decodedRoot] = leaf;
            }
        }

        leaf = obj;
    }

    return leaf;
};

var parseKeys = function parseQueryStringKeys(givenKey, val, options, valuesParsed) {
    if (!givenKey) {
        return;
    }

    // Transform dot notation to bracket notation
    var key = options.allowDots ? givenKey.replace(/\.([^.[]+)/g, '[$1]') : givenKey;

    // The regex chunks

    var brackets = /(\[[^[\]]*])/;
    var child = /(\[[^[\]]*])/g;

    // Get the parent

    var segment = options.depth > 0 && brackets.exec(key);
    var parent = segment ? key.slice(0, segment.index) : key;

    // Stash the parent if it exists

    var keys = [];
    if (parent) {
        // If we aren't using plain objects, optionally prefix keys that would overwrite object prototype properties
        if (!options.plainObjects && has.call(Object.prototype, parent)) {
            if (!options.allowPrototypes) {
                return;
            }
        }

        keys.push(parent);
    }

    // Loop through children appending to the array until we hit depth

    var i = 0;
    while (options.depth > 0 && (segment = child.exec(key)) !== null && i < options.depth) {
        i += 1;
        if (!options.plainObjects && has.call(Object.prototype, segment[1].slice(1, -1))) {
            if (!options.allowPrototypes) {
                return;
            }
        }
        keys.push(segment[1]);
    }

    // If there's a remainder, just add whatever is left

    if (segment) {
        keys.push('[' + key.slice(segment.index) + ']');
    }

    return parseObject(keys, val, options, valuesParsed);
};

var normalizeParseOptions = function normalizeParseOptions(opts) {
    if (!opts) {
        return defaults;
    }

    if (typeof opts.allowEmptyArrays !== 'undefined' && typeof opts.allowEmptyArrays !== 'boolean') {
        throw new TypeError('`allowEmptyArrays` option can only be `true` or `false`, when provided');
    }

    if (typeof opts.decodeDotInKeys !== 'undefined' && typeof opts.decodeDotInKeys !== 'boolean') {
        throw new TypeError('`decodeDotInKeys` option can only be `true` or `false`, when provided');
    }

    if (opts.decoder !== null && typeof opts.decoder !== 'undefined' && typeof opts.decoder !== 'function') {
        throw new TypeError('Decoder has to be a function.');
    }

    if (typeof opts.charset !== 'undefined' && opts.charset !== 'utf-8' && opts.charset !== 'iso-8859-1') {
        throw new TypeError('The charset option must be either utf-8, iso-8859-1, or undefined');
    }
    var charset = typeof opts.charset === 'undefined' ? defaults.charset : opts.charset;

    var duplicates = typeof opts.duplicates === 'undefined' ? defaults.duplicates : opts.duplicates;

    if (duplicates !== 'combine' && duplicates !== 'first' && duplicates !== 'last') {
        throw new TypeError('The duplicates option must be either combine, first, or last');
    }

    var allowDots = typeof opts.allowDots === 'undefined' ? opts.decodeDotInKeys === true ? true : defaults.allowDots : !!opts.allowDots;

    return {
        allowDots: allowDots,
        allowEmptyArrays: typeof opts.allowEmptyArrays === 'boolean' ? !!opts.allowEmptyArrays : defaults.allowEmptyArrays,
        allowPrototypes: typeof opts.allowPrototypes === 'boolean' ? opts.allowPrototypes : defaults.allowPrototypes,
        allowSparse: typeof opts.allowSparse === 'boolean' ? opts.allowSparse : defaults.allowSparse,
        arrayLimit: typeof opts.arrayLimit === 'number' ? opts.arrayLimit : defaults.arrayLimit,
        charset: charset,
        charsetSentinel: typeof opts.charsetSentinel === 'boolean' ? opts.charsetSentinel : defaults.charsetSentinel,
        comma: typeof opts.comma === 'boolean' ? opts.comma : defaults.comma,
        decodeDotInKeys: typeof opts.decodeDotInKeys === 'boolean' ? opts.decodeDotInKeys : defaults.decodeDotInKeys,
        decoder: typeof opts.decoder === 'function' ? opts.decoder : defaults.decoder,
        delimiter: typeof opts.delimiter === 'string' || utils.isRegExp(opts.delimiter) ? opts.delimiter : defaults.delimiter,
        // eslint-disable-next-line no-implicit-coercion, no-extra-parens
        depth: (typeof opts.depth === 'number' || opts.depth === false) ? +opts.depth : defaults.depth,
        duplicates: duplicates,
        ignoreQueryPrefix: opts.ignoreQueryPrefix === true,
        interpretNumericEntities: typeof opts.interpretNumericEntities === 'boolean' ? opts.interpretNumericEntities : defaults.interpretNumericEntities,
        parameterLimit: typeof opts.parameterLimit === 'number' ? opts.parameterLimit : defaults.parameterLimit,
        parseArrays: opts.parseArrays !== false,
        plainObjects: typeof opts.plainObjects === 'boolean' ? opts.plainObjects : defaults.plainObjects,
        strictNullHandling: typeof opts.strictNullHandling === 'boolean' ? opts.strictNullHandling : defaults.strictNullHandling
    };
};

module.exports = function (str, opts) {
    var options = normalizeParseOptions(opts);

    if (str === '' || str === null || typeof str === 'undefined') {
        return options.plainObjects ? Object.create(null) : {};
    }

    var tempObj = typeof str === 'string' ? parseValues(str, options) : str;
    var obj = options.plainObjects ? Object.create(null) : {};

    // Iterate over the keys and setup the new object

    var keys = Object.keys(tempObj);
    for (var i = 0; i < keys.length; ++i) {
        var key = keys[i];
        var newObj = parseKeys(key, tempObj[key], options, typeof str === 'string');
        obj = utils.merge(obj, newObj, options);
    }

    if (options.allowSparse === true) {
        return obj;
    }

    return utils.compact(obj);
};

},{"./utils":30}],29:[function(require,module,exports){
'use strict';

var getSideChannel = require('side-channel');
var utils = require('./utils');
var formats = require('./formats');
var has = Object.prototype.hasOwnProperty;

var arrayPrefixGenerators = {
    brackets: function brackets(prefix) {
        return prefix + '[]';
    },
    comma: 'comma',
    indices: function indices(prefix, key) {
        return prefix + '[' + key + ']';
    },
    repeat: function repeat(prefix) {
        return prefix;
    }
};

var isArray = Array.isArray;
var push = Array.prototype.push;
var pushToArray = function (arr, valueOrArray) {
    push.apply(arr, isArray(valueOrArray) ? valueOrArray : [valueOrArray]);
};

var toISO = Date.prototype.toISOString;

var defaultFormat = formats['default'];
var defaults = {
    addQueryPrefix: false,
    allowDots: false,
    allowEmptyArrays: false,
    arrayFormat: 'indices',
    charset: 'utf-8',
    charsetSentinel: false,
    delimiter: '&',
    encode: true,
    encodeDotInKeys: false,
    encoder: utils.encode,
    encodeValuesOnly: false,
    format: defaultFormat,
    formatter: formats.formatters[defaultFormat],
    // deprecated
    indices: false,
    serializeDate: function serializeDate(date) {
        return toISO.call(date);
    },
    skipNulls: false,
    strictNullHandling: false
};

var isNonNullishPrimitive = function isNonNullishPrimitive(v) {
    return typeof v === 'string'
        || typeof v === 'number'
        || typeof v === 'boolean'
        || typeof v === 'symbol'
        || typeof v === 'bigint';
};

var sentinel = {};

var stringify = function stringify(
    object,
    prefix,
    generateArrayPrefix,
    commaRoundTrip,
    allowEmptyArrays,
    strictNullHandling,
    skipNulls,
    encodeDotInKeys,
    encoder,
    filter,
    sort,
    allowDots,
    serializeDate,
    format,
    formatter,
    encodeValuesOnly,
    charset,
    sideChannel
) {
    var obj = object;

    var tmpSc = sideChannel;
    var step = 0;
    var findFlag = false;
    while ((tmpSc = tmpSc.get(sentinel)) !== void undefined && !findFlag) {
        // Where object last appeared in the ref tree
        var pos = tmpSc.get(object);
        step += 1;
        if (typeof pos !== 'undefined') {
            if (pos === step) {
                throw new RangeError('Cyclic object value');
            } else {
                findFlag = true; // Break while
            }
        }
        if (typeof tmpSc.get(sentinel) === 'undefined') {
            step = 0;
        }
    }

    if (typeof filter === 'function') {
        obj = filter(prefix, obj);
    } else if (obj instanceof Date) {
        obj = serializeDate(obj);
    } else if (generateArrayPrefix === 'comma' && isArray(obj)) {
        obj = utils.maybeMap(obj, function (value) {
            if (value instanceof Date) {
                return serializeDate(value);
            }
            return value;
        });
    }

    if (obj === null) {
        if (strictNullHandling) {
            return encoder && !encodeValuesOnly ? encoder(prefix, defaults.encoder, charset, 'key', format) : prefix;
        }

        obj = '';
    }

    if (isNonNullishPrimitive(obj) || utils.isBuffer(obj)) {
        if (encoder) {
            var keyValue = encodeValuesOnly ? prefix : encoder(prefix, defaults.encoder, charset, 'key', format);
            return [formatter(keyValue) + '=' + formatter(encoder(obj, defaults.encoder, charset, 'value', format))];
        }
        return [formatter(prefix) + '=' + formatter(String(obj))];
    }

    var values = [];

    if (typeof obj === 'undefined') {
        return values;
    }

    var objKeys;
    if (generateArrayPrefix === 'comma' && isArray(obj)) {
        // we need to join elements in
        if (encodeValuesOnly && encoder) {
            obj = utils.maybeMap(obj, encoder);
        }
        objKeys = [{ value: obj.length > 0 ? obj.join(',') || null : void undefined }];
    } else if (isArray(filter)) {
        objKeys = filter;
    } else {
        var keys = Object.keys(obj);
        objKeys = sort ? keys.sort(sort) : keys;
    }

    var encodedPrefix = encodeDotInKeys ? prefix.replace(/\./g, '%2E') : prefix;

    var adjustedPrefix = commaRoundTrip && isArray(obj) && obj.length === 1 ? encodedPrefix + '[]' : encodedPrefix;

    if (allowEmptyArrays && isArray(obj) && obj.length === 0) {
        return adjustedPrefix + '[]';
    }

    for (var j = 0; j < objKeys.length; ++j) {
        var key = objKeys[j];
        var value = typeof key === 'object' && typeof key.value !== 'undefined' ? key.value : obj[key];

        if (skipNulls && value === null) {
            continue;
        }

        var encodedKey = allowDots && encodeDotInKeys ? key.replace(/\./g, '%2E') : key;
        var keyPrefix = isArray(obj)
            ? typeof generateArrayPrefix === 'function' ? generateArrayPrefix(adjustedPrefix, encodedKey) : adjustedPrefix
            : adjustedPrefix + (allowDots ? '.' + encodedKey : '[' + encodedKey + ']');

        sideChannel.set(object, step);
        var valueSideChannel = getSideChannel();
        valueSideChannel.set(sentinel, sideChannel);
        pushToArray(values, stringify(
            value,
            keyPrefix,
            generateArrayPrefix,
            commaRoundTrip,
            allowEmptyArrays,
            strictNullHandling,
            skipNulls,
            encodeDotInKeys,
            generateArrayPrefix === 'comma' && encodeValuesOnly && isArray(obj) ? null : encoder,
            filter,
            sort,
            allowDots,
            serializeDate,
            format,
            formatter,
            encodeValuesOnly,
            charset,
            valueSideChannel
        ));
    }

    return values;
};

var normalizeStringifyOptions = function normalizeStringifyOptions(opts) {
    if (!opts) {
        return defaults;
    }

    if (typeof opts.allowEmptyArrays !== 'undefined' && typeof opts.allowEmptyArrays !== 'boolean') {
        throw new TypeError('`allowEmptyArrays` option can only be `true` or `false`, when provided');
    }

    if (typeof opts.encodeDotInKeys !== 'undefined' && typeof opts.encodeDotInKeys !== 'boolean') {
        throw new TypeError('`encodeDotInKeys` option can only be `true` or `false`, when provided');
    }

    if (opts.encoder !== null && typeof opts.encoder !== 'undefined' && typeof opts.encoder !== 'function') {
        throw new TypeError('Encoder has to be a function.');
    }

    var charset = opts.charset || defaults.charset;
    if (typeof opts.charset !== 'undefined' && opts.charset !== 'utf-8' && opts.charset !== 'iso-8859-1') {
        throw new TypeError('The charset option must be either utf-8, iso-8859-1, or undefined');
    }

    var format = formats['default'];
    if (typeof opts.format !== 'undefined') {
        if (!has.call(formats.formatters, opts.format)) {
            throw new TypeError('Unknown format option provided.');
        }
        format = opts.format;
    }
    var formatter = formats.formatters[format];

    var filter = defaults.filter;
    if (typeof opts.filter === 'function' || isArray(opts.filter)) {
        filter = opts.filter;
    }

    var arrayFormat;
    if (opts.arrayFormat in arrayPrefixGenerators) {
        arrayFormat = opts.arrayFormat;
    } else if ('indices' in opts) {
        arrayFormat = opts.indices ? 'indices' : 'repeat';
    } else {
        arrayFormat = defaults.arrayFormat;
    }

    if ('commaRoundTrip' in opts && typeof opts.commaRoundTrip !== 'boolean') {
        throw new TypeError('`commaRoundTrip` must be a boolean, or absent');
    }

    var allowDots = typeof opts.allowDots === 'undefined' ? opts.encodeDotInKeys === true ? true : defaults.allowDots : !!opts.allowDots;

    return {
        addQueryPrefix: typeof opts.addQueryPrefix === 'boolean' ? opts.addQueryPrefix : defaults.addQueryPrefix,
        allowDots: allowDots,
        allowEmptyArrays: typeof opts.allowEmptyArrays === 'boolean' ? !!opts.allowEmptyArrays : defaults.allowEmptyArrays,
        arrayFormat: arrayFormat,
        charset: charset,
        charsetSentinel: typeof opts.charsetSentinel === 'boolean' ? opts.charsetSentinel : defaults.charsetSentinel,
        commaRoundTrip: opts.commaRoundTrip,
        delimiter: typeof opts.delimiter === 'undefined' ? defaults.delimiter : opts.delimiter,
        encode: typeof opts.encode === 'boolean' ? opts.encode : defaults.encode,
        encodeDotInKeys: typeof opts.encodeDotInKeys === 'boolean' ? opts.encodeDotInKeys : defaults.encodeDotInKeys,
        encoder: typeof opts.encoder === 'function' ? opts.encoder : defaults.encoder,
        encodeValuesOnly: typeof opts.encodeValuesOnly === 'boolean' ? opts.encodeValuesOnly : defaults.encodeValuesOnly,
        filter: filter,
        format: format,
        formatter: formatter,
        serializeDate: typeof opts.serializeDate === 'function' ? opts.serializeDate : defaults.serializeDate,
        skipNulls: typeof opts.skipNulls === 'boolean' ? opts.skipNulls : defaults.skipNulls,
        sort: typeof opts.sort === 'function' ? opts.sort : null,
        strictNullHandling: typeof opts.strictNullHandling === 'boolean' ? opts.strictNullHandling : defaults.strictNullHandling
    };
};

module.exports = function (object, opts) {
    var obj = object;
    var options = normalizeStringifyOptions(opts);

    var objKeys;
    var filter;

    if (typeof options.filter === 'function') {
        filter = options.filter;
        obj = filter('', obj);
    } else if (isArray(options.filter)) {
        filter = options.filter;
        objKeys = filter;
    }

    var keys = [];

    if (typeof obj !== 'object' || obj === null) {
        return '';
    }

    var generateArrayPrefix = arrayPrefixGenerators[options.arrayFormat];
    var commaRoundTrip = generateArrayPrefix === 'comma' && options.commaRoundTrip;

    if (!objKeys) {
        objKeys = Object.keys(obj);
    }

    if (options.sort) {
        objKeys.sort(options.sort);
    }

    var sideChannel = getSideChannel();
    for (var i = 0; i < objKeys.length; ++i) {
        var key = objKeys[i];

        if (options.skipNulls && obj[key] === null) {
            continue;
        }
        pushToArray(keys, stringify(
            obj[key],
            key,
            generateArrayPrefix,
            commaRoundTrip,
            options.allowEmptyArrays,
            options.strictNullHandling,
            options.skipNulls,
            options.encodeDotInKeys,
            options.encode ? options.encoder : null,
            options.filter,
            options.sort,
            options.allowDots,
            options.serializeDate,
            options.format,
            options.formatter,
            options.encodeValuesOnly,
            options.charset,
            sideChannel
        ));
    }

    var joined = keys.join(options.delimiter);
    var prefix = options.addQueryPrefix === true ? '?' : '';

    if (options.charsetSentinel) {
        if (options.charset === 'iso-8859-1') {
            // encodeURIComponent('&#10003;'), the "numeric entity" representation of a checkmark
            prefix += 'utf8=%26%2310003%3B&';
        } else {
            // encodeURIComponent('')
            prefix += 'utf8=%E2%9C%93&';
        }
    }

    return joined.length > 0 ? prefix + joined : '';
};

},{"./formats":26,"./utils":30,"side-channel":25}],30:[function(require,module,exports){
'use strict';

var formats = require('./formats');

var has = Object.prototype.hasOwnProperty;
var isArray = Array.isArray;

var hexTable = (function () {
    var array = [];
    for (var i = 0; i < 256; ++i) {
        array.push('%' + ((i < 16 ? '0' : '') + i.toString(16)).toUpperCase());
    }

    return array;
}());

var compactQueue = function compactQueue(queue) {
    while (queue.length > 1) {
        var item = queue.pop();
        var obj = item.obj[item.prop];

        if (isArray(obj)) {
            var compacted = [];

            for (var j = 0; j < obj.length; ++j) {
                if (typeof obj[j] !== 'undefined') {
                    compacted.push(obj[j]);
                }
            }

            item.obj[item.prop] = compacted;
        }
    }
};

var arrayToObject = function arrayToObject(source, options) {
    var obj = options && options.plainObjects ? Object.create(null) : {};
    for (var i = 0; i < source.length; ++i) {
        if (typeof source[i] !== 'undefined') {
            obj[i] = source[i];
        }
    }

    return obj;
};

var merge = function merge(target, source, options) {
    /* eslint no-param-reassign: 0 */
    if (!source) {
        return target;
    }

    if (typeof source !== 'object') {
        if (isArray(target)) {
            target.push(source);
        } else if (target && typeof target === 'object') {
            if ((options && (options.plainObjects || options.allowPrototypes)) || !has.call(Object.prototype, source)) {
                target[source] = true;
            }
        } else {
            return [target, source];
        }

        return target;
    }

    if (!target || typeof target !== 'object') {
        return [target].concat(source);
    }

    var mergeTarget = target;
    if (isArray(target) && !isArray(source)) {
        mergeTarget = arrayToObject(target, options);
    }

    if (isArray(target) && isArray(source)) {
        source.forEach(function (item, i) {
            if (has.call(target, i)) {
                var targetItem = target[i];
                if (targetItem && typeof targetItem === 'object' && item && typeof item === 'object') {
                    target[i] = merge(targetItem, item, options);
                } else {
                    target.push(item);
                }
            } else {
                target[i] = item;
            }
        });
        return target;
    }

    return Object.keys(source).reduce(function (acc, key) {
        var value = source[key];

        if (has.call(acc, key)) {
            acc[key] = merge(acc[key], value, options);
        } else {
            acc[key] = value;
        }
        return acc;
    }, mergeTarget);
};

var assign = function assignSingleSource(target, source) {
    return Object.keys(source).reduce(function (acc, key) {
        acc[key] = source[key];
        return acc;
    }, target);
};

var decode = function (str, decoder, charset) {
    var strWithoutPlus = str.replace(/\+/g, ' ');
    if (charset === 'iso-8859-1') {
        // unescape never throws, no try...catch needed:
        return strWithoutPlus.replace(/%[0-9a-f]{2}/gi, unescape);
    }
    // utf-8
    try {
        return decodeURIComponent(strWithoutPlus);
    } catch (e) {
        return strWithoutPlus;
    }
};

var limit = 1024;

/* eslint operator-linebreak: [2, "before"] */

var encode = function encode(str, defaultEncoder, charset, kind, format) {
    // This code was originally written by Brian White (mscdex) for the io.js core querystring library.
    // It has been adapted here for stricter adherence to RFC 3986
    if (str.length === 0) {
        return str;
    }

    var string = str;
    if (typeof str === 'symbol') {
        string = Symbol.prototype.toString.call(str);
    } else if (typeof str !== 'string') {
        string = String(str);
    }

    if (charset === 'iso-8859-1') {
        return escape(string).replace(/%u[0-9a-f]{4}/gi, function ($0) {
            return '%26%23' + parseInt($0.slice(2), 16) + '%3B';
        });
    }

    var out = '';
    for (var j = 0; j < string.length; j += limit) {
        var segment = string.length >= limit ? string.slice(j, j + limit) : string;
        var arr = [];

        for (var i = 0; i < segment.length; ++i) {
            var c = segment.charCodeAt(i);
            if (
                c === 0x2D // -
                || c === 0x2E // .
                || c === 0x5F // _
                || c === 0x7E // ~
                || (c >= 0x30 && c <= 0x39) // 0-9
                || (c >= 0x41 && c <= 0x5A) // a-z
                || (c >= 0x61 && c <= 0x7A) // A-Z
                || (format === formats.RFC1738 && (c === 0x28 || c === 0x29)) // ( )
            ) {
                arr[arr.length] = segment.charAt(i);
                continue;
            }

            if (c < 0x80) {
                arr[arr.length] = hexTable[c];
                continue;
            }

            if (c < 0x800) {
                arr[arr.length] = hexTable[0xC0 | (c >> 6)]
                    + hexTable[0x80 | (c & 0x3F)];
                continue;
            }

            if (c < 0xD800 || c >= 0xE000) {
                arr[arr.length] = hexTable[0xE0 | (c >> 12)]
                    + hexTable[0x80 | ((c >> 6) & 0x3F)]
                    + hexTable[0x80 | (c & 0x3F)];
                continue;
            }

            i += 1;
            c = 0x10000 + (((c & 0x3FF) << 10) | (segment.charCodeAt(i) & 0x3FF));

            arr[arr.length] = hexTable[0xF0 | (c >> 18)]
                + hexTable[0x80 | ((c >> 12) & 0x3F)]
                + hexTable[0x80 | ((c >> 6) & 0x3F)]
                + hexTable[0x80 | (c & 0x3F)];
        }

        out += arr.join('');
    }

    return out;
};

var compact = function compact(value) {
    var queue = [{ obj: { o: value }, prop: 'o' }];
    var refs = [];

    for (var i = 0; i < queue.length; ++i) {
        var item = queue[i];
        var obj = item.obj[item.prop];

        var keys = Object.keys(obj);
        for (var j = 0; j < keys.length; ++j) {
            var key = keys[j];
            var val = obj[key];
            if (typeof val === 'object' && val !== null && refs.indexOf(val) === -1) {
                queue.push({ obj: obj, prop: key });
                refs.push(val);
            }
        }
    }

    compactQueue(queue);

    return value;
};

var isRegExp = function isRegExp(obj) {
    return Object.prototype.toString.call(obj) === '[object RegExp]';
};

var isBuffer = function isBuffer(obj) {
    if (!obj || typeof obj !== 'object') {
        return false;
    }

    return !!(obj.constructor && obj.constructor.isBuffer && obj.constructor.isBuffer(obj));
};

var combine = function combine(a, b) {
    return [].concat(a, b);
};

var maybeMap = function maybeMap(val, fn) {
    if (isArray(val)) {
        var mapped = [];
        for (var i = 0; i < val.length; i += 1) {
            mapped.push(fn(val[i]));
        }
        return mapped;
    }
    return fn(val);
};

module.exports = {
    arrayToObject: arrayToObject,
    assign: assign,
    combine: combine,
    compact: compact,
    decode: decode,
    encode: encode,
    isBuffer: isBuffer,
    isRegExp: isRegExp,
    maybeMap: maybeMap,
    merge: merge
};

},{"./formats":26}],31:[function(require,module,exports){
/*
 * Copyright Joyent, Inc. and other Node contributors.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a
 * copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to permit
 * persons to whom the Software is furnished to do so, subject to the
 * following conditions:
 *
 * The above copyright notice and this permission notice shall be included
 * in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
 * OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
 * NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
 * DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
 * OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
 * USE OR OTHER DEALINGS IN THE SOFTWARE.
 */

'use strict';

var punycode = require('punycode');

function Url() {
  this.protocol = null;
  this.slashes = null;
  this.auth = null;
  this.host = null;
  this.port = null;
  this.hostname = null;
  this.hash = null;
  this.search = null;
  this.query = null;
  this.pathname = null;
  this.path = null;
  this.href = null;
}

// Reference: RFC 3986, RFC 1808, RFC 2396

/*
 * define these here so at least they only have to be
 * compiled once on the first module load.
 */
var protocolPattern = /^([a-z0-9.+-]+:)/i,
  portPattern = /:[0-9]*$/,

  // Special case for a simple path URL
  simplePathPattern = /^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,

  /*
   * RFC 2396: characters reserved for delimiting URLs.
   * We actually just auto-escape these.
   */
  delims = [
    '<', '>', '"', '`', ' ', '\r', '\n', '\t'
  ],

  // RFC 2396: characters not allowed for various reasons.
  unwise = [
    '{', '}', '|', '\\', '^', '`'
  ].concat(delims),

  // Allowed by RFCs, but cause of XSS attacks.  Always escape these.
  autoEscape = ['\''].concat(unwise),
  /*
   * Characters that are never ever allowed in a hostname.
   * Note that any invalid chars are also handled, but these
   * are the ones that are *expected* to be seen, so we fast-path
   * them.
   */
  nonHostChars = [
    '%', '/', '?', ';', '#'
  ].concat(autoEscape),
  hostEndingChars = [
    '/', '?', '#'
  ],
  hostnameMaxLen = 255,
  hostnamePartPattern = /^[+a-z0-9A-Z_-]{0,63}$/,
  hostnamePartStart = /^([+a-z0-9A-Z_-]{0,63})(.*)$/,
  // protocols that can allow "unsafe" and "unwise" chars.
  unsafeProtocol = {
    javascript: true,
    'javascript:': true
  },
  // protocols that never have a hostname.
  hostlessProtocol = {
    javascript: true,
    'javascript:': true
  },
  // protocols that always contain a // bit.
  slashedProtocol = {
    http: true,
    https: true,
    ftp: true,
    gopher: true,
    file: true,
    'http:': true,
    'https:': true,
    'ftp:': true,
    'gopher:': true,
    'file:': true
  },
  querystring = require('qs');

function urlParse(url, parseQueryString, slashesDenoteHost) {
  if (url && typeof url === 'object' && url instanceof Url) { return url; }

  var u = new Url();
  u.parse(url, parseQueryString, slashesDenoteHost);
  return u;
}

Url.prototype.parse = function (url, parseQueryString, slashesDenoteHost) {
  if (typeof url !== 'string') {
    throw new TypeError("Parameter 'url' must be a string, not " + typeof url);
  }

  /*
   * Copy chrome, IE, opera backslash-handling behavior.
   * Back slashes before the query string get converted to forward slashes
   * See: https://code.google.com/p/chromium/issues/detail?id=25916
   */
  var queryIndex = url.indexOf('?'),
    splitter = queryIndex !== -1 && queryIndex < url.indexOf('#') ? '?' : '#',
    uSplit = url.split(splitter),
    slashRegex = /\\/g;
  uSplit[0] = uSplit[0].replace(slashRegex, '/');
  url = uSplit.join(splitter);

  var rest = url;

  /*
   * trim before proceeding.
   * This is to support parse stuff like "  http://foo.com  \n"
   */
  rest = rest.trim();

  if (!slashesDenoteHost && url.split('#').length === 1) {
    // Try fast path regexp
    var simplePath = simplePathPattern.exec(rest);
    if (simplePath) {
      this.path = rest;
      this.href = rest;
      this.pathname = simplePath[1];
      if (simplePath[2]) {
        this.search = simplePath[2];
        if (parseQueryString) {
          this.query = querystring.parse(this.search.substr(1));
        } else {
          this.query = this.search.substr(1);
        }
      } else if (parseQueryString) {
        this.search = '';
        this.query = {};
      }
      return this;
    }
  }

  var proto = protocolPattern.exec(rest);
  if (proto) {
    proto = proto[0];
    var lowerProto = proto.toLowerCase();
    this.protocol = lowerProto;
    rest = rest.substr(proto.length);
  }

  /*
   * figure out if it's got a host
   * user@server is *always* interpreted as a hostname, and url
   * resolution will treat //foo/bar as host=foo,path=bar because that's
   * how the browser resolves relative URLs.
   */
  if (slashesDenoteHost || proto || rest.match(/^\/\/[^@/]+@[^@/]+/)) {
    var slashes = rest.substr(0, 2) === '//';
    if (slashes && !(proto && hostlessProtocol[proto])) {
      rest = rest.substr(2);
      this.slashes = true;
    }
  }

  if (!hostlessProtocol[proto] && (slashes || (proto && !slashedProtocol[proto]))) {

    /*
     * there's a hostname.
     * the first instance of /, ?, ;, or # ends the host.
     *
     * If there is an @ in the hostname, then non-host chars *are* allowed
     * to the left of the last @ sign, unless some host-ending character
     * comes *before* the @-sign.
     * URLs are obnoxious.
     *
     * ex:
     * http://a@b@c/ => user:a@b host:c
     * http://a@b?@c => user:a host:c path:/?@c
     */

    /*
     * v0.12 TODO(isaacs): This is not quite how Chrome does things.
     * Review our test case against browsers more comprehensively.
     */

    // find the first instance of any hostEndingChars
    var hostEnd = -1;
    for (var i = 0; i < hostEndingChars.length; i++) {
      var hec = rest.indexOf(hostEndingChars[i]);
      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd)) { hostEnd = hec; }
    }

    /*
     * at this point, either we have an explicit point where the
     * auth portion cannot go past, or the last @ char is the decider.
     */
    var auth, atSign;
    if (hostEnd === -1) {
      // atSign can be anywhere.
      atSign = rest.lastIndexOf('@');
    } else {
      /*
       * atSign must be in auth portion.
       * http://a@b/c@d => host:b auth:a path:/c@d
       */
      atSign = rest.lastIndexOf('@', hostEnd);
    }

    /*
     * Now we have a portion which is definitely the auth.
     * Pull that off.
     */
    if (atSign !== -1) {
      auth = rest.slice(0, atSign);
      rest = rest.slice(atSign + 1);
      this.auth = decodeURIComponent(auth);
    }

    // the host is the remaining to the left of the first non-host char
    hostEnd = -1;
    for (var i = 0; i < nonHostChars.length; i++) {
      var hec = rest.indexOf(nonHostChars[i]);
      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd)) { hostEnd = hec; }
    }
    // if we still have not hit it, then the entire thing is a host.
    if (hostEnd === -1) { hostEnd = rest.length; }

    this.host = rest.slice(0, hostEnd);
    rest = rest.slice(hostEnd);

    // pull out port.
    this.parseHost();

    /*
     * we've indicated that there is a hostname,
     * so even if it's empty, it has to be present.
     */
    this.hostname = this.hostname || '';

    /*
     * if hostname begins with [ and ends with ]
     * assume that it's an IPv6 address.
     */
    var ipv6Hostname = this.hostname[0] === '[' && this.hostname[this.hostname.length - 1] === ']';

    // validate a little.
    if (!ipv6Hostname) {
      var hostparts = this.hostname.split(/\./);
      for (var i = 0, l = hostparts.length; i < l; i++) {
        var part = hostparts[i];
        if (!part) { continue; }
        if (!part.match(hostnamePartPattern)) {
          var newpart = '';
          for (var j = 0, k = part.length; j < k; j++) {
            if (part.charCodeAt(j) > 127) {
              /*
               * we replace non-ASCII char with a temporary placeholder
               * we need this to make sure size of hostname is not
               * broken by replacing non-ASCII by nothing
               */
              newpart += 'x';
            } else {
              newpart += part[j];
            }
          }
          // we test again with ASCII char only
          if (!newpart.match(hostnamePartPattern)) {
            var validParts = hostparts.slice(0, i);
            var notHost = hostparts.slice(i + 1);
            var bit = part.match(hostnamePartStart);
            if (bit) {
              validParts.push(bit[1]);
              notHost.unshift(bit[2]);
            }
            if (notHost.length) {
              rest = '/' + notHost.join('.') + rest;
            }
            this.hostname = validParts.join('.');
            break;
          }
        }
      }
    }

    if (this.hostname.length > hostnameMaxLen) {
      this.hostname = '';
    } else {
      // hostnames are always lower case.
      this.hostname = this.hostname.toLowerCase();
    }

    if (!ipv6Hostname) {
      /*
       * IDNA Support: Returns a punycoded representation of "domain".
       * It only converts parts of the domain name that
       * have non-ASCII characters, i.e. it doesn't matter if
       * you call it with a domain that already is ASCII-only.
       */
      this.hostname = punycode.toASCII(this.hostname);
    }

    var p = this.port ? ':' + this.port : '';
    var h = this.hostname || '';
    this.host = h + p;
    this.href += this.host;

    /*
     * strip [ and ] from the hostname
     * the host field still retains them, though
     */
    if (ipv6Hostname) {
      this.hostname = this.hostname.substr(1, this.hostname.length - 2);
      if (rest[0] !== '/') {
        rest = '/' + rest;
      }
    }
  }

  /*
   * now rest is set to the post-host stuff.
   * chop off any delim chars.
   */
  if (!unsafeProtocol[lowerProto]) {

    /*
     * First, make 100% sure that any "autoEscape" chars get
     * escaped, even if encodeURIComponent doesn't think they
     * need to be.
     */
    for (var i = 0, l = autoEscape.length; i < l; i++) {
      var ae = autoEscape[i];
      if (rest.indexOf(ae) === -1) { continue; }
      var esc = encodeURIComponent(ae);
      if (esc === ae) {
        esc = escape(ae);
      }
      rest = rest.split(ae).join(esc);
    }
  }

  // chop off from the tail first.
  var hash = rest.indexOf('#');
  if (hash !== -1) {
    // got a fragment string.
    this.hash = rest.substr(hash);
    rest = rest.slice(0, hash);
  }
  var qm = rest.indexOf('?');
  if (qm !== -1) {
    this.search = rest.substr(qm);
    this.query = rest.substr(qm + 1);
    if (parseQueryString) {
      this.query = querystring.parse(this.query);
    }
    rest = rest.slice(0, qm);
  } else if (parseQueryString) {
    // no query string, but parseQueryString still requested
    this.search = '';
    this.query = {};
  }
  if (rest) { this.pathname = rest; }
  if (slashedProtocol[lowerProto] && this.hostname && !this.pathname) {
    this.pathname = '/';
  }

  // to support http.request
  if (this.pathname || this.search) {
    var p = this.pathname || '';
    var s = this.search || '';
    this.path = p + s;
  }

  // finally, reconstruct the href based on what has been validated.
  this.href = this.format();
  return this;
};

// format a parsed object into a url string
function urlFormat(obj) {
  /*
   * ensure it's an object, and not a string url.
   * If it's an obj, this is a no-op.
   * this way, you can call url_format() on strings
   * to clean up potentially wonky urls.
   */
  if (typeof obj === 'string') { obj = urlParse(obj); }
  if (!(obj instanceof Url)) { return Url.prototype.format.call(obj); }
  return obj.format();
}

Url.prototype.format = function () {
  var auth = this.auth || '';
  if (auth) {
    auth = encodeURIComponent(auth);
    auth = auth.replace(/%3A/i, ':');
    auth += '@';
  }

  var protocol = this.protocol || '',
    pathname = this.pathname || '',
    hash = this.hash || '',
    host = false,
    query = '';

  if (this.host) {
    host = auth + this.host;
  } else if (this.hostname) {
    host = auth + (this.hostname.indexOf(':') === -1 ? this.hostname : '[' + this.hostname + ']');
    if (this.port) {
      host += ':' + this.port;
    }
  }

  if (this.query && typeof this.query === 'object' && Object.keys(this.query).length) {
    query = querystring.stringify(this.query, {
      arrayFormat: 'repeat',
      addQueryPrefix: false
    });
  }

  var search = this.search || (query && ('?' + query)) || '';

  if (protocol && protocol.substr(-1) !== ':') { protocol += ':'; }

  /*
   * only the slashedProtocols get the //.  Not mailto:, xmpp:, etc.
   * unless they had them to begin with.
   */
  if (this.slashes || (!protocol || slashedProtocol[protocol]) && host !== false) {
    host = '//' + (host || '');
    if (pathname && pathname.charAt(0) !== '/') { pathname = '/' + pathname; }
  } else if (!host) {
    host = '';
  }

  if (hash && hash.charAt(0) !== '#') { hash = '#' + hash; }
  if (search && search.charAt(0) !== '?') { search = '?' + search; }

  pathname = pathname.replace(/[?#]/g, function (match) {
    return encodeURIComponent(match);
  });
  search = search.replace('#', '%23');

  return protocol + host + pathname + search + hash;
};

function urlResolve(source, relative) {
  return urlParse(source, false, true).resolve(relative);
}

Url.prototype.resolve = function (relative) {
  return this.resolveObject(urlParse(relative, false, true)).format();
};

function urlResolveObject(source, relative) {
  if (!source) { return relative; }
  return urlParse(source, false, true).resolveObject(relative);
}

Url.prototype.resolveObject = function (relative) {
  if (typeof relative === 'string') {
    var rel = new Url();
    rel.parse(relative, false, true);
    relative = rel;
  }

  var result = new Url();
  var tkeys = Object.keys(this);
  for (var tk = 0; tk < tkeys.length; tk++) {
    var tkey = tkeys[tk];
    result[tkey] = this[tkey];
  }

  /*
   * hash is always overridden, no matter what.
   * even href="" will remove it.
   */
  result.hash = relative.hash;

  // if the relative url is empty, then there's nothing left to do here.
  if (relative.href === '') {
    result.href = result.format();
    return result;
  }

  // hrefs like //foo/bar always cut to the protocol.
  if (relative.slashes && !relative.protocol) {
    // take everything except the protocol from relative
    var rkeys = Object.keys(relative);
    for (var rk = 0; rk < rkeys.length; rk++) {
      var rkey = rkeys[rk];
      if (rkey !== 'protocol') { result[rkey] = relative[rkey]; }
    }

    // urlParse appends trailing / to urls like http://www.example.com
    if (slashedProtocol[result.protocol] && result.hostname && !result.pathname) {
      result.pathname = '/';
      result.path = result.pathname;
    }

    result.href = result.format();
    return result;
  }

  if (relative.protocol && relative.protocol !== result.protocol) {
    /*
     * if it's a known url protocol, then changing
     * the protocol does weird things
     * first, if it's not file:, then we MUST have a host,
     * and if there was a path
     * to begin with, then we MUST have a path.
     * if it is file:, then the host is dropped,
     * because that's known to be hostless.
     * anything else is assumed to be absolute.
     */
    if (!slashedProtocol[relative.protocol]) {
      var keys = Object.keys(relative);
      for (var v = 0; v < keys.length; v++) {
        var k = keys[v];
        result[k] = relative[k];
      }
      result.href = result.format();
      return result;
    }

    result.protocol = relative.protocol;
    if (!relative.host && !hostlessProtocol[relative.protocol]) {
      var relPath = (relative.pathname || '').split('/');
      while (relPath.length && !(relative.host = relPath.shift())) { }
      if (!relative.host) { relative.host = ''; }
      if (!relative.hostname) { relative.hostname = ''; }
      if (relPath[0] !== '') { relPath.unshift(''); }
      if (relPath.length < 2) { relPath.unshift(''); }
      result.pathname = relPath.join('/');
    } else {
      result.pathname = relative.pathname;
    }
    result.search = relative.search;
    result.query = relative.query;
    result.host = relative.host || '';
    result.auth = relative.auth;
    result.hostname = relative.hostname || relative.host;
    result.port = relative.port;
    // to support http.request
    if (result.pathname || result.search) {
      var p = result.pathname || '';
      var s = result.search || '';
      result.path = p + s;
    }
    result.slashes = result.slashes || relative.slashes;
    result.href = result.format();
    return result;
  }

  var isSourceAbs = result.pathname && result.pathname.charAt(0) === '/',
    isRelAbs = relative.host || relative.pathname && relative.pathname.charAt(0) === '/',
    mustEndAbs = isRelAbs || isSourceAbs || (result.host && relative.pathname),
    removeAllDots = mustEndAbs,
    srcPath = result.pathname && result.pathname.split('/') || [],
    relPath = relative.pathname && relative.pathname.split('/') || [],
    psychotic = result.protocol && !slashedProtocol[result.protocol];

  /*
   * if the url is a non-slashed url, then relative
   * links like ../.. should be able
   * to crawl up to the hostname, as well.  This is strange.
   * result.protocol has already been set by now.
   * Later on, put the first path part into the host field.
   */
  if (psychotic) {
    result.hostname = '';
    result.port = null;
    if (result.host) {
      if (srcPath[0] === '') { srcPath[0] = result.host; } else { srcPath.unshift(result.host); }
    }
    result.host = '';
    if (relative.protocol) {
      relative.hostname = null;
      relative.port = null;
      if (relative.host) {
        if (relPath[0] === '') { relPath[0] = relative.host; } else { relPath.unshift(relative.host); }
      }
      relative.host = null;
    }
    mustEndAbs = mustEndAbs && (relPath[0] === '' || srcPath[0] === '');
  }

  if (isRelAbs) {
    // it's absolute.
    result.host = relative.host || relative.host === '' ? relative.host : result.host;
    result.hostname = relative.hostname || relative.hostname === '' ? relative.hostname : result.hostname;
    result.search = relative.search;
    result.query = relative.query;
    srcPath = relPath;
    // fall through to the dot-handling below.
  } else if (relPath.length) {
    /*
     * it's relative
     * throw away the existing file, and take the new path instead.
     */
    if (!srcPath) { srcPath = []; }
    srcPath.pop();
    srcPath = srcPath.concat(relPath);
    result.search = relative.search;
    result.query = relative.query;
  } else if (relative.search != null) {
    /*
     * just pull out the search.
     * like href='?foo'.
     * Put this after the other two cases because it simplifies the booleans
     */
    if (psychotic) {
      result.host = srcPath.shift();
      result.hostname = result.host;
      /*
       * occationaly the auth can get stuck only in host
       * this especially happens in cases like
       * url.resolveObject('mailto:local1@domain1', 'local2@domain2')
       */
      var authInHost = result.host && result.host.indexOf('@') > 0 ? result.host.split('@') : false;
      if (authInHost) {
        result.auth = authInHost.shift();
        result.hostname = authInHost.shift();
        result.host = result.hostname;
      }
    }
    result.search = relative.search;
    result.query = relative.query;
    // to support http.request
    if (result.pathname !== null || result.search !== null) {
      result.path = (result.pathname ? result.pathname : '') + (result.search ? result.search : '');
    }
    result.href = result.format();
    return result;
  }

  if (!srcPath.length) {
    /*
     * no path at all.  easy.
     * we've already handled the other stuff above.
     */
    result.pathname = null;
    // to support http.request
    if (result.search) {
      result.path = '/' + result.search;
    } else {
      result.path = null;
    }
    result.href = result.format();
    return result;
  }

  /*
   * if a url ENDs in . or .., then it must get a trailing slash.
   * however, if it ends in anything else non-slashy,
   * then it must NOT get a trailing slash.
   */
  var last = srcPath.slice(-1)[0];
  var hasTrailingSlash = (result.host || relative.host || srcPath.length > 1) && (last === '.' || last === '..') || last === '';

  /*
   * strip single dots, resolve double dots to parent dir
   * if the path tries to go above the root, `up` ends up > 0
   */
  var up = 0;
  for (var i = srcPath.length; i >= 0; i--) {
    last = srcPath[i];
    if (last === '.') {
      srcPath.splice(i, 1);
    } else if (last === '..') {
      srcPath.splice(i, 1);
      up++;
    } else if (up) {
      srcPath.splice(i, 1);
      up--;
    }
  }

  // if the path is allowed to go above the root, restore leading ..s
  if (!mustEndAbs && !removeAllDots) {
    for (; up--; up) {
      srcPath.unshift('..');
    }
  }

  if (mustEndAbs && srcPath[0] !== '' && (!srcPath[0] || srcPath[0].charAt(0) !== '/')) {
    srcPath.unshift('');
  }

  if (hasTrailingSlash && (srcPath.join('/').substr(-1) !== '/')) {
    srcPath.push('');
  }

  var isAbsolute = srcPath[0] === '' || (srcPath[0] && srcPath[0].charAt(0) === '/');

  // put the host back
  if (psychotic) {
    result.hostname = isAbsolute ? '' : srcPath.length ? srcPath.shift() : '';
    result.host = result.hostname;
    /*
     * occationaly the auth can get stuck only in host
     * this especially happens in cases like
     * url.resolveObject('mailto:local1@domain1', 'local2@domain2')
     */
    var authInHost = result.host && result.host.indexOf('@') > 0 ? result.host.split('@') : false;
    if (authInHost) {
      result.auth = authInHost.shift();
      result.hostname = authInHost.shift();
      result.host = result.hostname;
    }
  }

  mustEndAbs = mustEndAbs || (result.host && srcPath.length);

  if (mustEndAbs && !isAbsolute) {
    srcPath.unshift('');
  }

  if (srcPath.length > 0) {
    result.pathname = srcPath.join('/');
  } else {
    result.pathname = null;
    result.path = null;
  }

  // to support request.http
  if (result.pathname !== null || result.search !== null) {
    result.path = (result.pathname ? result.pathname : '') + (result.search ? result.search : '');
  }
  result.auth = relative.auth || result.auth;
  result.slashes = result.slashes || relative.slashes;
  result.href = result.format();
  return result;
};

Url.prototype.parseHost = function () {
  var host = this.host;
  var port = portPattern.exec(host);
  if (port) {
    port = port[0];
    if (port !== ':') {
      this.port = port.substr(1);
    }
    host = host.substr(0, host.length - port.length);
  }
  if (host) { this.hostname = host; }
};

exports.parse = urlParse;
exports.resolve = urlResolve;
exports.resolveObject = urlResolveObject;
exports.format = urlFormat;

exports.Url = Url;

},{"punycode":23,"qs":27}],32:[function(require,module,exports){
// Copyright (c) Microsoft Corporation. All rights reserved.
/* global io:false */
var livereload = require('./live-reload-client');
var Messages = require('messages');
var telemetry = require('telemetry-helper');

var cordova;
var socket = io();
var nextExecCacheIndex = 0;

// Details of each plugin that has app-host code is injected when this file is served.
var plugins = {
    'events': require('events'),
'cordova-plugin-device': require('cordova-plugin-device'),
'cordova-plugin-dialogs': require('cordova-plugin-dialogs'),
'cordova-plugin-vibration': require('cordova-plugin-vibration')
};

var pluginHandlersDefinitions = {
    'cordova-plugin-camera': require('cordova-plugin-camera-handlers'),
'cordova-plugin-file': require('cordova-plugin-file-handlers'),
'cordova-plugin-inappbrowser': require('cordova-plugin-inappbrowser-handlers'),
'cordova-plugin-media': require('cordova-plugin-media-handlers')
};

var pluginClobberDefinitions = {
    'cordova-plugin-geolocation': require('cordova-plugin-geolocation-clobbers'),
'cordova-plugin-globalization': require('cordova-plugin-globalization-clobbers')
};

var execCache = {};
var pluginMessages = {};
var pluginHandlers = {};
var serviceToPluginMap = {};

function clobber(clobbers, scope, clobberToPluginMap, pluginId) {
    Object.keys(clobbers).forEach(function (key) {
        if (clobberToPluginMap && pluginId) {
            clobberToPluginMap[key] = pluginId;
        }

        if (clobbers[key] && typeof clobbers[key] === 'object') {
            scope[key] = scope[key] || {};
            clobber(clobbers[key], scope[key]);
        } else {
            scope[key] = clobbers[key];
        }
    });
}

function applyPlugins(plugins, clobberScope, clobberToPluginMap) {
    Object.keys(plugins).forEach(function (pluginId) {
        var plugin = plugins[pluginId];
        if (plugin) {
            if (typeof plugin === 'function') {
                pluginMessages[pluginId] = pluginMessages[pluginId] || new Messages(pluginId, socket);
                plugin = plugin(pluginMessages[pluginId], exec);
                plugins[pluginId] = plugin;
            }
            if (clobberScope) {
                clobber(plugin, clobberScope, clobberToPluginMap, pluginId);
            }
        }
    });
}

/*
 * This function is used as setter for window.cordova property. Besides setting
 * the global property, it overrides some cordova definitions and sets up the
 * communication protocol with the server and the sim-host.
 */
function setCordovaAndInitialize(originalCordova) {
    var channel,
        platform,
        platformBootstrap;

    if (cordova) {
        return;
    }

    cordova = originalCordova;

    cordova.define.remove('cordova/exec');
    cordova.define('cordova/exec', function (require, exports, module) {
        module.exports = exec;
    });

    platform = cordova.require('cordova/platform');
    platformBootstrap = platform.bootstrap;
    platform.bootstrap = function () {
    };

    // default Windows bootstrap function tries to load WinJS which is not
    // available and not required in simulation mode so we override bootstrap
    if (cordova.platformId === 'windows') {
        platformBootstrap = function () {
            cordova.require('cordova/modulemapper')
                .clobbers('cordova/exec/proxy', 'cordova.commandProxy');

        };
    }

    channel = cordova.require('cordova/channel');

    // define our own channel to delay the initialization until sim-host tells
    // us everything's ready (fired in 'start' event handler).
    channel.createSticky('onCordovaSimulateReady');
    channel.waitForInitialization('onCordovaSimulateReady');

    socket.on('start-live-reload', function () {
        livereload.start(socket);
    });

    socket.on('init-telemetry', function () {
        telemetry.init(socket);
    });

    socket.on('init-xhr-proxy', function () {
        require('xhr-proxy').init();
    });

    socket.on('init-touch-events', function () {
        require('./touch-events').init();
    });

    socket.on('refresh', function () {
        document.location.reload(true);
    });

    // firing of onNativeReady is delayed until SIM_HOST tells us it's ready
    socket.once('init', function () {
        // sim-host is ready, register exec handlers, fire onNativeReady and send
        // the list of plugins
        socket.on('exec-success', function (data) {
            var execCacheInfo = execCache[data.index];
            if (execCacheInfo && typeof execCacheInfo.success === 'function') {
                execCacheInfo.success(data.result);
            }
        });

        socket.on('exec-failure', function (data) {
            var execCacheInfo = execCache[data.index];
            if (execCacheInfo && typeof execCacheInfo.fail === 'function') {
                execCacheInfo.fail(data.error);
            }
        });

        if (cordova.platformId !== 'browser') {
            channel.onPluginsReady.subscribe(function () {
                var pluginList;
                try {
                    pluginList = cordova.require('cordova/plugin_list').metadata;
                } catch (ex) {
                    // when the app doesn't contain any plugin, the module "cordova/plugin_list"
                    // is not loaded and cordova.require throws an exception
                    pluginList = {};
                }
                socket.emit('app-plugin-list', pluginList);
            });
        } else {
            socket.emit('app-plugin-list', {});
        }

        applyPlugins(plugins);
        applyPlugins(pluginHandlersDefinitions, pluginHandlers, serviceToPluginMap);
        applyPlugins(pluginClobberDefinitions, window);

        telemetry.registerPluginServices(serviceToPluginMap);

        platformBootstrap();

        switch (cordova.platformId) {
            // these platform fire onNativeReady in their bootstrap
            case 'ios':
            case 'browser':
            case 'ubuntu':
                break;
            // windows has an overridden bootstrap which does not fire
            // onNativeReady
            case 'windows':
            // android specified here just to be explicit about it
            /* falls through */
            case 'android':
            default:
                channel.onNativeReady.fire();
                break;
        }

    });

    socket.once('start', function () {
        // all set, fire onCordovaSimulate ready (which up to this point was
        // delaying onDeviceReady).
        channel.onCordovaSimulateReady.fire();
        // an init after start means reload. it is only sent if sim-host was
        // reloaded
        socket.once('init', function () {
            window.location.reload(true);
        });
    });

    // register app-host
    socket.emit('register-app-host');
}

function getCordova() {
    return cordova;
}

function exec(success, fail, service, action, args) {
    // If we have a local handler, call that. Otherwise pass it to the simulation host.
    var handler = pluginHandlers[service] && pluginHandlers[service][action];
    if (handler) {
        telemetry.sendClientTelemetry('exec', { handled: 'app-host', service: service, action: action });

        // Ensure local handlers are executed asynchronously.
        setTimeout(function () {
            handler(success, fail, args);
        }, 0);
    } else {
        var execIndex = nextExecCacheIndex++;
        execCache[execIndex] = { index: execIndex, success: success, fail: fail };
        socket.emit('exec', { index: execIndex, service: service, action: action, args: args, hasSuccess: !!success, hasFail: !!fail });
    }
}

// have this stub function always, some platforms require it
exec.init = function () {
};

// Setup for cordova patching
Object.defineProperty(window, 'cordova', {
    set: setCordovaAndInitialize,
    get: getCordova
});

var originalUserAgent = window.navigator.userAgent;
Object.defineProperty(window.navigator, 'userAgent', {
    get: function () {
        // The user agent is inserted here by the server when this file is served up.
        var userAgent = '/** USER-AGENT **/';
        return userAgent || originalUserAgent;
    }
});

},{"./live-reload-client":33,"./touch-events":34,"cordova-plugin-camera-handlers":"cordova-plugin-camera-handlers","cordova-plugin-device":"cordova-plugin-device","cordova-plugin-dialogs":"cordova-plugin-dialogs","cordova-plugin-file-handlers":"cordova-plugin-file-handlers","cordova-plugin-geolocation-clobbers":"cordova-plugin-geolocation-clobbers","cordova-plugin-globalization-clobbers":"cordova-plugin-globalization-clobbers","cordova-plugin-inappbrowser-handlers":"cordova-plugin-inappbrowser-handlers","cordova-plugin-media-handlers":"cordova-plugin-media-handlers","cordova-plugin-vibration":"cordova-plugin-vibration","events":"events","messages":"messages","telemetry-helper":"telemetry-helper","xhr-proxy":"xhr-proxy"}],33:[function(require,module,exports){
// Copyright (c) Microsoft Corporation. All rights reserved.
// Based in part on code from Vogue (https://github.com/andrewdavey/vogue)

var url = require('url');

var URL_ATTRIB_NAME = 'url';
var HREF_ATTRIB_NAME = 'href';
var SRC_ATTRIB_NAME = 'src';
var referenceAttributes = [
    URL_ATTRIB_NAME,
    HREF_ATTRIB_NAME,
    SRC_ATTRIB_NAME
];

module.exports.start = function (sock) {
    var serverUrl = window.location.protocol + '//' + window.location.host;
    var localUrlPrefixes = [
        serverUrl,
        serverUrl + '/',
        '/',
        ''
    ];
    var socket = sock;

    /**
     * Returns the name of the reference attribute (either "url", "href" or "src") that is defined for the given node.
     * If the node defines more than one, returns the first encountered, in that order.
     *
     * @param {Element} domNode The DOM node to check.
     * @returns {String} "url", "href" or "src", or null if none of these attributes is defined.
     */
    function getReferenceAttributeForNode(domNode) {
        if (domNode.getAttribute(URL_ATTRIB_NAME)) {
            return URL_ATTRIB_NAME;
        }

        if (domNode.getAttribute(HREF_ATTRIB_NAME)) {
            return HREF_ATTRIB_NAME;
        }

        if (domNode.getAttribute(SRC_ATTRIB_NAME)) {
            return SRC_ATTRIB_NAME;
        }

        return null;
    }

    /**
     * Checks whether the given URL corresponds to a given file path from the server.
     *
     * @param {String} url The URL to check.
     * @param {String} fileRelativePath The path of the modified file to check, relative to the webRoot.
     * @returns {boolean} Whether the URL points to the modified file from the server.
     */
    function urlMatchesPath(url, fileRelativePath) {
        return localUrlPrefixes.some(function (prefix) {
            return (prefix + fileRelativePath) === url;
        });
    }

    /**
     * Finds all the DOM elements that have a reference attribute ("url", "href" or "src") pointing to the given
     * relative path. Excludes <script> tags.
     *
     * @param {String} fileRelativePath The URL of the file to check, relative to the webRoot.
     * @returns {{ domNode: Element, referenceAttribute: string }[]} An array of "resources" referencing the given file.
     */
    function findDomNodesForFilePath(fileRelativePath) {
        // To use querySelectorAll to query elements based on their attributes, the selector's syntax is:
        // '[attrib1], [attrib2], ...'.
        var selectorString = '[' + referenceAttributes.join('], [') + ']';
        var rawNodes = document.querySelectorAll(selectorString);
        var filteredNodes = [];

        // querySelectorAll() does not return an array, so we can't use Array.prototype.filter().
        for (var i = 0; i < rawNodes.length; ++i) {
            var currentNode = rawNodes[i];

            // Ignore <script> tags (we need to do a full reload for scripts).
            if (currentNode.tagName.toLowerCase() === 'script') {
                continue;
            }

            // Verify if the node is referencing the modified file
            var referenceAttribute = getReferenceAttributeForNode(currentNode);
            var nodeReference = currentNode.getAttribute(referenceAttribute);

            // If the node's url / href / src doesn't reference the modified file on the server, ignore the node.
            if (!nodeReference || !urlMatchesPath(url.parse(nodeReference).pathname, fileRelativePath)) {
                continue;
            }

            // We care about this node.
            filteredNodes.push({
                domNode: currentNode,
                referenceAttribute: referenceAttribute
            });
        }

        return filteredNodes;
    }

    /**
     * Determines whether the changes form the specified file can be applied to the app without a full page reload.
     * Then, based on that, either updates the reference attribute of the appropriate node, or does a full page
     * reload.
     *
     * @param {String} fileRelativePath The URL of the file that changed, relative to the webRoot.
     */
    function onFileChanged(fileRelativePath) {
        var associatedNodes = findDomNodesForFilePath(fileRelativePath);

        if (associatedNodes.length) {
            refreshFile(fileRelativePath, associatedNodes);
        } else {
            reloadPage();
        }
    }

    /**
     * Refreshes a file by updating the associated nodes' querystring with a new _livereload parameter.
     *
     * @param {String} fileRelativePath The URL of the file to be refreshed, relative to the webRoot.
     */
    function refreshFile(fileRelativePath, nodesToRefresh) {
        nodesToRefresh = nodesToRefresh || findDomNodesForFilePath(fileRelativePath);

        if (!nodesToRefresh) {
            // The modified file doesn't appear to be referenced in the DOM anymore. Do a full reload.
            reloadPage();

            return;
        }

        // Update the nodes' url / href / src attribute with a new _livereload querystring parameter.
        nodesToRefresh.forEach(function (nodeInfo) {
            var previousUrl = nodeInfo.domNode.getAttribute(nodeInfo.referenceAttribute);
            var parsedUrl = url.parse(previousUrl, true);

            parsedUrl.query._livereload = (new Date).getTime();
            delete parsedUrl.search;
            nodeInfo.domNode.setAttribute(nodeInfo.referenceAttribute, url.format(parsedUrl));
        });
    }

    /**
     * Reload the page. Currently, only does a naive window.location.reload().
     */
    function reloadPage() {
        window.location.reload(true);
    }

    socket.on('lr-file-changed', function (data) {
        onFileChanged(data.fileRelativePath);
    });
};

},{"url":31}],34:[function(require,module,exports){
// Copyright (c) Microsoft Corporation. All rights reserved.
// Based in part on code from Apache Ripple, https://github.com/apache/incubator-ripple

var utils = require('utils');

var _lastMouseEvent,
    _isMouseDown;

// NOTE: missing view, detail, touches, targetTouches, scale and rotation
function _createTouchEvent(type, canBubble, cancelable, eventData) {
    var touchEvent = window.document.createEvent('Event');
    touchEvent.initEvent(type, canBubble, cancelable);
    utils.mixin(eventData, touchEvent);

    return touchEvent;
}

function _simulateTouchEvent(type, mouseevent) {
    if (_lastMouseEvent &&
            mouseevent.type === _lastMouseEvent.type &&
            mouseevent.pageX === _lastMouseEvent.pageX &&
            mouseevent.pageY === _lastMouseEvent.pageY) {
        return;
    }

    _lastMouseEvent = mouseevent;

    var touchObj = {
        clientX: mouseevent.pageX,
        clientY: mouseevent.pageY,
        pageX: mouseevent.pageX,
        pageY: mouseevent.pageY,
        screenX: mouseevent.pageX,
        screenY: mouseevent.pageY,
        target: mouseevent.target,
        identifier: ''
    };

    var eventData = {
        altKey: mouseevent.altKey,
        ctrlKey: mouseevent.ctrlKey,
        shiftKey: mouseevent.shiftKey,
        metaKey: mouseevent.metaKey,
        changedTouches: [touchObj],
        targetTouches: type === 'touchend' ? [] : [touchObj],
        touches: type === 'touchend' ? [] : [touchObj]
    };

    utils.mixin(touchObj, eventData);

    var itemFn = function (index) {
        return this[index];
    };

    eventData.touches.item = itemFn;
    eventData.changedTouches.item = itemFn;
    eventData.targetTouches.item = itemFn;

    var listenerName = 'on' + type,
        simulatedEvent = _createTouchEvent(type, true, true, eventData);

    mouseevent.target.dispatchEvent(simulatedEvent);

    if (typeof mouseevent.target[listenerName] === 'function') {
        mouseevent.target[listenerName].apply(mouseevent.target, [simulatedEvent]);
    }
}

function init() {
    window.document.addEventListener('mousedown', function (event) {
        _isMouseDown = true;
        _simulateTouchEvent('touchstart', event);
    }, true);

    window.document.addEventListener('mousemove', function (event) {
        if (_isMouseDown) {
            _simulateTouchEvent('touchmove', event);
        }
    }, true);

    window.document.addEventListener('mouseup', function (event) {
        _isMouseDown = false;
        _simulateTouchEvent('touchend', event);
    }, true);

    window.Node.prototype.ontouchstart = null;
    window.Node.prototype.ontouchend = null;
    window.Node.prototype.ontouchmove = null;
}

module.exports.init = init;

},{"utils":"utils"}],35:[function(require,module,exports){
// Copyright (c) Microsoft Corporation. All rights reserved.

/**
 * Interface to wrap the native File interface.
 *
 * This interface is necessary for creating zero-length (empty) files,
 * something the Filesystem API allows you to do. Unfortunately, File's
 * constructor cannot be called directly, making it impossible to instantiate
 * an empty File in JS.
 *
 * @param {Object} opts Initial values.
 * @constructor
 */
function MyFile(opts) {
    var blob_ = new Blob();

    this.size = opts.size || 0;
    this.name = opts.name || '';
    this.type = opts.type || '';
    this.lastModifiedDate = opts.lastModifiedDate || null;
    this.storagePath = opts.storagePath || '';

    // Need some black magic to correct the object's size/name/type based on the
    // blob that is saved.
    Object.defineProperty(this, 'blob_', {
        enumerable: true,
        get: function() {
            return blob_;
        },
        set: function(val) {
            blob_ = val;
            this.size = blob_.size;
            this.name = blob_.name;
            this.type = blob_.type;
            this.lastModifiedDate = blob_.lastModifiedDate;
        }.bind(this)
    });
}

MyFile.prototype.constructor = MyFile;

module.exports = MyFile;

},{}],36:[function(require,module,exports){
// Copyright (c) Microsoft Corporation. All rights reserved.

/*global Uint8Array: false */

if (!window.indexedDB) {
    throw new Error('indexedDB not supported');
}

// Since we are using browser implementation
// of cordova-file-plugin for non-webkit browsers,
// we should reference MyFile, because currently loaded
// simulation platform might not be the 'browser'.
// (browser platform uses this file in its implementation).
var MyFile = require('./MyFile');

// Since we are using browser implementation
// of cordova-file-plugin for non-webkit browsers,
// we should reference Indexed DB, because currently loaded
// simulation platform might not be the 'browser'.
// (browser platform uses this file in its implementation).
var indexedDB = require('./indexedDB');

var DIR_SEPARATOR = '/';
var FILESYSTEM_PREFIX = 'file:///';

var fileSystem = null;

var pathsPrefix = {
    // Read-only directory where the application is installed.
    applicationDirectory: window.location.origin + '/',
    // Where to put app-specific data files.
    dataDirectory: 'file:///persistent/',
    // Cached files that should survive app restarts.
    // Apps should not rely on the OS to delete files in here.
    cacheDirectory: 'file:///temporary/',
    // Read-only directory where the application is installed.
    // Android: the application space on external storage.
    externalApplicationStorageDirectory: null,
    // Android: Where to put app-specific data files on external storage.
    externalDataDirectory: null,
    // Android: the application cache on external storage.
    externalCacheDirectory: null,
    // Android: the external storage (SD card) root.
    externalRootDirectory: null,
    // iOS: Temp directory that the OS can clear at will.
    tempDirectory: null,
    // iOS: Holds app-specific files that should be synced (e.g. to iCloud).
    syncedDataDirectory: null,
    // iOS: Files private to the app, but that are meaningful to other applciations (e.g. Office files)
    documentsDirectory: null,
    // BlackBerry10: Files globally available to all apps
    sharedDirectory: null
};

// We must override some functionality so that plugin can work properly,
// for example, we cannot call 'cordova' or file-plugin related files before deviceready
// event fired since app-host-handler's files initializes before them.
document.addEventListener('deviceready', function () {
    // We must override getFs function since we are using browser implementation
    // of cordova-plugin-file so everything will work as expected.
    window.cordova.require('cordova-plugin-file.fileSystems').getFs = function (name, callback) {
        callback(new window.FileSystem(name, fileSystem.root));
    };
    // Special functionality for proper Firefox work.
    window.FileSystem.prototype.__format__ = function(fullPath) {
        return (FILESYSTEM_PREFIX + this.name + (fullPath[0] === '/' ? '' : '/') + encodeURI(fullPath));
    };
}, false);

/*** Helpers ***/

// When saving an entry, the fullPath should always lead with a slash and never
// end with one (e.g. a directory). Also, resolve '.' and '..' to an absolute
// one. This method ensures path is legit!
function resolveToFullPath_(cwdFullPath, path) {
    path = path || '';
    var fullPath = path;
    var prefix = '';

    cwdFullPath = cwdFullPath || DIR_SEPARATOR;
    if (cwdFullPath.indexOf(FILESYSTEM_PREFIX) === 0) {
        prefix = cwdFullPath.substring(0, cwdFullPath.indexOf(DIR_SEPARATOR, FILESYSTEM_PREFIX.length));
        cwdFullPath = cwdFullPath.substring(cwdFullPath.indexOf(DIR_SEPARATOR, FILESYSTEM_PREFIX.length));
    }

    var relativePath = path[0] !== DIR_SEPARATOR;
    if (relativePath) {
        fullPath = cwdFullPath;
        if (cwdFullPath !== DIR_SEPARATOR) {
            fullPath += DIR_SEPARATOR + path;
        } else {
            fullPath += path;
        }
    }

    // Remove doubled separator substrings
    var re = new RegExp(DIR_SEPARATOR + DIR_SEPARATOR, 'g');
    fullPath = fullPath.replace(re, DIR_SEPARATOR);

    // Adjust '..'s by removing parent directories when '..' flows in path.
    var parts = fullPath.split(DIR_SEPARATOR);
    for (var i = 0; i < parts.length; ++i) {
        var part = parts[i];
        if (part === '..') {
            parts[i - 1] = '';
            parts[i] = '';
        }
    }
    fullPath = parts.filter(function(el) {
        return el;
    }).join(DIR_SEPARATOR);

    // Add back in leading slash.
    if (fullPath[0] !== DIR_SEPARATOR) {
        fullPath = DIR_SEPARATOR + fullPath;
    }

    // Replace './' by current dir. ('./one/./two' -> one/two)
    fullPath = fullPath.replace(/\.\//g, DIR_SEPARATOR);

    // Replace '//' with '/'.
    fullPath = fullPath.replace(/\/\//g, DIR_SEPARATOR);

    // Replace '/.' with '/'.
    fullPath = fullPath.replace(/\/\./g, DIR_SEPARATOR);

    // Remove '/' if it appears on the end.
    if (fullPath[fullPath.length - 1] === DIR_SEPARATOR &&
        fullPath !== DIR_SEPARATOR) {
        fullPath = fullPath.substring(0, fullPath.length - 1);
    }

    var storagePath = prefix + fullPath;
    storagePath = decodeURI(storagePath);
    fullPath = decodeURI(fullPath);

    return {
        storagePath: storagePath,
        fullPath: fullPath,
        fileName: fullPath.split(DIR_SEPARATOR).pop(),
        fsName: prefix.split(DIR_SEPARATOR).pop()
    };
}

function fileEntryFromIdbEntry(fileEntry) {
    // IDB won't save methods, so we need re-create the FileEntry.
    var clonedFileEntry = new window.FileEntry(fileEntry.name, fileEntry.fullPath, fileEntry.filesystem);
    clonedFileEntry.file_ = fileEntry.file_;

    return clonedFileEntry;
}

function readAs(what, fullPath, encoding, startPos, endPos, successCallback, errorCallback) {
    getFile(function(fileEntry) {
        var fileReader = new FileReader(),
            blob = fileEntry.file_.blob_.slice(startPos, endPos);

        fileReader.onload = function(e) {
            successCallback(e.target.result);
        };

        fileReader.onerror = errorCallback;

        switch (what) {
            case 'text':
                fileReader.readAsText(blob, encoding);
                break;
            case 'dataURL':
                fileReader.readAsDataURL(blob);
                break;
            case 'arrayBuffer':
                fileReader.readAsArrayBuffer(blob);
                break;
            case 'binaryString':
                fileReader.readAsBinaryString(blob);
                break;
        }

    }, errorCallback, [fullPath, null]);
}

/*** Handlers ***/

function requestFileSystem(successCallback, errorCallback, args) {
    var type = args[0];
    // Size is ignored since IDB filesystem size depends
    // on browser implementation and can't be set up by user
    var size = args[1]; // eslint-disable-line no-unused-vars

    if (type !== window.LocalFileSystem.TEMPORARY && type !== window.LocalFileSystem.PERSISTENT) {
        errorCallback && errorCallback(window.FileError.INVALID_MODIFICATION_ERR);
        return;
    }

    var name = type === window.LocalFileSystem.TEMPORARY ? 'temporary' : 'persistent';
    var storageName = (location.protocol + location.host).replace(/:/g, '_');

    var root = new window.DirectoryEntry('', DIR_SEPARATOR);
    fileSystem = new window.FileSystem(name, root);

    indexedDB.open(storageName, function() {
        successCallback(fileSystem);
    }, errorCallback);
}

function requestFileSystemHandler(successCallback, errorCallback, module, event, args) {
    requestFileSystem(successCallback, errorCallback, args);
}

// list a directory's contents (files and folders).
function readEntries(successCallback, errorCallback, args) {
    var fullPath = args[0];

    if (typeof successCallback !== 'function') {
        throw Error('Expected successCallback argument.');
    }

    var path = resolveToFullPath_(fullPath);

    getDirectory(function() {
        indexedDB.getAllEntries(path.fullPath + DIR_SEPARATOR, path.storagePath, function(entries) {
            successCallback(entries);
        }, errorCallback);
    }, function() {
        if (errorCallback) {
            errorCallback(window.FileError.NOT_FOUND_ERR);
        }
    }, [path.storagePath, path.fullPath, {create: false}]);
}

function readEntriesHandler(successCallback, errorCallback, module, event, args) {
    readEntries(successCallback, errorCallback, args);
}

function getFile(successCallback, errorCallback, args) {
    var fullPath = args[0];
    var path = args[1];
    var options = args[2] || {};

    // Create an absolute path if we were handed a relative one.
    path = resolveToFullPath_(fullPath, path);

    indexedDB.get(path.storagePath, function(fileEntry) {
        if (options.create === true && options.exclusive === true && fileEntry) {
            // If create and exclusive are both true, and the path already exists,
            // getFile must fail.

            if (errorCallback) {
                errorCallback(window.FileError.PATH_EXISTS_ERR);
            }
        } else if (options.create === true && !fileEntry) {
            // If create is true, the path doesn't exist, and no other error occurs,
            // getFile must create it as a zero-length file and return a corresponding
            // FileEntry.
            var newFileEntry = new window.FileEntry(path.fileName, path.fullPath, new window.FileSystem(path.fsName, fileSystem.root));

            newFileEntry.file_ = new MyFile({
                size: 0,
                name: newFileEntry.name,
                lastModifiedDate: new Date(),
                storagePath: path.storagePath
            });

            indexedDB.put(newFileEntry, path.storagePath, successCallback, errorCallback);
        } else if (options.create === true && fileEntry) {
            if (fileEntry.isFile) {
                // Overwrite file, delete then create new.
                indexedDB['delete'](path.storagePath, function() {
                    var newFileEntry = new window.FileEntry(path.fileName, path.fullPath, new window.FileSystem(path.fsName, fileSystem.root));

                    newFileEntry.file_ = new MyFile({
                        size: 0,
                        name: newFileEntry.name,
                        lastModifiedDate: new Date(),
                        storagePath: path.storagePath
                    });

                    indexedDB.put(newFileEntry, path.storagePath, successCallback, errorCallback);
                }, errorCallback);
            } else {
                if (errorCallback) {
                    errorCallback(window.FileError.INVALID_MODIFICATION_ERR);
                }
            }
        } else if ((!options.create || options.create === false) && !fileEntry) {
            // If create is not true and the path doesn't exist, getFile must fail.
            if (errorCallback) {
                errorCallback(window.FileError.NOT_FOUND_ERR);
            }
        } else if ((!options.create || options.create === false) && fileEntry &&
            fileEntry.isDirectory) {
            // If create is not true and the path exists, but is a directory, getFile
            // must fail.
            if (errorCallback) {
                errorCallback(window.FileError.TYPE_MISMATCH_ERR);
            }
        } else {
            // Otherwise, if no other error occurs, getFile must return a FileEntry
            // corresponding to path.

            successCallback(fileEntryFromIdbEntry(fileEntry));
        }
    }, errorCallback);
}

function getFileHandler(successCallback, errorCallback, module, event, args) {
    getFile(successCallback, errorCallback, args);
}

function getFileMetadata(successCallback, errorCallback, module, event, args) {
    var fullPath = args[0];

    getFile(function(fileEntry) {
        successCallback(new window.File(fileEntry.file_.name, fileEntry.fullPath, '', fileEntry.file_.lastModifiedDate,
            fileEntry.file_.size));
    }, errorCallback, [fullPath, null]);
}

function setMetadata(successCallback, errorCallback, module, event, args) {
    var fullPath = args[0];
    var metadataObject = args[1];

    getFile(function (fileEntry) {
        fileEntry.file_.lastModifiedDate = metadataObject.modificationTime;
        indexedDB.put(fileEntry, fileEntry.file_.storagePath, successCallback, errorCallback);
    }, errorCallback, [fullPath, null]);
}

function write(successCallback, errorCallback, args) {
    var fileName = args[0],
        data = args[1],
        position = args[2],
        isBinary = args[3]; // eslint-disable-line no-unused-vars

    if (!data) {
        errorCallback && errorCallback(window.FileError.INVALID_MODIFICATION_ERR);
        return;
    }

    if (typeof data === 'string' || data instanceof String) {
        data = new Blob([data]);
    }

    getFile(function(fileEntry) {
        var blob_ = fileEntry.file_.blob_;

        if (!blob_) {
            blob_ = new Blob([data], {type: data.type});
        } else {
            // Calc the head and tail fragments
            var head = blob_.slice(0, position);
            var tail = blob_.slice(position + (data.size || data.byteLength));

            // Calc the padding
            var padding = position - head.size;
            if (padding < 0) {
                padding = 0;
            }

            // Do the 'write'. In fact, a full overwrite of the Blob.
            blob_ = new Blob([head, new Uint8Array(padding), data, tail],
                {type: data.type});
        }

        // Set the blob we're writing on this file entry so we can recall it later.
        fileEntry.file_.blob_ = blob_;
        fileEntry.file_.lastModifiedDate = new Date() || null;
        fileEntry.file_.size = blob_.size;
        fileEntry.file_.name = blob_.name;
        fileEntry.file_.type = blob_.type;

        indexedDB.put(fileEntry, fileEntry.file_.storagePath, function() {
            successCallback(data.size || data.byteLength);
        }, errorCallback);
    }, errorCallback, [fileName, null]);
}

function writeHandler(successCallback, errorCallback, module, event, args) {
    write(successCallback, errorCallback, args);
}

function readAsTextHandler(successCallback, errorCallback, module, event, args) {
    var fileName = args[0],
        enc = args[1],
        startPos = args[2],
        endPos = args[3];

    readAs('text', fileName, enc, startPos, endPos, successCallback, errorCallback);
}

function readAsDataURLHandler(successCallback, errorCallback, module, event, args) {
    var fileName = args[0],
        startPos = args[1],
        endPos = args[2];

    readAs('dataURL', fileName, null, startPos, endPos, successCallback, errorCallback);
}

function readAsBinaryStringHandler(successCallback, errorCallback, module, event, args) {
    var fileName = args[0],
        startPos = args[1],
        endPos = args[2];

    readAs('binaryString', fileName, null, startPos, endPos, successCallback, errorCallback);
}

function readAsArrayBufferHandler(successCallback, errorCallback, module, event, args) {
    var fileName = args[0],
        startPos = args[1],
        endPos = args[2];

    readAs('arrayBuffer', fileName, null, startPos, endPos, successCallback, errorCallback);
}

function removeRecursively(successCallback, errorCallback, module, event, args) {
    removeHandler(successCallback, errorCallback, module, event, args);
}

function remove(successCallback, errorCallback, args) {
    var fullPath = resolveToFullPath_(args[0]).storagePath;
    if (fullPath === pathsPrefix.cacheDirectory || fullPath === pathsPrefix.dataDirectory) {
        errorCallback(window.FileError.NO_MODIFICATION_ALLOWED_ERR);
        return;
    }

    function deleteEntry(isDirectory) {
        // TODO: This doesn't protect against directories that have content in it.
        // Should throw an error instead if the dirEntry is not empty.
        indexedDB['delete'](fullPath, function() {
            successCallback && successCallback();
        }, function() {
            errorCallback && errorCallback();
        }, isDirectory);
    }

    // We need to to understand what we are deleting:
    getDirectory(function(entry) {
        deleteEntry(entry.isDirectory);
    }, function(){
        //DirectoryEntry was already deleted or entry is FileEntry
        deleteEntry(false);
    }, [fullPath, null, {create: false}]);
}

function removeHandler(successCallback, errorCallback, module, event, args) {
    remove(successCallback, errorCallback, args);
}

function getDirectory(successCallback, errorCallback, args) {
    var fullPath = args[0];
    var path = args[1];
    var options = args[2];

    // Create an absolute path if we were handed a relative one.
    path = resolveToFullPath_(fullPath, path);

    indexedDB.get(path.storagePath, function(folderEntry) {
        if (!options) {
            options = {};
        }

        if (options.create === true && options.exclusive === true && folderEntry) {
            // If create and exclusive are both true, and the path already exists,
            // getDirectory must fail.
            if (errorCallback) {
                errorCallback(window.FileError.PATH_EXISTS_ERR);
            }
            // There is a strange bug in mobilespec + FF, which results in coming to multiple else-if's
            // so we are shielding from it with returns.
            return;
        }

        if (options.create === true && !folderEntry) {
            // If create is true, the path doesn't exist, and no other error occurs,
            // getDirectory must create it as a zero-length file and return a corresponding
            // MyDirectoryEntry.
            var dirEntry = new window.DirectoryEntry(path.fileName, path.fullPath, new window.FileSystem(path.fsName, fileSystem.root));

            indexedDB.put(dirEntry, path.storagePath, successCallback, errorCallback);
            return;
        }

        if (options.create === true && folderEntry) {

            if (folderEntry.isDirectory) {
                // IDB won't save methods, so we need re-create the MyDirectoryEntry.
                successCallback(new window.DirectoryEntry(folderEntry.name, folderEntry.fullPath, folderEntry.filesystem));
            } else {
                if (errorCallback) {
                    errorCallback(window.FileError.INVALID_MODIFICATION_ERR);
                }
            }
            return;
        }

        if ((!options.create || options.create === false) && !folderEntry) {
            // Handle root special. It should always exist.
            if (path.fullPath === DIR_SEPARATOR) {
                successCallback(fileSystem.root);
                return;
            }

            // If create is not true and the path doesn't exist, getDirectory must fail.
            if (errorCallback) {
                errorCallback(window.FileError.NOT_FOUND_ERR);
            }

            return;
        }
        if ((!options.create || options.create === false) && folderEntry && folderEntry.isFile) {
            // If create is not true and the path exists, but is a file, getDirectory
            // must fail.
            if (errorCallback) {
                errorCallback(window.FileError.TYPE_MISMATCH_ERR);
            }
            return;
        }

        // Otherwise, if no other error occurs, getDirectory must return a
        // MyDirectoryEntry corresponding to path.

        // IDB won't' save methods, so we need re-create MyDirectoryEntry.
        successCallback(new window.DirectoryEntry(folderEntry.name, folderEntry.fullPath, folderEntry.filesystem));
    }, errorCallback);
}

function getDirectoryHandler(successCallback, errorCallback, module, event, args) {
    getDirectory(successCallback, errorCallback, args);
}

function getParentHandler(successCallback, errorCallback, module, args) {
    if (typeof successCallback !== 'function') {
        throw Error('Expected successCallback argument.');
    }

    var fullPath = args[0];
    //fullPath is like this:
    //file:///persistent/path/to/file or
    //file:///persistent/path/to/directory/

    if (fullPath === DIR_SEPARATOR || fullPath === pathsPrefix.cacheDirectory ||
        fullPath === pathsPrefix.dataDirectory) {
        successCallback(fileSystem.root);
        return;
    }

    //To delete all slashes at the end
    while (fullPath[fullPath.length - 1] === '/') {
        fullPath = fullPath.substr(0, fullPath.length - 1);
    }

    var pathArr = fullPath.split(DIR_SEPARATOR);
    pathArr.pop();
    var parentName = pathArr.pop();
    var path = pathArr.join(DIR_SEPARATOR) + DIR_SEPARATOR;

    //To get parent of root files
    var joined = path + parentName + DIR_SEPARATOR;//is like this: file:///persistent/
    if (joined === pathsPrefix.cacheDirectory || joined === pathsPrefix.dataDirectory) {
        getDirectory(successCallback, errorCallback, [joined, DIR_SEPARATOR, {create: false}]);
        return;
    }

    getDirectory(successCallback, errorCallback, [path, parentName, {create: false}]);
}

function copyTo(successCallback, errorCallback, args) {
    var srcPath = args[0];
    var parentFullPath = args[1];
    var name = args[2];

    if (name.indexOf('/') !== -1 || srcPath === parentFullPath + name) {
        if (errorCallback) {
            errorCallback(window.FileError.INVALID_MODIFICATION_ERR);
        }

        return;
    }

    // Read src file
    getFile(function(srcFileEntry) {

        var path = resolveToFullPath_(parentFullPath);
        //Check directory
        getDirectory(function() {

            // Create dest file
            getFile(function(dstFileEntry) {

                write(function() {
                    successCallback(dstFileEntry);
                }, errorCallback, [dstFileEntry.file_.storagePath, srcFileEntry.file_.blob_, 0]);

            }, errorCallback, [parentFullPath, name, {create: true}]);

        }, function() { if (errorCallback) { errorCallback(window.FileError.NOT_FOUND_ERR); }},
        [path.storagePath, null, {create: false}]);

    }, errorCallback, [srcPath, null]);
}

function copyToHandler(successCallback, errorCallback, module, event, args) {
    copyTo(successCallback, errorCallback, args);
}

function moveToHandler(successCallback, errorCallback, module, event, args) {
    var srcPath = args[0];
    // parentFullPath and name parameters is ignored because
    // args is being passed downstream to exports.copyTo method
    var parentFullPath = args[1]; // eslint-disable-line no-unused-vars
    var name = args[2]; // eslint-disable-line no-unused-vars

    copyTo(function (fileEntry) {
        remove(function () {
            successCallback(fileEntry);
        }, errorCallback, [srcPath]);
    }, errorCallback, args);
}

function resolveLocalFileSystemURI(successCallback, errorCallback, args) {
    var path = args[0];

    // Ignore parameters
    if (path.indexOf('?') !== -1) {
        path = String(path).split('?')[0];
    }

    // support for encodeURI
    if (/\%5/g.test(path) || /\%20/g.test(path)) {
        path = decodeURI(path);
    }

    if (path.trim()[0] === '/') {
        errorCallback && errorCallback(window.FileError.ENCODING_ERR);
        return;
    }

    //support for cdvfile
    if (path.trim().substr(0, 7) === 'cdvfile') {
        if (path.indexOf('cdvfile://localhost') === -1) {
            errorCallback && errorCallback(window.FileError.ENCODING_ERR);
            return;
        }

        var indexPersistent = path.indexOf('persistent');
        var indexTemporary = path.indexOf('temporary');

        //cdvfile://localhost/persistent/path/to/file
        if (indexPersistent !== -1) {
            path =  'file:///persistent' + path.substr(indexPersistent + 10);
        } else if (indexTemporary !== -1) {
            path = 'file:///temporary' + path.substr(indexTemporary + 9);
        } else {
            errorCallback && errorCallback(window.FileError.ENCODING_ERR);
            return;
        }
    }

    // to avoid path form of '///path/to/file'
    function handlePathSlashes(path) {
        var cutIndex  = 0;
        for (var i = 0; i < path.length - 1; i++) {
            if (path[i] === DIR_SEPARATOR && path[i + 1] === DIR_SEPARATOR) {
                cutIndex = i + 1;
            } else break;
        }

        return path.substr(cutIndex);
    }

    // Handle localhost containing paths (see specs )
    if (path.indexOf('file://localhost/') === 0) {
        path = path.replace('file://localhost/', 'file:///');
    }

    if (path.indexOf(pathsPrefix.dataDirectory) === 0) {
        path = path.substring(pathsPrefix.dataDirectory.length - 1);
        path = handlePathSlashes(path);

        requestFileSystem(function() {
            getFile(successCallback, function() {
                getDirectory(successCallback, errorCallback, [pathsPrefix.dataDirectory, path,
                    {create: false}]);
            }, [pathsPrefix.dataDirectory, path, {create: false}]);
        }, errorCallback, [window.LocalFileSystem.PERSISTENT]);
    } else if (path.indexOf(pathsPrefix.cacheDirectory) === 0) {
        path = path.substring(pathsPrefix.cacheDirectory.length - 1);
        path = handlePathSlashes(path);

        requestFileSystem(function() {
            getFile(successCallback, function() {
                getDirectory(successCallback, errorCallback, [pathsPrefix.cacheDirectory, path,
                    {create: false}]);
            }, [pathsPrefix.cacheDirectory, path, {create: false}]);
        }, errorCallback, [window.LocalFileSystem.TEMPORARY]);
    } else if (path.indexOf(pathsPrefix.applicationDirectory) === 0) {
        path = path.substring(pathsPrefix.applicationDirectory.length);
        //TODO: need to cut out redundant slashes?

        var xhr = new XMLHttpRequest();
        xhr.open('GET', path, true);
        xhr.onreadystatechange = function () {
            if (xhr.status === 200 && xhr.readyState === 4) {
                requestFileSystem(function(fs) {
                    fs.name = location.hostname;

                    //TODO: need to call exports.getFile(...) to handle errors correct
                    fs.root.getFile(path, {create: true}, writeFile, errorCallback);
                }, errorCallback, [window.LocalFileSystem.PERSISTENT]);
            }
        };

        xhr.onerror = function () {
            errorCallback && errorCallback(window.FileError.NOT_READABLE_ERR);
        };

        xhr.send();
    } else {
        errorCallback && errorCallback(window.FileError.NOT_FOUND_ERR);
    }

    function writeFile(entry) {
        entry.createWriter(function (fileWriter) {
            fileWriter.onwriteend = function (evt) {
                if (!evt.target.error) {
                    entry.filesystemName = location.hostname;
                    successCallback(entry);
                }
            };
            fileWriter.onerror = function () {
                errorCallback && errorCallback(window.FileError.NOT_READABLE_ERR);
            };
            fileWriter.write(new Blob([xhr.response]));
        }, errorCallback);
    }
}

function resolveLocalFileSystemURIHandler(successCallback, errorCallback, module, event, args) {
    resolveLocalFileSystemURI(successCallback, errorCallback, args);
}

function requestAllPathsHandler(successCallback, errorCallback, module, event, args) {
    successCallback(pathsPrefix);
}

// This handler is required for tests and backwards compatibility
function _getLocalFilesystemPathHandler(successCallback, errorCallback, module, event, args) {
    var url = args[0];
    var stringToCut = 'file://';
    var fileIndex = url.indexOf(stringToCut);
    if (fileIndex !== -1) {
        url = url.substr(stringToCut.length, url.length - stringToCut.length);
    }
    successCallback(url);
}

function notifyNotSupported(success, fail, args) {
    fail('This method is not supported yet');
}

module.exports = {
    'File': {
        'requestAllPaths': requestAllPathsHandler,
        'getDirectory': getDirectoryHandler,
        'removeRecursively': removeRecursively,
        'getFile': getFileHandler,
        'readEntries': readEntriesHandler,
        'getFileMetadata': getFileMetadata,
        'setMetadata': setMetadata,
        'moveTo': moveToHandler,
        'copyTo': copyToHandler,
        'remove': removeHandler,
        'getParent': getParentHandler,
        'readAsDataURL': readAsDataURLHandler,
        'readAsBinaryString': readAsBinaryStringHandler,
        'readAsArrayBuffer': readAsArrayBufferHandler,
        'readAsText': readAsTextHandler,
        'write': writeHandler,
        'requestFileSystem': requestFileSystemHandler,
        'resolveLocalFileSystemURI': resolveLocalFileSystemURIHandler,
        // exec's below are not implemented in browser platform
        'truncate': notifyNotSupported,
        'requestAllFileSystems': notifyNotSupported,
        // method below is used for backward compatibility w/ old File plugin implementation
        '_getLocalFilesystemPath': _getLocalFilesystemPathHandler
    }
};

},{"./MyFile":35,"./indexedDB":38}],37:[function(require,module,exports){
// Copyright (c) Microsoft Corporation. All rights reserved.

var filePluginIsReadyEvent = new Event('filePluginIsReady');
var PERSISTENT_FS_QUOTA = 5 * 1024 * 1024;

var entryFunctionsCreated = false;
var quotaWasRequested = false;
var eventWasThrown = false;

window.initPersistentFileSystem = function(size, win, fail) {
    if (navigator.webkitPersistentStorage) {
        navigator.webkitPersistentStorage.requestQuota(size, win, fail);
        return;
    }

    fail('This browser does not support this function');
};

window.isFilePluginReadyRaised = function () { return eventWasThrown; };

window.initPersistentFileSystem(PERSISTENT_FS_QUOTA, function() {
    console.log('Persistent fs quota granted');
    quotaWasRequested = true;
}, function(e){
    console.log('Error occured while trying to request Persistent fs quota: ' + JSON.stringify(e));
});

function dispatchEventIfReady() {
    if (entryFunctionsCreated && quotaWasRequested) {
        window.dispatchEvent(filePluginIsReadyEvent);
        eventWasThrown = true;
    } else {
        setTimeout(dispatchEventIfReady, 100);
    }
}

// We create and fire event 'filePluginIsReady' when file system persistent file quota
// is granted and entry functions are overriden, so we can already work with file system properly.
dispatchEventIfReady();

// We must override some functionality so that plugin can work properly,
// for example, if we override window.requestFileSystem or window.resolveLocalFileSystemURL,
// they might be overrided later, and if we will wait for deviceready event, we assume that
// these functions will not be overrided later.
document.addEventListener('deviceready', function () {
    window.requestFileSystem = window.webkitRequestFileSystem;

    if (!window.requestFileSystem) {
        window.requestFileSystem = function(type, size, win, fail) {
            if (fail) {
                fail('Not supported');
            }
        };
    } else {
        window.requestFileSystem(window.TEMPORARY, 1, createFileEntryFunctions, function() {});
    }

    function createFileEntryFunctions(fs) {
        fs.root.getFile('todelete_658674_833_4_cdv', {create: true}, function(fileEntry) {
            var fileEntryType = Object.getPrototypeOf(fileEntry);
            var entryType = Object.getPrototypeOf(fileEntryType);

            // Save the original method
            var origToURL = entryType.toURL;
            entryType.toURL = function () {
                var origURL = origToURL.call(this);
                if (this.isDirectory && origURL.substr(-1) !== '/') {
                    return origURL + '/';
                }
                return origURL;
            };

            entryType.toNativeURL = function () {
                console.warn('DEPRECATED: Update your code to use \'toURL\'');
                return this.toURL();
            };

            entryType.toInternalURL = function() {
                if (this.toURL().indexOf('persistent') > -1) {
                    return 'cdvfile://localhost/persistent' + this.fullPath;
                }

                if (this.toURL().indexOf('temporary') > -1) {
                    return 'cdvfile://localhost/temporary' + this.fullPath;
                }
            };

            entryType.setMetadata = function(win, fail /*, metadata*/) {
                fail && fail('Not supported');
            };

            fileEntry.createWriter(function(writer) {
                var originalWrite = writer.write;
                var writerProto = Object.getPrototypeOf(writer);
                writerProto.write = function(blob) {
                    if(blob instanceof Blob) {
                        originalWrite.apply(this, [blob]);
                    } else {
                        var realBlob = new Blob([blob]);
                        originalWrite.apply(this, [realBlob]);
                    }
                };

                fileEntry.remove(function(){ entryFunctionsCreated = true; }, function(){ /* empty callback */ });
            });
        });
    }

    if (!window.resolveLocalFileSystemURL) {
        window.resolveLocalFileSystemURL = function(url, win, fail) {
            if(fail) {
                fail('Not supported');
            }
        };
    }

    // Resolves a filesystem entry by its path - which is passed either in standard (filesystem:file://) or
    // Cordova-specific (cdvfile://) universal way.
    // Aligns with specification: http://www.w3.org/TR/2011/WD-file-system-api-20110419/#widl-LocalFileSystem-resolveLocalFileSystemURL
    var nativeResolveLocalFileSystemURL = window.webkitResolveLocalFileSystemURL || window.resolveLocalFileSystemURL;
    window.resolveLocalFileSystemURL = function(url, win, fail) {
        /* If url starts with `cdvfile` then we need convert it to Chrome real url first:
          cdvfile://localhost/persistent/path/to/file -> filesystem:file://persistent/path/to/file */
        if (url.trim().substr(0, 7) === 'cdvfile') {
            /* Quirk:
            Plugin supports cdvfile://localhost (local resources) only.
            I.e. external resources are not supported via cdvfile. */
            if (url.indexOf('cdvfile://localhost') !== -1) {
                // Browser supports temporary and persistent only
                var indexPersistent = url.indexOf('persistent');
                var indexTemporary = url.indexOf('temporary');

                /* Chrome urls start with 'filesystem:' prefix. See quirk:
                   toURL function in Chrome returns filesystem:-prefixed path depending on application host.
                   For example, filesystem:file:///persistent/somefile.txt,
                   filesystem:http://localhost:8080/persistent/somefile.txt. */
                var prefix = 'filesystem:file:///';
                if (location.protocol !== 'file:') {
                    prefix = 'filesystem:' + location.origin + '/';
                }

                var result;
                if (indexPersistent !== -1) {
                    // cdvfile://localhost/persistent/path/to/file -> filesystem:file://persistent/path/to/file
                    // or filesystem:http://localhost:8080/persistent/path/to/file
                    result =  prefix + 'persistent' + url.substr(indexPersistent + 10);
                    nativeResolveLocalFileSystemURL(result, win, fail);
                    return;
                }

                if (indexTemporary !== -1) {
                    // cdvfile://localhost/temporary/path/to/file -> filesystem:file://temporary/path/to/file
                    // or filesystem:http://localhost:8080/temporary/path/to/file
                    result = prefix + 'temporary' + url.substr(indexTemporary + 9);
                    nativeResolveLocalFileSystemURL(result, win, fail);
                    return;
                }
            }

            // cdvfile other than local file resource is not supported
            fail && fail(function () {throw new window.FileError(window.FileError.ENCODING_ERR);});
        } else if (url.trim().indexOf('file://') === 0) {
            // ADDED
            url = 'filesystem:http://' + url.replace('file://', '');
            nativeResolveLocalFileSystemURL(url, win, fail);
        } else {
            nativeResolveLocalFileSystemURL(url, win, fail);
        }
    };
}, false);

// This handler is required for tests and backwards compatibility
function _getLocalFilesystemPathHandler(successCallback, errorCallback, module, event, args) {
    var url = args[0];
    var localhostIndex = url.indexOf('localhost');
    if (localhostIndex !== -1) {
        url = url.substr(localhostIndex, url.length - localhostIndex);
    }
    successCallback(url);
}

function requestAllPathsHandler(successCallback, errorCallback, module, event, args) {
    var pathsPrefix = {
        // Read-only directory where the application is installed.
        applicationDirectory: location.origin + '/',
        // Where to put app-specific data files.
        dataDirectory: 'filesystem:file:///persistent/',
        // Cached files that should survive app restarts.
        // Apps should not rely on the OS to delete files in here.
        cacheDirectory: 'filesystem:file:///temporary/'
    };

    successCallback(pathsPrefix);
}

module.exports = {
    'File': {
        '_getLocalFilesystemPath': _getLocalFilesystemPathHandler,
        'requestAllPaths': requestAllPathsHandler
    }
};

},{}],38:[function(require,module,exports){
// Copyright (c) Microsoft Corporation. All rights reserved.

var indexedDB = {
    db: null
};

var FILE_STORE_ = 'entries',
    DIR_SEPARATOR = '/',
    unicodeLastChar = 65535;

indexedDB.open = function(dbName, successCallback, errorCallback) {
    var self = this;

    // TODO: FF 12.0a1 isn't liking a db name with : in it.
    var request = window.indexedDB.open(dbName.replace(':', '_')/*, 1 /*version*/);

    request.onerror = errorCallback || onError;

    request.onupgradeneeded = function(e) {
        // First open was called or higher db version was used.

        // console.log('onupgradeneeded: oldVersion:' + e.oldVersion,
        //           'newVersion:' + e.newVersion);

        self.db = e.target.result;
        self.db.onerror = onError;

        if (!self.db.objectStoreNames.contains(FILE_STORE_)) {
            self.db.createObjectStore(FILE_STORE_/*,{keyPath: 'id', autoIncrement: true}*/);
        }
    };

    request.onsuccess = function(e) {
        self.db = e.target.result;
        self.db.onerror = onError;
        successCallback(e);
    };

    request.onblocked = errorCallback || onError;
};

indexedDB.close = function() {
    this.db.close();
    this.db = null;
};

indexedDB.get = function(fullPath, successCallback, errorCallback) {
    if (!this.db) {
        errorCallback && errorCallback(window.FileError.INVALID_MODIFICATION_ERR);
        return;
    }

    var tx = this.db.transaction([FILE_STORE_], 'readonly');

    var request = tx.objectStore(FILE_STORE_).get(fullPath);

    tx.onabort = errorCallback || onError;
    tx.oncomplete = function() {
        successCallback(request.result);
    };
};

indexedDB.getAllEntries = function(fullPath, storagePath, successCallback, errorCallback) {
    if (!this.db) {
        errorCallback && errorCallback(window.FileError.INVALID_MODIFICATION_ERR);
        return;
    }

    var results = [];

    if (storagePath[storagePath.length - 1] === DIR_SEPARATOR) {
        storagePath = storagePath.substring(0, storagePath.length - 1);
    }

    var range = window.IDBKeyRange.bound(storagePath + DIR_SEPARATOR + ' ',
        storagePath + DIR_SEPARATOR + String.fromCharCode(unicodeLastChar));

    var tx = this.db.transaction([FILE_STORE_], 'readonly');
    tx.onabort = errorCallback || onError;
    tx.oncomplete = function() {
        results = results.filter(function(val) {
            var pathWithoutSlash = val.fullPath;

            if (val.fullPath[val.fullPath.length - 1] === DIR_SEPARATOR) {
                pathWithoutSlash = pathWithoutSlash.substr(0, pathWithoutSlash.length - 1);
            }

            var valPartsLen = pathWithoutSlash.split(DIR_SEPARATOR).length;
            var fullPathPartsLen = fullPath.split(DIR_SEPARATOR).length;

            /* Input fullPath parameter  equals '//' for root folder */
            /* Entries in root folder has valPartsLen equals 2 (see below) */
            if (fullPath[fullPath.length - 1] === DIR_SEPARATOR && fullPath.trim().length === 2) {
                fullPathPartsLen = 1;
            } else if (fullPath[fullPath.length - 1] === DIR_SEPARATOR) {
                fullPathPartsLen = fullPath.substr(0, fullPath.length - 1).split(DIR_SEPARATOR).length;
            } else {
                fullPathPartsLen = fullPath.split(DIR_SEPARATOR).length;
            }

            if (valPartsLen === fullPathPartsLen + 1) {
                // If this a subfolder and entry is a direct child, include it in
                // the results. Otherwise, it's not an entry of this folder.
                return val;
            } else return false;
        });

        successCallback(results);
    };

    var request = tx.objectStore(FILE_STORE_).openCursor(range);

    request.onsuccess = function(e) {
        var cursor = e.target.result;
        if (cursor) {
            var val = cursor.value;

            results.push(val.isFile ? fileEntryFromIdbEntry(val) : new window.DirectoryEntry(val.name, val.fullPath, val.filesystem));
            cursor['continue']();
        }
    };
};

indexedDB['delete'] = function(fullPath, successCallback, errorCallback, isDirectory) {
    if (!indexedDB.db) {
        errorCallback && errorCallback(window.FileError.INVALID_MODIFICATION_ERR);
        return;
    }

    var tx = this.db.transaction([FILE_STORE_], 'readwrite');
    tx.oncomplete = successCallback;
    tx.onabort = errorCallback || onError;
    tx.oncomplete = function() {
        if (isDirectory) {
            //We delete nested files and folders after deleting parent folder
            //We use ranges: https://developer.mozilla.org/en-US/docs/Web/API/IDBKeyRange
            fullPath = fullPath + DIR_SEPARATOR;

            //Range contains all entries in the form fullPath<symbol> where
            //symbol in the range from ' ' to symbol which has code `unicodeLastChar`
            var range = window.IDBKeyRange.bound(fullPath + ' ', fullPath + String.fromCharCode(unicodeLastChar));

            var newTx = this.db.transaction([FILE_STORE_], 'readwrite');
            newTx.oncomplete = successCallback;
            newTx.onabort = errorCallback || onError;
            newTx.objectStore(FILE_STORE_)['delete'](range);
        } else {
            successCallback();
        }
    };
    tx.objectStore(FILE_STORE_)['delete'](fullPath);
};

indexedDB.put = function(entry, storagePath, successCallback, errorCallback) {
    if (!this.db) {
        errorCallback && errorCallback(window.FileError.INVALID_MODIFICATION_ERR);
        return;
    }

    var tx = this.db.transaction([FILE_STORE_], 'readwrite');
    tx.onabort = onError;
    tx.oncomplete = function() {
        // TODO: Error is thrown if we pass the request event back instead.
        successCallback(entry);
    };

    tx.objectStore(FILE_STORE_).put(entry, storagePath);
};

function onError(e) {
    switch (e.target.errorCode) {
        case 12:
            console.log('Error - Attempt to open db with a lower version than the ' +
                'current one.');
            break;
        default:
            console.log('errorCode: ' + e.target.errorCode);
    }

    console.log(e, e.code, e.message);
}

function fileEntryFromIdbEntry(fileEntry) {
    // IDB won't save methods, so we need re-create the FileEntry.
    var clonedFileEntry = new window.FileEntry(fileEntry.name, fileEntry.fullPath, fileEntry.filesystem);
    clonedFileEntry.file_ = fileEntry.file_;

    return clonedFileEntry;
}

module.exports = indexedDB;

},{}],39:[function(require,module,exports){
// Copyright (c) Microsoft Corporation. All rights reserved.
// Based on Apache Cordova geolocation plugin's Coordinates implementation.
// See https://github.com/apache/cordova-plugin-geolocation/blob/master/www/Coordinates.js

/**
 * This class contains position information.
 * @param {Object} lat
 * @param {Object} lng
 * @param {Object} alt
 * @param {Object} acc
 * @param {Object} head
 * @param {Object} vel
 * @param {Object} altacc
 * @constructor
 */
var Coordinates = function(lat, lng, alt, acc, head, vel, altacc) {
    /**
     * The latitude of the position.
     */
    this.latitude = lat;
    /**
     * The longitude of the position,
     */
    this.longitude = lng;
    /**
     * The accuracy of the position.
     */
    this.accuracy = acc;
    /**
     * The altitude of the position.
     */
    this.altitude = (alt !== undefined ? alt : null);
    /**
     * The direction the device is moving at the position.
     */
    this.heading = (head !== undefined ? head : null);
    /**
     * The velocity with which the device is moving at the position.
     */
    this.speed = (vel !== undefined ? vel : null);

    if (this.speed === 0 || this.speed === null) {
        this.heading = NaN;
    }

    /**
     * The altitude accuracy of the position.
     */
    this.altitudeAccuracy = (altacc !== undefined) ? altacc : null;
};

module.exports = Coordinates;

},{}],40:[function(require,module,exports){
// Copyright (c) Microsoft Corporation. All rights reserved.
// Based on Apache Cordova geolocation plugin's Position implementation.
// See https://github.com/apache/cordova-plugin-geolocation/blob/master/www/Position.js

var Coordinates = require('./Coordinates');

var Position = function(coords, timestamp) {
    if (coords) {
        this.coords = new Coordinates(coords.latitude, coords.longitude, coords.altitude, coords.accuracy, coords.heading, coords.velocity, coords.altitudeAccuracy);
    } else {
        this.coords = new Coordinates();
    }
    this.timestamp = (timestamp !== undefined) ? timestamp : new Date();
};

module.exports = Position;

},{"./Coordinates":39}],41:[function(require,module,exports){
// Copyright (c) Microsoft Corporation. All rights reserved.
// Based on Apache Cordova geolocation plugin's PositionError implementation.
// See https://github.com/apache/cordova-plugin-geolocation/blob/master/www/PositionError.js

/**
 * Position error object
 *
 * @constructor
 * @param code
 * @param message
 */
var PositionError = function(code, message) {
    this.code = code || null;
    this.message = message || '';
};

PositionError.prototype.PERMISSION_DENIED = PositionError.PERMISSION_DENIED = 1;
PositionError.prototype.POSITION_UNAVAILABLE = PositionError.POSITION_UNAVAILABLE = 2;
PositionError.prototype.TIMEOUT = PositionError.TIMEOUT = 3;

module.exports = PositionError;

},{}],42:[function(require,module,exports){
// Copyright (c) Microsoft Corporation. All rights reserved.

// Events taken from cordova-plugin-inappbrowser implementation, and iframe approach
// based from https://github.com/apache/cordova-plugin-inappbrowser/blob/master/src/browser/InAppBrowserProxy.js

/*global cordova: false */

var utils = require('utils');

var _defaultInAppBrowserType = 'iframe';

/**
 * @param {string} url
 * @param {Array} options
 * @param {function} success
 * @param {function} fail
 * @constructor
 */
function InAppBrowser(url, options, success, fail) {
    this._url = this._prepareUrl(url);
    this._options = {};
    this._callbacks = {
        success: success,
        fail: fail
    };

    options = (options.trim() === '') ? [] : options.split(';');

    // prepare options object
    options.forEach(function (option) {
        var prop = option.split('='); // "theOption=value"
        this._options[prop[0]] = prop[1];
    }.bind(this));

    if (this._options.hidden !== 'yes') {
        this.show();
    }
}

/**
 * @enum
 */
InAppBrowser.Events = {
    LOAD_START: 'loadstart',
    LOAD_STOP: 'loadstop',
    LOAD_ERROR: 'loaderror',
    EXIT: 'exit'
};

InAppBrowser.prototype._prepareUrl = function (url) {
    var queryParameter = 'cdvsim-enabled=false',
        updatedUrl = url;

    if (utils.isSameOriginRequest(url)) {
        url = utils.parseUrl(url);
        updatedUrl += (url.search.length > 0) ? '&' : '?';
        updatedUrl += queryParameter;
    }

    return updatedUrl;
};

InAppBrowser.prototype.getCurrentUrl = function () {};

/**
 * JavaScript implementation of the Native call to show. The simulator browser should be
 * displayed.
 * Subclasses must implement this.
 */
InAppBrowser.prototype.show = function () {};

/**
 * Hide the simulator browser.
 * Subclasses must implement this.
 */
InAppBrowser.prototype.close = function () {};

InAppBrowser.prototype.injectScriptCode = function (callback, args) {
    console.error('InAppBrowser "injectScriptCode" simulation not supported');
};

InAppBrowser.prototype.injectScriptFile = function (callback, args) {
    console.error('InAppBrowser "injectScriptFile" simulation not supported');
};

InAppBrowser.prototype.injectStyleCode = function (callback, args) {
    console.error('InAppBrowser "injectStyleCode" simulation not supported');
};

InAppBrowser.prototype.injectStyleFile = function (callback, args) {
    console.error('InAppBrowser "injectScriptFile" simulation not supported');
};

/**
 * Execute the success callback specified at the native "open" call.
 * @param {string} eventName
 * @private
 */
InAppBrowser.prototype._success = function (eventName) {
    this._callbacks.success({
        type: eventName,
        url: this.getCurrentUrl()
    });
};

/**
 * Implementation of the System browser simulation. This uses a new browser window
 * as the system browser.
 * @param {string} url
 * @param {Array} options
 * @param {function} success
 * @param {function} fail
 * @constructor
 */
function SystemBrowser(url, options, success, fail) {
    InAppBrowser.call(this, url, options, success, fail);

    this._window = null;
}

SystemBrowser.prototype = Object.create(InAppBrowser.prototype);
SystemBrowser.prototype.constructor = SystemBrowser;
SystemBrowser.prototype.parentClass = InAppBrowser.prototype;

SystemBrowser.prototype.getCurrentUrl = function () {
    return (this._window ? this._window.location.href : '');
};

SystemBrowser.prototype.show = function () {
    if (!this._window) {
        var modulemapper = cordova.require('cordova/modulemapper'),
            windowOpen = modulemapper.getOriginalSymbol(window, 'window.open');

        this._success(InAppBrowser.Events.LOAD_START);

        this._window = windowOpen.call(window, this._url, '_blank');
    }
};

SystemBrowser.prototype.close = function () {
    if (this._window) {
        this._window.close();
        this._window = null;

        this._success(InAppBrowser.Events.EXIT);
    }
};

/**
 * Implementation of the WebView type of InAppBrowser plugin. This creates an iframe
 * that simulates the embedded WebView.
 * @param {string} url
 * @param {Array} options
 * @param {function} success
 * @param {function} fail
 * @constructor
 */
function IframeBrowser(url, options, success, fail) {
    this._container = null;
    this._iframe = null;
    this._resizeCallback = this._resizeContainer.bind(this);
    this._isVisible = false;

    InAppBrowser.call(this, url, options, success, fail);
}

IframeBrowser.prototype = Object.create(InAppBrowser.prototype);
IframeBrowser.prototype.constructor = IframeBrowser;
IframeBrowser.prototype.parentClass = InAppBrowser.prototype;

IframeBrowser.prototype.getCurrentUrl = function () {
    return (this._iframe ? this._iframe.src : '');
};

IframeBrowser.prototype.show = function () {
    if (!this._container) {
        this._createFrame();
    }

    this._isVisible = true;

    this._iframe.src = this._url;
    this._container.style.display = 'block';

    this._resizeContainer();

    this._success(InAppBrowser.Events.LOAD_START);
};

IframeBrowser.prototype.close = function () {
    if (this._container) {
        this._container.parentNode.removeChild(this._container);
        this._container = null;
        this._isVisible = false;

        this._success(InAppBrowser.Events.EXIT);

        this._iframe = null;

        window.removeEventListener('resize', this._resizeCallback);
    }
};

IframeBrowser.prototype.hide = function () {
    if (this._container && this._isVisible) {
        this._container.style.display = 'none';
        this._isVisible = false;
    }
};

IframeBrowser.prototype.injectScriptCode = function (callback, args) {
    if (this._container && this._iframe) {
        var code = args[0].replace(/\r?\n|\r/g, ''),
            hasCallback = args[1];

        try {
            var result = this._injectCode(code);
            if (hasCallback) {
                callback(result);
            }
        } catch (error) {
            console.error('Error occured while trying to inject script', error);
        }
    }
};

IframeBrowser.prototype.injectScriptFile = function (callback, args) {
    var file = args[0];
    var code = '(function () {' +
        'var head = document.getElementsByTagName("head")[0];' +
        'var script = document.createElement("script");' +
        'script.type = "text/javascript";' +
        'script.id = "inappbrowser-inject-script";' +
        'script.src = "' + file + '";' +
        'head.appendChild(script);' +
        '}());';

    args[0] = code;

    this.injectScriptCode(callback, args);
};

IframeBrowser.prototype.injectStyleCode = function (callback, args) {
    if (this._container && this._iframe) {
        var css = args[0].replace(/\r?\n|\r/g, ''),
            hasCallback = args[1];

        var code = '(function () {' +
            'var head = document.getElementsByTagName("head")[0];' +
            'var style = document.createElement("style");' +
            'style.type = "text/css";' +
            'if (style.styleSheet) {' +
            'style.styleSheet.cssText = "' + css + '";' +
            '} else {' +
            'style.appendChild(document.createTextNode("' + css + '"));}' +
            'head.appendChild(style);' +
            '}());';

        try {
            var result = this._injectCode(code);
            if (hasCallback) {
                callback(result);
            }
        } catch (error) {
            console.error('Error occured while trying to inject style', error);
        }
    }
};

IframeBrowser.prototype.injectStyleFile = function (callback, args) {
    if (this._container && this._iframe) {
        var file = args[0],
            hasCallback = args[1];

        var code = '(function () {' +
            'var head = document.getElementsByTagName("head")[0];' +
            'var link = document.createElement("link");' +
            'link.type = "text/css";' +
            'link.rel = "stylesheet";' +
            'link.href = "' + file + '";' +
            'head.appendChild(link);' +
            '}());';

        try {
            var result = this._injectCode(code);
            if (hasCallback) {
                callback(result);
            }
        } catch (error) {
            console.error('Error occured while trying to inject a style file', error);
        }
    }
};

/**
 * @private
 */
IframeBrowser.prototype._createFrame = function () {
    this._container = document.createElement('div');
    this._iframe = document.createElement('iframe');
    this._iframe.sandbox = 'allow-modals allow-popups';

    // container style
    var style = this._container.style;
    style.position = 'absolute';
    style.top = style.left = '0';
    style.border = '0';
    style.backgroundColor = '#ffffff';
    style.zIndex = '10000';
    style.width = document.body.clientWidth + 'px';
    style.height = document.body.clientHeight + 'px';
    style.minHeight = style.minWidth = '100%';

    // iframe style
    style = this._iframe.style;
    style.border = '0';
    style.width = '100%';

    if (!this._options.location || this._options.location === 'yes') {
        style.height = 'calc(100% - 35px)';

        this._container.appendChild(this._createNavigationBar());
    } else {
        style.height = '100%';
    }

    this._container.appendChild(this._iframe);

    document.body.appendChild(this._container);

    this._iframe.addEventListener('pageshow', this._success.bind(this, InAppBrowser.Events.LOAD_START));
    this._iframe.addEventListener('load', this._success.bind(this, InAppBrowser.Events.LOAD_STOP));
    this._iframe.addEventListener('error', this._success.bind(this, InAppBrowser.Events.LOAD_ERROR));
    this._iframe.addEventListener('abort', this._success.bind(this, InAppBrowser.Events.LOAD_ERROR));

    window.addEventListener('resize', this._resizeCallback);
};

/**
 * Creates a fake browser's navigation bar, that only contains a button to remove the iframe.
 * @private
 */
IframeBrowser.prototype._createNavigationBar = function () {
    var navigationDiv = document.createElement('div'),
        closeSpan = document.createElement('span');

    navigationDiv.style.height = '30px';
    navigationDiv.style.padding = '2px';
    navigationDiv.style.backgroundColor = '#404040';

    closeSpan.innerHTML = '';
    closeSpan.style.width = '30px';
    closeSpan.style.height = '25px';
    closeSpan.style.color = '#ffffff';
    closeSpan.style.fontSize = '22px';
    closeSpan.style.marginLeft = '5px';
    closeSpan.style.cursor = 'pointer';

    closeSpan.addEventListener('click', function (e) {
        setTimeout(function () {
            this.close();
        }.bind(this), 0);
    }.bind(this));

    navigationDiv.appendChild(closeSpan);

    return navigationDiv;
};

/**
 * Resize the main container with the document.body size, only when it is visible.
 * @private
 */
IframeBrowser.prototype._resizeContainer = function () {
    if (this._container && this._isVisible) {
        var body = document.body;

        this._container.style.width = body.clientWidth + 'px';
        this._container.style.height = body.clientHeight + 'px';
    }
};

/**
 * Execute the given code in the iframe context whenever it's possible. This may
 * throw an error when the URL loaded in the iframe is not in the same domain than
 * the application.
 * @throws It throws an error when the eval call from the iframe fails.
 * @private
 */
IframeBrowser.prototype._injectCode = function (code) {
    var result = this._iframe.contentWindow.eval(code);

    return result ? [result] : [];
};

/**
 * Create an instance of InAppBrowser based on the target type. When the type is '_system',
 * an instance of the system browser is created, when the type is '_blank', an instance of
 * a browser based on iframe is created. For any other target type, including '_self',
 * the current window will navigate to the given URL.
 * @param {function} success
 * @param {function} fail
 * @param {Array} args
 * @return {object}
 */
function create(success, fail, args) {
    // args[0]: url, args[1]: target, args[2]: options
    var Constructor;

    switch (args[1]) {
        case '_system':
            // open in a new browser tab
            Constructor = SystemBrowser;
            break;
        case '_self':
            // use the current window
            window.location = args[0];
            return;
        default:
            if (_defaultInAppBrowserType === 'iframe') {
                // "_blank" and any other option, use the iframe browser
                Constructor = IframeBrowser;
            } else {
                // new browser window
                Constructor = SystemBrowser;
            }
    }

    return new Constructor(args[0], args[2], success, fail);
}

function setDefaultInAppBrowser(value) {
    _defaultInAppBrowserType = value;
}

module.exports.create = create;
module.exports.setDefaultInAppBrowser = setDefaultInAppBrowser;

},{"utils":"utils"}],43:[function(require,module,exports){
// Copyright (c) Microsoft Corporation. All rights reserved.

// https://github.com/apache/cordova-plugin-media/

/*global Media: false */

var _players = {};

/**
 * @param {string} id
 * @constructor
 */
function Player(id, src) {
    this.id = id;
    this.src = src;
    this._node = null;
    this._state = null; // refence to a Media.State

    this._updateState(Media.MEDIA_STARTING);
    this._prepare();
}

Player.prototype.startPlaying = function (src) {
    this.src = src;
    if (this._prepare()) {
        this._node.play();
    }
};

Player.prototype.pausePlaying = function () {
    if (this._isReady() && this._state === Media.MEDIA_RUNNING) {
        try {
            this._node.pause();
            this._updateState(Media.MEDIA_PAUSED);
        } catch (err) {
            this._notifyError(window.MediaError.MEDIA_ERR_ABORTED);
        }
    } else {
        this._notifyError(window.MediaError.MEDIA_ERR_NONE_ACTIVE);
    }
};

Player.prototype.stopPlaying = function () {
    if (this._isReady() && (this._state === Media.MEDIA_RUNNING || this._state === Media.MEDIA_PAUSED)) {
        try {
            this._node.pause();
            this.seekToAudio(0);
            this._updateState(Media.MEDIA_STOPPED);
        } catch (err) {
            this._notifyError(window.MediaError.MEDIA_ERR_ABORTED);
        }
    } else {
        this._notifyError(window.MediaError.MEDIA_ERR_NONE_ACTIVE);
    }
};

Player.prototype.seekToAudio = function (milliseconds) {
    if (this._isReady()) {
        try {
            this._node.currentTime = (milliseconds / 1000);
        } catch (err) {
            this._notifyError(window.MediaError.MEDIA_ERR_ABORTED);
        }
    } else {
        this._notifyError(window.MediaError.MEDIA_ERR_NONE_ACTIVE);
    }
};

Player.prototype.destroy = function () {
    try {
        if (this._isReady()) {
            this._node.pause();
            this._node = null;

            this._updateState(Media.MEDIA_STOPPED);
        }
    } catch (err) {
        this._notifyError(window.MediaError.MEDIA_ERR_ABORTED);
    }
};

/**
 * @return {boolean} True when the operation is successful and the node is available,
 *                  false when there's was an error trying to create an Audio node.
 * @private
 */
Player.prototype._prepare = function () {
    if (!this._isReady()) {
        // if the player was destroyed, then the node will be null
        // and we need to create it again
        try {
            this._node = this._createAudioNode();
        } catch (err) {
            this._state = Media.MEDIA_NONE;
            this._notifyError(window.MediaError.MEDIA_ERR_ABORTED);

            return false;
        }
    }
    // audio player is ready
    return true;
};

Player.prototype.getCurrentPosition = function (success, fail) {
    var position = this._node.currentTime;

    this._notifyStatus(Media.MEDIA_POSITION, position);
    success(position);
};

Player.prototype.startRecord = function () {
    this._notifyError(window.MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED, 'Not supported API');
};

Player.prototype.stopRecord = function (pause) {
    this._notifyError(window.MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED, 'Not supported API');
};

Player.prototype.resumeRecord = function () {
    this._notifyError(window.MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED, 'Not supported API');
};

Player.prototype.release = function () {
    this._player.release();
};

Player.prototype.setVolume = function (volume) {
    if (this._isReady()) {
        this._node.volume = volume;
    }
};

Player.prototype.setRate = function () {
    this._notifyError(window.MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED, 'Not supported API');
};

Player.prototype.getCurrentAmplitude = function () {
    this._notifyError(window.MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED, 'Not supported API');
};

/**
 * @number {state}
 * @private
 */
Player.prototype._updateState = function (state) {
    if (this._state !== state) {
        this._state = state;

        this._notifyStatus(Media.MEDIA_STATE, this._state);
    }
};

/**
 * @param {number} code
 * @param {string=} message
 * @private
 */
Player.prototype._notifyError = function (code, message) {
    var mediaError = {
        code: code
    };

    if (typeof msg !== 'undefined') {
        mediaError.message = message;
    }

    this._notifyStatus(Media.MEDIA_ERROR, mediaError);
};

Player.prototype._notifyStatus = function (type, value) {
    if (window.Media.onStatus) {
        window.Media.onStatus(this.id, type, value);
    }
};

/**
 * Check if the media player is ready: the Audio instance is available.
 * @return {boolean}
 * @private
 */
Player.prototype._isReady = function () {
    return !!this._node;
};

/**
 * Creates a new player with necessary event listeners attached.
 * @return {Audio}
 * @trows
 * @private
 */
Player.prototype._createAudioNode = function () {
    var node = new Audio();
    node.onloadstart = this._updateState.bind(this, Media.MEDIA_STARTING);
    node.onplaying = this._updateState.bind(this, Media.MEDIA_RUNNING);
    node.onended = this._updateState.bind(this, Media.MEDIA_STOPPED);

    node.ondurationchange = function (e) {
        this._notifyStatus(Media.MEDIA_DURATION, (e.target.duration || -1));
    }.bind(this);

    node.onerror = function (e) {
        // Due to media.spec.15 It should return MediaError for bad filename
        var code;
        if (e.target.error.code === window.MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED) {
            code = window.MediaError.MEDIA_ERR_ABORTED;
        } else {
            code =  e.target.error.code;
        }

        this._notifyError(code);
    }.bind(this);

    if (this.src) {
        node.src = this.src;
    }

    return node;
};

function getById(id) {
    return _players[id];
}

function createIfNeeded(id, src) {
    var player = getById(id);
    if (!player) {
        player = new Player(id, src);
        _players[id] = player;
    }

    return player;
}

function removeById(id) {
    if (_players[id]) {
        delete _players[id];
    }
}

module.exports.createIfNeeded    = createIfNeeded;
module.exports.getById           = getById;
module.exports.removeById        = removeById;

},{}],"argscheck":[function(require,module,exports){
// Copyright (c) Microsoft Corporation. All rights reserved.
// Based in part on code from Apache Cordova (https://github.com/apache/cordova-js)

var utils = require('utils');

var moduleExports = module.exports;

var typeMap = {
    'A': 'Array',
    'D': 'Date',
    'N': 'Number',
    'S': 'String',
    'F': 'Function',
    'O': 'Object'
};

function extractParamName(callee, argIndex) {
    return (/.*?\((.*?)\)/).exec(callee)[1].split(', ')[argIndex];
}

function checkArgs(spec, functionName, args, opt_callee) {
    if (!moduleExports.enableChecks) {
        return;
    }
    var errMsg = null;
    var typeName;
    for (var i = 0; i < spec.length; ++i) {
        var c = spec.charAt(i),
            cUpper = c.toUpperCase(),
            arg = args[i];
        // Asterix means allow anything.
        if (c == '*') {
            continue;
        }
        typeName = utils.typeName(arg);
        if ((arg === null || arg === undefined) && c == cUpper) {
            continue;
        }
        if (typeName != typeMap[cUpper]) {
            errMsg = 'Expected ' + typeMap[cUpper];
            break;
        }
    }
    if (errMsg) {
        errMsg += ', but got ' + typeName + '.';
        errMsg = 'Wrong type for parameter "' + extractParamName(opt_callee || args.callee, i) + '" of ' + functionName + ': ' + errMsg;
        throw TypeError(errMsg);
    }
}

function getValue(value, defaultValue) {
    return value === undefined ? defaultValue : value;
}

moduleExports.checkArgs = checkArgs;
moduleExports.getValue = getValue;
moduleExports.enableChecks = true;


},{"utils":"utils"}],"cordova-plugin-camera-handlers":[function(require,module,exports){
// Copyright (c) Microsoft Corporation. All rights reserved.

module.exports = function (messages) {
    return  {
        Camera: {
            takePicture: function (success, fail, args) {
                messages.call('takePicture', args).then(function (result) {
                    if (args && args[1] === 0) {
                        /* Destination type is DATA_URL */
                        success(result);
                    } else {
                        // 'result' should be {data: <ArrayBuffer>, type: <mimeType>}, from which we'll create a blob
                        var blob = new Blob([result.data], { type: result.type });
                        success(URL.createObjectURL(blob));
                    }
                }, function (error) {
                    fail(error);
                });
            }
        }
    };
};

},{}],"cordova-plugin-device":[function(require,module,exports){
// Copyright (c) Microsoft Corporation. All rights reserved.

module.exports = function(messages) {
    messages.register('cordova-version', function (callback) {
        if (window.cordova) {
            callback(null, window.cordova.version);
        } else {
            callback(null, 'You must have cordova.js included in your projects, to be able to get cordova version');
        }
    });
};

},{}],"cordova-plugin-dialogs":[function(require,module,exports){
// Copyright (c) Microsoft Corporation. All rights reserved.

// https://github.com/apache/cordova-plugin-dialogs/

module.exports = function (messages) {
    messages.register('alert', function (event, callback) {
        var args = event;
        var title = args[1];
        var text = args[0];
        var buttonName = args[2];
        createDialog(title, text, [buttonName], false, null, callback);
    });

    messages.register('confirm', function (event, callback) {
        var args = event;
        var title = args[1];
        var text = args[0];
        var buttons = args[2];
        createDialog(title, text, buttons, false, null, callback);
    });

    messages.register('prompt', function (event, callback) {
        var args = event;
        var title = args[1];
        var text = args[0];
        var buttons = args[2];
        var defaultText = args[3];
        createDialog(title, text, buttons, true, defaultText, callback);
    });

    messages.register('beep', function (event, callback) {
        var times = event;
        for (var i = 0; i < times; i++) {
            // 1700ms below is the beep sound duration
            setTimeout(makeBeep, 1700 * i);
        }
        // call callback when beep(s) is done
        setTimeout(callback, 1700 * times);
    });

    function makeBeep() {
        var audio = document.createElement('audio');
        audio.src = 'data:audio/wav;base64,UklGRjQnAABXQVZFZm10IBAAAAABAAEAQB8AAAAAAAABAAgAZGF0YRAnAACAmbHI2+v2/f/88+fWwauSeWBIMiARBwIBBhAeMEVddY+ov9Pl8vv//vft3cq0nINqUTsnFwsDAQQLGCg8U2uEnbXL3u34/v/78uTTvqaOdFtELx0PBgECBxIhM0lhepOswtfn9Pz//fbq2sewmH9mTjckFQkDAQUNGis/V2+JornP4e/5/v758OHPuqKJcFdALBsNBQEDCRQjN01lfpewxtrq9v3//PTo18OslHtiSjQhEggCAQYPHS5DW3ONpr3S5PH6//747t/Mtp6FbFM9KRgMBAEDChYmOlFpgpu0yt3s9/7/+/Pl1MCokHZdRjEeEAYCAgcRHzJHX3iRqsHV5vP7//3369zIspqBaE85JhYKAwEEDBkqPlVth6C3zeDu+f7/+vHj0byki3JZQi0cDgUBAggTIjVLY3yVrsTY6fX8//316dnFrpZ9Y0s2IxMIAgEFDhstQVlxi6S70OLw+v/++e/gzrigh25VPioZDAQBAwoVJThPZ4CZssjb6/b9//zz59bBqpJ4X0gyIBEHAgIGEB4wRV12j6i/1OXy+//+9+zdyrScg2pROycXCwMBBAsYKDxTa4Setsve7fj+//vy5NK+po10W0QvHQ8GAQIIEiEzSWF6k6zD1+f0/P/99urax7CYf2VNNyQUCQMBBQ0aK0BXb4miuc/h7/n+/vnw4c+6oolwV0AsGg0FAQMJFCQ3TWV+l7DG2ur2/f/89OjXw6yUemFJNCESCAIBBg8dLkNbdI2mvdLk8fr//vjt3sy2noVsUzwoGAwEAQMLFic6UWmCnLTK3ez3/v/78uXUv6iPdl1GMB4QBgICBxEfMkdfeJGqwdXm8/z//ffr3MiymoFnTzklFQoDAQQMGSo+VW2HoLjN4O75/v/68ePRvKSLcllCLRwOBQECCBMiNUtjfJWuxdjp9fz//PXp2cWulnxjSzUiEwgCAQUOGy1CWXKLpLvR4vD6//757uDNuKCHblU+KhkMBAEDChUlOU9ngJqyyNvr9/3//PPm1cGqkXhfRzIgEQcCAgYQHjBFXXaPqL/U5fL7//737N3KtJyDaVE7JxcLAwEECxgoPFNrhZ62zN7t+P7/+/Hk0r2mjXRbRC8dDwYBAggSITRJYXqTrMPX6PT8//326trGsJh+ZU03JBQJAwEFDRorQFdwiaK6z+Hv+f7++e/hz7qiiXBXQCsaDQUBAwkUJDdNZX6YsMba6vb9//z06NfDrJN6YUk0IRIIAgEGDx0vRFt0jaa90uTx+//++O3ezLaehWtTPCgYCwQBAwsXJztRaYOctMrd7Pf+//vy5dS/qI92XUUwHhAGAgIHESAyR194karB1ebz/P/99+vbyLKagGdPOSUVCgMBBAwZKj5VboeguM3g7vn+//rw4tG7pItyWUItGw4FAQIIEyI1S2N8lq7F2en1/P/89enYxa6VfGNLNSITCAIBBQ4cLUJZcoukvNHj8fr//vnu4M24oIdtVT4qGQwEAQMKFiU5T2eBmrLI3Ov3/f/88+bVwaqReF9HMh8RBwICBhAeMEZddo+ov9Tl8vv//vfs3cq0nIJpUTonFgsDAQQMGCg8U2yFnrbM3u34/v/68eTSvaaNdFtDLh0PBgECCBIhNElhepSsw9fo9Pz//fbq2sawl35lTTckFAkDAQUNGixAV3CJorrP4fD5/v757+HPuaKJb1dAKxoNBQEDCRQkN01lf5iwx9rq9v3//PTn18Osk3phSTMhEggCAQYPHS9EW3SNpr7S5PL7//747d7Ltp6Ea1M8KBgLBAEDCxcnO1Fqg5y0yt3s9/7/+/Ll1L+oj3ZdRTAeEAYCAgcRIDJIX3iSqsHW5/P8//3269vIspmAZ084JRUKAwEEDBkqPlVuh6C4zuDv+f7/+vDi0Luki3FZQS0bDgUBAggTIzZLY32WrsXZ6fX9//z16djErpV8Y0s1IhMIAgEFDhwtQllyi6S80ePx+v/++e7gzbegh21VPioZDAQBAwoWJjlPaIGassjc6/f9//vz5tXBqpF4X0cyHxEHAgIGEB4xRl12kKjA1OXz+//+9+zdyrSbgmlROiYWCgMBBAwYKT1TbIWetszf7vj+//rx5NK9po1zW0MuHQ8GAQIIEiE0SmJ7lKzD1+j0/P/99uraxrCXfmVNNyMUCQMBBQ0bLEBXcImius/h8Pn+/vnv4c+5oolvVz8rGg0FAQMJFSQ3TmZ/mLDH2ur2/f/89OfXwqyTemFJMyESBwIBBg8dL0RbdI6mvtPk8vv//vjt3su1nYRrUzwoFwsEAQMLFyc7UWqDnLTK3e33/v/78uXTv6iPdV1FMB4QBgECBxEgMkhgeZKrwdbn8/z//fbr28ixmYBnTzglFQoDAQQNGSo/VW6HoLjO4O/5/v/68OLQu6OLcVhBLRsOBQECCRMjNkxkfZavxdnp9f3//PXo2MStlXxjSzUiEwgCAQUOHC1CWnKMpbzR4/H6//757t/Nt5+GbVQ+KRkMBAEDChYmOVBogZqyydzr9/3/+/Pm1cCpkXdeRzEfEQcCAgcQHzFGXneQqcDU5fP7//337NzJs5uCaVA6JhYKAwEEDBgpPVRshZ62zN/u+P7/+vHj0r2ljXNaQy4cDwYBAggSITRKYnuUrcPX6PT8//326trGr5d+ZUw2IxQJAgEFDRssQFhwiqO6z+Lw+v7++e/hzrmhiG9WPysaDQUBAwkVJDhOZn+Yscfa6vb9//z059bCq5N5YEkzIBIHAgEGDx0vRFx1jqe+0+Ty+//++O3ey7WdhGtSPCgXCwQBAwsXJztSaoOdtcrd7fj+//vy5dO/p491XEUwHhAGAQIHESAySGB5kqvC1uf0/P/99uvbyLGZgGdOOCUVCgMBBA0ZKj9WboihuM7g7/n+/vrw4tC7o4pxWEEsGw4FAQIJFCM2TGR9lq/F2en1/f/89ejYxK2VfGJKNSITCAIBBQ4cLkJac4ylvNHj8fr//vju3823n4ZtVD0pGQwEAQMKFiY5UGiBm7PJ3Oz3/f/78+bVwKmRd15HMR8RBwICBxAfMUZed5CpwNTm8/v//ffs3Mmzm4JpUDomFgoDAQQMGCk9VGyGn7fM3+74/v/68ePSvaWMc1pDLhwPBgECCBMiNEpie5StxNjo9Pz//fXq2cavl35kTDYjFAkCAQUOGyxBWHGKo7rQ4vD6/v757+HOuaGIb1Y/KxoNBAEDCRUkOE5mf5mxx9vr9v3//PTn1sKrk3lgSDMgEgcCAQYPHS9EXHWOp77T5PL7//747d7LtZ2Ea1I7KBcLBAEECxcnO1JqhJ21y97t+P7/+/Ll076njnVcRS8eEAYBAgcSIDNIYHmSq8LW5/T8//3269vHsZmAZk44JRUJAwEEDRorP1ZviKG5zuDv+f7++vDi0LujinFYQSwbDgUBAgkUIzZMZH2Xr8XZ6fX9//z16NjErZV7Yko0IhMIAgEFDxwuQ1pzjKW80ePx+v/++O7fzLefhm1UPSkYDAQBAwoWJjpQaIKbs8nc7Pf9//vz5tXAqZB3XkYxHxEHAgIHER8xRl53kKnA1ebz+//99+zcybObgmhQOiYWCgMBBAwYKT1UbYaft8zf7vj+//rx49G8pYxzWkMuHA8FAQIIEyI0SmJ7la3E2Oj1/P/99enZxa+XfWRMNiMUCQIBBQ4bLEFYcYqju9Di8Pr+/vnv4M65oYhvVj8rGg0EAQMJFSU4TmaAmbHH2+v2/f/89OfWwquSeWBIMyASBwIBBhAeL0VcdY6nvtPl8vv//vjt3su1nYRqUjsnFwsEAQQLFyg7UmuEnbXL3u34/v/78uTTvqeOdVxELx0PBgECBxIgM0hgeZOrwtbn9Pz//fbq28exmX9mTjgkFQkDAQQNGis/Vm+IobnO4e/5/v768OLQuqOKcVhBLBsOBQECCRQjNkxkfpevxtnq9f3//PTo2MStlHtiSjQiEwgCAQYPHC5DWnOMpb3S4/H6//747t/Mt5+GbFQ9KRgMBAEDChYmOlBpgpuzydzs9/3/+/Pm1MCpkHdeRjEfEAcCAgcRHzFHXneRqcDV5vP7//337NzJs5uBaFA5JhYKAwEEDBkpPVRthp+3zd/u+P7/+vHj0byljHNaQi4cDgUBAggTIjVKYnyVrcTY6PX8//316dnFr5Z9ZEw2IxQJAgEFDhssQVhxiqO70OLw+v7++e/gzrihiG5WPyoZDQQBAwoVJThOZ4CZscjb6/b9//z059bCq5J5YEgyIBEHAgEGEB4wRVx1j6e/0+Xy+//++O3dyrWdg2pSOycXCwMBBAsXKDxSa4Sdtcve7fj+//vy5NO+p451XEQvHQ8GAQIHEiAzSWB5k6vC1uf0/P/99urax7GYf2ZOOCQVCQMBBQ0aKz9Wb4ihuc7h7/n+/vrw4s+6o4pwWEAsGw0FAQIJFCM2TGV+l6/G2ur2/f/89OjXw62Ue2JKNCESCAIBBg8cLkNac42lvdLj8fr//vju38y2noVsVD0pGAwEAQMKFiY6UGmCm7PJ3ez3/f/78+XUwKmQd15GMR8QBwICBxEfMUded5GpwdXm8/v//ffr3MmymoFoUDkmFgoDAQQMGSk+VG2Gn7fN3+75/v/68ePRvKWMcllCLRwOBQECCBMiNUtjfJWuxNjp9fz//fXp2cWvln1kTDYjEwkCAQUOGy1BWHGLo7vQ4vD6//757+DOuKCHblU/KhkNBAEDChUlOE9ngJmxyNvr9v3//PPn1sGrknlgSDIgEQcCAQYQHjBFXXWPqL/T5fL7//737d3KtJyDalE7JxcLAwEECxgoPFNrhJ21y97t+P7/+/Lk076mjnRbRC8dDwYBAgcSITNJYXqTrMLX5/T8//326trHsJh/Zk43JBUJAwEFDRorQFdviaK5z+Hv+f7++fDhz7qiiXBXQCwbDQUBAwkUJDdNZX6XsMba6vb9//z06NfDrJR7YUo0IRIIAgEGDx0uQ1tzjaa90uTx+v/++O7fzLaehWxTPSkYDAQBAwoWJjpRaYKbtMrd7Pf+//vz5dTAqJB2XUYxHhAGAgIHER8yR194karB1ebz+//99+vcyLKagWhPOSYWCgMBBAwZKj5VbYegt83g7vn+//rx49G8pItyWUItHA4FAQIIEyI1S2N8la7E2On1/P/99enZxa6WfWNLNiMTCAIBBQ4bLUFZcYuku9Di8Pr//vnv4M64oIduVT4qGQwEAQMKFSU4T2eAmbLI2+v2/f/88+fWwaqSeF9IMiARBwICBhAeMEVddo+ov9Tl8vv//vfs3cq0nINqUTsnFwsDAQQLGCg8U2uFnrbL3u34/v/78uTSvqaNdFtELx0PBgECCBIhM0lhepOsw9fn9Pz//fbq2sewmH9lTTckFAkDAQUNGitAV2+JornP4e/5/v758OHPuqKJcFdALBoNBQEDCRQkN01lfpewxtrq9v3//PTo18OslHphSTQhEggCAQYPHS5DW3SNpr3S5PH6//747d7Mtp6FbFM8KBgMBAEDCxYnOlFpgpy0yt3s9/7/+/Ll1L+oj3ZdRjAeEAYCAgcRHzJHX3iRqsHV5vP8//3369zIspqBZ085JRUKAwEEDBkqPlVth6C4zeDu+f7/+vHj0byki3JZQi0cDgUBAggTIjVLY3yVrsXY6fX8//z16dnFrpZ8Y0s1IhMIAgEFDhstQllyi6S70eLw+v/++e7gzbigh25VPioZDAQBAwoVJTlPZ4Cassjb6/f9//zz5tXBqpF4X0cyIBEHAgIGEB4wRV12j6i/1OXy+//+9+zdyrScg2lROycXCwMBBAsYKDxTa4Wetsze7fj+//vx5NK9po10W0QvHQ8GAQIIEiE0SWF6k6zD1+j0/P/99uraxrCYfmVNNyQUCQMBBQ0aK0BXcImius/h7/n+/vnv4c+6oolwV0ArGg0FAQMJFCQ3TWV+mLDG2ur2/f/89OjXw6yTemFJNCESCAIBBg8dL0RbdI2mvdLk8fv//vjt3sy2noVrUzwoGAsEAQMLFyc7UWmDnLTK3ez3/v/78uXUv6iPdl1FMB4QBgICBxEgMkdfeJGqwdXm8/z//ffr28iymoBnTzklFQoDAQQMGSo+VW6HoLjN4O75/v/68OLRu6SLcllCLRsOBQECCBMiNUtjfJauxdnp9fz//PXp2MWulXxjSzUiEwgCAQUOHC1CWXKLpLzR4/H6//757uDNuKCHbVU+KhkMBAEDChYlOU9ngZqyyNzr9/3//PPm1cGqkXhfRzIfEQcCAgYQHjBGXXaPqL/U5fL7//737N3KtJyCaVE6JxYLAwEEDBgoPFNshZ62zN7t+P7/+vHk0r2mjXRbQy4dDwYBAggSITRJYXqUrMPX6PT8//326trGsJd+ZU03JBQJAwEFDRosQFdwiaK6z+Hw+f7++e/hz7miiW9XQCsaDQUBAwkUJDdNZX+YsMfa6vb9//z059fDrJN6YUkzIRIIAgEGDx0vRFt0jaa+0uTy+//++O3ey7aehGtTPCgYCwQBAwsXJztRaoOctMrd7Pf+//vy5dS/qI92XUUwHhAGAgIHESAySF94kqrB1ufz/P/99uvbyLKZgGdPOCUVCgMBBAwZKj5VboeguM7g7/n+//rw4tC7pItxWUEtGw4FAQIIEyM2S2N9lq7F2en1/f/89enYxK6VfGNLNSITCAIBBQ4cLUJZcoukvNHj8fr//vnu4M23oIdtVT4qGQwEAQMKFiY5T2iBmrLI3Ov3/f/78+bVwaqReF9HMh8RBwICBhAeMUZddpCowNTl8/v//vfs3cq0m4JpUTomFgoDAQQMGCk9U2yFnrbM3+74/v/68eTSvaaNc1tDLh0PBgECCBIhNEpie5Ssw9fo9Pz//fbq2sawl35lTTcjFAkDAQUNGyxAV3CJorrP4fD5/v757+HPuaKJb1c/KxoNBQEDCRUkN05mf5iwx9rq9v3//PTn18Ksk3phSTMhEgcCAQYPHS9EW3SOp77T5PL7//747d7LtZ2Ea1I8KBcLBAEDCxcnO1Fqg5y0yt3t9/7/+/Ll07+oj3VdRTAeEAYBAgcRIDJIYHmSq8HW5/P8//3269vIsZmAZ084JRUKAwEEDRkqP1Vuh6C4zuDv+f7/+vDi0Luji3FYQS0bDgUBAgkTIzZMZH2Wr8XZ6fX9//z16NjErZV8Y0s1IhMIAgEFDhwtQlpyjKW80ePx+v/++O7fzbefhm1UPikZDAQBAwoWJjlQaIGas8nc6/f9//vz5tXAqZF3XkcxHxEHAgIHEB8xRl53kKnA1OXz+//99+zcybObgmlQOiYWCgMBBAwYKT1UbIWftszf7vj+//rx49K9pY1zWkMuHA8GAQIIEiE0SmJ7lK3D1+j0/P/99uraxq+XfmVMNiMUCQIBBQ0bLEBYcIqjus/i8Pr+/vnv4c65oYhvVj8rGg0FAQMJFSQ4TmZ/mLHH2ur2/f/89OfWwquTeWBJMyASBwIBBg8dL0RcdY6nvtPk8vv//vjt3su1nYRrUjwoFwsEAQMLFyc7UmqDnbXK3e34/v/78uXTv6ePdVxFMB4QBgECBxEgMkhgeZKrwtbn9Pz//fbr28ixmYBnTjglFQoDAQQNGSo/Vm6IobjO4O/5/v768OLQu6OKcVhBLBsOBQECCRQjNkxkfZavxdnp9f3//PXo2MStlXtiSjUiEwgCAQUOHC5CWnOMpbzR4/H6//747t/Nt5+GbVQ9KRkMBAEDChYmOVBogZuzydzs9/3/+/Pm1cCpkXdeRzEfEQcCAgcQHzFGXneQqcDU5vP7//337NzJs5uCaVA6JhYKAwEEDBgpPVRshp+3zN/u+P7/+vHj0r2ljHNaQy4cDwYBAggTIjRKYnuUrcTY6PT8//316tnGr5d+ZEw2IxQJAgEFDhssQVhxiqO60OLw+v7++e/hzrmhiG9WPysaDQQBAwkVJDhOZn+Zscfb6/b9//z059bCq5N5YEgzIBIHAgEGDx0vRFx1jqe+0+Ty+//++O3ey7WdhGtSOygXCwQBBAsXJztSaoSdtcve7fj+//vy5dO+p451XEUvHhAGAQIHEiAzSGB5kqvC1uf0/P/99uvbx7GZgGZOOCUVCQMBBA0aKz9Wb4ihuc7g7/n+/vrw4tC7o4pxWEEsGw4FAQIJFCM2TGR9l6/F2en1/f/89ejYxK2Ve2JKNCITCAIBBQ8cLkNac4ylvNHj8fr//vju38y3n4ZtVD0pGAwEAQMKFiY6UGiCm7PJ3Oz3/f/78+bVwKmQd15GMR8RBwICBxEfMUZed5CpwNXm8/v//ffs3Mmzm4JoUDomFgoDAQQMGCk9VG2Gn7fM3+74/v/68ePRvKWMc1pDLhwPBQECCBMiNEpie5WtxNjo9fz//fXp2cWvl31kTDYjFAkCAQUOGyxBWHGKo7vQ4vD6/v757+DOuaGIb1Y/KxoNBAEDCRUlOE5mgJmxx9vr9v3//PTn1sKrknlgSDMgEgcCAQYQHi9FXHWOp77T5fL7//747d7LtZ2EalI7JxcLBAEECxcoO1JrhJ21y97t+P7/+/Lk076njnVcRC8dDwYBAgcSIDNIYHmTq8LW5/T8//326tvHsZl/Zk44JBUJAwEEDRorP1ZviKG5zuHv+f7++vDi0LqjinFYQSwbDgUBAgkUIzZMZH6Xr8bZ6vX9//z06NjErZR7Yko0IhMIAgEGDxwuQ1pzjKW90uPx+v/++O7fzLefhmxUPSkYDAQBAwoWJjpQaYKbs8nc7Pf9//vz5tTAqZB3XkYxHxAHAgIHER8xR153kanA1ebz+//99+zcybObgWhQOSYWCgMBBAwZKT1UbYaft83f7vj+//rx49G8pYxzWkIuHA4FAQIIEyI1SmJ8la3E2Oj1/P/99enZxa+WfWRMNiMUCQIBBQ4bLEFYcYqju9Di8Pr+/vnv4M64oYhuVj8qGQ0EAQMKFSU4TmeAmbHI2+v2/f/89OfWwquSeWBIMiARBwIBBhAeMEVcdY+nv9Pl8vv//vjt3cq1nYNqUjsnFwsDAQQLFyg8UmuEnbXL3u34/v/78uTTvqeOdVxELx0PBgECBxIgM0lgeZOrwtbn9Pz//fbq2sexmH9mTjgkFQkDAQUNGis/Vm+IobnO4e/5/v768OLPuqOKcFhALBsNBQECCRQjNkxlfpevxtrq9v3//PTo18OtlHtiSjQhEggCAQYPHC5DWnONpb3S4/H6//747t/Mtp6FbFQ9KRgMBAEDChYmOlBpgpuzyd3s9/3/+/Pl1MCpkHdeRjEfEAcCAgcRHzFHXneRqcHV5vP7//3369zJspqBaFA5JhYKAwEEDBkpPlRthp+3zd/u+f7/+vHj0byljHJZQi0cDgUBAggTIjVLY3yVrsTY6fX8//316dnFr5Z9ZEw2IxMJAgEFDhstQVhxi6S70OLw+v/++e/gzrigh25VPyoZDQQBAwoVJThPZ4CZscjb6/b9//zz59bBq5J5YEgyIBEHAgEGEB4wRV11j6i/0+Xy+//+9+3dyrScg2pROycXCwMBBAsYKDxTa4Sdtcve7fj+//vy5NO+po50W0QvHQ8GAQIIEiEzSWF6k6zC1+f0/P/99urax7CYf2ZNNyQVCQMBBQ0aK0BXb4miuc/h7/n+/vnw4c+6oolwV0AsGw0FAQMJFCQ3TWV+l7DG2ur2/f/89OjXw6yUe2FKNCESCAIBBg8dLkNbc42mvdLk8fr//vju38y2noVsUz0pGAwEAQMKFiY6UWmCm7TK3ez3' +
            '/v/78+XUwKiQdl1GMR4QBgICBxEfMkdfeJGqwdXm8/v//ffr3MiymoFoTzkmFgoDAQQMGSo+VW2HoLfN4O75/v/68ePRvKSLcllCLRwOBQECCBMiNUtjfJWuxNjp9fz//fXp2cWuln1jSzYjEwgCAQUOGy1BWXGLpLvQ4vD6//757+DOuKCHblU+KhkMBAEDChUlOE9ngJmyyNvr9v3//PPn1sGqknhfSDIgEQcCAgYQHjBFXXaPqL/U5fL7//737N3KtJyDalE7JxcLAwEECxgoPFNrhZ62y97t+P7/+/Lk0r6mjXRbRC8dDwYBAggSITNJYXqTrMPX5/T8//326trHsJh/ZU03JBQJAwEFDRorQFdviaK5z+Hv+f7++fDhz7qiiXBXQCwaDQUBAwkUJDdNZX6XsMba6vb9//z06NfDrJR6YUk0IRIIAgEGDx0uQ1t0jaa90uTx+v/++O3ezLaehWxTPCgYDAQBAwsWJzpRaYKctMrd7Pf+//vy5dS/qI92XUYwHhAGAgIHER8yR194karB1ebz/P/99+vcyLKagWdPOSUVCgMBBAwZKj5VbYeguM3g7vn+//rx49G8pItyWUItHA4FAQIIEyI1S2N8la7F2On1/P/89enZxa6WfGNLNSITCAIBBQ4bLUJZcouku9Hi8Pr//vnu4M24oIduVT4qGQwEAQMKFSU5T2eAmrLI2+v3/f/88+bVwaqReF9HMiARBwICBhAeMEVddo+ov9Tl8vv//vfs3cq0nINpUTsnFwsDAQQLGCg8U2uFnrbM3u34/v/78eTSvaaNdFtELx0PBgECCBIhNElhepOsw9fo9Pz//fbq2sawmH5lTTckFAkDAQUNGitAV3CJorrP4e/5/v757+HPuqKJcFdAKxoNBQEDCRQkN01lfpiwxtrq9v3//PTo18Osk3phSTQhEggCAQYPHS9EW3SNpr3S5PH7//747d7Mtp6Fa1M8KBgLBAEDCxcnO1Fpg5y0yt3s9/7/+/Ll1L+oj3ZdRTAeEAYCAgcRIDJHX3iRqsHV5vP8//3369vIspqAZ085JRUKAwEEDBkqPlVuh6C4zeDu+f7/+vDi0buki3JZQi0bDgUBAggTIjVLY3yWrsXZ6fX8//z16djFrpV8Y0s1IhMIAgEFDhwtQllyi6S80ePx+v/++e7gzbigh21VPioZDAQBAwoWJTlPZ4Gassjc6/f9//zz5tXBqpF4X0cyHxEHAgIGEB4wRl12j6i/1OXy+//+9+zdyrScgmlROicWCwMBBAwYKDxTbIWetsze7fj+//rx5NK9po10W0MuHQ8GAQIIEiE0SWF6lKzD1+j0/P/99uraxrCXfmVNNyQUCQMBBQ0aLEBXcImius/h8Pn+/vnv4c+5oolvV0ArGg0FAQMJFCQ3TWV/mLDH2ur2/f/89OfXw6yTemFJMyESCAIBBg8dL0RbdI2mvtLk8vv//vjt3su2noRrUzwoGAsEAQMLFyc7UWqDnLTK3ez3/v/78uXUv6iPdl1FMB4QBgICBxEgMkhfeJKqwdbn8/z//fbr28iymYBnTzglFQoDAQQMGSo+VW6HoLjO4O/5/v/68OLQu6SLcVlBLRsOBQECCBMjNktjfZauxdnp9f3//PXp2MSulXxjSzUiEwgCAQUOHC1CWXKLpLzR4/H6//757uDNt6CGbVU+KhkMBAEDChYmOU9ogZqyyNzr9/3/+/Pm1cGqkXhfRzIfEQcCAgYQHjFGXXaQqMDU5fP7//737N3KtJuCaVE6JhYKAwEEDBgpPVNshZ62zN/u+P7/+vHk0r2mjXNbQy4dDwYBAggSITRKYnuUrMPX6PT8//326trGsJd+ZU03IxQJAwEFDRssQFdwiaK6z+Hw+f7++e/hz7miiW9WPysaDQUBAwkVJDdOZn+YsMfa6vb9//z059fCrJN6YUkzIRIHAgEGDx0vRFt0jqe+0+Ty+//++O3ey7WdhGtSPCgXCwQBAwsXJztRaoOctMrd7ff+//vy5dO/qI91XEUwHhAGAQIHESAySGB5kqvB1ufz/P/99uvbyLGZgGdPOCUVCgMBBA0ZKj9VboeguM7g7/n+//rw4tC7o4txWEEtGw4FAQIJEyM2TGR9lq/F2en1/f/89ejYxK2VfGNLNSITCAIBBQ4cLUJacoylvNHj8fr//vju3823n4ZtVD4pGQwEAQMKFiY5UGiBmrPJ3Ov3/f/78+bVwKmRd15HMR8RBwICBxAfMUZed5CpwNTl8/v//ffs3Mmzm4JpUDomFgoDAQQMGCk9VGyFn7bM3+74/v/68ePSvaWNc1pDLhwPBgECCBIhNEpie5Stw9fo9Pz//fbq2savl35lTDYjFAkCAQUNGyxAWHCKo7rP4vD6/v757+HOuaGIb1Y/KxoNBQEDCRUkOE5mf5ixx9rq9v3//PTn1sKrk3lgSTMgEgcCAQYPHS9EXHWOp77T5PL7//747d7LtZ2Ea1I8KBcLBAEDCxcnO1Jqg521yt3t+P7/+/Ll07+nj3VcRTAeEAYBAgcRIDJIYHmSq8LW5/T8//3269vIsZmAZ044JRUKAwEEDRkqP1ZuiKG4zuDv+f7++vDi0LujinFYQSwbDgUBAgkUIzZMZH2Wr8XZ6fX9//z16NjErZV7Yko1IhMIAgEFDhwuQlpzjKW80ePx+v/++O7fzbefhm1UPSkZDAQBAwoWJjlQaIGbs8nc7Pf9//vz5tXAqZF3XkcxHxEHAgIHEB8xRl53kKnA1Obz+//99+zcybObgmlQOiYWCgMBBAwYKT1UbIaft8zf7vj+//rx49K9pYxzWkMuHA8GAQIIEyI0SmJ7lK3E2Oj0/P/99enZxq+XfmRMNiMUCQIBBQ4bLEFYcYqjutDi8Pr+/vnv4c65oYhvVj8rGg0EAQMJFSQ4TmZ/mbHH2+v2/f/89OfWwquTeWBIMyASBwIBBg8dL0RcdY6nvtPk8vv//vjt3su1nYRrUjsoFwsEAQQLFyc7UmqEnbXL3u34/v/78uXTvqeOdVxFLx4QBgECBxIgM0hgeZKrwtbn9Pz//fbr28exmYBmTjglFQkDAQQNGis/Vm+IobnO4O/5/v768OLQu6OKcVhBLBsOBQECCRQjNkxkfZevxdnp9f3//PXo2MStlXtiSjQiEwgCAQUPHC5DWnOMpbzR4/H6//747t/Mt5+GbVQ9KRgMBAEDChYmOlBogpuzydzs9/3/+/Pm1cCpkHdeRjEfEQcCAgcRHzFGXneQqcDV5vP7//337NzJs5uCaFA6JhYKAwEEDBgpPVRthp+3zN/u+P7/+vHj0byljHNaQy4cDwUBAggTIjRKYnuVrcTY6PX8//316dnFr5d9ZEw2IxQJAgEFDhssQVhxiqO70OLw+v7++e/gzrmhiG9WPysaDQQBAwkVJThOZoCZscfb6/b9//z059bCq5J5YEgzIBIHAgEGEB4vRVx1jqe+0+Xy+//++O3ey7WdhGpSOycXCwQBBAsXKDtSa4Sdtcve7fj+//vy5NO+p451XEQvHQ8GAQIHEiAzSGB5k6vC1uf0/P/9';
        audio.play();
    } 

    function createDialog (title, message, buttons, addInput, defaultText, callback) {
        var dlgWrap = document.createElement('div');
        dlgWrap.style.position = 'absolute';
        dlgWrap.style.width = '100%';
        dlgWrap.style.height = '100%';
        dlgWrap.style.backgroundColor = 'rgba(0,0,0,0.25)';
        dlgWrap.style.zIndex = '100000';
        dlgWrap.style.top = '0';
        dlgWrap.style.left = '0';
        dlgWrap.style.margin = '0';
        dlgWrap.style.padding = '0';

        var dlg = document.createElement('div');
        dlg.style.height = 'auto';
        dlg.style.overflow = 'auto';
        dlg.style.backgroundColor = 'white';
        dlg.style.position = 'relative';
        dlg.style.lineHeight = '2';

        dlg.style.top = '50%'; // center vertically
        dlg.style.transform = 'translateY(-50%)';
        dlg.style.margin = '0px 30%';
        dlg.style.padding = '10px';
        dlg.style.boxShadow = '2px 2px 5px 1px rgba(0, 0, 0, 0.2)';
        dlg.style.borderRadius = '2px';

        var titleStyle = 'border-top-left-radius: 2px; border-top-right-radius: 2px; position: relative; background-color: #03a9f4; color: #fff; font-size: 16px; padding: 7px 10px; height: 24px; text-transform: none; font-family: \'Helvetica Neue\', \'Roboto\', \'Segoe UI\', \'sans-serif\'; line-height: 24px;';
        // needed to remove white line at the top of the title container
        if (addInput) {
            titleStyle += 'margin: -11px -10px -10px;';
        } else {
            titleStyle += 'margin: -10px;';
        }

        // dialog layout template
        var dlgHtml = '<section id="lbl-title" style="' + titleStyle + '"></section>' +
        '<section id="lbl-message" style="color: #3c8b9e; text-transform: none; font-size: 14px; margin: 20px 0 0 0; font-family: \'Helvetica Neue\', \'Roboto\', \'Segoe UI\', \'sans-serif\';"></section>';

        if (addInput) {
            dlgHtml += '<input id="prompt-input" style="width: 97.5%; border: 1px solid #d3d3d3; font-weight: normal; color: #555; padding: 1%;"/>';
        }
        dlg.innerHTML = dlgHtml;

        dlg.querySelector('#lbl-title').appendChild(document.createTextNode(title));
        dlg.querySelector('#lbl-message').appendChild(document.createTextNode(message));
        if (addInput) {
            dlg.querySelector('#prompt-input').setAttribute('placeholder', defaultText);
        }

        function makeButtonCallback(idx) {
            return function () {
                var value;
                if (addInput) {
                    value = dlg.querySelector('#prompt-input').value;
                }
                
                dlgWrap.parentNode.removeChild(dlgWrap);

                if (callback) {
                    if (addInput) {
                        callback(false, { input1: value, buttonIndex: idx });
                    } else {
                        callback(false, idx);
                    }
                }
            };
        }

        function addButton(idx, label) {
            var button = document.createElement('button');
            button.style.float = 'right';
            button.style.minWidth = '112px';
            button.style.display = 'inline-block';
            button.style.textAlign = 'center';
            button.style.zoom = '1';
            button.style.fontFamily = '\'Helvetica Neue\', \'Roboto\', \'Segoe UI\', \'sans-serif\'';
            button.style.overflow = 'visible';
            button.style.border = '1px solid #d3d3d3';
            button.style.background = '#e6e6e6';
            button.style.fontWeight = 'normal';
            button.style.color = '#555';
            button.style.margin = '10px 0 10px 10px';
            button.style.cursor = 'pointer';
            button.style.fontSize = '14px';
            button.style.minHeight = '30px';
            button.tabIndex = idx;
            button.onclick = makeButtonCallback(idx + 1);
            button.appendChild(document.createTextNode(label));
            dlg.appendChild(button);
        }

        // reverse order is used since we align buttons to the right
        for (var idx = buttons.length - 1; idx >= 0; idx--) {
            addButton(idx, buttons[idx]);
        }

        dlgWrap.appendChild(dlg);
        document.body.appendChild(dlgWrap);

        // make sure input field is under focus
        if (addInput) {
            setTimeout(function() {
                dlg.querySelector('#prompt-input').focus();
            });
        }

        return dlgWrap;
    }
};

},{}],"cordova-plugin-file-handlers":[function(require,module,exports){
// Copyright (c) Microsoft Corporation. All rights reserved.

module.exports = function (messages) {
    var isWebkit = window.webkitRequestFileSystem && window.webkitResolveLocalFileSystemURL;

    return isWebkit ? require('./app-host-webkit-handlers') : require('./app-host-non-webkit-handlers');
};

},{"./app-host-non-webkit-handlers":36,"./app-host-webkit-handlers":37}],"cordova-plugin-geolocation-clobbers":[function(require,module,exports){
// Copyright (c) Microsoft Corporation. All rights reserved.
// Based on Apache Cordova geolocation plugin's navigator.geolocation implementation.
// See https://github.com/apache/cordova-plugin-geolocation/blob/master/www/geolocation.js

var utils = require('utils'),
    PositionError = require('./PositionError'),
    Position = require('./Position');

var timers = {};   // list of timers in use

// Returns default params, overrides if provided with values
function parseParameters(options) {
    var opt = {
        maximumAge: 0,
        enableHighAccuracy: false,
        timeout: Infinity
    };

    if (options) {
        if (options.maximumAge !== undefined && !isNaN(options.maximumAge) && options.maximumAge > 0) {
            opt.maximumAge = options.maximumAge;
        }
        if (options.enableHighAccuracy !== undefined) {
            opt.enableHighAccuracy = options.enableHighAccuracy;
        }
        if (options.timeout !== undefined && !isNaN(options.timeout)) {
            if (options.timeout < 0) {
                opt.timeout = 0;
            } else {
                opt.timeout = options.timeout;
            }
        }
    }

    return opt;
}

// Returns a timeout failure, closed over a specified timeout value and error callback.
function createTimeout(errorCallback, timeout) {
    var t = setTimeout(function () {
        clearTimeout(t);
        t = null;
        errorCallback({
            code: PositionError.TIMEOUT,
            message: 'Position retrieval timed out.'
        });
    }, timeout);
    return t;
}

module.exports = function (messages, exec) {
    var geolocation = {
        lastPosition: null, // reference to last known (cached) position returned

        /**
         * Asynchronously acquires the current position.
         *
         * @param {Function} successCallback    The function to call when the position data is available
         * @param {Function} errorCallback      The function to call when there is an error getting the heading position. (OPTIONAL)
         * @param {PositionOptions} options     The options for getting the position data. (OPTIONAL)
         */
        getCurrentPosition: function (successCallback, errorCallback, options) {
            options = parseParameters(options);

            // Timer var that will fire an error callback if no position is retrieved from native
            // before the "timeout" param provided expires
            var timeoutTimer = {timer: null};

            var win = function (p) {
                clearTimeout(timeoutTimer.timer);
                if (!(timeoutTimer.timer)) {
                    // Timeout already happened, or native fired error callback for
                    // this geo request.
                    // Don't continue with success callback.
                    return;
                }
                var pos = new Position(
                    {
                        latitude: p.latitude,
                        longitude: p.longitude,
                        altitude: p.altitude,
                        accuracy: p.accuracy,
                        heading: p.heading,
                        velocity: p.velocity,
                        altitudeAccuracy: p.altitudeAccuracy
                    },
                    (p.timestamp === undefined ? new Date() : ((p.timestamp instanceof Date) ? p.timestamp : new Date(p.timestamp)))
                );
                geolocation.lastPosition = pos;
                successCallback(pos);
            };
            var fail = function (e) {
                clearTimeout(timeoutTimer.timer);
                timeoutTimer.timer = null;
                var err = new PositionError(e.code, e.message);
                if (errorCallback) {
                    errorCallback(err);
                }
            };

            // Check our cached position, if its timestamp difference with current time is less than the maximumAge, then just
            // fire the success callback with the cached position.
            if (geolocation.lastPosition && options.maximumAge && (((new Date()).getTime() - geolocation.lastPosition.timestamp.getTime()) <= options.maximumAge)) {
                successCallback(geolocation.lastPosition);
                // If the cached position check failed and the timeout was set to 0, error out with a TIMEOUT error object.
            } else if (options.timeout === 0) {
                fail({
                    code: PositionError.TIMEOUT,
                    message: 'timeout value in PositionOptions set to 0 and no cached Position object available, or cached Position object\'s age exceeds provided PositionOptions.maximumAge parameter.'
                });
                // Otherwise we have to call into native to retrieve a position.
            } else {
                if (options.timeout !== Infinity) {
                    // If the timeout value was not set to Infinity (default), then
                    // set up a timeout function that will fire the error callback
                    // if no successful position was retrieved before timeout expired.
                    timeoutTimer.timer = createTimeout(fail, options.timeout);
                } else {
                    // This is here so the check in the win function doesn't mess stuff up
                    // may seem weird but this guarantees timeoutTimer is
                    // always truthy before we call into native
                    timeoutTimer.timer = true;
                }
                exec(win, fail, 'Geolocation', 'getLocation', [options.enableHighAccuracy, options.maximumAge]);
            }
            return timeoutTimer;
        },
        /**
         * Asynchronously watches the geolocation for changes to geolocation.  When a change occurs,
         * the successCallback is called with the new location.
         *
         * @param {Function} successCallback    The function to call each time the location data is available
         * @param {Function} errorCallback      The function to call when there is an error getting the location data. (OPTIONAL)
         * @param {PositionOptions} options     The options for getting the location data such as frequency. (OPTIONAL)
         * @return String                       The watch id that must be passed to #clearWatch to stop watching.
         */
        watchPosition: function (successCallback, errorCallback, options) {
            options = parseParameters(options);

            var id = utils.createUUID();

            // Tell device to get a position ASAP, and also retrieve a reference to the timeout timer generated in getCurrentPosition
            timers[id] = geolocation.getCurrentPosition(successCallback, errorCallback, options);

            var fail = function (e) {
                clearTimeout(timers[id].timer);
                var err = new PositionError(e.code, e.message);
                if (errorCallback) {
                    errorCallback(err);
                }
            };

            var win = function (p) {
                clearTimeout(timers[id].timer);
                if (options.timeout !== Infinity) {
                    timers[id].timer = createTimeout(fail, options.timeout);
                }
                var pos = new Position(
                    {
                        latitude: p.latitude,
                        longitude: p.longitude,
                        altitude: p.altitude,
                        accuracy: p.accuracy,
                        heading: p.heading,
                        velocity: p.velocity,
                        altitudeAccuracy: p.altitudeAccuracy
                    },
                    (p.timestamp === undefined ? new Date() : ((p.timestamp instanceof Date) ? p.timestamp : new Date(p.timestamp)))
                );
                geolocation.lastPosition = pos;
                successCallback(pos);
            };

            exec(win, fail, 'Geolocation', 'addWatch', [id, options.enableHighAccuracy]);

            return id;
        },
        /**
         * Clears the specified heading watch.
         *
         * @param {String} id       The ID of the watch returned from #watchPosition
         */
        clearWatch: function (id) {
            if (id && timers[id] !== undefined) {
                clearTimeout(timers[id].timer);
                timers[id].timer = false;
                exec(null, null, 'Geolocation', 'clearWatch', [id]);
            }
        },

        getPermission: function (success, fail, args) {
            success();
        }
    };

    return {
        navigator: {
            geolocation: geolocation
        }
    };
};

},{"./Position":40,"./PositionError":41,"utils":"utils"}],"cordova-plugin-globalization-clobbers":[function(require,module,exports){
// Copyright (c) Microsoft Corporation. All rights reserved.
 
// https://github.com/apache/cordova-plugin-globalization/

// this object fixes plugin loading on windows platform
module.exports = {
    GlobalizationProxy: {
        GlobalizationProxy: {
            setLocale: function () {}
        }
    }
};

},{}],"cordova-plugin-inappbrowser-handlers":[function(require,module,exports){
// Copyright (c) Microsoft Corporation. All rights reserved.

module.exports = function (messages) {
    var Browser = require('./inapp-browser'),
        instance;

    messages.call('inAppBrowserSelected')
        .then(function (value) {
            Browser.setDefaultInAppBrowser(value);
        });

    messages.on('inappbrowser-selected', function (event, value) {
        Browser.setDefaultInAppBrowser(value);
    });

    function execute(fnName) {
        if (!instance) {
            return;
        }

        var fn = instance[fnName],
            args;

        if (Object.keys(arguments).length > 1) {
            // remove the first element since it is the "fnName" parameter
            Array.prototype.shift.apply(arguments);
            args = arguments;
        }

        return fn.apply(instance, args);
    }

    return {
        'InAppBrowser': {
            'open': function (success, fail, args) {
                instance = Browser.create(success, fail, args);
            },
            'show': function () {
                execute('show');
            },
            'close': function () {
                execute('close');
                instance = null;
            },
            'injectScriptCode': function (success, fail, args) {
                execute('injectScriptCode', success, args);
            },
            'injectScriptFile': function (success, fail, args) {
                execute('injectScriptFile', success, args);
            },
            'injectStyleCode': function (success, fail, args) {
                execute('injectStyleCode', success, args);
            },
            'injectStyleFile': function (success, fail, args) {
                execute('injectStyleFile', success, args);
            }
        }
    };
};

},{"./inapp-browser":42}],"cordova-plugin-media-handlers":[function(require,module,exports){
// Copyright (c) Microsoft Corporation. All rights reserved.

// https://github.com/apache/cordova-plugin-media/

module.exports = function (messages) {

    var Player = require('./player');

    return {
        'Media': {
            'messageChannel': function (success, fail, args) {
                // ignore, this is only available for "android", "amazon-fireos" and "windowsphone"
                // platforms, any other access to onStatus callback is done through
                // window.Media.onStatus
            },
            'create': function (success, fail, args) {
                // args[0]: id, args[1]: src
                Player.createIfNeeded(args[0], args[1]);
            },
            'startPlayingAudio': function (success, fail, args) {
                var player = Player.createIfNeeded(args[0], args[1]);
                player.startPlaying(args[1]);
            },
            'stopPlayingAudio': function (success, fail, args) {
                var player = Player.getById(args[0]);
                if (player) {
                    player.stopPlaying();
                }
            },
            'seekToAudio': function (success, fail, args) {
                var player = Player.getById(args[0]);
                if (player) {
                    player.seekToAudio(args[1]);
                }
            },
            'pausePlayingAudio': function (success, fail, args) {
                var player = Player.getById(args[0]);
                if (player) {
                    player.pausePlaying();
                }
            },
            'getCurrentPositionAudio': function (success, fail, args) {
                var player = Player.getById(args[0]);

                if (player) {
                    player.getCurrentPosition(success, fail);
                } else {
                    success(-1);
                }
            },
            'startRecordingAudio': function (success, fail, args) {
                var player = Player.createIfNeeded(args[0]);
                player.startRecord(args[1]);
            },
            'stopRecordingAudio': function (success, fail, args) {
                var player = Player.getById(args[0]);
                if (player) {
                    player.stopRecord(true);
                }
            },
            'pauseRecordingAudio': function (success, fail, args) {
                var player = Player.getById(args[0]);
                if (player) {
                    player.stopRecord(false);
                }
            },
            'resumeRecordingAudio': function (success, fail, args) {
                var player = Player.getById(args[0]);
                if (player) {
                    player.resumeRecord();
                }
            },
            'release': function (success, fail, args) {
                var id = args[0],
                    player = Player.getById(id),
                    exists = !!player;

                if (exists) {
                    player.destroy();
                    Player.removeById(id);
                }
            },
            'setVolume': function (success, fail, args) {
                var player = Player.getById(args[0]);
                if (player) {
                    player.setVolume(args[1]);
                }
            },
            'setRate': function (success, fail, args) {
                var player = Player.getById(args[0]);
                if (player) {
                    player.setRate(args[1]);
                }
            },
            'getCurrentAmplitudeAudio': function (success, fail, args) {
                var player = Player.getById(args[0]),
                    amplitude = 0;

                if (player) {
                    amplitude = player.getCurrentAmplitude(args[1]);
                }

                success(amplitude);
            }
        }
    };
};

},{"./player":43}],"cordova-plugin-vibration":[function(require,module,exports){
// Copyright (c) Microsoft Corporation. All rights reserved.

var jQuery = require('jquery.min.js');

module.exports = function (messages) {
    // indicates whether vibration was cancelled
    var vibrationCanceled = false;

    // represents index of the vibration pattern array 
    var currentVibrationWithPatternIndex;

    // indicates whether we will need to stop vibration effect or not
    var currentVibrationNum = 0;

    messages.register('vibrate', function (event, callback) {
        if (!window.navigator && !window.navigator.vibrate) {
            callback('navigator.vibrate is not defined');
        }

        var ms = parseInt(event, 10);
        var seconds = ms / 1000;
        currentVibrationNum++;
        vibrate(ms)
            .catch(err => {
                if (err) throw err;
            });
        console.log('vibrating for ' + seconds + ' second(s)');
        callback();
    });

    messages.register('vibrateWithPattern', function (event, callback) {
        if (!window.navigator && !window.navigator.vibrate) {
            callback('navigator.vibrate is not defined');
            return;
        }

        var pattern = event[0];
        currentVibrationWithPatternIndex = 0;
        console.log('vibrating with pattern ' + pattern);
        currentVibrationNum++;
        vibrateWithPattern(pattern, currentVibrationNum)
            .catch(err => {
                if (err) throw err;
            });
        console.log(currentVibrationNum);
        callback();
    });

    messages.register('cancelVibration', function (event, callback) {
        if (!window.navigator && !window.navigator.vibrate) {
            callback('navigator.vibrate is not defined');
            return;
        }

        // cancelVibration is not supported on ios
        if (window.cordova && window.cordova.platformId === 'ios') {
            callback('Not supported on iOS');
            throw new Error('Not supported on iOS');
        }

        // to stop every other vibration
        currentVibrationNum++;

        // pass 0 to cancel vibration
        vibrate(0)
            .catch(err => {
                if (err) throw err;
            });
        vibrationCanceled = true;
        console.log('canceling vibration');
        callback();
    });

    function vibrate (milliseconds, placeholderNum) {
        return new Promise((resolve, reject) => {
            // indicating whether we will need to stop vibration effect or not
            let knownVibrationCallsCount = placeholderNum;

            const body = jQuery('body');
            let x, times;

            // if this call is cancelVibration - immediately stop vibration and return
            if (milliseconds === 0) {
                body.css({position: '', left: '', top: ''});
                return resolve();
            }

            // in the case we calling vibrateWithPattern after cancelling vibration
            vibrationCanceled = false;

            times = Math.floor(milliseconds / 100);

            body.css({position: 'fixed'});

            for (x = 1; x <= times; x++) {
                body.animate({ left: -10 }, 5, function () { checkForVibration(reject, body); })
                    .animate({ left: 0 }, 1)
                    .animate({ left: 10 }, 5)
                    .animate({ left: 0 }, 1)
                    .animate({ top: -10 }, 5)
                    .animate({ top: 0 }, 1)
                    .animate({ top: 10 }, 5)
                    .animate({ top: 0 }, 1);

                // stop vibrating in the end of vibration time if there is no more vibrations
                if (x >= times) {
                    body.animate(
                        {top: 0},
                        1,
                        function () {
                            // if there are another vibrations that started right after vibration call,
                            // we don't need to stop vibration effect by setting position to nothing
                            if (knownVibrationCallsCount === currentVibrationNum) {
                                vibrate(0);
                            }
                            resolve();
                        });
                }
            }
        });
    }

    // if vibration is cancelled, we need to set body position to nothing in the case to stop vibration effect
    function checkForVibration (reject, element) {
        if (vibrationCanceled) {
            vibrationCanceled = false;
            element.css({position: '', left: '', top: ''});
            reject();
        }
    }

    function vibrateWithPattern (pattern, placeholderNum) {
        // checking if another vibrate with pattern call invoked
        if (currentVibrationNum != placeholderNum) {
            console.log('cancelling vibration with pattern');
            return Promise.resolve();
        }

        var milliseconds = pattern[currentVibrationWithPatternIndex];
        if (milliseconds) {
            if (currentVibrationWithPatternIndex % 2 === 0) {
                console.log('vibrating...' + milliseconds);
                currentVibrationWithPatternIndex++;
                return vibrate(milliseconds, placeholderNum)
                    .then(function () { 
                        return vibrateWithPattern(pattern, placeholderNum);
                    });
            } else {
                console.log('delaying...' + milliseconds);
                currentVibrationWithPatternIndex++;
                return new Promise(resolve => setTimeout(() => {
                    return resolve(vibrateWithPattern(pattern, placeholderNum));
                }, milliseconds));
            }
        }
    }
};

},{"jquery.min.js":"jquery.min"}],"db":[function(require,module,exports){
// Copyright (c) Microsoft Corporation. All rights reserved.
// Based in part on code from Apache Ripple, https://github.com/apache/incubator-ripple

var utils = require('utils'),
    constants = require('sim-constants'),
    event = require('event'),
    DB_NAME = 'ripple',
    cache,
    self,
    opendb;

// TODO: This could use some refactoring..

function saveToStorage() {
    localStorage[DB_NAME] = JSON.stringify(cache);
}

function validateAndSetPrefix(prefix) {
    if (prefix) {
        utils.validateArgumentType(prefix, 'string');
    }

    return prefix || constants.COMMON.PREFIX;
}

function createKey(key, prefix) {
    return validateAndSetPrefix(prefix) + key;
}

function createItem(key, value, prefix) {
    return {
        id: createKey(key, prefix),
        key: key,
        value: value,
        prefix: validateAndSetPrefix(prefix)
    };
}

function save(key, value, prefix, callback) {
    var item = createItem(key, value, prefix);
    cache[item.id] = item;

    if (!window.openDatabase) {
        saveToStorage();
        if (callback) { callback(); }
    } else {
        opendb.transaction(function (tx) {
            tx.executeSql('REPLACE INTO persistence (id, key, value, prefix) VALUES (?, ?, ?, ?)', [item.id, item.key, item.value, item.prefix], function () {
                return callback && callback();
            });
        });
    }
}

function retrieve(key, prefix) {
    var item = cache[createKey(key, prefix)];
    return item ? item.value : undefined;
}

function retrieveAll(prefix, callback) {
    var result = {};

    if (prefix) {
        utils.forEach(cache, function (value) {
            if (value.prefix === prefix) {
                result[value.key] = value.value;
            }
        });
    }

    if (callback) { callback(result); }
}

function remove(key, prefix, callback) {
    var id = createKey(key, prefix);

    delete cache[id];

    if (!window.openDatabase) {
        saveToStorage();
        if (callback) { callback(); }
    } else {
        opendb.transaction(function (tx) {
            tx.executeSql('DELETE FROM persistence WHERE key = ? AND prefix = ?', [key, validateAndSetPrefix(prefix)], function () {
                return callback && callback();
            });
        });
    }
}

function removeAll(callback) {
    cache = {};

    if (!window.openDatabase) {
        delete localStorage[DB_NAME];
        saveToStorage();
    } else {
        opendb.transaction(function (tx) {
            tx.executeSql('DELETE FROM persistence', [], function () {
                return callback && callback();
            });
        });
    }
}

self = {
    save: function (key, value, prefix, callback) {
        save(key, value, prefix, callback);
        event.trigger('StorageUpdatedEvent');
    },

    saveObject: function (key, obj, prefix, callback) {
        save(key, JSON.stringify(obj), prefix, callback);
        event.trigger('StorageUpdatedEvent');
    },

    retrieve: function (key, prefix) {
        return retrieve(key, prefix);
    },

    retrieveObject: function (key, prefix) {
        var retrievedValue = retrieve(key, prefix);
        return retrievedValue ? JSON.parse(retrievedValue) : retrievedValue;
    },

    retrieveAll: function (prefix, callback) {
        return retrieveAll(prefix, callback);
    },

    remove: function (key, prefix, callback) {
        event.trigger('StorageUpdatedEvent');
        remove(key, prefix, callback);
    },

    removeAll: function (callback) {
        removeAll(callback);
        event.trigger('StorageUpdatedEvent');
    },

    initialize: function () {
        return new Promise((resolve) => {
            if (!window.openDatabase) {
                var store = localStorage[DB_NAME];
                cache = store ? JSON.parse(store) : {};
                saveToStorage();
                resolve();
            } else {
                cache = {};
                opendb = openDatabase('tinyHippos', '1.0', 'tiny Hippos persistence', 2 * 1024 * 1024);
                opendb.transaction(function (tx) {
                    tx.executeSql('CREATE TABLE IF NOT EXISTS persistence (id unique, key, value, prefix)');
    
                    tx.executeSql('SELECT id, key, value, prefix FROM persistence', [], function (tx, results) {
                        var len = results.rows.length, i, item;
    
                        for (i = 0; i < len; i++) {
                            item = results.rows.item(i);
                            cache[item.id] = item;
                        }
    
                        resolve();
                    });
                });
            }
        });
    }
};

module.exports = self;

},{"event":"event","sim-constants":"sim-constants","utils":"utils"}],"events":[function(require,module,exports){
// Copyright (c) Microsoft Corporation. All rights reserved.

module.exports = function(messages) {
    messages.register('event', function (event, callback) {
        if (!window.cordova) {
            callback(null, 'You must have cordova.js included in your projects, to be able to trigger events');
        } else {
            try {
                window.cordova.fireDocumentEvent(event);
                callback(null, event);
            } catch (e) {
                callback(e);
            }
        }
    });
};

},{}],"event":[function(require,module,exports){
// Copyright (c) Microsoft Corporation. All rights reserved.
// Based in part on code from Apache Ripple, https://github.com/apache/incubator-ripple

var utils = require('utils'),
    exception = require('exception'),
    _listeners = {};

function _on(eventType, listener, scope, once) {
    if (!eventType) {
        throw 'eventType must be truthy';
    }
    _listeners[eventType] = _listeners[eventType] || [];
    _listeners[eventType].push({
        func: listener,
        scope: scope,
        once: !!once
    });
}

function _trigger(listener, args, sync) {
    try {
        if (sync) {
            listener.func.apply(listener.scope, args);
        }
        else {
            setTimeout(function () {
                listener.func.apply(listener.scope, args);
            }, 1);
        }
    }
    catch (e) {
        exception.handle(e);
    }
}

module.exports = {
    on: function (eventType, listener, scope) {
        _on(eventType, listener, scope, false);
    },

    once: function (eventType, listener, scope) {
        _on(eventType, listener, scope, true);
    },

    trigger: function (eventType, args, sync) {
        args = args || [];
        sync = sync || false;

        var listeners = _listeners[eventType];

        if (listeners) {
            listeners.forEach(function (listener) {
                _trigger(listener, args, sync);
            });

            _listeners[eventType] = listeners.filter(function (listener) {
                return !listener.once;
            });
        }
    },

    eventHasSubscriber: function (eventType) {
        return !!_listeners[eventType];
    },

    getEventSubscribers: function (eventType) {
        return utils.copy(_listeners[eventType]) || [];
    },

    clear: function (eventType) {
        if (eventType) {
            delete _listeners[eventType];
        }
    }
};

},{"exception":"exception","utils":"utils"}],"exception":[function(require,module,exports){
// Copyright (c) Microsoft Corporation. All rights reserved.
// Based in part on code from Apache Ripple, https://github.com/apache/incubator-ripple

function _getStack(depth) {
    var caller,
        stack = '',
        count = 0;

    try {
        /*jshint noarg:false*/ // THIS SHOULD NOT be a common occurrence..
        caller = arguments.callee.caller.arguments.callee.caller;

        while (count <= depth && caller) {
            stack += 'function: ' + caller.toString().match(/function\s?(.*)\{/)[1] + '\n';
            caller = caller.arguments.callee.caller;
            count++;
        }
    } catch (e) {
        stack = 'failed to determine stack trace (' + (e.name || e.type) + ' :: ' + e.message + ')';
    }

    return stack;
}

module.exports = {

    types: {
        Application: 'Application',
        ArgumentLength: 'ArgumentLength',
        ArgumentType: 'ArgumentType',
        Argument: 'Argument',
        NotificationType: 'NotificationType',
        NotificationStateType: 'NotificationStateType',
        DomObjectNotFound: 'DomObjectNotFound',
        LayoutType: 'LayoutType',
        DeviceNotFound: 'DeviceNotFound',
        tinyHipposMaskedException: 'tinyHipposMaskedException',
        Geo: 'Geo',
        Accelerometer: 'Accelerometer',
        MethodNotImplemented: 'MethodNotImplemented',
        InvalidState: 'InvalidState',
        ApplicationState: 'ApplicationState'
    },

    handle: function handle(exception, reThrow) {
        reThrow = reThrow || false;

        var eMsg = exception.message || 'exception caught!',
            msg = eMsg + '\n\n' + (exception.stack || '*no stack provided*') + '\n\n';

        console.error(msg);

        if (reThrow) {
            throw exception;
        }
    },

    raise: function raise(exceptionType, message, customExceptionObject) {
        var obj = customExceptionObject || {
            type: '',
            message: '',

            toString: function () {
                var result = this.name + ': \'' + this.message + '\'';

                if (this.stack) {
                    result += '\n' + this.stack;
                }
                return result;
            }
        };

        message = message || '';

        obj.name = exceptionType;
        obj.type = exceptionType;
        // TODO: include the exception objects original message if exists
        obj.message = message;
        obj.stack = _getStack(5);

        throw obj;
    }
};

},{}],"jquery.min":[function(require,module,exports){
/*! jQuery v2.1.4 | (c) 2005, 2015 jQuery Foundation, Inc. | jquery.org/license */
!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){var c=[],d=c.slice,e=c.concat,f=c.push,g=c.indexOf,h={},i=h.toString,j=h.hasOwnProperty,k={},l=a.document,m="2.1.4",n=function(a,b){return new n.fn.init(a,b)},o=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,p=/^-ms-/,q=/-([\da-z])/gi,r=function(a,b){return b.toUpperCase()};n.fn=n.prototype={jquery:m,constructor:n,selector:"",length:0,toArray:function(){return d.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:d.call(this)},pushStack:function(a){var b=n.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return n.each(this,a,b)},map:function(a){return this.pushStack(n.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:c.sort,splice:c.splice},n.extend=n.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||n.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(n.isPlainObject(d)||(e=n.isArray(d)))?(e?(e=!1,f=c&&n.isArray(c)?c:[]):f=c&&n.isPlainObject(c)?c:{},g[b]=n.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},n.extend({expando:"jQuery"+(m+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===n.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){return!n.isArray(a)&&a-parseFloat(a)+1>=0},isPlainObject:function(a){return"object"!==n.type(a)||a.nodeType||n.isWindow(a)?!1:a.constructor&&!j.call(a.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?h[i.call(a)]||"object":typeof a},globalEval:function(a){var b,c=eval;a=n.trim(a),a&&(1===a.indexOf("use strict")?(b=l.createElement("script"),b.text=a,l.head.appendChild(b).parentNode.removeChild(b)):c(a))},camelCase:function(a){return a.replace(p,"ms-").replace(q,r)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,c){var d,e=0,f=a.length,g=s(a);if(c){if(g){for(;f>e;e++)if(d=b.apply(a[e],c),d===!1)break}else for(e in a)if(d=b.apply(a[e],c),d===!1)break}else if(g){for(;f>e;e++)if(d=b.call(a[e],e,a[e]),d===!1)break}else for(e in a)if(d=b.call(a[e],e,a[e]),d===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(o,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(s(Object(a))?n.merge(c,"string"==typeof a?[a]:a):f.call(c,a)),c},inArray:function(a,b,c){return null==b?-1:g.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,f=0,g=a.length,h=s(a),i=[];if(h)for(;g>f;f++)d=b(a[f],f,c),null!=d&&i.push(d);else for(f in a)d=b(a[f],f,c),null!=d&&i.push(d);return e.apply([],i)},guid:1,proxy:function(a,b){var c,e,f;return"string"==typeof b&&(c=a[b],b=a,a=c),n.isFunction(a)?(e=d.call(arguments,2),f=function(){return a.apply(b||this,e.concat(d.call(arguments)))},f.guid=a.guid=a.guid||n.guid++,f):void 0},now:Date.now,support:k}),n.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){h["[object "+b+"]"]=b.toLowerCase()});function s(a){var b="length"in a&&a.length,c=n.type(a);return"function"===c||n.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}var t=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+1*new Date,v=a.document,w=0,x=0,y=ha(),z=ha(),A=ha(),B=function(a,b){return a===b&&(l=!0),0},C=1<<31,D={}.hasOwnProperty,E=[],F=E.pop,G=E.push,H=E.push,I=E.slice,J=function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},K="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",M="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",N=M.replace("w","w#"),O="\\["+L+"*("+M+")(?:"+L+"*([*^$|!~]?=)"+L+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+N+"))|)"+L+"*\\]",P=":("+M+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+O+")*)|.*)\\)|)",Q=new RegExp(L+"+","g"),R=new RegExp("^"+L+"+|((?:^|[^\\\\])(?:\\\\.)*)"+L+"+$","g"),S=new RegExp("^"+L+"*,"+L+"*"),T=new RegExp("^"+L+"*([>+~]|"+L+")"+L+"*"),U=new RegExp("="+L+"*([^\\]'\"]*?)"+L+"*\\]","g"),V=new RegExp(P),W=new RegExp("^"+N+"$"),X={ID:new RegExp("^#("+M+")"),CLASS:new RegExp("^\\.("+M+")"),TAG:new RegExp("^("+M.replace("w","w*")+")"),ATTR:new RegExp("^"+O),PSEUDO:new RegExp("^"+P),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+L+"*(even|odd|(([+-]|)(\\d*)n|)"+L+"*(?:([+-]|)"+L+"*(\\d+)|))"+L+"*\\)|)","i"),bool:new RegExp("^(?:"+K+")$","i"),needsContext:new RegExp("^"+L+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+L+"*((?:-\\d)?\\d*)"+L+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,$=/^[^{]+\{\s*\[native \w/,_=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,aa=/[+~]/,ba=/'|\\/g,ca=new RegExp("\\\\([\\da-f]{1,6}"+L+"?|("+L+")|.)","ig"),da=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},ea=function(){m()};try{H.apply(E=I.call(v.childNodes),v.childNodes),E[v.childNodes.length].nodeType}catch(fa){H={apply:E.length?function(a,b){G.apply(a,I.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}function ga(a,b,d,e){var f,h,j,k,l,o,r,s,w,x;if((b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,d=d||[],k=b.nodeType,"string"!=typeof a||!a||1!==k&&9!==k&&11!==k)return d;if(!e&&p){if(11!==k&&(f=_.exec(a)))if(j=f[1]){if(9===k){if(h=b.getElementById(j),!h||!h.parentNode)return d;if(h.id===j)return d.push(h),d}else if(b.ownerDocument&&(h=b.ownerDocument.getElementById(j))&&t(b,h)&&h.id===j)return d.push(h),d}else{if(f[2])return H.apply(d,b.getElementsByTagName(a)),d;if((j=f[3])&&c.getElementsByClassName)return H.apply(d,b.getElementsByClassName(j)),d}if(c.qsa&&(!q||!q.test(a))){if(s=r=u,w=b,x=1!==k&&a,1===k&&"object"!==b.nodeName.toLowerCase()){o=g(a),(r=b.getAttribute("id"))?s=r.replace(ba,"\\$&"):b.setAttribute("id",s),s="[id='"+s+"'] ",l=o.length;while(l--)o[l]=s+ra(o[l]);w=aa.test(a)&&pa(b.parentNode)||b,x=o.join(",")}if(x)try{return H.apply(d,w.querySelectorAll(x)),d}catch(y){}finally{r||b.removeAttribute("id")}}}return i(a.replace(R,"$1"),b,d,e)}function ha(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function ia(a){return a[u]=!0,a}function ja(a){var b=n.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function ka(a,b){var c=a.split("|"),e=a.length;while(e--)d.attrHandle[c[e]]=b}function la(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||C)-(~a.sourceIndex||C);if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function ma(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function na(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function oa(a){return ia(function(b){return b=+b,ia(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function pa(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}c=ga.support={},f=ga.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},m=ga.setDocument=function(a){var b,e,g=a?a.ownerDocument||a:v;return g!==n&&9===g.nodeType&&g.documentElement?(n=g,o=g.documentElement,e=g.defaultView,e&&e!==e.top&&(e.addEventListener?e.addEventListener("unload",ea,!1):e.attachEvent&&e.attachEvent("onunload",ea)),p=!f(g),c.attributes=ja(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=ja(function(a){return a.appendChild(g.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=$.test(g.getElementsByClassName),c.getById=ja(function(a){return o.appendChild(a).id=u,!g.getElementsByName||!g.getElementsByName(u).length}),c.getById?(d.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&p){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},d.filter.ID=function(a){var b=a.replace(ca,da);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(ca,da);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):c.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++])1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){return p?b.getElementsByClassName(a):void 0},r=[],q=[],(c.qsa=$.test(g.querySelectorAll))&&(ja(function(a){o.appendChild(a).innerHTML="<a id='"+u+"'></a><select id='"+u+"-\f]' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&q.push("[*^$]="+L+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||q.push("\\["+L+"*(?:value|"+K+")"),a.querySelectorAll("[id~="+u+"-]").length||q.push("~="),a.querySelectorAll(":checked").length||q.push(":checked"),a.querySelectorAll("a#"+u+"+*").length||q.push(".#.+[+~]")}),ja(function(a){var b=g.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+L+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")})),(c.matchesSelector=$.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ja(function(a){c.disconnectedMatch=s.call(a,"div"),s.call(a,"[s!='']:x"),r.push("!=",P)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=$.test(o.compareDocumentPosition),t=b||$.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},B=b?function(a,b){if(a===b)return l=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===g||a.ownerDocument===v&&t(v,a)?-1:b===g||b.ownerDocument===v&&t(v,b)?1:k?J(k,a)-J(k,b):0:4&d?-1:1)}:function(a,b){if(a===b)return l=!0,0;var c,d=0,e=a.parentNode,f=b.parentNode,h=[a],i=[b];if(!e||!f)return a===g?-1:b===g?1:e?-1:f?1:k?J(k,a)-J(k,b):0;if(e===f)return la(a,b);c=a;while(c=c.parentNode)h.unshift(c);c=b;while(c=c.parentNode)i.unshift(c);while(h[d]===i[d])d++;return d?la(h[d],i[d]):h[d]===v?-1:i[d]===v?1:0},g):n},ga.matches=function(a,b){return ga(a,null,null,b)},ga.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(U,"='$1']"),!(!c.matchesSelector||!p||r&&r.test(b)||q&&q.test(b)))try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return ga(b,n,null,[a]).length>0},ga.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},ga.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&D.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},ga.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},ga.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return k=null,a},e=ga.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else while(b=a[d++])c+=e(b);return c},d=ga.selectors={cacheLength:50,createPseudo:ia,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ca,da),a[3]=(a[3]||a[4]||a[5]||"").replace(ca,da),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||ga.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&ga.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return X.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&V.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(ca,da).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+L+")"+a+"("+L+"|$)"))&&y(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=ga.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e.replace(Q," ")+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){while(p){l=b;while(l=l[p])if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){k=q[u]||(q[u]={}),j=k[a]||[],n=j[0]===w&&j[1],m=j[0]===w&&j[2],l=n&&q.childNodes[n];while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if(1===l.nodeType&&++m&&l===b){k[a]=[w,n,m];break}}else if(s&&(j=(b[u]||(b[u]={}))[a])&&j[0]===w)m=j[1];else while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if((h?l.nodeName.toLowerCase()===r:1===l.nodeType)&&++m&&(s&&((l[u]||(l[u]={}))[a]=[w,m]),l===b))break;return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||ga.error("unsupported pseudo: "+a);return e[u]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?ia(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=J(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:ia(function(a){var b=[],c=[],d=h(a.replace(R,"$1"));return d[u]?ia(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),b[0]=null,!c.pop()}}),has:ia(function(a){return function(b){return ga(a,b).length>0}}),contains:ia(function(a){return a=a.replace(ca,da),function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:ia(function(a){return W.test(a||"")||ga.error("unsupported lang: "+a),a=a.replace(ca,da).toLowerCase(),function(b){var c;do if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return Z.test(a.nodeName)},input:function(a){return Y.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:oa(function(){return[0]}),last:oa(function(a,b){return[b-1]}),eq:oa(function(a,b,c){return[0>c?c+b:c]}),even:oa(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:oa(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:oa(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:oa(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=ma(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=na(b);function qa(){}qa.prototype=d.filters=d.pseudos,d.setFilters=new qa,g=ga.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){(!c||(e=S.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=T.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(R," ")}),h=h.slice(c.length));for(g in d.filter)!(e=X[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?ga.error(a):z(a,i).slice(0)};function ra(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function sa(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=x++;return b.first?function(b,c,f){while(b=b[d])if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[w,f];if(g){while(b=b[d])if((1===b.nodeType||e)&&a(b,c,g))return!0}else while(b=b[d])if(1===b.nodeType||e){if(i=b[u]||(b[u]={}),(h=i[d])&&h[0]===w&&h[1]===f)return j[2]=h[2];if(i[d]=j,j[2]=a(b,c,g))return!0}}}function ta(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function ua(a,b,c){for(var d=0,e=b.length;e>d;d++)ga(a,b[d],c);return c}function va(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function wa(a,b,c,d,e,f){return d&&!d[u]&&(d=wa(d)),e&&!e[u]&&(e=wa(e,f)),ia(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||ua(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:va(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=va(r,n),d(j,[],h,i),k=j.length;while(k--)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?J(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=va(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):H.apply(g,r)})}function xa(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=sa(function(a){return a===b},h,!0),l=sa(function(a){return J(b,a)>-1},h,!0),m=[function(a,c,d){var e=!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d));return b=null,e}];f>i;i++)if(c=d.relative[a[i].type])m=[sa(ta(m),c)];else{if(c=d.filter[a[i].type].apply(null,a[i].matches),c[u]){for(e=++i;f>e;e++)if(d.relative[a[e].type])break;return wa(i>1&&ta(m),i>1&&ra(a.slice(0,i-1).concat({value:" "===a[i-2].type?"*":""})).replace(R,"$1"),c,e>i&&xa(a.slice(i,e)),f>e&&xa(a=a.slice(e)),f>e&&ra(a))}m.push(c)}return ta(m)}function ya(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,m,o,p=0,q="0",r=f&&[],s=[],t=j,u=f||e&&d.find.TAG("*",k),v=w+=null==t?1:Math.random()||.1,x=u.length;for(k&&(j=g!==n&&g);q!==x&&null!=(l=u[q]);q++){if(e&&l){m=0;while(o=a[m++])if(o(l,g,h)){i.push(l);break}k&&(w=v)}c&&((l=!o&&l)&&p--,f&&r.push(l))}if(p+=q,c&&q!==p){m=0;while(o=b[m++])o(r,s,g,h);if(f){if(p>0)while(q--)r[q]||s[q]||(s[q]=F.call(i));s=va(s)}H.apply(i,s),k&&!f&&s.length>0&&p+b.length>1&&ga.uniqueSort(i)}return k&&(w=v,j=t),r};return c?ia(f):f}return h=ga.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){b||(b=g(a)),c=b.length;while(c--)f=xa(b[c]),f[u]?d.push(f):e.push(f);f=A(a,ya(e,d)),f.selector=a}return f},i=ga.select=function(a,b,e,f){var i,j,k,l,m,n="function"==typeof a&&a,o=!f&&g(a=n.selector||a);if(e=e||[],1===o.length){if(j=o[0]=o[0].slice(0),j.length>2&&"ID"===(k=j[0]).type&&c.getById&&9===b.nodeType&&p&&d.relative[j[1].type]){if(b=(d.find.ID(k.matches[0].replace(ca,da),b)||[])[0],!b)return e;n&&(b=b.parentNode),a=a.slice(j.shift().value.length)}i=X.needsContext.test(a)?0:j.length;while(i--){if(k=j[i],d.relative[l=k.type])break;if((m=d.find[l])&&(f=m(k.matches[0].replace(ca,da),aa.test(j[0].type)&&pa(b.parentNode)||b))){if(j.splice(i,1),a=f.length&&ra(j),!a)return H.apply(e,f),e;break}}}return(n||h(a,o))(f,b,!p,e,aa.test(a)&&pa(b.parentNode)||b),e},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=ja(function(a){return 1&a.compareDocumentPosition(n.createElement("div"))}),ja(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||ka("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&ja(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||ka("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),ja(function(a){return null==a.getAttribute("disabled")})||ka(K,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),ga}(a);n.find=t,n.expr=t.selectors,n.expr[":"]=n.expr.pseudos,n.unique=t.uniqueSort,n.text=t.getText,n.isXMLDoc=t.isXML,n.contains=t.contains;var u=n.expr.match.needsContext,v=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,w=/^.[^:#\[\.,]*$/;function x(a,b,c){if(n.isFunction(b))return n.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return n.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(w.test(b))return n.filter(b,a,c);b=n.filter(b,a)}return n.grep(a,function(a){return g.call(b,a)>=0!==c})}n.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?n.find.matchesSelector(d,a)?[d]:[]:n.find.matches(a,n.grep(b,function(a){return 1===a.nodeType}))},n.fn.extend({find:function(a){var b,c=this.length,d=[],e=this;if("string"!=typeof a)return this.pushStack(n(a).filter(function(){for(b=0;c>b;b++)if(n.contains(e[b],this))return!0}));for(b=0;c>b;b++)n.find(a,e[b],d);return d=this.pushStack(c>1?n.unique(d):d),d.selector=this.selector?this.selector+" "+a:a,d},filter:function(a){return this.pushStack(x(this,a||[],!1))},not:function(a){return this.pushStack(x(this,a||[],!0))},is:function(a){return!!x(this,"string"==typeof a&&u.test(a)?n(a):a||[],!1).length}});var y,z=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,A=n.fn.init=function(a,b){var c,d;if(!a)return this;if("string"==typeof a){if(c="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:z.exec(a),!c||!c[1]&&b)return!b||b.jquery?(b||y).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof n?b[0]:b,n.merge(this,n.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:l,!0)),v.test(c[1])&&n.isPlainObject(b))for(c in b)n.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c]);return this}return d=l.getElementById(c[2]),d&&d.parentNode&&(this.length=1,this[0]=d),this.context=l,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):n.isFunction(a)?"undefined"!=typeof y.ready?y.ready(a):a(n):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),n.makeArray(a,this))};A.prototype=n.fn,y=n(l);var B=/^(?:parents|prev(?:Until|All))/,C={children:!0,contents:!0,next:!0,prev:!0};n.extend({dir:function(a,b,c){var d=[],e=void 0!==c;while((a=a[b])&&9!==a.nodeType)if(1===a.nodeType){if(e&&n(a).is(c))break;d.push(a)}return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}}),n.fn.extend({has:function(a){var b=n(a,this),c=b.length;return this.filter(function(){for(var a=0;c>a;a++)if(n.contains(this,b[a]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=u.test(a)||"string"!=typeof a?n(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&n.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?n.unique(f):f)},index:function(a){return a?"string"==typeof a?g.call(n(a),this[0]):g.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(n.unique(n.merge(this.get(),n(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function D(a,b){while((a=a[b])&&1!==a.nodeType);return a}n.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return n.dir(a,"parentNode")},parentsUntil:function(a,b,c){return n.dir(a,"parentNode",c)},next:function(a){return D(a,"nextSibling")},prev:function(a){return D(a,"previousSibling")},nextAll:function(a){return n.dir(a,"nextSibling")},prevAll:function(a){return n.dir(a,"previousSibling")},nextUntil:function(a,b,c){return n.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return n.dir(a,"previousSibling",c)},siblings:function(a){return n.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return n.sibling(a.firstChild)},contents:function(a){return a.contentDocument||n.merge([],a.childNodes)}},function(a,b){n.fn[a]=function(c,d){var e=n.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=n.filter(d,e)),this.length>1&&(C[a]||n.unique(e),B.test(a)&&e.reverse()),this.pushStack(e)}});var E=/\S+/g,F={};function G(a){var b=F[a]={};return n.each(a.match(E)||[],function(a,c){b[c]=!0}),b}n.Callbacks=function(a){a="string"==typeof a?F[a]||G(a):n.extend({},a);var b,c,d,e,f,g,h=[],i=!a.once&&[],j=function(l){for(b=a.memory&&l,c=!0,g=e||0,e=0,f=h.length,d=!0;h&&f>g;g++)if(h[g].apply(l[0],l[1])===!1&&a.stopOnFalse){b=!1;break}d=!1,h&&(i?i.length&&j(i.shift()):b?h=[]:k.disable())},k={add:function(){if(h){var c=h.length;!function g(b){n.each(b,function(b,c){var d=n.type(c);"function"===d?a.unique&&k.has(c)||h.push(c):c&&c.length&&"string"!==d&&g(c)})}(arguments),d?f=h.length:b&&(e=c,j(b))}return this},remove:function(){return h&&n.each(arguments,function(a,b){var c;while((c=n.inArray(b,h,c))>-1)h.splice(c,1),d&&(f>=c&&f--,g>=c&&g--)}),this},has:function(a){return a?n.inArray(a,h)>-1:!(!h||!h.length)},empty:function(){return h=[],f=0,this},disable:function(){return h=i=b=void 0,this},disabled:function(){return!h},lock:function(){return i=void 0,b||k.disable(),this},locked:function(){return!i},fireWith:function(a,b){return!h||c&&!i||(b=b||[],b=[a,b.slice?b.slice():b],d?i.push(b):j(b)),this},fire:function(){return k.fireWith(this,arguments),this},fired:function(){return!!c}};return k},n.extend({Deferred:function(a){var b=[["resolve","done",n.Callbacks("once memory"),"resolved"],["reject","fail",n.Callbacks("once memory"),"rejected"],["notify","progress",n.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return n.Deferred(function(c){n.each(b,function(b,f){var g=n.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&n.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?n.extend(a,d):d}},e={};return d.pipe=d.then,n.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=d.call(arguments),e=c.length,f=1!==e||a&&n.isFunction(a.promise)?e:0,g=1===f?a:n.Deferred(),h=function(a,b,c){return function(e){b[a]=this,c[a]=arguments.length>1?d.call(arguments):e,c===i?g.notifyWith(b,c):--f||g.resolveWith(b,c)}},i,j,k;if(e>1)for(i=new Array(e),j=new Array(e),k=new Array(e);e>b;b++)c[b]&&n.isFunction(c[b].promise)?c[b].promise().done(h(b,k,c)).fail(g.reject).progress(h(b,j,i)):--f;return f||g.resolveWith(k,c),g.promise()}});var H;n.fn.ready=function(a){return n.ready.promise().done(a),this},n.extend({isReady:!1,readyWait:1,holdReady:function(a){a?n.readyWait++:n.ready(!0)},ready:function(a){(a===!0?--n.readyWait:n.isReady)||(n.isReady=!0,a!==!0&&--n.readyWait>0||(H.resolveWith(l,[n]),n.fn.triggerHandler&&(n(l).triggerHandler("ready"),n(l).off("ready"))))}});function I(){l.removeEventListener("DOMContentLoaded",I,!1),a.removeEventListener("load",I,!1),n.ready()}n.ready.promise=function(b){return H||(H=n.Deferred(),"complete"===l.readyState?setTimeout(n.ready):(l.addEventListener("DOMContentLoaded",I,!1),a.addEventListener("load",I,!1))),H.promise(b)},n.ready.promise();var J=n.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===n.type(c)){e=!0;for(h in c)n.access(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,n.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(n(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f};n.acceptData=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};function K(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=n.expando+K.uid++}K.uid=1,K.accepts=n.acceptData,K.prototype={key:function(a){if(!K.accepts(a))return 0;var b={},c=a[this.expando];if(!c){c=K.uid++;try{b[this.expando]={value:c},Object.defineProperties(a,b)}catch(d){b[this.expando]=c,n.extend(a,b)}}return this.cache[c]||(this.cache[c]={}),c},set:function(a,b,c){var d,e=this.key(a),f=this.cache[e];if("string"==typeof b)f[b]=c;else if(n.isEmptyObject(f))n.extend(this.cache[e],b);else for(d in b)f[d]=b[d];return f},get:function(a,b){var c=this.cache[this.key(a)];return void 0===b?c:c[b]},access:function(a,b,c){var d;return void 0===b||b&&"string"==typeof b&&void 0===c?(d=this.get(a,b),void 0!==d?d:this.get(a,n.camelCase(b))):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d,e,f=this.key(a),g=this.cache[f];if(void 0===b)this.cache[f]={};else{n.isArray(b)?d=b.concat(b.map(n.camelCase)):(e=n.camelCase(b),b in g?d=[b,e]:(d=e,d=d in g?[d]:d.match(E)||[])),c=d.length;while(c--)delete g[d[c]]}},hasData:function(a){return!n.isEmptyObject(this.cache[a[this.expando]]||{})},discard:function(a){a[this.expando]&&delete this.cache[a[this.expando]]}};var L=new K,M=new K,N=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,O=/([A-Z])/g;function P(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(O,"-$1").toLowerCase(),c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:N.test(c)?n.parseJSON(c):c}catch(e){}M.set(a,b,c)}else c=void 0;return c}n.extend({hasData:function(a){return M.hasData(a)||L.hasData(a)},data:function(a,b,c){
return M.access(a,b,c)},removeData:function(a,b){M.remove(a,b)},_data:function(a,b,c){return L.access(a,b,c)},_removeData:function(a,b){L.remove(a,b)}}),n.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=M.get(f),1===f.nodeType&&!L.get(f,"hasDataAttrs"))){c=g.length;while(c--)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=n.camelCase(d.slice(5)),P(f,d,e[d])));L.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){M.set(this,a)}):J(this,function(b){var c,d=n.camelCase(a);if(f&&void 0===b){if(c=M.get(f,a),void 0!==c)return c;if(c=M.get(f,d),void 0!==c)return c;if(c=P(f,d,void 0),void 0!==c)return c}else this.each(function(){var c=M.get(this,d);M.set(this,d,b),-1!==a.indexOf("-")&&void 0!==c&&M.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){M.remove(this,a)})}}),n.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=L.get(a,b),c&&(!d||n.isArray(c)?d=L.access(a,b,n.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=n.queue(a,b),d=c.length,e=c.shift(),f=n._queueHooks(a,b),g=function(){n.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return L.get(a,c)||L.access(a,c,{empty:n.Callbacks("once memory").add(function(){L.remove(a,[b+"queue",c])})})}}),n.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?n.queue(this[0],a):void 0===b?this:this.each(function(){var c=n.queue(this,a,b);n._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&n.dequeue(this,a)})},dequeue:function(a){return this.each(function(){n.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=n.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--)c=L.get(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var Q=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,R=["Top","Right","Bottom","Left"],S=function(a,b){return a=b||a,"none"===n.css(a,"display")||!n.contains(a.ownerDocument,a)},T=/^(?:checkbox|radio)$/i;!function(){var a=l.createDocumentFragment(),b=a.appendChild(l.createElement("div")),c=l.createElement("input");c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),b.appendChild(c),k.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",k.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var U="undefined";k.focusinBubbles="onfocusin"in a;var V=/^key/,W=/^(?:mouse|pointer|contextmenu)|click/,X=/^(?:focusinfocus|focusoutblur)$/,Y=/^([^.]*)(?:\.(.+)|)$/;function Z(){return!0}function $(){return!1}function _(){try{return l.activeElement}catch(a){}}n.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=L.get(a);if(r){c.handler&&(f=c,c=f.handler,e=f.selector),c.guid||(c.guid=n.guid++),(i=r.events)||(i=r.events={}),(g=r.handle)||(g=r.handle=function(b){return typeof n!==U&&n.event.triggered!==b.type?n.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(E)||[""],j=b.length;while(j--)h=Y.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o&&(l=n.event.special[o]||{},o=(e?l.delegateType:l.bindType)||o,l=n.event.special[o]||{},k=n.extend({type:o,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&n.expr.match.needsContext.test(e),namespace:p.join(".")},f),(m=i[o])||(m=i[o]=[],m.delegateCount=0,l.setup&&l.setup.call(a,d,p,g)!==!1||a.addEventListener&&a.addEventListener(o,g,!1)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),n.event.global[o]=!0)}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=L.hasData(a)&&L.get(a);if(r&&(i=r.events)){b=(b||"").match(E)||[""],j=b.length;while(j--)if(h=Y.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o){l=n.event.special[o]||{},o=(d?l.delegateType:l.bindType)||o,m=i[o]||[],h=h[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;while(f--)k=m[f],!e&&q!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&l.teardown.call(a,p,r.handle)!==!1||n.removeEvent(a,o,r.handle),delete i[o])}else for(o in i)n.event.remove(a,o+b[j],c,d,!0);n.isEmptyObject(i)&&(delete r.handle,L.remove(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,k,m,o,p=[d||l],q=j.call(b,"type")?b.type:b,r=j.call(b,"namespace")?b.namespace.split("."):[];if(g=h=d=d||l,3!==d.nodeType&&8!==d.nodeType&&!X.test(q+n.event.triggered)&&(q.indexOf(".")>=0&&(r=q.split("."),q=r.shift(),r.sort()),k=q.indexOf(":")<0&&"on"+q,b=b[n.expando]?b:new n.Event(q,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=r.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+r.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:n.makeArray(c,[b]),o=n.event.special[q]||{},e||!o.trigger||o.trigger.apply(d,c)!==!1)){if(!e&&!o.noBubble&&!n.isWindow(d)){for(i=o.delegateType||q,X.test(i+q)||(g=g.parentNode);g;g=g.parentNode)p.push(g),h=g;h===(d.ownerDocument||l)&&p.push(h.defaultView||h.parentWindow||a)}f=0;while((g=p[f++])&&!b.isPropagationStopped())b.type=f>1?i:o.bindType||q,m=(L.get(g,"events")||{})[b.type]&&L.get(g,"handle"),m&&m.apply(g,c),m=k&&g[k],m&&m.apply&&n.acceptData(g)&&(b.result=m.apply(g,c),b.result===!1&&b.preventDefault());return b.type=q,e||b.isDefaultPrevented()||o._default&&o._default.apply(p.pop(),c)!==!1||!n.acceptData(d)||k&&n.isFunction(d[q])&&!n.isWindow(d)&&(h=d[k],h&&(d[k]=null),n.event.triggered=q,d[q](),n.event.triggered=void 0,h&&(d[k]=h)),b.result}},dispatch:function(a){a=n.event.fix(a);var b,c,e,f,g,h=[],i=d.call(arguments),j=(L.get(this,"events")||{})[a.type]||[],k=n.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){h=n.event.handlers.call(this,a,j),b=0;while((f=h[b++])&&!a.isPropagationStopped()){a.currentTarget=f.elem,c=0;while((g=f.handlers[c++])&&!a.isImmediatePropagationStopped())(!a.namespace_re||a.namespace_re.test(g.namespace))&&(a.handleObj=g,a.data=g.data,e=((n.event.special[g.origType]||{}).handle||g.handler).apply(f.elem,i),void 0!==e&&(a.result=e)===!1&&(a.preventDefault(),a.stopPropagation()))}return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||"click"!==a.type))for(;i!==this;i=i.parentNode||this)if(i.disabled!==!0||"click"!==a.type){for(d=[],c=0;h>c;c++)f=b[c],e=f.selector+" ",void 0===d[e]&&(d[e]=f.needsContext?n(e,this).index(i)>=0:n.find(e,this,null,[i]).length),d[e]&&d.push(f);d.length&&g.push({elem:i,handlers:d})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button;return null==a.pageX&&null!=b.clientX&&(c=a.target.ownerDocument||l,d=c.documentElement,e=c.body,a.pageX=b.clientX+(d&&d.scrollLeft||e&&e.scrollLeft||0)-(d&&d.clientLeft||e&&e.clientLeft||0),a.pageY=b.clientY+(d&&d.scrollTop||e&&e.scrollTop||0)-(d&&d.clientTop||e&&e.clientTop||0)),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},fix:function(a){if(a[n.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];g||(this.fixHooks[e]=g=W.test(e)?this.mouseHooks:V.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new n.Event(f),b=d.length;while(b--)c=d[b],a[c]=f[c];return a.target||(a.target=l),3===a.target.nodeType&&(a.target=a.target.parentNode),g.filter?g.filter(a,f):a},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==_()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===_()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&n.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(a){return n.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=n.extend(new n.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?n.event.trigger(e,null,b):n.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},n.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)},n.Event=function(a,b){return this instanceof n.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?Z:$):this.type=a,b&&n.extend(this,b),this.timeStamp=a&&a.timeStamp||n.now(),void(this[n.expando]=!0)):new n.Event(a,b)},n.Event.prototype={isDefaultPrevented:$,isPropagationStopped:$,isImmediatePropagationStopped:$,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=Z,a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=Z,a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=Z,a&&a.stopImmediatePropagation&&a.stopImmediatePropagation(),this.stopPropagation()}},n.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){n.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!n.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),k.focusinBubbles||n.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){n.event.simulate(b,a.target,n.event.fix(a),!0)};n.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=L.access(d,b);e||d.addEventListener(a,c,!0),L.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=L.access(d,b)-1;e?L.access(d,b,e):(d.removeEventListener(a,c,!0),L.remove(d,b))}}}),n.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(g in a)this.on(g,b,c,a[g],e);return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),d===!1)d=$;else if(!d)return this;return 1===e&&(f=d,d=function(a){return n().off(a),f.apply(this,arguments)},d.guid=f.guid||(f.guid=n.guid++)),this.each(function(){n.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,n(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return(b===!1||"function"==typeof b)&&(c=b,b=void 0),c===!1&&(c=$),this.each(function(){n.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){n.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?n.event.trigger(a,b,c,!0):void 0}});var aa=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ba=/<([\w:]+)/,ca=/<|&#?\w+;/,da=/<(?:script|style|link)/i,ea=/checked\s*(?:[^=]|=\s*.checked.)/i,fa=/^$|\/(?:java|ecma)script/i,ga=/^true\/(.*)/,ha=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ia={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ia.optgroup=ia.option,ia.tbody=ia.tfoot=ia.colgroup=ia.caption=ia.thead,ia.th=ia.td;function ja(a,b){return n.nodeName(a,"table")&&n.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function ka(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function la(a){var b=ga.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function ma(a,b){for(var c=0,d=a.length;d>c;c++)L.set(a[c],"globalEval",!b||L.get(b[c],"globalEval"))}function na(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(L.hasData(a)&&(f=L.access(a),g=L.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;d>c;c++)n.event.add(b,e,j[e][c])}M.hasData(a)&&(h=M.access(a),i=n.extend({},h),M.set(b,i))}}function oa(a,b){var c=a.getElementsByTagName?a.getElementsByTagName(b||"*"):a.querySelectorAll?a.querySelectorAll(b||"*"):[];return void 0===b||b&&n.nodeName(a,b)?n.merge([a],c):c}function pa(a,b){var c=b.nodeName.toLowerCase();"input"===c&&T.test(a.type)?b.checked=a.checked:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}n.extend({clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=n.contains(a.ownerDocument,a);if(!(k.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||n.isXMLDoc(a)))for(g=oa(h),f=oa(a),d=0,e=f.length;e>d;d++)pa(f[d],g[d]);if(b)if(c)for(f=f||oa(a),g=g||oa(h),d=0,e=f.length;e>d;d++)na(f[d],g[d]);else na(a,h);return g=oa(h,"script"),g.length>0&&ma(g,!i&&oa(a,"script")),h},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,k=b.createDocumentFragment(),l=[],m=0,o=a.length;o>m;m++)if(e=a[m],e||0===e)if("object"===n.type(e))n.merge(l,e.nodeType?[e]:e);else if(ca.test(e)){f=f||k.appendChild(b.createElement("div")),g=(ba.exec(e)||["",""])[1].toLowerCase(),h=ia[g]||ia._default,f.innerHTML=h[1]+e.replace(aa,"<$1></$2>")+h[2],j=h[0];while(j--)f=f.lastChild;n.merge(l,f.childNodes),f=k.firstChild,f.textContent=""}else l.push(b.createTextNode(e));k.textContent="",m=0;while(e=l[m++])if((!d||-1===n.inArray(e,d))&&(i=n.contains(e.ownerDocument,e),f=oa(k.appendChild(e),"script"),i&&ma(f),c)){j=0;while(e=f[j++])fa.test(e.type||"")&&c.push(e)}return k},cleanData:function(a){for(var b,c,d,e,f=n.event.special,g=0;void 0!==(c=a[g]);g++){if(n.acceptData(c)&&(e=c[L.expando],e&&(b=L.cache[e]))){if(b.events)for(d in b.events)f[d]?n.event.remove(c,d):n.removeEvent(c,d,b.handle);L.cache[e]&&delete L.cache[e]}delete M.cache[c[M.expando]]}}}),n.fn.extend({text:function(a){return J(this,function(a){return void 0===a?n.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=a)})},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=ja(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=ja(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?n.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||n.cleanData(oa(c)),c.parentNode&&(b&&n.contains(c.ownerDocument,c)&&ma(oa(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(n.cleanData(oa(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return n.clone(this,a,b)})},html:function(a){return J(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!da.test(a)&&!ia[(ba.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(aa,"<$1></$2>");try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(n.cleanData(oa(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,n.cleanData(oa(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=e.apply([],a);var c,d,f,g,h,i,j=0,l=this.length,m=this,o=l-1,p=a[0],q=n.isFunction(p);if(q||l>1&&"string"==typeof p&&!k.checkClone&&ea.test(p))return this.each(function(c){var d=m.eq(c);q&&(a[0]=p.call(this,c,d.html())),d.domManip(a,b)});if(l&&(c=n.buildFragment(a,this[0].ownerDocument,!1,this),d=c.firstChild,1===c.childNodes.length&&(c=d),d)){for(f=n.map(oa(c,"script"),ka),g=f.length;l>j;j++)h=c,j!==o&&(h=n.clone(h,!0,!0),g&&n.merge(f,oa(h,"script"))),b.call(this[j],h,j);if(g)for(i=f[f.length-1].ownerDocument,n.map(f,la),j=0;g>j;j++)h=f[j],fa.test(h.type||"")&&!L.access(h,"globalEval")&&n.contains(i,h)&&(h.src?n._evalUrl&&n._evalUrl(h.src):n.globalEval(h.textContent.replace(ha,"")))}return this}}),n.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){n.fn[a]=function(a){for(var c,d=[],e=n(a),g=e.length-1,h=0;g>=h;h++)c=h===g?this:this.clone(!0),n(e[h])[b](c),f.apply(d,c.get());return this.pushStack(d)}});var qa,ra={};function sa(b,c){var d,e=n(c.createElement(b)).appendTo(c.body),f=a.getDefaultComputedStyle&&(d=a.getDefaultComputedStyle(e[0]))?d.display:n.css(e[0],"display");return e.detach(),f}function ta(a){var b=l,c=ra[a];return c||(c=sa(a,b),"none"!==c&&c||(qa=(qa||n("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=qa[0].contentDocument,b.write(),b.close(),c=sa(a,b),qa.detach()),ra[a]=c),c}var ua=/^margin/,va=new RegExp("^("+Q+")(?!px)[a-z%]+$","i"),wa=function(b){return b.ownerDocument.defaultView.opener?b.ownerDocument.defaultView.getComputedStyle(b,null):a.getComputedStyle(b,null)};function xa(a,b,c){var d,e,f,g,h=a.style;return c=c||wa(a),c&&(g=c.getPropertyValue(b)||c[b]),c&&(""!==g||n.contains(a.ownerDocument,a)||(g=n.style(a,b)),va.test(g)&&ua.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0!==g?g+"":g}function ya(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}!function(){var b,c,d=l.documentElement,e=l.createElement("div"),f=l.createElement("div");if(f.style){f.style.backgroundClip="content-box",f.cloneNode(!0).style.backgroundClip="",k.clearCloneStyle="content-box"===f.style.backgroundClip,e.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",e.appendChild(f);function g(){f.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",f.innerHTML="",d.appendChild(e);var g=a.getComputedStyle(f,null);b="1%"!==g.top,c="4px"===g.width,d.removeChild(e)}a.getComputedStyle&&n.extend(k,{pixelPosition:function(){return g(),b},boxSizingReliable:function(){return null==c&&g(),c},reliableMarginRight:function(){var b,c=f.appendChild(l.createElement("div"));return c.style.cssText=f.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",c.style.marginRight=c.style.width="0",f.style.width="1px",d.appendChild(e),b=!parseFloat(a.getComputedStyle(c,null).marginRight),d.removeChild(e),f.removeChild(c),b}})}}(),n.swap=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};var za=/^(none|table(?!-c[ea]).+)/,Aa=new RegExp("^("+Q+")(.*)$","i"),Ba=new RegExp("^([+-])=("+Q+")","i"),Ca={position:"absolute",visibility:"hidden",display:"block"},Da={letterSpacing:"0",fontWeight:"400"},Ea=["Webkit","O","Moz","ms"];function Fa(a,b){if(b in a)return b;var c=b[0].toUpperCase()+b.slice(1),d=b,e=Ea.length;while(e--)if(b=Ea[e]+c,b in a)return b;return d}function Ga(a,b,c){var d=Aa.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function Ha(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=n.css(a,c+R[f],!0,e)),d?("content"===c&&(g-=n.css(a,"padding"+R[f],!0,e)),"margin"!==c&&(g-=n.css(a,"border"+R[f]+"Width",!0,e))):(g+=n.css(a,"padding"+R[f],!0,e),"padding"!==c&&(g+=n.css(a,"border"+R[f]+"Width",!0,e)));return g}function Ia(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=wa(a),g="border-box"===n.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=xa(a,b,f),(0>e||null==e)&&(e=a.style[b]),va.test(e))return e;d=g&&(k.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+Ha(a,b,c||(g?"border":"content"),d,f)+"px"}function Ja(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=L.get(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&S(d)&&(f[g]=L.access(d,"olddisplay",ta(d.nodeName)))):(e=S(d),"none"===c&&e||L.set(d,"olddisplay",e?c:n.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}n.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=xa(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=n.camelCase(b),i=a.style;return b=n.cssProps[h]||(n.cssProps[h]=Fa(i,h)),g=n.cssHooks[b]||n.cssHooks[h],void 0===c?g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b]:(f=typeof c,"string"===f&&(e=Ba.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(n.css(a,b)),f="number"),null!=c&&c===c&&("number"!==f||n.cssNumber[h]||(c+="px"),k.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(i[b]=c)),void 0)}},css:function(a,b,c,d){var e,f,g,h=n.camelCase(b);return b=n.cssProps[h]||(n.cssProps[h]=Fa(a.style,h)),g=n.cssHooks[b]||n.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=xa(a,b,d)),"normal"===e&&b in Da&&(e=Da[b]),""===c||c?(f=parseFloat(e),c===!0||n.isNumeric(f)?f||0:e):e}}),n.each(["height","width"],function(a,b){n.cssHooks[b]={get:function(a,c,d){return c?za.test(n.css(a,"display"))&&0===a.offsetWidth?n.swap(a,Ca,function(){return Ia(a,b,d)}):Ia(a,b,d):void 0},set:function(a,c,d){var e=d&&wa(a);return Ga(a,c,d?Ha(a,b,d,"border-box"===n.css(a,"boxSizing",!1,e),e):0)}}}),n.cssHooks.marginRight=ya(k.reliableMarginRight,function(a,b){return b?n.swap(a,{display:"inline-block"},xa,[a,"marginRight"]):void 0}),n.each({margin:"",padding:"",border:"Width"},function(a,b){n.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+R[d]+b]=f[d]||f[d-2]||f[0];return e}},ua.test(a)||(n.cssHooks[a+b].set=Ga)}),n.fn.extend({css:function(a,b){return J(this,function(a,b,c){var d,e,f={},g=0;if(n.isArray(b)){for(d=wa(a),e=b.length;e>g;g++)f[b[g]]=n.css(a,b[g],!1,d);return f}return void 0!==c?n.style(a,b,c):n.css(a,b)},a,b,arguments.length>1)},show:function(){return Ja(this,!0)},hide:function(){return Ja(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){S(this)?n(this).show():n(this).hide()})}});function Ka(a,b,c,d,e){return new Ka.prototype.init(a,b,c,d,e)}n.Tween=Ka,Ka.prototype={constructor:Ka,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(n.cssNumber[c]?"":"px")},cur:function(){var a=Ka.propHooks[this.prop];return a&&a.get?a.get(this):Ka.propHooks._default.get(this)},run:function(a){var b,c=Ka.propHooks[this.prop];return this.options.duration?this.pos=b=n.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Ka.propHooks._default.set(this),this}},Ka.prototype.init.prototype=Ka.prototype,Ka.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=n.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){n.fx.step[a.prop]?n.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[n.cssProps[a.prop]]||n.cssHooks[a.prop])?n.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},Ka.propHooks.scrollTop=Ka.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},n.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},n.fx=Ka.prototype.init,n.fx.step={};var La,Ma,Na=/^(?:toggle|show|hide)$/,Oa=new RegExp("^(?:([+-])=|)("+Q+")([a-z%]*)$","i"),Pa=/queueHooks$/,Qa=[Va],Ra={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=Oa.exec(b),f=e&&e[3]||(n.cssNumber[a]?"":"px"),g=(n.cssNumber[a]||"px"!==f&&+d)&&Oa.exec(n.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,n.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};function Sa(){return setTimeout(function(){La=void 0}),La=n.now()}function Ta(a,b){var c,d=0,e={height:a};for(b=b?1:0;4>d;d+=2-b)c=R[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function Ua(a,b,c){for(var d,e=(Ra[b]||[]).concat(Ra["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function Va(a,b,c){var d,e,f,g,h,i,j,k,l=this,m={},o=a.style,p=a.nodeType&&S(a),q=L.get(a,"fxshow");c.queue||(h=n._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,l.always(function(){l.always(function(){h.unqueued--,n.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[o.overflow,o.overflowX,o.overflowY],j=n.css(a,"display"),k="none"===j?L.get(a,"olddisplay")||ta(a.nodeName):j,"inline"===k&&"none"===n.css(a,"float")&&(o.display="inline-block")),c.overflow&&(o.overflow="hidden",l.always(function(){o.overflow=c.overflow[0],o.overflowX=c.overflow[1],o.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],Na.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(p?"hide":"show")){if("show"!==e||!q||void 0===q[d])continue;p=!0}m[d]=q&&q[d]||n.style(a,d)}else j=void 0;if(n.isEmptyObject(m))"inline"===("none"===j?ta(a.nodeName):j)&&(o.display=j);else{q?"hidden"in q&&(p=q.hidden):q=L.access(a,"fxshow",{}),f&&(q.hidden=!p),p?n(a).show():l.done(function(){n(a).hide()}),l.done(function(){var b;L.remove(a,"fxshow");for(b in m)n.style(a,b,m[b])});for(d in m)g=Ua(p?q[d]:0,d,l),d in q||(q[d]=g.start,p&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function Wa(a,b){var c,d,e,f,g;for(c in a)if(d=n.camelCase(c),e=b[d],f=a[c],n.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=n.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function Xa(a,b,c){var d,e,f=0,g=Qa.length,h=n.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=La||Sa(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:n.extend({},b),opts:n.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:La||Sa(),duration:c.duration,tweens:[],createTween:function(b,c){var d=n.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(Wa(k,j.opts.specialEasing);g>f;f++)if(d=Qa[f].call(j,a,k,j.opts))return d;return n.map(k,Ua,j),n.isFunction(j.opts.start)&&j.opts.start.call(a,j),n.fx.timer(n.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}n.Animation=n.extend(Xa,{tweener:function(a,b){n.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],Ra[c]=Ra[c]||[],Ra[c].unshift(b)},prefilter:function(a,b){b?Qa.unshift(a):Qa.push(a)}}),n.speed=function(a,b,c){var d=a&&"object"==typeof a?n.extend({},a):{complete:c||!c&&b||n.isFunction(a)&&a,duration:a,easing:c&&b||b&&!n.isFunction(b)&&b};return d.duration=n.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in n.fx.speeds?n.fx.speeds[d.duration]:n.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){n.isFunction(d.old)&&d.old.call(this),d.queue&&n.dequeue(this,d.queue)},d},n.fn.extend({fadeTo:function(a,b,c,d){return this.filter(S).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=n.isEmptyObject(a),f=n.speed(b,c,d),g=function(){var b=Xa(this,n.extend({},a),f);(e||L.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=n.timers,g=L.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&Pa.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));(b||!c)&&n.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=L.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=n.timers,g=d?d.length:0;for(c.finish=!0,n.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),n.each(["toggle","show","hide"],function(a,b){var c=n.fn[b];n.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(Ta(b,!0),a,d,e)}}),n.each({slideDown:Ta("show"),slideUp:Ta("hide"),slideToggle:Ta("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){n.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),n.timers=[],n.fx.tick=function(){var a,b=0,c=n.timers;for(La=n.now();b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||n.fx.stop(),La=void 0},n.fx.timer=function(a){n.timers.push(a),a()?n.fx.start():n.timers.pop()},n.fx.interval=13,n.fx.start=function(){Ma||(Ma=setInterval(n.fx.tick,n.fx.interval))},n.fx.stop=function(){clearInterval(Ma),Ma=null},n.fx.speeds={slow:600,fast:200,_default:400},n.fn.delay=function(a,b){return a=n.fx?n.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a=l.createElement("input"),b=l.createElement("select"),c=b.appendChild(l.createElement("option"));a.type="checkbox",k.checkOn=""!==a.value,k.optSelected=c.selected,b.disabled=!0,k.optDisabled=!c.disabled,a=l.createElement("input"),a.value="t",a.type="radio",k.radioValue="t"===a.value}();var Ya,Za,$a=n.expr.attrHandle;n.fn.extend({attr:function(a,b){return J(this,n.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){n.removeAttr(this,a)})}}),n.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f)return typeof a.getAttribute===U?n.prop(a,b,c):(1===f&&n.isXMLDoc(a)||(b=b.toLowerCase(),d=n.attrHooks[b]||(n.expr.match.bool.test(b)?Za:Ya)),
void 0===c?d&&"get"in d&&null!==(e=d.get(a,b))?e:(e=n.find.attr(a,b),null==e?void 0:e):null!==c?d&&"set"in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):void n.removeAttr(a,b))},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(E);if(f&&1===a.nodeType)while(c=f[e++])d=n.propFix[c]||c,n.expr.match.bool.test(c)&&(a[d]=!1),a.removeAttribute(c)},attrHooks:{type:{set:function(a,b){if(!k.radioValue&&"radio"===b&&n.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),Za={set:function(a,b,c){return b===!1?n.removeAttr(a,c):a.setAttribute(c,c),c}},n.each(n.expr.match.bool.source.match(/\w+/g),function(a,b){var c=$a[b]||n.find.attr;$a[b]=function(a,b,d){var e,f;return d||(f=$a[b],$a[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,$a[b]=f),e}});var _a=/^(?:input|select|textarea|button)$/i;n.fn.extend({prop:function(a,b){return J(this,n.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[n.propFix[a]||a]})}}),n.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g)return f=1!==g||!n.isXMLDoc(a),f&&(b=n.propFix[b]||b,e=n.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){return a.hasAttribute("tabindex")||_a.test(a.nodeName)||a.href?a.tabIndex:-1}}}}),k.optSelected||(n.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null}}),n.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){n.propFix[this.toLowerCase()]=this});var ab=/[\t\r\n\f]/g;n.fn.extend({addClass:function(a){var b,c,d,e,f,g,h="string"==typeof a&&a,i=0,j=this.length;if(n.isFunction(a))return this.each(function(b){n(this).addClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(E)||[];j>i;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ab," "):" ")){f=0;while(e=b[f++])d.indexOf(" "+e+" ")<0&&(d+=e+" ");g=n.trim(d),c.className!==g&&(c.className=g)}return this},removeClass:function(a){var b,c,d,e,f,g,h=0===arguments.length||"string"==typeof a&&a,i=0,j=this.length;if(n.isFunction(a))return this.each(function(b){n(this).removeClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(E)||[];j>i;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ab," "):"")){f=0;while(e=b[f++])while(d.indexOf(" "+e+" ")>=0)d=d.replace(" "+e+" "," ");g=a?n.trim(d):"",c.className!==g&&(c.className=g)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):this.each(n.isFunction(a)?function(c){n(this).toggleClass(a.call(this,c,this.className,b),b)}:function(){if("string"===c){var b,d=0,e=n(this),f=a.match(E)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else(c===U||"boolean"===c)&&(this.className&&L.set(this,"__className__",this.className),this.className=this.className||a===!1?"":L.get(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(ab," ").indexOf(b)>=0)return!0;return!1}});var bb=/\r/g;n.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=n.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,n(this).val()):a,null==e?e="":"number"==typeof e?e+="":n.isArray(e)&&(e=n.map(e,function(a){return null==a?"":a+""})),b=n.valHooks[this.type]||n.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=n.valHooks[e.type]||n.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(bb,""):null==c?"":c)}}}),n.extend({valHooks:{option:{get:function(a){var b=n.find.attr(a,"value");return null!=b?b:n.trim(n.text(a))}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],!(!c.selected&&i!==e||(k.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&n.nodeName(c.parentNode,"optgroup"))){if(b=n(c).val(),f)return b;g.push(b)}return g},set:function(a,b){var c,d,e=a.options,f=n.makeArray(b),g=e.length;while(g--)d=e[g],(d.selected=n.inArray(d.value,f)>=0)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),n.each(["radio","checkbox"],function(){n.valHooks[this]={set:function(a,b){return n.isArray(b)?a.checked=n.inArray(n(a).val(),b)>=0:void 0}},k.checkOn||(n.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})}),n.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){n.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),n.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var cb=n.now(),db=/\?/;n.parseJSON=function(a){return JSON.parse(a+"")},n.parseXML=function(a){var b,c;if(!a||"string"!=typeof a)return null;try{c=new DOMParser,b=c.parseFromString(a,"text/xml")}catch(d){b=void 0}return(!b||b.getElementsByTagName("parsererror").length)&&n.error("Invalid XML: "+a),b};var eb=/#.*$/,fb=/([?&])_=[^&]*/,gb=/^(.*?):[ \t]*([^\r\n]*)$/gm,hb=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,ib=/^(?:GET|HEAD)$/,jb=/^\/\//,kb=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,lb={},mb={},nb="*/".concat("*"),ob=a.location.href,pb=kb.exec(ob.toLowerCase())||[];function qb(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(E)||[];if(n.isFunction(c))while(d=f[e++])"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function rb(a,b,c,d){var e={},f=a===mb;function g(h){var i;return e[h]=!0,n.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function sb(a,b){var c,d,e=n.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&n.extend(!0,a,d),a}function tb(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0])i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function ub(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}n.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ob,type:"GET",isLocal:hb.test(pb[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":nb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":n.parseJSON,"text xml":n.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?sb(sb(a,n.ajaxSettings),b):sb(n.ajaxSettings,a)},ajaxPrefilter:qb(lb),ajaxTransport:qb(mb),ajax:function(a,b){"object"==typeof a&&(b=a,a=void 0),b=b||{};var c,d,e,f,g,h,i,j,k=n.ajaxSetup({},b),l=k.context||k,m=k.context&&(l.nodeType||l.jquery)?n(l):n.event,o=n.Deferred(),p=n.Callbacks("once memory"),q=k.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!f){f={};while(b=gb.exec(e))f[b[1].toLowerCase()]=b[2]}b=f[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?e:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this},overrideMimeType:function(a){return t||(k.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>t)for(b in a)q[b]=[q[b],a[b]];else v.always(a[v.status]);return this},abort:function(a){var b=a||u;return c&&c.abort(b),x(0,b),this}};if(o.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,k.url=((a||k.url||ob)+"").replace(eb,"").replace(jb,pb[1]+"//"),k.type=b.method||b.type||k.method||k.type,k.dataTypes=n.trim(k.dataType||"*").toLowerCase().match(E)||[""],null==k.crossDomain&&(h=kb.exec(k.url.toLowerCase()),k.crossDomain=!(!h||h[1]===pb[1]&&h[2]===pb[2]&&(h[3]||("http:"===h[1]?"80":"443"))===(pb[3]||("http:"===pb[1]?"80":"443")))),k.data&&k.processData&&"string"!=typeof k.data&&(k.data=n.param(k.data,k.traditional)),rb(lb,k,b,v),2===t)return v;i=n.event&&k.global,i&&0===n.active++&&n.event.trigger("ajaxStart"),k.type=k.type.toUpperCase(),k.hasContent=!ib.test(k.type),d=k.url,k.hasContent||(k.data&&(d=k.url+=(db.test(d)?"&":"?")+k.data,delete k.data),k.cache===!1&&(k.url=fb.test(d)?d.replace(fb,"$1_="+cb++):d+(db.test(d)?"&":"?")+"_="+cb++)),k.ifModified&&(n.lastModified[d]&&v.setRequestHeader("If-Modified-Since",n.lastModified[d]),n.etag[d]&&v.setRequestHeader("If-None-Match",n.etag[d])),(k.data&&k.hasContent&&k.contentType!==!1||b.contentType)&&v.setRequestHeader("Content-Type",k.contentType),v.setRequestHeader("Accept",k.dataTypes[0]&&k.accepts[k.dataTypes[0]]?k.accepts[k.dataTypes[0]]+("*"!==k.dataTypes[0]?", "+nb+"; q=0.01":""):k.accepts["*"]);for(j in k.headers)v.setRequestHeader(j,k.headers[j]);if(k.beforeSend&&(k.beforeSend.call(l,v,k)===!1||2===t))return v.abort();u="abort";for(j in{success:1,error:1,complete:1})v[j](k[j]);if(c=rb(mb,k,b,v)){v.readyState=1,i&&m.trigger("ajaxSend",[v,k]),k.async&&k.timeout>0&&(g=setTimeout(function(){v.abort("timeout")},k.timeout));try{t=1,c.send(r,x)}catch(w){if(!(2>t))throw w;x(-1,w)}}else x(-1,"No Transport");function x(a,b,f,h){var j,r,s,u,w,x=b;2!==t&&(t=2,g&&clearTimeout(g),c=void 0,e=h||"",v.readyState=a>0?4:0,j=a>=200&&300>a||304===a,f&&(u=tb(k,v,f)),u=ub(k,u,v,j),j?(k.ifModified&&(w=v.getResponseHeader("Last-Modified"),w&&(n.lastModified[d]=w),w=v.getResponseHeader("etag"),w&&(n.etag[d]=w)),204===a||"HEAD"===k.type?x="nocontent":304===a?x="notmodified":(x=u.state,r=u.data,s=u.error,j=!s)):(s=x,(a||!x)&&(x="error",0>a&&(a=0))),v.status=a,v.statusText=(b||x)+"",j?o.resolveWith(l,[r,x,v]):o.rejectWith(l,[v,x,s]),v.statusCode(q),q=void 0,i&&m.trigger(j?"ajaxSuccess":"ajaxError",[v,k,j?r:s]),p.fireWith(l,[v,x]),i&&(m.trigger("ajaxComplete",[v,k]),--n.active||n.event.trigger("ajaxStop")))}return v},getJSON:function(a,b,c){return n.get(a,b,c,"json")},getScript:function(a,b){return n.get(a,void 0,b,"script")}}),n.each(["get","post"],function(a,b){n[b]=function(a,c,d,e){return n.isFunction(c)&&(e=e||d,d=c,c=void 0),n.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),n._evalUrl=function(a){return n.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},n.fn.extend({wrapAll:function(a){var b;return n.isFunction(a)?this.each(function(b){n(this).wrapAll(a.call(this,b))}):(this[0]&&(b=n(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstElementChild)a=a.firstElementChild;return a}).append(this)),this)},wrapInner:function(a){return this.each(n.isFunction(a)?function(b){n(this).wrapInner(a.call(this,b))}:function(){var b=n(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=n.isFunction(a);return this.each(function(c){n(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){n.nodeName(this,"body")||n(this).replaceWith(this.childNodes)}).end()}}),n.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0},n.expr.filters.visible=function(a){return!n.expr.filters.hidden(a)};var vb=/%20/g,wb=/\[\]$/,xb=/\r?\n/g,yb=/^(?:submit|button|image|reset|file)$/i,zb=/^(?:input|select|textarea|keygen)/i;function Ab(a,b,c,d){var e;if(n.isArray(b))n.each(b,function(b,e){c||wb.test(a)?d(a,e):Ab(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==n.type(b))d(a,b);else for(e in b)Ab(a+"["+e+"]",b[e],c,d)}n.param=function(a,b){var c,d=[],e=function(a,b){b=n.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=n.ajaxSettings&&n.ajaxSettings.traditional),n.isArray(a)||a.jquery&&!n.isPlainObject(a))n.each(a,function(){e(this.name,this.value)});else for(c in a)Ab(c,a[c],b,e);return d.join("&").replace(vb,"+")},n.fn.extend({serialize:function(){return n.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=n.prop(this,"elements");return a?n.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!n(this).is(":disabled")&&zb.test(this.nodeName)&&!yb.test(a)&&(this.checked||!T.test(a))}).map(function(a,b){var c=n(this).val();return null==c?null:n.isArray(c)?n.map(c,function(a){return{name:b.name,value:a.replace(xb,"\r\n")}}):{name:b.name,value:c.replace(xb,"\r\n")}}).get()}}),n.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(a){}};var Bb=0,Cb={},Db={0:200,1223:204},Eb=n.ajaxSettings.xhr();a.attachEvent&&a.attachEvent("onunload",function(){for(var a in Cb)Cb[a]()}),k.cors=!!Eb&&"withCredentials"in Eb,k.ajax=Eb=!!Eb,n.ajaxTransport(function(a){var b;return k.cors||Eb&&!a.crossDomain?{send:function(c,d){var e,f=a.xhr(),g=++Bb;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c)f.setRequestHeader(e,c[e]);b=function(a){return function(){b&&(delete Cb[g],b=f.onload=f.onerror=null,"abort"===a?f.abort():"error"===a?d(f.status,f.statusText):d(Db[f.status]||f.status,f.statusText,"string"==typeof f.responseText?{text:f.responseText}:void 0,f.getAllResponseHeaders()))}},f.onload=b(),f.onerror=b("error"),b=Cb[g]=b("abort");try{f.send(a.hasContent&&a.data||null)}catch(h){if(b)throw h}},abort:function(){b&&b()}}:void 0}),n.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return n.globalEval(a),a}}}),n.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),n.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(d,e){b=n("<script>").prop({async:!0,charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&e("error"===a.type?404:200,a.type)}),l.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Fb=[],Gb=/(=)\?(?=&|$)|\?\?/;n.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Fb.pop()||n.expando+"_"+cb++;return this[a]=!0,a}}),n.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(Gb.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Gb.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=n.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Gb,"$1"+e):b.jsonp!==!1&&(b.url+=(db.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||n.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Fb.push(e)),g&&n.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),n.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||l;var d=v.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=n.buildFragment([a],b,e),e&&e.length&&n(e).remove(),n.merge([],d.childNodes))};var Hb=n.fn.load;n.fn.load=function(a,b,c){if("string"!=typeof a&&Hb)return Hb.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=n.trim(a.slice(h)),a=a.slice(0,h)),n.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&n.ajax({url:a,type:e,dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?n("<div>").append(n.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,f||[a.responseText,b,a])}),this},n.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){n.fn[b]=function(a){return this.on(b,a)}}),n.expr.filters.animated=function(a){return n.grep(n.timers,function(b){return a===b.elem}).length};var Ib=a.document.documentElement;function Jb(a){return n.isWindow(a)?a:9===a.nodeType&&a.defaultView}n.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=n.css(a,"position"),l=n(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=n.css(a,"top"),i=n.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),n.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},n.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){n.offset.setOffset(this,a,b)});var b,c,d=this[0],e={top:0,left:0},f=d&&d.ownerDocument;if(f)return b=f.documentElement,n.contains(b,d)?(typeof d.getBoundingClientRect!==U&&(e=d.getBoundingClientRect()),c=Jb(f),{top:e.top+c.pageYOffset-b.clientTop,left:e.left+c.pageXOffset-b.clientLeft}):e},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===n.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),n.nodeName(a[0],"html")||(d=a.offset()),d.top+=n.css(a[0],"borderTopWidth",!0),d.left+=n.css(a[0],"borderLeftWidth",!0)),{top:b.top-d.top-n.css(c,"marginTop",!0),left:b.left-d.left-n.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||Ib;while(a&&!n.nodeName(a,"html")&&"static"===n.css(a,"position"))a=a.offsetParent;return a||Ib})}}),n.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b,c){var d="pageYOffset"===c;n.fn[b]=function(e){return J(this,function(b,e,f){var g=Jb(b);return void 0===f?g?g[c]:b[e]:void(g?g.scrollTo(d?a.pageXOffset:f,d?f:a.pageYOffset):b[e]=f)},b,e,arguments.length,null)}}),n.each(["top","left"],function(a,b){n.cssHooks[b]=ya(k.pixelPosition,function(a,c){return c?(c=xa(a,b),va.test(c)?n(a).position()[b]+"px":c):void 0})}),n.each({Height:"height",Width:"width"},function(a,b){n.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){n.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return J(this,function(b,c,d){var e;return n.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?n.css(b,c,g):n.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),n.fn.size=function(){return this.length},n.fn.andSelf=n.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return n});var Kb=a.jQuery,Lb=a.$;return n.noConflict=function(b){return a.$===n&&(a.$=Lb),b&&a.jQuery===n&&(a.jQuery=Kb),n},typeof b===U&&(a.jQuery=a.$=n),n});

},{}],"messages":[function(require,module,exports){
// Copyright (c) Microsoft Corporation. All rights reserved.

// Plugin communications layer. Two types of communication are supported:
// 1. Messages - when emitted, any local handlers are notified, and it is also sent across to web sockets connection
//    where any remote handlers are notified. There can be any number of local and/or remote handlers. There is no
//    opportunity to respond.
// 2. Methods - calls across the web socket connection where there can be a single handler that can return a single
//    value or error value.

function Messages(pluginId, socket) {
    this.pluginId = pluginId;
    this.socket = socket;
    this.messages = {};
    this.methods = {};

    var that = this;
    socket.on('plugin-message', function (data) {
        if (data.pluginId === pluginId) {
            notify.call(that, that.messages, data.message, data.data);
        }
    });
    socket.on('plugin-method', function (data, callback) {
        if (data.pluginId === pluginId) {
            var handler = that.methods && that.methods[data.method];
            if (handler) {
                var args = data.args;
                args.push(callback);
                handler.apply(this, args);
            }
        }
    });
}

Messages._globalMessages = {};

function notify(messagesObj, message, data) {
    // Notifies local listeners of a message
    var handlers = messagesObj && messagesObj[message];
    if (handlers) {
        handlers.forEach(function (handler) {
            handler.call(this, message, data);
        });
    }
}

Messages.prototype = {
    // Call and register for methods

    /**
     * @desc Calls the specified method, with any number of parameters. Return a promise.
     * @param method
     */
    call: function (method) {
        return new Promise((resolve, reject) => {
            this.socket.emit('plugin-method', {
                pluginId: this.pluginId,
                method: method,
                args: Array.prototype.slice.call(arguments, 1)
            }, function (err, result) {
                if (err) {
                    reject(err);
                } else {
                    resolve(result);
                }
            });
        });
    },

    register: function(method, handler) {
        // Can only ever have one handler for a method. Cancel by calling with handler null or undefined.
        this.methods[method] = handler;
        return this;
    },

    // Emit and handle messages
    emit: function (message, data, isGlobal) {
        // Pass the message across the socket
        var eventName,
            messagesObj;

        if (isGlobal) {
            eventName = 'global-plugin-message';
            messagesObj = Messages._globalMessages;
        } else {
            eventName = 'plugin-message';
            messagesObj = this.messages;
        }

        this.socket.emit(eventName, {
            pluginId: this.pluginId,
            message: message,
            data: data
        });

        // Notify any local listeners
        notify.call(this, messagesObj, message, data);
    },
    
    // Emit messages destined to external debug-hosts
    emitDebug: function(message, data) {
        this.socket.emit('debug-message', {
            pluginId: this.pluginId,
            message: message,
            data: data
        });
    },

    refreshAppHost: function (device) {
        this.socket.emit('refresh-app-host', device);
    },

    on: function (message, handler, isGlobal) {
        var messagesObj = (!isGlobal) ? this.messages : Messages._globalMessages;

        if (!messagesObj[message]) {
            messagesObj[message] = [handler];
        } else {
            messagesObj[message].push(handler);
        }
        return this;
    },

    off: function (message, handler) {
        var handlers = this.messages[message];
        if (!handlers) {
            // try on the global messages handlers
            handlers = Messages._globalMessages[message];
            if (!handlers) {
                return this;
            }
        }

        var pos = handlers.indexOf(handler);
        while (pos > -1) {
            handlers.splice(pos, 1);
            pos = handlers.indexOf(handler);
        }
    }
};

module.exports = Messages;

},{}],"polyfills":[function(require,module,exports){
// Copyright (c) Microsoft Corporation. All rights reserved.

// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign

if (typeof Object.assign != 'function') {
    (function () {
        Object.assign = function (target) {
            'use strict';
            if (target === undefined || target === null) {
                throw new TypeError('Cannot convert undefined or null to object');
            }

            var output = Object(target);
            for (var index = 1; index < arguments.length; index++) {
                var source = arguments[index];
                if (source !== undefined && source !== null) {
                    for (var nextKey in source) {
                        if (Object.prototype.hasOwnProperty.call(source, nextKey)) {
                            output[nextKey] = source[nextKey];
                        }
                    }
                }
            }
            return output;
        };
    })();
}

},{}],"sim-constants":[function(require,module,exports){
// Copyright (c) Microsoft Corporation. All rights reserved.
// Based in part on code from Apache Ripple, https://github.com/apache/incubator-ripple

module.exports = {
    'COMMON': {
        'PREFIX': 'tinyhippos-',
    },

    'GEO': {
        'OPTIONS': {
            'LATITUDE': 'geo-latitude',
            'LONGITUDE': 'geo-longitude',
            'ALTITUDE': 'geo-altitude',
            'CELL_ID': 'geo-cellid',
            'ACCURACY': 'geo-accuracy',
            'ALTITUDE_ACCURACY': 'geo-altitude-accuracy',
            'HEADING': 'geo-heading',
            'SPEED': 'geo-speed',
            'TIME_STAMP': 'geo-timestamp',
            'DELAY': 'geo-delay',
            'DELAY_LABEL': 'geo-delay-label',
            'HEADING_LABEL': 'geo-heading-label',
            'HEADING_MAP_LABEL': 'geo-map-direction-label',
            'IMAGE': 'geo-map-img',
            'MAP_MARKER': 'geo-map-marker',
            'MAP_CONTAINER': 'geo-map-container',
            'TIMEOUT': 'geo-timeout',
            'GPXFILE': 'geo-gpxfile',
            'GPXGO': 'geo-gpx-go',
            'GPXMULTIPLIER': 'geo-gpxmultiplier-select',
            'GPXREPLAYSTATUS': 'geo-gpxreplaystatus'
        },
        'MAP_ZOOM_MAX': 18,
        'MAP_ZOOM_MIN': 0,
        'MAP_ZOOM_LEVEL_CONTAINER': 'geo-map-zoomlevel-value',
        'MAP_ZOOM_KEY': 'geo-map-zoom-key',
        'GPXGO_LABELS': {
            'GO': 'Go',
            'STOP': 'Stop'
        }
    },

    'BATTERY_STATUS': {
        'BATTERY_STATUS_KEY': 'battery-status-key',
        'IS_PLUGGED_KEY': 'is-plugged-key',
        'LEVEL_LABEL': 'battery-level-label',
        'LEVEL_VALUE': 'battery-level',
        'IS_PLUGGED_CHECKBOX': 'is-plugged'
    },
};

},{}],"socket.io":[function(require,module,exports){
(function (global){(function (){
/* @version 1.4.5 */
(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.io=f()}})(function(){var define,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}({1:[function(_dereq_,module,exports){module.exports=_dereq_("./lib/")},{"./lib/":2}],2:[function(_dereq_,module,exports){module.exports=_dereq_("./socket");module.exports.parser=_dereq_("engine.io-parser")},{"./socket":3,"engine.io-parser":19}],3:[function(_dereq_,module,exports){(function(global){var transports=_dereq_("./transports");var Emitter=_dereq_("component-emitter");var debug=_dereq_("debug")("engine.io-client:socket");var index=_dereq_("indexof");var parser=_dereq_("engine.io-parser");var parseuri=_dereq_("parseuri");var parsejson=_dereq_("parsejson");var parseqs=_dereq_("parseqs");module.exports=Socket;function noop(){}function Socket(uri,opts){if(!(this instanceof Socket))return new Socket(uri,opts);opts=opts||{};if(uri&&"object"==typeof uri){opts=uri;uri=null}if(uri){uri=parseuri(uri);opts.hostname=uri.host;opts.secure=uri.protocol=="https"||uri.protocol=="wss";opts.port=uri.port;if(uri.query)opts.query=uri.query}else if(opts.host){opts.hostname=parseuri(opts.host).host}this.secure=null!=opts.secure?opts.secure:global.location&&"https:"==location.protocol;if(opts.hostname&&!opts.port){opts.port=this.secure?"443":"80"}this.agent=opts.agent||false;this.hostname=opts.hostname||(global.location?location.hostname:"localhost");this.port=opts.port||(global.location&&location.port?location.port:this.secure?443:80);this.query=opts.query||{};if("string"==typeof this.query)this.query=parseqs.decode(this.query);this.upgrade=false!==opts.upgrade;this.path=(opts.path||"/engine.io").replace(/\/$/,"")+"/";this.forceJSONP=!!opts.forceJSONP;this.jsonp=false!==opts.jsonp;this.forceBase64=!!opts.forceBase64;this.enablesXDR=!!opts.enablesXDR;this.timestampParam=opts.timestampParam||"t";this.timestampRequests=opts.timestampRequests;this.transports=opts.transports||["polling","websocket"];this.readyState="";this.writeBuffer=[];this.policyPort=opts.policyPort||843;this.rememberUpgrade=opts.rememberUpgrade||false;this.binaryType=null;this.onlyBinaryUpgrades=opts.onlyBinaryUpgrades;this.perMessageDeflate=false!==opts.perMessageDeflate?opts.perMessageDeflate||{}:false;if(true===this.perMessageDeflate)this.perMessageDeflate={};if(this.perMessageDeflate&&null==this.perMessageDeflate.threshold){this.perMessageDeflate.threshold=1024}this.pfx=opts.pfx||null;this.key=opts.key||null;this.passphrase=opts.passphrase||null;this.cert=opts.cert||null;this.ca=opts.ca||null;this.ciphers=opts.ciphers||null;this.rejectUnauthorized=opts.rejectUnauthorized===undefined?null:opts.rejectUnauthorized;var freeGlobal=typeof global=="object"&&global;if(freeGlobal.global===freeGlobal){if(opts.extraHeaders&&Object.keys(opts.extraHeaders).length>0){this.extraHeaders=opts.extraHeaders}}this.open()}Socket.priorWebsocketSuccess=false;Emitter(Socket.prototype);Socket.protocol=parser.protocol;Socket.Socket=Socket;Socket.Transport=_dereq_("./transport");Socket.transports=_dereq_("./transports");Socket.parser=_dereq_("engine.io-parser");Socket.prototype.createTransport=function(name){debug('creating transport "%s"',name);var query=clone(this.query);query.EIO=parser.protocol;query.transport=name;if(this.id)query.sid=this.id;var transport=new transports[name]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:query,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized,perMessageDeflate:this.perMessageDeflate,extraHeaders:this.extraHeaders});return transport};function clone(obj){var o={};for(var i in obj){if(obj.hasOwnProperty(i)){o[i]=obj[i]}}return o}Socket.prototype.open=function(){var transport;if(this.rememberUpgrade&&Socket.priorWebsocketSuccess&&this.transports.indexOf("websocket")!=-1){transport="websocket"}else if(0===this.transports.length){var self=this;setTimeout(function(){self.emit("error","No transports available")},0);return}else{transport=this.transports[0]}this.readyState="opening";try{transport=this.createTransport(transport)}catch(e){this.transports.shift();this.open();return}transport.open();this.setTransport(transport)};Socket.prototype.setTransport=function(transport){debug("setting transport %s",transport.name);var self=this;if(this.transport){debug("clearing existing transport %s",this.transport.name);this.transport.removeAllListeners()}this.transport=transport;transport.on("drain",function(){self.onDrain()}).on("packet",function(packet){self.onPacket(packet)}).on("error",function(e){self.onError(e)}).on("close",function(){self.onClose("transport close")})};Socket.prototype.probe=function(name){debug('probing transport "%s"',name);var transport=this.createTransport(name,{probe:1}),failed=false,self=this;Socket.priorWebsocketSuccess=false;function onTransportOpen(){if(self.onlyBinaryUpgrades){var upgradeLosesBinary=!this.supportsBinary&&self.transport.supportsBinary;failed=failed||upgradeLosesBinary}if(failed)return;debug('probe transport "%s" opened',name);transport.send([{type:"ping",data:"probe"}]);transport.once("packet",function(msg){if(failed)return;if("pong"==msg.type&&"probe"==msg.data){debug('probe transport "%s" pong',name);self.upgrading=true;self.emit("upgrading",transport);if(!transport)return;Socket.priorWebsocketSuccess="websocket"==transport.name;debug('pausing current transport "%s"',self.transport.name);self.transport.pause(function(){if(failed)return;if("closed"==self.readyState)return;debug("changing transport and sending upgrade packet");cleanup();self.setTransport(transport);transport.send([{type:"upgrade"}]);self.emit("upgrade",transport);transport=null;self.upgrading=false;self.flush()})}else{debug('probe transport "%s" failed',name);var err=new Error("probe error");err.transport=transport.name;self.emit("upgradeError",err)}})}function freezeTransport(){if(failed)return;failed=true;cleanup();transport.close();transport=null}function onerror(err){var error=new Error("probe error: "+err);error.transport=transport.name;freezeTransport();debug('probe transport "%s" failed because of error: %s',name,err);self.emit("upgradeError",error)}function onTransportClose(){onerror("transport closed")}function onclose(){onerror("socket closed")}function onupgrade(to){if(transport&&to.name!=transport.name){debug('"%s" works - aborting "%s"',to.name,transport.name);freezeTransport()}}function cleanup(){transport.removeListener("open",onTransportOpen);transport.removeListener("error",onerror);transport.removeListener("close",onTransportClose);self.removeListener("close",onclose);self.removeListener("upgrading",onupgrade)}transport.once("open",onTransportOpen);transport.once("error",onerror);transport.once("close",onTransportClose);this.once("close",onclose);this.once("upgrading",onupgrade);transport.open()};Socket.prototype.onOpen=function(){debug("socket open");this.readyState="open";Socket.priorWebsocketSuccess="websocket"==this.transport.name;this.emit("open");this.flush();if("open"==this.readyState&&this.upgrade&&this.transport.pause){debug("starting upgrade probes");for(var i=0,l=this.upgrades.length;i<l;i++){this.probe(this.upgrades[i])}}};Socket.prototype.onPacket=function(packet){if("opening"==this.readyState||"open"==this.readyState){debug('socket receive: type "%s", data "%s"',packet.type,packet.data);this.emit("packet",packet);this.emit("heartbeat");switch(packet.type){case"open":this.onHandshake(parsejson(packet.data));break;case"pong":this.setPing();this.emit("pong");break;case"error":var err=new Error("server error");err.code=packet.data;this.onError(err);break;case"message":this.emit("data",packet.data);this.emit("message",packet.data);break}}else{debug('packet received with socket readyState "%s"',this.readyState)}};Socket.prototype.onHandshake=function(data){this.emit("handshake",data);this.id=data.sid;this.transport.query.sid=data.sid;this.upgrades=this.filterUpgrades(data.upgrades);this.pingInterval=data.pingInterval;this.pingTimeout=data.pingTimeout;this.onOpen();if("closed"==this.readyState)return;this.setPing();this.removeListener("heartbeat",this.onHeartbeat);this.on("heartbeat",this.onHeartbeat)};Socket.prototype.onHeartbeat=function(timeout){clearTimeout(this.pingTimeoutTimer);var self=this;self.pingTimeoutTimer=setTimeout(function(){if("closed"==self.readyState)return;self.onClose("ping timeout")},timeout||self.pingInterval+self.pingTimeout)};Socket.prototype.setPing=function(){var self=this;clearTimeout(self.pingIntervalTimer);self.pingIntervalTimer=setTimeout(function(){debug("writing ping packet - expecting pong within %sms",self.pingTimeout);self.ping();self.onHeartbeat(self.pingTimeout)},self.pingInterval)};Socket.prototype.ping=function(){var self=this;this.sendPacket("ping",function(){self.emit("ping")})};Socket.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen);this.prevBufferLen=0;if(0===this.writeBuffer.length){this.emit("drain")}else{this.flush()}};Socket.prototype.flush=function(){if("closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){debug("flushing %d packets in socket",this.writeBuffer.length);this.transport.send(this.writeBuffer);this.prevBufferLen=this.writeBuffer.length;this.emit("flush")}};Socket.prototype.write=Socket.prototype.send=function(msg,options,fn){this.sendPacket("message",msg,options,fn);return this};Socket.prototype.sendPacket=function(type,data,options,fn){if("function"==typeof data){fn=data;data=undefined}if("function"==typeof options){fn=options;options=null}if("closing"==this.readyState||"closed"==this.readyState){return}options=options||{};options.compress=false!==options.compress;var packet={type:type,data:data,options:options};this.emit("packetCreate",packet);this.writeBuffer.push(packet);if(fn)this.once("flush",fn);this.flush()};Socket.prototype.close=function(){if("opening"==this.readyState||"open"==this.readyState){this.readyState="closing";var self=this;if(this.writeBuffer.length){this.once("drain",function(){if(this.upgrading){waitForUpgrade()}else{close()}})}else if(this.upgrading){waitForUpgrade()}else{close()}}function close(){self.onClose("forced close");debug("socket closing - telling transport to close");self.transport.close()}function cleanupAndClose(){self.removeListener("upgrade",cleanupAndClose);self.removeListener("upgradeError",cleanupAndClose);close()}function waitForUpgrade(){self.once("upgrade",cleanupAndClose);self.once("upgradeError",cleanupAndClose)}return this};Socket.prototype.onError=function(err){debug("socket error %j",err);Socket.priorWebsocketSuccess=false;this.emit("error",err);this.onClose("transport error",err)};Socket.prototype.onClose=function(reason,desc){if("opening"==this.readyState||"open"==this.readyState||"closing"==this.readyState){debug('socket close with reason: "%s"',reason);var self=this;clearTimeout(this.pingIntervalTimer);clearTimeout(this.pingTimeoutTimer);this.transport.removeAllListeners("close");this.transport.close();this.transport.removeAllListeners();this.readyState="closed";this.id=null;this.emit("close",reason,desc);self.writeBuffer=[];self.prevBufferLen=0}};Socket.prototype.filterUpgrades=function(upgrades){var filteredUpgrades=[];for(var i=0,j=upgrades.length;i<j;i++){if(~index(this.transports,upgrades[i]))filteredUpgrades.push(upgrades[i])}return filteredUpgrades}}).call(this,typeof self!=="undefined"?self:typeof window!=="undefined"?window:typeof global!=="undefined"?global:{})},{"./transport":4,"./transports":5,"component-emitter":15,debug:17,"engine.io-parser":19,indexof:23,parsejson:26,parseqs:27,parseuri:28}],4:[function(_dereq_,module,exports){var parser=_dereq_("engine.io-parser");var Emitter=_dereq_("component-emitter");module.exports=Transport;function Transport(opts){this.path=opts.path;this.hostname=opts.hostname;this.port=opts.port;this.secure=opts.secure;this.query=opts.query;this.timestampParam=opts.timestampParam;this.timestampRequests=opts.timestampRequests;this.readyState="";this.agent=opts.agent||false;this.socket=opts.socket;this.enablesXDR=opts.enablesXDR;this.pfx=opts.pfx;this.key=opts.key;this.passphrase=opts.passphrase;this.cert=opts.cert;this.ca=opts.ca;this.ciphers=opts.ciphers;this.rejectUnauthorized=opts.rejectUnauthorized;this.extraHeaders=opts.extraHeaders}Emitter(Transport.prototype);Transport.prototype.onError=function(msg,desc){var err=new Error(msg);err.type="TransportError";err.description=desc;this.emit("error",err);return this};Transport.prototype.open=function(){if("closed"==this.readyState||""==this.readyState){this.readyState="opening";this.doOpen()}return this};Transport.prototype.close=function(){if("opening"==this.readyState||"open"==this.readyState){this.doClose();this.onClose()}return this};Transport.prototype.send=function(packets){if("open"==this.readyState){this.write(packets)}else{throw new Error("Transport not open")}};Transport.prototype.onOpen=function(){this.readyState="open";this.writable=true;this.emit("open")};Transport.prototype.onData=function(data){var packet=parser.decodePacket(data,this.socket.binaryType);this.onPacket(packet)};Transport.prototype.onPacket=function(packet){this.emit("packet",packet)};Transport.prototype.onClose=function(){this.readyState="closed";this.emit("close")}},{"component-emitter":15,"engine.io-parser":19}],5:[function(_dereq_,module,exports){(function(global){var XMLHttpRequest=_dereq_("xmlhttprequest-ssl");var XHR=_dereq_("./polling-xhr");var JSONP=_dereq_("./polling-jsonp");var websocket=_dereq_("./websocket");exports.polling=polling;exports.websocket=websocket;function polling(opts){var xhr;var xd=false;var xs=false;var jsonp=false!==opts.jsonp;if(global.location){var isSSL="https:"==location.protocol;var port=location.port;if(!port){port=isSSL?443:80}xd=opts.hostname!=location.hostname||port!=opts.port;xs=opts.secure!=isSSL}opts.xdomain=xd;opts.xscheme=xs;xhr=new XMLHttpRequest(opts);if("open"in xhr&&!opts.forceJSONP){return new XHR(opts)}else{if(!jsonp)throw new Error("JSONP disabled");return new JSONP(opts)}}}).call(this,typeof self!=="undefined"?self:typeof window!=="undefined"?window:typeof global!=="undefined"?global:{})},{"./polling-jsonp":6,"./polling-xhr":7,"./websocket":9,"xmlhttprequest-ssl":10}],6:[function(_dereq_,module,exports){(function(global){var Polling=_dereq_("./polling");var inherit=_dereq_("component-inherit");module.exports=JSONPPolling;var rNewline=/\n/g;var rEscapedNewline=/\\n/g;var callbacks;var index=0;function empty(){}function JSONPPolling(opts){Polling.call(this,opts);this.query=this.query||{};if(!callbacks){if(!global.___eio)global.___eio=[];callbacks=global.___eio}this.index=callbacks.length;var self=this;callbacks.push(function(msg){self.onData(msg)});this.query.j=this.index;if(global.document&&global.addEventListener){global.addEventListener("beforeunload",function(){if(self.script)self.script.onerror=empty},false)}}inherit(JSONPPolling,Polling);JSONPPolling.prototype.supportsBinary=false;JSONPPolling.prototype.doClose=function(){if(this.script){this.script.parentNode.removeChild(this.script);this.script=null}if(this.form){this.form.parentNode.removeChild(this.form);this.form=null;this.iframe=null}Polling.prototype.doClose.call(this)};JSONPPolling.prototype.doPoll=function(){var self=this;var script=document.createElement("script");if(this.script){this.script.parentNode.removeChild(this.script);this.script=null}script.async=true;script.src=this.uri();script.onerror=function(e){self.onError("jsonp poll error",e)};var insertAt=document.getElementsByTagName("script")[0];if(insertAt){insertAt.parentNode.insertBefore(script,insertAt)}else{(document.head||document.body).appendChild(script)}this.script=script;var isUAgecko="undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent);if(isUAgecko){setTimeout(function(){var iframe=document.createElement("iframe");document.body.appendChild(iframe);document.body.removeChild(iframe)},100)}};JSONPPolling.prototype.doWrite=function(data,fn){var self=this;if(!this.form){var form=document.createElement("form");var area=document.createElement("textarea");var id=this.iframeId="eio_iframe_"+this.index;var iframe;form.className="socketio";form.style.position="absolute";form.style.top="-1000px";form.style.left="-1000px";form.target=id;form.method="POST";form.setAttribute("accept-charset","utf-8");area.name="d";form.appendChild(area);document.body.appendChild(form);this.form=form;this.area=area}this.form.action=this.uri();function complete(){initIframe();fn()}function initIframe(){if(self.iframe){try{self.form.removeChild(self.iframe)}catch(e){self.onError("jsonp polling iframe removal error",e)}}try{var html='<iframe src="javascript:0" name="'+self.iframeId+'">';iframe=document.createElement(html)}catch(e){iframe=document.createElement("iframe");iframe.name=self.iframeId;iframe.src="javascript:0"}iframe.id=self.iframeId;self.form.appendChild(iframe);self.iframe=iframe}initIframe();data=data.replace(rEscapedNewline,"\\\n");this.area.value=data.replace(rNewline,"\\n");try{this.form.submit()}catch(e){}if(this.iframe.attachEvent){this.iframe.onreadystatechange=function(){if(self.iframe.readyState=="complete"){complete()}}}else{this.iframe.onload=complete}}}).call(this,typeof self!=="undefined"?self:typeof window!=="undefined"?window:typeof global!=="undefined"?global:{})},{"./polling":8,"component-inherit":16}],7:[function(_dereq_,module,exports){(function(global){var XMLHttpRequest=_dereq_("xmlhttprequest-ssl");var Polling=_dereq_("./polling");var Emitter=_dereq_("component-emitter");var inherit=_dereq_("component-inherit");var debug=_dereq_("debug")("engine.io-client:polling-xhr");module.exports=XHR;module.exports.Request=Request;function empty(){}function XHR(opts){Polling.call(this,opts);if(global.location){var isSSL="https:"==location.protocol;var port=location.port;if(!port){port=isSSL?443:80}this.xd=opts.hostname!=global.location.hostname||port!=opts.port;this.xs=opts.secure!=isSSL}else{this.extraHeaders=opts.extraHeaders}}inherit(XHR,Polling);XHR.prototype.supportsBinary=true;XHR.prototype.request=function(opts){opts=opts||{};opts.uri=this.uri();opts.xd=this.xd;opts.xs=this.xs;opts.agent=this.agent||false;opts.supportsBinary=this.supportsBinary;opts.enablesXDR=this.enablesXDR;opts.pfx=this.pfx;opts.key=this.key;opts.passphrase=this.passphrase;opts.cert=this.cert;opts.ca=this.ca;opts.ciphers=this.ciphers;opts.rejectUnauthorized=this.rejectUnauthorized;opts.extraHeaders=this.extraHeaders;return new Request(opts)};XHR.prototype.doWrite=function(data,fn){var isBinary=typeof data!=="string"&&data!==undefined;var req=this.request({method:"POST",data:data,isBinary:isBinary});var self=this;req.on("success",fn);req.on("error",function(err){self.onError("xhr post error",err)});this.sendXhr=req};XHR.prototype.doPoll=function(){debug("xhr poll");var req=this.request();var self=this;req.on("data",function(data){self.onData(data)});req.on("error",function(err){self.onError("xhr poll error",err)});this.pollXhr=req};function Request(opts){this.method=opts.method||"GET";this.uri=opts.uri;this.xd=!!opts.xd;this.xs=!!opts.xs;this.async=false!==opts.async;this.data=undefined!=opts.data?opts.data:null;this.agent=opts.agent;this.isBinary=opts.isBinary;this.supportsBinary=opts.supportsBinary;this.enablesXDR=opts.enablesXDR;this.pfx=opts.pfx;this.key=opts.key;this.passphrase=opts.passphrase;this.cert=opts.cert;this.ca=opts.ca;this.ciphers=opts.ciphers;this.rejectUnauthorized=opts.rejectUnauthorized;this.extraHeaders=opts.extraHeaders;this.create()}Emitter(Request.prototype);Request.prototype.create=function(){var opts={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};opts.pfx=this.pfx;opts.key=this.key;opts.passphrase=this.passphrase;opts.cert=this.cert;opts.ca=this.ca;opts.ciphers=this.ciphers;opts.rejectUnauthorized=this.rejectUnauthorized;var xhr=this.xhr=new XMLHttpRequest(opts);var self=this;try{debug("xhr open %s: %s",this.method,this.uri);xhr.open(this.method,this.uri,this.async);try{if(this.extraHeaders){xhr.setDisableHeaderCheck(true);for(var i in this.extraHeaders){if(this.extraHeaders.hasOwnProperty(i)){xhr.setRequestHeader(i,this.extraHeaders[i])}}}}catch(e){}if(this.supportsBinary){xhr.responseType="arraybuffer"}if("POST"==this.method){try{if(this.isBinary){xhr.setRequestHeader("Content-type","application/octet-stream")}else{xhr.setRequestHeader("Content-type","text/plain;charset=UTF-8")}}catch(e){}}if("withCredentials"in xhr){xhr.withCredentials=true}if(this.hasXDR()){xhr.onload=function(){self.onLoad()};xhr.onerror=function(){self.onError(xhr.responseText)}}else{xhr.onreadystatechange=function(){if(4!=xhr.readyState)return;if(200==xhr.status||1223==xhr.status){self.onLoad()}else{setTimeout(function(){self.onError(xhr.status)},0)}}}debug("xhr data %s",this.data);xhr.send(this.data)}catch(e){setTimeout(function(){self.onError(e)},0);return}if(global.document){this.index=Request.requestsCount++;Request.requests[this.index]=this}};Request.prototype.onSuccess=function(){this.emit("success");this.cleanup()};Request.prototype.onData=function(data){this.emit("data",data);this.onSuccess()};Request.prototype.onError=function(err){this.emit("error",err);this.cleanup(true)};Request.prototype.cleanup=function(fromError){if("undefined"==typeof this.xhr||null===this.xhr){return}if(this.hasXDR()){this.xhr.onload=this.xhr.onerror=empty}else{this.xhr.onreadystatechange=empty}if(fromError){try{this.xhr.abort()}catch(e){}}if(global.document){delete Request.requests[this.index]}this.xhr=null};Request.prototype.onLoad=function(){var data;try{var contentType;try{contentType=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(e){}if(contentType==="application/octet-stream"){data=this.xhr.response}else{if(!this.supportsBinary){data=this.xhr.responseText}else{try{data=String.fromCharCode.apply(null,new Uint8Array(this.xhr.response))}catch(e){var ui8Arr=new Uint8Array(this.xhr.response);var dataArray=[];for(var idx=0,length=ui8Arr.length;idx<length;idx++){dataArray.push(ui8Arr[idx])}data=String.fromCharCode.apply(null,dataArray)}}}}catch(e){this.onError(e)}if(null!=data){this.onData(data)}};Request.prototype.hasXDR=function(){return"undefined"!==typeof global.XDomainRequest&&!this.xs&&this.enablesXDR};Request.prototype.abort=function(){this.cleanup()};if(global.document){Request.requestsCount=0;Request.requests={};if(global.attachEvent){global.attachEvent("onunload",unloadHandler)}else if(global.addEventListener){global.addEventListener("beforeunload",unloadHandler,false)}}function unloadHandler(){for(var i in Request.requests){if(Request.requests.hasOwnProperty(i)){Request.requests[i].abort()}}}}).call(this,typeof self!=="undefined"?self:typeof window!=="undefined"?window:typeof global!=="undefined"?global:{})},{"./polling":8,"component-emitter":15,"component-inherit":16,debug:17,"xmlhttprequest-ssl":10}],8:[function(_dereq_,module,exports){var Transport=_dereq_("../transport");var parseqs=_dereq_("parseqs");var parser=_dereq_("engine.io-parser");var inherit=_dereq_("component-inherit");var yeast=_dereq_("yeast");var debug=_dereq_("debug")("engine.io-client:polling");module.exports=Polling;var hasXHR2=function(){var XMLHttpRequest=_dereq_("xmlhttprequest-ssl");var xhr=new XMLHttpRequest({xdomain:false});return null!=xhr.responseType}();function Polling(opts){var forceBase64=opts&&opts.forceBase64;if(!hasXHR2||forceBase64){this.supportsBinary=false}Transport.call(this,opts)}inherit(Polling,Transport);Polling.prototype.name="polling";Polling.prototype.doOpen=function(){this.poll()};Polling.prototype.pause=function(onPause){var pending=0;var self=this;this.readyState="pausing";function pause(){debug("paused");self.readyState="paused";onPause()}if(this.polling||!this.writable){var total=0;if(this.polling){debug("we are currently polling - waiting to pause");total++;this.once("pollComplete",function(){debug("pre-pause polling complete");--total||pause()})}if(!this.writable){debug("we are currently writing - waiting to pause");total++;this.once("drain",function(){debug("pre-pause writing complete");--total||pause()})}}else{pause()}};Polling.prototype.poll=function(){debug("polling");this.polling=true;this.doPoll();this.emit("poll")};Polling.prototype.onData=function(data){var self=this;debug("polling got data %s",data);var callback=function(packet,index,total){if("opening"==self.readyState){self.onOpen()}if("close"==packet.type){self.onClose();return false}self.onPacket(packet)};parser.decodePayload(data,this.socket.binaryType,callback);if("closed"!=this.readyState){this.polling=false;this.emit("pollComplete");if("open"==this.readyState){this.poll()}else{debug('ignoring poll - transport state "%s"',this.readyState)}}};Polling.prototype.doClose=function(){var self=this;function close(){debug("writing close packet");self.write([{type:"close"}])}if("open"==this.readyState){debug("transport open - closing");close()}else{debug("transport not open - deferring close");this.once("open",close)}};Polling.prototype.write=function(packets){var self=this;this.writable=false;var callbackfn=function(){self.writable=true;self.emit("drain")};var self=this;parser.encodePayload(packets,this.supportsBinary,function(data){self.doWrite(data,callbackfn)})};Polling.prototype.uri=function(){var query=this.query||{};var schema=this.secure?"https":"http";var port="";if(false!==this.timestampRequests){query[this.timestampParam]=yeast()}if(!this.supportsBinary&&!query.sid){query.b64=1}query=parseqs.encode(query);if(this.port&&("https"==schema&&this.port!=443||"http"==schema&&this.port!=80)){port=":"+this.port}if(query.length){query="?"+query}var ipv6=this.hostname.indexOf(":")!==-1;return schema+"://"+(ipv6?"["+this.hostname+"]":this.hostname)+port+this.path+query}},{"../transport":4,"component-inherit":16,debug:17,"engine.io-parser":19,parseqs:27,"xmlhttprequest-ssl":10,yeast:30}],9:[function(_dereq_,module,exports){(function(global){var Transport=_dereq_("../transport");var parser=_dereq_("engine.io-parser");var parseqs=_dereq_("parseqs");var inherit=_dereq_("component-inherit");var yeast=_dereq_("yeast");var debug=_dereq_("debug")("engine.io-client:websocket");var BrowserWebSocket=global.WebSocket||global.MozWebSocket;var WebSocket=BrowserWebSocket;if(!WebSocket&&typeof window==="undefined"){try{WebSocket=_dereq_("ws")}catch(e){}}module.exports=WS;function WS(opts){var forceBase64=opts&&opts.forceBase64;if(forceBase64){this.supportsBinary=false}this.perMessageDeflate=opts.perMessageDeflate;Transport.call(this,opts)}inherit(WS,Transport);WS.prototype.name="websocket";WS.prototype.supportsBinary=true;WS.prototype.doOpen=function(){if(!this.check()){return}var self=this;var uri=this.uri();var protocols=void 0;var opts={agent:this.agent,perMessageDeflate:this.perMessageDeflate};opts.pfx=this.pfx;opts.key=this.key;opts.passphrase=this.passphrase;opts.cert=this.cert;opts.ca=this.ca;opts.ciphers=this.ciphers;opts.rejectUnauthorized=this.rejectUnauthorized;if(this.extraHeaders){opts.headers=this.extraHeaders}this.ws=BrowserWebSocket?new WebSocket(uri):new WebSocket(uri,protocols,opts);if(this.ws.binaryType===undefined){this.supportsBinary=false}if(this.ws.supports&&this.ws.supports.binary){this.supportsBinary=true;this.ws.binaryType="buffer"}else{this.ws.binaryType="arraybuffer"}this.addEventListeners()};WS.prototype.addEventListeners=function(){var self=this;this.ws.onopen=function(){self.onOpen()};this.ws.onclose=function(){self.onClose()};this.ws.onmessage=function(ev){self.onData(ev.data)};this.ws.onerror=function(e){self.onError("websocket error",e)}};if("undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)){WS.prototype.onData=function(data){var self=this;setTimeout(function(){Transport.prototype.onData.call(self,data)},0)}}WS.prototype.write=function(packets){var self=this;this.writable=false;var total=packets.length;for(var i=0,l=total;i<l;i++){(function(packet){parser.encodePacket(packet,self.supportsBinary,function(data){if(!BrowserWebSocket){var opts={};if(packet.options){opts.compress=packet.options.compress}if(self.perMessageDeflate){var len="string"==typeof data?global.Buffer.byteLength(data):data.length;if(len<self.perMessageDeflate.threshold){opts.compress=false}}}try{if(BrowserWebSocket){self.ws.send(data)}else{self.ws.send(data,opts)}}catch(e){debug("websocket closed before onclose event")}--total||done()})})(packets[i])}function done(){self.emit("flush");setTimeout(function(){self.writable=true;self.emit("drain")},0)}};WS.prototype.onClose=function(){Transport.prototype.onClose.call(this)};WS.prototype.doClose=function(){if(typeof this.ws!=="undefined"){this.ws.close()}};WS.prototype.uri=function(){var query=this.query||{};var schema=this.secure?"wss":"ws";var port="";if(this.port&&("wss"==schema&&this.port!=443||"ws"==schema&&this.port!=80)){port=":"+this.port}if(this.timestampRequests){query[this.timestampParam]=yeast()}if(!this.supportsBinary){query.b64=1}query=parseqs.encode(query);if(query.length){query="?"+query}var ipv6=this.hostname.indexOf(":")!==-1;return schema+"://"+(ipv6?"["+this.hostname+"]":this.hostname)+port+this.path+query};WS.prototype.check=function(){return!!WebSocket&&!("__initialize"in WebSocket&&this.name===WS.prototype.name)}}).call(this,typeof self!=="undefined"?self:typeof window!=="undefined"?window:typeof global!=="undefined"?global:{})},{"../transport":4,"component-inherit":16,debug:17,"engine.io-parser":19,parseqs:27,ws:undefined,yeast:30}],10:[function(_dereq_,module,exports){var hasCORS=_dereq_("has-cors");module.exports=function(opts){var xdomain=opts.xdomain;var xscheme=opts.xscheme;var enablesXDR=opts.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!xdomain||hasCORS)){return new XMLHttpRequest}}catch(e){}try{if("undefined"!=typeof XDomainRequest&&!xscheme&&enablesXDR){return new XDomainRequest}}catch(e){}if(!xdomain){try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}}},{"has-cors":22}],11:[function(_dereq_,module,exports){module.exports=after;function after(count,callback,err_cb){var bail=false;err_cb=err_cb||noop;proxy.count=count;return count===0?callback():proxy;function proxy(err,result){if(proxy.count<=0){throw new Error("after called too many times")}--proxy.count;if(err){bail=true;callback(err);callback=err_cb}else if(proxy.count===0&&!bail){callback(null,result)}}}function noop(){}},{}],12:[function(_dereq_,module,exports){module.exports=function(arraybuffer,start,end){var bytes=arraybuffer.byteLength;start=start||0;end=end||bytes;if(arraybuffer.slice){return arraybuffer.slice(start,end)}if(start<0){start+=bytes}if(end<0){end+=bytes}if(end>bytes){end=bytes}if(start>=bytes||start>=end||bytes===0){return new ArrayBuffer(0)}var abv=new Uint8Array(arraybuffer);var result=new Uint8Array(end-start);for(var i=start,ii=0;i<end;i++,ii++){result[ii]=abv[i]}return result.buffer}},{}],13:[function(_dereq_,module,exports){(function(chars){"use strict";exports.encode=function(arraybuffer){var bytes=new Uint8Array(arraybuffer),i,len=bytes.length,base64="";for(i=0;i<len;i+=3){base64+=chars[bytes[i]>>2];
base64+=chars[(bytes[i]&3)<<4|bytes[i+1]>>4];base64+=chars[(bytes[i+1]&15)<<2|bytes[i+2]>>6];base64+=chars[bytes[i+2]&63]}if(len%3===2){base64=base64.substring(0,base64.length-1)+"="}else if(len%3===1){base64=base64.substring(0,base64.length-2)+"=="}return base64};exports.decode=function(base64){var bufferLength=base64.length*.75,len=base64.length,i,p=0,encoded1,encoded2,encoded3,encoded4;if(base64[base64.length-1]==="="){bufferLength--;if(base64[base64.length-2]==="="){bufferLength--}}var arraybuffer=new ArrayBuffer(bufferLength),bytes=new Uint8Array(arraybuffer);for(i=0;i<len;i+=4){encoded1=chars.indexOf(base64[i]);encoded2=chars.indexOf(base64[i+1]);encoded3=chars.indexOf(base64[i+2]);encoded4=chars.indexOf(base64[i+3]);bytes[p++]=encoded1<<2|encoded2>>4;bytes[p++]=(encoded2&15)<<4|encoded3>>2;bytes[p++]=(encoded3&3)<<6|encoded4&63}return arraybuffer}})("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},{}],14:[function(_dereq_,module,exports){(function(global){var BlobBuilder=global.BlobBuilder||global.WebKitBlobBuilder||global.MSBlobBuilder||global.MozBlobBuilder;var blobSupported=function(){try{var a=new Blob(["hi"]);return a.size===2}catch(e){return false}}();var blobSupportsArrayBufferView=blobSupported&&function(){try{var b=new Blob([new Uint8Array([1,2])]);return b.size===2}catch(e){return false}}();var blobBuilderSupported=BlobBuilder&&BlobBuilder.prototype.append&&BlobBuilder.prototype.getBlob;function mapArrayBufferViews(ary){for(var i=0;i<ary.length;i++){var chunk=ary[i];if(chunk.buffer instanceof ArrayBuffer){var buf=chunk.buffer;if(chunk.byteLength!==buf.byteLength){var copy=new Uint8Array(chunk.byteLength);copy.set(new Uint8Array(buf,chunk.byteOffset,chunk.byteLength));buf=copy.buffer}ary[i]=buf}}}function BlobBuilderConstructor(ary,options){options=options||{};var bb=new BlobBuilder;mapArrayBufferViews(ary);for(var i=0;i<ary.length;i++){bb.append(ary[i])}return options.type?bb.getBlob(options.type):bb.getBlob()}function BlobConstructor(ary,options){mapArrayBufferViews(ary);return new Blob(ary,options||{})}module.exports=function(){if(blobSupported){return blobSupportsArrayBufferView?global.Blob:BlobConstructor}else if(blobBuilderSupported){return BlobBuilderConstructor}else{return undefined}}()}).call(this,typeof self!=="undefined"?self:typeof window!=="undefined"?window:typeof global!=="undefined"?global:{})},{}],15:[function(_dereq_,module,exports){module.exports=Emitter;function Emitter(obj){if(obj)return mixin(obj)}function mixin(obj){for(var key in Emitter.prototype){obj[key]=Emitter.prototype[key]}return obj}Emitter.prototype.on=Emitter.prototype.addEventListener=function(event,fn){this._callbacks=this._callbacks||{};(this._callbacks[event]=this._callbacks[event]||[]).push(fn);return this};Emitter.prototype.once=function(event,fn){var self=this;this._callbacks=this._callbacks||{};function on(){self.off(event,on);fn.apply(this,arguments)}on.fn=fn;this.on(event,on);return this};Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(event,fn){this._callbacks=this._callbacks||{};if(0==arguments.length){this._callbacks={};return this}var callbacks=this._callbacks[event];if(!callbacks)return this;if(1==arguments.length){delete this._callbacks[event];return this}var cb;for(var i=0;i<callbacks.length;i++){cb=callbacks[i];if(cb===fn||cb.fn===fn){callbacks.splice(i,1);break}}return this};Emitter.prototype.emit=function(event){this._callbacks=this._callbacks||{};var args=[].slice.call(arguments,1),callbacks=this._callbacks[event];if(callbacks){callbacks=callbacks.slice(0);for(var i=0,len=callbacks.length;i<len;++i){callbacks[i].apply(this,args)}}return this};Emitter.prototype.listeners=function(event){this._callbacks=this._callbacks||{};return this._callbacks[event]||[]};Emitter.prototype.hasListeners=function(event){return!!this.listeners(event).length}},{}],16:[function(_dereq_,module,exports){module.exports=function(a,b){var fn=function(){};fn.prototype=b.prototype;a.prototype=new fn;a.prototype.constructor=a}},{}],17:[function(_dereq_,module,exports){exports=module.exports=_dereq_("./debug");exports.log=log;exports.formatArgs=formatArgs;exports.save=save;exports.load=load;exports.useColors=useColors;exports.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:localstorage();exports.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function useColors(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}exports.formatters.j=function(v){return JSON.stringify(v)};function formatArgs(){var args=arguments;var useColors=this.useColors;args[0]=(useColors?"%c":"")+this.namespace+(useColors?" %c":" ")+args[0]+(useColors?"%c ":" ")+"+"+exports.humanize(this.diff);if(!useColors)return args;var c="color: "+this.color;args=[args[0],c,"color: inherit"].concat(Array.prototype.slice.call(args,1));var index=0;var lastC=0;args[0].replace(/%[a-z%]/g,function(match){if("%%"===match)return;index++;if("%c"===match){lastC=index}});args.splice(lastC,0,c);return args}function log(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function save(namespaces){try{if(null==namespaces){exports.storage.removeItem("debug")}else{exports.storage.debug=namespaces}}catch(e){}}function load(){var r;try{r=exports.storage.debug}catch(e){}return r}exports.enable(load());function localstorage(){try{return window.localStorage}catch(e){}}},{"./debug":18}],18:[function(_dereq_,module,exports){exports=module.exports=debug;exports.coerce=coerce;exports.disable=disable;exports.enable=enable;exports.enabled=enabled;exports.humanize=_dereq_("ms");exports.names=[];exports.skips=[];exports.formatters={};var prevColor=0;var prevTime;function selectColor(){return exports.colors[prevColor++%exports.colors.length]}function debug(namespace){function disabled(){}disabled.enabled=false;function enabled(){var self=enabled;var curr=+new Date;var ms=curr-(prevTime||curr);self.diff=ms;self.prev=prevTime;self.curr=curr;prevTime=curr;if(null==self.useColors)self.useColors=exports.useColors();if(null==self.color&&self.useColors)self.color=selectColor();var args=Array.prototype.slice.call(arguments);args[0]=exports.coerce(args[0]);if("string"!==typeof args[0]){args=["%o"].concat(args)}var index=0;args[0]=args[0].replace(/%([a-z%])/g,function(match,format){if(match==="%%")return match;index++;var formatter=exports.formatters[format];if("function"===typeof formatter){var val=args[index];match=formatter.call(self,val);args.splice(index,1);index--}return match});if("function"===typeof exports.formatArgs){args=exports.formatArgs.apply(self,args)}var logFn=enabled.log||exports.log||console.log.bind(console);logFn.apply(self,args)}enabled.enabled=true;var fn=exports.enabled(namespace)?enabled:disabled;fn.namespace=namespace;return fn}function enable(namespaces){exports.save(namespaces);var split=(namespaces||"").split(/[\s,]+/);var len=split.length;for(var i=0;i<len;i++){if(!split[i])continue;namespaces=split[i].replace(/\*/g,".*?");if(namespaces[0]==="-"){exports.skips.push(new RegExp("^"+namespaces.substr(1)+"$"))}else{exports.names.push(new RegExp("^"+namespaces+"$"))}}}function disable(){exports.enable("")}function enabled(name){var i,len;for(i=0,len=exports.skips.length;i<len;i++){if(exports.skips[i].test(name)){return false}}for(i=0,len=exports.names.length;i<len;i++){if(exports.names[i].test(name)){return true}}return false}function coerce(val){if(val instanceof Error)return val.stack||val.message;return val}},{ms:25}],19:[function(_dereq_,module,exports){(function(global){var keys=_dereq_("./keys");var hasBinary=_dereq_("has-binary");var sliceBuffer=_dereq_("arraybuffer.slice");var base64encoder=_dereq_("base64-arraybuffer");var after=_dereq_("after");var utf8=_dereq_("utf8");var isAndroid=navigator.userAgent.match(/Android/i);var isPhantomJS=/PhantomJS/i.test(navigator.userAgent);var dontSendBlobs=isAndroid||isPhantomJS;exports.protocol=3;var packets=exports.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6};var packetslist=keys(packets);var err={type:"error",data:"parser error"};var Blob=_dereq_("blob");exports.encodePacket=function(packet,supportsBinary,utf8encode,callback){if("function"==typeof supportsBinary){callback=supportsBinary;supportsBinary=false}if("function"==typeof utf8encode){callback=utf8encode;utf8encode=null}var data=packet.data===undefined?undefined:packet.data.buffer||packet.data;if(global.ArrayBuffer&&data instanceof ArrayBuffer){return encodeArrayBuffer(packet,supportsBinary,callback)}else if(Blob&&data instanceof global.Blob){return encodeBlob(packet,supportsBinary,callback)}if(data&&data.base64){return encodeBase64Object(packet,callback)}var encoded=packets[packet.type];if(undefined!==packet.data){encoded+=utf8encode?utf8.encode(String(packet.data)):String(packet.data)}return callback(""+encoded)};function encodeBase64Object(packet,callback){var message="b"+exports.packets[packet.type]+packet.data.data;return callback(message)}function encodeArrayBuffer(packet,supportsBinary,callback){if(!supportsBinary){return exports.encodeBase64Packet(packet,callback)}var data=packet.data;var contentArray=new Uint8Array(data);var resultBuffer=new Uint8Array(1+data.byteLength);resultBuffer[0]=packets[packet.type];for(var i=0;i<contentArray.length;i++){resultBuffer[i+1]=contentArray[i]}return callback(resultBuffer.buffer)}function encodeBlobAsArrayBuffer(packet,supportsBinary,callback){if(!supportsBinary){return exports.encodeBase64Packet(packet,callback)}var fr=new FileReader;fr.onload=function(){packet.data=fr.result;exports.encodePacket(packet,supportsBinary,true,callback)};return fr.readAsArrayBuffer(packet.data)}function encodeBlob(packet,supportsBinary,callback){if(!supportsBinary){return exports.encodeBase64Packet(packet,callback)}if(dontSendBlobs){return encodeBlobAsArrayBuffer(packet,supportsBinary,callback)}var length=new Uint8Array(1);length[0]=packets[packet.type];var blob=new Blob([length.buffer,packet.data]);return callback(blob)}exports.encodeBase64Packet=function(packet,callback){var message="b"+exports.packets[packet.type];if(Blob&&packet.data instanceof global.Blob){var fr=new FileReader;fr.onload=function(){var b64=fr.result.split(",")[1];callback(message+b64)};return fr.readAsDataURL(packet.data)}var b64data;try{b64data=String.fromCharCode.apply(null,new Uint8Array(packet.data))}catch(e){var typed=new Uint8Array(packet.data);var basic=new Array(typed.length);for(var i=0;i<typed.length;i++){basic[i]=typed[i]}b64data=String.fromCharCode.apply(null,basic)}message+=global.btoa(b64data);return callback(message)};exports.decodePacket=function(data,binaryType,utf8decode){if(typeof data=="string"||data===undefined){if(data.charAt(0)=="b"){return exports.decodeBase64Packet(data.substr(1),binaryType)}if(utf8decode){try{data=utf8.decode(data)}catch(e){return err}}var type=data.charAt(0);if(Number(type)!=type||!packetslist[type]){return err}if(data.length>1){return{type:packetslist[type],data:data.substring(1)}}else{return{type:packetslist[type]}}}var asArray=new Uint8Array(data);var type=asArray[0];var rest=sliceBuffer(data,1);if(Blob&&binaryType==="blob"){rest=new Blob([rest])}return{type:packetslist[type],data:rest}};exports.decodeBase64Packet=function(msg,binaryType){var type=packetslist[msg.charAt(0)];if(!global.ArrayBuffer){return{type:type,data:{base64:true,data:msg.substr(1)}}}var data=base64encoder.decode(msg.substr(1));if(binaryType==="blob"&&Blob){data=new Blob([data])}return{type:type,data:data}};exports.encodePayload=function(packets,supportsBinary,callback){if(typeof supportsBinary=="function"){callback=supportsBinary;supportsBinary=null}var isBinary=hasBinary(packets);if(supportsBinary&&isBinary){if(Blob&&!dontSendBlobs){return exports.encodePayloadAsBlob(packets,callback)}return exports.encodePayloadAsArrayBuffer(packets,callback)}if(!packets.length){return callback("0:")}function setLengthHeader(message){return message.length+":"+message}function encodeOne(packet,doneCallback){exports.encodePacket(packet,!isBinary?false:supportsBinary,true,function(message){doneCallback(null,setLengthHeader(message))})}map(packets,encodeOne,function(err,results){return callback(results.join(""))})};function map(ary,each,done){var result=new Array(ary.length);var next=after(ary.length,done);var eachWithIndex=function(i,el,cb){each(el,function(error,msg){result[i]=msg;cb(error,result)})};for(var i=0;i<ary.length;i++){eachWithIndex(i,ary[i],next)}}exports.decodePayload=function(data,binaryType,callback){if(typeof data!="string"){return exports.decodePayloadAsBinary(data,binaryType,callback)}if(typeof binaryType==="function"){callback=binaryType;binaryType=null}var packet;if(data==""){return callback(err,0,1)}var length="",n,msg;for(var i=0,l=data.length;i<l;i++){var chr=data.charAt(i);if(":"!=chr){length+=chr}else{if(""==length||length!=(n=Number(length))){return callback(err,0,1)}msg=data.substr(i+1,n);if(length!=msg.length){return callback(err,0,1)}if(msg.length){packet=exports.decodePacket(msg,binaryType,true);if(err.type==packet.type&&err.data==packet.data){return callback(err,0,1)}var ret=callback(packet,i+n,l);if(false===ret)return}i+=n;length=""}}if(length!=""){return callback(err,0,1)}};exports.encodePayloadAsArrayBuffer=function(packets,callback){if(!packets.length){return callback(new ArrayBuffer(0))}function encodeOne(packet,doneCallback){exports.encodePacket(packet,true,true,function(data){return doneCallback(null,data)})}map(packets,encodeOne,function(err,encodedPackets){var totalLength=encodedPackets.reduce(function(acc,p){var len;if(typeof p==="string"){len=p.length}else{len=p.byteLength}return acc+len.toString().length+len+2},0);var resultArray=new Uint8Array(totalLength);var bufferIndex=0;encodedPackets.forEach(function(p){var isString=typeof p==="string";var ab=p;if(isString){var view=new Uint8Array(p.length);for(var i=0;i<p.length;i++){view[i]=p.charCodeAt(i)}ab=view.buffer}if(isString){resultArray[bufferIndex++]=0}else{resultArray[bufferIndex++]=1}var lenStr=ab.byteLength.toString();for(var i=0;i<lenStr.length;i++){resultArray[bufferIndex++]=parseInt(lenStr[i])}resultArray[bufferIndex++]=255;var view=new Uint8Array(ab);for(var i=0;i<view.length;i++){resultArray[bufferIndex++]=view[i]}});return callback(resultArray.buffer)})};exports.encodePayloadAsBlob=function(packets,callback){function encodeOne(packet,doneCallback){exports.encodePacket(packet,true,true,function(encoded){var binaryIdentifier=new Uint8Array(1);binaryIdentifier[0]=1;if(typeof encoded==="string"){var view=new Uint8Array(encoded.length);for(var i=0;i<encoded.length;i++){view[i]=encoded.charCodeAt(i)}encoded=view.buffer;binaryIdentifier[0]=0}var len=encoded instanceof ArrayBuffer?encoded.byteLength:encoded.size;var lenStr=len.toString();var lengthAry=new Uint8Array(lenStr.length+1);for(var i=0;i<lenStr.length;i++){lengthAry[i]=parseInt(lenStr[i])}lengthAry[lenStr.length]=255;if(Blob){var blob=new Blob([binaryIdentifier.buffer,lengthAry.buffer,encoded]);doneCallback(null,blob)}})}map(packets,encodeOne,function(err,results){return callback(new Blob(results))})};exports.decodePayloadAsBinary=function(data,binaryType,callback){if(typeof binaryType==="function"){callback=binaryType;binaryType=null}var bufferTail=data;var buffers=[];var numberTooLong=false;while(bufferTail.byteLength>0){var tailArray=new Uint8Array(bufferTail);var isString=tailArray[0]===0;var msgLength="";for(var i=1;;i++){if(tailArray[i]==255)break;if(msgLength.length>310){numberTooLong=true;break}msgLength+=tailArray[i]}if(numberTooLong)return callback(err,0,1);bufferTail=sliceBuffer(bufferTail,2+msgLength.length);msgLength=parseInt(msgLength);var msg=sliceBuffer(bufferTail,0,msgLength);if(isString){try{msg=String.fromCharCode.apply(null,new Uint8Array(msg))}catch(e){var typed=new Uint8Array(msg);msg="";for(var i=0;i<typed.length;i++){msg+=String.fromCharCode(typed[i])}}}buffers.push(msg);bufferTail=sliceBuffer(bufferTail,msgLength)}var total=buffers.length;buffers.forEach(function(buffer,i){callback(exports.decodePacket(buffer,binaryType,true),i,total)})}}).call(this,typeof self!=="undefined"?self:typeof window!=="undefined"?window:typeof global!=="undefined"?global:{})},{"./keys":20,after:11,"arraybuffer.slice":12,"base64-arraybuffer":13,blob:14,"has-binary":21,utf8:29}],20:[function(_dereq_,module,exports){module.exports=Object.keys||function keys(obj){var arr=[];var has=Object.prototype.hasOwnProperty;for(var i in obj){if(has.call(obj,i)){arr.push(i)}}return arr}},{}],21:[function(_dereq_,module,exports){(function(global){var isArray=_dereq_("isarray");module.exports=hasBinary;function hasBinary(data){function _hasBinary(obj){if(!obj)return false;if(global.Buffer&&global.Buffer.isBuffer(obj)||global.ArrayBuffer&&obj instanceof ArrayBuffer||global.Blob&&obj instanceof Blob||global.File&&obj instanceof File){return true}if(isArray(obj)){for(var i=0;i<obj.length;i++){if(_hasBinary(obj[i])){return true}}}else if(obj&&"object"==typeof obj){if(obj.toJSON){obj=obj.toJSON()}for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)&&_hasBinary(obj[key])){return true}}}return false}return _hasBinary(data)}}).call(this,typeof self!=="undefined"?self:typeof window!=="undefined"?window:typeof global!=="undefined"?global:{})},{isarray:24}],22:[function(_dereq_,module,exports){try{module.exports=typeof XMLHttpRequest!=="undefined"&&"withCredentials"in new XMLHttpRequest}catch(err){module.exports=false}},{}],23:[function(_dereq_,module,exports){var indexOf=[].indexOf;module.exports=function(arr,obj){if(indexOf)return arr.indexOf(obj);for(var i=0;i<arr.length;++i){if(arr[i]===obj)return i}return-1}},{}],24:[function(_dereq_,module,exports){module.exports=Array.isArray||function(arr){return Object.prototype.toString.call(arr)=="[object Array]"}},{}],25:[function(_dereq_,module,exports){var s=1e3;var m=s*60;var h=m*60;var d=h*24;var y=d*365.25;module.exports=function(val,options){options=options||{};if("string"==typeof val)return parse(val);return options.long?long(val):short(val)};function parse(str){str=""+str;if(str.length>1e4)return;var match=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(str);if(!match)return;var n=parseFloat(match[1]);var type=(match[2]||"ms").toLowerCase();switch(type){case"years":case"year":case"yrs":case"yr":case"y":return n*y;case"days":case"day":case"d":return n*d;case"hours":case"hour":case"hrs":case"hr":case"h":return n*h;case"minutes":case"minute":case"mins":case"min":case"m":return n*m;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}function short(ms){if(ms>=d)return Math.round(ms/d)+"d";if(ms>=h)return Math.round(ms/h)+"h";if(ms>=m)return Math.round(ms/m)+"m";if(ms>=s)return Math.round(ms/s)+"s";return ms+"ms"}function long(ms){return plural(ms,d,"day")||plural(ms,h,"hour")||plural(ms,m,"minute")||plural(ms,s,"second")||ms+" ms"}function plural(ms,n,name){if(ms<n)return;if(ms<n*1.5)return Math.floor(ms/n)+" "+name;return Math.ceil(ms/n)+" "+name+"s"}},{}],26:[function(_dereq_,module,exports){(function(global){var rvalidchars=/^[\],:{}\s]*$/;var rvalidescape=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g;var rvalidtokens=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g;var rvalidbraces=/(?:^|:|,)(?:\s*\[)+/g;var rtrimLeft=/^\s+/;var rtrimRight=/\s+$/;module.exports=function parsejson(data){if("string"!=typeof data||!data){return null}data=data.replace(rtrimLeft,"").replace(rtrimRight,"");if(global.JSON&&JSON.parse){return JSON.parse(data)}if(rvalidchars.test(data.replace(rvalidescape,"@").replace(rvalidtokens,"]").replace(rvalidbraces,""))){return new Function("return "+data)()}}}).call(this,typeof self!=="undefined"?self:typeof window!=="undefined"?window:typeof global!=="undefined"?global:{})},{}],27:[function(_dereq_,module,exports){exports.encode=function(obj){var str="";for(var i in obj){if(obj.hasOwnProperty(i)){if(str.length)str+="&";str+=encodeURIComponent(i)+"="+encodeURIComponent(obj[i])}}return str};exports.decode=function(qs){var qry={};var pairs=qs.split("&");for(var i=0,l=pairs.length;i<l;i++){var pair=pairs[i].split("=");qry[decodeURIComponent(pair[0])]=decodeURIComponent(pair[1])}return qry}},{}],28:[function(_dereq_,module,exports){var re=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/;var parts=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];module.exports=function parseuri(str){var src=str,b=str.indexOf("["),e=str.indexOf("]");if(b!=-1&&e!=-1){str=str.substring(0,b)+str.substring(b,e).replace(/:/g,";")+str.substring(e,str.length)}var m=re.exec(str||""),uri={},i=14;while(i--){uri[parts[i]]=m[i]||""}if(b!=-1&&e!=-1){uri.source=src;uri.host=uri.host.substring(1,uri.host.length-1).replace(/;/g,":");uri.authority=uri.authority.replace("[","").replace("]","").replace(/;/g,":");uri.ipv6uri=true}return uri}},{}],29:[function(_dereq_,module,exports){(function(global){(function(root){var freeExports=typeof exports=="object"&&exports;var freeModule=typeof module=="object"&&module&&module.exports==freeExports&&module;var freeGlobal=typeof global=="object"&&global;if(freeGlobal.global===freeGlobal||freeGlobal.window===freeGlobal){root=freeGlobal}var stringFromCharCode=String.fromCharCode;function ucs2decode(string){var output=[];var counter=0;var length=string.length;var value;var extra;while(counter<length){value=string.charCodeAt(counter++);if(value>=55296&&value<=56319&&counter<length){extra=string.charCodeAt(counter++);if((extra&64512)==56320){output.push(((value&1023)<<10)+(extra&1023)+65536)}else{output.push(value);counter--}}else{output.push(value)}}return output}function ucs2encode(array){var length=array.length;var index=-1;var value;var output="";while(++index<length){value=array[index];if(value>65535){value-=65536;output+=stringFromCharCode(value>>>10&1023|55296);value=56320|value&1023}output+=stringFromCharCode(value)}return output}function checkScalarValue(codePoint){if(codePoint>=55296&&codePoint<=57343){throw Error("Lone surrogate U+"+codePoint.toString(16).toUpperCase()+" is not a scalar value")}}function createByte(codePoint,shift){return stringFromCharCode(codePoint>>shift&63|128)}function encodeCodePoint(codePoint){if((codePoint&4294967168)==0){return stringFromCharCode(codePoint)}var symbol="";if((codePoint&4294965248)==0){symbol=stringFromCharCode(codePoint>>6&31|192)}else if((codePoint&4294901760)==0){checkScalarValue(codePoint);symbol=stringFromCharCode(codePoint>>12&15|224);symbol+=createByte(codePoint,6)}else if((codePoint&4292870144)==0){symbol=stringFromCharCode(codePoint>>18&7|240);symbol+=createByte(codePoint,12);symbol+=createByte(codePoint,6)}symbol+=stringFromCharCode(codePoint&63|128);return symbol}function utf8encode(string){var codePoints=ucs2decode(string);var length=codePoints.length;var index=-1;var codePoint;var byteString="";while(++index<length){codePoint=codePoints[index];byteString+=encodeCodePoint(codePoint)}return byteString}function readContinuationByte(){if(byteIndex>=byteCount){throw Error("Invalid byte index")}var continuationByte=byteArray[byteIndex]&255;byteIndex++;if((continuationByte&192)==128){return continuationByte&63}throw Error("Invalid continuation byte")}function decodeSymbol(){var byte1;var byte2;var byte3;var byte4;var codePoint;if(byteIndex>byteCount){throw Error("Invalid byte index")}if(byteIndex==byteCount){return false}byte1=byteArray[byteIndex]&255;byteIndex++;if((byte1&128)==0){return byte1}if((byte1&224)==192){var byte2=readContinuationByte();codePoint=(byte1&31)<<6|byte2;if(codePoint>=128){return codePoint}else{throw Error("Invalid continuation byte")}}if((byte1&240)==224){byte2=readContinuationByte();byte3=readContinuationByte();codePoint=(byte1&15)<<12|byte2<<6|byte3;if(codePoint>=2048){checkScalarValue(codePoint);return codePoint}else{throw Error("Invalid continuation byte")}}if((byte1&248)==240){byte2=readContinuationByte();byte3=readContinuationByte();byte4=readContinuationByte();codePoint=(byte1&15)<<18|byte2<<12|byte3<<6|byte4;if(codePoint>=65536&&codePoint<=1114111){return codePoint}}throw Error("Invalid UTF-8 detected")}var byteArray;var byteCount;var byteIndex;function utf8decode(byteString){byteArray=ucs2decode(byteString);byteCount=byteArray.length;byteIndex=0;var codePoints=[];var tmp;while((tmp=decodeSymbol())!==false){codePoints.push(tmp)}return ucs2encode(codePoints)}var utf8={version:"2.0.0",encode:utf8encode,decode:utf8decode};if(typeof define=="function"&&typeof define.amd=="object"&&define.amd){define(function(){return utf8})}else if(freeExports&&!freeExports.nodeType){if(freeModule){freeModule.exports=utf8}else{var object={};var hasOwnProperty=object.hasOwnProperty;for(var key in utf8){hasOwnProperty.call(utf8,key)&&(freeExports[key]=utf8[key])}}}else{root.utf8=utf8}})(this)}).call(this,typeof self!=="undefined"?self:typeof window!=="undefined"?window:typeof global!=="undefined"?global:{})},{}],30:[function(_dereq_,module,exports){"use strict";var alphabet="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),length=64,map={},seed=0,i=0,prev;function encode(num){var encoded="";do{encoded=alphabet[num%length]+encoded;num=Math.floor(num/length)}while(num>0);return encoded}function decode(str){var decoded=0;for(i=0;i<str.length;i++){decoded=decoded*length+map[str.charAt(i)]}return decoded}function yeast(){var now=encode(+new Date);if(now!==prev)return seed=0,prev=now;return now+"."+encode(seed++)}for(;i<length;i++)map[alphabet[i]]=i;yeast.encode=encode;yeast.decode=decode;module.exports=yeast},{}],31:[function(_dereq_,module,exports){var url=_dereq_("./url");var parser=_dereq_("socket.io-parser");var Manager=_dereq_("./manager");var debug=_dereq_("debug")("socket.io-client");module.exports=exports=lookup;var cache=exports.managers={};function lookup(uri,opts){if(typeof uri=="object"){opts=uri;uri=undefined}opts=opts||{};var parsed=url(uri);var source=parsed.source;var id=parsed.id;var path=parsed.path;var sameNamespace=cache[id]&&path in cache[id].nsps;var newConnection=opts.forceNew||opts["force new connection"]||false===opts.multiplex||sameNamespace;var io;if(newConnection){debug("ignoring socket cache for %s",source);io=Manager(source,opts)}else{if(!cache[id]){debug("new io instance for %s",source);cache[id]=Manager(source,opts)}io=cache[id]}return io.socket(parsed.path)}exports.protocol=parser.protocol;exports.connect=lookup;exports.Manager=_dereq_("./manager");exports.Socket=_dereq_("./socket")},{"./manager":32,"./socket":34,"./url":35,debug:39,"socket.io-parser":47}],32:[function(_dereq_,module,exports){var eio=_dereq_("engine.io-client");var Socket=_dereq_("./socket");var Emitter=_dereq_("component-emitter");var parser=_dereq_("socket.io-parser");var on=_dereq_("./on");var bind=_dereq_("component-bind");var debug=_dereq_("debug")("socket.io-client:manager");var indexOf=_dereq_("indexof");var Backoff=_dereq_("backo2");var has=Object.prototype.hasOwnProperty;module.exports=Manager;function Manager(uri,opts){if(!(this instanceof Manager))return new Manager(uri,opts);if(uri&&"object"==typeof uri){opts=uri;uri=undefined}opts=opts||{};opts.path=opts.path||"/socket.io";this.nsps={};this.subs=[];this.opts=opts;this.reconnection(opts.reconnection!==false);this.reconnectionAttempts(opts.reconnectionAttempts||Infinity);this.reconnectionDelay(opts.reconnectionDelay||1e3);this.reconnectionDelayMax(opts.reconnectionDelayMax||5e3);this.randomizationFactor(opts.randomizationFactor||.5);this.backoff=new Backoff({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()});this.timeout(null==opts.timeout?2e4:opts.timeout);this.readyState="closed";this.uri=uri;this.connecting=[];this.lastPing=null;this.encoding=false;this.packetBuffer=[];this.encoder=new parser.Encoder;this.decoder=new parser.Decoder;this.autoConnect=opts.autoConnect!==false;if(this.autoConnect)this.open()}Manager.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var nsp in this.nsps){if(has.call(this.nsps,nsp)){this.nsps[nsp].emit.apply(this.nsps[nsp],arguments)}}};Manager.prototype.updateSocketIds=function(){for(var nsp in this.nsps){if(has.call(this.nsps,nsp)){this.nsps[nsp].id=this.engine.id}}};Emitter(Manager.prototype);Manager.prototype.reconnection=function(v){if(!arguments.length)return this._reconnection;this._reconnection=!!v;return this};Manager.prototype.reconnectionAttempts=function(v){if(!arguments.length)return this._reconnectionAttempts;this._reconnectionAttempts=v;return this};Manager.prototype.reconnectionDelay=function(v){if(!arguments.length)return this._reconnectionDelay;this._reconnectionDelay=v;this.backoff&&this.backoff.setMin(v);return this};Manager.prototype.randomizationFactor=function(v){if(!arguments.length)return this._randomizationFactor;this._randomizationFactor=v;this.backoff&&this.backoff.setJitter(v);return this};Manager.prototype.reconnectionDelayMax=function(v){if(!arguments.length)return this._reconnectionDelayMax;this._reconnectionDelayMax=v;this.backoff&&this.backoff.setMax(v);return this};Manager.prototype.timeout=function(v){if(!arguments.length)return this._timeout;this._timeout=v;return this};Manager.prototype.maybeReconnectOnOpen=function(){if(!this.reconnecting&&this._reconnection&&this.backoff.attempts===0){this.reconnect()}};Manager.prototype.open=Manager.prototype.connect=function(fn){debug("readyState %s",this.readyState);if(~this.readyState.indexOf("open"))return this;debug("opening %s",this.uri);this.engine=eio(this.uri,this.opts);var socket=this.engine;var self=this;this.readyState="opening";this.skipReconnect=false;var openSub=on(socket,"open",function(){self.onopen();fn&&fn()});var errorSub=on(socket,"error",function(data){debug("connect_error");self.cleanup();self.readyState="closed";self.emitAll("connect_error",data);if(fn){var err=new Error("Connection error");err.data=data;fn(err)}else{self.maybeReconnectOnOpen()}});if(false!==this._timeout){var timeout=this._timeout;debug("connect attempt will timeout after %d",timeout);var timer=setTimeout(function(){debug("connect attempt timed out after %d",timeout);openSub.destroy();socket.close();socket.emit("error","timeout");self.emitAll("connect_timeout",timeout)},timeout);this.subs.push({destroy:function(){clearTimeout(timer)}})}this.subs.push(openSub);this.subs.push(errorSub);return this};Manager.prototype.onopen=function(){debug("open");this.cleanup();this.readyState="open";this.emit("open");var socket=this.engine;this.subs.push(on(socket,"data",bind(this,"ondata")));this.subs.push(on(socket,"ping",bind(this,"onping")));this.subs.push(on(socket,"pong",bind(this,"onpong")));this.subs.push(on(socket,"error",bind(this,"onerror")));this.subs.push(on(socket,"close",bind(this,"onclose")));this.subs.push(on(this.decoder,"decoded",bind(this,"ondecoded")))};Manager.prototype.onping=function(){this.lastPing=new Date;this.emitAll("ping")};Manager.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)};Manager.prototype.ondata=function(data){this.decoder.add(data)};Manager.prototype.ondecoded=function(packet){this.emit("packet",packet)};Manager.prototype.onerror=function(err){debug("error",err);this.emitAll("error",err)};Manager.prototype.socket=function(nsp){var socket=this.nsps[nsp];if(!socket){socket=new Socket(this,nsp);this.nsps[nsp]=socket;var self=this;socket.on("connecting",onConnecting);
socket.on("connect",function(){socket.id=self.engine.id});if(this.autoConnect){onConnecting()}}function onConnecting(){if(!~indexOf(self.connecting,socket)){self.connecting.push(socket)}}return socket};Manager.prototype.destroy=function(socket){var index=indexOf(this.connecting,socket);if(~index)this.connecting.splice(index,1);if(this.connecting.length)return;this.close()};Manager.prototype.packet=function(packet){debug("writing packet %j",packet);var self=this;if(!self.encoding){self.encoding=true;this.encoder.encode(packet,function(encodedPackets){for(var i=0;i<encodedPackets.length;i++){self.engine.write(encodedPackets[i],packet.options)}self.encoding=false;self.processPacketQueue()})}else{self.packetBuffer.push(packet)}};Manager.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var pack=this.packetBuffer.shift();this.packet(pack)}};Manager.prototype.cleanup=function(){debug("cleanup");var sub;while(sub=this.subs.shift())sub.destroy();this.packetBuffer=[];this.encoding=false;this.lastPing=null;this.decoder.destroy()};Manager.prototype.close=Manager.prototype.disconnect=function(){debug("disconnect");this.skipReconnect=true;this.reconnecting=false;if("opening"==this.readyState){this.cleanup()}this.backoff.reset();this.readyState="closed";if(this.engine)this.engine.close()};Manager.prototype.onclose=function(reason){debug("onclose");this.cleanup();this.backoff.reset();this.readyState="closed";this.emit("close",reason);if(this._reconnection&&!this.skipReconnect){this.reconnect()}};Manager.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var self=this;if(this.backoff.attempts>=this._reconnectionAttempts){debug("reconnect failed");this.backoff.reset();this.emitAll("reconnect_failed");this.reconnecting=false}else{var delay=this.backoff.duration();debug("will wait %dms before reconnect attempt",delay);this.reconnecting=true;var timer=setTimeout(function(){if(self.skipReconnect)return;debug("attempting reconnect");self.emitAll("reconnect_attempt",self.backoff.attempts);self.emitAll("reconnecting",self.backoff.attempts);if(self.skipReconnect)return;self.open(function(err){if(err){debug("reconnect attempt error");self.reconnecting=false;self.reconnect();self.emitAll("reconnect_error",err.data)}else{debug("reconnect success");self.onreconnect()}})},delay);this.subs.push({destroy:function(){clearTimeout(timer)}})}};Manager.prototype.onreconnect=function(){var attempt=this.backoff.attempts;this.reconnecting=false;this.backoff.reset();this.updateSocketIds();this.emitAll("reconnect",attempt)}},{"./on":33,"./socket":34,backo2:36,"component-bind":37,"component-emitter":38,debug:39,"engine.io-client":1,indexof:42,"socket.io-parser":47}],33:[function(_dereq_,module,exports){module.exports=on;function on(obj,ev,fn){obj.on(ev,fn);return{destroy:function(){obj.removeListener(ev,fn)}}}},{}],34:[function(_dereq_,module,exports){var parser=_dereq_("socket.io-parser");var Emitter=_dereq_("component-emitter");var toArray=_dereq_("to-array");var on=_dereq_("./on");var bind=_dereq_("component-bind");var debug=_dereq_("debug")("socket.io-client:socket");var hasBin=_dereq_("has-binary");module.exports=exports=Socket;var events={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1};var emit=Emitter.prototype.emit;function Socket(io,nsp){this.io=io;this.nsp=nsp;this.json=this;this.ids=0;this.acks={};this.receiveBuffer=[];this.sendBuffer=[];this.connected=false;this.disconnected=true;if(this.io.autoConnect)this.open()}Emitter(Socket.prototype);Socket.prototype.subEvents=function(){if(this.subs)return;var io=this.io;this.subs=[on(io,"open",bind(this,"onopen")),on(io,"packet",bind(this,"onpacket")),on(io,"close",bind(this,"onclose"))]};Socket.prototype.open=Socket.prototype.connect=function(){if(this.connected)return this;this.subEvents();this.io.open();if("open"==this.io.readyState)this.onopen();this.emit("connecting");return this};Socket.prototype.send=function(){var args=toArray(arguments);args.unshift("message");this.emit.apply(this,args);return this};Socket.prototype.emit=function(ev){if(events.hasOwnProperty(ev)){emit.apply(this,arguments);return this}var args=toArray(arguments);var parserType=parser.EVENT;if(hasBin(args)){parserType=parser.BINARY_EVENT}var packet={type:parserType,data:args};packet.options={};packet.options.compress=!this.flags||false!==this.flags.compress;if("function"==typeof args[args.length-1]){debug("emitting packet with ack id %d",this.ids);this.acks[this.ids]=args.pop();packet.id=this.ids++}if(this.connected){this.packet(packet)}else{this.sendBuffer.push(packet)}delete this.flags;return this};Socket.prototype.packet=function(packet){packet.nsp=this.nsp;this.io.packet(packet)};Socket.prototype.onopen=function(){debug("transport is open - connecting");if("/"!=this.nsp){this.packet({type:parser.CONNECT})}};Socket.prototype.onclose=function(reason){debug("close (%s)",reason);this.connected=false;this.disconnected=true;delete this.id;this.emit("disconnect",reason)};Socket.prototype.onpacket=function(packet){if(packet.nsp!=this.nsp)return;switch(packet.type){case parser.CONNECT:this.onconnect();break;case parser.EVENT:this.onevent(packet);break;case parser.BINARY_EVENT:this.onevent(packet);break;case parser.ACK:this.onack(packet);break;case parser.BINARY_ACK:this.onack(packet);break;case parser.DISCONNECT:this.ondisconnect();break;case parser.ERROR:this.emit("error",packet.data);break}};Socket.prototype.onevent=function(packet){var args=packet.data||[];debug("emitting event %j",args);if(null!=packet.id){debug("attaching ack callback to event");args.push(this.ack(packet.id))}if(this.connected){emit.apply(this,args)}else{this.receiveBuffer.push(args)}};Socket.prototype.ack=function(id){var self=this;var sent=false;return function(){if(sent)return;sent=true;var args=toArray(arguments);debug("sending ack %j",args);var type=hasBin(args)?parser.BINARY_ACK:parser.ACK;self.packet({type:type,id:id,data:args})}};Socket.prototype.onack=function(packet){var ack=this.acks[packet.id];if("function"==typeof ack){debug("calling ack %s with %j",packet.id,packet.data);ack.apply(this,packet.data);delete this.acks[packet.id]}else{debug("bad ack %s",packet.id)}};Socket.prototype.onconnect=function(){this.connected=true;this.disconnected=false;this.emit("connect");this.emitBuffered()};Socket.prototype.emitBuffered=function(){var i;for(i=0;i<this.receiveBuffer.length;i++){emit.apply(this,this.receiveBuffer[i])}this.receiveBuffer=[];for(i=0;i<this.sendBuffer.length;i++){this.packet(this.sendBuffer[i])}this.sendBuffer=[]};Socket.prototype.ondisconnect=function(){debug("server disconnect (%s)",this.nsp);this.destroy();this.onclose("io server disconnect")};Socket.prototype.destroy=function(){if(this.subs){for(var i=0;i<this.subs.length;i++){this.subs[i].destroy()}this.subs=null}this.io.destroy(this)};Socket.prototype.close=Socket.prototype.disconnect=function(){if(this.connected){debug("performing disconnect (%s)",this.nsp);this.packet({type:parser.DISCONNECT})}this.destroy();if(this.connected){this.onclose("io client disconnect")}return this};Socket.prototype.compress=function(compress){this.flags=this.flags||{};this.flags.compress=compress;return this}},{"./on":33,"component-bind":37,"component-emitter":38,debug:39,"has-binary":41,"socket.io-parser":47,"to-array":51}],35:[function(_dereq_,module,exports){(function(global){var parseuri=_dereq_("parseuri");var debug=_dereq_("debug")("socket.io-client:url");module.exports=url;function url(uri,loc){var obj=uri;var loc=loc||global.location;if(null==uri)uri=loc.protocol+"//"+loc.host;if("string"==typeof uri){if("/"==uri.charAt(0)){if("/"==uri.charAt(1)){uri=loc.protocol+uri}else{uri=loc.host+uri}}if(!/^(https?|wss?):\/\//.test(uri)){debug("protocol-less url %s",uri);if("undefined"!=typeof loc){uri=loc.protocol+"//"+uri}else{uri="https://"+uri}}debug("parse %s",uri);obj=parseuri(uri)}if(!obj.port){if(/^(http|ws)$/.test(obj.protocol)){obj.port="80"}else if(/^(http|ws)s$/.test(obj.protocol)){obj.port="443"}}obj.path=obj.path||"/";var ipv6=obj.host.indexOf(":")!==-1;var host=ipv6?"["+obj.host+"]":obj.host;obj.id=obj.protocol+"://"+host+":"+obj.port;obj.href=obj.protocol+"://"+host+(loc&&loc.port==obj.port?"":":"+obj.port);return obj}}).call(this,typeof self!=="undefined"?self:typeof window!=="undefined"?window:typeof global!=="undefined"?global:{})},{debug:39,parseuri:45}],36:[function(_dereq_,module,exports){module.exports=Backoff;function Backoff(opts){opts=opts||{};this.ms=opts.min||100;this.max=opts.max||1e4;this.factor=opts.factor||2;this.jitter=opts.jitter>0&&opts.jitter<=1?opts.jitter:0;this.attempts=0}Backoff.prototype.duration=function(){var ms=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var rand=Math.random();var deviation=Math.floor(rand*this.jitter*ms);ms=(Math.floor(rand*10)&1)==0?ms-deviation:ms+deviation}return Math.min(ms,this.max)|0};Backoff.prototype.reset=function(){this.attempts=0};Backoff.prototype.setMin=function(min){this.ms=min};Backoff.prototype.setMax=function(max){this.max=max};Backoff.prototype.setJitter=function(jitter){this.jitter=jitter}},{}],37:[function(_dereq_,module,exports){var slice=[].slice;module.exports=function(obj,fn){if("string"==typeof fn)fn=obj[fn];if("function"!=typeof fn)throw new Error("bind() requires a function");var args=slice.call(arguments,2);return function(){return fn.apply(obj,args.concat(slice.call(arguments)))}}},{}],38:[function(_dereq_,module,exports){module.exports=Emitter;function Emitter(obj){if(obj)return mixin(obj)}function mixin(obj){for(var key in Emitter.prototype){obj[key]=Emitter.prototype[key]}return obj}Emitter.prototype.on=Emitter.prototype.addEventListener=function(event,fn){this._callbacks=this._callbacks||{};(this._callbacks["$"+event]=this._callbacks["$"+event]||[]).push(fn);return this};Emitter.prototype.once=function(event,fn){function on(){this.off(event,on);fn.apply(this,arguments)}on.fn=fn;this.on(event,on);return this};Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(event,fn){this._callbacks=this._callbacks||{};if(0==arguments.length){this._callbacks={};return this}var callbacks=this._callbacks["$"+event];if(!callbacks)return this;if(1==arguments.length){delete this._callbacks["$"+event];return this}var cb;for(var i=0;i<callbacks.length;i++){cb=callbacks[i];if(cb===fn||cb.fn===fn){callbacks.splice(i,1);break}}return this};Emitter.prototype.emit=function(event){this._callbacks=this._callbacks||{};var args=[].slice.call(arguments,1),callbacks=this._callbacks["$"+event];if(callbacks){callbacks=callbacks.slice(0);for(var i=0,len=callbacks.length;i<len;++i){callbacks[i].apply(this,args)}}return this};Emitter.prototype.listeners=function(event){this._callbacks=this._callbacks||{};return this._callbacks["$"+event]||[]};Emitter.prototype.hasListeners=function(event){return!!this.listeners(event).length}},{}],39:[function(_dereq_,module,exports){arguments[4][17][0].apply(exports,arguments)},{"./debug":40,dup:17}],40:[function(_dereq_,module,exports){arguments[4][18][0].apply(exports,arguments)},{dup:18,ms:44}],41:[function(_dereq_,module,exports){(function(global){var isArray=_dereq_("isarray");module.exports=hasBinary;function hasBinary(data){function _hasBinary(obj){if(!obj)return false;if(global.Buffer&&global.Buffer.isBuffer&&global.Buffer.isBuffer(obj)||global.ArrayBuffer&&obj instanceof ArrayBuffer||global.Blob&&obj instanceof Blob||global.File&&obj instanceof File){return true}if(isArray(obj)){for(var i=0;i<obj.length;i++){if(_hasBinary(obj[i])){return true}}}else if(obj&&"object"==typeof obj){if(obj.toJSON&&"function"==typeof obj.toJSON){obj=obj.toJSON()}for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)&&_hasBinary(obj[key])){return true}}}return false}return _hasBinary(data)}}).call(this,typeof self!=="undefined"?self:typeof window!=="undefined"?window:typeof global!=="undefined"?global:{})},{isarray:43}],42:[function(_dereq_,module,exports){arguments[4][23][0].apply(exports,arguments)},{dup:23}],43:[function(_dereq_,module,exports){arguments[4][24][0].apply(exports,arguments)},{dup:24}],44:[function(_dereq_,module,exports){arguments[4][25][0].apply(exports,arguments)},{dup:25}],45:[function(_dereq_,module,exports){arguments[4][28][0].apply(exports,arguments)},{dup:28}],46:[function(_dereq_,module,exports){(function(global){var isArray=_dereq_("isarray");var isBuf=_dereq_("./is-buffer");exports.deconstructPacket=function(packet){var buffers=[];var packetData=packet.data;function _deconstructPacket(data){if(!data)return data;if(isBuf(data)){var placeholder={_placeholder:true,num:buffers.length};buffers.push(data);return placeholder}else if(isArray(data)){var newData=new Array(data.length);for(var i=0;i<data.length;i++){newData[i]=_deconstructPacket(data[i])}return newData}else if("object"==typeof data&&!(data instanceof Date)){var newData={};for(var key in data){newData[key]=_deconstructPacket(data[key])}return newData}return data}var pack=packet;pack.data=_deconstructPacket(packetData);pack.attachments=buffers.length;return{packet:pack,buffers:buffers}};exports.reconstructPacket=function(packet,buffers){var curPlaceHolder=0;function _reconstructPacket(data){if(data&&data._placeholder){var buf=buffers[data.num];return buf}else if(isArray(data)){for(var i=0;i<data.length;i++){data[i]=_reconstructPacket(data[i])}return data}else if(data&&"object"==typeof data){for(var key in data){data[key]=_reconstructPacket(data[key])}return data}return data}packet.data=_reconstructPacket(packet.data);packet.attachments=undefined;return packet};exports.removeBlobs=function(data,callback){function _removeBlobs(obj,curKey,containingObject){if(!obj)return obj;if(global.Blob&&obj instanceof Blob||global.File&&obj instanceof File){pendingBlobs++;var fileReader=new FileReader;fileReader.onload=function(){if(containingObject){containingObject[curKey]=this.result}else{bloblessData=this.result}if(!--pendingBlobs){callback(bloblessData)}};fileReader.readAsArrayBuffer(obj)}else if(isArray(obj)){for(var i=0;i<obj.length;i++){_removeBlobs(obj[i],i,obj)}}else if(obj&&"object"==typeof obj&&!isBuf(obj)){for(var key in obj){_removeBlobs(obj[key],key,obj)}}}var pendingBlobs=0;var bloblessData=data;_removeBlobs(bloblessData);if(!pendingBlobs){callback(bloblessData)}}}).call(this,typeof self!=="undefined"?self:typeof window!=="undefined"?window:typeof global!=="undefined"?global:{})},{"./is-buffer":48,isarray:43}],47:[function(_dereq_,module,exports){var debug=_dereq_("debug")("socket.io-parser");var json=_dereq_("json3");var isArray=_dereq_("isarray");var Emitter=_dereq_("component-emitter");var binary=_dereq_("./binary");var isBuf=_dereq_("./is-buffer");exports.protocol=4;exports.types=["CONNECT","DISCONNECT","EVENT","BINARY_EVENT","ACK","BINARY_ACK","ERROR"];exports.CONNECT=0;exports.DISCONNECT=1;exports.EVENT=2;exports.ACK=3;exports.ERROR=4;exports.BINARY_EVENT=5;exports.BINARY_ACK=6;exports.Encoder=Encoder;exports.Decoder=Decoder;function Encoder(){}Encoder.prototype.encode=function(obj,callback){debug("encoding packet %j",obj);if(exports.BINARY_EVENT==obj.type||exports.BINARY_ACK==obj.type){encodeAsBinary(obj,callback)}else{var encoding=encodeAsString(obj);callback([encoding])}};function encodeAsString(obj){var str="";var nsp=false;str+=obj.type;if(exports.BINARY_EVENT==obj.type||exports.BINARY_ACK==obj.type){str+=obj.attachments;str+="-"}if(obj.nsp&&"/"!=obj.nsp){nsp=true;str+=obj.nsp}if(null!=obj.id){if(nsp){str+=",";nsp=false}str+=obj.id}if(null!=obj.data){if(nsp)str+=",";str+=json.stringify(obj.data)}debug("encoded %j as %s",obj,str);return str}function encodeAsBinary(obj,callback){function writeEncoding(bloblessData){var deconstruction=binary.deconstructPacket(bloblessData);var pack=encodeAsString(deconstruction.packet);var buffers=deconstruction.buffers;buffers.unshift(pack);callback(buffers)}binary.removeBlobs(obj,writeEncoding)}function Decoder(){this.reconstructor=null}Emitter(Decoder.prototype);Decoder.prototype.add=function(obj){var packet;if("string"==typeof obj){packet=decodeString(obj);if(exports.BINARY_EVENT==packet.type||exports.BINARY_ACK==packet.type){this.reconstructor=new BinaryReconstructor(packet);if(this.reconstructor.reconPack.attachments===0){this.emit("decoded",packet)}}else{this.emit("decoded",packet)}}else if(isBuf(obj)||obj.base64){if(!this.reconstructor){throw new Error("got binary data when not reconstructing a packet")}else{packet=this.reconstructor.takeBinaryData(obj);if(packet){this.reconstructor=null;this.emit("decoded",packet)}}}else{throw new Error("Unknown type: "+obj)}};function decodeString(str){var p={};var i=0;p.type=Number(str.charAt(0));if(null==exports.types[p.type])return error();if(exports.BINARY_EVENT==p.type||exports.BINARY_ACK==p.type){var buf="";while(str.charAt(++i)!="-"){buf+=str.charAt(i);if(i==str.length)break}if(buf!=Number(buf)||str.charAt(i)!="-"){throw new Error("Illegal attachments")}p.attachments=Number(buf)}if("/"==str.charAt(i+1)){p.nsp="";while(++i){var c=str.charAt(i);if(","==c)break;p.nsp+=c;if(i==str.length)break}}else{p.nsp="/"}var next=str.charAt(i+1);if(""!==next&&Number(next)==next){p.id="";while(++i){var c=str.charAt(i);if(null==c||Number(c)!=c){--i;break}p.id+=str.charAt(i);if(i==str.length)break}p.id=Number(p.id)}if(str.charAt(++i)){try{p.data=json.parse(str.substr(i))}catch(e){return error()}}debug("decoded %s as %j",str,p);return p}Decoder.prototype.destroy=function(){if(this.reconstructor){this.reconstructor.finishedReconstruction()}};function BinaryReconstructor(packet){this.reconPack=packet;this.buffers=[]}BinaryReconstructor.prototype.takeBinaryData=function(binData){this.buffers.push(binData);if(this.buffers.length==this.reconPack.attachments){var packet=binary.reconstructPacket(this.reconPack,this.buffers);this.finishedReconstruction();return packet}return null};BinaryReconstructor.prototype.finishedReconstruction=function(){this.reconPack=null;this.buffers=[]};function error(data){return{type:exports.ERROR,data:"parser error"}}},{"./binary":46,"./is-buffer":48,"component-emitter":49,debug:39,isarray:43,json3:50}],48:[function(_dereq_,module,exports){(function(global){module.exports=isBuf;function isBuf(obj){return global.Buffer&&global.Buffer.isBuffer(obj)||global.ArrayBuffer&&obj instanceof ArrayBuffer}}).call(this,typeof self!=="undefined"?self:typeof window!=="undefined"?window:typeof global!=="undefined"?global:{})},{}],49:[function(_dereq_,module,exports){arguments[4][15][0].apply(exports,arguments)},{dup:15}],50:[function(_dereq_,module,exports){(function(global){(function(){var isLoader=typeof define==="function"&&define.amd;var objectTypes={"function":true,object:true};var freeExports=objectTypes[typeof exports]&&exports&&!exports.nodeType&&exports;var root=objectTypes[typeof window]&&window||this,freeGlobal=freeExports&&objectTypes[typeof module]&&module&&!module.nodeType&&typeof global=="object"&&global;if(freeGlobal&&(freeGlobal["global"]===freeGlobal||freeGlobal["window"]===freeGlobal||freeGlobal["self"]===freeGlobal)){root=freeGlobal}function runInContext(context,exports){context||(context=root["Object"]());exports||(exports=root["Object"]());var Number=context["Number"]||root["Number"],String=context["String"]||root["String"],Object=context["Object"]||root["Object"],Date=context["Date"]||root["Date"],SyntaxError=context["SyntaxError"]||root["SyntaxError"],TypeError=context["TypeError"]||root["TypeError"],Math=context["Math"]||root["Math"],nativeJSON=context["JSON"]||root["JSON"];if(typeof nativeJSON=="object"&&nativeJSON){exports.stringify=nativeJSON.stringify;exports.parse=nativeJSON.parse}var objectProto=Object.prototype,getClass=objectProto.toString,isProperty,forEach,undef;var isExtended=new Date(-0xc782b5b800cec);try{isExtended=isExtended.getUTCFullYear()==-109252&&isExtended.getUTCMonth()===0&&isExtended.getUTCDate()===1&&isExtended.getUTCHours()==10&&isExtended.getUTCMinutes()==37&&isExtended.getUTCSeconds()==6&&isExtended.getUTCMilliseconds()==708}catch(exception){}function has(name){if(has[name]!==undef){return has[name]}var isSupported;if(name=="bug-string-char-index"){isSupported="a"[0]!="a"}else if(name=="json"){isSupported=has("json-stringify")&&has("json-parse")}else{var value,serialized='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if(name=="json-stringify"){var stringify=exports.stringify,stringifySupported=typeof stringify=="function"&&isExtended;if(stringifySupported){(value=function(){return 1}).toJSON=value;try{stringifySupported=stringify(0)==="0"&&stringify(new Number)==="0"&&stringify(new String)=='""'&&stringify(getClass)===undef&&stringify(undef)===undef&&stringify()===undef&&stringify(value)==="1"&&stringify([value])=="[1]"&&stringify([undef])=="[null]"&&stringify(null)=="null"&&stringify([undef,getClass,null])=="[null,null,null]"&&stringify({a:[value,true,false,null,"\x00\b\n\f\r	"]})==serialized&&stringify(null,value)==="1"&&stringify([1,2],null,1)=="[\n 1,\n 2\n]"&&stringify(new Date(-864e13))=='"-271821-04-20T00:00:00.000Z"'&&stringify(new Date(864e13))=='"+275760-09-13T00:00:00.000Z"'&&stringify(new Date(-621987552e5))=='"-000001-01-01T00:00:00.000Z"'&&stringify(new Date(-1))=='"1969-12-31T23:59:59.999Z"'}catch(exception){stringifySupported=false}}isSupported=stringifySupported}if(name=="json-parse"){var parse=exports.parse;if(typeof parse=="function"){try{if(parse("0")===0&&!parse(false)){value=parse(serialized);var parseSupported=value["a"].length==5&&value["a"][0]===1;if(parseSupported){try{parseSupported=!parse('"	"')}catch(exception){}if(parseSupported){try{parseSupported=parse("01")!==1}catch(exception){}}if(parseSupported){try{parseSupported=parse("1.")!==1}catch(exception){}}}}}catch(exception){parseSupported=false}}isSupported=parseSupported}}return has[name]=!!isSupported}if(!has("json")){var functionClass="[object Function]",dateClass="[object Date]",numberClass="[object Number]",stringClass="[object String]",arrayClass="[object Array]",booleanClass="[object Boolean]";var charIndexBuggy=has("bug-string-char-index");if(!isExtended){var floor=Math.floor;var Months=[0,31,59,90,120,151,181,212,243,273,304,334];var getDay=function(year,month){return Months[month]+365*(year-1970)+floor((year-1969+(month=+(month>1)))/4)-floor((year-1901+month)/100)+floor((year-1601+month)/400)}}if(!(isProperty=objectProto.hasOwnProperty)){isProperty=function(property){var members={},constructor;if((members.__proto__=null,members.__proto__={toString:1},members).toString!=getClass){isProperty=function(property){var original=this.__proto__,result=property in(this.__proto__=null,this);this.__proto__=original;return result}}else{constructor=members.constructor;isProperty=function(property){var parent=(this.constructor||constructor).prototype;return property in this&&!(property in parent&&this[property]===parent[property])}}members=null;return isProperty.call(this,property)}}forEach=function(object,callback){var size=0,Properties,members,property;(Properties=function(){this.valueOf=0}).prototype.valueOf=0;members=new Properties;for(property in members){if(isProperty.call(members,property)){size++}}Properties=members=null;if(!size){members=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"];forEach=function(object,callback){var isFunction=getClass.call(object)==functionClass,property,length;var hasProperty=!isFunction&&typeof object.constructor!="function"&&objectTypes[typeof object.hasOwnProperty]&&object.hasOwnProperty||isProperty;for(property in object){if(!(isFunction&&property=="prototype")&&hasProperty.call(object,property)){callback(property)}}for(length=members.length;property=members[--length];hasProperty.call(object,property)&&callback(property));}}else if(size==2){forEach=function(object,callback){var members={},isFunction=getClass.call(object)==functionClass,property;for(property in object){if(!(isFunction&&property=="prototype")&&!isProperty.call(members,property)&&(members[property]=1)&&isProperty.call(object,property)){callback(property)}}}}else{forEach=function(object,callback){var isFunction=getClass.call(object)==functionClass,property,isConstructor;for(property in object){if(!(isFunction&&property=="prototype")&&isProperty.call(object,property)&&!(isConstructor=property==="constructor")){callback(property)}}if(isConstructor||isProperty.call(object,property="constructor")){callback(property)}}}return forEach(object,callback)};if(!has("json-stringify")){var Escapes={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"};var leadingZeroes="000000";var toPaddedString=function(width,value){return(leadingZeroes+(value||0)).slice(-width)};var unicodePrefix="\\u00";var quote=function(value){var result='"',index=0,length=value.length,useCharIndex=!charIndexBuggy||length>10;var symbols=useCharIndex&&(charIndexBuggy?value.split(""):value);for(;index<length;index++){var charCode=value.charCodeAt(index);switch(charCode){case 8:case 9:case 10:case 12:case 13:case 34:case 92:result+=Escapes[charCode];break;default:if(charCode<32){result+=unicodePrefix+toPaddedString(2,charCode.toString(16));break}result+=useCharIndex?symbols[index]:value.charAt(index)}}return result+'"'};var serialize=function(property,object,callback,properties,whitespace,indentation,stack){var value,className,year,month,date,time,hours,minutes,seconds,milliseconds,results,element,index,length,prefix,result;try{value=object[property]}catch(exception){}if(typeof value=="object"&&value){className=getClass.call(value);if(className==dateClass&&!isProperty.call(value,"toJSON")){if(value>-1/0&&value<1/0){if(getDay){date=floor(value/864e5);for(year=floor(date/365.2425)+1970-1;getDay(year+1,0)<=date;year++);for(month=floor((date-getDay(year,0))/30.42);getDay(year,month+1)<=date;month++);date=1+date-getDay(year,month);time=(value%864e5+864e5)%864e5;hours=floor(time/36e5)%24;minutes=floor(time/6e4)%60;seconds=floor(time/1e3)%60;milliseconds=time%1e3}else{year=value.getUTCFullYear();month=value.getUTCMonth();date=value.getUTCDate();hours=value.getUTCHours();minutes=value.getUTCMinutes();seconds=value.getUTCSeconds();milliseconds=value.getUTCMilliseconds()}value=(year<=0||year>=1e4?(year<0?"-":"+")+toPaddedString(6,year<0?-year:year):toPaddedString(4,year))+"-"+toPaddedString(2,month+1)+"-"+toPaddedString(2,date)+"T"+toPaddedString(2,hours)+":"+toPaddedString(2,minutes)+":"+toPaddedString(2,seconds)+"."+toPaddedString(3,milliseconds)+"Z"}else{value=null}}else if(typeof value.toJSON=="function"&&(className!=numberClass&&className!=stringClass&&className!=arrayClass||isProperty.call(value,"toJSON"))){value=value.toJSON(property)}}if(callback){value=callback.call(object,property,value)}if(value===null){return"null"}className=getClass.call(value);if(className==booleanClass){return""+value}else if(className==numberClass){return value>-1/0&&value<1/0?""+value:"null"}else if(className==stringClass){return quote(""+value)}if(typeof value=="object"){for(length=stack.length;length--;){if(stack[length]===value){throw TypeError()}}stack.push(value);results=[];prefix=indentation;indentation+=whitespace;if(className==arrayClass){for(index=0,length=value.length;index<length;index++){element=serialize(index,value,callback,properties,whitespace,indentation,stack);results.push(element===undef?"null":element)}result=results.length?whitespace?"[\n"+indentation+results.join(",\n"+indentation)+"\n"+prefix+"]":"["+results.join(",")+"]":"[]"}else{forEach(properties||value,function(property){var element=serialize(property,value,callback,properties,whitespace,indentation,stack);if(element!==undef){results.push(quote(property)+":"+(whitespace?" ":"")+element)}});result=results.length?whitespace?"{\n"+indentation+results.join(",\n"+indentation)+"\n"+prefix+"}":"{"+results.join(",")+"}":"{}"}stack.pop();return result}};exports.stringify=function(source,filter,width){var whitespace,callback,properties,className;if(objectTypes[typeof filter]&&filter){if((className=getClass.call(filter))==functionClass){callback=filter}else if(className==arrayClass){properties={};for(var index=0,length=filter.length,value;index<length;value=filter[index++],(className=getClass.call(value),className==stringClass||className==numberClass)&&(properties[value]=1));}}if(width){if((className=getClass.call(width))==numberClass){if((width-=width%1)>0){for(whitespace="",width>10&&(width=10);whitespace.length<width;whitespace+=" ");}}else if(className==stringClass){whitespace=width.length<=10?width:width.slice(0,10)}}return serialize("",(value={},value[""]=source,value),callback,properties,whitespace,"",[])}}if(!has("json-parse")){var fromCharCode=String.fromCharCode;var Unescapes={92:"\\",34:'"',47:"/",98:"\b",116:"	",110:"\n",102:"\f",114:"\r"};var Index,Source;var abort=function(){Index=Source=null;throw SyntaxError()};var lex=function(){var source=Source,length=source.length,value,begin,position,isSigned,charCode;while(Index<length){charCode=source.charCodeAt(Index);switch(charCode){case 9:case 10:case 13:case 32:Index++;break;case 123:case 125:case 91:case 93:case 58:case 44:value=charIndexBuggy?source.charAt(Index):source[Index];Index++;return value;case 34:for(value="@",Index++;Index<length;){charCode=source.charCodeAt(Index);if(charCode<32){abort()}else if(charCode==92){charCode=source.charCodeAt(++Index);switch(charCode){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:value+=Unescapes[charCode];Index++;break;case 117:begin=++Index;for(position=Index+4;Index<position;Index++){charCode=source.charCodeAt(Index);if(!(charCode>=48&&charCode<=57||charCode>=97&&charCode<=102||charCode>=65&&charCode<=70)){abort()}}value+=fromCharCode("0x"+source.slice(begin,Index));break;default:abort()}}else{if(charCode==34){break}charCode=source.charCodeAt(Index);begin=Index;while(charCode>=32&&charCode!=92&&charCode!=34){charCode=source.charCodeAt(++Index)}value+=source.slice(begin,Index)}}if(source.charCodeAt(Index)==34){Index++;return value}abort();default:begin=Index;if(charCode==45){isSigned=true;charCode=source.charCodeAt(++Index)}if(charCode>=48&&charCode<=57){if(charCode==48&&(charCode=source.charCodeAt(Index+1),charCode>=48&&charCode<=57)){abort()}isSigned=false;for(;Index<length&&(charCode=source.charCodeAt(Index),charCode>=48&&charCode<=57);Index++);if(source.charCodeAt(Index)==46){position=++Index;for(;position<length&&(charCode=source.charCodeAt(position),charCode>=48&&charCode<=57);position++);if(position==Index){abort()}Index=position}charCode=source.charCodeAt(Index);if(charCode==101||charCode==69){charCode=source.charCodeAt(++Index);if(charCode==43||charCode==45){Index++}for(position=Index;position<length&&(charCode=source.charCodeAt(position),charCode>=48&&charCode<=57);position++);if(position==Index){abort()}Index=position}return+source.slice(begin,Index)}if(isSigned){abort()}if(source.slice(Index,Index+4)=="true"){Index+=4;return true}else if(source.slice(Index,Index+5)=="false"){Index+=5;return false}else if(source.slice(Index,Index+4)=="null"){Index+=4;return null}abort()}}return"$"};var get=function(value){var results,hasMembers;if(value=="$"){abort()}if(typeof value=="string"){if((charIndexBuggy?value.charAt(0):value[0])=="@"){return value.slice(1)}if(value=="["){results=[];for(;;hasMembers||(hasMembers=true)){value=lex();if(value=="]"){break}if(hasMembers){if(value==","){value=lex();if(value=="]"){abort()}}else{abort()}}if(value==","){abort()}results.push(get(value))}return results}else if(value=="{"){results={};for(;;hasMembers||(hasMembers=true)){value=lex();if(value=="}"){break}if(hasMembers){if(value==","){value=lex();if(value=="}"){abort()}}else{abort()}}if(value==","||typeof value!="string"||(charIndexBuggy?value.charAt(0):value[0])!="@"||lex()!=":"){abort()}results[value.slice(1)]=get(lex())
}return results}abort()}return value};var update=function(source,property,callback){var element=walk(source,property,callback);if(element===undef){delete source[property]}else{source[property]=element}};var walk=function(source,property,callback){var value=source[property],length;if(typeof value=="object"&&value){if(getClass.call(value)==arrayClass){for(length=value.length;length--;){update(value,length,callback)}}else{forEach(value,function(property){update(value,property,callback)})}}return callback.call(source,property,value)};exports.parse=function(source,callback){var result,value;Index=0;Source=""+source;result=get(lex());if(lex()!="$"){abort()}Index=Source=null;return callback&&getClass.call(callback)==functionClass?walk((value={},value[""]=result,value),"",callback):result}}}exports["runInContext"]=runInContext;return exports}if(freeExports&&!isLoader){runInContext(root,freeExports)}else{var nativeJSON=root.JSON,previousJSON=root["JSON3"],isRestored=false;var JSON3=runInContext(root,root["JSON3"]={noConflict:function(){if(!isRestored){isRestored=true;root.JSON=nativeJSON;root["JSON3"]=previousJSON;nativeJSON=previousJSON=null}return JSON3}});root.JSON={parse:JSON3.parse,stringify:JSON3.stringify}}if(isLoader){define(function(){return JSON3})}}).call(this)}).call(this,typeof self!=="undefined"?self:typeof window!=="undefined"?window:typeof global!=="undefined"?global:{})},{}],51:[function(_dereq_,module,exports){module.exports=toArray;function toArray(list,index){var array=[];index=index||0;for(var i=index||0;i<list.length;i++){array[i-index]=list[i]}return array}},{}]},{},[31])(31)});

}).call(this)}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],"telemetry-helper":[function(require,module,exports){
// Copyright (c) Microsoft Corporation. All rights reserved.

var clientSocket;
var serviceToPluginMap;
var pendingTelemetryEvents = [];

function init(socket) {
    clientSocket = socket;
    trySendPendingEvents();
}

function registerPluginServices(pluginServices) {
    serviceToPluginMap = pluginServices;
    trySendPendingEvents();
}

function trySendPendingEvents() {
    if (!clientSocket) {
        return;
    }

    var unsent = [];

    pendingTelemetryEvents.forEach(function (eventData) {
        if (mustMapServiceToPlugin(eventData) && !serviceToPluginMap) {
            unsent.push(eventData);
        } else {
            sendClientTelemetry(eventData);
        }
    });
    
    pendingTelemetryEvents = unsent;
}

function mustMapServiceToPlugin(eventData) {
    return !!eventData.props.service && !eventData.plugin;
}

function sendClientTelemetry(event, props, piiProps) {
    var eventData = {
        event: event,
        props: props,
        piiProps: piiProps
    };

    if (!clientSocket) {
        pendingTelemetryEvents.push(eventData);
        return;
    }

    if (mustMapServiceToPlugin(eventData)) {
        if (!serviceToPluginMap) {
            pendingTelemetryEvents.push(eventData);
            return;
        }

        eventData.props.plugin = serviceToPluginMap[eventData.props.service] || '_unknown';
    }

    clientSocket.emit('telemetry', eventData);
}

function sendUITelemetry(uiControlData) {
    sendClientTelemetry('plugin-ui-interaction', uiControlData);
}

module.exports.init = init;
module.exports.registerPluginServices = registerPluginServices;
module.exports.sendClientTelemetry = sendClientTelemetry;
module.exports.sendUITelemetry = sendUITelemetry;

},{}],"utils":[function(require,module,exports){
// Copyright (c) Microsoft Corporation. All rights reserved.
// Based in part on code from Apache Ripple, https://github.com/apache/incubator-ripple

var self,
    exception = require('exception');

self = module.exports = {
    validateArgumentType: function (arg, argType, customExceptionType, customExceptionMessage, customExceptionObject) {
        var invalidArg = false,
            msg;

        switch (argType) {
            case 'array':
                if (!(arg instanceof Array)) {
                    invalidArg = true;
                }
                break;
            case 'date':
                if (!(arg instanceof Date)) {
                    invalidArg = true;
                }
                break;
            case 'integer':
                if (typeof arg === 'number') {
                    if (arg !== Math.floor(arg)) {
                        invalidArg = true;
                    }
                }
                else {
                    invalidArg = true;
                }
                break;
            default:
                if (typeof arg !== argType) {
                    invalidArg = true;
                }
                break;
        }

        if (invalidArg) {
            msg = customExceptionMessage + ('\n\nInvalid Argument type. argument: ' + arg + ' ==> was expected to be of type: ' + argType);
            exception.raise((customExceptionType || exception.types.ArgumentType), msg, customExceptionObject);
        }
    },

    forEach: function (obj, action, scope) {
        if (obj instanceof Array) {
            return obj.forEach(action, scope);
        } else {
            self.map(obj, action, scope);
        }
    },

    map: function (obj, func, scope) {
        var i,
            returnVal = null,
            result    = [];

        //MozHack for NamedNodeMap
        /* jshint ignore:start */
        if (window.MozNamedAttrMap) {
            NamedNodeMap = window.MozNamedAttrMap; // eslint-disable-line no-global-assign
        }
        /* jshint ignore:end */

        if (obj instanceof Array) {
            return obj.map(func, scope);
        } else if (obj instanceof NamedNodeMap) {
            for (i = 0; i < obj.length; i++) {
                returnVal = func.apply(scope, [obj[i], i]);
                result.push(returnVal);
            }
        } else {
            for (i in obj) {
                if (obj.hasOwnProperty(i)) {
                    returnVal = func.apply(scope, [obj[i], i]);
                    result.push(returnVal);
                }
            }
        }

        return result;
    },

    bindAutoSaveEvent: function (selector, saveCallback) {
        var oldSetTimeoutId;
        var node = document.querySelector(selector);

        if (!node) {
            console.log('AUTO SAVE: REINSTATE ONCE WE HAVE ' + selector + ' ELEMENT');
            return;
        }

        node.addEventListener('keyup', function (event) {
            if (event.keyCode !== 9) {
                clearTimeout(oldSetTimeoutId);
                oldSetTimeoutId = window.setTimeout(function () {
                    saveCallback();
                }, 500);
            }
        });
    },

    mixin: function (mixin, to) {
        for (var prop in mixin) {
            if (Object.hasOwnProperty.call(mixin, prop)) {
                to[prop] = mixin[prop];
            }
        }
    },

    copy: function (obj) {
        var i,
            newObj = Array.isArray(obj) ? [] : {};

        if (typeof obj === 'number' ||
            typeof obj === 'string' ||
            typeof obj === 'boolean' ||
            obj === null ||
            obj === undefined) {
            return obj;
        }

        if (obj instanceof Date) {
            return new Date(obj);
        }

        if (obj instanceof RegExp) {
            return new RegExp(obj);
        }

        for (i in obj) {
            if (obj.hasOwnProperty(i)) {
                if (obj[i] && typeof obj[i] === 'object') {
                    if (obj[i] instanceof Date) {
                        newObj[i] = obj[i];
                    }
                    else {
                        newObj[i] = self.copy(obj[i]);
                    }
                }
                else {
                    newObj[i] = obj[i];
                }
            }
        }

        return newObj;
    },

    navHelper: function () {
        return {
            Directions: {
                N: 'N',
                NE: 'NE',
                E: 'E',
                SE: 'SE',
                S: 'S',
                SW: 'SW',
                W: 'W',
                NW: 'NW'
            },

            /**
             * Get the direction according to the heading value.
             * @param {number} heading A number from 0 to 359.99.
             * @return {string} direction It can be one of the following: N, NE, E, SE, S, SW, W or NW.
             */
            getDirection: function (heading) {
                if (heading > 337.5 || (heading >= 0 && heading <= 22.5)) {
                    return this.Directions.N;
                }

                if (heading > 22.5 && heading <= 67.5) {
                    return this.Directions.NE;
                }

                if (heading > 67.5 && heading <= 112.5) {
                    return this.Directions.E;
                }

                if (heading > 112.5 && heading <= 157.5) {
                    return this.Directions.SE;
                }

                if (heading > 157.5 && heading <= 202.5) {
                    return this.Directions.S;
                }

                if (heading > 202.5 && heading <= 247.5) {
                    return this.Directions.SW;
                }

                if (heading > 247.5 && heading <= 292.5) {
                    return this.Directions.W;
                }

                // heading > 292.5 && heading <= 337.5
                return this.Directions.NW;
            },

            getHeading: function (lat1, lon1, lat2, lon2) {
                var dLon  = this.rad(lon2 - lon1),
                    llat1 = this.rad(lat1),
                    llat2 = this.rad(lat2),
                    y     = Math.sin(dLon) * Math.cos(llat2),
                    x     = Math.cos(llat1) * Math.sin(llat2) - Math.sin(llat1) * Math.cos(llat2) * Math.cos(dLon);
                return (this.deg(Math.atan2(y, x)) + 360) % 360;
            },

            getDistance: function (lat1, lon1, lat2, lon2) {
                var dLat = this.rad(lat2 - lat1),
                    dLon = this.rad(lon2 - lon1),
                    a    = Math.sin(dLat / 2) * Math.sin(dLat / 2) + Math.cos(this.rad(lat1)) * Math.cos(this.rad(lat2)) * Math.sin(dLon / 2) * Math.sin(dLon / 2),
                    c    = 2 * Math.asin(Math.sqrt(a)),
                    d    = 6378100 * c;
                return d;
            },

            simulateTravel: function (lat, lon, hdg, dist) {
                var lat1            = this.rad(lat),
                    lon1            = this.rad(lon),
                    brng            = this.rad(hdg),
                    angularDistance = dist / 6378100,
                    lat2            = Math.asin(Math.sin(lat1) * Math.cos(angularDistance) + Math.cos(lat1) * Math.sin(angularDistance) * Math.cos(brng)),
                    lon2            = lon1 + Math.atan2(Math.sin(brng) * Math.sin(angularDistance) * Math.cos(lat1), Math.cos(angularDistance) - Math.sin(lat1) * Math.sin(lat2));
                lon2 = (lon2 + 3 * Math.PI) % (2 * Math.PI) - Math.PI; // Normalize to -180..+180

                return {
                    latitude: this.deg(lat2),
                    longitude: this.deg(lon2)
                };
            },

            deg: function (num) {
                return num * 180 / Math.PI;
            },

            rad: function (num) {
                return num * Math.PI / 180;
            }
        };
    },

    createUUID: function () {
        return createUUIDPart(4) + '-' +
            createUUIDPart(2) + '-' +
            createUUIDPart(2) + '-' +
            createUUIDPart(2) + '-' +
            createUUIDPart(6);
    },

    typeName: function (val) {
        return Object.prototype.toString.call(val).slice(8, -1);
    },

    parseUrl: function (url) {
        var a = document.createElement('a');

        a.href = url;

        return {
            href: a.href,
            host: a.host,
            origin: a.origin,
            port: a.port,
            protocol: a.protocol,
            search: a.search
        };
    },

    isSameOriginRequest: function (url) {
        url = this.parseUrl(url);

        if (url.port !== location.port) {
            return false;
        }

        var sameOrigin = url.href.match(location.origin.replace(/www\./, '')) ||
            !url.href.match(/^https?:\/\/|^file:\/\//);

        return !!sameOrigin;
    },

    isNumber: function (value) {
        var type = typeof value;

        return (type === 'number' || type === 'string') && !isNaN(value - parseFloat(value));
    }
};

function createUUIDPart(length) {
    var uuidpart = '';
    for (var i = 0; i < length; i++) {
        var uuidchar = parseInt((Math.random() * 256), 10).toString(16);
        if (uuidchar.length == 1) {
            uuidchar = '0' + uuidchar;
        }
        uuidpart += uuidchar;
    }
    return uuidpart;
}

},{"exception":"exception"}],"webcomponents.min":[function(require,module,exports){
/**
 * @license
 * Copyright (c) 2014 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
 */
// @version 0.7.20
!function(){window.WebComponents=window.WebComponents||{flags:{}};var e="webcomponents.js",t=document.querySelector('script[src*="'+e+'"]'),n={};if(!n.noOpts){if(location.search.slice(1).split("&").forEach(function(e){var t,r=e.split("=");r[0]&&(t=r[0].match(/wc-(.+)/))&&(n[t[1]]=r[1]||!0)}),t)for(var r,o=0;r=t.attributes[o];o++)"src"!==r.name&&(n[r.name]=r.value||!0);if(n.log&&n.log.split){var i=n.log.split(",");n.log={},i.forEach(function(e){n.log[e]=!0})}else n.log={}}n.shadow=n.shadow||n.shadowdom||n.polyfill,"native"===n.shadow?n.shadow=!1:n.shadow=n.shadow||!HTMLElement.prototype.createShadowRoot,n.register&&(window.CustomElements=window.CustomElements||{flags:{}},window.CustomElements.flags.register=n.register),WebComponents.flags=n}(),WebComponents.flags.shadow&&("undefined"==typeof WeakMap&&!function(){var e=Object.defineProperty,t=Date.now()%1e9,n=function(){this.name="__st"+(1e9*Math.random()>>>0)+(t++ +"__")};n.prototype={set:function(t,n){var r=t[this.name];return r&&r[0]===t?r[1]=n:e(t,this.name,{value:[t,n],writable:!0}),this},get:function(e){var t;return(t=e[this.name])&&t[0]===e?t[1]:void 0},"delete":function(e){var t=e[this.name];return t&&t[0]===e?(t[0]=t[1]=void 0,!0):!1},has:function(e){var t=e[this.name];return t?t[0]===e:!1}},window.WeakMap=n}(),window.ShadowDOMPolyfill={},function(e){"use strict";function t(){if("undefined"!=typeof chrome&&chrome.app&&chrome.app.runtime)return!1;if(navigator.getDeviceStorage)return!1;try{var e=new Function("return true;");return e()}catch(t){return!1}}function n(e){if(!e)throw new Error("Assertion failed")}function r(e,t){for(var n=W(t),r=0;r<n.length;r++){var o=n[r];A(e,o,F(t,o))}return e}function o(e,t){for(var n=W(t),r=0;r<n.length;r++){var o=n[r];switch(o){case"arguments":case"caller":case"length":case"name":case"prototype":case"toString":continue}A(e,o,F(t,o))}return e}function i(e,t){for(var n=0;n<t.length;n++)if(t[n]in e)return t[n]}function a(e,t,n){U.value=n,A(e,t,U)}function s(e,t){var n=e.__proto__||Object.getPrototypeOf(e);if(q)try{W(n)}catch(r){n=n.__proto__}var o=R.get(n);if(o)return o;var i=s(n),a=E(i);return g(n,a,t),a}function c(e,t){w(e,t,!0)}function l(e,t){w(t,e,!1)}function u(e){return/^on[a-z]+$/.test(e)}function d(e){return/^[a-zA-Z_$][a-zA-Z_$0-9]*$/.test(e)}function p(e){return k&&d(e)?new Function("return this.__impl4cf1e782hg__."+e):function(){return this.__impl4cf1e782hg__[e]}}function h(e){return k&&d(e)?new Function("v","this.__impl4cf1e782hg__."+e+" = v"):function(t){this.__impl4cf1e782hg__[e]=t}}function f(e){return k&&d(e)?new Function("return this.__impl4cf1e782hg__."+e+".apply(this.__impl4cf1e782hg__, arguments)"):function(){return this.__impl4cf1e782hg__[e].apply(this.__impl4cf1e782hg__,arguments)}}function m(e,t){try{return Object.getOwnPropertyDescriptor(e,t)}catch(n){return B}}function w(t,n,r,o){for(var i=W(t),a=0;a<i.length;a++){var s=i[a];if("polymerBlackList_"!==s&&!(s in n||t.polymerBlackList_&&t.polymerBlackList_[s])){q&&t.__lookupGetter__(s);var c,l,d=m(t,s);if("function"!=typeof d.value){var w=u(s);c=w?e.getEventHandlerGetter(s):p(s),(d.writable||d.set||V)&&(l=w?e.getEventHandlerSetter(s):h(s));var v=V||d.configurable;A(n,s,{get:c,set:l,configurable:v,enumerable:d.enumerable})}else r&&(n[s]=f(s))}}}function v(e,t,n){if(null!=e){var r=e.prototype;g(r,t,n),o(t,e)}}function g(e,t,r){var o=t.prototype;n(void 0===R.get(e)),R.set(e,t),I.set(o,e),c(e,o),r&&l(o,r),a(o,"constructor",t),t.prototype=o}function b(e,t){return R.get(t.prototype)===e}function y(e){var t=Object.getPrototypeOf(e),n=s(t),r=E(n);return g(t,r,e),r}function E(e){function t(t){e.call(this,t)}var n=Object.create(e.prototype);return n.constructor=t,t.prototype=n,t}function _(e){return e&&e.__impl4cf1e782hg__}function S(e){return!_(e)}function T(e){if(null===e)return null;n(S(e));var t=e.__wrapper8e3dd93a60__;return null!=t?t:e.__wrapper8e3dd93a60__=new(s(e,e))(e)}function M(e){return null===e?null:(n(_(e)),e.__impl4cf1e782hg__)}function O(e){return e.__impl4cf1e782hg__}function L(e,t){t.__impl4cf1e782hg__=e,e.__wrapper8e3dd93a60__=t}function N(e){return e&&_(e)?M(e):e}function C(e){return e&&!_(e)?T(e):e}function j(e,t){null!==t&&(n(S(e)),n(void 0===t||_(t)),e.__wrapper8e3dd93a60__=t)}function D(e,t,n){G.get=n,A(e.prototype,t,G)}function H(e,t){D(e,t,function(){return T(this.__impl4cf1e782hg__[t])})}function x(e,t){e.forEach(function(e){t.forEach(function(t){e.prototype[t]=function(){var e=C(this);return e[t].apply(e,arguments)}})})}var R=new WeakMap,I=new WeakMap,P=Object.create(null),k=t(),A=Object.defineProperty,W=Object.getOwnPropertyNames,F=Object.getOwnPropertyDescriptor,U={value:void 0,configurable:!0,enumerable:!1,writable:!0};W(window);var q=/Firefox/.test(navigator.userAgent),B={get:function(){},set:function(e){},configurable:!0,enumerable:!0},V=function(){var e=Object.getOwnPropertyDescriptor(Node.prototype,"nodeType");return e&&!e.get&&!e.set}(),G={get:void 0,configurable:!0,enumerable:!0};e.addForwardingProperties=c,e.assert=n,e.constructorTable=R,e.defineGetter=D,e.defineWrapGetter=H,e.forwardMethodsToWrapper=x,e.isIdentifierName=d,e.isWrapper=_,e.isWrapperFor=b,e.mixin=r,e.nativePrototypeTable=I,e.oneOf=i,e.registerObject=y,e.registerWrapper=v,e.rewrap=j,e.setWrapper=L,e.unsafeUnwrap=O,e.unwrap=M,e.unwrapIfNeeded=N,e.wrap=T,e.wrapIfNeeded=C,e.wrappers=P}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e,t,n){return{index:e,removed:t,addedCount:n}}function n(){}var r=0,o=1,i=2,a=3;n.prototype={calcEditDistances:function(e,t,n,r,o,i){for(var a=i-o+1,s=n-t+1,c=new Array(a),l=0;a>l;l++)c[l]=new Array(s),c[l][0]=l;for(var u=0;s>u;u++)c[0][u]=u;for(var l=1;a>l;l++)for(var u=1;s>u;u++)if(this.equals(e[t+u-1],r[o+l-1]))c[l][u]=c[l-1][u-1];else{var d=c[l-1][u]+1,p=c[l][u-1]+1;c[l][u]=p>d?d:p}return c},spliceOperationsFromEditDistances:function(e){for(var t=e.length-1,n=e[0].length-1,s=e[t][n],c=[];t>0||n>0;)if(0!=t)if(0!=n){var l,u=e[t-1][n-1],d=e[t-1][n],p=e[t][n-1];l=p>d?u>d?d:u:u>p?p:u,l==u?(u==s?c.push(r):(c.push(o),s=u),t--,n--):l==d?(c.push(a),t--,s=d):(c.push(i),n--,s=p)}else c.push(a),t--;else c.push(i),n--;return c.reverse(),c},calcSplices:function(e,n,s,c,l,u){var d=0,p=0,h=Math.min(s-n,u-l);if(0==n&&0==l&&(d=this.sharedPrefix(e,c,h)),s==e.length&&u==c.length&&(p=this.sharedSuffix(e,c,h-d)),n+=d,l+=d,s-=p,u-=p,s-n==0&&u-l==0)return[];if(n==s){for(var f=t(n,[],0);u>l;)f.removed.push(c[l++]);return[f]}if(l==u)return[t(n,[],s-n)];for(var m=this.spliceOperationsFromEditDistances(this.calcEditDistances(e,n,s,c,l,u)),f=void 0,w=[],v=n,g=l,b=0;b<m.length;b++)switch(m[b]){case r:f&&(w.push(f),f=void 0),v++,g++;break;case o:f||(f=t(v,[],0)),f.addedCount++,v++,f.removed.push(c[g]),g++;break;case i:f||(f=t(v,[],0)),f.addedCount++,v++;break;case a:f||(f=t(v,[],0)),f.removed.push(c[g]),g++}return f&&w.push(f),w},sharedPrefix:function(e,t,n){for(var r=0;n>r;r++)if(!this.equals(e[r],t[r]))return r;return n},sharedSuffix:function(e,t,n){for(var r=e.length,o=t.length,i=0;n>i&&this.equals(e[--r],t[--o]);)i++;return i},calculateSplices:function(e,t){return this.calcSplices(e,0,e.length,t,0,t.length)},equals:function(e,t){return e===t}},e.ArraySplice=n}(window.ShadowDOMPolyfill),function(e){"use strict";function t(){a=!1;var e=i.slice(0);i=[];for(var t=0;t<e.length;t++)(0,e[t])()}function n(e){i.push(e),a||(a=!0,r(t,0))}var r,o=window.MutationObserver,i=[],a=!1;if(o){var s=1,c=new o(t),l=document.createTextNode(s);c.observe(l,{characterData:!0}),r=function(){s=(s+1)%2,l.data=s}}else r=window.setTimeout;e.setEndOfMicrotask=n}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){e.scheduled_||(e.scheduled_=!0,f.push(e),m||(u(n),m=!0))}function n(){for(m=!1;f.length;){var e=f;f=[],e.sort(function(e,t){return e.uid_-t.uid_});for(var t=0;t<e.length;t++){var n=e[t];n.scheduled_=!1;var r=n.takeRecords();i(n),r.length&&n.callback_(r,n)}}}function r(e,t){this.type=e,this.target=t,this.addedNodes=new p.NodeList,this.removedNodes=new p.NodeList,this.previousSibling=null,this.nextSibling=null,this.attributeName=null,this.attributeNamespace=null,this.oldValue=null}function o(e,t){for(;e;e=e.parentNode){var n=h.get(e);if(n)for(var r=0;r<n.length;r++){var o=n[r];o.options.subtree&&o.addTransientObserver(t)}}}function i(e){for(var t=0;t<e.nodes_.length;t++){var n=e.nodes_[t],r=h.get(n);if(!r)return;for(var o=0;o<r.length;o++){var i=r[o];i.observer===e&&i.removeTransientObservers()}}}function a(e,n,o){for(var i=Object.create(null),a=Object.create(null),s=e;s;s=s.parentNode){var c=h.get(s);if(c)for(var l=0;l<c.length;l++){var u=c[l],d=u.options;if((s===e||d.subtree)&&("attributes"!==n||d.attributes)&&("attributes"!==n||!d.attributeFilter||null===o.namespace&&-1!==d.attributeFilter.indexOf(o.name))&&("characterData"!==n||d.characterData)&&("childList"!==n||d.childList)){var p=u.observer;i[p.uid_]=p,("attributes"===n&&d.attributeOldValue||"characterData"===n&&d.characterDataOldValue)&&(a[p.uid_]=o.oldValue)}}}for(var f in i){var p=i[f],m=new r(n,e);"name"in o&&"namespace"in o&&(m.attributeName=o.name,m.attributeNamespace=o.namespace),o.addedNodes&&(m.addedNodes=o.addedNodes),o.removedNodes&&(m.removedNodes=o.removedNodes),o.previousSibling&&(m.previousSibling=o.previousSibling),o.nextSibling&&(m.nextSibling=o.nextSibling),void 0!==a[f]&&(m.oldValue=a[f]),t(p),p.records_.push(m)}}function s(e){if(this.childList=!!e.childList,this.subtree=!!e.subtree,"attributes"in e||!("attributeOldValue"in e||"attributeFilter"in e)?this.attributes=!!e.attributes:this.attributes=!0,"characterDataOldValue"in e&&!("characterData"in e)?this.characterData=!0:this.characterData=!!e.characterData,!this.attributes&&(e.attributeOldValue||"attributeFilter"in e)||!this.characterData&&e.characterDataOldValue)throw new TypeError;if(this.characterData=!!e.characterData,this.attributeOldValue=!!e.attributeOldValue,this.characterDataOldValue=!!e.characterDataOldValue,"attributeFilter"in e){if(null==e.attributeFilter||"object"!=typeof e.attributeFilter)throw new TypeError;this.attributeFilter=w.call(e.attributeFilter)}else this.attributeFilter=null}function c(e){this.callback_=e,this.nodes_=[],this.records_=[],this.uid_=++v,this.scheduled_=!1}function l(e,t,n){this.observer=e,this.target=t,this.options=n,this.transientObservedNodes=[]}var u=e.setEndOfMicrotask,d=e.wrapIfNeeded,p=e.wrappers,h=new WeakMap,f=[],m=!1,w=Array.prototype.slice,v=0;c.prototype={constructor:c,observe:function(e,t){e=d(e);var n,r=new s(t),o=h.get(e);o||h.set(e,o=[]);for(var i=0;i<o.length;i++)o[i].observer===this&&(n=o[i],n.removeTransientObservers(),n.options=r);n||(n=new l(this,e,r),o.push(n),this.nodes_.push(e))},disconnect:function(){this.nodes_.forEach(function(e){for(var t=h.get(e),n=0;n<t.length;n++){var r=t[n];if(r.observer===this){t.splice(n,1);break}}},this),this.records_=[]},takeRecords:function(){var e=this.records_;return this.records_=[],e}},l.prototype={addTransientObserver:function(e){if(e!==this.target){t(this.observer),this.transientObservedNodes.push(e);var n=h.get(e);n||h.set(e,n=[]),n.push(this)}},removeTransientObservers:function(){var e=this.transientObservedNodes;this.transientObservedNodes=[];for(var t=0;t<e.length;t++)for(var n=e[t],r=h.get(n),o=0;o<r.length;o++)if(r[o]===this){r.splice(o,1);break}}},e.enqueueMutation=a,e.registerTransientObservers=o,e.wrappers.MutationObserver=c,e.wrappers.MutationRecord=r}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e,t){this.root=e,this.parent=t}function n(e,t){if(e.treeScope_!==t){e.treeScope_=t;for(var r=e.shadowRoot;r;r=r.olderShadowRoot)r.treeScope_.parent=t;for(var o=e.firstChild;o;o=o.nextSibling)n(o,t)}}function r(n){if(n instanceof e.wrappers.Window,n.treeScope_)return n.treeScope_;var o,i=n.parentNode;return o=i?r(i):new t(n,null),n.treeScope_=o}t.prototype={get renderer(){return this.root instanceof e.wrappers.ShadowRoot?e.getRendererForHost(this.root.host):null},contains:function(e){for(;e;e=e.parent)if(e===this)return!0;return!1}},e.TreeScope=t,e.getTreeScope=r,e.setTreeScope=n}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){return e instanceof G.ShadowRoot}function n(e){return A(e).root}function r(e,r){var s=[],c=e;for(s.push(c);c;){var l=a(c);if(l&&l.length>0){for(var u=0;u<l.length;u++){var p=l[u];if(i(p)){var h=n(p),f=h.olderShadowRoot;f&&s.push(f)}s.push(p)}c=l[l.length-1]}else if(t(c)){if(d(e,c)&&o(r))break;c=c.host,s.push(c)}else c=c.parentNode,c&&s.push(c)}return s}function o(e){if(!e)return!1;switch(e.type){case"abort":case"error":case"select":case"change":case"load":case"reset":case"resize":case"scroll":case"selectstart":return!0}return!1}function i(e){return e instanceof HTMLShadowElement}function a(t){return e.getDestinationInsertionPoints(t)}function s(e,t){if(0===e.length)return t;t instanceof G.Window&&(t=t.document);for(var n=A(t),r=e[0],o=A(r),i=l(n,o),a=0;a<e.length;a++){var s=e[a];if(A(s)===i)return s}return e[e.length-1]}function c(e){for(var t=[];e;e=e.parent)t.push(e);return t}function l(e,t){for(var n=c(e),r=c(t),o=null;n.length>0&&r.length>0;){var i=n.pop(),a=r.pop();if(i!==a)break;o=i}return o}function u(e,t,n){t instanceof G.Window&&(t=t.document);var o,i=A(t),a=A(n),s=r(n,e),o=l(i,a);o||(o=a.root);for(var c=o;c;c=c.parent)for(var u=0;u<s.length;u++){var d=s[u];if(A(d)===c)return d}return null}function d(e,t){return A(e)===A(t)}function p(e){if(!K.get(e)&&(K.set(e,!0),f(V(e),V(e.target)),P)){var t=P;throw P=null,t}}function h(e){switch(e.type){case"load":case"beforeunload":case"unload":return!0}return!1}function f(t,n){if($.get(t))throw new Error("InvalidStateError");$.set(t,!0),e.renderAllPending();var o,i,a;if(h(t)&&!t.bubbles){var s=n;s instanceof G.Document&&(a=s.defaultView)&&(i=s,o=[])}if(!o)if(n instanceof G.Window)a=n,o=[];else if(o=r(n,t),!h(t)){var s=o[o.length-1];s instanceof G.Document&&(a=s.defaultView)}return ne.set(t,o),m(t,o,a,i)&&w(t,o,a,i)&&v(t,o,a,i),J.set(t,re),Y["delete"](t,null),$["delete"](t),t.defaultPrevented}function m(e,t,n,r){var o=oe;if(n&&!g(n,e,o,t,r))return!1;for(var i=t.length-1;i>0;i--)if(!g(t[i],e,o,t,r))return!1;return!0}function w(e,t,n,r){var o=ie,i=t[0]||n;return g(i,e,o,t,r)}function v(e,t,n,r){for(var o=ae,i=1;i<t.length;i++)if(!g(t[i],e,o,t,r))return;n&&t.length>0&&g(n,e,o,t,r)}function g(e,t,n,r,o){var i=z.get(e);if(!i)return!0;var a=o||s(r,e);if(a===e){if(n===oe)return!0;n===ae&&(n=ie)}else if(n===ae&&!t.bubbles)return!0;if("relatedTarget"in t){var c=B(t),l=c.relatedTarget;if(l){if(l instanceof Object&&l.addEventListener){var d=V(l),p=u(t,e,d);if(p===a)return!0}else p=null;Z.set(t,p)}}J.set(t,n);var h=t.type,f=!1;X.set(t,a),Y.set(t,e),i.depth++;for(var m=0,w=i.length;w>m;m++){var v=i[m];if(v.removed)f=!0;else if(!(v.type!==h||!v.capture&&n===oe||v.capture&&n===ae))try{if("function"==typeof v.handler?v.handler.call(e,t):v.handler.handleEvent(t),ee.get(t))return!1}catch(g){P||(P=g)}}if(i.depth--,f&&0===i.depth){var b=i.slice();i.length=0;for(var m=0;m<b.length;m++)b[m].removed||i.push(b[m])}return!Q.get(t)}function b(e,t,n){this.type=e,this.handler=t,this.capture=Boolean(n)}function y(e,t){if(!(e instanceof se))return V(T(se,"Event",e,t));var n=e;return be||"beforeunload"!==n.type||this instanceof M?void U(n,this):new M(n)}function E(e){return e&&e.relatedTarget?Object.create(e,{relatedTarget:{value:B(e.relatedTarget)}}):e}function _(e,t,n){var r=window[e],o=function(t,n){return t instanceof r?void U(t,this):V(T(r,e,t,n))};if(o.prototype=Object.create(t.prototype),n&&W(o.prototype,n),r)try{F(r,o,new r("temp"))}catch(i){F(r,o,document.createEvent(e))}return o}function S(e,t){return function(){arguments[t]=B(arguments[t]);var n=B(this);n[e].apply(n,arguments)}}function T(e,t,n,r){if(ve)return new e(n,E(r));var o=B(document.createEvent(t)),i=we[t],a=[n];return Object.keys(i).forEach(function(e){var t=null!=r&&e in r?r[e]:i[e];"relatedTarget"===e&&(t=B(t)),a.push(t)}),o["init"+t].apply(o,a),o}function M(e){y.call(this,e)}function O(e){return"function"==typeof e?!0:e&&e.handleEvent}function L(e){switch(e){case"DOMAttrModified":case"DOMAttributeNameChanged":case"DOMCharacterDataModified":case"DOMElementNameChanged":case"DOMNodeInserted":case"DOMNodeInsertedIntoDocument":case"DOMNodeRemoved":case"DOMNodeRemovedFromDocument":case"DOMSubtreeModified":return!0}return!1}function N(e){U(e,this)}function C(e){return e instanceof G.ShadowRoot&&(e=e.host),B(e)}function j(e,t){var n=z.get(e);if(n)for(var r=0;r<n.length;r++)if(!n[r].removed&&n[r].type===t)return!0;return!1}function D(e,t){for(var n=B(e);n;n=n.parentNode)if(j(V(n),t))return!0;return!1}function H(e){k(e,Ee)}function x(t,n,o,i){e.renderAllPending();var a=V(_e.call(q(n),o,i));if(!a)return null;var c=r(a,null),l=c.lastIndexOf(t);return-1==l?null:(c=c.slice(0,l),s(c,t))}function R(e){return function(){var t=te.get(this);return t&&t[e]&&t[e].value||null}}function I(e){var t=e.slice(2);return function(n){var r=te.get(this);r||(r=Object.create(null),te.set(this,r));var o=r[e];if(o&&this.removeEventListener(t,o.wrapped,!1),"function"==typeof n){var i=function(t){var r=n.call(this,t);r===!1?t.preventDefault():"onbeforeunload"===e&&"string"==typeof r&&(t.returnValue=r)};this.addEventListener(t,i,!1),r[e]={value:n,wrapped:i}}}}var P,k=e.forwardMethodsToWrapper,A=e.getTreeScope,W=e.mixin,F=e.registerWrapper,U=e.setWrapper,q=e.unsafeUnwrap,B=e.unwrap,V=e.wrap,G=e.wrappers,z=(new WeakMap,new WeakMap),K=new WeakMap,$=new WeakMap,X=new WeakMap,Y=new WeakMap,Z=new WeakMap,J=new WeakMap,Q=new WeakMap,ee=new WeakMap,te=new WeakMap,ne=new WeakMap,re=0,oe=1,ie=2,ae=3;b.prototype={equals:function(e){return this.handler===e.handler&&this.type===e.type&&this.capture===e.capture},get removed(){return null===this.handler},remove:function(){this.handler=null}};var se=window.Event;se.prototype.polymerBlackList_={returnValue:!0,keyLocation:!0},y.prototype={get target(){return X.get(this)},get currentTarget(){return Y.get(this)},get eventPhase(){return J.get(this)},get path(){var e=ne.get(this);return e?e.slice():[]},stopPropagation:function(){Q.set(this,!0)},stopImmediatePropagation:function(){Q.set(this,!0),ee.set(this,!0)}};var ce=function(){var e=document.createEvent("Event");return e.initEvent("test",!0,!0),e.preventDefault(),e.defaultPrevented}();ce||(y.prototype.preventDefault=function(){this.cancelable&&(q(this).preventDefault(),Object.defineProperty(this,"defaultPrevented",{get:function(){return!0},configurable:!0}))}),F(se,y,document.createEvent("Event"));var le=_("UIEvent",y),ue=_("CustomEvent",y),de={get relatedTarget(){var e=Z.get(this);return void 0!==e?e:V(B(this).relatedTarget)}},pe=W({initMouseEvent:S("initMouseEvent",14)},de),he=W({initFocusEvent:S("initFocusEvent",5)},de),fe=_("MouseEvent",le,pe),me=_("FocusEvent",le,he),we=Object.create(null),ve=function(){try{new window.FocusEvent("focus")}catch(e){return!1}return!0}();if(!ve){var ge=function(e,t,n){if(n){var r=we[n];t=W(W({},r),t)}we[e]=t};ge("Event",{bubbles:!1,cancelable:!1}),ge("CustomEvent",{detail:null},"Event"),ge("UIEvent",{view:null,detail:0},"Event"),ge("MouseEvent",{screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,relatedTarget:null},"UIEvent"),ge("FocusEvent",{relatedTarget:null},"UIEvent")}var be=window.BeforeUnloadEvent;M.prototype=Object.create(y.prototype),W(M.prototype,{get returnValue(){return q(this).returnValue},set returnValue(e){q(this).returnValue=e}}),be&&F(be,M);var ye=window.EventTarget,Ee=["addEventListener","removeEventListener","dispatchEvent"];[Node,Window].forEach(function(e){var t=e.prototype;Ee.forEach(function(e){Object.defineProperty(t,e+"_",{value:t[e]})})}),N.prototype={addEventListener:function(e,t,n){if(O(t)&&!L(e)){var r=new b(e,t,n),o=z.get(this);if(o){for(var i=0;i<o.length;i++)if(r.equals(o[i]))return}else o=[],o.depth=0,z.set(this,o);o.push(r);var a=C(this);a.addEventListener_(e,p,!0)}},removeEventListener:function(e,t,n){n=Boolean(n);var r=z.get(this);if(r){for(var o=0,i=!1,a=0;a<r.length;a++)r[a].type===e&&r[a].capture===n&&(o++,r[a].handler===t&&(i=!0,r[a].remove()));if(i&&1===o){var s=C(this);s.removeEventListener_(e,p,!0)}}},dispatchEvent:function(t){var n=B(t),r=n.type;K.set(n,!1),e.renderAllPending();var o;D(this,r)||(o=function(){},this.addEventListener(r,o,!0));try{return B(this).dispatchEvent_(n)}finally{o&&this.removeEventListener(r,o,!0)}}},ye&&F(ye,N);var _e=document.elementFromPoint;e.elementFromPoint=x,e.getEventHandlerGetter=R,e.getEventHandlerSetter=I,e.wrapEventTargetMethods=H,e.wrappers.BeforeUnloadEvent=M,e.wrappers.CustomEvent=ue,e.wrappers.Event=y,e.wrappers.EventTarget=N,e.wrappers.FocusEvent=me,e.wrappers.MouseEvent=fe,e.wrappers.UIEvent=le}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e,t){Object.defineProperty(e,t,m)}function n(e){l(e,this)}function r(){this.length=0,t(this,"length")}function o(e){for(var t=new r,o=0;o<e.length;o++)t[o]=new n(e[o]);return t.length=o,t}function i(e){a.call(this,e)}var a=e.wrappers.UIEvent,s=e.mixin,c=e.registerWrapper,l=e.setWrapper,u=e.unsafeUnwrap,d=e.wrap,p=window.TouchEvent;if(p){var h;try{h=document.createEvent("TouchEvent")}catch(f){return}var m={enumerable:!1};n.prototype={get target(){return d(u(this).target)}};var w={configurable:!0,enumerable:!0,get:null};["clientX","clientY","screenX","screenY","pageX","pageY","identifier","webkitRadiusX","webkitRadiusY","webkitRotationAngle","webkitForce"].forEach(function(e){w.get=function(){return u(this)[e]},Object.defineProperty(n.prototype,e,w)}),r.prototype={item:function(e){return this[e]}},i.prototype=Object.create(a.prototype),s(i.prototype,{get touches(){return o(u(this).touches)},get targetTouches(){return o(u(this).targetTouches)},get changedTouches(){return o(u(this).changedTouches)},initTouchEvent:function(){throw new Error("Not implemented")}}),c(p,i,h),e.wrappers.Touch=n,e.wrappers.TouchEvent=i,e.wrappers.TouchList=r}}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e,t){Object.defineProperty(e,t,s)}function n(){this.length=0,t(this,"length")}function r(e){if(null==e)return e;for(var t=new n,r=0,o=e.length;o>r;r++)t[r]=a(e[r]);return t.length=o,t}function o(e,t){e.prototype[t]=function(){return r(i(this)[t].apply(i(this),arguments))}}var i=e.unsafeUnwrap,a=e.wrap,s={enumerable:!1};n.prototype={item:function(e){return this[e]}},t(n.prototype,"item"),e.wrappers.NodeList=n,e.addWrapNodeListMethod=o,e.wrapNodeList=r}(window.ShadowDOMPolyfill),function(e){"use strict";e.wrapHTMLCollection=e.wrapNodeList,e.wrappers.HTMLCollection=e.wrappers.NodeList}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){O(e instanceof _)}function n(e){var t=new T;return t[0]=e,t.length=1,t}function r(e,t,n){N(t,"childList",{removedNodes:n,previousSibling:e.previousSibling,nextSibling:e.nextSibling})}function o(e,t){N(e,"childList",{removedNodes:t})}function i(e,t,r,o){if(e instanceof DocumentFragment){var i=s(e);U=!0;for(var a=i.length-1;a>=0;a--)e.removeChild(i[a]),i[a].parentNode_=t;U=!1;for(var a=0;a<i.length;a++)i[a].previousSibling_=i[a-1]||r,i[a].nextSibling_=i[a+1]||o;return r&&(r.nextSibling_=i[0]),o&&(o.previousSibling_=i[i.length-1]),i}var i=n(e),c=e.parentNode;return c&&c.removeChild(e),e.parentNode_=t,e.previousSibling_=r,e.nextSibling_=o,r&&(r.nextSibling_=e),o&&(o.previousSibling_=e),i}function a(e){if(e instanceof DocumentFragment)return s(e);var t=n(e),o=e.parentNode;return o&&r(e,o,t),t}function s(e){for(var t=new T,n=0,r=e.firstChild;r;r=r.nextSibling)t[n++]=r;return t.length=n,o(e,t),t}function c(e){return e}function l(e,t){R(e,t),e.nodeIsInserted_()}function u(e,t){for(var n=C(t),r=0;r<e.length;r++)l(e[r],n)}function d(e){R(e,new M(e,null))}function p(e){for(var t=0;t<e.length;t++)d(e[t])}function h(e,t){var n=e.nodeType===_.DOCUMENT_NODE?e:e.ownerDocument;n!==t.ownerDocument&&n.adoptNode(t)}function f(t,n){if(n.length){var r=t.ownerDocument;if(r!==n[0].ownerDocument)for(var o=0;o<n.length;o++)e.adoptNodeNoRemove(n[o],r)}}function m(e,t){f(e,t);var n=t.length;if(1===n)return P(t[0]);for(var r=P(e.ownerDocument.createDocumentFragment()),o=0;n>o;o++)r.appendChild(P(t[o]));return r}function w(e){if(void 0!==e.firstChild_)for(var t=e.firstChild_;t;){var n=t;t=t.nextSibling_,n.parentNode_=n.previousSibling_=n.nextSibling_=void 0}e.firstChild_=e.lastChild_=void 0}function v(e){if(e.invalidateShadowRenderer()){for(var t=e.firstChild;t;){O(t.parentNode===e);var n=t.nextSibling,r=P(t),o=r.parentNode;o&&X.call(o,r),t.previousSibling_=t.nextSibling_=t.parentNode_=null,t=n}e.firstChild_=e.lastChild_=null}else for(var n,i=P(e),a=i.firstChild;a;)n=a.nextSibling,X.call(i,a),a=n}function g(e){var t=e.parentNode;return t&&t.invalidateShadowRenderer()}function b(e){for(var t,n=0;n<e.length;n++)t=e[n],t.parentNode.removeChild(t)}function y(e,t,n){var r;if(r=A(n?q.call(n,I(e),!1):B.call(I(e),!1)),t){for(var o=e.firstChild;o;o=o.nextSibling)r.appendChild(y(o,!0,n));if(e instanceof F.HTMLTemplateElement)for(var i=r.content,o=e.content.firstChild;o;o=o.nextSibling)i.appendChild(y(o,!0,n))}return r}function E(e,t){if(!t||C(e)!==C(t))return!1;for(var n=t;n;n=n.parentNode)if(n===e)return!0;return!1}function _(e){O(e instanceof V),S.call(this,e),this.parentNode_=void 0,this.firstChild_=void 0,this.lastChild_=void 0,this.nextSibling_=void 0,this.previousSibling_=void 0,this.treeScope_=void 0}var S=e.wrappers.EventTarget,T=e.wrappers.NodeList,M=e.TreeScope,O=e.assert,L=e.defineWrapGetter,N=e.enqueueMutation,C=e.getTreeScope,j=e.isWrapper,D=e.mixin,H=e.registerTransientObservers,x=e.registerWrapper,R=e.setTreeScope,I=e.unsafeUnwrap,P=e.unwrap,k=e.unwrapIfNeeded,A=e.wrap,W=e.wrapIfNeeded,F=e.wrappers,U=!1,q=document.importNode,B=window.Node.prototype.cloneNode,V=window.Node,G=window.DocumentFragment,z=(V.prototype.appendChild,V.prototype.compareDocumentPosition),K=V.prototype.isEqualNode,$=V.prototype.insertBefore,X=V.prototype.removeChild,Y=V.prototype.replaceChild,Z=/Trident|Edge/.test(navigator.userAgent),J=Z?function(e,t){try{X.call(e,t)}catch(n){if(!(e instanceof G))throw n}}:function(e,t){X.call(e,t)};_.prototype=Object.create(S.prototype),D(_.prototype,{appendChild:function(e){return this.insertBefore(e,null)},insertBefore:function(e,n){t(e);var r;n?j(n)?r=P(n):(r=n,n=A(r)):(n=null,r=null),n&&O(n.parentNode===this);var o,s=n?n.previousSibling:this.lastChild,c=!this.invalidateShadowRenderer()&&!g(e);if(o=c?a(e):i(e,this,s,n),c)h(this,e),w(this),$.call(I(this),P(e),r);else{s||(this.firstChild_=o[0]),n||(this.lastChild_=o[o.length-1],void 0===this.firstChild_&&(this.firstChild_=this.firstChild));var l=r?r.parentNode:I(this);l?$.call(l,m(this,o),r):f(this,o)}return N(this,"childList",{addedNodes:o,nextSibling:n,previousSibling:s}),u(o,this),e},removeChild:function(e){if(t(e),e.parentNode!==this){for(var r=!1,o=(this.childNodes,this.firstChild);o;o=o.nextSibling)if(o===e){r=!0;break}if(!r)throw new Error("NotFoundError")}var i=P(e),a=e.nextSibling,s=e.previousSibling;if(this.invalidateShadowRenderer()){var c=this.firstChild,l=this.lastChild,u=i.parentNode;u&&J(u,i),c===e&&(this.firstChild_=a),l===e&&(this.lastChild_=s),s&&(s.nextSibling_=a),a&&(a.previousSibling_=s),e.previousSibling_=e.nextSibling_=e.parentNode_=void 0}else w(this),J(I(this),i);return U||N(this,"childList",{removedNodes:n(e),nextSibling:a,previousSibling:s}),H(this,e),e},replaceChild:function(e,r){t(e);var o;if(j(r)?o=P(r):(o=r,r=A(o)),r.parentNode!==this)throw new Error("NotFoundError");var s,c=r.nextSibling,l=r.previousSibling,p=!this.invalidateShadowRenderer()&&!g(e);return p?s=a(e):(c===e&&(c=e.nextSibling),s=i(e,this,l,c)),p?(h(this,e),w(this),Y.call(I(this),P(e),o)):(this.firstChild===r&&(this.firstChild_=s[0]),this.lastChild===r&&(this.lastChild_=s[s.length-1]),r.previousSibling_=r.nextSibling_=r.parentNode_=void 0,o.parentNode&&Y.call(o.parentNode,m(this,s),o)),N(this,"childList",{addedNodes:s,removedNodes:n(r),nextSibling:c,previousSibling:l}),d(r),u(s,this),r},nodeIsInserted_:function(){for(var e=this.firstChild;e;e=e.nextSibling)e.nodeIsInserted_()},hasChildNodes:function(){return null!==this.firstChild},get parentNode(){return void 0!==this.parentNode_?this.parentNode_:A(I(this).parentNode)},get firstChild(){return void 0!==this.firstChild_?this.firstChild_:A(I(this).firstChild)},get lastChild(){return void 0!==this.lastChild_?this.lastChild_:A(I(this).lastChild)},get nextSibling(){return void 0!==this.nextSibling_?this.nextSibling_:A(I(this).nextSibling)},get previousSibling(){return void 0!==this.previousSibling_?this.previousSibling_:A(I(this).previousSibling)},get parentElement(){for(var e=this.parentNode;e&&e.nodeType!==_.ELEMENT_NODE;)e=e.parentNode;return e},get textContent(){for(var e="",t=this.firstChild;t;t=t.nextSibling)t.nodeType!=_.COMMENT_NODE&&(e+=t.textContent);return e},set textContent(e){null==e&&(e="");var t=c(this.childNodes);if(this.invalidateShadowRenderer()){if(v(this),""!==e){var n=I(this).ownerDocument.createTextNode(e);this.appendChild(n)}}else w(this),I(this).textContent=e;var r=c(this.childNodes);N(this,"childList",{addedNodes:r,removedNodes:t}),p(t),u(r,this)},get childNodes(){for(var e=new T,t=0,n=this.firstChild;n;n=n.nextSibling)e[t++]=n;return e.length=t,e},cloneNode:function(e){return y(this,e)},contains:function(e){return E(this,W(e))},compareDocumentPosition:function(e){return z.call(I(this),k(e))},isEqualNode:function(e){return K.call(I(this),k(e))},normalize:function(){for(var e,t,n=c(this.childNodes),r=[],o="",i=0;i<n.length;i++)t=n[i],t.nodeType===_.TEXT_NODE?e||t.data.length?e?(o+=t.data,r.push(t)):e=t:this.removeChild(t):(e&&r.length&&(e.data+=o,b(r)),r=[],o="",e=null,t.childNodes.length&&t.normalize());e&&r.length&&(e.data+=o,b(r))}}),L(_,"ownerDocument"),x(V,_,document.createDocumentFragment()),delete _.prototype.querySelector,delete _.prototype.querySelectorAll,_.prototype=D(Object.create(S.prototype),_.prototype),e.cloneNode=y,e.nodeWasAdded=l,e.nodeWasRemoved=d,e.nodesWereAdded=u,e.nodesWereRemoved=p,e.originalInsertBefore=$,e.originalRemoveChild=X,e.snapshotNodeList=c,e.wrappers.Node=_}(window.ShadowDOMPolyfill),function(e){"use strict";function t(t,n,r,o){for(var i=null,a=null,s=0,c=t.length;c>s;s++)i=b(t[s]),!o&&(a=v(i).root)&&a instanceof e.wrappers.ShadowRoot||(r[n++]=i);return n}function n(e){return String(e).replace(/\/deep\/|::shadow|>>>/g," ")}function r(e){return String(e).replace(/:host\(([^\s]+)\)/g,"$1").replace(/([^\s]):host/g,"$1").replace(":host","*").replace(/\^|\/shadow\/|\/shadow-deep\/|::shadow|\/deep\/|::content|>>>/g," ")}function o(e,t){for(var n,r=e.firstElementChild;r;){if(r.matches(t))return r;if(n=o(r,t))return n;r=r.nextElementSibling}return null}function i(e,t){return e.matches(t)}function a(e,t,n){var r=e.localName;return r===t||r===n&&e.namespaceURI===j}function s(){return!0}function c(e,t,n){return e.localName===n}function l(e,t){return e.namespaceURI===t}function u(e,t,n){return e.namespaceURI===t&&e.localName===n}function d(e,t,n,r,o,i){for(var a=e.firstElementChild;a;)r(a,o,i)&&(n[t++]=a),t=d(a,t,n,r,o,i),a=a.nextElementSibling;return t}function p(n,r,o,i,a){var s,c=g(this),l=v(this).root;if(l instanceof e.wrappers.ShadowRoot)return d(this,r,o,n,i,null);if(c instanceof N)s=S.call(c,i);else{if(!(c instanceof C))return d(this,r,o,n,i,null);s=_.call(c,i)}return t(s,r,o,a)}function h(n,r,o,i,a){var s,c=g(this),l=v(this).root;if(l instanceof e.wrappers.ShadowRoot)return d(this,r,o,n,i,a);if(c instanceof N)s=M.call(c,i,a);else{if(!(c instanceof C))return d(this,r,o,n,i,a);s=T.call(c,i,a)}return t(s,r,o,!1)}function f(n,r,o,i,a){var s,c=g(this),l=v(this).root;if(l instanceof e.wrappers.ShadowRoot)return d(this,r,o,n,i,a);if(c instanceof N)s=L.call(c,i,a);else{if(!(c instanceof C))return d(this,r,o,n,i,a);s=O.call(c,i,a)}return t(s,r,o,!1)}var m=e.wrappers.HTMLCollection,w=e.wrappers.NodeList,v=e.getTreeScope,g=e.unsafeUnwrap,b=e.wrap,y=document.querySelector,E=document.documentElement.querySelector,_=document.querySelectorAll,S=document.documentElement.querySelectorAll,T=document.getElementsByTagName,M=document.documentElement.getElementsByTagName,O=document.getElementsByTagNameNS,L=document.documentElement.getElementsByTagNameNS,N=window.Element,C=window.HTMLDocument||window.Document,j="http://www.w3.org/1999/xhtml",D={
querySelector:function(t){var r=n(t),i=r!==t;t=r;var a,s=g(this),c=v(this).root;if(c instanceof e.wrappers.ShadowRoot)return o(this,t);if(s instanceof N)a=b(E.call(s,t));else{if(!(s instanceof C))return o(this,t);a=b(y.call(s,t))}return a&&!i&&(c=v(a).root)&&c instanceof e.wrappers.ShadowRoot?o(this,t):a},querySelectorAll:function(e){var t=n(e),r=t!==e;e=t;var o=new w;return o.length=p.call(this,i,0,o,e,r),o}},H={matches:function(t){return t=r(t),e.originalMatches.call(g(this),t)}},x={getElementsByTagName:function(e){var t=new m,n="*"===e?s:a;return t.length=h.call(this,n,0,t,e,e.toLowerCase()),t},getElementsByClassName:function(e){return this.querySelectorAll("."+e)},getElementsByTagNameNS:function(e,t){var n=new m,r=null;return r="*"===e?"*"===t?s:c:"*"===t?l:u,n.length=f.call(this,r,0,n,e||null,t),n}};e.GetElementsByInterface=x,e.SelectorsInterface=D,e.MatchesInterface=H}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){for(;e&&e.nodeType!==Node.ELEMENT_NODE;)e=e.nextSibling;return e}function n(e){for(;e&&e.nodeType!==Node.ELEMENT_NODE;)e=e.previousSibling;return e}var r=e.wrappers.NodeList,o={get firstElementChild(){return t(this.firstChild)},get lastElementChild(){return n(this.lastChild)},get childElementCount(){for(var e=0,t=this.firstElementChild;t;t=t.nextElementSibling)e++;return e},get children(){for(var e=new r,t=0,n=this.firstElementChild;n;n=n.nextElementSibling)e[t++]=n;return e.length=t,e},remove:function(){var e=this.parentNode;e&&e.removeChild(this)}},i={get nextElementSibling(){return t(this.nextSibling)},get previousElementSibling(){return n(this.previousSibling)}},a={getElementById:function(e){return/[ \t\n\r\f]/.test(e)?null:this.querySelector('[id="'+e+'"]')}};e.ChildNodeInterface=i,e.NonElementParentNodeInterface=a,e.ParentNodeInterface=o}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){r.call(this,e)}var n=e.ChildNodeInterface,r=e.wrappers.Node,o=e.enqueueMutation,i=e.mixin,a=e.registerWrapper,s=e.unsafeUnwrap,c=window.CharacterData;t.prototype=Object.create(r.prototype),i(t.prototype,{get nodeValue(){return this.data},set nodeValue(e){this.data=e},get textContent(){return this.data},set textContent(e){this.data=e},get data(){return s(this).data},set data(e){var t=s(this).data;o(this,"characterData",{oldValue:t}),s(this).data=e}}),i(t.prototype,n),a(c,t,document.createTextNode("")),e.wrappers.CharacterData=t}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){return e>>>0}function n(e){r.call(this,e)}var r=e.wrappers.CharacterData,o=(e.enqueueMutation,e.mixin),i=e.registerWrapper,a=window.Text;n.prototype=Object.create(r.prototype),o(n.prototype,{splitText:function(e){e=t(e);var n=this.data;if(e>n.length)throw new Error("IndexSizeError");var r=n.slice(0,e),o=n.slice(e);this.data=r;var i=this.ownerDocument.createTextNode(o);return this.parentNode&&this.parentNode.insertBefore(i,this.nextSibling),i}}),i(a,n,document.createTextNode("")),e.wrappers.Text=n}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){return i(e).getAttribute("class")}function n(e,t){a(e,"attributes",{name:"class",namespace:null,oldValue:t})}function r(t){e.invalidateRendererBasedOnAttribute(t,"class")}function o(e,o,i){var a=e.ownerElement_;if(null==a)return o.apply(e,i);var s=t(a),c=o.apply(e,i);return t(a)!==s&&(n(a,s),r(a)),c}if(!window.DOMTokenList)return void console.warn("Missing DOMTokenList prototype, please include a compatible classList polyfill such as http://goo.gl/uTcepH.");var i=e.unsafeUnwrap,a=e.enqueueMutation,s=DOMTokenList.prototype.add;DOMTokenList.prototype.add=function(){o(this,s,arguments)};var c=DOMTokenList.prototype.remove;DOMTokenList.prototype.remove=function(){o(this,c,arguments)};var l=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(){return o(this,l,arguments)}}(window.ShadowDOMPolyfill),function(e){"use strict";function t(t,n){var r=t.parentNode;if(r&&r.shadowRoot){var o=e.getRendererForHost(r);o.dependsOnAttribute(n)&&o.invalidate()}}function n(e,t,n){u(e,"attributes",{name:t,namespace:null,oldValue:n})}function r(e){a.call(this,e)}var o=e.ChildNodeInterface,i=e.GetElementsByInterface,a=e.wrappers.Node,s=e.ParentNodeInterface,c=e.SelectorsInterface,l=e.MatchesInterface,u=(e.addWrapNodeListMethod,e.enqueueMutation),d=e.mixin,p=(e.oneOf,e.registerWrapper),h=e.unsafeUnwrap,f=e.wrappers,m=window.Element,w=["matches","mozMatchesSelector","msMatchesSelector","webkitMatchesSelector"].filter(function(e){return m.prototype[e]}),v=w[0],g=m.prototype[v],b=new WeakMap;r.prototype=Object.create(a.prototype),d(r.prototype,{createShadowRoot:function(){var t=new f.ShadowRoot(this);h(this).polymerShadowRoot_=t;var n=e.getRendererForHost(this);return n.invalidate(),t},get shadowRoot(){return h(this).polymerShadowRoot_||null},setAttribute:function(e,r){var o=h(this).getAttribute(e);h(this).setAttribute(e,r),n(this,e,o),t(this,e)},removeAttribute:function(e){var r=h(this).getAttribute(e);h(this).removeAttribute(e),n(this,e,r),t(this,e)},get classList(){var e=b.get(this);if(!e){if(e=h(this).classList,!e)return;e.ownerElement_=this,b.set(this,e)}return e},get className(){return h(this).className},set className(e){this.setAttribute("class",e)},get id(){return h(this).id},set id(e){this.setAttribute("id",e)}}),w.forEach(function(e){"matches"!==e&&(r.prototype[e]=function(e){return this.matches(e)})}),m.prototype.webkitCreateShadowRoot&&(r.prototype.webkitCreateShadowRoot=r.prototype.createShadowRoot),d(r.prototype,o),d(r.prototype,i),d(r.prototype,s),d(r.prototype,c),d(r.prototype,l),p(m,r,document.createElementNS(null,"x")),e.invalidateRendererBasedOnAttribute=t,e.matchesNames=w,e.originalMatches=g,e.wrappers.Element=r}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){switch(e){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"":return"&nbsp;"}}function n(e){return e.replace(L,t)}function r(e){return e.replace(N,t)}function o(e){for(var t={},n=0;n<e.length;n++)t[e[n]]=!0;return t}function i(e){if(e.namespaceURI!==D)return!0;var t=e.ownerDocument.doctype;return t&&t.publicId&&t.systemId}function a(e,t){switch(e.nodeType){case Node.ELEMENT_NODE:for(var o,a=e.tagName.toLowerCase(),c="<"+a,l=e.attributes,u=0;o=l[u];u++)c+=" "+o.name+'="'+n(o.value)+'"';return C[a]?(i(e)&&(c+="/"),c+">"):c+">"+s(e)+"</"+a+">";case Node.TEXT_NODE:var d=e.data;return t&&j[t.localName]?d:r(d);case Node.COMMENT_NODE:return"<!--"+e.data+"-->";default:throw console.error(e),new Error("not implemented")}}function s(e){e instanceof O.HTMLTemplateElement&&(e=e.content);for(var t="",n=e.firstChild;n;n=n.nextSibling)t+=a(n,e);return t}function c(e,t,n){var r=n||"div";e.textContent="";var o=T(e.ownerDocument.createElement(r));o.innerHTML=t;for(var i;i=o.firstChild;)e.appendChild(M(i))}function l(e){m.call(this,e)}function u(e,t){var n=T(e.cloneNode(!1));n.innerHTML=t;for(var r,o=T(document.createDocumentFragment());r=n.firstChild;)o.appendChild(r);return M(o)}function d(t){return function(){return e.renderAllPending(),S(this)[t]}}function p(e){w(l,e,d(e))}function h(t){Object.defineProperty(l.prototype,t,{get:d(t),set:function(n){e.renderAllPending(),S(this)[t]=n},configurable:!0,enumerable:!0})}function f(t){Object.defineProperty(l.prototype,t,{value:function(){return e.renderAllPending(),S(this)[t].apply(S(this),arguments)},configurable:!0,enumerable:!0})}var m=e.wrappers.Element,w=e.defineGetter,v=e.enqueueMutation,g=e.mixin,b=e.nodesWereAdded,y=e.nodesWereRemoved,E=e.registerWrapper,_=e.snapshotNodeList,S=e.unsafeUnwrap,T=e.unwrap,M=e.wrap,O=e.wrappers,L=/[&\u00A0"]/g,N=/[&\u00A0<>]/g,C=o(["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"]),j=o(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]),D="http://www.w3.org/1999/xhtml",H=/MSIE/.test(navigator.userAgent),x=window.HTMLElement,R=window.HTMLTemplateElement;l.prototype=Object.create(m.prototype),g(l.prototype,{get innerHTML(){return s(this)},set innerHTML(e){if(H&&j[this.localName])return void(this.textContent=e);var t=_(this.childNodes);this.invalidateShadowRenderer()?this instanceof O.HTMLTemplateElement?c(this.content,e):c(this,e,this.tagName):!R&&this instanceof O.HTMLTemplateElement?c(this.content,e):S(this).innerHTML=e;var n=_(this.childNodes);v(this,"childList",{addedNodes:n,removedNodes:t}),y(t),b(n,this)},get outerHTML(){return a(this,this.parentNode)},set outerHTML(e){var t=this.parentNode;if(t){t.invalidateShadowRenderer();var n=u(t,e);t.replaceChild(n,this)}},insertAdjacentHTML:function(e,t){var n,r;switch(String(e).toLowerCase()){case"beforebegin":n=this.parentNode,r=this;break;case"afterend":n=this.parentNode,r=this.nextSibling;break;case"afterbegin":n=this,r=this.firstChild;break;case"beforeend":n=this,r=null;break;default:return}var o=u(n,t);n.insertBefore(o,r)},get hidden(){return this.hasAttribute("hidden")},set hidden(e){e?this.setAttribute("hidden",""):this.removeAttribute("hidden")}}),["clientHeight","clientLeft","clientTop","clientWidth","offsetHeight","offsetLeft","offsetTop","offsetWidth","scrollHeight","scrollWidth"].forEach(p),["scrollLeft","scrollTop"].forEach(h),["focus","getBoundingClientRect","getClientRects","scrollIntoView"].forEach(f),E(x,l,document.createElement("b")),e.wrappers.HTMLElement=l,e.getInnerHTML=s,e.setInnerHTML=c}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){n.call(this,e)}var n=e.wrappers.HTMLElement,r=e.mixin,o=e.registerWrapper,i=e.unsafeUnwrap,a=e.wrap,s=window.HTMLCanvasElement;t.prototype=Object.create(n.prototype),r(t.prototype,{getContext:function(){var e=i(this).getContext.apply(i(this),arguments);return e&&a(e)}}),o(s,t,document.createElement("canvas")),e.wrappers.HTMLCanvasElement=t}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){n.call(this,e)}var n=e.wrappers.HTMLElement,r=e.mixin,o=e.registerWrapper,i=window.HTMLContentElement;t.prototype=Object.create(n.prototype),r(t.prototype,{constructor:t,get select(){return this.getAttribute("select")},set select(e){this.setAttribute("select",e)},setAttribute:function(e,t){n.prototype.setAttribute.call(this,e,t),"select"===String(e).toLowerCase()&&this.invalidateShadowRenderer(!0)}}),i&&o(i,t),e.wrappers.HTMLContentElement=t}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){n.call(this,e)}var n=e.wrappers.HTMLElement,r=e.mixin,o=e.registerWrapper,i=e.wrapHTMLCollection,a=e.unwrap,s=window.HTMLFormElement;t.prototype=Object.create(n.prototype),r(t.prototype,{get elements(){return i(a(this).elements)}}),o(s,t,document.createElement("form")),e.wrappers.HTMLFormElement=t}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){r.call(this,e)}function n(e,t){if(!(this instanceof n))throw new TypeError("DOM object constructor cannot be called as a function.");var o=i(document.createElement("img"));r.call(this,o),a(o,this),void 0!==e&&(o.width=e),void 0!==t&&(o.height=t)}var r=e.wrappers.HTMLElement,o=e.registerWrapper,i=e.unwrap,a=e.rewrap,s=window.HTMLImageElement;t.prototype=Object.create(r.prototype),o(s,t,document.createElement("img")),n.prototype=t.prototype,e.wrappers.HTMLImageElement=t,e.wrappers.Image=n}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){n.call(this,e)}var n=e.wrappers.HTMLElement,r=(e.mixin,e.wrappers.NodeList,e.registerWrapper),o=window.HTMLShadowElement;t.prototype=Object.create(n.prototype),t.prototype.constructor=t,o&&r(o,t),e.wrappers.HTMLShadowElement=t}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){if(!e.defaultView)return e;var t=d.get(e);if(!t){for(t=e.implementation.createHTMLDocument("");t.lastChild;)t.removeChild(t.lastChild);d.set(e,t)}return t}function n(e){for(var n,r=t(e.ownerDocument),o=c(r.createDocumentFragment());n=e.firstChild;)o.appendChild(n);return o}function r(e){if(o.call(this,e),!p){var t=n(e);u.set(this,l(t))}}var o=e.wrappers.HTMLElement,i=e.mixin,a=e.registerWrapper,s=e.unsafeUnwrap,c=e.unwrap,l=e.wrap,u=new WeakMap,d=new WeakMap,p=window.HTMLTemplateElement;r.prototype=Object.create(o.prototype),i(r.prototype,{constructor:r,get content(){return p?l(s(this).content):u.get(this)}}),p&&a(p,r),e.wrappers.HTMLTemplateElement=r}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){n.call(this,e)}var n=e.wrappers.HTMLElement,r=e.registerWrapper,o=window.HTMLMediaElement;o&&(t.prototype=Object.create(n.prototype),r(o,t,document.createElement("audio")),e.wrappers.HTMLMediaElement=t)}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){r.call(this,e)}function n(e){if(!(this instanceof n))throw new TypeError("DOM object constructor cannot be called as a function.");var t=i(document.createElement("audio"));r.call(this,t),a(t,this),t.setAttribute("preload","auto"),void 0!==e&&t.setAttribute("src",e)}var r=e.wrappers.HTMLMediaElement,o=e.registerWrapper,i=e.unwrap,a=e.rewrap,s=window.HTMLAudioElement;s&&(t.prototype=Object.create(r.prototype),o(s,t,document.createElement("audio")),n.prototype=t.prototype,e.wrappers.HTMLAudioElement=t,e.wrappers.Audio=n)}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){return e.replace(/\s+/g," ").trim()}function n(e){o.call(this,e)}function r(e,t,n,i){if(!(this instanceof r))throw new TypeError("DOM object constructor cannot be called as a function.");var a=c(document.createElement("option"));o.call(this,a),s(a,this),void 0!==e&&(a.text=e),void 0!==t&&a.setAttribute("value",t),n===!0&&a.setAttribute("selected",""),a.selected=i===!0}var o=e.wrappers.HTMLElement,i=e.mixin,a=e.registerWrapper,s=e.rewrap,c=e.unwrap,l=e.wrap,u=window.HTMLOptionElement;n.prototype=Object.create(o.prototype),i(n.prototype,{get text(){return t(this.textContent)},set text(e){this.textContent=t(String(e))},get form(){return l(c(this).form)}}),a(u,n,document.createElement("option")),r.prototype=n.prototype,e.wrappers.HTMLOptionElement=n,e.wrappers.Option=r}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){n.call(this,e)}var n=e.wrappers.HTMLElement,r=e.mixin,o=e.registerWrapper,i=e.unwrap,a=e.wrap,s=window.HTMLSelectElement;t.prototype=Object.create(n.prototype),r(t.prototype,{add:function(e,t){"object"==typeof t&&(t=i(t)),i(this).add(i(e),t)},remove:function(e){return void 0===e?void n.prototype.remove.call(this):("object"==typeof e&&(e=i(e)),void i(this).remove(e))},get form(){return a(i(this).form)}}),o(s,t,document.createElement("select")),e.wrappers.HTMLSelectElement=t}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){n.call(this,e)}var n=e.wrappers.HTMLElement,r=e.mixin,o=e.registerWrapper,i=e.unwrap,a=e.wrap,s=e.wrapHTMLCollection,c=window.HTMLTableElement;t.prototype=Object.create(n.prototype),r(t.prototype,{get caption(){return a(i(this).caption)},createCaption:function(){return a(i(this).createCaption())},get tHead(){return a(i(this).tHead)},createTHead:function(){return a(i(this).createTHead())},createTFoot:function(){return a(i(this).createTFoot())},get tFoot(){return a(i(this).tFoot)},get tBodies(){return s(i(this).tBodies)},createTBody:function(){return a(i(this).createTBody())},get rows(){return s(i(this).rows)},insertRow:function(e){return a(i(this).insertRow(e))}}),o(c,t,document.createElement("table")),e.wrappers.HTMLTableElement=t}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){n.call(this,e)}var n=e.wrappers.HTMLElement,r=e.mixin,o=e.registerWrapper,i=e.wrapHTMLCollection,a=e.unwrap,s=e.wrap,c=window.HTMLTableSectionElement;t.prototype=Object.create(n.prototype),r(t.prototype,{constructor:t,get rows(){return i(a(this).rows)},insertRow:function(e){return s(a(this).insertRow(e))}}),o(c,t,document.createElement("thead")),e.wrappers.HTMLTableSectionElement=t}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){n.call(this,e)}var n=e.wrappers.HTMLElement,r=e.mixin,o=e.registerWrapper,i=e.wrapHTMLCollection,a=e.unwrap,s=e.wrap,c=window.HTMLTableRowElement;t.prototype=Object.create(n.prototype),r(t.prototype,{get cells(){return i(a(this).cells)},insertCell:function(e){return s(a(this).insertCell(e))}}),o(c,t,document.createElement("tr")),e.wrappers.HTMLTableRowElement=t}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){switch(e.localName){case"content":return new n(e);case"shadow":return new o(e);case"template":return new i(e)}r.call(this,e)}var n=e.wrappers.HTMLContentElement,r=e.wrappers.HTMLElement,o=e.wrappers.HTMLShadowElement,i=e.wrappers.HTMLTemplateElement,a=(e.mixin,e.registerWrapper),s=window.HTMLUnknownElement;t.prototype=Object.create(r.prototype),a(s,t),e.wrappers.HTMLUnknownElement=t}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){n.call(this,e)}var n=e.wrappers.Element,r=e.wrappers.HTMLElement,o=e.registerWrapper,i=(e.defineWrapGetter,e.unsafeUnwrap),a=e.wrap,s=e.mixin,c="http://www.w3.org/2000/svg",l=window.SVGElement,u=document.createElementNS(c,"title");if(!("classList"in u)){var d=Object.getOwnPropertyDescriptor(n.prototype,"classList");Object.defineProperty(r.prototype,"classList",d),delete n.prototype.classList}t.prototype=Object.create(n.prototype),s(t.prototype,{get ownerSVGElement(){return a(i(this).ownerSVGElement)}}),o(l,t,document.createElementNS(c,"title")),e.wrappers.SVGElement=t}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){p.call(this,e)}var n=e.mixin,r=e.registerWrapper,o=e.unwrap,i=e.wrap,a=window.SVGUseElement,s="http://www.w3.org/2000/svg",c=i(document.createElementNS(s,"g")),l=document.createElementNS(s,"use"),u=c.constructor,d=Object.getPrototypeOf(u.prototype),p=d.constructor;t.prototype=Object.create(d),"instanceRoot"in l&&n(t.prototype,{get instanceRoot(){return i(o(this).instanceRoot)},get animatedInstanceRoot(){return i(o(this).animatedInstanceRoot)}}),r(a,t,l),e.wrappers.SVGUseElement=t}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){n.call(this,e)}var n=e.wrappers.EventTarget,r=e.mixin,o=e.registerWrapper,i=e.unsafeUnwrap,a=e.wrap,s=window.SVGElementInstance;s&&(t.prototype=Object.create(n.prototype),r(t.prototype,{get correspondingElement(){return a(i(this).correspondingElement)},get correspondingUseElement(){return a(i(this).correspondingUseElement)},get parentNode(){return a(i(this).parentNode)},get childNodes(){throw new Error("Not implemented")},get firstChild(){return a(i(this).firstChild)},get lastChild(){return a(i(this).lastChild)},get previousSibling(){return a(i(this).previousSibling)},get nextSibling(){return a(i(this).nextSibling)}}),o(s,t),e.wrappers.SVGElementInstance=t)}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){o(e,this)}var n=e.mixin,r=e.registerWrapper,o=e.setWrapper,i=e.unsafeUnwrap,a=e.unwrap,s=e.unwrapIfNeeded,c=e.wrap,l=window.CanvasRenderingContext2D;n(t.prototype,{get canvas(){return c(i(this).canvas)},drawImage:function(){arguments[0]=s(arguments[0]),i(this).drawImage.apply(i(this),arguments)},createPattern:function(){return arguments[0]=a(arguments[0]),i(this).createPattern.apply(i(this),arguments)}}),r(l,t,document.createElement("canvas").getContext("2d")),e.wrappers.CanvasRenderingContext2D=t}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){i(e,this)}var n=e.addForwardingProperties,r=e.mixin,o=e.registerWrapper,i=e.setWrapper,a=e.unsafeUnwrap,s=e.unwrapIfNeeded,c=e.wrap,l=window.WebGLRenderingContext;if(l){r(t.prototype,{get canvas(){return c(a(this).canvas)},texImage2D:function(){arguments[5]=s(arguments[5]),a(this).texImage2D.apply(a(this),arguments)},texSubImage2D:function(){arguments[6]=s(arguments[6]),a(this).texSubImage2D.apply(a(this),arguments)}});var u=Object.getPrototypeOf(l.prototype);u!==Object.prototype&&n(u,t.prototype);var d=/WebKit/.test(navigator.userAgent)?{drawingBufferHeight:null,drawingBufferWidth:null}:{};o(l,t,d),e.wrappers.WebGLRenderingContext=t}}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){n.call(this,e)}var n=e.wrappers.Node,r=e.GetElementsByInterface,o=e.NonElementParentNodeInterface,i=e.ParentNodeInterface,a=e.SelectorsInterface,s=e.mixin,c=e.registerObject,l=e.registerWrapper,u=window.DocumentFragment;t.prototype=Object.create(n.prototype),s(t.prototype,i),s(t.prototype,a),s(t.prototype,r),s(t.prototype,o),l(u,t,document.createDocumentFragment()),e.wrappers.DocumentFragment=t;var d=c(document.createComment(""));e.wrappers.Comment=d}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){var t=d(u(e).ownerDocument.createDocumentFragment());n.call(this,t),c(t,this);var o=e.shadowRoot;f.set(this,o),this.treeScope_=new r(this,a(o||e)),h.set(this,e)}var n=e.wrappers.DocumentFragment,r=e.TreeScope,o=e.elementFromPoint,i=e.getInnerHTML,a=e.getTreeScope,s=e.mixin,c=e.rewrap,l=e.setInnerHTML,u=e.unsafeUnwrap,d=e.unwrap,p=e.wrap,h=new WeakMap,f=new WeakMap;t.prototype=Object.create(n.prototype),s(t.prototype,{constructor:t,get innerHTML(){return i(this)},set innerHTML(e){l(this,e),this.invalidateShadowRenderer()},get olderShadowRoot(){return f.get(this)||null},get host(){return h.get(this)||null},invalidateShadowRenderer:function(){return h.get(this).invalidateShadowRenderer()},elementFromPoint:function(e,t){return o(this,this.ownerDocument,e,t)},getSelection:function(){return document.getSelection()},get activeElement(){var e=d(this).ownerDocument.activeElement;if(!e||!e.nodeType)return null;var t=p(e);if(t===this.host)return null;for(;!this.contains(t)&&!this.host.contains(t);){for(;t.parentNode;)t=t.parentNode;if(!t.host)return null;t=t.host}return t}}),e.wrappers.ShadowRoot=t}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){var t=d(e).root;return t instanceof h?t.host:null}function n(t,n){if(t.shadowRoot){n=Math.min(t.childNodes.length-1,n);var r=t.childNodes[n];if(r){var o=e.getDestinationInsertionPoints(r);if(o.length>0){var i=o[0].parentNode;i.nodeType==Node.ELEMENT_NODE&&(t=i)}}}return t}function r(e){return e=u(e),t(e)||e}function o(e){a(e,this)}var i=e.registerWrapper,a=e.setWrapper,s=e.unsafeUnwrap,c=e.unwrap,l=e.unwrapIfNeeded,u=e.wrap,d=e.getTreeScope,p=window.Range,h=e.wrappers.ShadowRoot;o.prototype={get startContainer(){return r(s(this).startContainer)},get endContainer(){return r(s(this).endContainer)},get commonAncestorContainer(){return r(s(this).commonAncestorContainer)},setStart:function(e,t){e=n(e,t),s(this).setStart(l(e),t)},setEnd:function(e,t){e=n(e,t),s(this).setEnd(l(e),t)},setStartBefore:function(e){s(this).setStartBefore(l(e))},setStartAfter:function(e){s(this).setStartAfter(l(e))},setEndBefore:function(e){s(this).setEndBefore(l(e))},setEndAfter:function(e){s(this).setEndAfter(l(e))},selectNode:function(e){s(this).selectNode(l(e))},selectNodeContents:function(e){s(this).selectNodeContents(l(e))},compareBoundaryPoints:function(e,t){return s(this).compareBoundaryPoints(e,c(t))},extractContents:function(){return u(s(this).extractContents())},cloneContents:function(){return u(s(this).cloneContents())},insertNode:function(e){s(this).insertNode(l(e))},surroundContents:function(e){s(this).surroundContents(l(e))},cloneRange:function(){return u(s(this).cloneRange())},isPointInRange:function(e,t){return s(this).isPointInRange(l(e),t)},comparePoint:function(e,t){return s(this).comparePoint(l(e),t)},intersectsNode:function(e){return s(this).intersectsNode(l(e))},toString:function(){return s(this).toString()}},p.prototype.createContextualFragment&&(o.prototype.createContextualFragment=function(e){return u(s(this).createContextualFragment(e))}),i(window.Range,o,document.createRange()),e.wrappers.Range=o}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){e.previousSibling_=e.previousSibling,e.nextSibling_=e.nextSibling,e.parentNode_=e.parentNode}function n(n,o,i){var a=x(n),s=x(o),c=i?x(i):null;if(r(o),t(o),i)n.firstChild===i&&(n.firstChild_=i),i.previousSibling_=i.previousSibling;else{n.lastChild_=n.lastChild,n.lastChild===n.firstChild&&(n.firstChild_=n.firstChild);var l=R(a.lastChild);l&&(l.nextSibling_=l.nextSibling)}e.originalInsertBefore.call(a,s,c)}function r(n){var r=x(n),o=r.parentNode;if(o){var i=R(o);t(n),n.previousSibling&&(n.previousSibling.nextSibling_=n),n.nextSibling&&(n.nextSibling.previousSibling_=n),i.lastChild===n&&(i.lastChild_=n),i.firstChild===n&&(i.firstChild_=n),e.originalRemoveChild.call(o,r)}}function o(e){P.set(e,[])}function i(e){var t=P.get(e);return t||P.set(e,t=[]),t}function a(e){for(var t=[],n=0,r=e.firstChild;r;r=r.nextSibling)t[n++]=r;return t}function s(){for(var e=0;e<F.length;e++){var t=F[e],n=t.parentRenderer;n&&n.dirty||t.render()}F=[]}function c(){T=null,s()}function l(e){var t=A.get(e);return t||(t=new h(e),A.set(e,t)),t}function u(e){var t=j(e).root;return t instanceof C?t:null}function d(e){return l(e.host)}function p(e){this.skip=!1,this.node=e,this.childNodes=[]}function h(e){this.host=e,this.dirty=!1,this.invalidateAttributes(),this.associateNode(e)}function f(e){for(var t=[],n=e.firstChild;n;n=n.nextSibling)E(n)?t.push.apply(t,i(n)):t.push(n);return t}function m(e){if(e instanceof L)return e;if(e instanceof O)return null;for(var t=e.firstChild;t;t=t.nextSibling){var n=m(t);if(n)return n}return null}function w(e,t){i(t).push(e);var n=k.get(e);n?n.push(t):k.set(e,[t])}function v(e){return k.get(e)}function g(e){k.set(e,void 0)}function b(e,t){var n=t.getAttribute("select");if(!n)return!0;if(n=n.trim(),!n)return!0;if(!(e instanceof M))return!1;if(!q.test(n))return!1;try{return e.matches(n)}catch(r){return!1}}function y(e,t){var n=v(t);return n&&n[n.length-1]===e}function E(e){return e instanceof O||e instanceof L}function _(e){return e.shadowRoot}function S(e){for(var t=[],n=e.shadowRoot;n;n=n.olderShadowRoot)t.push(n);return t}var T,M=e.wrappers.Element,O=e.wrappers.HTMLContentElement,L=e.wrappers.HTMLShadowElement,N=e.wrappers.Node,C=e.wrappers.ShadowRoot,j=(e.assert,e.getTreeScope),D=(e.mixin,e.oneOf),H=e.unsafeUnwrap,x=e.unwrap,R=e.wrap,I=e.ArraySplice,P=new WeakMap,k=new WeakMap,A=new WeakMap,W=D(window,["requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","setTimeout"]),F=[],U=new I;U.equals=function(e,t){return x(e.node)===t},p.prototype={append:function(e){var t=new p(e);return this.childNodes.push(t),t},sync:function(e){if(!this.skip){for(var t=this.node,o=this.childNodes,i=a(x(t)),s=e||new WeakMap,c=U.calculateSplices(o,i),l=0,u=0,d=0,p=0;p<c.length;p++){for(var h=c[p];d<h.index;d++)u++,o[l++].sync(s);for(var f=h.removed.length,m=0;f>m;m++){var w=R(i[u++]);s.get(w)||r(w)}for(var v=h.addedCount,g=i[u]&&R(i[u]),m=0;v>m;m++){var b=o[l++],y=b.node;n(t,y,g),s.set(y,!0),b.sync(s)}d+=v}for(var p=d;p<o.length;p++)o[p].sync(s)}}},h.prototype={render:function(e){if(this.dirty){this.invalidateAttributes();var t=this.host;this.distribution(t);var n=e||new p(t);this.buildRenderTree(n,t);var r=!e;r&&n.sync(),this.dirty=!1}},get parentRenderer(){return j(this.host).renderer},invalidate:function(){if(!this.dirty){this.dirty=!0;var e=this.parentRenderer;if(e&&e.invalidate(),F.push(this),T)return;T=window[W](c,0)}},distribution:function(e){this.resetAllSubtrees(e),this.distributionResolution(e)},resetAll:function(e){E(e)?o(e):g(e),this.resetAllSubtrees(e)},resetAllSubtrees:function(e){for(var t=e.firstChild;t;t=t.nextSibling)this.resetAll(t);e.shadowRoot&&this.resetAll(e.shadowRoot),e.olderShadowRoot&&this.resetAll(e.olderShadowRoot)},distributionResolution:function(e){if(_(e)){for(var t=e,n=f(t),r=S(t),o=0;o<r.length;o++)this.poolDistribution(r[o],n);for(var o=r.length-1;o>=0;o--){var i=r[o],a=m(i);if(a){var s=i.olderShadowRoot;s&&(n=f(s));for(var c=0;c<n.length;c++)w(n[c],a)}this.distributionResolution(i)}}for(var l=e.firstChild;l;l=l.nextSibling)this.distributionResolution(l)},poolDistribution:function(e,t){if(!(e instanceof L))if(e instanceof O){var n=e;this.updateDependentAttributes(n.getAttribute("select"));for(var r=!1,o=0;o<t.length;o++){var e=t[o];e&&b(e,n)&&(w(e,n),t[o]=void 0,r=!0)}if(!r)for(var i=n.firstChild;i;i=i.nextSibling)w(i,n)}else for(var i=e.firstChild;i;i=i.nextSibling)this.poolDistribution(i,t)},buildRenderTree:function(e,t){for(var n=this.compose(t),r=0;r<n.length;r++){var o=n[r],i=e.append(o);this.buildRenderTree(i,o)}if(_(t)){var a=l(t);a.dirty=!1}},compose:function(e){for(var t=[],n=e.shadowRoot||e,r=n.firstChild;r;r=r.nextSibling)if(E(r)){this.associateNode(n);for(var o=i(r),a=0;a<o.length;a++){var s=o[a];y(r,s)&&t.push(s)}}else t.push(r);return t},invalidateAttributes:function(){this.attributes=Object.create(null)},updateDependentAttributes:function(e){if(e){var t=this.attributes;/\.\w+/.test(e)&&(t["class"]=!0),/#\w+/.test(e)&&(t.id=!0),e.replace(/\[\s*([^\s=\|~\]]+)/g,function(e,n){t[n]=!0})}},dependsOnAttribute:function(e){return this.attributes[e]},associateNode:function(e){H(e).polymerShadowRenderer_=this}};var q=/^(:not\()?[*.#[a-zA-Z_|]/;N.prototype.invalidateShadowRenderer=function(e){var t=H(this).polymerShadowRenderer_;return t?(t.invalidate(),!0):!1},O.prototype.getDistributedNodes=L.prototype.getDistributedNodes=function(){return s(),i(this)},M.prototype.getDestinationInsertionPoints=function(){return s(),v(this)||[]},O.prototype.nodeIsInserted_=L.prototype.nodeIsInserted_=function(){this.invalidateShadowRenderer();var e,t=u(this);t&&(e=d(t)),H(this).polymerShadowRenderer_=e,e&&e.invalidate()},e.getRendererForHost=l,e.getShadowTrees=S,e.renderAllPending=s,e.getDestinationInsertionPoints=v,e.visual={insertBefore:n,remove:r}}(window.ShadowDOMPolyfill),function(e){"use strict";function t(t){if(window[t]){r(!e.wrappers[t]);var c=function(e){n.call(this,e)};c.prototype=Object.create(n.prototype),o(c.prototype,{get form(){return s(a(this).form)}}),i(window[t],c,document.createElement(t.slice(4,-7))),e.wrappers[t]=c}}var n=e.wrappers.HTMLElement,r=e.assert,o=e.mixin,i=e.registerWrapper,a=e.unwrap,s=e.wrap,c=["HTMLButtonElement","HTMLFieldSetElement","HTMLInputElement","HTMLKeygenElement","HTMLLabelElement","HTMLLegendElement","HTMLObjectElement","HTMLOutputElement","HTMLTextAreaElement"];c.forEach(t)}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){r(e,this)}var n=e.registerWrapper,r=e.setWrapper,o=e.unsafeUnwrap,i=e.unwrap,a=e.unwrapIfNeeded,s=e.wrap,c=window.Selection;t.prototype={get anchorNode(){return s(o(this).anchorNode)},get focusNode(){return s(o(this).focusNode)},addRange:function(e){o(this).addRange(a(e))},collapse:function(e,t){o(this).collapse(a(e),t)},containsNode:function(e,t){return o(this).containsNode(a(e),t)},getRangeAt:function(e){return s(o(this).getRangeAt(e))},removeRange:function(e){o(this).removeRange(i(e))},selectAllChildren:function(e){o(this).selectAllChildren(e instanceof ShadowRoot?o(e.host):a(e))},toString:function(){return o(this).toString()}},c.prototype.extend&&(t.prototype.extend=function(e,t){o(this).extend(a(e),t)}),n(window.Selection,t,window.getSelection()),e.wrappers.Selection=t}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){r(e,this)}var n=e.registerWrapper,r=e.setWrapper,o=e.unsafeUnwrap,i=e.unwrapIfNeeded,a=e.wrap,s=window.TreeWalker;t.prototype={get root(){return a(o(this).root)},get currentNode(){return a(o(this).currentNode)},set currentNode(e){o(this).currentNode=i(e)},get filter(){return o(this).filter},parentNode:function(){return a(o(this).parentNode())},firstChild:function(){return a(o(this).firstChild())},lastChild:function(){return a(o(this).lastChild())},previousSibling:function(){return a(o(this).previousSibling())},previousNode:function(){return a(o(this).previousNode())},nextNode:function(){return a(o(this).nextNode())}},n(s,t),e.wrappers.TreeWalker=t}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){u.call(this,e),this.treeScope_=new w(this,null)}function n(e){var n=document[e];t.prototype[e]=function(){return j(n.apply(N(this),arguments))}}function r(e,t){x.call(N(t),C(e)),o(e,t)}function o(e,t){e.shadowRoot&&t.adoptNode(e.shadowRoot),e instanceof m&&i(e,t);for(var n=e.firstChild;n;n=n.nextSibling)o(n,t)}function i(e,t){var n=e.olderShadowRoot;n&&t.adoptNode(n)}function a(e){L(e,this)}function s(e,t){
var n=document.implementation[t];e.prototype[t]=function(){return j(n.apply(N(this),arguments))}}function c(e,t){var n=document.implementation[t];e.prototype[t]=function(){return n.apply(N(this),arguments)}}var l=e.GetElementsByInterface,u=e.wrappers.Node,d=e.ParentNodeInterface,p=e.NonElementParentNodeInterface,h=e.wrappers.Selection,f=e.SelectorsInterface,m=e.wrappers.ShadowRoot,w=e.TreeScope,v=e.cloneNode,g=e.defineGetter,b=e.defineWrapGetter,y=e.elementFromPoint,E=e.forwardMethodsToWrapper,_=e.matchesNames,S=e.mixin,T=e.registerWrapper,M=e.renderAllPending,O=e.rewrap,L=e.setWrapper,N=e.unsafeUnwrap,C=e.unwrap,j=e.wrap,D=e.wrapEventTargetMethods,H=(e.wrapNodeList,new WeakMap);t.prototype=Object.create(u.prototype),b(t,"documentElement"),b(t,"body"),b(t,"head"),g(t,"activeElement",function(){var e=C(this).activeElement;if(!e||!e.nodeType)return null;for(var t=j(e);!this.contains(t);){for(;t.parentNode;)t=t.parentNode;if(!t.host)return null;t=t.host}return t}),["createComment","createDocumentFragment","createElement","createElementNS","createEvent","createEventNS","createRange","createTextNode"].forEach(n);var x=document.adoptNode,R=document.getSelection;S(t.prototype,{adoptNode:function(e){return e.parentNode&&e.parentNode.removeChild(e),r(e,this),e},elementFromPoint:function(e,t){return y(this,this,e,t)},importNode:function(e,t){return v(e,t,N(this))},getSelection:function(){return M(),new h(R.call(C(this)))},getElementsByName:function(e){return f.querySelectorAll.call(this,"[name="+JSON.stringify(String(e))+"]")}});var I=document.createTreeWalker,P=e.wrappers.TreeWalker;if(t.prototype.createTreeWalker=function(e,t,n,r){var o=null;return n&&(n.acceptNode&&"function"==typeof n.acceptNode?o={acceptNode:function(e){return n.acceptNode(j(e))}}:"function"==typeof n&&(o=function(e){return n(j(e))})),new P(I.call(C(this),C(e),t,o,r))},document.registerElement){var k=document.registerElement;t.prototype.registerElement=function(t,n){function r(e){return e?void L(e,this):i?document.createElement(i,t):document.createElement(t)}var o,i;if(void 0!==n&&(o=n.prototype,i=n["extends"]),o||(o=Object.create(HTMLElement.prototype)),e.nativePrototypeTable.get(o))throw new Error("NotSupportedError");for(var a,s=Object.getPrototypeOf(o),c=[];s&&!(a=e.nativePrototypeTable.get(s));)c.push(s),s=Object.getPrototypeOf(s);if(!a)throw new Error("NotSupportedError");for(var l=Object.create(a),u=c.length-1;u>=0;u--)l=Object.create(l);["createdCallback","attachedCallback","detachedCallback","attributeChangedCallback"].forEach(function(e){var t=o[e];t&&(l[e]=function(){j(this)instanceof r||O(this),t.apply(j(this),arguments)})});var d={prototype:l};i&&(d["extends"]=i),r.prototype=o,r.prototype.constructor=r,e.constructorTable.set(l,r),e.nativePrototypeTable.set(o,l);k.call(C(this),t,d);return r},E([window.HTMLDocument||window.Document],["registerElement"])}E([window.HTMLBodyElement,window.HTMLDocument||window.Document,window.HTMLHeadElement,window.HTMLHtmlElement],["appendChild","compareDocumentPosition","contains","getElementsByClassName","getElementsByTagName","getElementsByTagNameNS","insertBefore","querySelector","querySelectorAll","removeChild","replaceChild"]),E([window.HTMLBodyElement,window.HTMLHeadElement,window.HTMLHtmlElement],_),E([window.HTMLDocument||window.Document],["adoptNode","importNode","contains","createComment","createDocumentFragment","createElement","createElementNS","createEvent","createEventNS","createRange","createTextNode","createTreeWalker","elementFromPoint","getElementById","getElementsByName","getSelection"]),S(t.prototype,l),S(t.prototype,d),S(t.prototype,f),S(t.prototype,p),S(t.prototype,{get implementation(){var e=H.get(this);return e?e:(e=new a(C(this).implementation),H.set(this,e),e)},get defaultView(){return j(C(this).defaultView)}}),T(window.Document,t,document.implementation.createHTMLDocument("")),window.HTMLDocument&&T(window.HTMLDocument,t),D([window.HTMLBodyElement,window.HTMLDocument||window.Document,window.HTMLHeadElement]);var A=document.implementation.createDocument;a.prototype.createDocument=function(){return arguments[2]=C(arguments[2]),j(A.apply(N(this),arguments))},s(a,"createDocumentType"),s(a,"createHTMLDocument"),c(a,"hasFeature"),T(window.DOMImplementation,a),E([window.DOMImplementation],["createDocument","createDocumentType","createHTMLDocument","hasFeature"]),e.adoptNodeNoRemove=r,e.wrappers.DOMImplementation=a,e.wrappers.Document=t}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){n.call(this,e)}var n=e.wrappers.EventTarget,r=e.wrappers.Selection,o=e.mixin,i=e.registerWrapper,a=e.renderAllPending,s=e.unwrap,c=e.unwrapIfNeeded,l=e.wrap,u=window.Window,d=window.getComputedStyle,p=window.getDefaultComputedStyle,h=window.getSelection;t.prototype=Object.create(n.prototype),u.prototype.getComputedStyle=function(e,t){return l(this||window).getComputedStyle(c(e),t)},p&&(u.prototype.getDefaultComputedStyle=function(e,t){return l(this||window).getDefaultComputedStyle(c(e),t)}),u.prototype.getSelection=function(){return l(this||window).getSelection()},delete window.getComputedStyle,delete window.getDefaultComputedStyle,delete window.getSelection,["addEventListener","removeEventListener","dispatchEvent"].forEach(function(e){u.prototype[e]=function(){var t=l(this||window);return t[e].apply(t,arguments)},delete window[e]}),o(t.prototype,{getComputedStyle:function(e,t){return a(),d.call(s(this),c(e),t)},getSelection:function(){return a(),new r(h.call(s(this)))},get document(){return l(s(this).document)}}),p&&(t.prototype.getDefaultComputedStyle=function(e,t){return a(),p.call(s(this),c(e),t)}),i(u,t,window),e.wrappers.Window=t}(window.ShadowDOMPolyfill),function(e){"use strict";var t=e.unwrap,n=window.DataTransfer||window.Clipboard,r=n.prototype.setDragImage;r&&(n.prototype.setDragImage=function(e,n,o){r.call(this,t(e),n,o)})}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){var t;t=e instanceof i?e:new i(e&&o(e)),r(t,this)}var n=e.registerWrapper,r=e.setWrapper,o=e.unwrap,i=window.FormData;i&&(n(i,t,new i),e.wrappers.FormData=t)}(window.ShadowDOMPolyfill),function(e){"use strict";var t=e.unwrapIfNeeded,n=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.send=function(e){return n.call(this,t(e))}}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){var t=n[e],r=window[t];if(r){var o=document.createElement(e),i=o.constructor;window[t]=i}}var n=(e.isWrapperFor,{a:"HTMLAnchorElement",area:"HTMLAreaElement",audio:"HTMLAudioElement",base:"HTMLBaseElement",body:"HTMLBodyElement",br:"HTMLBRElement",button:"HTMLButtonElement",canvas:"HTMLCanvasElement",caption:"HTMLTableCaptionElement",col:"HTMLTableColElement",content:"HTMLContentElement",data:"HTMLDataElement",datalist:"HTMLDataListElement",del:"HTMLModElement",dir:"HTMLDirectoryElement",div:"HTMLDivElement",dl:"HTMLDListElement",embed:"HTMLEmbedElement",fieldset:"HTMLFieldSetElement",font:"HTMLFontElement",form:"HTMLFormElement",frame:"HTMLFrameElement",frameset:"HTMLFrameSetElement",h1:"HTMLHeadingElement",head:"HTMLHeadElement",hr:"HTMLHRElement",html:"HTMLHtmlElement",iframe:"HTMLIFrameElement",img:"HTMLImageElement",input:"HTMLInputElement",keygen:"HTMLKeygenElement",label:"HTMLLabelElement",legend:"HTMLLegendElement",li:"HTMLLIElement",link:"HTMLLinkElement",map:"HTMLMapElement",marquee:"HTMLMarqueeElement",menu:"HTMLMenuElement",menuitem:"HTMLMenuItemElement",meta:"HTMLMetaElement",meter:"HTMLMeterElement",object:"HTMLObjectElement",ol:"HTMLOListElement",optgroup:"HTMLOptGroupElement",option:"HTMLOptionElement",output:"HTMLOutputElement",p:"HTMLParagraphElement",param:"HTMLParamElement",pre:"HTMLPreElement",progress:"HTMLProgressElement",q:"HTMLQuoteElement",script:"HTMLScriptElement",select:"HTMLSelectElement",shadow:"HTMLShadowElement",source:"HTMLSourceElement",span:"HTMLSpanElement",style:"HTMLStyleElement",table:"HTMLTableElement",tbody:"HTMLTableSectionElement",template:"HTMLTemplateElement",textarea:"HTMLTextAreaElement",thead:"HTMLTableSectionElement",time:"HTMLTimeElement",title:"HTMLTitleElement",tr:"HTMLTableRowElement",track:"HTMLTrackElement",ul:"HTMLUListElement",video:"HTMLVideoElement"});Object.keys(n).forEach(t),Object.getOwnPropertyNames(e.wrappers).forEach(function(t){window[t]=e.wrappers[t]})}(window.ShadowDOMPolyfill),function(e){function t(e,t){var n="";return Array.prototype.forEach.call(e,function(e){n+=e.textContent+"\n\n"}),t||(n=n.replace(d,"")),n}function n(e){var t=document.createElement("style");return t.textContent=e,t}function r(e){var t=n(e);document.head.appendChild(t);var r=[];if(t.sheet)try{r=t.sheet.cssRules}catch(o){}else console.warn("sheet not found",t);return t.parentNode.removeChild(t),r}function o(){C.initialized=!0,document.body.appendChild(C);var e=C.contentDocument,t=e.createElement("base");t.href=document.baseURI,e.head.appendChild(t)}function i(e){C.initialized||o(),document.body.appendChild(C),e(C.contentDocument),document.body.removeChild(C)}function a(e,t){if(t){var o;if(e.match("@import")&&D){var a=n(e);i(function(e){e.head.appendChild(a.impl),o=Array.prototype.slice.call(a.sheet.cssRules,0),t(o)})}else o=r(e),t(o)}}function s(e){e&&l().appendChild(document.createTextNode(e))}function c(e,t){var r=n(e);r.setAttribute(t,""),r.setAttribute(x,""),document.head.appendChild(r)}function l(){return j||(j=document.createElement("style"),j.setAttribute(x,""),j[x]=!0),j}var u={strictStyling:!1,registry:{},shimStyling:function(e,n,r){var o=this.prepareRoot(e,n,r),i=this.isTypeExtension(r),a=this.makeScopeSelector(n,i),s=t(o,!0);s=this.scopeCssText(s,a),e&&(e.shimmedStyle=s),this.addCssToDocument(s,n)},shimStyle:function(e,t){return this.shimCssText(e.textContent,t)},shimCssText:function(e,t){return e=this.insertDirectives(e),this.scopeCssText(e,t)},makeScopeSelector:function(e,t){return e?t?"[is="+e+"]":e:""},isTypeExtension:function(e){return e&&e.indexOf("-")<0},prepareRoot:function(e,t,n){var r=this.registerRoot(e,t,n);return this.replaceTextInStyles(r.rootStyles,this.insertDirectives),this.removeStyles(e,r.rootStyles),this.strictStyling&&this.applyScopeToContent(e,t),r.scopeStyles},removeStyles:function(e,t){for(var n,r=0,o=t.length;o>r&&(n=t[r]);r++)n.parentNode.removeChild(n)},registerRoot:function(e,t,n){var r=this.registry[t]={root:e,name:t,extendsName:n},o=this.findStyles(e);r.rootStyles=o,r.scopeStyles=r.rootStyles;var i=this.registry[r.extendsName];return i&&(r.scopeStyles=i.scopeStyles.concat(r.scopeStyles)),r},findStyles:function(e){if(!e)return[];var t=e.querySelectorAll("style");return Array.prototype.filter.call(t,function(e){return!e.hasAttribute(R)})},applyScopeToContent:function(e,t){e&&(Array.prototype.forEach.call(e.querySelectorAll("*"),function(e){e.setAttribute(t,"")}),Array.prototype.forEach.call(e.querySelectorAll("template"),function(e){this.applyScopeToContent(e.content,t)},this))},insertDirectives:function(e){return e=this.insertPolyfillDirectivesInCssText(e),this.insertPolyfillRulesInCssText(e)},insertPolyfillDirectivesInCssText:function(e){return e=e.replace(p,function(e,t){return t.slice(0,-2)+"{"}),e.replace(h,function(e,t){return t+" {"})},insertPolyfillRulesInCssText:function(e){return e=e.replace(f,function(e,t){return t.slice(0,-1)}),e.replace(m,function(e,t,n,r){var o=e.replace(t,"").replace(n,"");return r+o})},scopeCssText:function(e,t){var n=this.extractUnscopedRulesFromCssText(e);if(e=this.insertPolyfillHostInCssText(e),e=this.convertColonHost(e),e=this.convertColonHostContext(e),e=this.convertShadowDOMSelectors(e),t){var e,r=this;a(e,function(n){e=r.scopeRules(n,t)})}return e=e+"\n"+n,e.trim()},extractUnscopedRulesFromCssText:function(e){for(var t,n="";t=w.exec(e);)n+=t[1].slice(0,-1)+"\n\n";for(;t=v.exec(e);)n+=t[0].replace(t[2],"").replace(t[1],t[3])+"\n\n";return n},convertColonHost:function(e){return this.convertColonRule(e,E,this.colonHostPartReplacer)},convertColonHostContext:function(e){return this.convertColonRule(e,_,this.colonHostContextPartReplacer)},convertColonRule:function(e,t,n){return e.replace(t,function(e,t,r,o){if(t=O,r){for(var i,a=r.split(","),s=[],c=0,l=a.length;l>c&&(i=a[c]);c++)i=i.trim(),s.push(n(t,i,o));return s.join(",")}return t+o})},colonHostContextPartReplacer:function(e,t,n){return t.match(g)?this.colonHostPartReplacer(e,t,n):e+t+n+", "+t+" "+e+n},colonHostPartReplacer:function(e,t,n){return e+t.replace(g,"")+n},convertShadowDOMSelectors:function(e){for(var t=0;t<N.length;t++)e=e.replace(N[t]," ");return e},scopeRules:function(e,t){var n="";return e&&Array.prototype.forEach.call(e,function(e){if(e.selectorText&&e.style&&void 0!==e.style.cssText)n+=this.scopeSelector(e.selectorText,t,this.strictStyling)+" {\n	",n+=this.propertiesFromRule(e)+"\n}\n\n";else if(e.type===CSSRule.MEDIA_RULE)n+="@media "+e.media.mediaText+" {\n",n+=this.scopeRules(e.cssRules,t),n+="\n}\n\n";else try{e.cssText&&(n+=e.cssText+"\n\n")}catch(r){e.type===CSSRule.KEYFRAMES_RULE&&e.cssRules&&(n+=this.ieSafeCssTextFromKeyFrameRule(e))}},this),n},ieSafeCssTextFromKeyFrameRule:function(e){var t="@keyframes "+e.name+" {";return Array.prototype.forEach.call(e.cssRules,function(e){t+=" "+e.keyText+" {"+e.style.cssText+"}"}),t+=" }"},scopeSelector:function(e,t,n){var r=[],o=e.split(",");return o.forEach(function(e){e=e.trim(),this.selectorNeedsScoping(e,t)&&(e=n&&!e.match(O)?this.applyStrictSelectorScope(e,t):this.applySelectorScope(e,t)),r.push(e)},this),r.join(", ")},selectorNeedsScoping:function(e,t){if(Array.isArray(t))return!0;var n=this.makeScopeMatcher(t);return!e.match(n)},makeScopeMatcher:function(e){return e=e.replace(/\[/g,"\\[").replace(/\]/g,"\\]"),new RegExp("^("+e+")"+S,"m")},applySelectorScope:function(e,t){return Array.isArray(t)?this.applySelectorScopeList(e,t):this.applySimpleSelectorScope(e,t)},applySelectorScopeList:function(e,t){for(var n,r=[],o=0;n=t[o];o++)r.push(this.applySimpleSelectorScope(e,n));return r.join(", ")},applySimpleSelectorScope:function(e,t){return e.match(L)?(e=e.replace(O,t),e.replace(L,t+" ")):t+" "+e},applyStrictSelectorScope:function(e,t){t=t.replace(/\[is=([^\]]*)\]/g,"$1");var n=[" ",">","+","~"],r=e,o="["+t+"]";return n.forEach(function(e){var t=r.split(e);r=t.map(function(e){var t=e.trim().replace(L,"");return t&&n.indexOf(t)<0&&t.indexOf(o)<0&&(e=t.replace(/([^:]*)(:*)(.*)/,"$1"+o+"$2$3")),e}).join(e)}),r},insertPolyfillHostInCssText:function(e){return e.replace(M,b).replace(T,g)},propertiesFromRule:function(e){var t=e.style.cssText;e.style.content&&!e.style.content.match(/['"]+|attr/)&&(t=t.replace(/content:[^;]*;/g,"content: '"+e.style.content+"';"));var n=e.style;for(var r in n)"initial"===n[r]&&(t+=r+": initial; ");return t},replaceTextInStyles:function(e,t){e&&t&&(e instanceof Array||(e=[e]),Array.prototype.forEach.call(e,function(e){e.textContent=t.call(this,e.textContent)},this))},addCssToDocument:function(e,t){e.match("@import")?c(e,t):s(e)}},d=/\/\*[^*]*\*+([^\/*][^*]*\*+)*\//gim,p=/\/\*\s*@polyfill ([^*]*\*+([^\/*][^*]*\*+)*\/)([^{]*?){/gim,h=/polyfill-next-selector[^}]*content\:[\s]*?['"](.*?)['"][;\s]*}([^{]*?){/gim,f=/\/\*\s@polyfill-rule([^*]*\*+([^\/*][^*]*\*+)*)\//gim,m=/(polyfill-rule)[^}]*(content\:[\s]*['"](.*?)['"])[;\s]*[^}]*}/gim,w=/\/\*\s@polyfill-unscoped-rule([^*]*\*+([^\/*][^*]*\*+)*)\//gim,v=/(polyfill-unscoped-rule)[^}]*(content\:[\s]*['"](.*?)['"])[;\s]*[^}]*}/gim,g="-shadowcsshost",b="-shadowcsscontext",y=")(?:\\(((?:\\([^)(]*\\)|[^)(]*)+?)\\))?([^,{]*)",E=new RegExp("("+g+y,"gim"),_=new RegExp("("+b+y,"gim"),S="([>\\s~+[.,{:][\\s\\S]*)?$",T=/\:host/gim,M=/\:host-context/gim,O=g+"-no-combinator",L=new RegExp(g,"gim"),N=(new RegExp(b,"gim"),[/>>>/g,/::shadow/g,/::content/g,/\/deep\//g,/\/shadow\//g,/\/shadow-deep\//g,/\^\^/g,/\^/g]),C=document.createElement("iframe");C.style.display="none";var j,D=navigator.userAgent.match("Chrome"),H="shim-shadowdom",x="shim-shadowdom-css",R="no-shim";if(window.ShadowDOMPolyfill){s("style { display: none !important; }\n");var I=ShadowDOMPolyfill.wrap(document),P=I.querySelector("head");P.insertBefore(l(),P.childNodes[0]),document.addEventListener("DOMContentLoaded",function(){e.urlResolver;if(window.HTMLImports&&!HTMLImports.useNative){var t="link[rel=stylesheet]["+H+"]",n="style["+H+"]";HTMLImports.importer.documentPreloadSelectors+=","+t,HTMLImports.importer.importsPreloadSelectors+=","+t,HTMLImports.parser.documentSelectors=[HTMLImports.parser.documentSelectors,t,n].join(",");var r=HTMLImports.parser.parseGeneric;HTMLImports.parser.parseGeneric=function(e){if(!e[x]){var t=e.__importElement||e;if(!t.hasAttribute(H))return void r.call(this,e);e.__resource&&(t=e.ownerDocument.createElement("style"),t.textContent=e.__resource),HTMLImports.path.resolveUrlsInStyle(t,e.href),t.textContent=u.shimStyle(t),t.removeAttribute(H,""),t.setAttribute(x,""),t[x]=!0,t.parentNode!==P&&(e.parentNode===P?P.replaceChild(t,e):this.addElementToDocument(t)),t.__importParsed=!0,this.markParsingComplete(e),this.parseNext()}};var o=HTMLImports.parser.hasResource;HTMLImports.parser.hasResource=function(e){return"link"===e.localName&&"stylesheet"===e.rel&&e.hasAttribute(H)?e.__resource:o.call(this,e)}}})}e.ShadowCSS=u}(window.WebComponents)),function(e){window.ShadowDOMPolyfill?(window.wrap=ShadowDOMPolyfill.wrapIfNeeded,window.unwrap=ShadowDOMPolyfill.unwrapIfNeeded):window.wrap=window.unwrap=function(e){return e}}(window.WebComponents),function(e){"use strict";function t(e){return void 0!==p[e]}function n(){s.call(this),this._isInvalid=!0}function r(e){return""==e&&n.call(this),e.toLowerCase()}function o(e){var t=e.charCodeAt(0);return t>32&&127>t&&-1==[34,35,60,62,63,96].indexOf(t)?e:encodeURIComponent(e)}function i(e){var t=e.charCodeAt(0);return t>32&&127>t&&-1==[34,35,60,62,96].indexOf(t)?e:encodeURIComponent(e)}function a(e,a,s){function c(e){b.push(e)}var l=a||"scheme start",u=0,d="",v=!1,g=!1,b=[];e:for(;(e[u-1]!=f||0==u)&&!this._isInvalid;){var y=e[u];switch(l){case"scheme start":if(!y||!m.test(y)){if(a){c("Invalid scheme.");break e}d="",l="no scheme";continue}d+=y.toLowerCase(),l="scheme";break;case"scheme":if(y&&w.test(y))d+=y.toLowerCase();else{if(":"!=y){if(a){if(f==y)break e;c("Code point not allowed in scheme: "+y);break e}d="",u=0,l="no scheme";continue}if(this._scheme=d,d="",a)break e;t(this._scheme)&&(this._isRelative=!0),l="file"==this._scheme?"relative":this._isRelative&&s&&s._scheme==this._scheme?"relative or authority":this._isRelative?"authority first slash":"scheme data"}break;case"scheme data":"?"==y?(this._query="?",l="query"):"#"==y?(this._fragment="#",l="fragment"):f!=y&&"	"!=y&&"\n"!=y&&"\r"!=y&&(this._schemeData+=o(y));break;case"no scheme":if(s&&t(s._scheme)){l="relative";continue}c("Missing scheme."),n.call(this);break;case"relative or authority":if("/"!=y||"/"!=e[u+1]){c("Expected /, got: "+y),l="relative";continue}l="authority ignore slashes";break;case"relative":if(this._isRelative=!0,"file"!=this._scheme&&(this._scheme=s._scheme),f==y){this._host=s._host,this._port=s._port,this._path=s._path.slice(),this._query=s._query,this._username=s._username,this._password=s._password;break e}if("/"==y||"\\"==y)"\\"==y&&c("\\ is an invalid code point."),l="relative slash";else if("?"==y)this._host=s._host,this._port=s._port,this._path=s._path.slice(),this._query="?",this._username=s._username,this._password=s._password,l="query";else{if("#"!=y){var E=e[u+1],_=e[u+2];("file"!=this._scheme||!m.test(y)||":"!=E&&"|"!=E||f!=_&&"/"!=_&&"\\"!=_&&"?"!=_&&"#"!=_)&&(this._host=s._host,this._port=s._port,this._username=s._username,this._password=s._password,this._path=s._path.slice(),this._path.pop()),l="relative path";continue}this._host=s._host,this._port=s._port,this._path=s._path.slice(),this._query=s._query,this._fragment="#",this._username=s._username,this._password=s._password,l="fragment"}break;case"relative slash":if("/"!=y&&"\\"!=y){"file"!=this._scheme&&(this._host=s._host,this._port=s._port,this._username=s._username,this._password=s._password),l="relative path";continue}"\\"==y&&c("\\ is an invalid code point."),l="file"==this._scheme?"file host":"authority ignore slashes";break;case"authority first slash":if("/"!=y){c("Expected '/', got: "+y),l="authority ignore slashes";continue}l="authority second slash";break;case"authority second slash":if(l="authority ignore slashes","/"!=y){c("Expected '/', got: "+y);continue}break;case"authority ignore slashes":if("/"!=y&&"\\"!=y){l="authority";continue}c("Expected authority, got: "+y);break;case"authority":if("@"==y){v&&(c("@ already seen."),d+="%40"),v=!0;for(var S=0;S<d.length;S++){var T=d[S];if("	"!=T&&"\n"!=T&&"\r"!=T)if(":"!=T||null!==this._password){var M=o(T);null!==this._password?this._password+=M:this._username+=M}else this._password="";else c("Invalid whitespace in authority.")}d=""}else{if(f==y||"/"==y||"\\"==y||"?"==y||"#"==y){u-=d.length,d="",l="host";continue}d+=y}break;case"file host":if(f==y||"/"==y||"\\"==y||"?"==y||"#"==y){2!=d.length||!m.test(d[0])||":"!=d[1]&&"|"!=d[1]?0==d.length?l="relative path start":(this._host=r.call(this,d),d="",l="relative path start"):l="relative path";continue}"	"==y||"\n"==y||"\r"==y?c("Invalid whitespace in file host."):d+=y;break;case"host":case"hostname":if(":"!=y||g){if(f==y||"/"==y||"\\"==y||"?"==y||"#"==y){if(this._host=r.call(this,d),d="",l="relative path start",a)break e;continue}"	"!=y&&"\n"!=y&&"\r"!=y?("["==y?g=!0:"]"==y&&(g=!1),d+=y):c("Invalid code point in host/hostname: "+y)}else if(this._host=r.call(this,d),d="",l="port","hostname"==a)break e;break;case"port":if(/[0-9]/.test(y))d+=y;else{if(f==y||"/"==y||"\\"==y||"?"==y||"#"==y||a){if(""!=d){var O=parseInt(d,10);O!=p[this._scheme]&&(this._port=O+""),d=""}if(a)break e;l="relative path start";continue}"	"==y||"\n"==y||"\r"==y?c("Invalid code point in port: "+y):n.call(this)}break;case"relative path start":if("\\"==y&&c("'\\' not allowed in path."),l="relative path","/"!=y&&"\\"!=y)continue;break;case"relative path":if(f!=y&&"/"!=y&&"\\"!=y&&(a||"?"!=y&&"#"!=y))"	"!=y&&"\n"!=y&&"\r"!=y&&(d+=o(y));else{"\\"==y&&c("\\ not allowed in relative path.");var L;(L=h[d.toLowerCase()])&&(d=L),".."==d?(this._path.pop(),"/"!=y&&"\\"!=y&&this._path.push("")):"."==d&&"/"!=y&&"\\"!=y?this._path.push(""):"."!=d&&("file"==this._scheme&&0==this._path.length&&2==d.length&&m.test(d[0])&&"|"==d[1]&&(d=d[0]+":"),this._path.push(d)),d="","?"==y?(this._query="?",l="query"):"#"==y&&(this._fragment="#",l="fragment")}break;case"query":a||"#"!=y?f!=y&&"	"!=y&&"\n"!=y&&"\r"!=y&&(this._query+=i(y)):(this._fragment="#",l="fragment");break;case"fragment":f!=y&&"	"!=y&&"\n"!=y&&"\r"!=y&&(this._fragment+=y)}u++}}function s(){this._scheme="",this._schemeData="",this._username="",this._password=null,this._host="",this._port="",this._path=[],this._query="",this._fragment="",this._isInvalid=!1,this._isRelative=!1}function c(e,t){void 0===t||t instanceof c||(t=new c(String(t))),this._url=e,s.call(this);var n=e.replace(/^[ \t\r\n\f]+|[ \t\r\n\f]+$/g,"");a.call(this,n,null,t)}var l=!1;if(!e.forceJURL)try{var u=new URL("b","http://a");u.pathname="c%20d",l="http://a/c%20d"===u.href}catch(d){}if(!l){var p=Object.create(null);p.ftp=21,p.file=0,p.gopher=70,p.http=80,p.https=443,p.ws=80,p.wss=443;var h=Object.create(null);h["%2e"]=".",h[".%2e"]="..",h["%2e."]="..",h["%2e%2e"]="..";var f=void 0,m=/[a-zA-Z]/,w=/[a-zA-Z0-9\+\-\.]/;c.prototype={toString:function(){return this.href},get href(){if(this._isInvalid)return this._url;var e="";return(""!=this._username||null!=this._password)&&(e=this._username+(null!=this._password?":"+this._password:"")+"@"),this.protocol+(this._isRelative?"//"+e+this.host:"")+this.pathname+this._query+this._fragment},set href(e){s.call(this),a.call(this,e)},get protocol(){return this._scheme+":"},set protocol(e){this._isInvalid||a.call(this,e+":","scheme start")},get host(){return this._isInvalid?"":this._port?this._host+":"+this._port:this._host},set host(e){!this._isInvalid&&this._isRelative&&a.call(this,e,"host")},get hostname(){return this._host},set hostname(e){!this._isInvalid&&this._isRelative&&a.call(this,e,"hostname")},get port(){return this._port},set port(e){!this._isInvalid&&this._isRelative&&a.call(this,e,"port")},get pathname(){return this._isInvalid?"":this._isRelative?"/"+this._path.join("/"):this._schemeData},set pathname(e){!this._isInvalid&&this._isRelative&&(this._path=[],a.call(this,e,"relative path start"))},get search(){return this._isInvalid||!this._query||"?"==this._query?"":this._query},set search(e){!this._isInvalid&&this._isRelative&&(this._query="?","?"==e[0]&&(e=e.slice(1)),a.call(this,e,"query"))},get hash(){return this._isInvalid||!this._fragment||"#"==this._fragment?"":this._fragment},set hash(e){this._isInvalid||(this._fragment="#","#"==e[0]&&(e=e.slice(1)),a.call(this,e,"fragment"))},get origin(){var e;if(this._isInvalid||!this._scheme)return"";switch(this._scheme){case"data":case"file":case"javascript":case"mailto":return"null"}return e=this.host,e?this._scheme+"://"+e:""}};var v=e.URL;v&&(c.createObjectURL=function(e){return v.createObjectURL.apply(v,arguments)},c.revokeObjectURL=function(e){v.revokeObjectURL(e)}),e.URL=c}}(self),function(e){function t(e){y.push(e),b||(b=!0,m(r))}function n(e){return window.ShadowDOMPolyfill&&window.ShadowDOMPolyfill.wrapIfNeeded(e)||e}function r(){b=!1;var e=y;y=[],e.sort(function(e,t){return e.uid_-t.uid_});var t=!1;e.forEach(function(e){var n=e.takeRecords();o(e),n.length&&(e.callback_(n,e),t=!0)}),t&&r()}function o(e){e.nodes_.forEach(function(t){var n=w.get(t);n&&n.forEach(function(t){t.observer===e&&t.removeTransientObservers()})})}function i(e,t){for(var n=e;n;n=n.parentNode){var r=w.get(n);if(r)for(var o=0;o<r.length;o++){var i=r[o],a=i.options;if(n===e||a.subtree){var s=t(a);s&&i.enqueue(s)}}}}function a(e){this.callback_=e,this.nodes_=[],this.records_=[],this.uid_=++E}function s(e,t){this.type=e,this.target=t,this.addedNodes=[],this.removedNodes=[],this.previousSibling=null,this.nextSibling=null,this.attributeName=null,this.attributeNamespace=null,this.oldValue=null}function c(e){var t=new s(e.type,e.target);return t.addedNodes=e.addedNodes.slice(),t.removedNodes=e.removedNodes.slice(),t.previousSibling=e.previousSibling,t.nextSibling=e.nextSibling,t.attributeName=e.attributeName,t.attributeNamespace=e.attributeNamespace,t.oldValue=e.oldValue,t}function l(e,t){return _=new s(e,t)}function u(e){return S?S:(S=c(_),S.oldValue=e,S)}function d(){_=S=void 0}function p(e){return e===S||e===_}function h(e,t){return e===t?e:S&&p(e)?S:null}function f(e,t,n){this.observer=e,this.target=t,this.options=n,this.transientObservedNodes=[]}if(!e.JsMutationObserver){var m,w=new WeakMap;if(/Trident|Edge/.test(navigator.userAgent))m=setTimeout;else if(window.setImmediate)m=window.setImmediate;else{var v=[],g=String(Math.random());window.addEventListener("message",function(e){if(e.data===g){var t=v;v=[],t.forEach(function(e){e()})}}),m=function(e){v.push(e),window.postMessage(g,"*")}}var b=!1,y=[],E=0;a.prototype={observe:function(e,t){if(e=n(e),!t.childList&&!t.attributes&&!t.characterData||t.attributeOldValue&&!t.attributes||t.attributeFilter&&t.attributeFilter.length&&!t.attributes||t.characterDataOldValue&&!t.characterData)throw new SyntaxError;var r=w.get(e);r||w.set(e,r=[]);for(var o,i=0;i<r.length;i++)if(r[i].observer===this){o=r[i],o.removeListeners(),o.options=t;break}o||(o=new f(this,e,t),r.push(o),this.nodes_.push(e)),o.addListeners()},disconnect:function(){this.nodes_.forEach(function(e){for(var t=w.get(e),n=0;n<t.length;n++){var r=t[n];if(r.observer===this){r.removeListeners(),t.splice(n,1);break}}},this),this.records_=[]},takeRecords:function(){var e=this.records_;return this.records_=[],e}};var _,S;f.prototype={enqueue:function(e){var n=this.observer.records_,r=n.length;if(n.length>0){var o=n[r-1],i=h(o,e);if(i)return void(n[r-1]=i)}else t(this.observer);n[r]=e},addListeners:function(){this.addListeners_(this.target)},addListeners_:function(e){var t=this.options;t.attributes&&e.addEventListener("DOMAttrModified",this,!0),t.characterData&&e.addEventListener("DOMCharacterDataModified",this,!0),t.childList&&e.addEventListener("DOMNodeInserted",this,!0),(t.childList||t.subtree)&&e.addEventListener("DOMNodeRemoved",this,!0)},removeListeners:function(){this.removeListeners_(this.target)},removeListeners_:function(e){var t=this.options;t.attributes&&e.removeEventListener("DOMAttrModified",this,!0),t.characterData&&e.removeEventListener("DOMCharacterDataModified",this,!0),t.childList&&e.removeEventListener("DOMNodeInserted",this,!0),(t.childList||t.subtree)&&e.removeEventListener("DOMNodeRemoved",this,!0)},addTransientObserver:function(e){if(e!==this.target){this.addListeners_(e),this.transientObservedNodes.push(e);var t=w.get(e);t||w.set(e,t=[]),t.push(this)}},removeTransientObservers:function(){var e=this.transientObservedNodes;this.transientObservedNodes=[],e.forEach(function(e){this.removeListeners_(e);for(var t=w.get(e),n=0;n<t.length;n++)if(t[n]===this){t.splice(n,1);break}},this)},handleEvent:function(e){switch(e.stopImmediatePropagation(),e.type){case"DOMAttrModified":var t=e.attrName,n=e.relatedNode.namespaceURI,r=e.target,o=new l("attributes",r);o.attributeName=t,o.attributeNamespace=n;var a=e.attrChange===MutationEvent.ADDITION?null:e.prevValue;i(r,function(e){return!e.attributes||e.attributeFilter&&e.attributeFilter.length&&-1===e.attributeFilter.indexOf(t)&&-1===e.attributeFilter.indexOf(n)?void 0:e.attributeOldValue?u(a):o});break;case"DOMCharacterDataModified":var r=e.target,o=l("characterData",r),a=e.prevValue;i(r,function(e){return e.characterData?e.characterDataOldValue?u(a):o:void 0});break;case"DOMNodeRemoved":this.addTransientObserver(e.target);case"DOMNodeInserted":var s,c,p=e.target;"DOMNodeInserted"===e.type?(s=[p],c=[]):(s=[],c=[p]);var h=p.previousSibling,f=p.nextSibling,o=l("childList",e.target.parentNode);o.addedNodes=s,o.removedNodes=c,o.previousSibling=h,o.nextSibling=f,i(e.relatedNode,function(e){return e.childList?o:void 0})}d()}},e.JsMutationObserver=a,e.MutationObserver||(e.MutationObserver=a,a._isPolyfilled=!0)}}(self),function(e){"use strict";if(!window.performance){var t=Date.now();window.performance={now:function(){return Date.now()-t}}}window.requestAnimationFrame||(window.requestAnimationFrame=function(){var e=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame;return e?function(t){return e(function(){t(performance.now())})}:function(e){return window.setTimeout(e,1e3/60)}}()),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(){return window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(e){clearTimeout(e)}}());var n=function(){var e=document.createEvent("Event");return e.initEvent("foo",!0,!0),e.preventDefault(),e.defaultPrevented}();if(!n){var r=Event.prototype.preventDefault;Event.prototype.preventDefault=function(){this.cancelable&&(r.call(this),Object.defineProperty(this,"defaultPrevented",{get:function(){return!0},configurable:!0}))}}var o=/Trident/.test(navigator.userAgent);if((!window.CustomEvent||o&&"function"!=typeof window.CustomEvent)&&(window.CustomEvent=function(e,t){t=t||{};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,Boolean(t.bubbles),Boolean(t.cancelable),t.detail),n},window.CustomEvent.prototype=window.Event.prototype),!window.Event||o&&"function"!=typeof window.Event){var i=window.Event;window.Event=function(e,t){t=t||{};var n=document.createEvent("Event");return n.initEvent(e,Boolean(t.bubbles),Boolean(t.cancelable)),n},window.Event.prototype=i.prototype}}(window.WebComponents),window.HTMLImports=window.HTMLImports||{flags:{}},function(e){function t(e,t){t=t||f,r(function(){i(e,t)},t)}function n(e){return"complete"===e.readyState||e.readyState===v}function r(e,t){if(n(t))e&&e();else{var o=function(){("complete"===t.readyState||t.readyState===v)&&(t.removeEventListener(g,o),r(e,t))};t.addEventListener(g,o)}}function o(e){e.target.__loaded=!0}function i(e,t){function n(){c==l&&e&&e({allImports:s,loadedImports:u,errorImports:d})}function r(e){o(e),u.push(this),
c++,n()}function i(e){d.push(this),c++,n()}var s=t.querySelectorAll("link[rel=import]"),c=0,l=s.length,u=[],d=[];if(l)for(var p,h=0;l>h&&(p=s[h]);h++)a(p)?(u.push(this),c++,n()):(p.addEventListener("load",r),p.addEventListener("error",i));else n()}function a(e){return d?e.__loaded||e["import"]&&"loading"!==e["import"].readyState:e.__importParsed}function s(e){for(var t,n=0,r=e.length;r>n&&(t=e[n]);n++)c(t)&&l(t)}function c(e){return"link"===e.localName&&"import"===e.rel}function l(e){var t=e["import"];t?o({target:e}):(e.addEventListener("load",o),e.addEventListener("error",o))}var u="import",d=Boolean(u in document.createElement("link")),p=Boolean(window.ShadowDOMPolyfill),h=function(e){return p?window.ShadowDOMPolyfill.wrapIfNeeded(e):e},f=h(document),m={get:function(){var e=window.HTMLImports.currentScript||document.currentScript||("complete"!==document.readyState?document.scripts[document.scripts.length-1]:null);return h(e)},configurable:!0};Object.defineProperty(document,"_currentScript",m),Object.defineProperty(f,"_currentScript",m);var w=/Trident/.test(navigator.userAgent),v=w?"complete":"interactive",g="readystatechange";d&&(new MutationObserver(function(e){for(var t,n=0,r=e.length;r>n&&(t=e[n]);n++)t.addedNodes&&s(t.addedNodes)}).observe(document.head,{childList:!0}),function(){if("loading"===document.readyState)for(var e,t=document.querySelectorAll("link[rel=import]"),n=0,r=t.length;r>n&&(e=t[n]);n++)l(e)}()),t(function(e){window.HTMLImports.ready=!0,window.HTMLImports.readyTime=(new Date).getTime();var t=f.createEvent("CustomEvent");t.initCustomEvent("HTMLImportsLoaded",!0,!0,e),f.dispatchEvent(t)}),e.IMPORT_LINK_TYPE=u,e.useNative=d,e.rootDocument=f,e.whenReady=t,e.isIE=w}(window.HTMLImports),function(e){var t=[],n=function(e){t.push(e)},r=function(){t.forEach(function(t){t(e)})};e.addModule=n,e.initializeModules=r}(window.HTMLImports),window.HTMLImports.addModule(function(e){var t=/(url\()([^)]*)(\))/g,n=/(@import[\s]+(?!url\())([^;]*)(;)/g,r={resolveUrlsInStyle:function(e,t){var n=e.ownerDocument,r=n.createElement("a");return e.textContent=this.resolveUrlsInCssText(e.textContent,t,r),e},resolveUrlsInCssText:function(e,r,o){var i=this.replaceUrls(e,o,r,t);return i=this.replaceUrls(i,o,r,n)},replaceUrls:function(e,t,n,r){return e.replace(r,function(e,r,o,i){var a=o.replace(/["']/g,"");return n&&(a=new URL(a,n).href),t.href=a,a=t.href,r+"'"+a+"'"+i})}};e.path=r}),window.HTMLImports.addModule(function(e){var t={async:!0,ok:function(e){return e.status>=200&&e.status<300||304===e.status||0===e.status},load:function(n,r,o){var i=new XMLHttpRequest;return(e.flags.debug||e.flags.bust)&&(n+="?"+Math.random()),i.open("GET",n,t.async),i.addEventListener("readystatechange",function(e){if(4===i.readyState){var n=null;try{var a=i.getResponseHeader("Location");a&&(n="/"===a.substr(0,1)?location.origin+a:a)}catch(e){console.error(e.message)}r.call(o,!t.ok(i)&&i,i.response||i.responseText,n)}}),i.send(),i},loadDocument:function(e,t,n){this.load(e,t,n).responseType="document"}};e.xhr=t}),window.HTMLImports.addModule(function(e){var t=e.xhr,n=e.flags,r=function(e,t){this.cache={},this.onload=e,this.oncomplete=t,this.inflight=0,this.pending={}};r.prototype={addNodes:function(e){this.inflight+=e.length;for(var t,n=0,r=e.length;r>n&&(t=e[n]);n++)this.require(t);this.checkDone()},addNode:function(e){this.inflight++,this.require(e),this.checkDone()},require:function(e){var t=e.src||e.href;e.__nodeUrl=t,this.dedupe(t,e)||this.fetch(t,e)},dedupe:function(e,t){if(this.pending[e])return this.pending[e].push(t),!0;return this.cache[e]?(this.onload(e,t,this.cache[e]),this.tail(),!0):(this.pending[e]=[t],!1)},fetch:function(e,r){if(n.load&&console.log("fetch",e,r),e)if(e.match(/^data:/)){var o=e.split(","),i=o[0],a=o[1];a=i.indexOf(";base64")>-1?atob(a):decodeURIComponent(a),setTimeout(function(){this.receive(e,r,null,a)}.bind(this),0)}else{var s=function(t,n,o){this.receive(e,r,t,n,o)}.bind(this);t.load(e,s)}else setTimeout(function(){this.receive(e,r,{error:"href must be specified"},null)}.bind(this),0)},receive:function(e,t,n,r,o){this.cache[e]=r;for(var i,a=this.pending[e],s=0,c=a.length;c>s&&(i=a[s]);s++)this.onload(e,i,r,n,o),this.tail();this.pending[e]=null},tail:function(){--this.inflight,this.checkDone()},checkDone:function(){this.inflight||this.oncomplete()}},e.Loader=r}),window.HTMLImports.addModule(function(e){var t=function(e){this.addCallback=e,this.mo=new MutationObserver(this.handler.bind(this))};t.prototype={handler:function(e){for(var t,n=0,r=e.length;r>n&&(t=e[n]);n++)"childList"===t.type&&t.addedNodes.length&&this.addedNodes(t.addedNodes)},addedNodes:function(e){this.addCallback&&this.addCallback(e);for(var t,n=0,r=e.length;r>n&&(t=e[n]);n++)t.children&&t.children.length&&this.addedNodes(t.children)},observe:function(e){this.mo.observe(e,{childList:!0,subtree:!0})}},e.Observer=t}),window.HTMLImports.addModule(function(e){function t(e){return"link"===e.localName&&e.rel===u}function n(e){var t=r(e);return"data:text/javascript;charset=utf-8,"+encodeURIComponent(t)}function r(e){return e.textContent+o(e)}function o(e){var t=e.ownerDocument;t.__importedScripts=t.__importedScripts||0;var n=e.ownerDocument.baseURI,r=t.__importedScripts?"-"+t.__importedScripts:"";return t.__importedScripts++,"\n//# sourceURL="+n+r+".js\n"}function i(e){var t=e.ownerDocument.createElement("style");return t.textContent=e.textContent,a.resolveUrlsInStyle(t),t}var a=e.path,s=e.rootDocument,c=e.flags,l=e.isIE,u=e.IMPORT_LINK_TYPE,d="link[rel="+u+"]",p={documentSelectors:d,importsSelectors:[d,"link[rel=stylesheet]:not([type])","style:not([type])","script:not([type])",'script[type="application/javascript"]','script[type="text/javascript"]'].join(","),map:{link:"parseLink",script:"parseScript",style:"parseStyle"},dynamicElements:[],parseNext:function(){var e=this.nextToParse();e&&this.parse(e)},parse:function(e){if(this.isParsed(e))return void(c.parse&&console.log("[%s] is already parsed",e.localName));var t=this[this.map[e.localName]];t&&(this.markParsing(e),t.call(this,e))},parseDynamic:function(e,t){this.dynamicElements.push(e),t||this.parseNext()},markParsing:function(e){c.parse&&console.log("parsing",e),this.parsingElement=e},markParsingComplete:function(e){e.__importParsed=!0,this.markDynamicParsingComplete(e),e.__importElement&&(e.__importElement.__importParsed=!0,this.markDynamicParsingComplete(e.__importElement)),this.parsingElement=null,c.parse&&console.log("completed",e)},markDynamicParsingComplete:function(e){var t=this.dynamicElements.indexOf(e);t>=0&&this.dynamicElements.splice(t,1)},parseImport:function(e){if(e["import"]=e.__doc,window.HTMLImports.__importsParsingHook&&window.HTMLImports.__importsParsingHook(e),e["import"]&&(e["import"].__importParsed=!0),this.markParsingComplete(e),e.__resource&&!e.__error?e.dispatchEvent(new CustomEvent("load",{bubbles:!1})):e.dispatchEvent(new CustomEvent("error",{bubbles:!1})),e.__pending)for(var t;e.__pending.length;)t=e.__pending.shift(),t&&t({target:e});this.parseNext()},parseLink:function(e){t(e)?this.parseImport(e):(e.href=e.href,this.parseGeneric(e))},parseStyle:function(e){var t=e;e=i(e),t.__appliedElement=e,e.__importElement=t,this.parseGeneric(e)},parseGeneric:function(e){this.trackElement(e),this.addElementToDocument(e)},rootImportForElement:function(e){for(var t=e;t.ownerDocument.__importLink;)t=t.ownerDocument.__importLink;return t},addElementToDocument:function(e){var t=this.rootImportForElement(e.__importElement||e);t.parentNode.insertBefore(e,t)},trackElement:function(e,t){var n=this,r=function(o){e.removeEventListener("load",r),e.removeEventListener("error",r),t&&t(o),n.markParsingComplete(e),n.parseNext()};if(e.addEventListener("load",r),e.addEventListener("error",r),l&&"style"===e.localName){var o=!1;if(-1==e.textContent.indexOf("@import"))o=!0;else if(e.sheet){o=!0;for(var i,a=e.sheet.cssRules,s=a?a.length:0,c=0;s>c&&(i=a[c]);c++)i.type===CSSRule.IMPORT_RULE&&(o=o&&Boolean(i.styleSheet))}o&&setTimeout(function(){e.dispatchEvent(new CustomEvent("load",{bubbles:!1}))})}},parseScript:function(t){var r=document.createElement("script");r.__importElement=t,r.src=t.src?t.src:n(t),e.currentScript=t,this.trackElement(r,function(t){r.parentNode&&r.parentNode.removeChild(r),e.currentScript=null}),this.addElementToDocument(r)},nextToParse:function(){return this._mayParse=[],!this.parsingElement&&(this.nextToParseInDoc(s)||this.nextToParseDynamic())},nextToParseInDoc:function(e,n){if(e&&this._mayParse.indexOf(e)<0){this._mayParse.push(e);for(var r,o=e.querySelectorAll(this.parseSelectorsForNode(e)),i=0,a=o.length;a>i&&(r=o[i]);i++)if(!this.isParsed(r))return this.hasResource(r)?t(r)?this.nextToParseInDoc(r.__doc,r):r:void 0}return n},nextToParseDynamic:function(){return this.dynamicElements[0]},parseSelectorsForNode:function(e){var t=e.ownerDocument||e;return t===s?this.documentSelectors:this.importsSelectors},isParsed:function(e){return e.__importParsed},needsDynamicParsing:function(e){return this.dynamicElements.indexOf(e)>=0},hasResource:function(e){return t(e)&&void 0===e.__doc?!1:!0}};e.parser=p,e.IMPORT_SELECTOR=d}),window.HTMLImports.addModule(function(e){function t(e){return n(e,a)}function n(e,t){return"link"===e.localName&&e.getAttribute("rel")===t}function r(e){return!!Object.getOwnPropertyDescriptor(e,"baseURI")}function o(e,t){var n=document.implementation.createHTMLDocument(a);n._URL=t;var o=n.createElement("base");o.setAttribute("href",t),n.baseURI||r(n)||Object.defineProperty(n,"baseURI",{value:t});var i=n.createElement("meta");return i.setAttribute("charset","utf-8"),n.head.appendChild(i),n.head.appendChild(o),n.body.innerHTML=e,window.HTMLTemplateElement&&HTMLTemplateElement.bootstrap&&HTMLTemplateElement.bootstrap(n),n}var i=e.flags,a=e.IMPORT_LINK_TYPE,s=e.IMPORT_SELECTOR,c=e.rootDocument,l=e.Loader,u=e.Observer,d=e.parser,p={documents:{},documentPreloadSelectors:s,importsPreloadSelectors:[s].join(","),loadNode:function(e){h.addNode(e)},loadSubtree:function(e){var t=this.marshalNodes(e);h.addNodes(t)},marshalNodes:function(e){return e.querySelectorAll(this.loadSelectorsForNode(e))},loadSelectorsForNode:function(e){var t=e.ownerDocument||e;return t===c?this.documentPreloadSelectors:this.importsPreloadSelectors},loaded:function(e,n,r,a,s){if(i.load&&console.log("loaded",e,n),n.__resource=r,n.__error=a,t(n)){var c=this.documents[e];void 0===c&&(c=a?null:o(r,s||e),c&&(c.__importLink=n,this.bootDocument(c)),this.documents[e]=c),n.__doc=c}d.parseNext()},bootDocument:function(e){this.loadSubtree(e),this.observer.observe(e),d.parseNext()},loadedAll:function(){d.parseNext()}},h=new l(p.loaded.bind(p),p.loadedAll.bind(p));if(p.observer=new u,!document.baseURI){var f={get:function(){var e=document.querySelector("base");return e?e.href:window.location.href},configurable:!0};Object.defineProperty(document,"baseURI",f),Object.defineProperty(c,"baseURI",f)}e.importer=p,e.importLoader=h}),window.HTMLImports.addModule(function(e){var t=e.parser,n=e.importer,r={added:function(e){for(var r,o,i,a,s=0,c=e.length;c>s&&(a=e[s]);s++)r||(r=a.ownerDocument,o=t.isParsed(r)),i=this.shouldLoadNode(a),i&&n.loadNode(a),this.shouldParseNode(a)&&o&&t.parseDynamic(a,i)},shouldLoadNode:function(e){return 1===e.nodeType&&o.call(e,n.loadSelectorsForNode(e))},shouldParseNode:function(e){return 1===e.nodeType&&o.call(e,t.parseSelectorsForNode(e))}};n.observer.addCallback=r.added.bind(r);var o=HTMLElement.prototype.matches||HTMLElement.prototype.matchesSelector||HTMLElement.prototype.webkitMatchesSelector||HTMLElement.prototype.mozMatchesSelector||HTMLElement.prototype.msMatchesSelector}),function(e){function t(){window.HTMLImports.importer.bootDocument(r)}var n=e.initializeModules;e.isIE;if(!e.useNative){n();var r=e.rootDocument;"complete"===document.readyState||"interactive"===document.readyState&&!window.attachEvent?t():document.addEventListener("DOMContentLoaded",t)}}(window.HTMLImports),window.CustomElements=window.CustomElements||{flags:{}},function(e){var t=e.flags,n=[],r=function(e){n.push(e)},o=function(){n.forEach(function(t){t(e)})};e.addModule=r,e.initializeModules=o,e.hasNative=Boolean(document.registerElement),e.isIE=/Trident/.test(navigator.userAgent),e.useNative=!t.register&&e.hasNative&&!window.ShadowDOMPolyfill&&(!window.HTMLImports||window.HTMLImports.useNative)}(window.CustomElements),window.CustomElements.addModule(function(e){function t(e,t){n(e,function(e){return t(e)?!0:void r(e,t)}),r(e,t)}function n(e,t,r){var o=e.firstElementChild;if(!o)for(o=e.firstChild;o&&o.nodeType!==Node.ELEMENT_NODE;)o=o.nextSibling;for(;o;)t(o,r)!==!0&&n(o,t,r),o=o.nextElementSibling;return null}function r(e,n){for(var r=e.shadowRoot;r;)t(r,n),r=r.olderShadowRoot}function o(e,t){i(e,t,[])}function i(e,t,n){if(e=window.wrap(e),!(n.indexOf(e)>=0)){n.push(e);for(var r,o=e.querySelectorAll("link[rel="+a+"]"),s=0,c=o.length;c>s&&(r=o[s]);s++)r["import"]&&i(r["import"],t,n);t(e)}}var a=window.HTMLImports?window.HTMLImports.IMPORT_LINK_TYPE:"none";e.forDocumentTree=o,e.forSubtree=t}),window.CustomElements.addModule(function(e){function t(e,t){return n(e,t)||r(e,t)}function n(t,n){return e.upgrade(t,n)?!0:void(n&&a(t))}function r(e,t){b(e,function(e){return n(e,t)?!0:void 0})}function o(e){S.push(e),_||(_=!0,setTimeout(i))}function i(){_=!1;for(var e,t=S,n=0,r=t.length;r>n&&(e=t[n]);n++)e();S=[]}function a(e){E?o(function(){s(e)}):s(e)}function s(e){e.__upgraded__&&!e.__attached&&(e.__attached=!0,e.attachedCallback&&e.attachedCallback())}function c(e){l(e),b(e,function(e){l(e)})}function l(e){E?o(function(){u(e)}):u(e)}function u(e){e.__upgraded__&&e.__attached&&(e.__attached=!1,e.detachedCallback&&e.detachedCallback())}function d(e){for(var t=e,n=window.wrap(document);t;){if(t==n)return!0;t=t.parentNode||t.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&t.host}}function p(e){if(e.shadowRoot&&!e.shadowRoot.__watched){g.dom&&console.log("watching shadow-root for: ",e.localName);for(var t=e.shadowRoot;t;)m(t),t=t.olderShadowRoot}}function h(e,n){if(g.dom){var r=n[0];if(r&&"childList"===r.type&&r.addedNodes&&r.addedNodes){for(var o=r.addedNodes[0];o&&o!==document&&!o.host;)o=o.parentNode;var i=o&&(o.URL||o._URL||o.host&&o.host.localName)||"";i=i.split("/?").shift().split("/").pop()}console.group("mutations (%d) [%s]",n.length,i||"")}var a=d(e);n.forEach(function(e){"childList"===e.type&&(T(e.addedNodes,function(e){e.localName&&t(e,a)}),T(e.removedNodes,function(e){e.localName&&c(e)}))}),g.dom&&console.groupEnd()}function f(e){for(e=window.wrap(e),e||(e=window.wrap(document));e.parentNode;)e=e.parentNode;var t=e.__observer;t&&(h(e,t.takeRecords()),i())}function m(e){if(!e.__observer){var t=new MutationObserver(h.bind(this,e));t.observe(e,{childList:!0,subtree:!0}),e.__observer=t}}function w(e){e=window.wrap(e),g.dom&&console.group("upgradeDocument: ",e.baseURI.split("/").pop());var n=e===window.wrap(document);t(e,n),m(e),g.dom&&console.groupEnd()}function v(e){y(e,w)}var g=e.flags,b=e.forSubtree,y=e.forDocumentTree,E=window.MutationObserver._isPolyfilled&&g["throttle-attached"];e.hasPolyfillMutations=E,e.hasThrottledAttached=E;var _=!1,S=[],T=Array.prototype.forEach.call.bind(Array.prototype.forEach),M=Element.prototype.createShadowRoot;M&&(Element.prototype.createShadowRoot=function(){var e=M.call(this);return window.CustomElements.watchShadow(this),e}),e.watchShadow=p,e.upgradeDocumentTree=v,e.upgradeDocument=w,e.upgradeSubtree=r,e.upgradeAll=t,e.attached=a,e.takeRecords=f}),window.CustomElements.addModule(function(e){function t(t,r){if("template"===t.localName&&window.HTMLTemplateElement&&HTMLTemplateElement.decorate&&HTMLTemplateElement.decorate(t),!t.__upgraded__&&t.nodeType===Node.ELEMENT_NODE){var o=t.getAttribute("is"),i=e.getRegisteredDefinition(t.localName)||e.getRegisteredDefinition(o);if(i&&(o&&i.tag==t.localName||!o&&!i["extends"]))return n(t,i,r)}}function n(t,n,o){return a.upgrade&&console.group("upgrade:",t.localName),n.is&&t.setAttribute("is",n.is),r(t,n),t.__upgraded__=!0,i(t),o&&e.attached(t),e.upgradeSubtree(t,o),a.upgrade&&console.groupEnd(),t}function r(e,t){Object.__proto__?e.__proto__=t.prototype:(o(e,t.prototype,t["native"]),e.__proto__=t.prototype)}function o(e,t,n){for(var r={},o=t;o!==n&&o!==HTMLElement.prototype;){for(var i,a=Object.getOwnPropertyNames(o),s=0;i=a[s];s++)r[i]||(Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(o,i)),r[i]=1);o=Object.getPrototypeOf(o)}}function i(e){e.createdCallback&&e.createdCallback()}var a=e.flags;e.upgrade=t,e.upgradeWithDefinition=n,e.implementPrototype=r}),window.CustomElements.addModule(function(e){function t(t,r){var c=r||{};if(!t)throw new Error("document.registerElement: first argument `name` must not be empty");if(t.indexOf("-")<0)throw new Error("document.registerElement: first argument ('name') must contain a dash ('-'). Argument provided was '"+String(t)+"'.");if(o(t))throw new Error("Failed to execute 'registerElement' on 'Document': Registration failed for type '"+String(t)+"'. The type name is invalid.");if(l(t))throw new Error("DuplicateDefinitionError: a type with name '"+String(t)+"' is already registered");return c.prototype||(c.prototype=Object.create(HTMLElement.prototype)),c.__name=t.toLowerCase(),c.lifecycle=c.lifecycle||{},c.ancestry=i(c["extends"]),a(c),s(c),n(c.prototype),u(c.__name,c),c.ctor=d(c),c.ctor.prototype=c.prototype,c.prototype.constructor=c.ctor,e.ready&&v(document),c.ctor}function n(e){if(!e.setAttribute._polyfilled){var t=e.setAttribute;e.setAttribute=function(e,n){r.call(this,e,n,t)};var n=e.removeAttribute;e.removeAttribute=function(e){r.call(this,e,null,n)},e.setAttribute._polyfilled=!0}}function r(e,t,n){e=e.toLowerCase();var r=this.getAttribute(e);n.apply(this,arguments);var o=this.getAttribute(e);this.attributeChangedCallback&&o!==r&&this.attributeChangedCallback(e,r,o)}function o(e){for(var t=0;t<_.length;t++)if(e===_[t])return!0}function i(e){var t=l(e);return t?i(t["extends"]).concat([t]):[]}function a(e){for(var t,n=e["extends"],r=0;t=e.ancestry[r];r++)n=t.is&&t.tag;e.tag=n||e.__name,n&&(e.is=e.__name)}function s(e){if(!Object.__proto__){var t=HTMLElement.prototype;if(e.is){var n=document.createElement(e.tag);t=Object.getPrototypeOf(n)}for(var r,o=e.prototype,i=!1;o;)o==t&&(i=!0),r=Object.getPrototypeOf(o),r&&(o.__proto__=r),o=r;i||console.warn(e.tag+" prototype not found in prototype chain for "+e.is),e["native"]=t}}function c(e){return b(M(e.tag),e)}function l(e){return e?S[e.toLowerCase()]:void 0}function u(e,t){S[e]=t}function d(e){return function(){return c(e)}}function p(e,t,n){return e===T?h(t,n):O(e,t)}function h(e,t){e&&(e=e.toLowerCase()),t&&(t=t.toLowerCase());var n=l(t||e);if(n){if(e==n.tag&&t==n.is)return new n.ctor;if(!t&&!n.is)return new n.ctor}var r;return t?(r=h(e),r.setAttribute("is",t),r):(r=M(e),e.indexOf("-")>=0&&y(r,HTMLElement),r)}function f(e,t){var n=e[t];e[t]=function(){var e=n.apply(this,arguments);return g(e),e}}var m,w=e.isIE,v=e.upgradeDocumentTree,g=e.upgradeAll,b=e.upgradeWithDefinition,y=e.implementPrototype,E=e.useNative,_=["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"],S={},T="http://www.w3.org/1999/xhtml",M=document.createElement.bind(document),O=document.createElementNS.bind(document);m=Object.__proto__||E?function(e,t){return e instanceof t}:function(e,t){if(e instanceof t)return!0;for(var n=e;n;){if(n===t.prototype)return!0;n=n.__proto__}return!1},f(Node.prototype,"cloneNode"),f(document,"importNode"),w&&!function(){var e=document.importNode;document.importNode=function(){var t=e.apply(document,arguments);if(t.nodeType==t.DOCUMENT_FRAGMENT_NODE){var n=document.createDocumentFragment();return n.appendChild(t),n}return t}}(),document.registerElement=t,document.createElement=h,document.createElementNS=p,e.registry=S,e["instanceof"]=m,e.reservedTagList=_,e.getRegisteredDefinition=l,document.register=document.registerElement}),function(e){function t(){i(window.wrap(document)),window.CustomElements.ready=!0;var e=window.requestAnimationFrame||function(e){setTimeout(e,16)};e(function(){setTimeout(function(){window.CustomElements.readyTime=Date.now(),window.HTMLImports&&(window.CustomElements.elapsed=window.CustomElements.readyTime-window.HTMLImports.readyTime),document.dispatchEvent(new CustomEvent("WebComponentsReady",{bubbles:!0}))})})}var n=e.useNative,r=e.initializeModules;e.isIE;if(n){var o=function(){};e.watchShadow=o,e.upgrade=o,e.upgradeAll=o,e.upgradeDocumentTree=o,e.upgradeSubtree=o,e.takeRecords=o,e["instanceof"]=function(e,t){return e instanceof t}}else r();var i=e.upgradeDocumentTree,a=e.upgradeDocument;if(window.wrap||(window.ShadowDOMPolyfill?(window.wrap=window.ShadowDOMPolyfill.wrapIfNeeded,window.unwrap=window.ShadowDOMPolyfill.unwrapIfNeeded):window.wrap=window.unwrap=function(e){return e}),window.HTMLImports&&(window.HTMLImports.__importsParsingHook=function(e){e["import"]&&a(wrap(e["import"]))}),"complete"===document.readyState||e.flags.eager)t();else if("interactive"!==document.readyState||window.attachEvent||window.HTMLImports&&!window.HTMLImports.ready){var s=window.HTMLImports&&!window.HTMLImports.ready?"HTMLImportsLoaded":"DOMContentLoaded";window.addEventListener(s,t)}else t()}(window.CustomElements),function(e){Function.prototype.bind||(Function.prototype.bind=function(e){var t=this,n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(e,r)}})}(window.WebComponents),function(e){var t=document.createElement("style");t.textContent="body {transition: opacity ease-in 0.2s; } \nbody[unresolved] {opacity: 0; display: block; overflow: hidden; position: relative; } \n";var n=document.querySelector("head");n.insertBefore(t,n.firstChild)}(window.WebComponents),function(e){window.Platform=e}(window.WebComponents);
},{}],"xhr-proxy":[function(require,module,exports){
// Copyright (c) Microsoft Corporation. All rights reserved.
// Based in part on code from Apache Ripple, https://github.com/apache/incubator-ripple

var utils = require('utils');

var init = function () {
    var _XMLHttpRequest = XMLHttpRequest;
    window.XMLHttpRequest = function () {
        var xhr = new _XMLHttpRequest(),
            origMethods = {
                setRequestHeader: xhr.setRequestHeader,
                open: xhr.open
            };

        xhr.open = function (method, url) {
            var sameOrigin = utils.isSameOriginRequest(url);

            if (!sameOrigin) {
                url = '/xhr_proxy?rurl=' + escape(url);
            }

            origMethods.open.apply(xhr, Array.prototype.slice.call(arguments));
        };

        return xhr;
    };

    // Ensure that we retain all static properties, such as DONE
    window.XMLHttpRequest.__proto__ = _XMLHttpRequest;
};

module.exports = {
    init: init
};

},{"utils":"utils"}]},{},[32])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6L1VzZXJzL21zaSBtb2Rlcm4vQXBwRGF0YS9Sb2FtaW5nL25wbS9ub2RlX21vZHVsZXMvY29yZG92YS1zaW11bGF0ZS9ub2RlX21vZHVsZXMvYnJvd3Nlci1wYWNrL19wcmVsdWRlLmpzIiwiQzovVXNlcnMvbXNpIG1vZGVybi9BcHBEYXRhL1JvYW1pbmcvbnBtL25vZGVfbW9kdWxlcy9jb3Jkb3ZhLXNpbXVsYXRlL25vZGVfbW9kdWxlcy9icm93c2VyLXJlc29sdmUvZW1wdHkuanMiLCJDOi9Vc2Vycy9tc2kgbW9kZXJuL0FwcERhdGEvUm9hbWluZy9ucG0vbm9kZV9tb2R1bGVzL2NvcmRvdmEtc2ltdWxhdGUvbm9kZV9tb2R1bGVzL2NhbGwtYmluZC9jYWxsQm91bmQuanMiLCJDOi9Vc2Vycy9tc2kgbW9kZXJuL0FwcERhdGEvUm9hbWluZy9ucG0vbm9kZV9tb2R1bGVzL2NvcmRvdmEtc2ltdWxhdGUvbm9kZV9tb2R1bGVzL2NhbGwtYmluZC9pbmRleC5qcyIsIkM6L1VzZXJzL21zaSBtb2Rlcm4vQXBwRGF0YS9Sb2FtaW5nL25wbS9ub2RlX21vZHVsZXMvY29yZG92YS1zaW11bGF0ZS9ub2RlX21vZHVsZXMvZGVmaW5lLWRhdGEtcHJvcGVydHkvaW5kZXguanMiLCJDOi9Vc2Vycy9tc2kgbW9kZXJuL0FwcERhdGEvUm9hbWluZy9ucG0vbm9kZV9tb2R1bGVzL2NvcmRvdmEtc2ltdWxhdGUvbm9kZV9tb2R1bGVzL2VzLWRlZmluZS1wcm9wZXJ0eS9pbmRleC5qcyIsIkM6L1VzZXJzL21zaSBtb2Rlcm4vQXBwRGF0YS9Sb2FtaW5nL25wbS9ub2RlX21vZHVsZXMvY29yZG92YS1zaW11bGF0ZS9ub2RlX21vZHVsZXMvZXMtZXJyb3JzL2V2YWwuanMiLCJDOi9Vc2Vycy9tc2kgbW9kZXJuL0FwcERhdGEvUm9hbWluZy9ucG0vbm9kZV9tb2R1bGVzL2NvcmRvdmEtc2ltdWxhdGUvbm9kZV9tb2R1bGVzL2VzLWVycm9ycy9pbmRleC5qcyIsIkM6L1VzZXJzL21zaSBtb2Rlcm4vQXBwRGF0YS9Sb2FtaW5nL25wbS9ub2RlX21vZHVsZXMvY29yZG92YS1zaW11bGF0ZS9ub2RlX21vZHVsZXMvZXMtZXJyb3JzL3JhbmdlLmpzIiwiQzovVXNlcnMvbXNpIG1vZGVybi9BcHBEYXRhL1JvYW1pbmcvbnBtL25vZGVfbW9kdWxlcy9jb3Jkb3ZhLXNpbXVsYXRlL25vZGVfbW9kdWxlcy9lcy1lcnJvcnMvcmVmLmpzIiwiQzovVXNlcnMvbXNpIG1vZGVybi9BcHBEYXRhL1JvYW1pbmcvbnBtL25vZGVfbW9kdWxlcy9jb3Jkb3ZhLXNpbXVsYXRlL25vZGVfbW9kdWxlcy9lcy1lcnJvcnMvc3ludGF4LmpzIiwiQzovVXNlcnMvbXNpIG1vZGVybi9BcHBEYXRhL1JvYW1pbmcvbnBtL25vZGVfbW9kdWxlcy9jb3Jkb3ZhLXNpbXVsYXRlL25vZGVfbW9kdWxlcy9lcy1lcnJvcnMvdHlwZS5qcyIsIkM6L1VzZXJzL21zaSBtb2Rlcm4vQXBwRGF0YS9Sb2FtaW5nL25wbS9ub2RlX21vZHVsZXMvY29yZG92YS1zaW11bGF0ZS9ub2RlX21vZHVsZXMvZXMtZXJyb3JzL3VyaS5qcyIsIkM6L1VzZXJzL21zaSBtb2Rlcm4vQXBwRGF0YS9Sb2FtaW5nL25wbS9ub2RlX21vZHVsZXMvY29yZG92YS1zaW11bGF0ZS9ub2RlX21vZHVsZXMvZnVuY3Rpb24tYmluZC9pbXBsZW1lbnRhdGlvbi5qcyIsIkM6L1VzZXJzL21zaSBtb2Rlcm4vQXBwRGF0YS9Sb2FtaW5nL25wbS9ub2RlX21vZHVsZXMvY29yZG92YS1zaW11bGF0ZS9ub2RlX21vZHVsZXMvZnVuY3Rpb24tYmluZC9pbmRleC5qcyIsIkM6L1VzZXJzL21zaSBtb2Rlcm4vQXBwRGF0YS9Sb2FtaW5nL25wbS9ub2RlX21vZHVsZXMvY29yZG92YS1zaW11bGF0ZS9ub2RlX21vZHVsZXMvZ2V0LWludHJpbnNpYy9pbmRleC5qcyIsIkM6L1VzZXJzL21zaSBtb2Rlcm4vQXBwRGF0YS9Sb2FtaW5nL25wbS9ub2RlX21vZHVsZXMvY29yZG92YS1zaW11bGF0ZS9ub2RlX21vZHVsZXMvZ29wZC9pbmRleC5qcyIsIkM6L1VzZXJzL21zaSBtb2Rlcm4vQXBwRGF0YS9Sb2FtaW5nL25wbS9ub2RlX21vZHVsZXMvY29yZG92YS1zaW11bGF0ZS9ub2RlX21vZHVsZXMvaGFzLXByb3BlcnR5LWRlc2NyaXB0b3JzL2luZGV4LmpzIiwiQzovVXNlcnMvbXNpIG1vZGVybi9BcHBEYXRhL1JvYW1pbmcvbnBtL25vZGVfbW9kdWxlcy9jb3Jkb3ZhLXNpbXVsYXRlL25vZGVfbW9kdWxlcy9oYXMtcHJvdG8vaW5kZXguanMiLCJDOi9Vc2Vycy9tc2kgbW9kZXJuL0FwcERhdGEvUm9hbWluZy9ucG0vbm9kZV9tb2R1bGVzL2NvcmRvdmEtc2ltdWxhdGUvbm9kZV9tb2R1bGVzL2hhcy1zeW1ib2xzL2luZGV4LmpzIiwiQzovVXNlcnMvbXNpIG1vZGVybi9BcHBEYXRhL1JvYW1pbmcvbnBtL25vZGVfbW9kdWxlcy9jb3Jkb3ZhLXNpbXVsYXRlL25vZGVfbW9kdWxlcy9oYXMtc3ltYm9scy9zaGFtcy5qcyIsIkM6L1VzZXJzL21zaSBtb2Rlcm4vQXBwRGF0YS9Sb2FtaW5nL25wbS9ub2RlX21vZHVsZXMvY29yZG92YS1zaW11bGF0ZS9ub2RlX21vZHVsZXMvaGFzb3duL2luZGV4LmpzIiwiQzovVXNlcnMvbXNpIG1vZGVybi9BcHBEYXRhL1JvYW1pbmcvbnBtL25vZGVfbW9kdWxlcy9jb3Jkb3ZhLXNpbXVsYXRlL25vZGVfbW9kdWxlcy9vYmplY3QtaW5zcGVjdC9pbmRleC5qcyIsIkM6L1VzZXJzL21zaSBtb2Rlcm4vQXBwRGF0YS9Sb2FtaW5nL25wbS9ub2RlX21vZHVsZXMvY29yZG92YS1zaW11bGF0ZS9ub2RlX21vZHVsZXMvcHVueWNvZGUvcHVueWNvZGUuanMiLCJDOi9Vc2Vycy9tc2kgbW9kZXJuL0FwcERhdGEvUm9hbWluZy9ucG0vbm9kZV9tb2R1bGVzL2NvcmRvdmEtc2ltdWxhdGUvbm9kZV9tb2R1bGVzL3NldC1mdW5jdGlvbi1sZW5ndGgvaW5kZXguanMiLCJDOi9Vc2Vycy9tc2kgbW9kZXJuL0FwcERhdGEvUm9hbWluZy9ucG0vbm9kZV9tb2R1bGVzL2NvcmRvdmEtc2ltdWxhdGUvbm9kZV9tb2R1bGVzL3NpZGUtY2hhbm5lbC9pbmRleC5qcyIsIkM6L1VzZXJzL21zaSBtb2Rlcm4vQXBwRGF0YS9Sb2FtaW5nL25wbS9ub2RlX21vZHVsZXMvY29yZG92YS1zaW11bGF0ZS9ub2RlX21vZHVsZXMvdXJsL25vZGVfbW9kdWxlcy9xcy9saWIvZm9ybWF0cy5qcyIsIkM6L1VzZXJzL21zaSBtb2Rlcm4vQXBwRGF0YS9Sb2FtaW5nL25wbS9ub2RlX21vZHVsZXMvY29yZG92YS1zaW11bGF0ZS9ub2RlX21vZHVsZXMvdXJsL25vZGVfbW9kdWxlcy9xcy9saWIvaW5kZXguanMiLCJDOi9Vc2Vycy9tc2kgbW9kZXJuL0FwcERhdGEvUm9hbWluZy9ucG0vbm9kZV9tb2R1bGVzL2NvcmRvdmEtc2ltdWxhdGUvbm9kZV9tb2R1bGVzL3VybC9ub2RlX21vZHVsZXMvcXMvbGliL3BhcnNlLmpzIiwiQzovVXNlcnMvbXNpIG1vZGVybi9BcHBEYXRhL1JvYW1pbmcvbnBtL25vZGVfbW9kdWxlcy9jb3Jkb3ZhLXNpbXVsYXRlL25vZGVfbW9kdWxlcy91cmwvbm9kZV9tb2R1bGVzL3FzL2xpYi9zdHJpbmdpZnkuanMiLCJDOi9Vc2Vycy9tc2kgbW9kZXJuL0FwcERhdGEvUm9hbWluZy9ucG0vbm9kZV9tb2R1bGVzL2NvcmRvdmEtc2ltdWxhdGUvbm9kZV9tb2R1bGVzL3VybC9ub2RlX21vZHVsZXMvcXMvbGliL3V0aWxzLmpzIiwiQzovVXNlcnMvbXNpIG1vZGVybi9BcHBEYXRhL1JvYW1pbmcvbnBtL25vZGVfbW9kdWxlcy9jb3Jkb3ZhLXNpbXVsYXRlL25vZGVfbW9kdWxlcy91cmwvdXJsLmpzIiwiQzovVXNlcnMvbXNpIG1vZGVybi9BcHBEYXRhL1JvYW1pbmcvbnBtL25vZGVfbW9kdWxlcy9jb3Jkb3ZhLXNpbXVsYXRlL3NyYy9hcHAtaG9zdC9hcHAtaG9zdC5qcyIsIkM6L1VzZXJzL21zaSBtb2Rlcm4vQXBwRGF0YS9Sb2FtaW5nL25wbS9ub2RlX21vZHVsZXMvY29yZG92YS1zaW11bGF0ZS9zcmMvYXBwLWhvc3QvbGl2ZS1yZWxvYWQtY2xpZW50LmpzIiwiQzovVXNlcnMvbXNpIG1vZGVybi9BcHBEYXRhL1JvYW1pbmcvbnBtL25vZGVfbW9kdWxlcy9jb3Jkb3ZhLXNpbXVsYXRlL3NyYy9hcHAtaG9zdC90b3VjaC1ldmVudHMuanMiLCJDOi9Vc2Vycy9tc2kgbW9kZXJuL0FwcERhdGEvUm9hbWluZy9ucG0vbm9kZV9tb2R1bGVzL2NvcmRvdmEtc2ltdWxhdGUvc3JjL3BsdWdpbnMvY29yZG92YS1wbHVnaW4tZmlsZS9NeUZpbGUuanMiLCJDOi9Vc2Vycy9tc2kgbW9kZXJuL0FwcERhdGEvUm9hbWluZy9ucG0vbm9kZV9tb2R1bGVzL2NvcmRvdmEtc2ltdWxhdGUvc3JjL3BsdWdpbnMvY29yZG92YS1wbHVnaW4tZmlsZS9hcHAtaG9zdC1ub24td2Via2l0LWhhbmRsZXJzLmpzIiwiQzovVXNlcnMvbXNpIG1vZGVybi9BcHBEYXRhL1JvYW1pbmcvbnBtL25vZGVfbW9kdWxlcy9jb3Jkb3ZhLXNpbXVsYXRlL3NyYy9wbHVnaW5zL2NvcmRvdmEtcGx1Z2luLWZpbGUvYXBwLWhvc3Qtd2Via2l0LWhhbmRsZXJzLmpzIiwiQzovVXNlcnMvbXNpIG1vZGVybi9BcHBEYXRhL1JvYW1pbmcvbnBtL25vZGVfbW9kdWxlcy9jb3Jkb3ZhLXNpbXVsYXRlL3NyYy9wbHVnaW5zL2NvcmRvdmEtcGx1Z2luLWZpbGUvaW5kZXhlZERCLmpzIiwiQzovVXNlcnMvbXNpIG1vZGVybi9BcHBEYXRhL1JvYW1pbmcvbnBtL25vZGVfbW9kdWxlcy9jb3Jkb3ZhLXNpbXVsYXRlL3NyYy9wbHVnaW5zL2NvcmRvdmEtcGx1Z2luLWdlb2xvY2F0aW9uL0Nvb3JkaW5hdGVzLmpzIiwiQzovVXNlcnMvbXNpIG1vZGVybi9BcHBEYXRhL1JvYW1pbmcvbnBtL25vZGVfbW9kdWxlcy9jb3Jkb3ZhLXNpbXVsYXRlL3NyYy9wbHVnaW5zL2NvcmRvdmEtcGx1Z2luLWdlb2xvY2F0aW9uL1Bvc2l0aW9uLmpzIiwiQzovVXNlcnMvbXNpIG1vZGVybi9BcHBEYXRhL1JvYW1pbmcvbnBtL25vZGVfbW9kdWxlcy9jb3Jkb3ZhLXNpbXVsYXRlL3NyYy9wbHVnaW5zL2NvcmRvdmEtcGx1Z2luLWdlb2xvY2F0aW9uL1Bvc2l0aW9uRXJyb3IuanMiLCJDOi9Vc2Vycy9tc2kgbW9kZXJuL0FwcERhdGEvUm9hbWluZy9ucG0vbm9kZV9tb2R1bGVzL2NvcmRvdmEtc2ltdWxhdGUvc3JjL3BsdWdpbnMvY29yZG92YS1wbHVnaW4taW5hcHBicm93c2VyL2luYXBwLWJyb3dzZXIuanMiLCJDOi9Vc2Vycy9tc2kgbW9kZXJuL0FwcERhdGEvUm9hbWluZy9ucG0vbm9kZV9tb2R1bGVzL2NvcmRvdmEtc2ltdWxhdGUvc3JjL3BsdWdpbnMvY29yZG92YS1wbHVnaW4tbWVkaWEvcGxheWVyLmpzIiwiQzovVXNlcnMvbXNpIG1vZGVybi9BcHBEYXRhL1JvYW1pbmcvbnBtL25vZGVfbW9kdWxlcy9jb3Jkb3ZhLXNpbXVsYXRlL3NyYy9tb2R1bGVzL2FyZ3NjaGVjay5qcyIsIkM6L1VzZXJzL21zaSBtb2Rlcm4vQXBwRGF0YS9Sb2FtaW5nL25wbS9ub2RlX21vZHVsZXMvY29yZG92YS1zaW11bGF0ZS9zcmMvcGx1Z2lucy9jb3Jkb3ZhLXBsdWdpbi1jYW1lcmEvYXBwLWhvc3QtaGFuZGxlcnMuanMiLCJDOi9Vc2Vycy9tc2kgbW9kZXJuL0FwcERhdGEvUm9hbWluZy9ucG0vbm9kZV9tb2R1bGVzL2NvcmRvdmEtc2ltdWxhdGUvc3JjL3BsdWdpbnMvY29yZG92YS1wbHVnaW4tZGV2aWNlL2FwcC1ob3N0LmpzIiwiQzovVXNlcnMvbXNpIG1vZGVybi9BcHBEYXRhL1JvYW1pbmcvbnBtL25vZGVfbW9kdWxlcy9jb3Jkb3ZhLXNpbXVsYXRlL3NyYy9wbHVnaW5zL2NvcmRvdmEtcGx1Z2luLWRpYWxvZ3MvYXBwLWhvc3QuanMiLCJDOi9Vc2Vycy9tc2kgbW9kZXJuL0FwcERhdGEvUm9hbWluZy9ucG0vbm9kZV9tb2R1bGVzL2NvcmRvdmEtc2ltdWxhdGUvc3JjL3BsdWdpbnMvY29yZG92YS1wbHVnaW4tZmlsZS9hcHAtaG9zdC1oYW5kbGVycy5qcyIsIkM6L1VzZXJzL21zaSBtb2Rlcm4vQXBwRGF0YS9Sb2FtaW5nL25wbS9ub2RlX21vZHVsZXMvY29yZG92YS1zaW11bGF0ZS9zcmMvcGx1Z2lucy9jb3Jkb3ZhLXBsdWdpbi1nZW9sb2NhdGlvbi9hcHAtaG9zdC1jbG9iYmVycy5qcyIsIkM6L1VzZXJzL21zaSBtb2Rlcm4vQXBwRGF0YS9Sb2FtaW5nL25wbS9ub2RlX21vZHVsZXMvY29yZG92YS1zaW11bGF0ZS9zcmMvcGx1Z2lucy9jb3Jkb3ZhLXBsdWdpbi1nbG9iYWxpemF0aW9uL2FwcC1ob3N0LWNsb2JiZXJzLmpzIiwiQzovVXNlcnMvbXNpIG1vZGVybi9BcHBEYXRhL1JvYW1pbmcvbnBtL25vZGVfbW9kdWxlcy9jb3Jkb3ZhLXNpbXVsYXRlL3NyYy9wbHVnaW5zL2NvcmRvdmEtcGx1Z2luLWluYXBwYnJvd3Nlci9hcHAtaG9zdC1oYW5kbGVycy5qcyIsIkM6L1VzZXJzL21zaSBtb2Rlcm4vQXBwRGF0YS9Sb2FtaW5nL25wbS9ub2RlX21vZHVsZXMvY29yZG92YS1zaW11bGF0ZS9zcmMvcGx1Z2lucy9jb3Jkb3ZhLXBsdWdpbi1tZWRpYS9hcHAtaG9zdC1oYW5kbGVycy5qcyIsIkM6L1VzZXJzL21zaSBtb2Rlcm4vQXBwRGF0YS9Sb2FtaW5nL25wbS9ub2RlX21vZHVsZXMvY29yZG92YS1zaW11bGF0ZS9zcmMvcGx1Z2lucy9jb3Jkb3ZhLXBsdWdpbi12aWJyYXRpb24vYXBwLWhvc3QuanMiLCJDOi9Vc2Vycy9tc2kgbW9kZXJuL0FwcERhdGEvUm9hbWluZy9ucG0vbm9kZV9tb2R1bGVzL2NvcmRvdmEtc2ltdWxhdGUvc3JjL21vZHVsZXMvZGIuanMiLCJDOi9Vc2Vycy9tc2kgbW9kZXJuL0FwcERhdGEvUm9hbWluZy9ucG0vbm9kZV9tb2R1bGVzL2NvcmRvdmEtc2ltdWxhdGUvc3JjL3BsdWdpbnMvZXZlbnRzL2FwcC1ob3N0LmpzIiwiQzovVXNlcnMvbXNpIG1vZGVybi9BcHBEYXRhL1JvYW1pbmcvbnBtL25vZGVfbW9kdWxlcy9jb3Jkb3ZhLXNpbXVsYXRlL3NyYy9tb2R1bGVzL2V2ZW50LmpzIiwiQzovVXNlcnMvbXNpIG1vZGVybi9BcHBEYXRhL1JvYW1pbmcvbnBtL25vZGVfbW9kdWxlcy9jb3Jkb3ZhLXNpbXVsYXRlL3NyYy9tb2R1bGVzL2V4Y2VwdGlvbi5qcyIsIkM6L1VzZXJzL21zaSBtb2Rlcm4vQXBwRGF0YS9Sb2FtaW5nL25wbS9ub2RlX21vZHVsZXMvY29yZG92YS1zaW11bGF0ZS9zcmMvdGhpcmQtcGFydHkvanF1ZXJ5Lm1pbi5qcyIsIkM6L1VzZXJzL21zaSBtb2Rlcm4vQXBwRGF0YS9Sb2FtaW5nL25wbS9ub2RlX21vZHVsZXMvY29yZG92YS1zaW11bGF0ZS9zcmMvbW9kdWxlcy9tZXNzYWdlcy5qcyIsIkM6L1VzZXJzL21zaSBtb2Rlcm4vQXBwRGF0YS9Sb2FtaW5nL25wbS9ub2RlX21vZHVsZXMvY29yZG92YS1zaW11bGF0ZS9zcmMvbW9kdWxlcy9wb2x5ZmlsbHMuanMiLCJDOi9Vc2Vycy9tc2kgbW9kZXJuL0FwcERhdGEvUm9hbWluZy9ucG0vbm9kZV9tb2R1bGVzL2NvcmRvdmEtc2ltdWxhdGUvc3JjL21vZHVsZXMvc2ltLWNvbnN0YW50cy5qcyIsIkM6L1VzZXJzL21zaSBtb2Rlcm4vQXBwRGF0YS9Sb2FtaW5nL25wbS9ub2RlX21vZHVsZXMvY29yZG92YS1zaW11bGF0ZS9zcmMvdGhpcmQtcGFydHkvc29ja2V0LmlvLmpzIiwiQzovVXNlcnMvbXNpIG1vZGVybi9BcHBEYXRhL1JvYW1pbmcvbnBtL25vZGVfbW9kdWxlcy9jb3Jkb3ZhLXNpbXVsYXRlL3NyYy9tb2R1bGVzL3RlbGVtZXRyeS1oZWxwZXIuanMiLCJDOi9Vc2Vycy9tc2kgbW9kZXJuL0FwcERhdGEvUm9hbWluZy9ucG0vbm9kZV9tb2R1bGVzL2NvcmRvdmEtc2ltdWxhdGUvc3JjL21vZHVsZXMvdXRpbHMuanMiLCJDOi9Vc2Vycy9tc2kgbW9kZXJuL0FwcERhdGEvUm9hbWluZy9ucG0vbm9kZV9tb2R1bGVzL2NvcmRvdmEtc2ltdWxhdGUvc3JjL3RoaXJkLXBhcnR5L3dlYmNvbXBvbmVudHMubWluLmpzIiwiQzovVXNlcnMvbXNpIG1vZGVybi9BcHBEYXRhL1JvYW1pbmcvbnBtL25vZGVfbW9kdWxlcy9jb3Jkb3ZhLXNpbXVsYXRlL3NyYy9tb2R1bGVzL3hoci1wcm94eS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBOztBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3hEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3ZXQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3RCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNmQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ1JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUMvZ0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQ3JoQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDMUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2pJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNYQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2pTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMvVkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN6UUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3h3QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwUEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDNUpBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDM0ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ254QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDek1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMvTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDckJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNyYkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xQQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3RCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDWEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDNUpBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDek1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMzREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzNHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzdKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3pLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMzRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25GQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzdJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMzQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNsREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FDTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN0RUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzlTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCIiLCIndXNlIHN0cmljdCc7XG5cbnZhciBHZXRJbnRyaW5zaWMgPSByZXF1aXJlKCdnZXQtaW50cmluc2ljJyk7XG5cbnZhciBjYWxsQmluZCA9IHJlcXVpcmUoJy4vJyk7XG5cbnZhciAkaW5kZXhPZiA9IGNhbGxCaW5kKEdldEludHJpbnNpYygnU3RyaW5nLnByb3RvdHlwZS5pbmRleE9mJykpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGNhbGxCb3VuZEludHJpbnNpYyhuYW1lLCBhbGxvd01pc3NpbmcpIHtcblx0dmFyIGludHJpbnNpYyA9IEdldEludHJpbnNpYyhuYW1lLCAhIWFsbG93TWlzc2luZyk7XG5cdGlmICh0eXBlb2YgaW50cmluc2ljID09PSAnZnVuY3Rpb24nICYmICRpbmRleE9mKG5hbWUsICcucHJvdG90eXBlLicpID4gLTEpIHtcblx0XHRyZXR1cm4gY2FsbEJpbmQoaW50cmluc2ljKTtcblx0fVxuXHRyZXR1cm4gaW50cmluc2ljO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIGJpbmQgPSByZXF1aXJlKCdmdW5jdGlvbi1iaW5kJyk7XG52YXIgR2V0SW50cmluc2ljID0gcmVxdWlyZSgnZ2V0LWludHJpbnNpYycpO1xudmFyIHNldEZ1bmN0aW9uTGVuZ3RoID0gcmVxdWlyZSgnc2V0LWZ1bmN0aW9uLWxlbmd0aCcpO1xuXG52YXIgJFR5cGVFcnJvciA9IHJlcXVpcmUoJ2VzLWVycm9ycy90eXBlJyk7XG52YXIgJGFwcGx5ID0gR2V0SW50cmluc2ljKCclRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5JScpO1xudmFyICRjYWxsID0gR2V0SW50cmluc2ljKCclRnVuY3Rpb24ucHJvdG90eXBlLmNhbGwlJyk7XG52YXIgJHJlZmxlY3RBcHBseSA9IEdldEludHJpbnNpYygnJVJlZmxlY3QuYXBwbHklJywgdHJ1ZSkgfHwgYmluZC5jYWxsKCRjYWxsLCAkYXBwbHkpO1xuXG52YXIgJGRlZmluZVByb3BlcnR5ID0gcmVxdWlyZSgnZXMtZGVmaW5lLXByb3BlcnR5Jyk7XG52YXIgJG1heCA9IEdldEludHJpbnNpYygnJU1hdGgubWF4JScpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGNhbGxCaW5kKG9yaWdpbmFsRnVuY3Rpb24pIHtcblx0aWYgKHR5cGVvZiBvcmlnaW5hbEZ1bmN0aW9uICE9PSAnZnVuY3Rpb24nKSB7XG5cdFx0dGhyb3cgbmV3ICRUeXBlRXJyb3IoJ2EgZnVuY3Rpb24gaXMgcmVxdWlyZWQnKTtcblx0fVxuXHR2YXIgZnVuYyA9ICRyZWZsZWN0QXBwbHkoYmluZCwgJGNhbGwsIGFyZ3VtZW50cyk7XG5cdHJldHVybiBzZXRGdW5jdGlvbkxlbmd0aChcblx0XHRmdW5jLFxuXHRcdDEgKyAkbWF4KDAsIG9yaWdpbmFsRnVuY3Rpb24ubGVuZ3RoIC0gKGFyZ3VtZW50cy5sZW5ndGggLSAxKSksXG5cdFx0dHJ1ZVxuXHQpO1xufTtcblxudmFyIGFwcGx5QmluZCA9IGZ1bmN0aW9uIGFwcGx5QmluZCgpIHtcblx0cmV0dXJuICRyZWZsZWN0QXBwbHkoYmluZCwgJGFwcGx5LCBhcmd1bWVudHMpO1xufTtcblxuaWYgKCRkZWZpbmVQcm9wZXJ0eSkge1xuXHQkZGVmaW5lUHJvcGVydHkobW9kdWxlLmV4cG9ydHMsICdhcHBseScsIHsgdmFsdWU6IGFwcGx5QmluZCB9KTtcbn0gZWxzZSB7XG5cdG1vZHVsZS5leHBvcnRzLmFwcGx5ID0gYXBwbHlCaW5kO1xufVxuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgJGRlZmluZVByb3BlcnR5ID0gcmVxdWlyZSgnZXMtZGVmaW5lLXByb3BlcnR5Jyk7XG5cbnZhciAkU3ludGF4RXJyb3IgPSByZXF1aXJlKCdlcy1lcnJvcnMvc3ludGF4Jyk7XG52YXIgJFR5cGVFcnJvciA9IHJlcXVpcmUoJ2VzLWVycm9ycy90eXBlJyk7XG5cbnZhciBnb3BkID0gcmVxdWlyZSgnZ29wZCcpO1xuXG4vKiogQHR5cGUge2ltcG9ydCgnLicpfSAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBkZWZpbmVEYXRhUHJvcGVydHkoXG5cdG9iaixcblx0cHJvcGVydHksXG5cdHZhbHVlXG4pIHtcblx0aWYgKCFvYmogfHwgKHR5cGVvZiBvYmogIT09ICdvYmplY3QnICYmIHR5cGVvZiBvYmogIT09ICdmdW5jdGlvbicpKSB7XG5cdFx0dGhyb3cgbmV3ICRUeXBlRXJyb3IoJ2BvYmpgIG11c3QgYmUgYW4gb2JqZWN0IG9yIGEgZnVuY3Rpb25gJyk7XG5cdH1cblx0aWYgKHR5cGVvZiBwcm9wZXJ0eSAhPT0gJ3N0cmluZycgJiYgdHlwZW9mIHByb3BlcnR5ICE9PSAnc3ltYm9sJykge1xuXHRcdHRocm93IG5ldyAkVHlwZUVycm9yKCdgcHJvcGVydHlgIG11c3QgYmUgYSBzdHJpbmcgb3IgYSBzeW1ib2xgJyk7XG5cdH1cblx0aWYgKGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIHR5cGVvZiBhcmd1bWVudHNbM10gIT09ICdib29sZWFuJyAmJiBhcmd1bWVudHNbM10gIT09IG51bGwpIHtcblx0XHR0aHJvdyBuZXcgJFR5cGVFcnJvcignYG5vbkVudW1lcmFibGVgLCBpZiBwcm92aWRlZCwgbXVzdCBiZSBhIGJvb2xlYW4gb3IgbnVsbCcpO1xuXHR9XG5cdGlmIChhcmd1bWVudHMubGVuZ3RoID4gNCAmJiB0eXBlb2YgYXJndW1lbnRzWzRdICE9PSAnYm9vbGVhbicgJiYgYXJndW1lbnRzWzRdICE9PSBudWxsKSB7XG5cdFx0dGhyb3cgbmV3ICRUeXBlRXJyb3IoJ2Bub25Xcml0YWJsZWAsIGlmIHByb3ZpZGVkLCBtdXN0IGJlIGEgYm9vbGVhbiBvciBudWxsJyk7XG5cdH1cblx0aWYgKGFyZ3VtZW50cy5sZW5ndGggPiA1ICYmIHR5cGVvZiBhcmd1bWVudHNbNV0gIT09ICdib29sZWFuJyAmJiBhcmd1bWVudHNbNV0gIT09IG51bGwpIHtcblx0XHR0aHJvdyBuZXcgJFR5cGVFcnJvcignYG5vbkNvbmZpZ3VyYWJsZWAsIGlmIHByb3ZpZGVkLCBtdXN0IGJlIGEgYm9vbGVhbiBvciBudWxsJyk7XG5cdH1cblx0aWYgKGFyZ3VtZW50cy5sZW5ndGggPiA2ICYmIHR5cGVvZiBhcmd1bWVudHNbNl0gIT09ICdib29sZWFuJykge1xuXHRcdHRocm93IG5ldyAkVHlwZUVycm9yKCdgbG9vc2VgLCBpZiBwcm92aWRlZCwgbXVzdCBiZSBhIGJvb2xlYW4nKTtcblx0fVxuXG5cdHZhciBub25FbnVtZXJhYmxlID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgPyBhcmd1bWVudHNbM10gOiBudWxsO1xuXHR2YXIgbm9uV3JpdGFibGUgPSBhcmd1bWVudHMubGVuZ3RoID4gNCA/IGFyZ3VtZW50c1s0XSA6IG51bGw7XG5cdHZhciBub25Db25maWd1cmFibGUgPSBhcmd1bWVudHMubGVuZ3RoID4gNSA/IGFyZ3VtZW50c1s1XSA6IG51bGw7XG5cdHZhciBsb29zZSA9IGFyZ3VtZW50cy5sZW5ndGggPiA2ID8gYXJndW1lbnRzWzZdIDogZmFsc2U7XG5cblx0LyogQHR5cGUge2ZhbHNlIHwgVHlwZWRQcm9wZXJ0eURlc2NyaXB0b3I8dW5rbm93bj59ICovXG5cdHZhciBkZXNjID0gISFnb3BkICYmIGdvcGQob2JqLCBwcm9wZXJ0eSk7XG5cblx0aWYgKCRkZWZpbmVQcm9wZXJ0eSkge1xuXHRcdCRkZWZpbmVQcm9wZXJ0eShvYmosIHByb3BlcnR5LCB7XG5cdFx0XHRjb25maWd1cmFibGU6IG5vbkNvbmZpZ3VyYWJsZSA9PT0gbnVsbCAmJiBkZXNjID8gZGVzYy5jb25maWd1cmFibGUgOiAhbm9uQ29uZmlndXJhYmxlLFxuXHRcdFx0ZW51bWVyYWJsZTogbm9uRW51bWVyYWJsZSA9PT0gbnVsbCAmJiBkZXNjID8gZGVzYy5lbnVtZXJhYmxlIDogIW5vbkVudW1lcmFibGUsXG5cdFx0XHR2YWx1ZTogdmFsdWUsXG5cdFx0XHR3cml0YWJsZTogbm9uV3JpdGFibGUgPT09IG51bGwgJiYgZGVzYyA/IGRlc2Mud3JpdGFibGUgOiAhbm9uV3JpdGFibGVcblx0XHR9KTtcblx0fSBlbHNlIGlmIChsb29zZSB8fCAoIW5vbkVudW1lcmFibGUgJiYgIW5vbldyaXRhYmxlICYmICFub25Db25maWd1cmFibGUpKSB7XG5cdFx0Ly8gbXVzdCBmYWxsIGJhY2sgdG8gW1tTZXRdXSwgYW5kIHdhcyBub3QgZXhwbGljaXRseSBhc2tlZCB0byBtYWtlIG5vbi1lbnVtZXJhYmxlLCBub24td3JpdGFibGUsIG9yIG5vbi1jb25maWd1cmFibGVcblx0XHRvYmpbcHJvcGVydHldID0gdmFsdWU7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cblx0fSBlbHNlIHtcblx0XHR0aHJvdyBuZXcgJFN5bnRheEVycm9yKCdUaGlzIGVudmlyb25tZW50IGRvZXMgbm90IHN1cHBvcnQgZGVmaW5pbmcgYSBwcm9wZXJ0eSBhcyBub24tY29uZmlndXJhYmxlLCBub24td3JpdGFibGUsIG9yIG5vbi1lbnVtZXJhYmxlLicpO1xuXHR9XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgR2V0SW50cmluc2ljID0gcmVxdWlyZSgnZ2V0LWludHJpbnNpYycpO1xuXG4vKiogQHR5cGUge2ltcG9ydCgnLicpfSAqL1xudmFyICRkZWZpbmVQcm9wZXJ0eSA9IEdldEludHJpbnNpYygnJU9iamVjdC5kZWZpbmVQcm9wZXJ0eSUnLCB0cnVlKSB8fCBmYWxzZTtcbmlmICgkZGVmaW5lUHJvcGVydHkpIHtcblx0dHJ5IHtcblx0XHQkZGVmaW5lUHJvcGVydHkoe30sICdhJywgeyB2YWx1ZTogMSB9KTtcblx0fSBjYXRjaCAoZSkge1xuXHRcdC8vIElFIDggaGFzIGEgYnJva2VuIGRlZmluZVByb3BlcnR5XG5cdFx0JGRlZmluZVByb3BlcnR5ID0gZmFsc2U7XG5cdH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSAkZGVmaW5lUHJvcGVydHk7XG4iLCIndXNlIHN0cmljdCc7XG5cbi8qKiBAdHlwZSB7aW1wb3J0KCcuL2V2YWwnKX0gKi9cbm1vZHVsZS5leHBvcnRzID0gRXZhbEVycm9yO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG4vKiogQHR5cGUge2ltcG9ydCgnLicpfSAqL1xubW9kdWxlLmV4cG9ydHMgPSBFcnJvcjtcbiIsIid1c2Ugc3RyaWN0JztcblxuLyoqIEB0eXBlIHtpbXBvcnQoJy4vcmFuZ2UnKX0gKi9cbm1vZHVsZS5leHBvcnRzID0gUmFuZ2VFcnJvcjtcbiIsIid1c2Ugc3RyaWN0JztcblxuLyoqIEB0eXBlIHtpbXBvcnQoJy4vcmVmJyl9ICovXG5tb2R1bGUuZXhwb3J0cyA9IFJlZmVyZW5jZUVycm9yO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG4vKiogQHR5cGUge2ltcG9ydCgnLi9zeW50YXgnKX0gKi9cbm1vZHVsZS5leHBvcnRzID0gU3ludGF4RXJyb3I7XG4iLCIndXNlIHN0cmljdCc7XG5cbi8qKiBAdHlwZSB7aW1wb3J0KCcuL3R5cGUnKX0gKi9cbm1vZHVsZS5leHBvcnRzID0gVHlwZUVycm9yO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG4vKiogQHR5cGUge2ltcG9ydCgnLi91cmknKX0gKi9cbm1vZHVsZS5leHBvcnRzID0gVVJJRXJyb3I7XG4iLCIndXNlIHN0cmljdCc7XG5cbi8qIGVzbGludCBuby1pbnZhbGlkLXRoaXM6IDEgKi9cblxudmFyIEVSUk9SX01FU1NBR0UgPSAnRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQgY2FsbGVkIG9uIGluY29tcGF0aWJsZSAnO1xudmFyIHRvU3RyID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcbnZhciBtYXggPSBNYXRoLm1heDtcbnZhciBmdW5jVHlwZSA9ICdbb2JqZWN0IEZ1bmN0aW9uXSc7XG5cbnZhciBjb25jYXR0eSA9IGZ1bmN0aW9uIGNvbmNhdHR5KGEsIGIpIHtcbiAgICB2YXIgYXJyID0gW107XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGEubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgYXJyW2ldID0gYVtpXTtcbiAgICB9XG4gICAgZm9yICh2YXIgaiA9IDA7IGogPCBiLmxlbmd0aDsgaiArPSAxKSB7XG4gICAgICAgIGFycltqICsgYS5sZW5ndGhdID0gYltqXTtcbiAgICB9XG5cbiAgICByZXR1cm4gYXJyO1xufTtcblxudmFyIHNsaWN5ID0gZnVuY3Rpb24gc2xpY3koYXJyTGlrZSwgb2Zmc2V0KSB7XG4gICAgdmFyIGFyciA9IFtdO1xuICAgIGZvciAodmFyIGkgPSBvZmZzZXQgfHwgMCwgaiA9IDA7IGkgPCBhcnJMaWtlLmxlbmd0aDsgaSArPSAxLCBqICs9IDEpIHtcbiAgICAgICAgYXJyW2pdID0gYXJyTGlrZVtpXTtcbiAgICB9XG4gICAgcmV0dXJuIGFycjtcbn07XG5cbnZhciBqb2lueSA9IGZ1bmN0aW9uIChhcnIsIGpvaW5lcikge1xuICAgIHZhciBzdHIgPSAnJztcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICBzdHIgKz0gYXJyW2ldO1xuICAgICAgICBpZiAoaSArIDEgPCBhcnIubGVuZ3RoKSB7XG4gICAgICAgICAgICBzdHIgKz0gam9pbmVyO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBzdHI7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGJpbmQodGhhdCkge1xuICAgIHZhciB0YXJnZXQgPSB0aGlzO1xuICAgIGlmICh0eXBlb2YgdGFyZ2V0ICE9PSAnZnVuY3Rpb24nIHx8IHRvU3RyLmFwcGx5KHRhcmdldCkgIT09IGZ1bmNUeXBlKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoRVJST1JfTUVTU0FHRSArIHRhcmdldCk7XG4gICAgfVxuICAgIHZhciBhcmdzID0gc2xpY3koYXJndW1lbnRzLCAxKTtcblxuICAgIHZhciBib3VuZDtcbiAgICB2YXIgYmluZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcyBpbnN0YW5jZW9mIGJvdW5kKSB7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gdGFyZ2V0LmFwcGx5KFxuICAgICAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICAgICAgY29uY2F0dHkoYXJncywgYXJndW1lbnRzKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGlmIChPYmplY3QocmVzdWx0KSA9PT0gcmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0YXJnZXQuYXBwbHkoXG4gICAgICAgICAgICB0aGF0LFxuICAgICAgICAgICAgY29uY2F0dHkoYXJncywgYXJndW1lbnRzKVxuICAgICAgICApO1xuXG4gICAgfTtcblxuICAgIHZhciBib3VuZExlbmd0aCA9IG1heCgwLCB0YXJnZXQubGVuZ3RoIC0gYXJncy5sZW5ndGgpO1xuICAgIHZhciBib3VuZEFyZ3MgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGJvdW5kTGVuZ3RoOyBpKyspIHtcbiAgICAgICAgYm91bmRBcmdzW2ldID0gJyQnICsgaTtcbiAgICB9XG5cbiAgICBib3VuZCA9IEZ1bmN0aW9uKCdiaW5kZXInLCAncmV0dXJuIGZ1bmN0aW9uICgnICsgam9pbnkoYm91bmRBcmdzLCAnLCcpICsgJyl7IHJldHVybiBiaW5kZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpOyB9JykoYmluZGVyKTtcblxuICAgIGlmICh0YXJnZXQucHJvdG90eXBlKSB7XG4gICAgICAgIHZhciBFbXB0eSA9IGZ1bmN0aW9uIEVtcHR5KCkge307XG4gICAgICAgIEVtcHR5LnByb3RvdHlwZSA9IHRhcmdldC5wcm90b3R5cGU7XG4gICAgICAgIGJvdW5kLnByb3RvdHlwZSA9IG5ldyBFbXB0eSgpO1xuICAgICAgICBFbXB0eS5wcm90b3R5cGUgPSBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiBib3VuZDtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBpbXBsZW1lbnRhdGlvbiA9IHJlcXVpcmUoJy4vaW1wbGVtZW50YXRpb24nKTtcblxubW9kdWxlLmV4cG9ydHMgPSBGdW5jdGlvbi5wcm90b3R5cGUuYmluZCB8fCBpbXBsZW1lbnRhdGlvbjtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIHVuZGVmaW5lZDtcblxudmFyICRFcnJvciA9IHJlcXVpcmUoJ2VzLWVycm9ycycpO1xudmFyICRFdmFsRXJyb3IgPSByZXF1aXJlKCdlcy1lcnJvcnMvZXZhbCcpO1xudmFyICRSYW5nZUVycm9yID0gcmVxdWlyZSgnZXMtZXJyb3JzL3JhbmdlJyk7XG52YXIgJFJlZmVyZW5jZUVycm9yID0gcmVxdWlyZSgnZXMtZXJyb3JzL3JlZicpO1xudmFyICRTeW50YXhFcnJvciA9IHJlcXVpcmUoJ2VzLWVycm9ycy9zeW50YXgnKTtcbnZhciAkVHlwZUVycm9yID0gcmVxdWlyZSgnZXMtZXJyb3JzL3R5cGUnKTtcbnZhciAkVVJJRXJyb3IgPSByZXF1aXJlKCdlcy1lcnJvcnMvdXJpJyk7XG5cbnZhciAkRnVuY3Rpb24gPSBGdW5jdGlvbjtcblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNvbnNpc3RlbnQtcmV0dXJuXG52YXIgZ2V0RXZhbGxlZENvbnN0cnVjdG9yID0gZnVuY3Rpb24gKGV4cHJlc3Npb25TeW50YXgpIHtcblx0dHJ5IHtcblx0XHRyZXR1cm4gJEZ1bmN0aW9uKCdcInVzZSBzdHJpY3RcIjsgcmV0dXJuICgnICsgZXhwcmVzc2lvblN5bnRheCArICcpLmNvbnN0cnVjdG9yOycpKCk7XG5cdH0gY2F0Y2ggKGUpIHt9XG59O1xuXG52YXIgJGdPUEQgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO1xuaWYgKCRnT1BEKSB7XG5cdHRyeSB7XG5cdFx0JGdPUEQoe30sICcnKTtcblx0fSBjYXRjaCAoZSkge1xuXHRcdCRnT1BEID0gbnVsbDsgLy8gdGhpcyBpcyBJRSA4LCB3aGljaCBoYXMgYSBicm9rZW4gZ09QRFxuXHR9XG59XG5cbnZhciB0aHJvd1R5cGVFcnJvciA9IGZ1bmN0aW9uICgpIHtcblx0dGhyb3cgbmV3ICRUeXBlRXJyb3IoKTtcbn07XG52YXIgVGhyb3dUeXBlRXJyb3IgPSAkZ09QRFxuXHQ/IChmdW5jdGlvbiAoKSB7XG5cdFx0dHJ5IHtcblx0XHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtZXhwcmVzc2lvbnMsIG5vLWNhbGxlciwgbm8tcmVzdHJpY3RlZC1wcm9wZXJ0aWVzXG5cdFx0XHRhcmd1bWVudHMuY2FsbGVlOyAvLyBJRSA4IGRvZXMgbm90IHRocm93IGhlcmVcblx0XHRcdHJldHVybiB0aHJvd1R5cGVFcnJvcjtcblx0XHR9IGNhdGNoIChjYWxsZWVUaHJvd3MpIHtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdC8vIElFIDggdGhyb3dzIG9uIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoYXJndW1lbnRzLCAnJylcblx0XHRcdFx0cmV0dXJuICRnT1BEKGFyZ3VtZW50cywgJ2NhbGxlZScpLmdldDtcblx0XHRcdH0gY2F0Y2ggKGdPUER0aHJvd3MpIHtcblx0XHRcdFx0cmV0dXJuIHRocm93VHlwZUVycm9yO1xuXHRcdFx0fVxuXHRcdH1cblx0fSgpKVxuXHQ6IHRocm93VHlwZUVycm9yO1xuXG52YXIgaGFzU3ltYm9scyA9IHJlcXVpcmUoJ2hhcy1zeW1ib2xzJykoKTtcbnZhciBoYXNQcm90byA9IHJlcXVpcmUoJ2hhcy1wcm90bycpKCk7XG5cbnZhciBnZXRQcm90byA9IE9iamVjdC5nZXRQcm90b3R5cGVPZiB8fCAoXG5cdGhhc1Byb3RvXG5cdFx0PyBmdW5jdGlvbiAoeCkgeyByZXR1cm4geC5fX3Byb3RvX187IH0gLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1wcm90b1xuXHRcdDogbnVsbFxuKTtcblxudmFyIG5lZWRzRXZhbCA9IHt9O1xuXG52YXIgVHlwZWRBcnJheSA9IHR5cGVvZiBVaW50OEFycmF5ID09PSAndW5kZWZpbmVkJyB8fCAhZ2V0UHJvdG8gPyB1bmRlZmluZWQgOiBnZXRQcm90byhVaW50OEFycmF5KTtcblxudmFyIElOVFJJTlNJQ1MgPSB7XG5cdF9fcHJvdG9fXzogbnVsbCxcblx0JyVBZ2dyZWdhdGVFcnJvciUnOiB0eXBlb2YgQWdncmVnYXRlRXJyb3IgPT09ICd1bmRlZmluZWQnID8gdW5kZWZpbmVkIDogQWdncmVnYXRlRXJyb3IsXG5cdCclQXJyYXklJzogQXJyYXksXG5cdCclQXJyYXlCdWZmZXIlJzogdHlwZW9mIEFycmF5QnVmZmVyID09PSAndW5kZWZpbmVkJyA/IHVuZGVmaW5lZCA6IEFycmF5QnVmZmVyLFxuXHQnJUFycmF5SXRlcmF0b3JQcm90b3R5cGUlJzogaGFzU3ltYm9scyAmJiBnZXRQcm90byA/IGdldFByb3RvKFtdW1N5bWJvbC5pdGVyYXRvcl0oKSkgOiB1bmRlZmluZWQsXG5cdCclQXN5bmNGcm9tU3luY0l0ZXJhdG9yUHJvdG90eXBlJSc6IHVuZGVmaW5lZCxcblx0JyVBc3luY0Z1bmN0aW9uJSc6IG5lZWRzRXZhbCxcblx0JyVBc3luY0dlbmVyYXRvciUnOiBuZWVkc0V2YWwsXG5cdCclQXN5bmNHZW5lcmF0b3JGdW5jdGlvbiUnOiBuZWVkc0V2YWwsXG5cdCclQXN5bmNJdGVyYXRvclByb3RvdHlwZSUnOiBuZWVkc0V2YWwsXG5cdCclQXRvbWljcyUnOiB0eXBlb2YgQXRvbWljcyA9PT0gJ3VuZGVmaW5lZCcgPyB1bmRlZmluZWQgOiBBdG9taWNzLFxuXHQnJUJpZ0ludCUnOiB0eXBlb2YgQmlnSW50ID09PSAndW5kZWZpbmVkJyA/IHVuZGVmaW5lZCA6IEJpZ0ludCxcblx0JyVCaWdJbnQ2NEFycmF5JSc6IHR5cGVvZiBCaWdJbnQ2NEFycmF5ID09PSAndW5kZWZpbmVkJyA/IHVuZGVmaW5lZCA6IEJpZ0ludDY0QXJyYXksXG5cdCclQmlnVWludDY0QXJyYXklJzogdHlwZW9mIEJpZ1VpbnQ2NEFycmF5ID09PSAndW5kZWZpbmVkJyA/IHVuZGVmaW5lZCA6IEJpZ1VpbnQ2NEFycmF5LFxuXHQnJUJvb2xlYW4lJzogQm9vbGVhbixcblx0JyVEYXRhVmlldyUnOiB0eXBlb2YgRGF0YVZpZXcgPT09ICd1bmRlZmluZWQnID8gdW5kZWZpbmVkIDogRGF0YVZpZXcsXG5cdCclRGF0ZSUnOiBEYXRlLFxuXHQnJWRlY29kZVVSSSUnOiBkZWNvZGVVUkksXG5cdCclZGVjb2RlVVJJQ29tcG9uZW50JSc6IGRlY29kZVVSSUNvbXBvbmVudCxcblx0JyVlbmNvZGVVUkklJzogZW5jb2RlVVJJLFxuXHQnJWVuY29kZVVSSUNvbXBvbmVudCUnOiBlbmNvZGVVUklDb21wb25lbnQsXG5cdCclRXJyb3IlJzogJEVycm9yLFxuXHQnJWV2YWwlJzogZXZhbCwgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1ldmFsXG5cdCclRXZhbEVycm9yJSc6ICRFdmFsRXJyb3IsXG5cdCclRmxvYXQzMkFycmF5JSc6IHR5cGVvZiBGbG9hdDMyQXJyYXkgPT09ICd1bmRlZmluZWQnID8gdW5kZWZpbmVkIDogRmxvYXQzMkFycmF5LFxuXHQnJUZsb2F0NjRBcnJheSUnOiB0eXBlb2YgRmxvYXQ2NEFycmF5ID09PSAndW5kZWZpbmVkJyA/IHVuZGVmaW5lZCA6IEZsb2F0NjRBcnJheSxcblx0JyVGaW5hbGl6YXRpb25SZWdpc3RyeSUnOiB0eXBlb2YgRmluYWxpemF0aW9uUmVnaXN0cnkgPT09ICd1bmRlZmluZWQnID8gdW5kZWZpbmVkIDogRmluYWxpemF0aW9uUmVnaXN0cnksXG5cdCclRnVuY3Rpb24lJzogJEZ1bmN0aW9uLFxuXHQnJUdlbmVyYXRvckZ1bmN0aW9uJSc6IG5lZWRzRXZhbCxcblx0JyVJbnQ4QXJyYXklJzogdHlwZW9mIEludDhBcnJheSA9PT0gJ3VuZGVmaW5lZCcgPyB1bmRlZmluZWQgOiBJbnQ4QXJyYXksXG5cdCclSW50MTZBcnJheSUnOiB0eXBlb2YgSW50MTZBcnJheSA9PT0gJ3VuZGVmaW5lZCcgPyB1bmRlZmluZWQgOiBJbnQxNkFycmF5LFxuXHQnJUludDMyQXJyYXklJzogdHlwZW9mIEludDMyQXJyYXkgPT09ICd1bmRlZmluZWQnID8gdW5kZWZpbmVkIDogSW50MzJBcnJheSxcblx0JyVpc0Zpbml0ZSUnOiBpc0Zpbml0ZSxcblx0JyVpc05hTiUnOiBpc05hTixcblx0JyVJdGVyYXRvclByb3RvdHlwZSUnOiBoYXNTeW1ib2xzICYmIGdldFByb3RvID8gZ2V0UHJvdG8oZ2V0UHJvdG8oW11bU3ltYm9sLml0ZXJhdG9yXSgpKSkgOiB1bmRlZmluZWQsXG5cdCclSlNPTiUnOiB0eXBlb2YgSlNPTiA9PT0gJ29iamVjdCcgPyBKU09OIDogdW5kZWZpbmVkLFxuXHQnJU1hcCUnOiB0eXBlb2YgTWFwID09PSAndW5kZWZpbmVkJyA/IHVuZGVmaW5lZCA6IE1hcCxcblx0JyVNYXBJdGVyYXRvclByb3RvdHlwZSUnOiB0eXBlb2YgTWFwID09PSAndW5kZWZpbmVkJyB8fCAhaGFzU3ltYm9scyB8fCAhZ2V0UHJvdG8gPyB1bmRlZmluZWQgOiBnZXRQcm90byhuZXcgTWFwKClbU3ltYm9sLml0ZXJhdG9yXSgpKSxcblx0JyVNYXRoJSc6IE1hdGgsXG5cdCclTnVtYmVyJSc6IE51bWJlcixcblx0JyVPYmplY3QlJzogT2JqZWN0LFxuXHQnJXBhcnNlRmxvYXQlJzogcGFyc2VGbG9hdCxcblx0JyVwYXJzZUludCUnOiBwYXJzZUludCxcblx0JyVQcm9taXNlJSc6IHR5cGVvZiBQcm9taXNlID09PSAndW5kZWZpbmVkJyA/IHVuZGVmaW5lZCA6IFByb21pc2UsXG5cdCclUHJveHklJzogdHlwZW9mIFByb3h5ID09PSAndW5kZWZpbmVkJyA/IHVuZGVmaW5lZCA6IFByb3h5LFxuXHQnJVJhbmdlRXJyb3IlJzogJFJhbmdlRXJyb3IsXG5cdCclUmVmZXJlbmNlRXJyb3IlJzogJFJlZmVyZW5jZUVycm9yLFxuXHQnJVJlZmxlY3QlJzogdHlwZW9mIFJlZmxlY3QgPT09ICd1bmRlZmluZWQnID8gdW5kZWZpbmVkIDogUmVmbGVjdCxcblx0JyVSZWdFeHAlJzogUmVnRXhwLFxuXHQnJVNldCUnOiB0eXBlb2YgU2V0ID09PSAndW5kZWZpbmVkJyA/IHVuZGVmaW5lZCA6IFNldCxcblx0JyVTZXRJdGVyYXRvclByb3RvdHlwZSUnOiB0eXBlb2YgU2V0ID09PSAndW5kZWZpbmVkJyB8fCAhaGFzU3ltYm9scyB8fCAhZ2V0UHJvdG8gPyB1bmRlZmluZWQgOiBnZXRQcm90byhuZXcgU2V0KClbU3ltYm9sLml0ZXJhdG9yXSgpKSxcblx0JyVTaGFyZWRBcnJheUJ1ZmZlciUnOiB0eXBlb2YgU2hhcmVkQXJyYXlCdWZmZXIgPT09ICd1bmRlZmluZWQnID8gdW5kZWZpbmVkIDogU2hhcmVkQXJyYXlCdWZmZXIsXG5cdCclU3RyaW5nJSc6IFN0cmluZyxcblx0JyVTdHJpbmdJdGVyYXRvclByb3RvdHlwZSUnOiBoYXNTeW1ib2xzICYmIGdldFByb3RvID8gZ2V0UHJvdG8oJydbU3ltYm9sLml0ZXJhdG9yXSgpKSA6IHVuZGVmaW5lZCxcblx0JyVTeW1ib2wlJzogaGFzU3ltYm9scyA/IFN5bWJvbCA6IHVuZGVmaW5lZCxcblx0JyVTeW50YXhFcnJvciUnOiAkU3ludGF4RXJyb3IsXG5cdCclVGhyb3dUeXBlRXJyb3IlJzogVGhyb3dUeXBlRXJyb3IsXG5cdCclVHlwZWRBcnJheSUnOiBUeXBlZEFycmF5LFxuXHQnJVR5cGVFcnJvciUnOiAkVHlwZUVycm9yLFxuXHQnJVVpbnQ4QXJyYXklJzogdHlwZW9mIFVpbnQ4QXJyYXkgPT09ICd1bmRlZmluZWQnID8gdW5kZWZpbmVkIDogVWludDhBcnJheSxcblx0JyVVaW50OENsYW1wZWRBcnJheSUnOiB0eXBlb2YgVWludDhDbGFtcGVkQXJyYXkgPT09ICd1bmRlZmluZWQnID8gdW5kZWZpbmVkIDogVWludDhDbGFtcGVkQXJyYXksXG5cdCclVWludDE2QXJyYXklJzogdHlwZW9mIFVpbnQxNkFycmF5ID09PSAndW5kZWZpbmVkJyA/IHVuZGVmaW5lZCA6IFVpbnQxNkFycmF5LFxuXHQnJVVpbnQzMkFycmF5JSc6IHR5cGVvZiBVaW50MzJBcnJheSA9PT0gJ3VuZGVmaW5lZCcgPyB1bmRlZmluZWQgOiBVaW50MzJBcnJheSxcblx0JyVVUklFcnJvciUnOiAkVVJJRXJyb3IsXG5cdCclV2Vha01hcCUnOiB0eXBlb2YgV2Vha01hcCA9PT0gJ3VuZGVmaW5lZCcgPyB1bmRlZmluZWQgOiBXZWFrTWFwLFxuXHQnJVdlYWtSZWYlJzogdHlwZW9mIFdlYWtSZWYgPT09ICd1bmRlZmluZWQnID8gdW5kZWZpbmVkIDogV2Vha1JlZixcblx0JyVXZWFrU2V0JSc6IHR5cGVvZiBXZWFrU2V0ID09PSAndW5kZWZpbmVkJyA/IHVuZGVmaW5lZCA6IFdlYWtTZXRcbn07XG5cbmlmIChnZXRQcm90bykge1xuXHR0cnkge1xuXHRcdG51bGwuZXJyb3I7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLWV4cHJlc3Npb25zXG5cdH0gY2F0Y2ggKGUpIHtcblx0XHQvLyBodHRwczovL2dpdGh1Yi5jb20vdGMzOS9wcm9wb3NhbC1zaGFkb3dyZWFsbS9wdWxsLzM4NCNpc3N1ZWNvbW1lbnQtMTM2NDI2NDIyOVxuXHRcdHZhciBlcnJvclByb3RvID0gZ2V0UHJvdG8oZ2V0UHJvdG8oZSkpO1xuXHRcdElOVFJJTlNJQ1NbJyVFcnJvci5wcm90b3R5cGUlJ10gPSBlcnJvclByb3RvO1xuXHR9XG59XG5cbnZhciBkb0V2YWwgPSBmdW5jdGlvbiBkb0V2YWwobmFtZSkge1xuXHR2YXIgdmFsdWU7XG5cdGlmIChuYW1lID09PSAnJUFzeW5jRnVuY3Rpb24lJykge1xuXHRcdHZhbHVlID0gZ2V0RXZhbGxlZENvbnN0cnVjdG9yKCdhc3luYyBmdW5jdGlvbiAoKSB7fScpO1xuXHR9IGVsc2UgaWYgKG5hbWUgPT09ICclR2VuZXJhdG9yRnVuY3Rpb24lJykge1xuXHRcdHZhbHVlID0gZ2V0RXZhbGxlZENvbnN0cnVjdG9yKCdmdW5jdGlvbiogKCkge30nKTtcblx0fSBlbHNlIGlmIChuYW1lID09PSAnJUFzeW5jR2VuZXJhdG9yRnVuY3Rpb24lJykge1xuXHRcdHZhbHVlID0gZ2V0RXZhbGxlZENvbnN0cnVjdG9yKCdhc3luYyBmdW5jdGlvbiogKCkge30nKTtcblx0fSBlbHNlIGlmIChuYW1lID09PSAnJUFzeW5jR2VuZXJhdG9yJScpIHtcblx0XHR2YXIgZm4gPSBkb0V2YWwoJyVBc3luY0dlbmVyYXRvckZ1bmN0aW9uJScpO1xuXHRcdGlmIChmbikge1xuXHRcdFx0dmFsdWUgPSBmbi5wcm90b3R5cGU7XG5cdFx0fVxuXHR9IGVsc2UgaWYgKG5hbWUgPT09ICclQXN5bmNJdGVyYXRvclByb3RvdHlwZSUnKSB7XG5cdFx0dmFyIGdlbiA9IGRvRXZhbCgnJUFzeW5jR2VuZXJhdG9yJScpO1xuXHRcdGlmIChnZW4gJiYgZ2V0UHJvdG8pIHtcblx0XHRcdHZhbHVlID0gZ2V0UHJvdG8oZ2VuLnByb3RvdHlwZSk7XG5cdFx0fVxuXHR9XG5cblx0SU5UUklOU0lDU1tuYW1lXSA9IHZhbHVlO1xuXG5cdHJldHVybiB2YWx1ZTtcbn07XG5cbnZhciBMRUdBQ1lfQUxJQVNFUyA9IHtcblx0X19wcm90b19fOiBudWxsLFxuXHQnJUFycmF5QnVmZmVyUHJvdG90eXBlJSc6IFsnQXJyYXlCdWZmZXInLCAncHJvdG90eXBlJ10sXG5cdCclQXJyYXlQcm90b3R5cGUlJzogWydBcnJheScsICdwcm90b3R5cGUnXSxcblx0JyVBcnJheVByb3RvX2VudHJpZXMlJzogWydBcnJheScsICdwcm90b3R5cGUnLCAnZW50cmllcyddLFxuXHQnJUFycmF5UHJvdG9fZm9yRWFjaCUnOiBbJ0FycmF5JywgJ3Byb3RvdHlwZScsICdmb3JFYWNoJ10sXG5cdCclQXJyYXlQcm90b19rZXlzJSc6IFsnQXJyYXknLCAncHJvdG90eXBlJywgJ2tleXMnXSxcblx0JyVBcnJheVByb3RvX3ZhbHVlcyUnOiBbJ0FycmF5JywgJ3Byb3RvdHlwZScsICd2YWx1ZXMnXSxcblx0JyVBc3luY0Z1bmN0aW9uUHJvdG90eXBlJSc6IFsnQXN5bmNGdW5jdGlvbicsICdwcm90b3R5cGUnXSxcblx0JyVBc3luY0dlbmVyYXRvciUnOiBbJ0FzeW5jR2VuZXJhdG9yRnVuY3Rpb24nLCAncHJvdG90eXBlJ10sXG5cdCclQXN5bmNHZW5lcmF0b3JQcm90b3R5cGUlJzogWydBc3luY0dlbmVyYXRvckZ1bmN0aW9uJywgJ3Byb3RvdHlwZScsICdwcm90b3R5cGUnXSxcblx0JyVCb29sZWFuUHJvdG90eXBlJSc6IFsnQm9vbGVhbicsICdwcm90b3R5cGUnXSxcblx0JyVEYXRhVmlld1Byb3RvdHlwZSUnOiBbJ0RhdGFWaWV3JywgJ3Byb3RvdHlwZSddLFxuXHQnJURhdGVQcm90b3R5cGUlJzogWydEYXRlJywgJ3Byb3RvdHlwZSddLFxuXHQnJUVycm9yUHJvdG90eXBlJSc6IFsnRXJyb3InLCAncHJvdG90eXBlJ10sXG5cdCclRXZhbEVycm9yUHJvdG90eXBlJSc6IFsnRXZhbEVycm9yJywgJ3Byb3RvdHlwZSddLFxuXHQnJUZsb2F0MzJBcnJheVByb3RvdHlwZSUnOiBbJ0Zsb2F0MzJBcnJheScsICdwcm90b3R5cGUnXSxcblx0JyVGbG9hdDY0QXJyYXlQcm90b3R5cGUlJzogWydGbG9hdDY0QXJyYXknLCAncHJvdG90eXBlJ10sXG5cdCclRnVuY3Rpb25Qcm90b3R5cGUlJzogWydGdW5jdGlvbicsICdwcm90b3R5cGUnXSxcblx0JyVHZW5lcmF0b3IlJzogWydHZW5lcmF0b3JGdW5jdGlvbicsICdwcm90b3R5cGUnXSxcblx0JyVHZW5lcmF0b3JQcm90b3R5cGUlJzogWydHZW5lcmF0b3JGdW5jdGlvbicsICdwcm90b3R5cGUnLCAncHJvdG90eXBlJ10sXG5cdCclSW50OEFycmF5UHJvdG90eXBlJSc6IFsnSW50OEFycmF5JywgJ3Byb3RvdHlwZSddLFxuXHQnJUludDE2QXJyYXlQcm90b3R5cGUlJzogWydJbnQxNkFycmF5JywgJ3Byb3RvdHlwZSddLFxuXHQnJUludDMyQXJyYXlQcm90b3R5cGUlJzogWydJbnQzMkFycmF5JywgJ3Byb3RvdHlwZSddLFxuXHQnJUpTT05QYXJzZSUnOiBbJ0pTT04nLCAncGFyc2UnXSxcblx0JyVKU09OU3RyaW5naWZ5JSc6IFsnSlNPTicsICdzdHJpbmdpZnknXSxcblx0JyVNYXBQcm90b3R5cGUlJzogWydNYXAnLCAncHJvdG90eXBlJ10sXG5cdCclTnVtYmVyUHJvdG90eXBlJSc6IFsnTnVtYmVyJywgJ3Byb3RvdHlwZSddLFxuXHQnJU9iamVjdFByb3RvdHlwZSUnOiBbJ09iamVjdCcsICdwcm90b3R5cGUnXSxcblx0JyVPYmpQcm90b190b1N0cmluZyUnOiBbJ09iamVjdCcsICdwcm90b3R5cGUnLCAndG9TdHJpbmcnXSxcblx0JyVPYmpQcm90b192YWx1ZU9mJSc6IFsnT2JqZWN0JywgJ3Byb3RvdHlwZScsICd2YWx1ZU9mJ10sXG5cdCclUHJvbWlzZVByb3RvdHlwZSUnOiBbJ1Byb21pc2UnLCAncHJvdG90eXBlJ10sXG5cdCclUHJvbWlzZVByb3RvX3RoZW4lJzogWydQcm9taXNlJywgJ3Byb3RvdHlwZScsICd0aGVuJ10sXG5cdCclUHJvbWlzZV9hbGwlJzogWydQcm9taXNlJywgJ2FsbCddLFxuXHQnJVByb21pc2VfcmVqZWN0JSc6IFsnUHJvbWlzZScsICdyZWplY3QnXSxcblx0JyVQcm9taXNlX3Jlc29sdmUlJzogWydQcm9taXNlJywgJ3Jlc29sdmUnXSxcblx0JyVSYW5nZUVycm9yUHJvdG90eXBlJSc6IFsnUmFuZ2VFcnJvcicsICdwcm90b3R5cGUnXSxcblx0JyVSZWZlcmVuY2VFcnJvclByb3RvdHlwZSUnOiBbJ1JlZmVyZW5jZUVycm9yJywgJ3Byb3RvdHlwZSddLFxuXHQnJVJlZ0V4cFByb3RvdHlwZSUnOiBbJ1JlZ0V4cCcsICdwcm90b3R5cGUnXSxcblx0JyVTZXRQcm90b3R5cGUlJzogWydTZXQnLCAncHJvdG90eXBlJ10sXG5cdCclU2hhcmVkQXJyYXlCdWZmZXJQcm90b3R5cGUlJzogWydTaGFyZWRBcnJheUJ1ZmZlcicsICdwcm90b3R5cGUnXSxcblx0JyVTdHJpbmdQcm90b3R5cGUlJzogWydTdHJpbmcnLCAncHJvdG90eXBlJ10sXG5cdCclU3ltYm9sUHJvdG90eXBlJSc6IFsnU3ltYm9sJywgJ3Byb3RvdHlwZSddLFxuXHQnJVN5bnRheEVycm9yUHJvdG90eXBlJSc6IFsnU3ludGF4RXJyb3InLCAncHJvdG90eXBlJ10sXG5cdCclVHlwZWRBcnJheVByb3RvdHlwZSUnOiBbJ1R5cGVkQXJyYXknLCAncHJvdG90eXBlJ10sXG5cdCclVHlwZUVycm9yUHJvdG90eXBlJSc6IFsnVHlwZUVycm9yJywgJ3Byb3RvdHlwZSddLFxuXHQnJVVpbnQ4QXJyYXlQcm90b3R5cGUlJzogWydVaW50OEFycmF5JywgJ3Byb3RvdHlwZSddLFxuXHQnJVVpbnQ4Q2xhbXBlZEFycmF5UHJvdG90eXBlJSc6IFsnVWludDhDbGFtcGVkQXJyYXknLCAncHJvdG90eXBlJ10sXG5cdCclVWludDE2QXJyYXlQcm90b3R5cGUlJzogWydVaW50MTZBcnJheScsICdwcm90b3R5cGUnXSxcblx0JyVVaW50MzJBcnJheVByb3RvdHlwZSUnOiBbJ1VpbnQzMkFycmF5JywgJ3Byb3RvdHlwZSddLFxuXHQnJVVSSUVycm9yUHJvdG90eXBlJSc6IFsnVVJJRXJyb3InLCAncHJvdG90eXBlJ10sXG5cdCclV2Vha01hcFByb3RvdHlwZSUnOiBbJ1dlYWtNYXAnLCAncHJvdG90eXBlJ10sXG5cdCclV2Vha1NldFByb3RvdHlwZSUnOiBbJ1dlYWtTZXQnLCAncHJvdG90eXBlJ11cbn07XG5cbnZhciBiaW5kID0gcmVxdWlyZSgnZnVuY3Rpb24tYmluZCcpO1xudmFyIGhhc093biA9IHJlcXVpcmUoJ2hhc293bicpO1xudmFyICRjb25jYXQgPSBiaW5kLmNhbGwoRnVuY3Rpb24uY2FsbCwgQXJyYXkucHJvdG90eXBlLmNvbmNhdCk7XG52YXIgJHNwbGljZUFwcGx5ID0gYmluZC5jYWxsKEZ1bmN0aW9uLmFwcGx5LCBBcnJheS5wcm90b3R5cGUuc3BsaWNlKTtcbnZhciAkcmVwbGFjZSA9IGJpbmQuY2FsbChGdW5jdGlvbi5jYWxsLCBTdHJpbmcucHJvdG90eXBlLnJlcGxhY2UpO1xudmFyICRzdHJTbGljZSA9IGJpbmQuY2FsbChGdW5jdGlvbi5jYWxsLCBTdHJpbmcucHJvdG90eXBlLnNsaWNlKTtcbnZhciAkZXhlYyA9IGJpbmQuY2FsbChGdW5jdGlvbi5jYWxsLCBSZWdFeHAucHJvdG90eXBlLmV4ZWMpO1xuXG4vKiBhZGFwdGVkIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL2xvZGFzaC9sb2Rhc2gvYmxvYi80LjE3LjE1L2Rpc3QvbG9kYXNoLmpzI0w2NzM1LUw2NzQ0ICovXG52YXIgcmVQcm9wTmFtZSA9IC9bXiUuW1xcXV0rfFxcWyg/OigtP1xcZCsoPzpcXC5cXGQrKT8pfChbXCInXSkoKD86KD8hXFwyKVteXFxcXF18XFxcXC4pKj8pXFwyKVxcXXwoPz0oPzpcXC58XFxbXFxdKSg/OlxcLnxcXFtcXF18JSQpKS9nO1xudmFyIHJlRXNjYXBlQ2hhciA9IC9cXFxcKFxcXFwpPy9nOyAvKiogVXNlZCB0byBtYXRjaCBiYWNrc2xhc2hlcyBpbiBwcm9wZXJ0eSBwYXRocy4gKi9cbnZhciBzdHJpbmdUb1BhdGggPSBmdW5jdGlvbiBzdHJpbmdUb1BhdGgoc3RyaW5nKSB7XG5cdHZhciBmaXJzdCA9ICRzdHJTbGljZShzdHJpbmcsIDAsIDEpO1xuXHR2YXIgbGFzdCA9ICRzdHJTbGljZShzdHJpbmcsIC0xKTtcblx0aWYgKGZpcnN0ID09PSAnJScgJiYgbGFzdCAhPT0gJyUnKSB7XG5cdFx0dGhyb3cgbmV3ICRTeW50YXhFcnJvcignaW52YWxpZCBpbnRyaW5zaWMgc3ludGF4LCBleHBlY3RlZCBjbG9zaW5nIGAlYCcpO1xuXHR9IGVsc2UgaWYgKGxhc3QgPT09ICclJyAmJiBmaXJzdCAhPT0gJyUnKSB7XG5cdFx0dGhyb3cgbmV3ICRTeW50YXhFcnJvcignaW52YWxpZCBpbnRyaW5zaWMgc3ludGF4LCBleHBlY3RlZCBvcGVuaW5nIGAlYCcpO1xuXHR9XG5cdHZhciByZXN1bHQgPSBbXTtcblx0JHJlcGxhY2Uoc3RyaW5nLCByZVByb3BOYW1lLCBmdW5jdGlvbiAobWF0Y2gsIG51bWJlciwgcXVvdGUsIHN1YlN0cmluZykge1xuXHRcdHJlc3VsdFtyZXN1bHQubGVuZ3RoXSA9IHF1b3RlID8gJHJlcGxhY2Uoc3ViU3RyaW5nLCByZUVzY2FwZUNoYXIsICckMScpIDogbnVtYmVyIHx8IG1hdGNoO1xuXHR9KTtcblx0cmV0dXJuIHJlc3VsdDtcbn07XG4vKiBlbmQgYWRhcHRhdGlvbiAqL1xuXG52YXIgZ2V0QmFzZUludHJpbnNpYyA9IGZ1bmN0aW9uIGdldEJhc2VJbnRyaW5zaWMobmFtZSwgYWxsb3dNaXNzaW5nKSB7XG5cdHZhciBpbnRyaW5zaWNOYW1lID0gbmFtZTtcblx0dmFyIGFsaWFzO1xuXHRpZiAoaGFzT3duKExFR0FDWV9BTElBU0VTLCBpbnRyaW5zaWNOYW1lKSkge1xuXHRcdGFsaWFzID0gTEVHQUNZX0FMSUFTRVNbaW50cmluc2ljTmFtZV07XG5cdFx0aW50cmluc2ljTmFtZSA9ICclJyArIGFsaWFzWzBdICsgJyUnO1xuXHR9XG5cblx0aWYgKGhhc093bihJTlRSSU5TSUNTLCBpbnRyaW5zaWNOYW1lKSkge1xuXHRcdHZhciB2YWx1ZSA9IElOVFJJTlNJQ1NbaW50cmluc2ljTmFtZV07XG5cdFx0aWYgKHZhbHVlID09PSBuZWVkc0V2YWwpIHtcblx0XHRcdHZhbHVlID0gZG9FdmFsKGludHJpbnNpY05hbWUpO1xuXHRcdH1cblx0XHRpZiAodHlwZW9mIHZhbHVlID09PSAndW5kZWZpbmVkJyAmJiAhYWxsb3dNaXNzaW5nKSB7XG5cdFx0XHR0aHJvdyBuZXcgJFR5cGVFcnJvcignaW50cmluc2ljICcgKyBuYW1lICsgJyBleGlzdHMsIGJ1dCBpcyBub3QgYXZhaWxhYmxlLiBQbGVhc2UgZmlsZSBhbiBpc3N1ZSEnKTtcblx0XHR9XG5cblx0XHRyZXR1cm4ge1xuXHRcdFx0YWxpYXM6IGFsaWFzLFxuXHRcdFx0bmFtZTogaW50cmluc2ljTmFtZSxcblx0XHRcdHZhbHVlOiB2YWx1ZVxuXHRcdH07XG5cdH1cblxuXHR0aHJvdyBuZXcgJFN5bnRheEVycm9yKCdpbnRyaW5zaWMgJyArIG5hbWUgKyAnIGRvZXMgbm90IGV4aXN0IScpO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBHZXRJbnRyaW5zaWMobmFtZSwgYWxsb3dNaXNzaW5nKSB7XG5cdGlmICh0eXBlb2YgbmFtZSAhPT0gJ3N0cmluZycgfHwgbmFtZS5sZW5ndGggPT09IDApIHtcblx0XHR0aHJvdyBuZXcgJFR5cGVFcnJvcignaW50cmluc2ljIG5hbWUgbXVzdCBiZSBhIG5vbi1lbXB0eSBzdHJpbmcnKTtcblx0fVxuXHRpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgdHlwZW9mIGFsbG93TWlzc2luZyAhPT0gJ2Jvb2xlYW4nKSB7XG5cdFx0dGhyb3cgbmV3ICRUeXBlRXJyb3IoJ1wiYWxsb3dNaXNzaW5nXCIgYXJndW1lbnQgbXVzdCBiZSBhIGJvb2xlYW4nKTtcblx0fVxuXG5cdGlmICgkZXhlYygvXiU/W14lXSolPyQvLCBuYW1lKSA9PT0gbnVsbCkge1xuXHRcdHRocm93IG5ldyAkU3ludGF4RXJyb3IoJ2AlYCBtYXkgbm90IGJlIHByZXNlbnQgYW55d2hlcmUgYnV0IGF0IHRoZSBiZWdpbm5pbmcgYW5kIGVuZCBvZiB0aGUgaW50cmluc2ljIG5hbWUnKTtcblx0fVxuXHR2YXIgcGFydHMgPSBzdHJpbmdUb1BhdGgobmFtZSk7XG5cdHZhciBpbnRyaW5zaWNCYXNlTmFtZSA9IHBhcnRzLmxlbmd0aCA+IDAgPyBwYXJ0c1swXSA6ICcnO1xuXG5cdHZhciBpbnRyaW5zaWMgPSBnZXRCYXNlSW50cmluc2ljKCclJyArIGludHJpbnNpY0Jhc2VOYW1lICsgJyUnLCBhbGxvd01pc3NpbmcpO1xuXHR2YXIgaW50cmluc2ljUmVhbE5hbWUgPSBpbnRyaW5zaWMubmFtZTtcblx0dmFyIHZhbHVlID0gaW50cmluc2ljLnZhbHVlO1xuXHR2YXIgc2tpcEZ1cnRoZXJDYWNoaW5nID0gZmFsc2U7XG5cblx0dmFyIGFsaWFzID0gaW50cmluc2ljLmFsaWFzO1xuXHRpZiAoYWxpYXMpIHtcblx0XHRpbnRyaW5zaWNCYXNlTmFtZSA9IGFsaWFzWzBdO1xuXHRcdCRzcGxpY2VBcHBseShwYXJ0cywgJGNvbmNhdChbMCwgMV0sIGFsaWFzKSk7XG5cdH1cblxuXHRmb3IgKHZhciBpID0gMSwgaXNPd24gPSB0cnVlOyBpIDwgcGFydHMubGVuZ3RoOyBpICs9IDEpIHtcblx0XHR2YXIgcGFydCA9IHBhcnRzW2ldO1xuXHRcdHZhciBmaXJzdCA9ICRzdHJTbGljZShwYXJ0LCAwLCAxKTtcblx0XHR2YXIgbGFzdCA9ICRzdHJTbGljZShwYXJ0LCAtMSk7XG5cdFx0aWYgKFxuXHRcdFx0KFxuXHRcdFx0XHQoZmlyc3QgPT09ICdcIicgfHwgZmlyc3QgPT09IFwiJ1wiIHx8IGZpcnN0ID09PSAnYCcpXG5cdFx0XHRcdHx8IChsYXN0ID09PSAnXCInIHx8IGxhc3QgPT09IFwiJ1wiIHx8IGxhc3QgPT09ICdgJylcblx0XHRcdClcblx0XHRcdCYmIGZpcnN0ICE9PSBsYXN0XG5cdFx0KSB7XG5cdFx0XHR0aHJvdyBuZXcgJFN5bnRheEVycm9yKCdwcm9wZXJ0eSBuYW1lcyB3aXRoIHF1b3RlcyBtdXN0IGhhdmUgbWF0Y2hpbmcgcXVvdGVzJyk7XG5cdFx0fVxuXHRcdGlmIChwYXJ0ID09PSAnY29uc3RydWN0b3InIHx8ICFpc093bikge1xuXHRcdFx0c2tpcEZ1cnRoZXJDYWNoaW5nID0gdHJ1ZTtcblx0XHR9XG5cblx0XHRpbnRyaW5zaWNCYXNlTmFtZSArPSAnLicgKyBwYXJ0O1xuXHRcdGludHJpbnNpY1JlYWxOYW1lID0gJyUnICsgaW50cmluc2ljQmFzZU5hbWUgKyAnJSc7XG5cblx0XHRpZiAoaGFzT3duKElOVFJJTlNJQ1MsIGludHJpbnNpY1JlYWxOYW1lKSkge1xuXHRcdFx0dmFsdWUgPSBJTlRSSU5TSUNTW2ludHJpbnNpY1JlYWxOYW1lXTtcblx0XHR9IGVsc2UgaWYgKHZhbHVlICE9IG51bGwpIHtcblx0XHRcdGlmICghKHBhcnQgaW4gdmFsdWUpKSB7XG5cdFx0XHRcdGlmICghYWxsb3dNaXNzaW5nKSB7XG5cdFx0XHRcdFx0dGhyb3cgbmV3ICRUeXBlRXJyb3IoJ2Jhc2UgaW50cmluc2ljIGZvciAnICsgbmFtZSArICcgZXhpc3RzLCBidXQgdGhlIHByb3BlcnR5IGlzIG5vdCBhdmFpbGFibGUuJyk7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHZvaWQgdW5kZWZpbmVkO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCRnT1BEICYmIChpICsgMSkgPj0gcGFydHMubGVuZ3RoKSB7XG5cdFx0XHRcdHZhciBkZXNjID0gJGdPUEQodmFsdWUsIHBhcnQpO1xuXHRcdFx0XHRpc093biA9ICEhZGVzYztcblxuXHRcdFx0XHQvLyBCeSBjb252ZW50aW9uLCB3aGVuIGEgZGF0YSBwcm9wZXJ0eSBpcyBjb252ZXJ0ZWQgdG8gYW4gYWNjZXNzb3Jcblx0XHRcdFx0Ly8gcHJvcGVydHkgdG8gZW11bGF0ZSBhIGRhdGEgcHJvcGVydHkgdGhhdCBkb2VzIG5vdCBzdWZmZXIgZnJvbVxuXHRcdFx0XHQvLyB0aGUgb3ZlcnJpZGUgbWlzdGFrZSwgdGhhdCBhY2Nlc3NvcidzIGdldHRlciBpcyBtYXJrZWQgd2l0aFxuXHRcdFx0XHQvLyBhbiBgb3JpZ2luYWxWYWx1ZWAgcHJvcGVydHkuIEhlcmUsIHdoZW4gd2UgZGV0ZWN0IHRoaXMsIHdlXG5cdFx0XHRcdC8vIHVwaG9sZCB0aGUgaWxsdXNpb24gYnkgcHJldGVuZGluZyB0byBzZWUgdGhhdCBvcmlnaW5hbCBkYXRhXG5cdFx0XHRcdC8vIHByb3BlcnR5LCBpLmUuLCByZXR1cm5pbmcgdGhlIHZhbHVlIHJhdGhlciB0aGFuIHRoZSBnZXR0ZXJcblx0XHRcdFx0Ly8gaXRzZWxmLlxuXHRcdFx0XHRpZiAoaXNPd24gJiYgJ2dldCcgaW4gZGVzYyAmJiAhKCdvcmlnaW5hbFZhbHVlJyBpbiBkZXNjLmdldCkpIHtcblx0XHRcdFx0XHR2YWx1ZSA9IGRlc2MuZ2V0O1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHZhbHVlID0gdmFsdWVbcGFydF07XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGlzT3duID0gaGFzT3duKHZhbHVlLCBwYXJ0KTtcblx0XHRcdFx0dmFsdWUgPSB2YWx1ZVtwYXJ0XTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKGlzT3duICYmICFza2lwRnVydGhlckNhY2hpbmcpIHtcblx0XHRcdFx0SU5UUklOU0lDU1tpbnRyaW5zaWNSZWFsTmFtZV0gPSB2YWx1ZTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblx0cmV0dXJuIHZhbHVlO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIEdldEludHJpbnNpYyA9IHJlcXVpcmUoJ2dldC1pbnRyaW5zaWMnKTtcblxudmFyICRnT1BEID0gR2V0SW50cmluc2ljKCclT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvciUnLCB0cnVlKTtcblxuaWYgKCRnT1BEKSB7XG5cdHRyeSB7XG5cdFx0JGdPUEQoW10sICdsZW5ndGgnKTtcblx0fSBjYXRjaCAoZSkge1xuXHRcdC8vIElFIDggaGFzIGEgYnJva2VuIGdPUERcblx0XHQkZ09QRCA9IG51bGw7XG5cdH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSAkZ09QRDtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyICRkZWZpbmVQcm9wZXJ0eSA9IHJlcXVpcmUoJ2VzLWRlZmluZS1wcm9wZXJ0eScpO1xuXG52YXIgaGFzUHJvcGVydHlEZXNjcmlwdG9ycyA9IGZ1bmN0aW9uIGhhc1Byb3BlcnR5RGVzY3JpcHRvcnMoKSB7XG5cdHJldHVybiAhISRkZWZpbmVQcm9wZXJ0eTtcbn07XG5cbmhhc1Byb3BlcnR5RGVzY3JpcHRvcnMuaGFzQXJyYXlMZW5ndGhEZWZpbmVCdWcgPSBmdW5jdGlvbiBoYXNBcnJheUxlbmd0aERlZmluZUJ1ZygpIHtcblx0Ly8gbm9kZSB2MC42IGhhcyBhIGJ1ZyB3aGVyZSBhcnJheSBsZW5ndGhzIGNhbiBiZSBTZXQgYnV0IG5vdCBEZWZpbmVkXG5cdGlmICghJGRlZmluZVByb3BlcnR5KSB7XG5cdFx0cmV0dXJuIG51bGw7XG5cdH1cblx0dHJ5IHtcblx0XHRyZXR1cm4gJGRlZmluZVByb3BlcnR5KFtdLCAnbGVuZ3RoJywgeyB2YWx1ZTogMSB9KS5sZW5ndGggIT09IDE7XG5cdH0gY2F0Y2ggKGUpIHtcblx0XHQvLyBJbiBGaXJlZm94IDQtMjIsIGRlZmluaW5nIGxlbmd0aCBvbiBhbiBhcnJheSB0aHJvd3MgYW4gZXhjZXB0aW9uLlxuXHRcdHJldHVybiB0cnVlO1xuXHR9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGhhc1Byb3BlcnR5RGVzY3JpcHRvcnM7XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciB0ZXN0ID0ge1xuXHRfX3Byb3RvX186IG51bGwsXG5cdGZvbzoge31cbn07XG5cbnZhciAkT2JqZWN0ID0gT2JqZWN0O1xuXG4vKiogQHR5cGUge2ltcG9ydCgnLicpfSAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBoYXNQcm90bygpIHtcblx0Ly8gQHRzLWV4cGVjdC1lcnJvcjogVFMgZXJyb3JzIG9uIGFuIGluaGVyaXRlZCBwcm9wZXJ0eSBmb3Igc29tZSByZWFzb25cblx0cmV0dXJuIHsgX19wcm90b19fOiB0ZXN0IH0uZm9vID09PSB0ZXN0LmZvb1xuXHRcdCYmICEodGVzdCBpbnN0YW5jZW9mICRPYmplY3QpO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIG9yaWdTeW1ib2wgPSB0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2w7XG52YXIgaGFzU3ltYm9sU2hhbSA9IHJlcXVpcmUoJy4vc2hhbXMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBoYXNOYXRpdmVTeW1ib2xzKCkge1xuXHRpZiAodHlwZW9mIG9yaWdTeW1ib2wgIT09ICdmdW5jdGlvbicpIHsgcmV0dXJuIGZhbHNlOyB9XG5cdGlmICh0eXBlb2YgU3ltYm9sICE9PSAnZnVuY3Rpb24nKSB7IHJldHVybiBmYWxzZTsgfVxuXHRpZiAodHlwZW9mIG9yaWdTeW1ib2woJ2ZvbycpICE9PSAnc3ltYm9sJykgeyByZXR1cm4gZmFsc2U7IH1cblx0aWYgKHR5cGVvZiBTeW1ib2woJ2JhcicpICE9PSAnc3ltYm9sJykgeyByZXR1cm4gZmFsc2U7IH1cblxuXHRyZXR1cm4gaGFzU3ltYm9sU2hhbSgpO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxuLyogZXNsaW50IGNvbXBsZXhpdHk6IFsyLCAxOF0sIG1heC1zdGF0ZW1lbnRzOiBbMiwgMzNdICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGhhc1N5bWJvbHMoKSB7XG5cdGlmICh0eXBlb2YgU3ltYm9sICE9PSAnZnVuY3Rpb24nIHx8IHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzICE9PSAnZnVuY3Rpb24nKSB7IHJldHVybiBmYWxzZTsgfVxuXHRpZiAodHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gJ3N5bWJvbCcpIHsgcmV0dXJuIHRydWU7IH1cblxuXHR2YXIgb2JqID0ge307XG5cdHZhciBzeW0gPSBTeW1ib2woJ3Rlc3QnKTtcblx0dmFyIHN5bU9iaiA9IE9iamVjdChzeW0pO1xuXHRpZiAodHlwZW9mIHN5bSA9PT0gJ3N0cmluZycpIHsgcmV0dXJuIGZhbHNlOyB9XG5cblx0aWYgKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChzeW0pICE9PSAnW29iamVjdCBTeW1ib2xdJykgeyByZXR1cm4gZmFsc2U7IH1cblx0aWYgKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChzeW1PYmopICE9PSAnW29iamVjdCBTeW1ib2xdJykgeyByZXR1cm4gZmFsc2U7IH1cblxuXHQvLyB0ZW1wIGRpc2FibGVkIHBlciBodHRwczovL2dpdGh1Yi5jb20vbGpoYXJiL29iamVjdC5hc3NpZ24vaXNzdWVzLzE3XG5cdC8vIGlmIChzeW0gaW5zdGFuY2VvZiBTeW1ib2wpIHsgcmV0dXJuIGZhbHNlOyB9XG5cdC8vIHRlbXAgZGlzYWJsZWQgcGVyIGh0dHBzOi8vZ2l0aHViLmNvbS9XZWJSZWZsZWN0aW9uL2dldC1vd24tcHJvcGVydHktc3ltYm9scy9pc3N1ZXMvNFxuXHQvLyBpZiAoIShzeW1PYmogaW5zdGFuY2VvZiBTeW1ib2wpKSB7IHJldHVybiBmYWxzZTsgfVxuXG5cdC8vIGlmICh0eXBlb2YgU3ltYm9sLnByb3RvdHlwZS50b1N0cmluZyAhPT0gJ2Z1bmN0aW9uJykgeyByZXR1cm4gZmFsc2U7IH1cblx0Ly8gaWYgKFN0cmluZyhzeW0pICE9PSBTeW1ib2wucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoc3ltKSkgeyByZXR1cm4gZmFsc2U7IH1cblxuXHR2YXIgc3ltVmFsID0gNDI7XG5cdG9ialtzeW1dID0gc3ltVmFsO1xuXHRmb3IgKHN5bSBpbiBvYmopIHsgcmV0dXJuIGZhbHNlOyB9IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tcmVzdHJpY3RlZC1zeW50YXgsIG5vLXVucmVhY2hhYmxlLWxvb3Bcblx0aWYgKHR5cGVvZiBPYmplY3Qua2V5cyA9PT0gJ2Z1bmN0aW9uJyAmJiBPYmplY3Qua2V5cyhvYmopLmxlbmd0aCAhPT0gMCkgeyByZXR1cm4gZmFsc2U7IH1cblxuXHRpZiAodHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzID09PSAnZnVuY3Rpb24nICYmIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKG9iaikubGVuZ3RoICE9PSAwKSB7IHJldHVybiBmYWxzZTsgfVxuXG5cdHZhciBzeW1zID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmopO1xuXHRpZiAoc3ltcy5sZW5ndGggIT09IDEgfHwgc3ltc1swXSAhPT0gc3ltKSB7IHJldHVybiBmYWxzZTsgfVxuXG5cdGlmICghT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKG9iaiwgc3ltKSkgeyByZXR1cm4gZmFsc2U7IH1cblxuXHRpZiAodHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IgPT09ICdmdW5jdGlvbicpIHtcblx0XHR2YXIgZGVzY3JpcHRvciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLCBzeW0pO1xuXHRcdGlmIChkZXNjcmlwdG9yLnZhbHVlICE9PSBzeW1WYWwgfHwgZGVzY3JpcHRvci5lbnVtZXJhYmxlICE9PSB0cnVlKSB7IHJldHVybiBmYWxzZTsgfVxuXHR9XG5cblx0cmV0dXJuIHRydWU7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgY2FsbCA9IEZ1bmN0aW9uLnByb3RvdHlwZS5jYWxsO1xudmFyICRoYXNPd24gPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xudmFyIGJpbmQgPSByZXF1aXJlKCdmdW5jdGlvbi1iaW5kJyk7XG5cbi8qKiBAdHlwZSB7aW1wb3J0KCcuJyl9ICovXG5tb2R1bGUuZXhwb3J0cyA9IGJpbmQuY2FsbChjYWxsLCAkaGFzT3duKTtcbiIsInZhciBoYXNNYXAgPSB0eXBlb2YgTWFwID09PSAnZnVuY3Rpb24nICYmIE1hcC5wcm90b3R5cGU7XG52YXIgbWFwU2l6ZURlc2NyaXB0b3IgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yICYmIGhhc01hcCA/IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoTWFwLnByb3RvdHlwZSwgJ3NpemUnKSA6IG51bGw7XG52YXIgbWFwU2l6ZSA9IGhhc01hcCAmJiBtYXBTaXplRGVzY3JpcHRvciAmJiB0eXBlb2YgbWFwU2l6ZURlc2NyaXB0b3IuZ2V0ID09PSAnZnVuY3Rpb24nID8gbWFwU2l6ZURlc2NyaXB0b3IuZ2V0IDogbnVsbDtcbnZhciBtYXBGb3JFYWNoID0gaGFzTWFwICYmIE1hcC5wcm90b3R5cGUuZm9yRWFjaDtcbnZhciBoYXNTZXQgPSB0eXBlb2YgU2V0ID09PSAnZnVuY3Rpb24nICYmIFNldC5wcm90b3R5cGU7XG52YXIgc2V0U2l6ZURlc2NyaXB0b3IgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yICYmIGhhc1NldCA/IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoU2V0LnByb3RvdHlwZSwgJ3NpemUnKSA6IG51bGw7XG52YXIgc2V0U2l6ZSA9IGhhc1NldCAmJiBzZXRTaXplRGVzY3JpcHRvciAmJiB0eXBlb2Ygc2V0U2l6ZURlc2NyaXB0b3IuZ2V0ID09PSAnZnVuY3Rpb24nID8gc2V0U2l6ZURlc2NyaXB0b3IuZ2V0IDogbnVsbDtcbnZhciBzZXRGb3JFYWNoID0gaGFzU2V0ICYmIFNldC5wcm90b3R5cGUuZm9yRWFjaDtcbnZhciBoYXNXZWFrTWFwID0gdHlwZW9mIFdlYWtNYXAgPT09ICdmdW5jdGlvbicgJiYgV2Vha01hcC5wcm90b3R5cGU7XG52YXIgd2Vha01hcEhhcyA9IGhhc1dlYWtNYXAgPyBXZWFrTWFwLnByb3RvdHlwZS5oYXMgOiBudWxsO1xudmFyIGhhc1dlYWtTZXQgPSB0eXBlb2YgV2Vha1NldCA9PT0gJ2Z1bmN0aW9uJyAmJiBXZWFrU2V0LnByb3RvdHlwZTtcbnZhciB3ZWFrU2V0SGFzID0gaGFzV2Vha1NldCA/IFdlYWtTZXQucHJvdG90eXBlLmhhcyA6IG51bGw7XG52YXIgaGFzV2Vha1JlZiA9IHR5cGVvZiBXZWFrUmVmID09PSAnZnVuY3Rpb24nICYmIFdlYWtSZWYucHJvdG90eXBlO1xudmFyIHdlYWtSZWZEZXJlZiA9IGhhc1dlYWtSZWYgPyBXZWFrUmVmLnByb3RvdHlwZS5kZXJlZiA6IG51bGw7XG52YXIgYm9vbGVhblZhbHVlT2YgPSBCb29sZWFuLnByb3RvdHlwZS52YWx1ZU9mO1xudmFyIG9iamVjdFRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcbnZhciBmdW5jdGlvblRvU3RyaW5nID0gRnVuY3Rpb24ucHJvdG90eXBlLnRvU3RyaW5nO1xudmFyICRtYXRjaCA9IFN0cmluZy5wcm90b3R5cGUubWF0Y2g7XG52YXIgJHNsaWNlID0gU3RyaW5nLnByb3RvdHlwZS5zbGljZTtcbnZhciAkcmVwbGFjZSA9IFN0cmluZy5wcm90b3R5cGUucmVwbGFjZTtcbnZhciAkdG9VcHBlckNhc2UgPSBTdHJpbmcucHJvdG90eXBlLnRvVXBwZXJDYXNlO1xudmFyICR0b0xvd2VyQ2FzZSA9IFN0cmluZy5wcm90b3R5cGUudG9Mb3dlckNhc2U7XG52YXIgJHRlc3QgPSBSZWdFeHAucHJvdG90eXBlLnRlc3Q7XG52YXIgJGNvbmNhdCA9IEFycmF5LnByb3RvdHlwZS5jb25jYXQ7XG52YXIgJGpvaW4gPSBBcnJheS5wcm90b3R5cGUuam9pbjtcbnZhciAkYXJyU2xpY2UgPSBBcnJheS5wcm90b3R5cGUuc2xpY2U7XG52YXIgJGZsb29yID0gTWF0aC5mbG9vcjtcbnZhciBiaWdJbnRWYWx1ZU9mID0gdHlwZW9mIEJpZ0ludCA9PT0gJ2Z1bmN0aW9uJyA/IEJpZ0ludC5wcm90b3R5cGUudmFsdWVPZiA6IG51bGw7XG52YXIgZ09QUyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHM7XG52YXIgc3ltVG9TdHJpbmcgPSB0eXBlb2YgU3ltYm9sID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09ICdzeW1ib2wnID8gU3ltYm9sLnByb3RvdHlwZS50b1N0cmluZyA6IG51bGw7XG52YXIgaGFzU2hhbW1lZFN5bWJvbHMgPSB0eXBlb2YgU3ltYm9sID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09ICdvYmplY3QnO1xuLy8gaWUsIGBoYXMtdG9zdHJpbmd0YWcvc2hhbXNcbnZhciB0b1N0cmluZ1RhZyA9IHR5cGVvZiBTeW1ib2wgPT09ICdmdW5jdGlvbicgJiYgU3ltYm9sLnRvU3RyaW5nVGFnICYmICh0eXBlb2YgU3ltYm9sLnRvU3RyaW5nVGFnID09PSBoYXNTaGFtbWVkU3ltYm9scyA/ICdvYmplY3QnIDogJ3N5bWJvbCcpXG4gICAgPyBTeW1ib2wudG9TdHJpbmdUYWdcbiAgICA6IG51bGw7XG52YXIgaXNFbnVtZXJhYmxlID0gT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZTtcblxudmFyIGdQTyA9ICh0eXBlb2YgUmVmbGVjdCA9PT0gJ2Z1bmN0aW9uJyA/IFJlZmxlY3QuZ2V0UHJvdG90eXBlT2YgOiBPYmplY3QuZ2V0UHJvdG90eXBlT2YpIHx8IChcbiAgICBbXS5fX3Byb3RvX18gPT09IEFycmF5LnByb3RvdHlwZSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXByb3RvXG4gICAgICAgID8gZnVuY3Rpb24gKE8pIHtcbiAgICAgICAgICAgIHJldHVybiBPLl9fcHJvdG9fXzsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1wcm90b1xuICAgICAgICB9XG4gICAgICAgIDogbnVsbFxuKTtcblxuZnVuY3Rpb24gYWRkTnVtZXJpY1NlcGFyYXRvcihudW0sIHN0cikge1xuICAgIGlmIChcbiAgICAgICAgbnVtID09PSBJbmZpbml0eVxuICAgICAgICB8fCBudW0gPT09IC1JbmZpbml0eVxuICAgICAgICB8fCBudW0gIT09IG51bVxuICAgICAgICB8fCAobnVtICYmIG51bSA+IC0xMDAwICYmIG51bSA8IDEwMDApXG4gICAgICAgIHx8ICR0ZXN0LmNhbGwoL2UvLCBzdHIpXG4gICAgKSB7XG4gICAgICAgIHJldHVybiBzdHI7XG4gICAgfVxuICAgIHZhciBzZXBSZWdleCA9IC9bMC05XSg/PSg/OlswLTldezN9KSsoPyFbMC05XSkpL2c7XG4gICAgaWYgKHR5cGVvZiBudW0gPT09ICdudW1iZXInKSB7XG4gICAgICAgIHZhciBpbnQgPSBudW0gPCAwID8gLSRmbG9vcigtbnVtKSA6ICRmbG9vcihudW0pOyAvLyB0cnVuYyhudW0pXG4gICAgICAgIGlmIChpbnQgIT09IG51bSkge1xuICAgICAgICAgICAgdmFyIGludFN0ciA9IFN0cmluZyhpbnQpO1xuICAgICAgICAgICAgdmFyIGRlYyA9ICRzbGljZS5jYWxsKHN0ciwgaW50U3RyLmxlbmd0aCArIDEpO1xuICAgICAgICAgICAgcmV0dXJuICRyZXBsYWNlLmNhbGwoaW50U3RyLCBzZXBSZWdleCwgJyQmXycpICsgJy4nICsgJHJlcGxhY2UuY2FsbCgkcmVwbGFjZS5jYWxsKGRlYywgLyhbMC05XXszfSkvZywgJyQmXycpLCAvXyQvLCAnJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuICRyZXBsYWNlLmNhbGwoc3RyLCBzZXBSZWdleCwgJyQmXycpO1xufVxuXG52YXIgdXRpbEluc3BlY3QgPSByZXF1aXJlKCcuL3V0aWwuaW5zcGVjdCcpO1xudmFyIGluc3BlY3RDdXN0b20gPSB1dGlsSW5zcGVjdC5jdXN0b207XG52YXIgaW5zcGVjdFN5bWJvbCA9IGlzU3ltYm9sKGluc3BlY3RDdXN0b20pID8gaW5zcGVjdEN1c3RvbSA6IG51bGw7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaW5zcGVjdF8ob2JqLCBvcHRpb25zLCBkZXB0aCwgc2Vlbikge1xuICAgIHZhciBvcHRzID0gb3B0aW9ucyB8fCB7fTtcblxuICAgIGlmIChoYXMob3B0cywgJ3F1b3RlU3R5bGUnKSAmJiAob3B0cy5xdW90ZVN0eWxlICE9PSAnc2luZ2xlJyAmJiBvcHRzLnF1b3RlU3R5bGUgIT09ICdkb3VibGUnKSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdvcHRpb24gXCJxdW90ZVN0eWxlXCIgbXVzdCBiZSBcInNpbmdsZVwiIG9yIFwiZG91YmxlXCInKTtcbiAgICB9XG4gICAgaWYgKFxuICAgICAgICBoYXMob3B0cywgJ21heFN0cmluZ0xlbmd0aCcpICYmICh0eXBlb2Ygb3B0cy5tYXhTdHJpbmdMZW5ndGggPT09ICdudW1iZXInXG4gICAgICAgICAgICA/IG9wdHMubWF4U3RyaW5nTGVuZ3RoIDwgMCAmJiBvcHRzLm1heFN0cmluZ0xlbmd0aCAhPT0gSW5maW5pdHlcbiAgICAgICAgICAgIDogb3B0cy5tYXhTdHJpbmdMZW5ndGggIT09IG51bGxcbiAgICAgICAgKVxuICAgICkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdvcHRpb24gXCJtYXhTdHJpbmdMZW5ndGhcIiwgaWYgcHJvdmlkZWQsIG11c3QgYmUgYSBwb3NpdGl2ZSBpbnRlZ2VyLCBJbmZpbml0eSwgb3IgYG51bGxgJyk7XG4gICAgfVxuICAgIHZhciBjdXN0b21JbnNwZWN0ID0gaGFzKG9wdHMsICdjdXN0b21JbnNwZWN0JykgPyBvcHRzLmN1c3RvbUluc3BlY3QgOiB0cnVlO1xuICAgIGlmICh0eXBlb2YgY3VzdG9tSW5zcGVjdCAhPT0gJ2Jvb2xlYW4nICYmIGN1c3RvbUluc3BlY3QgIT09ICdzeW1ib2wnKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ29wdGlvbiBcImN1c3RvbUluc3BlY3RcIiwgaWYgcHJvdmlkZWQsIG11c3QgYmUgYHRydWVgLCBgZmFsc2VgLCBvciBgXFwnc3ltYm9sXFwnYCcpO1xuICAgIH1cblxuICAgIGlmIChcbiAgICAgICAgaGFzKG9wdHMsICdpbmRlbnQnKVxuICAgICAgICAmJiBvcHRzLmluZGVudCAhPT0gbnVsbFxuICAgICAgICAmJiBvcHRzLmluZGVudCAhPT0gJ1xcdCdcbiAgICAgICAgJiYgIShwYXJzZUludChvcHRzLmluZGVudCwgMTApID09PSBvcHRzLmluZGVudCAmJiBvcHRzLmluZGVudCA+IDApXG4gICAgKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ29wdGlvbiBcImluZGVudFwiIG11c3QgYmUgXCJcXFxcdFwiLCBhbiBpbnRlZ2VyID4gMCwgb3IgYG51bGxgJyk7XG4gICAgfVxuICAgIGlmIChoYXMob3B0cywgJ251bWVyaWNTZXBhcmF0b3InKSAmJiB0eXBlb2Ygb3B0cy5udW1lcmljU2VwYXJhdG9yICE9PSAnYm9vbGVhbicpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignb3B0aW9uIFwibnVtZXJpY1NlcGFyYXRvclwiLCBpZiBwcm92aWRlZCwgbXVzdCBiZSBgdHJ1ZWAgb3IgYGZhbHNlYCcpO1xuICAgIH1cbiAgICB2YXIgbnVtZXJpY1NlcGFyYXRvciA9IG9wdHMubnVtZXJpY1NlcGFyYXRvcjtcblxuICAgIGlmICh0eXBlb2Ygb2JqID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm4gJ3VuZGVmaW5lZCc7XG4gICAgfVxuICAgIGlmIChvYmogPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuICdudWxsJztcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBvYmogPT09ICdib29sZWFuJykge1xuICAgICAgICByZXR1cm4gb2JqID8gJ3RydWUnIDogJ2ZhbHNlJztcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIG9iaiA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIGluc3BlY3RTdHJpbmcob2JqLCBvcHRzKTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBvYmogPT09ICdudW1iZXInKSB7XG4gICAgICAgIGlmIChvYmogPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBJbmZpbml0eSAvIG9iaiA+IDAgPyAnMCcgOiAnLTAnO1xuICAgICAgICB9XG4gICAgICAgIHZhciBzdHIgPSBTdHJpbmcob2JqKTtcbiAgICAgICAgcmV0dXJuIG51bWVyaWNTZXBhcmF0b3IgPyBhZGROdW1lcmljU2VwYXJhdG9yKG9iaiwgc3RyKSA6IHN0cjtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBvYmogPT09ICdiaWdpbnQnKSB7XG4gICAgICAgIHZhciBiaWdJbnRTdHIgPSBTdHJpbmcob2JqKSArICduJztcbiAgICAgICAgcmV0dXJuIG51bWVyaWNTZXBhcmF0b3IgPyBhZGROdW1lcmljU2VwYXJhdG9yKG9iaiwgYmlnSW50U3RyKSA6IGJpZ0ludFN0cjtcbiAgICB9XG5cbiAgICB2YXIgbWF4RGVwdGggPSB0eXBlb2Ygb3B0cy5kZXB0aCA9PT0gJ3VuZGVmaW5lZCcgPyA1IDogb3B0cy5kZXB0aDtcbiAgICBpZiAodHlwZW9mIGRlcHRoID09PSAndW5kZWZpbmVkJykgeyBkZXB0aCA9IDA7IH1cbiAgICBpZiAoZGVwdGggPj0gbWF4RGVwdGggJiYgbWF4RGVwdGggPiAwICYmIHR5cGVvZiBvYmogPT09ICdvYmplY3QnKSB7XG4gICAgICAgIHJldHVybiBpc0FycmF5KG9iaikgPyAnW0FycmF5XScgOiAnW09iamVjdF0nO1xuICAgIH1cblxuICAgIHZhciBpbmRlbnQgPSBnZXRJbmRlbnQob3B0cywgZGVwdGgpO1xuXG4gICAgaWYgKHR5cGVvZiBzZWVuID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICBzZWVuID0gW107XG4gICAgfSBlbHNlIGlmIChpbmRleE9mKHNlZW4sIG9iaikgPj0gMCkge1xuICAgICAgICByZXR1cm4gJ1tDaXJjdWxhcl0nO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluc3BlY3QodmFsdWUsIGZyb20sIG5vSW5kZW50KSB7XG4gICAgICAgIGlmIChmcm9tKSB7XG4gICAgICAgICAgICBzZWVuID0gJGFyclNsaWNlLmNhbGwoc2Vlbik7XG4gICAgICAgICAgICBzZWVuLnB1c2goZnJvbSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5vSW5kZW50KSB7XG4gICAgICAgICAgICB2YXIgbmV3T3B0cyA9IHtcbiAgICAgICAgICAgICAgICBkZXB0aDogb3B0cy5kZXB0aFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmIChoYXMob3B0cywgJ3F1b3RlU3R5bGUnKSkge1xuICAgICAgICAgICAgICAgIG5ld09wdHMucXVvdGVTdHlsZSA9IG9wdHMucXVvdGVTdHlsZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpbnNwZWN0Xyh2YWx1ZSwgbmV3T3B0cywgZGVwdGggKyAxLCBzZWVuKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaW5zcGVjdF8odmFsdWUsIG9wdHMsIGRlcHRoICsgMSwgc2Vlbik7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBvYmogPT09ICdmdW5jdGlvbicgJiYgIWlzUmVnRXhwKG9iaikpIHsgLy8gaW4gb2xkZXIgZW5naW5lcywgcmVnZXhlcyBhcmUgY2FsbGFibGVcbiAgICAgICAgdmFyIG5hbWUgPSBuYW1lT2Yob2JqKTtcbiAgICAgICAgdmFyIGtleXMgPSBhcnJPYmpLZXlzKG9iaiwgaW5zcGVjdCk7XG4gICAgICAgIHJldHVybiAnW0Z1bmN0aW9uJyArIChuYW1lID8gJzogJyArIG5hbWUgOiAnIChhbm9ueW1vdXMpJykgKyAnXScgKyAoa2V5cy5sZW5ndGggPiAwID8gJyB7ICcgKyAkam9pbi5jYWxsKGtleXMsICcsICcpICsgJyB9JyA6ICcnKTtcbiAgICB9XG4gICAgaWYgKGlzU3ltYm9sKG9iaikpIHtcbiAgICAgICAgdmFyIHN5bVN0cmluZyA9IGhhc1NoYW1tZWRTeW1ib2xzID8gJHJlcGxhY2UuY2FsbChTdHJpbmcob2JqKSwgL14oU3ltYm9sXFwoLipcXCkpX1teKV0qJC8sICckMScpIDogc3ltVG9TdHJpbmcuY2FsbChvYmopO1xuICAgICAgICByZXR1cm4gdHlwZW9mIG9iaiA9PT0gJ29iamVjdCcgJiYgIWhhc1NoYW1tZWRTeW1ib2xzID8gbWFya0JveGVkKHN5bVN0cmluZykgOiBzeW1TdHJpbmc7XG4gICAgfVxuICAgIGlmIChpc0VsZW1lbnQob2JqKSkge1xuICAgICAgICB2YXIgcyA9ICc8JyArICR0b0xvd2VyQ2FzZS5jYWxsKFN0cmluZyhvYmoubm9kZU5hbWUpKTtcbiAgICAgICAgdmFyIGF0dHJzID0gb2JqLmF0dHJpYnV0ZXMgfHwgW107XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXR0cnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHMgKz0gJyAnICsgYXR0cnNbaV0ubmFtZSArICc9JyArIHdyYXBRdW90ZXMocXVvdGUoYXR0cnNbaV0udmFsdWUpLCAnZG91YmxlJywgb3B0cyk7XG4gICAgICAgIH1cbiAgICAgICAgcyArPSAnPic7XG4gICAgICAgIGlmIChvYmouY2hpbGROb2RlcyAmJiBvYmouY2hpbGROb2Rlcy5sZW5ndGgpIHsgcyArPSAnLi4uJzsgfVxuICAgICAgICBzICs9ICc8LycgKyAkdG9Mb3dlckNhc2UuY2FsbChTdHJpbmcob2JqLm5vZGVOYW1lKSkgKyAnPic7XG4gICAgICAgIHJldHVybiBzO1xuICAgIH1cbiAgICBpZiAoaXNBcnJheShvYmopKSB7XG4gICAgICAgIGlmIChvYmoubGVuZ3RoID09PSAwKSB7IHJldHVybiAnW10nOyB9XG4gICAgICAgIHZhciB4cyA9IGFyck9iaktleXMob2JqLCBpbnNwZWN0KTtcbiAgICAgICAgaWYgKGluZGVudCAmJiAhc2luZ2xlTGluZVZhbHVlcyh4cykpIHtcbiAgICAgICAgICAgIHJldHVybiAnWycgKyBpbmRlbnRlZEpvaW4oeHMsIGluZGVudCkgKyAnXSc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICdbICcgKyAkam9pbi5jYWxsKHhzLCAnLCAnKSArICcgXSc7XG4gICAgfVxuICAgIGlmIChpc0Vycm9yKG9iaikpIHtcbiAgICAgICAgdmFyIHBhcnRzID0gYXJyT2JqS2V5cyhvYmosIGluc3BlY3QpO1xuICAgICAgICBpZiAoISgnY2F1c2UnIGluIEVycm9yLnByb3RvdHlwZSkgJiYgJ2NhdXNlJyBpbiBvYmogJiYgIWlzRW51bWVyYWJsZS5jYWxsKG9iaiwgJ2NhdXNlJykpIHtcbiAgICAgICAgICAgIHJldHVybiAneyBbJyArIFN0cmluZyhvYmopICsgJ10gJyArICRqb2luLmNhbGwoJGNvbmNhdC5jYWxsKCdbY2F1c2VdOiAnICsgaW5zcGVjdChvYmouY2F1c2UpLCBwYXJ0cyksICcsICcpICsgJyB9JztcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFydHMubGVuZ3RoID09PSAwKSB7IHJldHVybiAnWycgKyBTdHJpbmcob2JqKSArICddJzsgfVxuICAgICAgICByZXR1cm4gJ3sgWycgKyBTdHJpbmcob2JqKSArICddICcgKyAkam9pbi5jYWxsKHBhcnRzLCAnLCAnKSArICcgfSc7XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygb2JqID09PSAnb2JqZWN0JyAmJiBjdXN0b21JbnNwZWN0KSB7XG4gICAgICAgIGlmIChpbnNwZWN0U3ltYm9sICYmIHR5cGVvZiBvYmpbaW5zcGVjdFN5bWJvbF0gPT09ICdmdW5jdGlvbicgJiYgdXRpbEluc3BlY3QpIHtcbiAgICAgICAgICAgIHJldHVybiB1dGlsSW5zcGVjdChvYmosIHsgZGVwdGg6IG1heERlcHRoIC0gZGVwdGggfSk7XG4gICAgICAgIH0gZWxzZSBpZiAoY3VzdG9tSW5zcGVjdCAhPT0gJ3N5bWJvbCcgJiYgdHlwZW9mIG9iai5pbnNwZWN0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICByZXR1cm4gb2JqLmluc3BlY3QoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoaXNNYXAob2JqKSkge1xuICAgICAgICB2YXIgbWFwUGFydHMgPSBbXTtcbiAgICAgICAgaWYgKG1hcEZvckVhY2gpIHtcbiAgICAgICAgICAgIG1hcEZvckVhY2guY2FsbChvYmosIGZ1bmN0aW9uICh2YWx1ZSwga2V5KSB7XG4gICAgICAgICAgICAgICAgbWFwUGFydHMucHVzaChpbnNwZWN0KGtleSwgb2JqLCB0cnVlKSArICcgPT4gJyArIGluc3BlY3QodmFsdWUsIG9iaikpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbGxlY3Rpb25PZignTWFwJywgbWFwU2l6ZS5jYWxsKG9iaiksIG1hcFBhcnRzLCBpbmRlbnQpO1xuICAgIH1cbiAgICBpZiAoaXNTZXQob2JqKSkge1xuICAgICAgICB2YXIgc2V0UGFydHMgPSBbXTtcbiAgICAgICAgaWYgKHNldEZvckVhY2gpIHtcbiAgICAgICAgICAgIHNldEZvckVhY2guY2FsbChvYmosIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHNldFBhcnRzLnB1c2goaW5zcGVjdCh2YWx1ZSwgb2JqKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29sbGVjdGlvbk9mKCdTZXQnLCBzZXRTaXplLmNhbGwob2JqKSwgc2V0UGFydHMsIGluZGVudCk7XG4gICAgfVxuICAgIGlmIChpc1dlYWtNYXAob2JqKSkge1xuICAgICAgICByZXR1cm4gd2Vha0NvbGxlY3Rpb25PZignV2Vha01hcCcpO1xuICAgIH1cbiAgICBpZiAoaXNXZWFrU2V0KG9iaikpIHtcbiAgICAgICAgcmV0dXJuIHdlYWtDb2xsZWN0aW9uT2YoJ1dlYWtTZXQnKTtcbiAgICB9XG4gICAgaWYgKGlzV2Vha1JlZihvYmopKSB7XG4gICAgICAgIHJldHVybiB3ZWFrQ29sbGVjdGlvbk9mKCdXZWFrUmVmJyk7XG4gICAgfVxuICAgIGlmIChpc051bWJlcihvYmopKSB7XG4gICAgICAgIHJldHVybiBtYXJrQm94ZWQoaW5zcGVjdChOdW1iZXIob2JqKSkpO1xuICAgIH1cbiAgICBpZiAoaXNCaWdJbnQob2JqKSkge1xuICAgICAgICByZXR1cm4gbWFya0JveGVkKGluc3BlY3QoYmlnSW50VmFsdWVPZi5jYWxsKG9iaikpKTtcbiAgICB9XG4gICAgaWYgKGlzQm9vbGVhbihvYmopKSB7XG4gICAgICAgIHJldHVybiBtYXJrQm94ZWQoYm9vbGVhblZhbHVlT2YuY2FsbChvYmopKTtcbiAgICB9XG4gICAgaWYgKGlzU3RyaW5nKG9iaikpIHtcbiAgICAgICAgcmV0dXJuIG1hcmtCb3hlZChpbnNwZWN0KFN0cmluZyhvYmopKSk7XG4gICAgfVxuICAgIC8vIG5vdGU6IGluIElFIDgsIHNvbWV0aW1lcyBgZ2xvYmFsICE9PSB3aW5kb3dgIGJ1dCBib3RoIGFyZSB0aGUgcHJvdG90eXBlcyBvZiBlYWNoIG90aGVyXG4gICAgLyogZXNsaW50LWVudiBicm93c2VyICovXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIG9iaiA9PT0gd2luZG93KSB7XG4gICAgICAgIHJldHVybiAneyBbb2JqZWN0IFdpbmRvd10gfSc7XG4gICAgfVxuICAgIGlmIChcbiAgICAgICAgKHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyAmJiBvYmogPT09IGdsb2JhbFRoaXMpXG4gICAgICAgIHx8ICh0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJyAmJiBvYmogPT09IGdsb2JhbClcbiAgICApIHtcbiAgICAgICAgcmV0dXJuICd7IFtvYmplY3QgZ2xvYmFsVGhpc10gfSc7XG4gICAgfVxuICAgIGlmICghaXNEYXRlKG9iaikgJiYgIWlzUmVnRXhwKG9iaikpIHtcbiAgICAgICAgdmFyIHlzID0gYXJyT2JqS2V5cyhvYmosIGluc3BlY3QpO1xuICAgICAgICB2YXIgaXNQbGFpbk9iamVjdCA9IGdQTyA/IGdQTyhvYmopID09PSBPYmplY3QucHJvdG90eXBlIDogb2JqIGluc3RhbmNlb2YgT2JqZWN0IHx8IG9iai5jb25zdHJ1Y3RvciA9PT0gT2JqZWN0O1xuICAgICAgICB2YXIgcHJvdG9UYWcgPSBvYmogaW5zdGFuY2VvZiBPYmplY3QgPyAnJyA6ICdudWxsIHByb3RvdHlwZSc7XG4gICAgICAgIHZhciBzdHJpbmdUYWcgPSAhaXNQbGFpbk9iamVjdCAmJiB0b1N0cmluZ1RhZyAmJiBPYmplY3Qob2JqKSA9PT0gb2JqICYmIHRvU3RyaW5nVGFnIGluIG9iaiA/ICRzbGljZS5jYWxsKHRvU3RyKG9iaiksIDgsIC0xKSA6IHByb3RvVGFnID8gJ09iamVjdCcgOiAnJztcbiAgICAgICAgdmFyIGNvbnN0cnVjdG9yVGFnID0gaXNQbGFpbk9iamVjdCB8fCB0eXBlb2Ygb2JqLmNvbnN0cnVjdG9yICE9PSAnZnVuY3Rpb24nID8gJycgOiBvYmouY29uc3RydWN0b3IubmFtZSA/IG9iai5jb25zdHJ1Y3Rvci5uYW1lICsgJyAnIDogJyc7XG4gICAgICAgIHZhciB0YWcgPSBjb25zdHJ1Y3RvclRhZyArIChzdHJpbmdUYWcgfHwgcHJvdG9UYWcgPyAnWycgKyAkam9pbi5jYWxsKCRjb25jYXQuY2FsbChbXSwgc3RyaW5nVGFnIHx8IFtdLCBwcm90b1RhZyB8fCBbXSksICc6ICcpICsgJ10gJyA6ICcnKTtcbiAgICAgICAgaWYgKHlzLmxlbmd0aCA9PT0gMCkgeyByZXR1cm4gdGFnICsgJ3t9JzsgfVxuICAgICAgICBpZiAoaW5kZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gdGFnICsgJ3snICsgaW5kZW50ZWRKb2luKHlzLCBpbmRlbnQpICsgJ30nO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0YWcgKyAneyAnICsgJGpvaW4uY2FsbCh5cywgJywgJykgKyAnIH0nO1xuICAgIH1cbiAgICByZXR1cm4gU3RyaW5nKG9iaik7XG59O1xuXG5mdW5jdGlvbiB3cmFwUXVvdGVzKHMsIGRlZmF1bHRTdHlsZSwgb3B0cykge1xuICAgIHZhciBxdW90ZUNoYXIgPSAob3B0cy5xdW90ZVN0eWxlIHx8IGRlZmF1bHRTdHlsZSkgPT09ICdkb3VibGUnID8gJ1wiJyA6IFwiJ1wiO1xuICAgIHJldHVybiBxdW90ZUNoYXIgKyBzICsgcXVvdGVDaGFyO1xufVxuXG5mdW5jdGlvbiBxdW90ZShzKSB7XG4gICAgcmV0dXJuICRyZXBsYWNlLmNhbGwoU3RyaW5nKHMpLCAvXCIvZywgJyZxdW90OycpO1xufVxuXG5mdW5jdGlvbiBpc0FycmF5KG9iaikgeyByZXR1cm4gdG9TdHIob2JqKSA9PT0gJ1tvYmplY3QgQXJyYXldJyAmJiAoIXRvU3RyaW5nVGFnIHx8ICEodHlwZW9mIG9iaiA9PT0gJ29iamVjdCcgJiYgdG9TdHJpbmdUYWcgaW4gb2JqKSk7IH1cbmZ1bmN0aW9uIGlzRGF0ZShvYmopIHsgcmV0dXJuIHRvU3RyKG9iaikgPT09ICdbb2JqZWN0IERhdGVdJyAmJiAoIXRvU3RyaW5nVGFnIHx8ICEodHlwZW9mIG9iaiA9PT0gJ29iamVjdCcgJiYgdG9TdHJpbmdUYWcgaW4gb2JqKSk7IH1cbmZ1bmN0aW9uIGlzUmVnRXhwKG9iaikgeyByZXR1cm4gdG9TdHIob2JqKSA9PT0gJ1tvYmplY3QgUmVnRXhwXScgJiYgKCF0b1N0cmluZ1RhZyB8fCAhKHR5cGVvZiBvYmogPT09ICdvYmplY3QnICYmIHRvU3RyaW5nVGFnIGluIG9iaikpOyB9XG5mdW5jdGlvbiBpc0Vycm9yKG9iaikgeyByZXR1cm4gdG9TdHIob2JqKSA9PT0gJ1tvYmplY3QgRXJyb3JdJyAmJiAoIXRvU3RyaW5nVGFnIHx8ICEodHlwZW9mIG9iaiA9PT0gJ29iamVjdCcgJiYgdG9TdHJpbmdUYWcgaW4gb2JqKSk7IH1cbmZ1bmN0aW9uIGlzU3RyaW5nKG9iaikgeyByZXR1cm4gdG9TdHIob2JqKSA9PT0gJ1tvYmplY3QgU3RyaW5nXScgJiYgKCF0b1N0cmluZ1RhZyB8fCAhKHR5cGVvZiBvYmogPT09ICdvYmplY3QnICYmIHRvU3RyaW5nVGFnIGluIG9iaikpOyB9XG5mdW5jdGlvbiBpc051bWJlcihvYmopIHsgcmV0dXJuIHRvU3RyKG9iaikgPT09ICdbb2JqZWN0IE51bWJlcl0nICYmICghdG9TdHJpbmdUYWcgfHwgISh0eXBlb2Ygb2JqID09PSAnb2JqZWN0JyAmJiB0b1N0cmluZ1RhZyBpbiBvYmopKTsgfVxuZnVuY3Rpb24gaXNCb29sZWFuKG9iaikgeyByZXR1cm4gdG9TdHIob2JqKSA9PT0gJ1tvYmplY3QgQm9vbGVhbl0nICYmICghdG9TdHJpbmdUYWcgfHwgISh0eXBlb2Ygb2JqID09PSAnb2JqZWN0JyAmJiB0b1N0cmluZ1RhZyBpbiBvYmopKTsgfVxuXG4vLyBTeW1ib2wgYW5kIEJpZ0ludCBkbyBoYXZlIFN5bWJvbC50b1N0cmluZ1RhZyBieSBzcGVjLCBzbyB0aGF0IGNhbid0IGJlIHVzZWQgdG8gZWxpbWluYXRlIGZhbHNlIHBvc2l0aXZlc1xuZnVuY3Rpb24gaXNTeW1ib2wob2JqKSB7XG4gICAgaWYgKGhhc1NoYW1tZWRTeW1ib2xzKSB7XG4gICAgICAgIHJldHVybiBvYmogJiYgdHlwZW9mIG9iaiA9PT0gJ29iamVjdCcgJiYgb2JqIGluc3RhbmNlb2YgU3ltYm9sO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIG9iaiA9PT0gJ3N5bWJvbCcpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmICghb2JqIHx8IHR5cGVvZiBvYmogIT09ICdvYmplY3QnIHx8ICFzeW1Ub1N0cmluZykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIHN5bVRvU3RyaW5nLmNhbGwob2JqKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBjYXRjaCAoZSkge31cbiAgICByZXR1cm4gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIGlzQmlnSW50KG9iaikge1xuICAgIGlmICghb2JqIHx8IHR5cGVvZiBvYmogIT09ICdvYmplY3QnIHx8ICFiaWdJbnRWYWx1ZU9mKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgYmlnSW50VmFsdWVPZi5jYWxsKG9iaik7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuXG52YXIgaGFzT3duID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSB8fCBmdW5jdGlvbiAoa2V5KSB7IHJldHVybiBrZXkgaW4gdGhpczsgfTtcbmZ1bmN0aW9uIGhhcyhvYmosIGtleSkge1xuICAgIHJldHVybiBoYXNPd24uY2FsbChvYmosIGtleSk7XG59XG5cbmZ1bmN0aW9uIHRvU3RyKG9iaikge1xuICAgIHJldHVybiBvYmplY3RUb1N0cmluZy5jYWxsKG9iaik7XG59XG5cbmZ1bmN0aW9uIG5hbWVPZihmKSB7XG4gICAgaWYgKGYubmFtZSkgeyByZXR1cm4gZi5uYW1lOyB9XG4gICAgdmFyIG0gPSAkbWF0Y2guY2FsbChmdW5jdGlvblRvU3RyaW5nLmNhbGwoZiksIC9eZnVuY3Rpb25cXHMqKFtcXHckXSspLyk7XG4gICAgaWYgKG0pIHsgcmV0dXJuIG1bMV07IH1cbiAgICByZXR1cm4gbnVsbDtcbn1cblxuZnVuY3Rpb24gaW5kZXhPZih4cywgeCkge1xuICAgIGlmICh4cy5pbmRleE9mKSB7IHJldHVybiB4cy5pbmRleE9mKHgpOyB9XG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSB4cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgaWYgKHhzW2ldID09PSB4KSB7IHJldHVybiBpOyB9XG4gICAgfVxuICAgIHJldHVybiAtMTtcbn1cblxuZnVuY3Rpb24gaXNNYXAoeCkge1xuICAgIGlmICghbWFwU2l6ZSB8fCAheCB8fCB0eXBlb2YgeCAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBtYXBTaXplLmNhbGwoeCk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBzZXRTaXplLmNhbGwoeCk7XG4gICAgICAgIH0gY2F0Y2ggKHMpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB4IGluc3RhbmNlb2YgTWFwOyAvLyBjb3JlLWpzIHdvcmthcm91bmQsIHByZS12Mi41LjBcbiAgICB9IGNhdGNoIChlKSB7fVxuICAgIHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gaXNXZWFrTWFwKHgpIHtcbiAgICBpZiAoIXdlYWtNYXBIYXMgfHwgIXggfHwgdHlwZW9mIHggIT09ICdvYmplY3QnKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgd2Vha01hcEhhcy5jYWxsKHgsIHdlYWtNYXBIYXMpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgd2Vha1NldEhhcy5jYWxsKHgsIHdlYWtTZXRIYXMpO1xuICAgICAgICB9IGNhdGNoIChzKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geCBpbnN0YW5jZW9mIFdlYWtNYXA7IC8vIGNvcmUtanMgd29ya2Fyb3VuZCwgcHJlLXYyLjUuMFxuICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuXG5mdW5jdGlvbiBpc1dlYWtSZWYoeCkge1xuICAgIGlmICghd2Vha1JlZkRlcmVmIHx8ICF4IHx8IHR5cGVvZiB4ICE9PSAnb2JqZWN0Jykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIHdlYWtSZWZEZXJlZi5jYWxsKHgpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGNhdGNoIChlKSB7fVxuICAgIHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gaXNTZXQoeCkge1xuICAgIGlmICghc2V0U2l6ZSB8fCAheCB8fCB0eXBlb2YgeCAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBzZXRTaXplLmNhbGwoeCk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBtYXBTaXplLmNhbGwoeCk7XG4gICAgICAgIH0gY2F0Y2ggKG0pIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB4IGluc3RhbmNlb2YgU2V0OyAvLyBjb3JlLWpzIHdvcmthcm91bmQsIHByZS12Mi41LjBcbiAgICB9IGNhdGNoIChlKSB7fVxuICAgIHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gaXNXZWFrU2V0KHgpIHtcbiAgICBpZiAoIXdlYWtTZXRIYXMgfHwgIXggfHwgdHlwZW9mIHggIT09ICdvYmplY3QnKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgd2Vha1NldEhhcy5jYWxsKHgsIHdlYWtTZXRIYXMpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgd2Vha01hcEhhcy5jYWxsKHgsIHdlYWtNYXBIYXMpO1xuICAgICAgICB9IGNhdGNoIChzKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geCBpbnN0YW5jZW9mIFdlYWtTZXQ7IC8vIGNvcmUtanMgd29ya2Fyb3VuZCwgcHJlLXYyLjUuMFxuICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuXG5mdW5jdGlvbiBpc0VsZW1lbnQoeCkge1xuICAgIGlmICgheCB8fCB0eXBlb2YgeCAhPT0gJ29iamVjdCcpIHsgcmV0dXJuIGZhbHNlOyB9XG4gICAgaWYgKHR5cGVvZiBIVE1MRWxlbWVudCAhPT0gJ3VuZGVmaW5lZCcgJiYgeCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gdHlwZW9mIHgubm9kZU5hbWUgPT09ICdzdHJpbmcnICYmIHR5cGVvZiB4LmdldEF0dHJpYnV0ZSA9PT0gJ2Z1bmN0aW9uJztcbn1cblxuZnVuY3Rpb24gaW5zcGVjdFN0cmluZyhzdHIsIG9wdHMpIHtcbiAgICBpZiAoc3RyLmxlbmd0aCA+IG9wdHMubWF4U3RyaW5nTGVuZ3RoKSB7XG4gICAgICAgIHZhciByZW1haW5pbmcgPSBzdHIubGVuZ3RoIC0gb3B0cy5tYXhTdHJpbmdMZW5ndGg7XG4gICAgICAgIHZhciB0cmFpbGVyID0gJy4uLiAnICsgcmVtYWluaW5nICsgJyBtb3JlIGNoYXJhY3RlcicgKyAocmVtYWluaW5nID4gMSA/ICdzJyA6ICcnKTtcbiAgICAgICAgcmV0dXJuIGluc3BlY3RTdHJpbmcoJHNsaWNlLmNhbGwoc3RyLCAwLCBvcHRzLm1heFN0cmluZ0xlbmd0aCksIG9wdHMpICsgdHJhaWxlcjtcbiAgICB9XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnRyb2wtcmVnZXhcbiAgICB2YXIgcyA9ICRyZXBsYWNlLmNhbGwoJHJlcGxhY2UuY2FsbChzdHIsIC8oWydcXFxcXSkvZywgJ1xcXFwkMScpLCAvW1xceDAwLVxceDFmXS9nLCBsb3dieXRlKTtcbiAgICByZXR1cm4gd3JhcFF1b3RlcyhzLCAnc2luZ2xlJywgb3B0cyk7XG59XG5cbmZ1bmN0aW9uIGxvd2J5dGUoYykge1xuICAgIHZhciBuID0gYy5jaGFyQ29kZUF0KDApO1xuICAgIHZhciB4ID0ge1xuICAgICAgICA4OiAnYicsXG4gICAgICAgIDk6ICd0JyxcbiAgICAgICAgMTA6ICduJyxcbiAgICAgICAgMTI6ICdmJyxcbiAgICAgICAgMTM6ICdyJ1xuICAgIH1bbl07XG4gICAgaWYgKHgpIHsgcmV0dXJuICdcXFxcJyArIHg7IH1cbiAgICByZXR1cm4gJ1xcXFx4JyArIChuIDwgMHgxMCA/ICcwJyA6ICcnKSArICR0b1VwcGVyQ2FzZS5jYWxsKG4udG9TdHJpbmcoMTYpKTtcbn1cblxuZnVuY3Rpb24gbWFya0JveGVkKHN0cikge1xuICAgIHJldHVybiAnT2JqZWN0KCcgKyBzdHIgKyAnKSc7XG59XG5cbmZ1bmN0aW9uIHdlYWtDb2xsZWN0aW9uT2YodHlwZSkge1xuICAgIHJldHVybiB0eXBlICsgJyB7ID8gfSc7XG59XG5cbmZ1bmN0aW9uIGNvbGxlY3Rpb25PZih0eXBlLCBzaXplLCBlbnRyaWVzLCBpbmRlbnQpIHtcbiAgICB2YXIgam9pbmVkRW50cmllcyA9IGluZGVudCA/IGluZGVudGVkSm9pbihlbnRyaWVzLCBpbmRlbnQpIDogJGpvaW4uY2FsbChlbnRyaWVzLCAnLCAnKTtcbiAgICByZXR1cm4gdHlwZSArICcgKCcgKyBzaXplICsgJykgeycgKyBqb2luZWRFbnRyaWVzICsgJ30nO1xufVxuXG5mdW5jdGlvbiBzaW5nbGVMaW5lVmFsdWVzKHhzKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB4cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoaW5kZXhPZih4c1tpXSwgJ1xcbicpID49IDApIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gZ2V0SW5kZW50KG9wdHMsIGRlcHRoKSB7XG4gICAgdmFyIGJhc2VJbmRlbnQ7XG4gICAgaWYgKG9wdHMuaW5kZW50ID09PSAnXFx0Jykge1xuICAgICAgICBiYXNlSW5kZW50ID0gJ1xcdCc7XG4gICAgfSBlbHNlIGlmICh0eXBlb2Ygb3B0cy5pbmRlbnQgPT09ICdudW1iZXInICYmIG9wdHMuaW5kZW50ID4gMCkge1xuICAgICAgICBiYXNlSW5kZW50ID0gJGpvaW4uY2FsbChBcnJheShvcHRzLmluZGVudCArIDEpLCAnICcpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBiYXNlOiBiYXNlSW5kZW50LFxuICAgICAgICBwcmV2OiAkam9pbi5jYWxsKEFycmF5KGRlcHRoICsgMSksIGJhc2VJbmRlbnQpXG4gICAgfTtcbn1cblxuZnVuY3Rpb24gaW5kZW50ZWRKb2luKHhzLCBpbmRlbnQpIHtcbiAgICBpZiAoeHMubGVuZ3RoID09PSAwKSB7IHJldHVybiAnJzsgfVxuICAgIHZhciBsaW5lSm9pbmVyID0gJ1xcbicgKyBpbmRlbnQucHJldiArIGluZGVudC5iYXNlO1xuICAgIHJldHVybiBsaW5lSm9pbmVyICsgJGpvaW4uY2FsbCh4cywgJywnICsgbGluZUpvaW5lcikgKyAnXFxuJyArIGluZGVudC5wcmV2O1xufVxuXG5mdW5jdGlvbiBhcnJPYmpLZXlzKG9iaiwgaW5zcGVjdCkge1xuICAgIHZhciBpc0FyciA9IGlzQXJyYXkob2JqKTtcbiAgICB2YXIgeHMgPSBbXTtcbiAgICBpZiAoaXNBcnIpIHtcbiAgICAgICAgeHMubGVuZ3RoID0gb2JqLmxlbmd0aDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvYmoubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHhzW2ldID0gaGFzKG9iaiwgaSkgPyBpbnNwZWN0KG9ialtpXSwgb2JqKSA6ICcnO1xuICAgICAgICB9XG4gICAgfVxuICAgIHZhciBzeW1zID0gdHlwZW9mIGdPUFMgPT09ICdmdW5jdGlvbicgPyBnT1BTKG9iaikgOiBbXTtcbiAgICB2YXIgc3ltTWFwO1xuICAgIGlmIChoYXNTaGFtbWVkU3ltYm9scykge1xuICAgICAgICBzeW1NYXAgPSB7fTtcbiAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBzeW1zLmxlbmd0aDsgaysrKSB7XG4gICAgICAgICAgICBzeW1NYXBbJyQnICsgc3ltc1trXV0gPSBzeW1zW2tdO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZm9yICh2YXIga2V5IGluIG9iaikgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4XG4gICAgICAgIGlmICghaGFzKG9iaiwga2V5KSkgeyBjb250aW51ZTsgfSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4LCBuby1jb250aW51ZVxuICAgICAgICBpZiAoaXNBcnIgJiYgU3RyaW5nKE51bWJlcihrZXkpKSA9PT0ga2V5ICYmIGtleSA8IG9iai5sZW5ndGgpIHsgY29udGludWU7IH0gLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1yZXN0cmljdGVkLXN5bnRheCwgbm8tY29udGludWVcbiAgICAgICAgaWYgKGhhc1NoYW1tZWRTeW1ib2xzICYmIHN5bU1hcFsnJCcgKyBrZXldIGluc3RhbmNlb2YgU3ltYm9sKSB7XG4gICAgICAgICAgICAvLyB0aGlzIGlzIHRvIHByZXZlbnQgc2hhbW1lZCBTeW1ib2xzLCB3aGljaCBhcmUgc3RvcmVkIGFzIHN0cmluZ3MsIGZyb20gYmVpbmcgaW5jbHVkZWQgaW4gdGhlIHN0cmluZyBrZXkgc2VjdGlvblxuICAgICAgICAgICAgY29udGludWU7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tcmVzdHJpY3RlZC1zeW50YXgsIG5vLWNvbnRpbnVlXG4gICAgICAgIH0gZWxzZSBpZiAoJHRlc3QuY2FsbCgvW15cXHckXS8sIGtleSkpIHtcbiAgICAgICAgICAgIHhzLnB1c2goaW5zcGVjdChrZXksIG9iaikgKyAnOiAnICsgaW5zcGVjdChvYmpba2V5XSwgb2JqKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB4cy5wdXNoKGtleSArICc6ICcgKyBpbnNwZWN0KG9ialtrZXldLCBvYmopKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAodHlwZW9mIGdPUFMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBzeW1zLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICBpZiAoaXNFbnVtZXJhYmxlLmNhbGwob2JqLCBzeW1zW2pdKSkge1xuICAgICAgICAgICAgICAgIHhzLnB1c2goJ1snICsgaW5zcGVjdChzeW1zW2pdKSArICddOiAnICsgaW5zcGVjdChvYmpbc3ltc1tqXV0sIG9iaikpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB4cztcbn1cbiIsIi8qISBodHRwczovL210aHMuYmUvcHVueWNvZGUgdjEuNC4xIGJ5IEBtYXRoaWFzICovXG47KGZ1bmN0aW9uKHJvb3QpIHtcblxuXHQvKiogRGV0ZWN0IGZyZWUgdmFyaWFibGVzICovXG5cdHZhciBmcmVlRXhwb3J0cyA9IHR5cGVvZiBleHBvcnRzID09ICdvYmplY3QnICYmIGV4cG9ydHMgJiZcblx0XHQhZXhwb3J0cy5ub2RlVHlwZSAmJiBleHBvcnRzO1xuXHR2YXIgZnJlZU1vZHVsZSA9IHR5cGVvZiBtb2R1bGUgPT0gJ29iamVjdCcgJiYgbW9kdWxlICYmXG5cdFx0IW1vZHVsZS5ub2RlVHlwZSAmJiBtb2R1bGU7XG5cdHZhciBmcmVlR2xvYmFsID0gdHlwZW9mIGdsb2JhbCA9PSAnb2JqZWN0JyAmJiBnbG9iYWw7XG5cdGlmIChcblx0XHRmcmVlR2xvYmFsLmdsb2JhbCA9PT0gZnJlZUdsb2JhbCB8fFxuXHRcdGZyZWVHbG9iYWwud2luZG93ID09PSBmcmVlR2xvYmFsIHx8XG5cdFx0ZnJlZUdsb2JhbC5zZWxmID09PSBmcmVlR2xvYmFsXG5cdCkge1xuXHRcdHJvb3QgPSBmcmVlR2xvYmFsO1xuXHR9XG5cblx0LyoqXG5cdCAqIFRoZSBgcHVueWNvZGVgIG9iamVjdC5cblx0ICogQG5hbWUgcHVueWNvZGVcblx0ICogQHR5cGUgT2JqZWN0XG5cdCAqL1xuXHR2YXIgcHVueWNvZGUsXG5cblx0LyoqIEhpZ2hlc3QgcG9zaXRpdmUgc2lnbmVkIDMyLWJpdCBmbG9hdCB2YWx1ZSAqL1xuXHRtYXhJbnQgPSAyMTQ3NDgzNjQ3LCAvLyBha2EuIDB4N0ZGRkZGRkYgb3IgMl4zMS0xXG5cblx0LyoqIEJvb3RzdHJpbmcgcGFyYW1ldGVycyAqL1xuXHRiYXNlID0gMzYsXG5cdHRNaW4gPSAxLFxuXHR0TWF4ID0gMjYsXG5cdHNrZXcgPSAzOCxcblx0ZGFtcCA9IDcwMCxcblx0aW5pdGlhbEJpYXMgPSA3Mixcblx0aW5pdGlhbE4gPSAxMjgsIC8vIDB4ODBcblx0ZGVsaW1pdGVyID0gJy0nLCAvLyAnXFx4MkQnXG5cblx0LyoqIFJlZ3VsYXIgZXhwcmVzc2lvbnMgKi9cblx0cmVnZXhQdW55Y29kZSA9IC9eeG4tLS8sXG5cdHJlZ2V4Tm9uQVNDSUkgPSAvW15cXHgyMC1cXHg3RV0vLCAvLyB1bnByaW50YWJsZSBBU0NJSSBjaGFycyArIG5vbi1BU0NJSSBjaGFyc1xuXHRyZWdleFNlcGFyYXRvcnMgPSAvW1xceDJFXFx1MzAwMlxcdUZGMEVcXHVGRjYxXS9nLCAvLyBSRkMgMzQ5MCBzZXBhcmF0b3JzXG5cblx0LyoqIEVycm9yIG1lc3NhZ2VzICovXG5cdGVycm9ycyA9IHtcblx0XHQnb3ZlcmZsb3cnOiAnT3ZlcmZsb3c6IGlucHV0IG5lZWRzIHdpZGVyIGludGVnZXJzIHRvIHByb2Nlc3MnLFxuXHRcdCdub3QtYmFzaWMnOiAnSWxsZWdhbCBpbnB1dCA+PSAweDgwIChub3QgYSBiYXNpYyBjb2RlIHBvaW50KScsXG5cdFx0J2ludmFsaWQtaW5wdXQnOiAnSW52YWxpZCBpbnB1dCdcblx0fSxcblxuXHQvKiogQ29udmVuaWVuY2Ugc2hvcnRjdXRzICovXG5cdGJhc2VNaW51c1RNaW4gPSBiYXNlIC0gdE1pbixcblx0Zmxvb3IgPSBNYXRoLmZsb29yLFxuXHRzdHJpbmdGcm9tQ2hhckNvZGUgPSBTdHJpbmcuZnJvbUNoYXJDb2RlLFxuXG5cdC8qKiBUZW1wb3JhcnkgdmFyaWFibGUgKi9cblx0a2V5O1xuXG5cdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdC8qKlxuXHQgKiBBIGdlbmVyaWMgZXJyb3IgdXRpbGl0eSBmdW5jdGlvbi5cblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtTdHJpbmd9IHR5cGUgVGhlIGVycm9yIHR5cGUuXG5cdCAqIEByZXR1cm5zIHtFcnJvcn0gVGhyb3dzIGEgYFJhbmdlRXJyb3JgIHdpdGggdGhlIGFwcGxpY2FibGUgZXJyb3IgbWVzc2FnZS5cblx0ICovXG5cdGZ1bmN0aW9uIGVycm9yKHR5cGUpIHtcblx0XHR0aHJvdyBuZXcgUmFuZ2VFcnJvcihlcnJvcnNbdHlwZV0pO1xuXHR9XG5cblx0LyoqXG5cdCAqIEEgZ2VuZXJpYyBgQXJyYXkjbWFwYCB1dGlsaXR5IGZ1bmN0aW9uLlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gaXRlcmF0ZSBvdmVyLlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayBUaGUgZnVuY3Rpb24gdGhhdCBnZXRzIGNhbGxlZCBmb3IgZXZlcnkgYXJyYXlcblx0ICogaXRlbS5cblx0ICogQHJldHVybnMge0FycmF5fSBBIG5ldyBhcnJheSBvZiB2YWx1ZXMgcmV0dXJuZWQgYnkgdGhlIGNhbGxiYWNrIGZ1bmN0aW9uLlxuXHQgKi9cblx0ZnVuY3Rpb24gbWFwKGFycmF5LCBmbikge1xuXHRcdHZhciBsZW5ndGggPSBhcnJheS5sZW5ndGg7XG5cdFx0dmFyIHJlc3VsdCA9IFtdO1xuXHRcdHdoaWxlIChsZW5ndGgtLSkge1xuXHRcdFx0cmVzdWx0W2xlbmd0aF0gPSBmbihhcnJheVtsZW5ndGhdKTtcblx0XHR9XG5cdFx0cmV0dXJuIHJlc3VsdDtcblx0fVxuXG5cdC8qKlxuXHQgKiBBIHNpbXBsZSBgQXJyYXkjbWFwYC1saWtlIHdyYXBwZXIgdG8gd29yayB3aXRoIGRvbWFpbiBuYW1lIHN0cmluZ3Mgb3IgZW1haWxcblx0ICogYWRkcmVzc2VzLlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge1N0cmluZ30gZG9tYWluIFRoZSBkb21haW4gbmFtZSBvciBlbWFpbCBhZGRyZXNzLlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayBUaGUgZnVuY3Rpb24gdGhhdCBnZXRzIGNhbGxlZCBmb3IgZXZlcnlcblx0ICogY2hhcmFjdGVyLlxuXHQgKiBAcmV0dXJucyB7QXJyYXl9IEEgbmV3IHN0cmluZyBvZiBjaGFyYWN0ZXJzIHJldHVybmVkIGJ5IHRoZSBjYWxsYmFja1xuXHQgKiBmdW5jdGlvbi5cblx0ICovXG5cdGZ1bmN0aW9uIG1hcERvbWFpbihzdHJpbmcsIGZuKSB7XG5cdFx0dmFyIHBhcnRzID0gc3RyaW5nLnNwbGl0KCdAJyk7XG5cdFx0dmFyIHJlc3VsdCA9ICcnO1xuXHRcdGlmIChwYXJ0cy5sZW5ndGggPiAxKSB7XG5cdFx0XHQvLyBJbiBlbWFpbCBhZGRyZXNzZXMsIG9ubHkgdGhlIGRvbWFpbiBuYW1lIHNob3VsZCBiZSBwdW55Y29kZWQuIExlYXZlXG5cdFx0XHQvLyB0aGUgbG9jYWwgcGFydCAoaS5lLiBldmVyeXRoaW5nIHVwIHRvIGBAYCkgaW50YWN0LlxuXHRcdFx0cmVzdWx0ID0gcGFydHNbMF0gKyAnQCc7XG5cdFx0XHRzdHJpbmcgPSBwYXJ0c1sxXTtcblx0XHR9XG5cdFx0Ly8gQXZvaWQgYHNwbGl0KHJlZ2V4KWAgZm9yIElFOCBjb21wYXRpYmlsaXR5LiBTZWUgIzE3LlxuXHRcdHN0cmluZyA9IHN0cmluZy5yZXBsYWNlKHJlZ2V4U2VwYXJhdG9ycywgJ1xceDJFJyk7XG5cdFx0dmFyIGxhYmVscyA9IHN0cmluZy5zcGxpdCgnLicpO1xuXHRcdHZhciBlbmNvZGVkID0gbWFwKGxhYmVscywgZm4pLmpvaW4oJy4nKTtcblx0XHRyZXR1cm4gcmVzdWx0ICsgZW5jb2RlZDtcblx0fVxuXG5cdC8qKlxuXHQgKiBDcmVhdGVzIGFuIGFycmF5IGNvbnRhaW5pbmcgdGhlIG51bWVyaWMgY29kZSBwb2ludHMgb2YgZWFjaCBVbmljb2RlXG5cdCAqIGNoYXJhY3RlciBpbiB0aGUgc3RyaW5nLiBXaGlsZSBKYXZhU2NyaXB0IHVzZXMgVUNTLTIgaW50ZXJuYWxseSxcblx0ICogdGhpcyBmdW5jdGlvbiB3aWxsIGNvbnZlcnQgYSBwYWlyIG9mIHN1cnJvZ2F0ZSBoYWx2ZXMgKGVhY2ggb2Ygd2hpY2hcblx0ICogVUNTLTIgZXhwb3NlcyBhcyBzZXBhcmF0ZSBjaGFyYWN0ZXJzKSBpbnRvIGEgc2luZ2xlIGNvZGUgcG9pbnQsXG5cdCAqIG1hdGNoaW5nIFVURi0xNi5cblx0ICogQHNlZSBgcHVueWNvZGUudWNzMi5lbmNvZGVgXG5cdCAqIEBzZWUgPGh0dHBzOi8vbWF0aGlhc2J5bmVucy5iZS9ub3Rlcy9qYXZhc2NyaXB0LWVuY29kaW5nPlxuXHQgKiBAbWVtYmVyT2YgcHVueWNvZGUudWNzMlxuXHQgKiBAbmFtZSBkZWNvZGVcblx0ICogQHBhcmFtIHtTdHJpbmd9IHN0cmluZyBUaGUgVW5pY29kZSBpbnB1dCBzdHJpbmcgKFVDUy0yKS5cblx0ICogQHJldHVybnMge0FycmF5fSBUaGUgbmV3IGFycmF5IG9mIGNvZGUgcG9pbnRzLlxuXHQgKi9cblx0ZnVuY3Rpb24gdWNzMmRlY29kZShzdHJpbmcpIHtcblx0XHR2YXIgb3V0cHV0ID0gW10sXG5cdFx0ICAgIGNvdW50ZXIgPSAwLFxuXHRcdCAgICBsZW5ndGggPSBzdHJpbmcubGVuZ3RoLFxuXHRcdCAgICB2YWx1ZSxcblx0XHQgICAgZXh0cmE7XG5cdFx0d2hpbGUgKGNvdW50ZXIgPCBsZW5ndGgpIHtcblx0XHRcdHZhbHVlID0gc3RyaW5nLmNoYXJDb2RlQXQoY291bnRlcisrKTtcblx0XHRcdGlmICh2YWx1ZSA+PSAweEQ4MDAgJiYgdmFsdWUgPD0gMHhEQkZGICYmIGNvdW50ZXIgPCBsZW5ndGgpIHtcblx0XHRcdFx0Ly8gaGlnaCBzdXJyb2dhdGUsIGFuZCB0aGVyZSBpcyBhIG5leHQgY2hhcmFjdGVyXG5cdFx0XHRcdGV4dHJhID0gc3RyaW5nLmNoYXJDb2RlQXQoY291bnRlcisrKTtcblx0XHRcdFx0aWYgKChleHRyYSAmIDB4RkMwMCkgPT0gMHhEQzAwKSB7IC8vIGxvdyBzdXJyb2dhdGVcblx0XHRcdFx0XHRvdXRwdXQucHVzaCgoKHZhbHVlICYgMHgzRkYpIDw8IDEwKSArIChleHRyYSAmIDB4M0ZGKSArIDB4MTAwMDApO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdC8vIHVubWF0Y2hlZCBzdXJyb2dhdGU7IG9ubHkgYXBwZW5kIHRoaXMgY29kZSB1bml0LCBpbiBjYXNlIHRoZSBuZXh0XG5cdFx0XHRcdFx0Ly8gY29kZSB1bml0IGlzIHRoZSBoaWdoIHN1cnJvZ2F0ZSBvZiBhIHN1cnJvZ2F0ZSBwYWlyXG5cdFx0XHRcdFx0b3V0cHV0LnB1c2godmFsdWUpO1xuXHRcdFx0XHRcdGNvdW50ZXItLTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0b3V0cHV0LnB1c2godmFsdWUpO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gb3V0cHV0O1xuXHR9XG5cblx0LyoqXG5cdCAqIENyZWF0ZXMgYSBzdHJpbmcgYmFzZWQgb24gYW4gYXJyYXkgb2YgbnVtZXJpYyBjb2RlIHBvaW50cy5cblx0ICogQHNlZSBgcHVueWNvZGUudWNzMi5kZWNvZGVgXG5cdCAqIEBtZW1iZXJPZiBwdW55Y29kZS51Y3MyXG5cdCAqIEBuYW1lIGVuY29kZVxuXHQgKiBAcGFyYW0ge0FycmF5fSBjb2RlUG9pbnRzIFRoZSBhcnJheSBvZiBudW1lcmljIGNvZGUgcG9pbnRzLlxuXHQgKiBAcmV0dXJucyB7U3RyaW5nfSBUaGUgbmV3IFVuaWNvZGUgc3RyaW5nIChVQ1MtMikuXG5cdCAqL1xuXHRmdW5jdGlvbiB1Y3MyZW5jb2RlKGFycmF5KSB7XG5cdFx0cmV0dXJuIG1hcChhcnJheSwgZnVuY3Rpb24odmFsdWUpIHtcblx0XHRcdHZhciBvdXRwdXQgPSAnJztcblx0XHRcdGlmICh2YWx1ZSA+IDB4RkZGRikge1xuXHRcdFx0XHR2YWx1ZSAtPSAweDEwMDAwO1xuXHRcdFx0XHRvdXRwdXQgKz0gc3RyaW5nRnJvbUNoYXJDb2RlKHZhbHVlID4+PiAxMCAmIDB4M0ZGIHwgMHhEODAwKTtcblx0XHRcdFx0dmFsdWUgPSAweERDMDAgfCB2YWx1ZSAmIDB4M0ZGO1xuXHRcdFx0fVxuXHRcdFx0b3V0cHV0ICs9IHN0cmluZ0Zyb21DaGFyQ29kZSh2YWx1ZSk7XG5cdFx0XHRyZXR1cm4gb3V0cHV0O1xuXHRcdH0pLmpvaW4oJycpO1xuXHR9XG5cblx0LyoqXG5cdCAqIENvbnZlcnRzIGEgYmFzaWMgY29kZSBwb2ludCBpbnRvIGEgZGlnaXQvaW50ZWdlci5cblx0ICogQHNlZSBgZGlnaXRUb0Jhc2ljKClgXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBjb2RlUG9pbnQgVGhlIGJhc2ljIG51bWVyaWMgY29kZSBwb2ludCB2YWx1ZS5cblx0ICogQHJldHVybnMge051bWJlcn0gVGhlIG51bWVyaWMgdmFsdWUgb2YgYSBiYXNpYyBjb2RlIHBvaW50IChmb3IgdXNlIGluXG5cdCAqIHJlcHJlc2VudGluZyBpbnRlZ2VycykgaW4gdGhlIHJhbmdlIGAwYCB0byBgYmFzZSAtIDFgLCBvciBgYmFzZWAgaWZcblx0ICogdGhlIGNvZGUgcG9pbnQgZG9lcyBub3QgcmVwcmVzZW50IGEgdmFsdWUuXG5cdCAqL1xuXHRmdW5jdGlvbiBiYXNpY1RvRGlnaXQoY29kZVBvaW50KSB7XG5cdFx0aWYgKGNvZGVQb2ludCAtIDQ4IDwgMTApIHtcblx0XHRcdHJldHVybiBjb2RlUG9pbnQgLSAyMjtcblx0XHR9XG5cdFx0aWYgKGNvZGVQb2ludCAtIDY1IDwgMjYpIHtcblx0XHRcdHJldHVybiBjb2RlUG9pbnQgLSA2NTtcblx0XHR9XG5cdFx0aWYgKGNvZGVQb2ludCAtIDk3IDwgMjYpIHtcblx0XHRcdHJldHVybiBjb2RlUG9pbnQgLSA5Nztcblx0XHR9XG5cdFx0cmV0dXJuIGJhc2U7XG5cdH1cblxuXHQvKipcblx0ICogQ29udmVydHMgYSBkaWdpdC9pbnRlZ2VyIGludG8gYSBiYXNpYyBjb2RlIHBvaW50LlxuXHQgKiBAc2VlIGBiYXNpY1RvRGlnaXQoKWBcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtOdW1iZXJ9IGRpZ2l0IFRoZSBudW1lcmljIHZhbHVlIG9mIGEgYmFzaWMgY29kZSBwb2ludC5cblx0ICogQHJldHVybnMge051bWJlcn0gVGhlIGJhc2ljIGNvZGUgcG9pbnQgd2hvc2UgdmFsdWUgKHdoZW4gdXNlZCBmb3Jcblx0ICogcmVwcmVzZW50aW5nIGludGVnZXJzKSBpcyBgZGlnaXRgLCB3aGljaCBuZWVkcyB0byBiZSBpbiB0aGUgcmFuZ2Vcblx0ICogYDBgIHRvIGBiYXNlIC0gMWAuIElmIGBmbGFnYCBpcyBub24temVybywgdGhlIHVwcGVyY2FzZSBmb3JtIGlzXG5cdCAqIHVzZWQ7IGVsc2UsIHRoZSBsb3dlcmNhc2UgZm9ybSBpcyB1c2VkLiBUaGUgYmVoYXZpb3IgaXMgdW5kZWZpbmVkXG5cdCAqIGlmIGBmbGFnYCBpcyBub24temVybyBhbmQgYGRpZ2l0YCBoYXMgbm8gdXBwZXJjYXNlIGZvcm0uXG5cdCAqL1xuXHRmdW5jdGlvbiBkaWdpdFRvQmFzaWMoZGlnaXQsIGZsYWcpIHtcblx0XHQvLyAgMC4uMjUgbWFwIHRvIEFTQ0lJIGEuLnogb3IgQS4uWlxuXHRcdC8vIDI2Li4zNSBtYXAgdG8gQVNDSUkgMC4uOVxuXHRcdHJldHVybiBkaWdpdCArIDIyICsgNzUgKiAoZGlnaXQgPCAyNikgLSAoKGZsYWcgIT0gMCkgPDwgNSk7XG5cdH1cblxuXHQvKipcblx0ICogQmlhcyBhZGFwdGF0aW9uIGZ1bmN0aW9uIGFzIHBlciBzZWN0aW9uIDMuNCBvZiBSRkMgMzQ5Mi5cblx0ICogaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzM0OTIjc2VjdGlvbi0zLjRcblx0ICogQHByaXZhdGVcblx0ICovXG5cdGZ1bmN0aW9uIGFkYXB0KGRlbHRhLCBudW1Qb2ludHMsIGZpcnN0VGltZSkge1xuXHRcdHZhciBrID0gMDtcblx0XHRkZWx0YSA9IGZpcnN0VGltZSA/IGZsb29yKGRlbHRhIC8gZGFtcCkgOiBkZWx0YSA+PiAxO1xuXHRcdGRlbHRhICs9IGZsb29yKGRlbHRhIC8gbnVtUG9pbnRzKTtcblx0XHRmb3IgKC8qIG5vIGluaXRpYWxpemF0aW9uICovOyBkZWx0YSA+IGJhc2VNaW51c1RNaW4gKiB0TWF4ID4+IDE7IGsgKz0gYmFzZSkge1xuXHRcdFx0ZGVsdGEgPSBmbG9vcihkZWx0YSAvIGJhc2VNaW51c1RNaW4pO1xuXHRcdH1cblx0XHRyZXR1cm4gZmxvb3IoayArIChiYXNlTWludXNUTWluICsgMSkgKiBkZWx0YSAvIChkZWx0YSArIHNrZXcpKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBDb252ZXJ0cyBhIFB1bnljb2RlIHN0cmluZyBvZiBBU0NJSS1vbmx5IHN5bWJvbHMgdG8gYSBzdHJpbmcgb2YgVW5pY29kZVxuXHQgKiBzeW1ib2xzLlxuXHQgKiBAbWVtYmVyT2YgcHVueWNvZGVcblx0ICogQHBhcmFtIHtTdHJpbmd9IGlucHV0IFRoZSBQdW55Y29kZSBzdHJpbmcgb2YgQVNDSUktb25seSBzeW1ib2xzLlxuXHQgKiBAcmV0dXJucyB7U3RyaW5nfSBUaGUgcmVzdWx0aW5nIHN0cmluZyBvZiBVbmljb2RlIHN5bWJvbHMuXG5cdCAqL1xuXHRmdW5jdGlvbiBkZWNvZGUoaW5wdXQpIHtcblx0XHQvLyBEb24ndCB1c2UgVUNTLTJcblx0XHR2YXIgb3V0cHV0ID0gW10sXG5cdFx0ICAgIGlucHV0TGVuZ3RoID0gaW5wdXQubGVuZ3RoLFxuXHRcdCAgICBvdXQsXG5cdFx0ICAgIGkgPSAwLFxuXHRcdCAgICBuID0gaW5pdGlhbE4sXG5cdFx0ICAgIGJpYXMgPSBpbml0aWFsQmlhcyxcblx0XHQgICAgYmFzaWMsXG5cdFx0ICAgIGosXG5cdFx0ICAgIGluZGV4LFxuXHRcdCAgICBvbGRpLFxuXHRcdCAgICB3LFxuXHRcdCAgICBrLFxuXHRcdCAgICBkaWdpdCxcblx0XHQgICAgdCxcblx0XHQgICAgLyoqIENhY2hlZCBjYWxjdWxhdGlvbiByZXN1bHRzICovXG5cdFx0ICAgIGJhc2VNaW51c1Q7XG5cblx0XHQvLyBIYW5kbGUgdGhlIGJhc2ljIGNvZGUgcG9pbnRzOiBsZXQgYGJhc2ljYCBiZSB0aGUgbnVtYmVyIG9mIGlucHV0IGNvZGVcblx0XHQvLyBwb2ludHMgYmVmb3JlIHRoZSBsYXN0IGRlbGltaXRlciwgb3IgYDBgIGlmIHRoZXJlIGlzIG5vbmUsIHRoZW4gY29weVxuXHRcdC8vIHRoZSBmaXJzdCBiYXNpYyBjb2RlIHBvaW50cyB0byB0aGUgb3V0cHV0LlxuXG5cdFx0YmFzaWMgPSBpbnB1dC5sYXN0SW5kZXhPZihkZWxpbWl0ZXIpO1xuXHRcdGlmIChiYXNpYyA8IDApIHtcblx0XHRcdGJhc2ljID0gMDtcblx0XHR9XG5cblx0XHRmb3IgKGogPSAwOyBqIDwgYmFzaWM7ICsraikge1xuXHRcdFx0Ly8gaWYgaXQncyBub3QgYSBiYXNpYyBjb2RlIHBvaW50XG5cdFx0XHRpZiAoaW5wdXQuY2hhckNvZGVBdChqKSA+PSAweDgwKSB7XG5cdFx0XHRcdGVycm9yKCdub3QtYmFzaWMnKTtcblx0XHRcdH1cblx0XHRcdG91dHB1dC5wdXNoKGlucHV0LmNoYXJDb2RlQXQoaikpO1xuXHRcdH1cblxuXHRcdC8vIE1haW4gZGVjb2RpbmcgbG9vcDogc3RhcnQganVzdCBhZnRlciB0aGUgbGFzdCBkZWxpbWl0ZXIgaWYgYW55IGJhc2ljIGNvZGVcblx0XHQvLyBwb2ludHMgd2VyZSBjb3BpZWQ7IHN0YXJ0IGF0IHRoZSBiZWdpbm5pbmcgb3RoZXJ3aXNlLlxuXG5cdFx0Zm9yIChpbmRleCA9IGJhc2ljID4gMCA/IGJhc2ljICsgMSA6IDA7IGluZGV4IDwgaW5wdXRMZW5ndGg7IC8qIG5vIGZpbmFsIGV4cHJlc3Npb24gKi8pIHtcblxuXHRcdFx0Ly8gYGluZGV4YCBpcyB0aGUgaW5kZXggb2YgdGhlIG5leHQgY2hhcmFjdGVyIHRvIGJlIGNvbnN1bWVkLlxuXHRcdFx0Ly8gRGVjb2RlIGEgZ2VuZXJhbGl6ZWQgdmFyaWFibGUtbGVuZ3RoIGludGVnZXIgaW50byBgZGVsdGFgLFxuXHRcdFx0Ly8gd2hpY2ggZ2V0cyBhZGRlZCB0byBgaWAuIFRoZSBvdmVyZmxvdyBjaGVja2luZyBpcyBlYXNpZXJcblx0XHRcdC8vIGlmIHdlIGluY3JlYXNlIGBpYCBhcyB3ZSBnbywgdGhlbiBzdWJ0cmFjdCBvZmYgaXRzIHN0YXJ0aW5nXG5cdFx0XHQvLyB2YWx1ZSBhdCB0aGUgZW5kIHRvIG9idGFpbiBgZGVsdGFgLlxuXHRcdFx0Zm9yIChvbGRpID0gaSwgdyA9IDEsIGsgPSBiYXNlOyAvKiBubyBjb25kaXRpb24gKi87IGsgKz0gYmFzZSkge1xuXG5cdFx0XHRcdGlmIChpbmRleCA+PSBpbnB1dExlbmd0aCkge1xuXHRcdFx0XHRcdGVycm9yKCdpbnZhbGlkLWlucHV0Jyk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRkaWdpdCA9IGJhc2ljVG9EaWdpdChpbnB1dC5jaGFyQ29kZUF0KGluZGV4KyspKTtcblxuXHRcdFx0XHRpZiAoZGlnaXQgPj0gYmFzZSB8fCBkaWdpdCA+IGZsb29yKChtYXhJbnQgLSBpKSAvIHcpKSB7XG5cdFx0XHRcdFx0ZXJyb3IoJ292ZXJmbG93Jyk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpICs9IGRpZ2l0ICogdztcblx0XHRcdFx0dCA9IGsgPD0gYmlhcyA/IHRNaW4gOiAoayA+PSBiaWFzICsgdE1heCA/IHRNYXggOiBrIC0gYmlhcyk7XG5cblx0XHRcdFx0aWYgKGRpZ2l0IDwgdCkge1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0YmFzZU1pbnVzVCA9IGJhc2UgLSB0O1xuXHRcdFx0XHRpZiAodyA+IGZsb29yKG1heEludCAvIGJhc2VNaW51c1QpKSB7XG5cdFx0XHRcdFx0ZXJyb3IoJ292ZXJmbG93Jyk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHR3ICo9IGJhc2VNaW51c1Q7XG5cblx0XHRcdH1cblxuXHRcdFx0b3V0ID0gb3V0cHV0Lmxlbmd0aCArIDE7XG5cdFx0XHRiaWFzID0gYWRhcHQoaSAtIG9sZGksIG91dCwgb2xkaSA9PSAwKTtcblxuXHRcdFx0Ly8gYGlgIHdhcyBzdXBwb3NlZCB0byB3cmFwIGFyb3VuZCBmcm9tIGBvdXRgIHRvIGAwYCxcblx0XHRcdC8vIGluY3JlbWVudGluZyBgbmAgZWFjaCB0aW1lLCBzbyB3ZSdsbCBmaXggdGhhdCBub3c6XG5cdFx0XHRpZiAoZmxvb3IoaSAvIG91dCkgPiBtYXhJbnQgLSBuKSB7XG5cdFx0XHRcdGVycm9yKCdvdmVyZmxvdycpO1xuXHRcdFx0fVxuXG5cdFx0XHRuICs9IGZsb29yKGkgLyBvdXQpO1xuXHRcdFx0aSAlPSBvdXQ7XG5cblx0XHRcdC8vIEluc2VydCBgbmAgYXQgcG9zaXRpb24gYGlgIG9mIHRoZSBvdXRwdXRcblx0XHRcdG91dHB1dC5zcGxpY2UoaSsrLCAwLCBuKTtcblxuXHRcdH1cblxuXHRcdHJldHVybiB1Y3MyZW5jb2RlKG91dHB1dCk7XG5cdH1cblxuXHQvKipcblx0ICogQ29udmVydHMgYSBzdHJpbmcgb2YgVW5pY29kZSBzeW1ib2xzIChlLmcuIGEgZG9tYWluIG5hbWUgbGFiZWwpIHRvIGFcblx0ICogUHVueWNvZGUgc3RyaW5nIG9mIEFTQ0lJLW9ubHkgc3ltYm9scy5cblx0ICogQG1lbWJlck9mIHB1bnljb2RlXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBpbnB1dCBUaGUgc3RyaW5nIG9mIFVuaWNvZGUgc3ltYm9scy5cblx0ICogQHJldHVybnMge1N0cmluZ30gVGhlIHJlc3VsdGluZyBQdW55Y29kZSBzdHJpbmcgb2YgQVNDSUktb25seSBzeW1ib2xzLlxuXHQgKi9cblx0ZnVuY3Rpb24gZW5jb2RlKGlucHV0KSB7XG5cdFx0dmFyIG4sXG5cdFx0ICAgIGRlbHRhLFxuXHRcdCAgICBoYW5kbGVkQ1BDb3VudCxcblx0XHQgICAgYmFzaWNMZW5ndGgsXG5cdFx0ICAgIGJpYXMsXG5cdFx0ICAgIGosXG5cdFx0ICAgIG0sXG5cdFx0ICAgIHEsXG5cdFx0ICAgIGssXG5cdFx0ICAgIHQsXG5cdFx0ICAgIGN1cnJlbnRWYWx1ZSxcblx0XHQgICAgb3V0cHV0ID0gW10sXG5cdFx0ICAgIC8qKiBgaW5wdXRMZW5ndGhgIHdpbGwgaG9sZCB0aGUgbnVtYmVyIG9mIGNvZGUgcG9pbnRzIGluIGBpbnB1dGAuICovXG5cdFx0ICAgIGlucHV0TGVuZ3RoLFxuXHRcdCAgICAvKiogQ2FjaGVkIGNhbGN1bGF0aW9uIHJlc3VsdHMgKi9cblx0XHQgICAgaGFuZGxlZENQQ291bnRQbHVzT25lLFxuXHRcdCAgICBiYXNlTWludXNULFxuXHRcdCAgICBxTWludXNUO1xuXG5cdFx0Ly8gQ29udmVydCB0aGUgaW5wdXQgaW4gVUNTLTIgdG8gVW5pY29kZVxuXHRcdGlucHV0ID0gdWNzMmRlY29kZShpbnB1dCk7XG5cblx0XHQvLyBDYWNoZSB0aGUgbGVuZ3RoXG5cdFx0aW5wdXRMZW5ndGggPSBpbnB1dC5sZW5ndGg7XG5cblx0XHQvLyBJbml0aWFsaXplIHRoZSBzdGF0ZVxuXHRcdG4gPSBpbml0aWFsTjtcblx0XHRkZWx0YSA9IDA7XG5cdFx0YmlhcyA9IGluaXRpYWxCaWFzO1xuXG5cdFx0Ly8gSGFuZGxlIHRoZSBiYXNpYyBjb2RlIHBvaW50c1xuXHRcdGZvciAoaiA9IDA7IGogPCBpbnB1dExlbmd0aDsgKytqKSB7XG5cdFx0XHRjdXJyZW50VmFsdWUgPSBpbnB1dFtqXTtcblx0XHRcdGlmIChjdXJyZW50VmFsdWUgPCAweDgwKSB7XG5cdFx0XHRcdG91dHB1dC5wdXNoKHN0cmluZ0Zyb21DaGFyQ29kZShjdXJyZW50VmFsdWUpKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRoYW5kbGVkQ1BDb3VudCA9IGJhc2ljTGVuZ3RoID0gb3V0cHV0Lmxlbmd0aDtcblxuXHRcdC8vIGBoYW5kbGVkQ1BDb3VudGAgaXMgdGhlIG51bWJlciBvZiBjb2RlIHBvaW50cyB0aGF0IGhhdmUgYmVlbiBoYW5kbGVkO1xuXHRcdC8vIGBiYXNpY0xlbmd0aGAgaXMgdGhlIG51bWJlciBvZiBiYXNpYyBjb2RlIHBvaW50cy5cblxuXHRcdC8vIEZpbmlzaCB0aGUgYmFzaWMgc3RyaW5nIC0gaWYgaXQgaXMgbm90IGVtcHR5IC0gd2l0aCBhIGRlbGltaXRlclxuXHRcdGlmIChiYXNpY0xlbmd0aCkge1xuXHRcdFx0b3V0cHV0LnB1c2goZGVsaW1pdGVyKTtcblx0XHR9XG5cblx0XHQvLyBNYWluIGVuY29kaW5nIGxvb3A6XG5cdFx0d2hpbGUgKGhhbmRsZWRDUENvdW50IDwgaW5wdXRMZW5ndGgpIHtcblxuXHRcdFx0Ly8gQWxsIG5vbi1iYXNpYyBjb2RlIHBvaW50cyA8IG4gaGF2ZSBiZWVuIGhhbmRsZWQgYWxyZWFkeS4gRmluZCB0aGUgbmV4dFxuXHRcdFx0Ly8gbGFyZ2VyIG9uZTpcblx0XHRcdGZvciAobSA9IG1heEludCwgaiA9IDA7IGogPCBpbnB1dExlbmd0aDsgKytqKSB7XG5cdFx0XHRcdGN1cnJlbnRWYWx1ZSA9IGlucHV0W2pdO1xuXHRcdFx0XHRpZiAoY3VycmVudFZhbHVlID49IG4gJiYgY3VycmVudFZhbHVlIDwgbSkge1xuXHRcdFx0XHRcdG0gPSBjdXJyZW50VmFsdWU7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gSW5jcmVhc2UgYGRlbHRhYCBlbm91Z2ggdG8gYWR2YW5jZSB0aGUgZGVjb2RlcidzIDxuLGk+IHN0YXRlIHRvIDxtLDA+LFxuXHRcdFx0Ly8gYnV0IGd1YXJkIGFnYWluc3Qgb3ZlcmZsb3dcblx0XHRcdGhhbmRsZWRDUENvdW50UGx1c09uZSA9IGhhbmRsZWRDUENvdW50ICsgMTtcblx0XHRcdGlmIChtIC0gbiA+IGZsb29yKChtYXhJbnQgLSBkZWx0YSkgLyBoYW5kbGVkQ1BDb3VudFBsdXNPbmUpKSB7XG5cdFx0XHRcdGVycm9yKCdvdmVyZmxvdycpO1xuXHRcdFx0fVxuXG5cdFx0XHRkZWx0YSArPSAobSAtIG4pICogaGFuZGxlZENQQ291bnRQbHVzT25lO1xuXHRcdFx0biA9IG07XG5cblx0XHRcdGZvciAoaiA9IDA7IGogPCBpbnB1dExlbmd0aDsgKytqKSB7XG5cdFx0XHRcdGN1cnJlbnRWYWx1ZSA9IGlucHV0W2pdO1xuXG5cdFx0XHRcdGlmIChjdXJyZW50VmFsdWUgPCBuICYmICsrZGVsdGEgPiBtYXhJbnQpIHtcblx0XHRcdFx0XHRlcnJvcignb3ZlcmZsb3cnKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmIChjdXJyZW50VmFsdWUgPT0gbikge1xuXHRcdFx0XHRcdC8vIFJlcHJlc2VudCBkZWx0YSBhcyBhIGdlbmVyYWxpemVkIHZhcmlhYmxlLWxlbmd0aCBpbnRlZ2VyXG5cdFx0XHRcdFx0Zm9yIChxID0gZGVsdGEsIGsgPSBiYXNlOyAvKiBubyBjb25kaXRpb24gKi87IGsgKz0gYmFzZSkge1xuXHRcdFx0XHRcdFx0dCA9IGsgPD0gYmlhcyA/IHRNaW4gOiAoayA+PSBiaWFzICsgdE1heCA/IHRNYXggOiBrIC0gYmlhcyk7XG5cdFx0XHRcdFx0XHRpZiAocSA8IHQpIHtcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRxTWludXNUID0gcSAtIHQ7XG5cdFx0XHRcdFx0XHRiYXNlTWludXNUID0gYmFzZSAtIHQ7XG5cdFx0XHRcdFx0XHRvdXRwdXQucHVzaChcblx0XHRcdFx0XHRcdFx0c3RyaW5nRnJvbUNoYXJDb2RlKGRpZ2l0VG9CYXNpYyh0ICsgcU1pbnVzVCAlIGJhc2VNaW51c1QsIDApKVxuXHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdHEgPSBmbG9vcihxTWludXNUIC8gYmFzZU1pbnVzVCk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0b3V0cHV0LnB1c2goc3RyaW5nRnJvbUNoYXJDb2RlKGRpZ2l0VG9CYXNpYyhxLCAwKSkpO1xuXHRcdFx0XHRcdGJpYXMgPSBhZGFwdChkZWx0YSwgaGFuZGxlZENQQ291bnRQbHVzT25lLCBoYW5kbGVkQ1BDb3VudCA9PSBiYXNpY0xlbmd0aCk7XG5cdFx0XHRcdFx0ZGVsdGEgPSAwO1xuXHRcdFx0XHRcdCsraGFuZGxlZENQQ291bnQ7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0KytkZWx0YTtcblx0XHRcdCsrbjtcblxuXHRcdH1cblx0XHRyZXR1cm4gb3V0cHV0LmpvaW4oJycpO1xuXHR9XG5cblx0LyoqXG5cdCAqIENvbnZlcnRzIGEgUHVueWNvZGUgc3RyaW5nIHJlcHJlc2VudGluZyBhIGRvbWFpbiBuYW1lIG9yIGFuIGVtYWlsIGFkZHJlc3Ncblx0ICogdG8gVW5pY29kZS4gT25seSB0aGUgUHVueWNvZGVkIHBhcnRzIG9mIHRoZSBpbnB1dCB3aWxsIGJlIGNvbnZlcnRlZCwgaS5lLlxuXHQgKiBpdCBkb2Vzbid0IG1hdHRlciBpZiB5b3UgY2FsbCBpdCBvbiBhIHN0cmluZyB0aGF0IGhhcyBhbHJlYWR5IGJlZW5cblx0ICogY29udmVydGVkIHRvIFVuaWNvZGUuXG5cdCAqIEBtZW1iZXJPZiBwdW55Y29kZVxuXHQgKiBAcGFyYW0ge1N0cmluZ30gaW5wdXQgVGhlIFB1bnljb2RlZCBkb21haW4gbmFtZSBvciBlbWFpbCBhZGRyZXNzIHRvXG5cdCAqIGNvbnZlcnQgdG8gVW5pY29kZS5cblx0ICogQHJldHVybnMge1N0cmluZ30gVGhlIFVuaWNvZGUgcmVwcmVzZW50YXRpb24gb2YgdGhlIGdpdmVuIFB1bnljb2RlXG5cdCAqIHN0cmluZy5cblx0ICovXG5cdGZ1bmN0aW9uIHRvVW5pY29kZShpbnB1dCkge1xuXHRcdHJldHVybiBtYXBEb21haW4oaW5wdXQsIGZ1bmN0aW9uKHN0cmluZykge1xuXHRcdFx0cmV0dXJuIHJlZ2V4UHVueWNvZGUudGVzdChzdHJpbmcpXG5cdFx0XHRcdD8gZGVjb2RlKHN0cmluZy5zbGljZSg0KS50b0xvd2VyQ2FzZSgpKVxuXHRcdFx0XHQ6IHN0cmluZztcblx0XHR9KTtcblx0fVxuXG5cdC8qKlxuXHQgKiBDb252ZXJ0cyBhIFVuaWNvZGUgc3RyaW5nIHJlcHJlc2VudGluZyBhIGRvbWFpbiBuYW1lIG9yIGFuIGVtYWlsIGFkZHJlc3MgdG9cblx0ICogUHVueWNvZGUuIE9ubHkgdGhlIG5vbi1BU0NJSSBwYXJ0cyBvZiB0aGUgZG9tYWluIG5hbWUgd2lsbCBiZSBjb252ZXJ0ZWQsXG5cdCAqIGkuZS4gaXQgZG9lc24ndCBtYXR0ZXIgaWYgeW91IGNhbGwgaXQgd2l0aCBhIGRvbWFpbiB0aGF0J3MgYWxyZWFkeSBpblxuXHQgKiBBU0NJSS5cblx0ICogQG1lbWJlck9mIHB1bnljb2RlXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBpbnB1dCBUaGUgZG9tYWluIG5hbWUgb3IgZW1haWwgYWRkcmVzcyB0byBjb252ZXJ0LCBhcyBhXG5cdCAqIFVuaWNvZGUgc3RyaW5nLlxuXHQgKiBAcmV0dXJucyB7U3RyaW5nfSBUaGUgUHVueWNvZGUgcmVwcmVzZW50YXRpb24gb2YgdGhlIGdpdmVuIGRvbWFpbiBuYW1lIG9yXG5cdCAqIGVtYWlsIGFkZHJlc3MuXG5cdCAqL1xuXHRmdW5jdGlvbiB0b0FTQ0lJKGlucHV0KSB7XG5cdFx0cmV0dXJuIG1hcERvbWFpbihpbnB1dCwgZnVuY3Rpb24oc3RyaW5nKSB7XG5cdFx0XHRyZXR1cm4gcmVnZXhOb25BU0NJSS50ZXN0KHN0cmluZylcblx0XHRcdFx0PyAneG4tLScgKyBlbmNvZGUoc3RyaW5nKVxuXHRcdFx0XHQ6IHN0cmluZztcblx0XHR9KTtcblx0fVxuXG5cdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdC8qKiBEZWZpbmUgdGhlIHB1YmxpYyBBUEkgKi9cblx0cHVueWNvZGUgPSB7XG5cdFx0LyoqXG5cdFx0ICogQSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBjdXJyZW50IFB1bnljb2RlLmpzIHZlcnNpb24gbnVtYmVyLlxuXHRcdCAqIEBtZW1iZXJPZiBwdW55Y29kZVxuXHRcdCAqIEB0eXBlIFN0cmluZ1xuXHRcdCAqL1xuXHRcdCd2ZXJzaW9uJzogJzEuNC4xJyxcblx0XHQvKipcblx0XHQgKiBBbiBvYmplY3Qgb2YgbWV0aG9kcyB0byBjb252ZXJ0IGZyb20gSmF2YVNjcmlwdCdzIGludGVybmFsIGNoYXJhY3RlclxuXHRcdCAqIHJlcHJlc2VudGF0aW9uIChVQ1MtMikgdG8gVW5pY29kZSBjb2RlIHBvaW50cywgYW5kIGJhY2suXG5cdFx0ICogQHNlZSA8aHR0cHM6Ly9tYXRoaWFzYnluZW5zLmJlL25vdGVzL2phdmFzY3JpcHQtZW5jb2Rpbmc+XG5cdFx0ICogQG1lbWJlck9mIHB1bnljb2RlXG5cdFx0ICogQHR5cGUgT2JqZWN0XG5cdFx0ICovXG5cdFx0J3VjczInOiB7XG5cdFx0XHQnZGVjb2RlJzogdWNzMmRlY29kZSxcblx0XHRcdCdlbmNvZGUnOiB1Y3MyZW5jb2RlXG5cdFx0fSxcblx0XHQnZGVjb2RlJzogZGVjb2RlLFxuXHRcdCdlbmNvZGUnOiBlbmNvZGUsXG5cdFx0J3RvQVNDSUknOiB0b0FTQ0lJLFxuXHRcdCd0b1VuaWNvZGUnOiB0b1VuaWNvZGVcblx0fTtcblxuXHQvKiogRXhwb3NlIGBwdW55Y29kZWAgKi9cblx0Ly8gU29tZSBBTUQgYnVpbGQgb3B0aW1pemVycywgbGlrZSByLmpzLCBjaGVjayBmb3Igc3BlY2lmaWMgY29uZGl0aW9uIHBhdHRlcm5zXG5cdC8vIGxpa2UgdGhlIGZvbGxvd2luZzpcblx0aWYgKFxuXHRcdHR5cGVvZiBkZWZpbmUgPT0gJ2Z1bmN0aW9uJyAmJlxuXHRcdHR5cGVvZiBkZWZpbmUuYW1kID09ICdvYmplY3QnICYmXG5cdFx0ZGVmaW5lLmFtZFxuXHQpIHtcblx0XHRkZWZpbmUoJ3B1bnljb2RlJywgZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4gcHVueWNvZGU7XG5cdFx0fSk7XG5cdH0gZWxzZSBpZiAoZnJlZUV4cG9ydHMgJiYgZnJlZU1vZHVsZSkge1xuXHRcdGlmIChtb2R1bGUuZXhwb3J0cyA9PSBmcmVlRXhwb3J0cykge1xuXHRcdFx0Ly8gaW4gTm9kZS5qcywgaW8uanMsIG9yIFJpbmdvSlMgdjAuOC4wK1xuXHRcdFx0ZnJlZU1vZHVsZS5leHBvcnRzID0gcHVueWNvZGU7XG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIGluIE5hcndoYWwgb3IgUmluZ29KUyB2MC43LjAtXG5cdFx0XHRmb3IgKGtleSBpbiBwdW55Y29kZSkge1xuXHRcdFx0XHRwdW55Y29kZS5oYXNPd25Qcm9wZXJ0eShrZXkpICYmIChmcmVlRXhwb3J0c1trZXldID0gcHVueWNvZGVba2V5XSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9IGVsc2Uge1xuXHRcdC8vIGluIFJoaW5vIG9yIGEgd2ViIGJyb3dzZXJcblx0XHRyb290LnB1bnljb2RlID0gcHVueWNvZGU7XG5cdH1cblxufSh0aGlzKSk7XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBHZXRJbnRyaW5zaWMgPSByZXF1aXJlKCdnZXQtaW50cmluc2ljJyk7XG52YXIgZGVmaW5lID0gcmVxdWlyZSgnZGVmaW5lLWRhdGEtcHJvcGVydHknKTtcbnZhciBoYXNEZXNjcmlwdG9ycyA9IHJlcXVpcmUoJ2hhcy1wcm9wZXJ0eS1kZXNjcmlwdG9ycycpKCk7XG52YXIgZ09QRCA9IHJlcXVpcmUoJ2dvcGQnKTtcblxudmFyICRUeXBlRXJyb3IgPSByZXF1aXJlKCdlcy1lcnJvcnMvdHlwZScpO1xudmFyICRmbG9vciA9IEdldEludHJpbnNpYygnJU1hdGguZmxvb3IlJyk7XG5cbi8qKiBAdHlwZSB7aW1wb3J0KCcuJyl9ICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHNldEZ1bmN0aW9uTGVuZ3RoKGZuLCBsZW5ndGgpIHtcblx0aWYgKHR5cGVvZiBmbiAhPT0gJ2Z1bmN0aW9uJykge1xuXHRcdHRocm93IG5ldyAkVHlwZUVycm9yKCdgZm5gIGlzIG5vdCBhIGZ1bmN0aW9uJyk7XG5cdH1cblx0aWYgKHR5cGVvZiBsZW5ndGggIT09ICdudW1iZXInIHx8IGxlbmd0aCA8IDAgfHwgbGVuZ3RoID4gMHhGRkZGRkZGRiB8fCAkZmxvb3IobGVuZ3RoKSAhPT0gbGVuZ3RoKSB7XG5cdFx0dGhyb3cgbmV3ICRUeXBlRXJyb3IoJ2BsZW5ndGhgIG11c3QgYmUgYSBwb3NpdGl2ZSAzMi1iaXQgaW50ZWdlcicpO1xuXHR9XG5cblx0dmFyIGxvb3NlID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgISFhcmd1bWVudHNbMl07XG5cblx0dmFyIGZ1bmN0aW9uTGVuZ3RoSXNDb25maWd1cmFibGUgPSB0cnVlO1xuXHR2YXIgZnVuY3Rpb25MZW5ndGhJc1dyaXRhYmxlID0gdHJ1ZTtcblx0aWYgKCdsZW5ndGgnIGluIGZuICYmIGdPUEQpIHtcblx0XHR2YXIgZGVzYyA9IGdPUEQoZm4sICdsZW5ndGgnKTtcblx0XHRpZiAoZGVzYyAmJiAhZGVzYy5jb25maWd1cmFibGUpIHtcblx0XHRcdGZ1bmN0aW9uTGVuZ3RoSXNDb25maWd1cmFibGUgPSBmYWxzZTtcblx0XHR9XG5cdFx0aWYgKGRlc2MgJiYgIWRlc2Mud3JpdGFibGUpIHtcblx0XHRcdGZ1bmN0aW9uTGVuZ3RoSXNXcml0YWJsZSA9IGZhbHNlO1xuXHRcdH1cblx0fVxuXG5cdGlmIChmdW5jdGlvbkxlbmd0aElzQ29uZmlndXJhYmxlIHx8IGZ1bmN0aW9uTGVuZ3RoSXNXcml0YWJsZSB8fCAhbG9vc2UpIHtcblx0XHRpZiAoaGFzRGVzY3JpcHRvcnMpIHtcblx0XHRcdGRlZmluZSgvKiogQHR5cGUge1BhcmFtZXRlcnM8ZGVmaW5lPlswXX0gKi8gKGZuKSwgJ2xlbmd0aCcsIGxlbmd0aCwgdHJ1ZSwgdHJ1ZSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGRlZmluZSgvKiogQHR5cGUge1BhcmFtZXRlcnM8ZGVmaW5lPlswXX0gKi8gKGZuKSwgJ2xlbmd0aCcsIGxlbmd0aCk7XG5cdFx0fVxuXHR9XG5cdHJldHVybiBmbjtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBHZXRJbnRyaW5zaWMgPSByZXF1aXJlKCdnZXQtaW50cmluc2ljJyk7XG52YXIgY2FsbEJvdW5kID0gcmVxdWlyZSgnY2FsbC1iaW5kL2NhbGxCb3VuZCcpO1xudmFyIGluc3BlY3QgPSByZXF1aXJlKCdvYmplY3QtaW5zcGVjdCcpO1xuXG52YXIgJFR5cGVFcnJvciA9IHJlcXVpcmUoJ2VzLWVycm9ycy90eXBlJyk7XG52YXIgJFdlYWtNYXAgPSBHZXRJbnRyaW5zaWMoJyVXZWFrTWFwJScsIHRydWUpO1xudmFyICRNYXAgPSBHZXRJbnRyaW5zaWMoJyVNYXAlJywgdHJ1ZSk7XG5cbnZhciAkd2Vha01hcEdldCA9IGNhbGxCb3VuZCgnV2Vha01hcC5wcm90b3R5cGUuZ2V0JywgdHJ1ZSk7XG52YXIgJHdlYWtNYXBTZXQgPSBjYWxsQm91bmQoJ1dlYWtNYXAucHJvdG90eXBlLnNldCcsIHRydWUpO1xudmFyICR3ZWFrTWFwSGFzID0gY2FsbEJvdW5kKCdXZWFrTWFwLnByb3RvdHlwZS5oYXMnLCB0cnVlKTtcbnZhciAkbWFwR2V0ID0gY2FsbEJvdW5kKCdNYXAucHJvdG90eXBlLmdldCcsIHRydWUpO1xudmFyICRtYXBTZXQgPSBjYWxsQm91bmQoJ01hcC5wcm90b3R5cGUuc2V0JywgdHJ1ZSk7XG52YXIgJG1hcEhhcyA9IGNhbGxCb3VuZCgnTWFwLnByb3RvdHlwZS5oYXMnLCB0cnVlKTtcblxuLypcbiogVGhpcyBmdW5jdGlvbiB0cmF2ZXJzZXMgdGhlIGxpc3QgcmV0dXJuaW5nIHRoZSBub2RlIGNvcnJlc3BvbmRpbmcgdG8gdGhlIGdpdmVuIGtleS5cbipcbiogVGhhdCBub2RlIGlzIGFsc28gbW92ZWQgdG8gdGhlIGhlYWQgb2YgdGhlIGxpc3QsIHNvIHRoYXQgaWYgaXQncyBhY2Nlc3NlZCBhZ2FpbiB3ZSBkb24ndCBuZWVkIHRvIHRyYXZlcnNlIHRoZSB3aG9sZSBsaXN0LiBCeSBkb2luZyBzbywgYWxsIHRoZSByZWNlbnRseSB1c2VkIG5vZGVzIGNhbiBiZSBhY2Nlc3NlZCByZWxhdGl2ZWx5IHF1aWNrbHkuXG4qL1xuLyoqIEB0eXBlIHtpbXBvcnQoJy4nKS5saXN0R2V0Tm9kZX0gKi9cbnZhciBsaXN0R2V0Tm9kZSA9IGZ1bmN0aW9uIChsaXN0LCBrZXkpIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBjb25zaXN0ZW50LXJldHVyblxuXHQvKiogQHR5cGUge3R5cGVvZiBsaXN0IHwgTm9uTnVsbGFibGU8KHR5cGVvZiBsaXN0KVsnbmV4dCddPn0gKi9cblx0dmFyIHByZXYgPSBsaXN0O1xuXHQvKiogQHR5cGUgeyh0eXBlb2YgbGlzdClbJ25leHQnXX0gKi9cblx0dmFyIGN1cnI7XG5cdGZvciAoOyAoY3VyciA9IHByZXYubmV4dCkgIT09IG51bGw7IHByZXYgPSBjdXJyKSB7XG5cdFx0aWYgKGN1cnIua2V5ID09PSBrZXkpIHtcblx0XHRcdHByZXYubmV4dCA9IGN1cnIubmV4dDtcblx0XHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1leHRyYS1wYXJlbnNcblx0XHRcdGN1cnIubmV4dCA9IC8qKiBAdHlwZSB7Tm9uTnVsbGFibGU8dHlwZW9mIGxpc3QubmV4dD59ICovIChsaXN0Lm5leHQpO1xuXHRcdFx0bGlzdC5uZXh0ID0gY3VycjsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuXHRcdFx0cmV0dXJuIGN1cnI7XG5cdFx0fVxuXHR9XG59O1xuXG4vKiogQHR5cGUge2ltcG9ydCgnLicpLmxpc3RHZXR9ICovXG52YXIgbGlzdEdldCA9IGZ1bmN0aW9uIChvYmplY3RzLCBrZXkpIHtcblx0dmFyIG5vZGUgPSBsaXN0R2V0Tm9kZShvYmplY3RzLCBrZXkpO1xuXHRyZXR1cm4gbm9kZSAmJiBub2RlLnZhbHVlO1xufTtcbi8qKiBAdHlwZSB7aW1wb3J0KCcuJykubGlzdFNldH0gKi9cbnZhciBsaXN0U2V0ID0gZnVuY3Rpb24gKG9iamVjdHMsIGtleSwgdmFsdWUpIHtcblx0dmFyIG5vZGUgPSBsaXN0R2V0Tm9kZShvYmplY3RzLCBrZXkpO1xuXHRpZiAobm9kZSkge1xuXHRcdG5vZGUudmFsdWUgPSB2YWx1ZTtcblx0fSBlbHNlIHtcblx0XHQvLyBQcmVwZW5kIHRoZSBuZXcgbm9kZSB0byB0aGUgYmVnaW5uaW5nIG9mIHRoZSBsaXN0XG5cdFx0b2JqZWN0cy5uZXh0ID0gLyoqIEB0eXBlIHtpbXBvcnQoJy4nKS5MaXN0Tm9kZTx0eXBlb2YgdmFsdWU+fSAqLyAoeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXBhcmFtLXJlYXNzaWduLCBuby1leHRyYS1wYXJlbnNcblx0XHRcdGtleToga2V5LFxuXHRcdFx0bmV4dDogb2JqZWN0cy5uZXh0LFxuXHRcdFx0dmFsdWU6IHZhbHVlXG5cdFx0fSk7XG5cdH1cbn07XG4vKiogQHR5cGUge2ltcG9ydCgnLicpLmxpc3RIYXN9ICovXG52YXIgbGlzdEhhcyA9IGZ1bmN0aW9uIChvYmplY3RzLCBrZXkpIHtcblx0cmV0dXJuICEhbGlzdEdldE5vZGUob2JqZWN0cywga2V5KTtcbn07XG5cbi8qKiBAdHlwZSB7aW1wb3J0KCcuJyl9ICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGdldFNpZGVDaGFubmVsKCkge1xuXHQvKiogQHR5cGUge1dlYWtNYXA8b2JqZWN0LCB1bmtub3duPn0gKi8gdmFyICR3bTtcblx0LyoqIEB0eXBlIHtNYXA8b2JqZWN0LCB1bmtub3duPn0gKi8gdmFyICRtO1xuXHQvKiogQHR5cGUge2ltcG9ydCgnLicpLlJvb3ROb2RlPHVua25vd24+fSAqLyB2YXIgJG87XG5cblx0LyoqIEB0eXBlIHtpbXBvcnQoJy4nKS5DaGFubmVsfSAqL1xuXHR2YXIgY2hhbm5lbCA9IHtcblx0XHRhc3NlcnQ6IGZ1bmN0aW9uIChrZXkpIHtcblx0XHRcdGlmICghY2hhbm5lbC5oYXMoa2V5KSkge1xuXHRcdFx0XHR0aHJvdyBuZXcgJFR5cGVFcnJvcignU2lkZSBjaGFubmVsIGRvZXMgbm90IGNvbnRhaW4gJyArIGluc3BlY3Qoa2V5KSk7XG5cdFx0XHR9XG5cdFx0fSxcblx0XHRnZXQ6IGZ1bmN0aW9uIChrZXkpIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBjb25zaXN0ZW50LXJldHVyblxuXHRcdFx0aWYgKCRXZWFrTWFwICYmIGtleSAmJiAodHlwZW9mIGtleSA9PT0gJ29iamVjdCcgfHwgdHlwZW9mIGtleSA9PT0gJ2Z1bmN0aW9uJykpIHtcblx0XHRcdFx0aWYgKCR3bSkge1xuXHRcdFx0XHRcdHJldHVybiAkd2Vha01hcEdldCgkd20sIGtleSk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZiAoJE1hcCkge1xuXHRcdFx0XHRpZiAoJG0pIHtcblx0XHRcdFx0XHRyZXR1cm4gJG1hcEdldCgkbSwga2V5KTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0aWYgKCRvKSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tbG9uZWx5LWlmXG5cdFx0XHRcdFx0cmV0dXJuIGxpc3RHZXQoJG8sIGtleSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9LFxuXHRcdGhhczogZnVuY3Rpb24gKGtleSkge1xuXHRcdFx0aWYgKCRXZWFrTWFwICYmIGtleSAmJiAodHlwZW9mIGtleSA9PT0gJ29iamVjdCcgfHwgdHlwZW9mIGtleSA9PT0gJ2Z1bmN0aW9uJykpIHtcblx0XHRcdFx0aWYgKCR3bSkge1xuXHRcdFx0XHRcdHJldHVybiAkd2Vha01hcEhhcygkd20sIGtleSk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZiAoJE1hcCkge1xuXHRcdFx0XHRpZiAoJG0pIHtcblx0XHRcdFx0XHRyZXR1cm4gJG1hcEhhcygkbSwga2V5KTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0aWYgKCRvKSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tbG9uZWx5LWlmXG5cdFx0XHRcdFx0cmV0dXJuIGxpc3RIYXMoJG8sIGtleSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9LFxuXHRcdHNldDogZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcblx0XHRcdGlmICgkV2Vha01hcCAmJiBrZXkgJiYgKHR5cGVvZiBrZXkgPT09ICdvYmplY3QnIHx8IHR5cGVvZiBrZXkgPT09ICdmdW5jdGlvbicpKSB7XG5cdFx0XHRcdGlmICghJHdtKSB7XG5cdFx0XHRcdFx0JHdtID0gbmV3ICRXZWFrTWFwKCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0JHdlYWtNYXBTZXQoJHdtLCBrZXksIHZhbHVlKTtcblx0XHRcdH0gZWxzZSBpZiAoJE1hcCkge1xuXHRcdFx0XHRpZiAoISRtKSB7XG5cdFx0XHRcdFx0JG0gPSBuZXcgJE1hcCgpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdCRtYXBTZXQoJG0sIGtleSwgdmFsdWUpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0aWYgKCEkbykge1xuXHRcdFx0XHRcdC8vIEluaXRpYWxpemUgdGhlIGxpbmtlZCBsaXN0IGFzIGFuIGVtcHR5IG5vZGUsIHNvIHRoYXQgd2UgZG9uJ3QgaGF2ZSB0byBzcGVjaWFsLWNhc2UgaGFuZGxpbmcgb2YgdGhlIGZpcnN0IG5vZGU6IHdlIGNhbiBhbHdheXMgcmVmZXIgdG8gaXQgYXMgKHByZXZpb3VzIG5vZGUpLm5leHQsIGluc3RlYWQgb2Ygc29tZXRoaW5nIGxpa2UgKGxpc3QpLmhlYWRcblx0XHRcdFx0XHQkbyA9IHsga2V5OiB7fSwgbmV4dDogbnVsbCB9O1xuXHRcdFx0XHR9XG5cdFx0XHRcdGxpc3RTZXQoJG8sIGtleSwgdmFsdWUpO1xuXHRcdFx0fVxuXHRcdH1cblx0fTtcblx0cmV0dXJuIGNoYW5uZWw7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgcmVwbGFjZSA9IFN0cmluZy5wcm90b3R5cGUucmVwbGFjZTtcbnZhciBwZXJjZW50VHdlbnRpZXMgPSAvJTIwL2c7XG5cbnZhciBGb3JtYXQgPSB7XG4gICAgUkZDMTczODogJ1JGQzE3MzgnLFxuICAgIFJGQzM5ODY6ICdSRkMzOTg2J1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgJ2RlZmF1bHQnOiBGb3JtYXQuUkZDMzk4NixcbiAgICBmb3JtYXR0ZXJzOiB7XG4gICAgICAgIFJGQzE3Mzg6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIHJlcGxhY2UuY2FsbCh2YWx1ZSwgcGVyY2VudFR3ZW50aWVzLCAnKycpO1xuICAgICAgICB9LFxuICAgICAgICBSRkMzOTg2OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybiBTdHJpbmcodmFsdWUpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBSRkMxNzM4OiBGb3JtYXQuUkZDMTczOCxcbiAgICBSRkMzOTg2OiBGb3JtYXQuUkZDMzk4NlxufTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIHN0cmluZ2lmeSA9IHJlcXVpcmUoJy4vc3RyaW5naWZ5Jyk7XG52YXIgcGFyc2UgPSByZXF1aXJlKCcuL3BhcnNlJyk7XG52YXIgZm9ybWF0cyA9IHJlcXVpcmUoJy4vZm9ybWF0cycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgICBmb3JtYXRzOiBmb3JtYXRzLFxuICAgIHBhcnNlOiBwYXJzZSxcbiAgICBzdHJpbmdpZnk6IHN0cmluZ2lmeVxufTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xuXG52YXIgaGFzID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcbnZhciBpc0FycmF5ID0gQXJyYXkuaXNBcnJheTtcblxudmFyIGRlZmF1bHRzID0ge1xuICAgIGFsbG93RG90czogZmFsc2UsXG4gICAgYWxsb3dFbXB0eUFycmF5czogZmFsc2UsXG4gICAgYWxsb3dQcm90b3R5cGVzOiBmYWxzZSxcbiAgICBhbGxvd1NwYXJzZTogZmFsc2UsXG4gICAgYXJyYXlMaW1pdDogMjAsXG4gICAgY2hhcnNldDogJ3V0Zi04JyxcbiAgICBjaGFyc2V0U2VudGluZWw6IGZhbHNlLFxuICAgIGNvbW1hOiBmYWxzZSxcbiAgICBkZWNvZGVEb3RJbktleXM6IGZhbHNlLFxuICAgIGRlY29kZXI6IHV0aWxzLmRlY29kZSxcbiAgICBkZWxpbWl0ZXI6ICcmJyxcbiAgICBkZXB0aDogNSxcbiAgICBkdXBsaWNhdGVzOiAnY29tYmluZScsXG4gICAgaWdub3JlUXVlcnlQcmVmaXg6IGZhbHNlLFxuICAgIGludGVycHJldE51bWVyaWNFbnRpdGllczogZmFsc2UsXG4gICAgcGFyYW1ldGVyTGltaXQ6IDEwMDAsXG4gICAgcGFyc2VBcnJheXM6IHRydWUsXG4gICAgcGxhaW5PYmplY3RzOiBmYWxzZSxcbiAgICBzdHJpY3ROdWxsSGFuZGxpbmc6IGZhbHNlXG59O1xuXG52YXIgaW50ZXJwcmV0TnVtZXJpY0VudGl0aWVzID0gZnVuY3Rpb24gKHN0cikge1xuICAgIHJldHVybiBzdHIucmVwbGFjZSgvJiMoXFxkKyk7L2csIGZ1bmN0aW9uICgkMCwgbnVtYmVyU3RyKSB7XG4gICAgICAgIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKHBhcnNlSW50KG51bWJlclN0ciwgMTApKTtcbiAgICB9KTtcbn07XG5cbnZhciBwYXJzZUFycmF5VmFsdWUgPSBmdW5jdGlvbiAodmFsLCBvcHRpb25zKSB7XG4gICAgaWYgKHZhbCAmJiB0eXBlb2YgdmFsID09PSAnc3RyaW5nJyAmJiBvcHRpb25zLmNvbW1hICYmIHZhbC5pbmRleE9mKCcsJykgPiAtMSkge1xuICAgICAgICByZXR1cm4gdmFsLnNwbGl0KCcsJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHZhbDtcbn07XG5cbi8vIFRoaXMgaXMgd2hhdCBicm93c2VycyB3aWxsIHN1Ym1pdCB3aGVuIHRoZSDinJMgY2hhcmFjdGVyIG9jY3VycyBpbiBhblxuLy8gYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIGJvZHkgYW5kIHRoZSBlbmNvZGluZyBvZiB0aGUgcGFnZSBjb250YWluaW5nXG4vLyB0aGUgZm9ybSBpcyBpc28tODg1OS0xLCBvciB3aGVuIHRoZSBzdWJtaXR0ZWQgZm9ybSBoYXMgYW4gYWNjZXB0LWNoYXJzZXRcbi8vIGF0dHJpYnV0ZSBvZiBpc28tODg1OS0xLiBQcmVzdW1hYmx5IGFsc28gd2l0aCBvdGhlciBjaGFyc2V0cyB0aGF0IGRvIG5vdCBjb250YWluXG4vLyB0aGUg4pyTIGNoYXJhY3Rlciwgc3VjaCBhcyB1cy1hc2NpaS5cbnZhciBpc29TZW50aW5lbCA9ICd1dGY4PSUyNiUyMzEwMDAzJTNCJzsgLy8gZW5jb2RlVVJJQ29tcG9uZW50KCcmIzEwMDAzOycpXG5cbi8vIFRoZXNlIGFyZSB0aGUgcGVyY2VudC1lbmNvZGVkIHV0Zi04IG9jdGV0cyByZXByZXNlbnRpbmcgYSBjaGVja21hcmssIGluZGljYXRpbmcgdGhhdCB0aGUgcmVxdWVzdCBhY3R1YWxseSBpcyB1dGYtOCBlbmNvZGVkLlxudmFyIGNoYXJzZXRTZW50aW5lbCA9ICd1dGY4PSVFMiU5QyU5Myc7IC8vIGVuY29kZVVSSUNvbXBvbmVudCgn4pyTJylcblxudmFyIHBhcnNlVmFsdWVzID0gZnVuY3Rpb24gcGFyc2VRdWVyeVN0cmluZ1ZhbHVlcyhzdHIsIG9wdGlvbnMpIHtcbiAgICB2YXIgb2JqID0geyBfX3Byb3RvX186IG51bGwgfTtcblxuICAgIHZhciBjbGVhblN0ciA9IG9wdGlvbnMuaWdub3JlUXVlcnlQcmVmaXggPyBzdHIucmVwbGFjZSgvXlxcPy8sICcnKSA6IHN0cjtcbiAgICBjbGVhblN0ciA9IGNsZWFuU3RyLnJlcGxhY2UoLyU1Qi9naSwgJ1snKS5yZXBsYWNlKC8lNUQvZ2ksICddJyk7XG4gICAgdmFyIGxpbWl0ID0gb3B0aW9ucy5wYXJhbWV0ZXJMaW1pdCA9PT0gSW5maW5pdHkgPyB1bmRlZmluZWQgOiBvcHRpb25zLnBhcmFtZXRlckxpbWl0O1xuICAgIHZhciBwYXJ0cyA9IGNsZWFuU3RyLnNwbGl0KG9wdGlvbnMuZGVsaW1pdGVyLCBsaW1pdCk7XG4gICAgdmFyIHNraXBJbmRleCA9IC0xOyAvLyBLZWVwIHRyYWNrIG9mIHdoZXJlIHRoZSB1dGY4IHNlbnRpbmVsIHdhcyBmb3VuZFxuICAgIHZhciBpO1xuXG4gICAgdmFyIGNoYXJzZXQgPSBvcHRpb25zLmNoYXJzZXQ7XG4gICAgaWYgKG9wdGlvbnMuY2hhcnNldFNlbnRpbmVsKSB7XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBwYXJ0cy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgaWYgKHBhcnRzW2ldLmluZGV4T2YoJ3V0Zjg9JykgPT09IDApIHtcbiAgICAgICAgICAgICAgICBpZiAocGFydHNbaV0gPT09IGNoYXJzZXRTZW50aW5lbCkge1xuICAgICAgICAgICAgICAgICAgICBjaGFyc2V0ID0gJ3V0Zi04JztcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHBhcnRzW2ldID09PSBpc29TZW50aW5lbCkge1xuICAgICAgICAgICAgICAgICAgICBjaGFyc2V0ID0gJ2lzby04ODU5LTEnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBza2lwSW5kZXggPSBpO1xuICAgICAgICAgICAgICAgIGkgPSBwYXJ0cy5sZW5ndGg7IC8vIFRoZSBlc2xpbnQgc2V0dGluZ3MgZG8gbm90IGFsbG93IGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZm9yIChpID0gMDsgaSA8IHBhcnRzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIGlmIChpID09PSBza2lwSW5kZXgpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBwYXJ0ID0gcGFydHNbaV07XG5cbiAgICAgICAgdmFyIGJyYWNrZXRFcXVhbHNQb3MgPSBwYXJ0LmluZGV4T2YoJ109Jyk7XG4gICAgICAgIHZhciBwb3MgPSBicmFja2V0RXF1YWxzUG9zID09PSAtMSA/IHBhcnQuaW5kZXhPZignPScpIDogYnJhY2tldEVxdWFsc1BvcyArIDE7XG5cbiAgICAgICAgdmFyIGtleSwgdmFsO1xuICAgICAgICBpZiAocG9zID09PSAtMSkge1xuICAgICAgICAgICAga2V5ID0gb3B0aW9ucy5kZWNvZGVyKHBhcnQsIGRlZmF1bHRzLmRlY29kZXIsIGNoYXJzZXQsICdrZXknKTtcbiAgICAgICAgICAgIHZhbCA9IG9wdGlvbnMuc3RyaWN0TnVsbEhhbmRsaW5nID8gbnVsbCA6ICcnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAga2V5ID0gb3B0aW9ucy5kZWNvZGVyKHBhcnQuc2xpY2UoMCwgcG9zKSwgZGVmYXVsdHMuZGVjb2RlciwgY2hhcnNldCwgJ2tleScpO1xuICAgICAgICAgICAgdmFsID0gdXRpbHMubWF5YmVNYXAoXG4gICAgICAgICAgICAgICAgcGFyc2VBcnJheVZhbHVlKHBhcnQuc2xpY2UocG9zICsgMSksIG9wdGlvbnMpLFxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChlbmNvZGVkVmFsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvcHRpb25zLmRlY29kZXIoZW5jb2RlZFZhbCwgZGVmYXVsdHMuZGVjb2RlciwgY2hhcnNldCwgJ3ZhbHVlJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh2YWwgJiYgb3B0aW9ucy5pbnRlcnByZXROdW1lcmljRW50aXRpZXMgJiYgY2hhcnNldCA9PT0gJ2lzby04ODU5LTEnKSB7XG4gICAgICAgICAgICB2YWwgPSBpbnRlcnByZXROdW1lcmljRW50aXRpZXModmFsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChwYXJ0LmluZGV4T2YoJ1tdPScpID4gLTEpIHtcbiAgICAgICAgICAgIHZhbCA9IGlzQXJyYXkodmFsKSA/IFt2YWxdIDogdmFsO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGV4aXN0aW5nID0gaGFzLmNhbGwob2JqLCBrZXkpO1xuICAgICAgICBpZiAoZXhpc3RpbmcgJiYgb3B0aW9ucy5kdXBsaWNhdGVzID09PSAnY29tYmluZScpIHtcbiAgICAgICAgICAgIG9ialtrZXldID0gdXRpbHMuY29tYmluZShvYmpba2V5XSwgdmFsKTtcbiAgICAgICAgfSBlbHNlIGlmICghZXhpc3RpbmcgfHwgb3B0aW9ucy5kdXBsaWNhdGVzID09PSAnbGFzdCcpIHtcbiAgICAgICAgICAgIG9ialtrZXldID0gdmFsO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG9iajtcbn07XG5cbnZhciBwYXJzZU9iamVjdCA9IGZ1bmN0aW9uIChjaGFpbiwgdmFsLCBvcHRpb25zLCB2YWx1ZXNQYXJzZWQpIHtcbiAgICB2YXIgbGVhZiA9IHZhbHVlc1BhcnNlZCA/IHZhbCA6IHBhcnNlQXJyYXlWYWx1ZSh2YWwsIG9wdGlvbnMpO1xuXG4gICAgZm9yICh2YXIgaSA9IGNoYWluLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgIHZhciBvYmo7XG4gICAgICAgIHZhciByb290ID0gY2hhaW5baV07XG5cbiAgICAgICAgaWYgKHJvb3QgPT09ICdbXScgJiYgb3B0aW9ucy5wYXJzZUFycmF5cykge1xuICAgICAgICAgICAgb2JqID0gb3B0aW9ucy5hbGxvd0VtcHR5QXJyYXlzICYmIGxlYWYgPT09ICcnID8gW10gOiBbXS5jb25jYXQobGVhZik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBvYmogPSBvcHRpb25zLnBsYWluT2JqZWN0cyA/IE9iamVjdC5jcmVhdGUobnVsbCkgOiB7fTtcbiAgICAgICAgICAgIHZhciBjbGVhblJvb3QgPSByb290LmNoYXJBdCgwKSA9PT0gJ1snICYmIHJvb3QuY2hhckF0KHJvb3QubGVuZ3RoIC0gMSkgPT09ICddJyA/IHJvb3Quc2xpY2UoMSwgLTEpIDogcm9vdDtcbiAgICAgICAgICAgIHZhciBkZWNvZGVkUm9vdCA9IG9wdGlvbnMuZGVjb2RlRG90SW5LZXlzID8gY2xlYW5Sb290LnJlcGxhY2UoLyUyRS9nLCAnLicpIDogY2xlYW5Sb290O1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gcGFyc2VJbnQoZGVjb2RlZFJvb3QsIDEwKTtcbiAgICAgICAgICAgIGlmICghb3B0aW9ucy5wYXJzZUFycmF5cyAmJiBkZWNvZGVkUm9vdCA9PT0gJycpIHtcbiAgICAgICAgICAgICAgICBvYmogPSB7IDA6IGxlYWYgfTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgICAgIWlzTmFOKGluZGV4KVxuICAgICAgICAgICAgICAgICYmIHJvb3QgIT09IGRlY29kZWRSb290XG4gICAgICAgICAgICAgICAgJiYgU3RyaW5nKGluZGV4KSA9PT0gZGVjb2RlZFJvb3RcbiAgICAgICAgICAgICAgICAmJiBpbmRleCA+PSAwXG4gICAgICAgICAgICAgICAgJiYgKG9wdGlvbnMucGFyc2VBcnJheXMgJiYgaW5kZXggPD0gb3B0aW9ucy5hcnJheUxpbWl0KVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgb2JqID0gW107XG4gICAgICAgICAgICAgICAgb2JqW2luZGV4XSA9IGxlYWY7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRlY29kZWRSb290ICE9PSAnX19wcm90b19fJykge1xuICAgICAgICAgICAgICAgIG9ialtkZWNvZGVkUm9vdF0gPSBsZWFmO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbGVhZiA9IG9iajtcbiAgICB9XG5cbiAgICByZXR1cm4gbGVhZjtcbn07XG5cbnZhciBwYXJzZUtleXMgPSBmdW5jdGlvbiBwYXJzZVF1ZXJ5U3RyaW5nS2V5cyhnaXZlbktleSwgdmFsLCBvcHRpb25zLCB2YWx1ZXNQYXJzZWQpIHtcbiAgICBpZiAoIWdpdmVuS2V5KSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBUcmFuc2Zvcm0gZG90IG5vdGF0aW9uIHRvIGJyYWNrZXQgbm90YXRpb25cbiAgICB2YXIga2V5ID0gb3B0aW9ucy5hbGxvd0RvdHMgPyBnaXZlbktleS5yZXBsYWNlKC9cXC4oW14uW10rKS9nLCAnWyQxXScpIDogZ2l2ZW5LZXk7XG5cbiAgICAvLyBUaGUgcmVnZXggY2h1bmtzXG5cbiAgICB2YXIgYnJhY2tldHMgPSAvKFxcW1teW1xcXV0qXSkvO1xuICAgIHZhciBjaGlsZCA9IC8oXFxbW15bXFxdXSpdKS9nO1xuXG4gICAgLy8gR2V0IHRoZSBwYXJlbnRcblxuICAgIHZhciBzZWdtZW50ID0gb3B0aW9ucy5kZXB0aCA+IDAgJiYgYnJhY2tldHMuZXhlYyhrZXkpO1xuICAgIHZhciBwYXJlbnQgPSBzZWdtZW50ID8ga2V5LnNsaWNlKDAsIHNlZ21lbnQuaW5kZXgpIDoga2V5O1xuXG4gICAgLy8gU3Rhc2ggdGhlIHBhcmVudCBpZiBpdCBleGlzdHNcblxuICAgIHZhciBrZXlzID0gW107XG4gICAgaWYgKHBhcmVudCkge1xuICAgICAgICAvLyBJZiB3ZSBhcmVuJ3QgdXNpbmcgcGxhaW4gb2JqZWN0cywgb3B0aW9uYWxseSBwcmVmaXgga2V5cyB0aGF0IHdvdWxkIG92ZXJ3cml0ZSBvYmplY3QgcHJvdG90eXBlIHByb3BlcnRpZXNcbiAgICAgICAgaWYgKCFvcHRpb25zLnBsYWluT2JqZWN0cyAmJiBoYXMuY2FsbChPYmplY3QucHJvdG90eXBlLCBwYXJlbnQpKSB7XG4gICAgICAgICAgICBpZiAoIW9wdGlvbnMuYWxsb3dQcm90b3R5cGVzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAga2V5cy5wdXNoKHBhcmVudCk7XG4gICAgfVxuXG4gICAgLy8gTG9vcCB0aHJvdWdoIGNoaWxkcmVuIGFwcGVuZGluZyB0byB0aGUgYXJyYXkgdW50aWwgd2UgaGl0IGRlcHRoXG5cbiAgICB2YXIgaSA9IDA7XG4gICAgd2hpbGUgKG9wdGlvbnMuZGVwdGggPiAwICYmIChzZWdtZW50ID0gY2hpbGQuZXhlYyhrZXkpKSAhPT0gbnVsbCAmJiBpIDwgb3B0aW9ucy5kZXB0aCkge1xuICAgICAgICBpICs9IDE7XG4gICAgICAgIGlmICghb3B0aW9ucy5wbGFpbk9iamVjdHMgJiYgaGFzLmNhbGwoT2JqZWN0LnByb3RvdHlwZSwgc2VnbWVudFsxXS5zbGljZSgxLCAtMSkpKSB7XG4gICAgICAgICAgICBpZiAoIW9wdGlvbnMuYWxsb3dQcm90b3R5cGVzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGtleXMucHVzaChzZWdtZW50WzFdKTtcbiAgICB9XG5cbiAgICAvLyBJZiB0aGVyZSdzIGEgcmVtYWluZGVyLCBqdXN0IGFkZCB3aGF0ZXZlciBpcyBsZWZ0XG5cbiAgICBpZiAoc2VnbWVudCkge1xuICAgICAgICBrZXlzLnB1c2goJ1snICsga2V5LnNsaWNlKHNlZ21lbnQuaW5kZXgpICsgJ10nKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcGFyc2VPYmplY3Qoa2V5cywgdmFsLCBvcHRpb25zLCB2YWx1ZXNQYXJzZWQpO1xufTtcblxudmFyIG5vcm1hbGl6ZVBhcnNlT3B0aW9ucyA9IGZ1bmN0aW9uIG5vcm1hbGl6ZVBhcnNlT3B0aW9ucyhvcHRzKSB7XG4gICAgaWYgKCFvcHRzKSB7XG4gICAgICAgIHJldHVybiBkZWZhdWx0cztcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIG9wdHMuYWxsb3dFbXB0eUFycmF5cyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIG9wdHMuYWxsb3dFbXB0eUFycmF5cyAhPT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2BhbGxvd0VtcHR5QXJyYXlzYCBvcHRpb24gY2FuIG9ubHkgYmUgYHRydWVgIG9yIGBmYWxzZWAsIHdoZW4gcHJvdmlkZWQnKTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIG9wdHMuZGVjb2RlRG90SW5LZXlzICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2Ygb3B0cy5kZWNvZGVEb3RJbktleXMgIT09ICdib29sZWFuJykge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdgZGVjb2RlRG90SW5LZXlzYCBvcHRpb24gY2FuIG9ubHkgYmUgYHRydWVgIG9yIGBmYWxzZWAsIHdoZW4gcHJvdmlkZWQnKTtcbiAgICB9XG5cbiAgICBpZiAob3B0cy5kZWNvZGVyICE9PSBudWxsICYmIHR5cGVvZiBvcHRzLmRlY29kZXIgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBvcHRzLmRlY29kZXIgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRGVjb2RlciBoYXMgdG8gYmUgYSBmdW5jdGlvbi4nKTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIG9wdHMuY2hhcnNldCAhPT0gJ3VuZGVmaW5lZCcgJiYgb3B0cy5jaGFyc2V0ICE9PSAndXRmLTgnICYmIG9wdHMuY2hhcnNldCAhPT0gJ2lzby04ODU5LTEnKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1RoZSBjaGFyc2V0IG9wdGlvbiBtdXN0IGJlIGVpdGhlciB1dGYtOCwgaXNvLTg4NTktMSwgb3IgdW5kZWZpbmVkJyk7XG4gICAgfVxuICAgIHZhciBjaGFyc2V0ID0gdHlwZW9mIG9wdHMuY2hhcnNldCA9PT0gJ3VuZGVmaW5lZCcgPyBkZWZhdWx0cy5jaGFyc2V0IDogb3B0cy5jaGFyc2V0O1xuXG4gICAgdmFyIGR1cGxpY2F0ZXMgPSB0eXBlb2Ygb3B0cy5kdXBsaWNhdGVzID09PSAndW5kZWZpbmVkJyA/IGRlZmF1bHRzLmR1cGxpY2F0ZXMgOiBvcHRzLmR1cGxpY2F0ZXM7XG5cbiAgICBpZiAoZHVwbGljYXRlcyAhPT0gJ2NvbWJpbmUnICYmIGR1cGxpY2F0ZXMgIT09ICdmaXJzdCcgJiYgZHVwbGljYXRlcyAhPT0gJ2xhc3QnKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1RoZSBkdXBsaWNhdGVzIG9wdGlvbiBtdXN0IGJlIGVpdGhlciBjb21iaW5lLCBmaXJzdCwgb3IgbGFzdCcpO1xuICAgIH1cblxuICAgIHZhciBhbGxvd0RvdHMgPSB0eXBlb2Ygb3B0cy5hbGxvd0RvdHMgPT09ICd1bmRlZmluZWQnID8gb3B0cy5kZWNvZGVEb3RJbktleXMgPT09IHRydWUgPyB0cnVlIDogZGVmYXVsdHMuYWxsb3dEb3RzIDogISFvcHRzLmFsbG93RG90cztcblxuICAgIHJldHVybiB7XG4gICAgICAgIGFsbG93RG90czogYWxsb3dEb3RzLFxuICAgICAgICBhbGxvd0VtcHR5QXJyYXlzOiB0eXBlb2Ygb3B0cy5hbGxvd0VtcHR5QXJyYXlzID09PSAnYm9vbGVhbicgPyAhIW9wdHMuYWxsb3dFbXB0eUFycmF5cyA6IGRlZmF1bHRzLmFsbG93RW1wdHlBcnJheXMsXG4gICAgICAgIGFsbG93UHJvdG90eXBlczogdHlwZW9mIG9wdHMuYWxsb3dQcm90b3R5cGVzID09PSAnYm9vbGVhbicgPyBvcHRzLmFsbG93UHJvdG90eXBlcyA6IGRlZmF1bHRzLmFsbG93UHJvdG90eXBlcyxcbiAgICAgICAgYWxsb3dTcGFyc2U6IHR5cGVvZiBvcHRzLmFsbG93U3BhcnNlID09PSAnYm9vbGVhbicgPyBvcHRzLmFsbG93U3BhcnNlIDogZGVmYXVsdHMuYWxsb3dTcGFyc2UsXG4gICAgICAgIGFycmF5TGltaXQ6IHR5cGVvZiBvcHRzLmFycmF5TGltaXQgPT09ICdudW1iZXInID8gb3B0cy5hcnJheUxpbWl0IDogZGVmYXVsdHMuYXJyYXlMaW1pdCxcbiAgICAgICAgY2hhcnNldDogY2hhcnNldCxcbiAgICAgICAgY2hhcnNldFNlbnRpbmVsOiB0eXBlb2Ygb3B0cy5jaGFyc2V0U2VudGluZWwgPT09ICdib29sZWFuJyA/IG9wdHMuY2hhcnNldFNlbnRpbmVsIDogZGVmYXVsdHMuY2hhcnNldFNlbnRpbmVsLFxuICAgICAgICBjb21tYTogdHlwZW9mIG9wdHMuY29tbWEgPT09ICdib29sZWFuJyA/IG9wdHMuY29tbWEgOiBkZWZhdWx0cy5jb21tYSxcbiAgICAgICAgZGVjb2RlRG90SW5LZXlzOiB0eXBlb2Ygb3B0cy5kZWNvZGVEb3RJbktleXMgPT09ICdib29sZWFuJyA/IG9wdHMuZGVjb2RlRG90SW5LZXlzIDogZGVmYXVsdHMuZGVjb2RlRG90SW5LZXlzLFxuICAgICAgICBkZWNvZGVyOiB0eXBlb2Ygb3B0cy5kZWNvZGVyID09PSAnZnVuY3Rpb24nID8gb3B0cy5kZWNvZGVyIDogZGVmYXVsdHMuZGVjb2RlcixcbiAgICAgICAgZGVsaW1pdGVyOiB0eXBlb2Ygb3B0cy5kZWxpbWl0ZXIgPT09ICdzdHJpbmcnIHx8IHV0aWxzLmlzUmVnRXhwKG9wdHMuZGVsaW1pdGVyKSA/IG9wdHMuZGVsaW1pdGVyIDogZGVmYXVsdHMuZGVsaW1pdGVyLFxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8taW1wbGljaXQtY29lcmNpb24sIG5vLWV4dHJhLXBhcmVuc1xuICAgICAgICBkZXB0aDogKHR5cGVvZiBvcHRzLmRlcHRoID09PSAnbnVtYmVyJyB8fCBvcHRzLmRlcHRoID09PSBmYWxzZSkgPyArb3B0cy5kZXB0aCA6IGRlZmF1bHRzLmRlcHRoLFxuICAgICAgICBkdXBsaWNhdGVzOiBkdXBsaWNhdGVzLFxuICAgICAgICBpZ25vcmVRdWVyeVByZWZpeDogb3B0cy5pZ25vcmVRdWVyeVByZWZpeCA9PT0gdHJ1ZSxcbiAgICAgICAgaW50ZXJwcmV0TnVtZXJpY0VudGl0aWVzOiB0eXBlb2Ygb3B0cy5pbnRlcnByZXROdW1lcmljRW50aXRpZXMgPT09ICdib29sZWFuJyA/IG9wdHMuaW50ZXJwcmV0TnVtZXJpY0VudGl0aWVzIDogZGVmYXVsdHMuaW50ZXJwcmV0TnVtZXJpY0VudGl0aWVzLFxuICAgICAgICBwYXJhbWV0ZXJMaW1pdDogdHlwZW9mIG9wdHMucGFyYW1ldGVyTGltaXQgPT09ICdudW1iZXInID8gb3B0cy5wYXJhbWV0ZXJMaW1pdCA6IGRlZmF1bHRzLnBhcmFtZXRlckxpbWl0LFxuICAgICAgICBwYXJzZUFycmF5czogb3B0cy5wYXJzZUFycmF5cyAhPT0gZmFsc2UsXG4gICAgICAgIHBsYWluT2JqZWN0czogdHlwZW9mIG9wdHMucGxhaW5PYmplY3RzID09PSAnYm9vbGVhbicgPyBvcHRzLnBsYWluT2JqZWN0cyA6IGRlZmF1bHRzLnBsYWluT2JqZWN0cyxcbiAgICAgICAgc3RyaWN0TnVsbEhhbmRsaW5nOiB0eXBlb2Ygb3B0cy5zdHJpY3ROdWxsSGFuZGxpbmcgPT09ICdib29sZWFuJyA/IG9wdHMuc3RyaWN0TnVsbEhhbmRsaW5nIDogZGVmYXVsdHMuc3RyaWN0TnVsbEhhbmRsaW5nXG4gICAgfTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKHN0ciwgb3B0cykge1xuICAgIHZhciBvcHRpb25zID0gbm9ybWFsaXplUGFyc2VPcHRpb25zKG9wdHMpO1xuXG4gICAgaWYgKHN0ciA9PT0gJycgfHwgc3RyID09PSBudWxsIHx8IHR5cGVvZiBzdHIgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybiBvcHRpb25zLnBsYWluT2JqZWN0cyA/IE9iamVjdC5jcmVhdGUobnVsbCkgOiB7fTtcbiAgICB9XG5cbiAgICB2YXIgdGVtcE9iaiA9IHR5cGVvZiBzdHIgPT09ICdzdHJpbmcnID8gcGFyc2VWYWx1ZXMoc3RyLCBvcHRpb25zKSA6IHN0cjtcbiAgICB2YXIgb2JqID0gb3B0aW9ucy5wbGFpbk9iamVjdHMgPyBPYmplY3QuY3JlYXRlKG51bGwpIDoge307XG5cbiAgICAvLyBJdGVyYXRlIG92ZXIgdGhlIGtleXMgYW5kIHNldHVwIHRoZSBuZXcgb2JqZWN0XG5cbiAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHRlbXBPYmopO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSkge1xuICAgICAgICB2YXIga2V5ID0ga2V5c1tpXTtcbiAgICAgICAgdmFyIG5ld09iaiA9IHBhcnNlS2V5cyhrZXksIHRlbXBPYmpba2V5XSwgb3B0aW9ucywgdHlwZW9mIHN0ciA9PT0gJ3N0cmluZycpO1xuICAgICAgICBvYmogPSB1dGlscy5tZXJnZShvYmosIG5ld09iaiwgb3B0aW9ucyk7XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMuYWxsb3dTcGFyc2UgPT09IHRydWUpIHtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9XG5cbiAgICByZXR1cm4gdXRpbHMuY29tcGFjdChvYmopO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIGdldFNpZGVDaGFubmVsID0gcmVxdWlyZSgnc2lkZS1jaGFubmVsJyk7XG52YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XG52YXIgZm9ybWF0cyA9IHJlcXVpcmUoJy4vZm9ybWF0cycpO1xudmFyIGhhcyA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG5cbnZhciBhcnJheVByZWZpeEdlbmVyYXRvcnMgPSB7XG4gICAgYnJhY2tldHM6IGZ1bmN0aW9uIGJyYWNrZXRzKHByZWZpeCkge1xuICAgICAgICByZXR1cm4gcHJlZml4ICsgJ1tdJztcbiAgICB9LFxuICAgIGNvbW1hOiAnY29tbWEnLFxuICAgIGluZGljZXM6IGZ1bmN0aW9uIGluZGljZXMocHJlZml4LCBrZXkpIHtcbiAgICAgICAgcmV0dXJuIHByZWZpeCArICdbJyArIGtleSArICddJztcbiAgICB9LFxuICAgIHJlcGVhdDogZnVuY3Rpb24gcmVwZWF0KHByZWZpeCkge1xuICAgICAgICByZXR1cm4gcHJlZml4O1xuICAgIH1cbn07XG5cbnZhciBpc0FycmF5ID0gQXJyYXkuaXNBcnJheTtcbnZhciBwdXNoID0gQXJyYXkucHJvdG90eXBlLnB1c2g7XG52YXIgcHVzaFRvQXJyYXkgPSBmdW5jdGlvbiAoYXJyLCB2YWx1ZU9yQXJyYXkpIHtcbiAgICBwdXNoLmFwcGx5KGFyciwgaXNBcnJheSh2YWx1ZU9yQXJyYXkpID8gdmFsdWVPckFycmF5IDogW3ZhbHVlT3JBcnJheV0pO1xufTtcblxudmFyIHRvSVNPID0gRGF0ZS5wcm90b3R5cGUudG9JU09TdHJpbmc7XG5cbnZhciBkZWZhdWx0Rm9ybWF0ID0gZm9ybWF0c1snZGVmYXVsdCddO1xudmFyIGRlZmF1bHRzID0ge1xuICAgIGFkZFF1ZXJ5UHJlZml4OiBmYWxzZSxcbiAgICBhbGxvd0RvdHM6IGZhbHNlLFxuICAgIGFsbG93RW1wdHlBcnJheXM6IGZhbHNlLFxuICAgIGFycmF5Rm9ybWF0OiAnaW5kaWNlcycsXG4gICAgY2hhcnNldDogJ3V0Zi04JyxcbiAgICBjaGFyc2V0U2VudGluZWw6IGZhbHNlLFxuICAgIGRlbGltaXRlcjogJyYnLFxuICAgIGVuY29kZTogdHJ1ZSxcbiAgICBlbmNvZGVEb3RJbktleXM6IGZhbHNlLFxuICAgIGVuY29kZXI6IHV0aWxzLmVuY29kZSxcbiAgICBlbmNvZGVWYWx1ZXNPbmx5OiBmYWxzZSxcbiAgICBmb3JtYXQ6IGRlZmF1bHRGb3JtYXQsXG4gICAgZm9ybWF0dGVyOiBmb3JtYXRzLmZvcm1hdHRlcnNbZGVmYXVsdEZvcm1hdF0sXG4gICAgLy8gZGVwcmVjYXRlZFxuICAgIGluZGljZXM6IGZhbHNlLFxuICAgIHNlcmlhbGl6ZURhdGU6IGZ1bmN0aW9uIHNlcmlhbGl6ZURhdGUoZGF0ZSkge1xuICAgICAgICByZXR1cm4gdG9JU08uY2FsbChkYXRlKTtcbiAgICB9LFxuICAgIHNraXBOdWxsczogZmFsc2UsXG4gICAgc3RyaWN0TnVsbEhhbmRsaW5nOiBmYWxzZVxufTtcblxudmFyIGlzTm9uTnVsbGlzaFByaW1pdGl2ZSA9IGZ1bmN0aW9uIGlzTm9uTnVsbGlzaFByaW1pdGl2ZSh2KSB7XG4gICAgcmV0dXJuIHR5cGVvZiB2ID09PSAnc3RyaW5nJ1xuICAgICAgICB8fCB0eXBlb2YgdiA9PT0gJ251bWJlcidcbiAgICAgICAgfHwgdHlwZW9mIHYgPT09ICdib29sZWFuJ1xuICAgICAgICB8fCB0eXBlb2YgdiA9PT0gJ3N5bWJvbCdcbiAgICAgICAgfHwgdHlwZW9mIHYgPT09ICdiaWdpbnQnO1xufTtcblxudmFyIHNlbnRpbmVsID0ge307XG5cbnZhciBzdHJpbmdpZnkgPSBmdW5jdGlvbiBzdHJpbmdpZnkoXG4gICAgb2JqZWN0LFxuICAgIHByZWZpeCxcbiAgICBnZW5lcmF0ZUFycmF5UHJlZml4LFxuICAgIGNvbW1hUm91bmRUcmlwLFxuICAgIGFsbG93RW1wdHlBcnJheXMsXG4gICAgc3RyaWN0TnVsbEhhbmRsaW5nLFxuICAgIHNraXBOdWxscyxcbiAgICBlbmNvZGVEb3RJbktleXMsXG4gICAgZW5jb2RlcixcbiAgICBmaWx0ZXIsXG4gICAgc29ydCxcbiAgICBhbGxvd0RvdHMsXG4gICAgc2VyaWFsaXplRGF0ZSxcbiAgICBmb3JtYXQsXG4gICAgZm9ybWF0dGVyLFxuICAgIGVuY29kZVZhbHVlc09ubHksXG4gICAgY2hhcnNldCxcbiAgICBzaWRlQ2hhbm5lbFxuKSB7XG4gICAgdmFyIG9iaiA9IG9iamVjdDtcblxuICAgIHZhciB0bXBTYyA9IHNpZGVDaGFubmVsO1xuICAgIHZhciBzdGVwID0gMDtcbiAgICB2YXIgZmluZEZsYWcgPSBmYWxzZTtcbiAgICB3aGlsZSAoKHRtcFNjID0gdG1wU2MuZ2V0KHNlbnRpbmVsKSkgIT09IHZvaWQgdW5kZWZpbmVkICYmICFmaW5kRmxhZykge1xuICAgICAgICAvLyBXaGVyZSBvYmplY3QgbGFzdCBhcHBlYXJlZCBpbiB0aGUgcmVmIHRyZWVcbiAgICAgICAgdmFyIHBvcyA9IHRtcFNjLmdldChvYmplY3QpO1xuICAgICAgICBzdGVwICs9IDE7XG4gICAgICAgIGlmICh0eXBlb2YgcG9zICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgaWYgKHBvcyA9PT0gc3RlcCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdDeWNsaWMgb2JqZWN0IHZhbHVlJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGZpbmRGbGFnID0gdHJ1ZTsgLy8gQnJlYWsgd2hpbGVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHRtcFNjLmdldChzZW50aW5lbCkgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBzdGVwID0gMDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0eXBlb2YgZmlsdGVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIG9iaiA9IGZpbHRlcihwcmVmaXgsIG9iaik7XG4gICAgfSBlbHNlIGlmIChvYmogaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICAgIG9iaiA9IHNlcmlhbGl6ZURhdGUob2JqKTtcbiAgICB9IGVsc2UgaWYgKGdlbmVyYXRlQXJyYXlQcmVmaXggPT09ICdjb21tYScgJiYgaXNBcnJheShvYmopKSB7XG4gICAgICAgIG9iaiA9IHV0aWxzLm1heWJlTWFwKG9iaiwgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlcmlhbGl6ZURhdGUodmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAob2JqID09PSBudWxsKSB7XG4gICAgICAgIGlmIChzdHJpY3ROdWxsSGFuZGxpbmcpIHtcbiAgICAgICAgICAgIHJldHVybiBlbmNvZGVyICYmICFlbmNvZGVWYWx1ZXNPbmx5ID8gZW5jb2RlcihwcmVmaXgsIGRlZmF1bHRzLmVuY29kZXIsIGNoYXJzZXQsICdrZXknLCBmb3JtYXQpIDogcHJlZml4O1xuICAgICAgICB9XG5cbiAgICAgICAgb2JqID0gJyc7XG4gICAgfVxuXG4gICAgaWYgKGlzTm9uTnVsbGlzaFByaW1pdGl2ZShvYmopIHx8IHV0aWxzLmlzQnVmZmVyKG9iaikpIHtcbiAgICAgICAgaWYgKGVuY29kZXIpIHtcbiAgICAgICAgICAgIHZhciBrZXlWYWx1ZSA9IGVuY29kZVZhbHVlc09ubHkgPyBwcmVmaXggOiBlbmNvZGVyKHByZWZpeCwgZGVmYXVsdHMuZW5jb2RlciwgY2hhcnNldCwgJ2tleScsIGZvcm1hdCk7XG4gICAgICAgICAgICByZXR1cm4gW2Zvcm1hdHRlcihrZXlWYWx1ZSkgKyAnPScgKyBmb3JtYXR0ZXIoZW5jb2RlcihvYmosIGRlZmF1bHRzLmVuY29kZXIsIGNoYXJzZXQsICd2YWx1ZScsIGZvcm1hdCkpXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW2Zvcm1hdHRlcihwcmVmaXgpICsgJz0nICsgZm9ybWF0dGVyKFN0cmluZyhvYmopKV07XG4gICAgfVxuXG4gICAgdmFyIHZhbHVlcyA9IFtdO1xuXG4gICAgaWYgKHR5cGVvZiBvYmogPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZXM7XG4gICAgfVxuXG4gICAgdmFyIG9iaktleXM7XG4gICAgaWYgKGdlbmVyYXRlQXJyYXlQcmVmaXggPT09ICdjb21tYScgJiYgaXNBcnJheShvYmopKSB7XG4gICAgICAgIC8vIHdlIG5lZWQgdG8gam9pbiBlbGVtZW50cyBpblxuICAgICAgICBpZiAoZW5jb2RlVmFsdWVzT25seSAmJiBlbmNvZGVyKSB7XG4gICAgICAgICAgICBvYmogPSB1dGlscy5tYXliZU1hcChvYmosIGVuY29kZXIpO1xuICAgICAgICB9XG4gICAgICAgIG9iaktleXMgPSBbeyB2YWx1ZTogb2JqLmxlbmd0aCA+IDAgPyBvYmouam9pbignLCcpIHx8IG51bGwgOiB2b2lkIHVuZGVmaW5lZCB9XTtcbiAgICB9IGVsc2UgaWYgKGlzQXJyYXkoZmlsdGVyKSkge1xuICAgICAgICBvYmpLZXlzID0gZmlsdGVyO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqKTtcbiAgICAgICAgb2JqS2V5cyA9IHNvcnQgPyBrZXlzLnNvcnQoc29ydCkgOiBrZXlzO1xuICAgIH1cblxuICAgIHZhciBlbmNvZGVkUHJlZml4ID0gZW5jb2RlRG90SW5LZXlzID8gcHJlZml4LnJlcGxhY2UoL1xcLi9nLCAnJTJFJykgOiBwcmVmaXg7XG5cbiAgICB2YXIgYWRqdXN0ZWRQcmVmaXggPSBjb21tYVJvdW5kVHJpcCAmJiBpc0FycmF5KG9iaikgJiYgb2JqLmxlbmd0aCA9PT0gMSA/IGVuY29kZWRQcmVmaXggKyAnW10nIDogZW5jb2RlZFByZWZpeDtcblxuICAgIGlmIChhbGxvd0VtcHR5QXJyYXlzICYmIGlzQXJyYXkob2JqKSAmJiBvYmoubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiBhZGp1c3RlZFByZWZpeCArICdbXSc7XG4gICAgfVxuXG4gICAgZm9yICh2YXIgaiA9IDA7IGogPCBvYmpLZXlzLmxlbmd0aDsgKytqKSB7XG4gICAgICAgIHZhciBrZXkgPSBvYmpLZXlzW2pdO1xuICAgICAgICB2YXIgdmFsdWUgPSB0eXBlb2Yga2V5ID09PSAnb2JqZWN0JyAmJiB0eXBlb2Yga2V5LnZhbHVlICE9PSAndW5kZWZpbmVkJyA/IGtleS52YWx1ZSA6IG9ialtrZXldO1xuXG4gICAgICAgIGlmIChza2lwTnVsbHMgJiYgdmFsdWUgPT09IG51bGwpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGVuY29kZWRLZXkgPSBhbGxvd0RvdHMgJiYgZW5jb2RlRG90SW5LZXlzID8ga2V5LnJlcGxhY2UoL1xcLi9nLCAnJTJFJykgOiBrZXk7XG4gICAgICAgIHZhciBrZXlQcmVmaXggPSBpc0FycmF5KG9iailcbiAgICAgICAgICAgID8gdHlwZW9mIGdlbmVyYXRlQXJyYXlQcmVmaXggPT09ICdmdW5jdGlvbicgPyBnZW5lcmF0ZUFycmF5UHJlZml4KGFkanVzdGVkUHJlZml4LCBlbmNvZGVkS2V5KSA6IGFkanVzdGVkUHJlZml4XG4gICAgICAgICAgICA6IGFkanVzdGVkUHJlZml4ICsgKGFsbG93RG90cyA/ICcuJyArIGVuY29kZWRLZXkgOiAnWycgKyBlbmNvZGVkS2V5ICsgJ10nKTtcblxuICAgICAgICBzaWRlQ2hhbm5lbC5zZXQob2JqZWN0LCBzdGVwKTtcbiAgICAgICAgdmFyIHZhbHVlU2lkZUNoYW5uZWwgPSBnZXRTaWRlQ2hhbm5lbCgpO1xuICAgICAgICB2YWx1ZVNpZGVDaGFubmVsLnNldChzZW50aW5lbCwgc2lkZUNoYW5uZWwpO1xuICAgICAgICBwdXNoVG9BcnJheSh2YWx1ZXMsIHN0cmluZ2lmeShcbiAgICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgICAga2V5UHJlZml4LFxuICAgICAgICAgICAgZ2VuZXJhdGVBcnJheVByZWZpeCxcbiAgICAgICAgICAgIGNvbW1hUm91bmRUcmlwLFxuICAgICAgICAgICAgYWxsb3dFbXB0eUFycmF5cyxcbiAgICAgICAgICAgIHN0cmljdE51bGxIYW5kbGluZyxcbiAgICAgICAgICAgIHNraXBOdWxscyxcbiAgICAgICAgICAgIGVuY29kZURvdEluS2V5cyxcbiAgICAgICAgICAgIGdlbmVyYXRlQXJyYXlQcmVmaXggPT09ICdjb21tYScgJiYgZW5jb2RlVmFsdWVzT25seSAmJiBpc0FycmF5KG9iaikgPyBudWxsIDogZW5jb2RlcixcbiAgICAgICAgICAgIGZpbHRlcixcbiAgICAgICAgICAgIHNvcnQsXG4gICAgICAgICAgICBhbGxvd0RvdHMsXG4gICAgICAgICAgICBzZXJpYWxpemVEYXRlLFxuICAgICAgICAgICAgZm9ybWF0LFxuICAgICAgICAgICAgZm9ybWF0dGVyLFxuICAgICAgICAgICAgZW5jb2RlVmFsdWVzT25seSxcbiAgICAgICAgICAgIGNoYXJzZXQsXG4gICAgICAgICAgICB2YWx1ZVNpZGVDaGFubmVsXG4gICAgICAgICkpO1xuICAgIH1cblxuICAgIHJldHVybiB2YWx1ZXM7XG59O1xuXG52YXIgbm9ybWFsaXplU3RyaW5naWZ5T3B0aW9ucyA9IGZ1bmN0aW9uIG5vcm1hbGl6ZVN0cmluZ2lmeU9wdGlvbnMob3B0cykge1xuICAgIGlmICghb3B0cykge1xuICAgICAgICByZXR1cm4gZGVmYXVsdHM7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBvcHRzLmFsbG93RW1wdHlBcnJheXMgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBvcHRzLmFsbG93RW1wdHlBcnJheXMgIT09ICdib29sZWFuJykge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdgYWxsb3dFbXB0eUFycmF5c2Agb3B0aW9uIGNhbiBvbmx5IGJlIGB0cnVlYCBvciBgZmFsc2VgLCB3aGVuIHByb3ZpZGVkJyk7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBvcHRzLmVuY29kZURvdEluS2V5cyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIG9wdHMuZW5jb2RlRG90SW5LZXlzICE9PSAnYm9vbGVhbicpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignYGVuY29kZURvdEluS2V5c2Agb3B0aW9uIGNhbiBvbmx5IGJlIGB0cnVlYCBvciBgZmFsc2VgLCB3aGVuIHByb3ZpZGVkJyk7XG4gICAgfVxuXG4gICAgaWYgKG9wdHMuZW5jb2RlciAhPT0gbnVsbCAmJiB0eXBlb2Ygb3B0cy5lbmNvZGVyICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2Ygb3B0cy5lbmNvZGVyICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0VuY29kZXIgaGFzIHRvIGJlIGEgZnVuY3Rpb24uJyk7XG4gICAgfVxuXG4gICAgdmFyIGNoYXJzZXQgPSBvcHRzLmNoYXJzZXQgfHwgZGVmYXVsdHMuY2hhcnNldDtcbiAgICBpZiAodHlwZW9mIG9wdHMuY2hhcnNldCAhPT0gJ3VuZGVmaW5lZCcgJiYgb3B0cy5jaGFyc2V0ICE9PSAndXRmLTgnICYmIG9wdHMuY2hhcnNldCAhPT0gJ2lzby04ODU5LTEnKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1RoZSBjaGFyc2V0IG9wdGlvbiBtdXN0IGJlIGVpdGhlciB1dGYtOCwgaXNvLTg4NTktMSwgb3IgdW5kZWZpbmVkJyk7XG4gICAgfVxuXG4gICAgdmFyIGZvcm1hdCA9IGZvcm1hdHNbJ2RlZmF1bHQnXTtcbiAgICBpZiAodHlwZW9mIG9wdHMuZm9ybWF0ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBpZiAoIWhhcy5jYWxsKGZvcm1hdHMuZm9ybWF0dGVycywgb3B0cy5mb3JtYXQpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdVbmtub3duIGZvcm1hdCBvcHRpb24gcHJvdmlkZWQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgZm9ybWF0ID0gb3B0cy5mb3JtYXQ7XG4gICAgfVxuICAgIHZhciBmb3JtYXR0ZXIgPSBmb3JtYXRzLmZvcm1hdHRlcnNbZm9ybWF0XTtcblxuICAgIHZhciBmaWx0ZXIgPSBkZWZhdWx0cy5maWx0ZXI7XG4gICAgaWYgKHR5cGVvZiBvcHRzLmZpbHRlciA9PT0gJ2Z1bmN0aW9uJyB8fCBpc0FycmF5KG9wdHMuZmlsdGVyKSkge1xuICAgICAgICBmaWx0ZXIgPSBvcHRzLmZpbHRlcjtcbiAgICB9XG5cbiAgICB2YXIgYXJyYXlGb3JtYXQ7XG4gICAgaWYgKG9wdHMuYXJyYXlGb3JtYXQgaW4gYXJyYXlQcmVmaXhHZW5lcmF0b3JzKSB7XG4gICAgICAgIGFycmF5Rm9ybWF0ID0gb3B0cy5hcnJheUZvcm1hdDtcbiAgICB9IGVsc2UgaWYgKCdpbmRpY2VzJyBpbiBvcHRzKSB7XG4gICAgICAgIGFycmF5Rm9ybWF0ID0gb3B0cy5pbmRpY2VzID8gJ2luZGljZXMnIDogJ3JlcGVhdCc7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgYXJyYXlGb3JtYXQgPSBkZWZhdWx0cy5hcnJheUZvcm1hdDtcbiAgICB9XG5cbiAgICBpZiAoJ2NvbW1hUm91bmRUcmlwJyBpbiBvcHRzICYmIHR5cGVvZiBvcHRzLmNvbW1hUm91bmRUcmlwICE9PSAnYm9vbGVhbicpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignYGNvbW1hUm91bmRUcmlwYCBtdXN0IGJlIGEgYm9vbGVhbiwgb3IgYWJzZW50Jyk7XG4gICAgfVxuXG4gICAgdmFyIGFsbG93RG90cyA9IHR5cGVvZiBvcHRzLmFsbG93RG90cyA9PT0gJ3VuZGVmaW5lZCcgPyBvcHRzLmVuY29kZURvdEluS2V5cyA9PT0gdHJ1ZSA/IHRydWUgOiBkZWZhdWx0cy5hbGxvd0RvdHMgOiAhIW9wdHMuYWxsb3dEb3RzO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgYWRkUXVlcnlQcmVmaXg6IHR5cGVvZiBvcHRzLmFkZFF1ZXJ5UHJlZml4ID09PSAnYm9vbGVhbicgPyBvcHRzLmFkZFF1ZXJ5UHJlZml4IDogZGVmYXVsdHMuYWRkUXVlcnlQcmVmaXgsXG4gICAgICAgIGFsbG93RG90czogYWxsb3dEb3RzLFxuICAgICAgICBhbGxvd0VtcHR5QXJyYXlzOiB0eXBlb2Ygb3B0cy5hbGxvd0VtcHR5QXJyYXlzID09PSAnYm9vbGVhbicgPyAhIW9wdHMuYWxsb3dFbXB0eUFycmF5cyA6IGRlZmF1bHRzLmFsbG93RW1wdHlBcnJheXMsXG4gICAgICAgIGFycmF5Rm9ybWF0OiBhcnJheUZvcm1hdCxcbiAgICAgICAgY2hhcnNldDogY2hhcnNldCxcbiAgICAgICAgY2hhcnNldFNlbnRpbmVsOiB0eXBlb2Ygb3B0cy5jaGFyc2V0U2VudGluZWwgPT09ICdib29sZWFuJyA/IG9wdHMuY2hhcnNldFNlbnRpbmVsIDogZGVmYXVsdHMuY2hhcnNldFNlbnRpbmVsLFxuICAgICAgICBjb21tYVJvdW5kVHJpcDogb3B0cy5jb21tYVJvdW5kVHJpcCxcbiAgICAgICAgZGVsaW1pdGVyOiB0eXBlb2Ygb3B0cy5kZWxpbWl0ZXIgPT09ICd1bmRlZmluZWQnID8gZGVmYXVsdHMuZGVsaW1pdGVyIDogb3B0cy5kZWxpbWl0ZXIsXG4gICAgICAgIGVuY29kZTogdHlwZW9mIG9wdHMuZW5jb2RlID09PSAnYm9vbGVhbicgPyBvcHRzLmVuY29kZSA6IGRlZmF1bHRzLmVuY29kZSxcbiAgICAgICAgZW5jb2RlRG90SW5LZXlzOiB0eXBlb2Ygb3B0cy5lbmNvZGVEb3RJbktleXMgPT09ICdib29sZWFuJyA/IG9wdHMuZW5jb2RlRG90SW5LZXlzIDogZGVmYXVsdHMuZW5jb2RlRG90SW5LZXlzLFxuICAgICAgICBlbmNvZGVyOiB0eXBlb2Ygb3B0cy5lbmNvZGVyID09PSAnZnVuY3Rpb24nID8gb3B0cy5lbmNvZGVyIDogZGVmYXVsdHMuZW5jb2RlcixcbiAgICAgICAgZW5jb2RlVmFsdWVzT25seTogdHlwZW9mIG9wdHMuZW5jb2RlVmFsdWVzT25seSA9PT0gJ2Jvb2xlYW4nID8gb3B0cy5lbmNvZGVWYWx1ZXNPbmx5IDogZGVmYXVsdHMuZW5jb2RlVmFsdWVzT25seSxcbiAgICAgICAgZmlsdGVyOiBmaWx0ZXIsXG4gICAgICAgIGZvcm1hdDogZm9ybWF0LFxuICAgICAgICBmb3JtYXR0ZXI6IGZvcm1hdHRlcixcbiAgICAgICAgc2VyaWFsaXplRGF0ZTogdHlwZW9mIG9wdHMuc2VyaWFsaXplRGF0ZSA9PT0gJ2Z1bmN0aW9uJyA/IG9wdHMuc2VyaWFsaXplRGF0ZSA6IGRlZmF1bHRzLnNlcmlhbGl6ZURhdGUsXG4gICAgICAgIHNraXBOdWxsczogdHlwZW9mIG9wdHMuc2tpcE51bGxzID09PSAnYm9vbGVhbicgPyBvcHRzLnNraXBOdWxscyA6IGRlZmF1bHRzLnNraXBOdWxscyxcbiAgICAgICAgc29ydDogdHlwZW9mIG9wdHMuc29ydCA9PT0gJ2Z1bmN0aW9uJyA/IG9wdHMuc29ydCA6IG51bGwsXG4gICAgICAgIHN0cmljdE51bGxIYW5kbGluZzogdHlwZW9mIG9wdHMuc3RyaWN0TnVsbEhhbmRsaW5nID09PSAnYm9vbGVhbicgPyBvcHRzLnN0cmljdE51bGxIYW5kbGluZyA6IGRlZmF1bHRzLnN0cmljdE51bGxIYW5kbGluZ1xuICAgIH07XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChvYmplY3QsIG9wdHMpIHtcbiAgICB2YXIgb2JqID0gb2JqZWN0O1xuICAgIHZhciBvcHRpb25zID0gbm9ybWFsaXplU3RyaW5naWZ5T3B0aW9ucyhvcHRzKTtcblxuICAgIHZhciBvYmpLZXlzO1xuICAgIHZhciBmaWx0ZXI7XG5cbiAgICBpZiAodHlwZW9mIG9wdGlvbnMuZmlsdGVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIGZpbHRlciA9IG9wdGlvbnMuZmlsdGVyO1xuICAgICAgICBvYmogPSBmaWx0ZXIoJycsIG9iaik7XG4gICAgfSBlbHNlIGlmIChpc0FycmF5KG9wdGlvbnMuZmlsdGVyKSkge1xuICAgICAgICBmaWx0ZXIgPSBvcHRpb25zLmZpbHRlcjtcbiAgICAgICAgb2JqS2V5cyA9IGZpbHRlcjtcbiAgICB9XG5cbiAgICB2YXIga2V5cyA9IFtdO1xuXG4gICAgaWYgKHR5cGVvZiBvYmogIT09ICdvYmplY3QnIHx8IG9iaiA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gJyc7XG4gICAgfVxuXG4gICAgdmFyIGdlbmVyYXRlQXJyYXlQcmVmaXggPSBhcnJheVByZWZpeEdlbmVyYXRvcnNbb3B0aW9ucy5hcnJheUZvcm1hdF07XG4gICAgdmFyIGNvbW1hUm91bmRUcmlwID0gZ2VuZXJhdGVBcnJheVByZWZpeCA9PT0gJ2NvbW1hJyAmJiBvcHRpb25zLmNvbW1hUm91bmRUcmlwO1xuXG4gICAgaWYgKCFvYmpLZXlzKSB7XG4gICAgICAgIG9iaktleXMgPSBPYmplY3Qua2V5cyhvYmopO1xuICAgIH1cblxuICAgIGlmIChvcHRpb25zLnNvcnQpIHtcbiAgICAgICAgb2JqS2V5cy5zb3J0KG9wdGlvbnMuc29ydCk7XG4gICAgfVxuXG4gICAgdmFyIHNpZGVDaGFubmVsID0gZ2V0U2lkZUNoYW5uZWwoKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9iaktleXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdmFyIGtleSA9IG9iaktleXNbaV07XG5cbiAgICAgICAgaWYgKG9wdGlvbnMuc2tpcE51bGxzICYmIG9ialtrZXldID09PSBudWxsKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBwdXNoVG9BcnJheShrZXlzLCBzdHJpbmdpZnkoXG4gICAgICAgICAgICBvYmpba2V5XSxcbiAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgIGdlbmVyYXRlQXJyYXlQcmVmaXgsXG4gICAgICAgICAgICBjb21tYVJvdW5kVHJpcCxcbiAgICAgICAgICAgIG9wdGlvbnMuYWxsb3dFbXB0eUFycmF5cyxcbiAgICAgICAgICAgIG9wdGlvbnMuc3RyaWN0TnVsbEhhbmRsaW5nLFxuICAgICAgICAgICAgb3B0aW9ucy5za2lwTnVsbHMsXG4gICAgICAgICAgICBvcHRpb25zLmVuY29kZURvdEluS2V5cyxcbiAgICAgICAgICAgIG9wdGlvbnMuZW5jb2RlID8gb3B0aW9ucy5lbmNvZGVyIDogbnVsbCxcbiAgICAgICAgICAgIG9wdGlvbnMuZmlsdGVyLFxuICAgICAgICAgICAgb3B0aW9ucy5zb3J0LFxuICAgICAgICAgICAgb3B0aW9ucy5hbGxvd0RvdHMsXG4gICAgICAgICAgICBvcHRpb25zLnNlcmlhbGl6ZURhdGUsXG4gICAgICAgICAgICBvcHRpb25zLmZvcm1hdCxcbiAgICAgICAgICAgIG9wdGlvbnMuZm9ybWF0dGVyLFxuICAgICAgICAgICAgb3B0aW9ucy5lbmNvZGVWYWx1ZXNPbmx5LFxuICAgICAgICAgICAgb3B0aW9ucy5jaGFyc2V0LFxuICAgICAgICAgICAgc2lkZUNoYW5uZWxcbiAgICAgICAgKSk7XG4gICAgfVxuXG4gICAgdmFyIGpvaW5lZCA9IGtleXMuam9pbihvcHRpb25zLmRlbGltaXRlcik7XG4gICAgdmFyIHByZWZpeCA9IG9wdGlvbnMuYWRkUXVlcnlQcmVmaXggPT09IHRydWUgPyAnPycgOiAnJztcblxuICAgIGlmIChvcHRpb25zLmNoYXJzZXRTZW50aW5lbCkge1xuICAgICAgICBpZiAob3B0aW9ucy5jaGFyc2V0ID09PSAnaXNvLTg4NTktMScpIHtcbiAgICAgICAgICAgIC8vIGVuY29kZVVSSUNvbXBvbmVudCgnJiMxMDAwMzsnKSwgdGhlIFwibnVtZXJpYyBlbnRpdHlcIiByZXByZXNlbnRhdGlvbiBvZiBhIGNoZWNrbWFya1xuICAgICAgICAgICAgcHJlZml4ICs9ICd1dGY4PSUyNiUyMzEwMDAzJTNCJic7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBlbmNvZGVVUklDb21wb25lbnQoJ+KckycpXG4gICAgICAgICAgICBwcmVmaXggKz0gJ3V0Zjg9JUUyJTlDJTkzJic7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gam9pbmVkLmxlbmd0aCA+IDAgPyBwcmVmaXggKyBqb2luZWQgOiAnJztcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBmb3JtYXRzID0gcmVxdWlyZSgnLi9mb3JtYXRzJyk7XG5cbnZhciBoYXMgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xudmFyIGlzQXJyYXkgPSBBcnJheS5pc0FycmF5O1xuXG52YXIgaGV4VGFibGUgPSAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBhcnJheSA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMjU2OyArK2kpIHtcbiAgICAgICAgYXJyYXkucHVzaCgnJScgKyAoKGkgPCAxNiA/ICcwJyA6ICcnKSArIGkudG9TdHJpbmcoMTYpKS50b1VwcGVyQ2FzZSgpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gYXJyYXk7XG59KCkpO1xuXG52YXIgY29tcGFjdFF1ZXVlID0gZnVuY3Rpb24gY29tcGFjdFF1ZXVlKHF1ZXVlKSB7XG4gICAgd2hpbGUgKHF1ZXVlLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgdmFyIGl0ZW0gPSBxdWV1ZS5wb3AoKTtcbiAgICAgICAgdmFyIG9iaiA9IGl0ZW0ub2JqW2l0ZW0ucHJvcF07XG5cbiAgICAgICAgaWYgKGlzQXJyYXkob2JqKSkge1xuICAgICAgICAgICAgdmFyIGNvbXBhY3RlZCA9IFtdO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG9iai5sZW5ndGg7ICsraikge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb2JqW2pdICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgICAgICBjb21wYWN0ZWQucHVzaChvYmpbal0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaXRlbS5vYmpbaXRlbS5wcm9wXSA9IGNvbXBhY3RlZDtcbiAgICAgICAgfVxuICAgIH1cbn07XG5cbnZhciBhcnJheVRvT2JqZWN0ID0gZnVuY3Rpb24gYXJyYXlUb09iamVjdChzb3VyY2UsIG9wdGlvbnMpIHtcbiAgICB2YXIgb2JqID0gb3B0aW9ucyAmJiBvcHRpb25zLnBsYWluT2JqZWN0cyA/IE9iamVjdC5jcmVhdGUobnVsbCkgOiB7fTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNvdXJjZS5sZW5ndGg7ICsraSkge1xuICAgICAgICBpZiAodHlwZW9mIHNvdXJjZVtpXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIG9ialtpXSA9IHNvdXJjZVtpXTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBvYmo7XG59O1xuXG52YXIgbWVyZ2UgPSBmdW5jdGlvbiBtZXJnZSh0YXJnZXQsIHNvdXJjZSwgb3B0aW9ucykge1xuICAgIC8qIGVzbGludCBuby1wYXJhbS1yZWFzc2lnbjogMCAqL1xuICAgIGlmICghc291cmNlKSB7XG4gICAgICAgIHJldHVybiB0YXJnZXQ7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBzb3VyY2UgIT09ICdvYmplY3QnKSB7XG4gICAgICAgIGlmIChpc0FycmF5KHRhcmdldCkpIHtcbiAgICAgICAgICAgIHRhcmdldC5wdXNoKHNvdXJjZSk7XG4gICAgICAgIH0gZWxzZSBpZiAodGFyZ2V0ICYmIHR5cGVvZiB0YXJnZXQgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICBpZiAoKG9wdGlvbnMgJiYgKG9wdGlvbnMucGxhaW5PYmplY3RzIHx8IG9wdGlvbnMuYWxsb3dQcm90b3R5cGVzKSkgfHwgIWhhcy5jYWxsKE9iamVjdC5wcm90b3R5cGUsIHNvdXJjZSkpIHtcbiAgICAgICAgICAgICAgICB0YXJnZXRbc291cmNlXSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gW3RhcmdldCwgc291cmNlXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0YXJnZXQ7XG4gICAgfVxuXG4gICAgaWYgKCF0YXJnZXQgfHwgdHlwZW9mIHRhcmdldCAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgcmV0dXJuIFt0YXJnZXRdLmNvbmNhdChzb3VyY2UpO1xuICAgIH1cblxuICAgIHZhciBtZXJnZVRhcmdldCA9IHRhcmdldDtcbiAgICBpZiAoaXNBcnJheSh0YXJnZXQpICYmICFpc0FycmF5KHNvdXJjZSkpIHtcbiAgICAgICAgbWVyZ2VUYXJnZXQgPSBhcnJheVRvT2JqZWN0KHRhcmdldCwgb3B0aW9ucyk7XG4gICAgfVxuXG4gICAgaWYgKGlzQXJyYXkodGFyZ2V0KSAmJiBpc0FycmF5KHNvdXJjZSkpIHtcbiAgICAgICAgc291cmNlLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGkpIHtcbiAgICAgICAgICAgIGlmIChoYXMuY2FsbCh0YXJnZXQsIGkpKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldEl0ZW0gPSB0YXJnZXRbaV07XG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldEl0ZW0gJiYgdHlwZW9mIHRhcmdldEl0ZW0gPT09ICdvYmplY3QnICYmIGl0ZW0gJiYgdHlwZW9mIGl0ZW0gPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldFtpXSA9IG1lcmdlKHRhcmdldEl0ZW0sIGl0ZW0sIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldC5wdXNoKGl0ZW0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0W2ldID0gaXRlbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0YXJnZXQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKHNvdXJjZSkucmVkdWNlKGZ1bmN0aW9uIChhY2MsIGtleSkge1xuICAgICAgICB2YXIgdmFsdWUgPSBzb3VyY2Vba2V5XTtcblxuICAgICAgICBpZiAoaGFzLmNhbGwoYWNjLCBrZXkpKSB7XG4gICAgICAgICAgICBhY2Nba2V5XSA9IG1lcmdlKGFjY1trZXldLCB2YWx1ZSwgb3B0aW9ucyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhY2Nba2V5XSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhY2M7XG4gICAgfSwgbWVyZ2VUYXJnZXQpO1xufTtcblxudmFyIGFzc2lnbiA9IGZ1bmN0aW9uIGFzc2lnblNpbmdsZVNvdXJjZSh0YXJnZXQsIHNvdXJjZSkge1xuICAgIHJldHVybiBPYmplY3Qua2V5cyhzb3VyY2UpLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBrZXkpIHtcbiAgICAgICAgYWNjW2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICAgICAgcmV0dXJuIGFjYztcbiAgICB9LCB0YXJnZXQpO1xufTtcblxudmFyIGRlY29kZSA9IGZ1bmN0aW9uIChzdHIsIGRlY29kZXIsIGNoYXJzZXQpIHtcbiAgICB2YXIgc3RyV2l0aG91dFBsdXMgPSBzdHIucmVwbGFjZSgvXFwrL2csICcgJyk7XG4gICAgaWYgKGNoYXJzZXQgPT09ICdpc28tODg1OS0xJykge1xuICAgICAgICAvLyB1bmVzY2FwZSBuZXZlciB0aHJvd3MsIG5vIHRyeS4uLmNhdGNoIG5lZWRlZDpcbiAgICAgICAgcmV0dXJuIHN0cldpdGhvdXRQbHVzLnJlcGxhY2UoLyVbMC05YS1mXXsyfS9naSwgdW5lc2NhcGUpO1xuICAgIH1cbiAgICAvLyB1dGYtOFxuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQoc3RyV2l0aG91dFBsdXMpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIHN0cldpdGhvdXRQbHVzO1xuICAgIH1cbn07XG5cbnZhciBsaW1pdCA9IDEwMjQ7XG5cbi8qIGVzbGludCBvcGVyYXRvci1saW5lYnJlYWs6IFsyLCBcImJlZm9yZVwiXSAqL1xuXG52YXIgZW5jb2RlID0gZnVuY3Rpb24gZW5jb2RlKHN0ciwgZGVmYXVsdEVuY29kZXIsIGNoYXJzZXQsIGtpbmQsIGZvcm1hdCkge1xuICAgIC8vIFRoaXMgY29kZSB3YXMgb3JpZ2luYWxseSB3cml0dGVuIGJ5IEJyaWFuIFdoaXRlIChtc2NkZXgpIGZvciB0aGUgaW8uanMgY29yZSBxdWVyeXN0cmluZyBsaWJyYXJ5LlxuICAgIC8vIEl0IGhhcyBiZWVuIGFkYXB0ZWQgaGVyZSBmb3Igc3RyaWN0ZXIgYWRoZXJlbmNlIHRvIFJGQyAzOTg2XG4gICAgaWYgKHN0ci5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIHN0cjtcbiAgICB9XG5cbiAgICB2YXIgc3RyaW5nID0gc3RyO1xuICAgIGlmICh0eXBlb2Ygc3RyID09PSAnc3ltYm9sJykge1xuICAgICAgICBzdHJpbmcgPSBTeW1ib2wucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoc3RyKTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBzdHIgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHN0cmluZyA9IFN0cmluZyhzdHIpO1xuICAgIH1cblxuICAgIGlmIChjaGFyc2V0ID09PSAnaXNvLTg4NTktMScpIHtcbiAgICAgICAgcmV0dXJuIGVzY2FwZShzdHJpbmcpLnJlcGxhY2UoLyV1WzAtOWEtZl17NH0vZ2ksIGZ1bmN0aW9uICgkMCkge1xuICAgICAgICAgICAgcmV0dXJuICclMjYlMjMnICsgcGFyc2VJbnQoJDAuc2xpY2UoMiksIDE2KSArICclM0InO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICB2YXIgb3V0ID0gJyc7XG4gICAgZm9yICh2YXIgaiA9IDA7IGogPCBzdHJpbmcubGVuZ3RoOyBqICs9IGxpbWl0KSB7XG4gICAgICAgIHZhciBzZWdtZW50ID0gc3RyaW5nLmxlbmd0aCA+PSBsaW1pdCA/IHN0cmluZy5zbGljZShqLCBqICsgbGltaXQpIDogc3RyaW5nO1xuICAgICAgICB2YXIgYXJyID0gW107XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWdtZW50Lmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICB2YXIgYyA9IHNlZ21lbnQuY2hhckNvZGVBdChpKTtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICBjID09PSAweDJEIC8vIC1cbiAgICAgICAgICAgICAgICB8fCBjID09PSAweDJFIC8vIC5cbiAgICAgICAgICAgICAgICB8fCBjID09PSAweDVGIC8vIF9cbiAgICAgICAgICAgICAgICB8fCBjID09PSAweDdFIC8vIH5cbiAgICAgICAgICAgICAgICB8fCAoYyA+PSAweDMwICYmIGMgPD0gMHgzOSkgLy8gMC05XG4gICAgICAgICAgICAgICAgfHwgKGMgPj0gMHg0MSAmJiBjIDw9IDB4NUEpIC8vIGEtelxuICAgICAgICAgICAgICAgIHx8IChjID49IDB4NjEgJiYgYyA8PSAweDdBKSAvLyBBLVpcbiAgICAgICAgICAgICAgICB8fCAoZm9ybWF0ID09PSBmb3JtYXRzLlJGQzE3MzggJiYgKGMgPT09IDB4MjggfHwgYyA9PT0gMHgyOSkpIC8vICggKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgYXJyW2Fyci5sZW5ndGhdID0gc2VnbWVudC5jaGFyQXQoaSk7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChjIDwgMHg4MCkge1xuICAgICAgICAgICAgICAgIGFyclthcnIubGVuZ3RoXSA9IGhleFRhYmxlW2NdO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoYyA8IDB4ODAwKSB7XG4gICAgICAgICAgICAgICAgYXJyW2Fyci5sZW5ndGhdID0gaGV4VGFibGVbMHhDMCB8IChjID4+IDYpXVxuICAgICAgICAgICAgICAgICAgICArIGhleFRhYmxlWzB4ODAgfCAoYyAmIDB4M0YpXTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGMgPCAweEQ4MDAgfHwgYyA+PSAweEUwMDApIHtcbiAgICAgICAgICAgICAgICBhcnJbYXJyLmxlbmd0aF0gPSBoZXhUYWJsZVsweEUwIHwgKGMgPj4gMTIpXVxuICAgICAgICAgICAgICAgICAgICArIGhleFRhYmxlWzB4ODAgfCAoKGMgPj4gNikgJiAweDNGKV1cbiAgICAgICAgICAgICAgICAgICAgKyBoZXhUYWJsZVsweDgwIHwgKGMgJiAweDNGKV07XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGkgKz0gMTtcbiAgICAgICAgICAgIGMgPSAweDEwMDAwICsgKCgoYyAmIDB4M0ZGKSA8PCAxMCkgfCAoc2VnbWVudC5jaGFyQ29kZUF0KGkpICYgMHgzRkYpKTtcblxuICAgICAgICAgICAgYXJyW2Fyci5sZW5ndGhdID0gaGV4VGFibGVbMHhGMCB8IChjID4+IDE4KV1cbiAgICAgICAgICAgICAgICArIGhleFRhYmxlWzB4ODAgfCAoKGMgPj4gMTIpICYgMHgzRildXG4gICAgICAgICAgICAgICAgKyBoZXhUYWJsZVsweDgwIHwgKChjID4+IDYpICYgMHgzRildXG4gICAgICAgICAgICAgICAgKyBoZXhUYWJsZVsweDgwIHwgKGMgJiAweDNGKV07XG4gICAgICAgIH1cblxuICAgICAgICBvdXQgKz0gYXJyLmpvaW4oJycpO1xuICAgIH1cblxuICAgIHJldHVybiBvdXQ7XG59O1xuXG52YXIgY29tcGFjdCA9IGZ1bmN0aW9uIGNvbXBhY3QodmFsdWUpIHtcbiAgICB2YXIgcXVldWUgPSBbeyBvYmo6IHsgbzogdmFsdWUgfSwgcHJvcDogJ28nIH1dO1xuICAgIHZhciByZWZzID0gW107XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHF1ZXVlLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHZhciBpdGVtID0gcXVldWVbaV07XG4gICAgICAgIHZhciBvYmogPSBpdGVtLm9ialtpdGVtLnByb3BdO1xuXG4gICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqKTtcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBrZXlzLmxlbmd0aDsgKytqKSB7XG4gICAgICAgICAgICB2YXIga2V5ID0ga2V5c1tqXTtcbiAgICAgICAgICAgIHZhciB2YWwgPSBvYmpba2V5XTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsID09PSAnb2JqZWN0JyAmJiB2YWwgIT09IG51bGwgJiYgcmVmcy5pbmRleE9mKHZhbCkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgcXVldWUucHVzaCh7IG9iajogb2JqLCBwcm9wOiBrZXkgfSk7XG4gICAgICAgICAgICAgICAgcmVmcy5wdXNoKHZhbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb21wYWN0UXVldWUocXVldWUpO1xuXG4gICAgcmV0dXJuIHZhbHVlO1xufTtcblxudmFyIGlzUmVnRXhwID0gZnVuY3Rpb24gaXNSZWdFeHAob2JqKSB7XG4gICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvYmopID09PSAnW29iamVjdCBSZWdFeHBdJztcbn07XG5cbnZhciBpc0J1ZmZlciA9IGZ1bmN0aW9uIGlzQnVmZmVyKG9iaikge1xuICAgIGlmICghb2JqIHx8IHR5cGVvZiBvYmogIT09ICdvYmplY3QnKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gISEob2JqLmNvbnN0cnVjdG9yICYmIG9iai5jb25zdHJ1Y3Rvci5pc0J1ZmZlciAmJiBvYmouY29uc3RydWN0b3IuaXNCdWZmZXIob2JqKSk7XG59O1xuXG52YXIgY29tYmluZSA9IGZ1bmN0aW9uIGNvbWJpbmUoYSwgYikge1xuICAgIHJldHVybiBbXS5jb25jYXQoYSwgYik7XG59O1xuXG52YXIgbWF5YmVNYXAgPSBmdW5jdGlvbiBtYXliZU1hcCh2YWwsIGZuKSB7XG4gICAgaWYgKGlzQXJyYXkodmFsKSkge1xuICAgICAgICB2YXIgbWFwcGVkID0gW107XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmFsLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICBtYXBwZWQucHVzaChmbih2YWxbaV0pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWFwcGVkO1xuICAgIH1cbiAgICByZXR1cm4gZm4odmFsKTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICAgIGFycmF5VG9PYmplY3Q6IGFycmF5VG9PYmplY3QsXG4gICAgYXNzaWduOiBhc3NpZ24sXG4gICAgY29tYmluZTogY29tYmluZSxcbiAgICBjb21wYWN0OiBjb21wYWN0LFxuICAgIGRlY29kZTogZGVjb2RlLFxuICAgIGVuY29kZTogZW5jb2RlLFxuICAgIGlzQnVmZmVyOiBpc0J1ZmZlcixcbiAgICBpc1JlZ0V4cDogaXNSZWdFeHAsXG4gICAgbWF5YmVNYXA6IG1heWJlTWFwLFxuICAgIG1lcmdlOiBtZXJnZVxufTtcbiIsIi8qXG4gKiBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbiAqXG4gKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuICogY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuICogXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4gKiB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4gKiBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4gKiBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbiAqIGZvbGxvd2luZyBjb25kaXRpb25zOlxuICpcbiAqIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4gKiBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbiAqXG4gKiBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4gKiBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4gKiBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4gKiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbiAqIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuICogT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuICogVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBwdW55Y29kZSA9IHJlcXVpcmUoJ3B1bnljb2RlJyk7XG5cbmZ1bmN0aW9uIFVybCgpIHtcbiAgdGhpcy5wcm90b2NvbCA9IG51bGw7XG4gIHRoaXMuc2xhc2hlcyA9IG51bGw7XG4gIHRoaXMuYXV0aCA9IG51bGw7XG4gIHRoaXMuaG9zdCA9IG51bGw7XG4gIHRoaXMucG9ydCA9IG51bGw7XG4gIHRoaXMuaG9zdG5hbWUgPSBudWxsO1xuICB0aGlzLmhhc2ggPSBudWxsO1xuICB0aGlzLnNlYXJjaCA9IG51bGw7XG4gIHRoaXMucXVlcnkgPSBudWxsO1xuICB0aGlzLnBhdGhuYW1lID0gbnVsbDtcbiAgdGhpcy5wYXRoID0gbnVsbDtcbiAgdGhpcy5ocmVmID0gbnVsbDtcbn1cblxuLy8gUmVmZXJlbmNlOiBSRkMgMzk4NiwgUkZDIDE4MDgsIFJGQyAyMzk2XG5cbi8qXG4gKiBkZWZpbmUgdGhlc2UgaGVyZSBzbyBhdCBsZWFzdCB0aGV5IG9ubHkgaGF2ZSB0byBiZVxuICogY29tcGlsZWQgb25jZSBvbiB0aGUgZmlyc3QgbW9kdWxlIGxvYWQuXG4gKi9cbnZhciBwcm90b2NvbFBhdHRlcm4gPSAvXihbYS16MC05ListXSs6KS9pLFxuICBwb3J0UGF0dGVybiA9IC86WzAtOV0qJC8sXG5cbiAgLy8gU3BlY2lhbCBjYXNlIGZvciBhIHNpbXBsZSBwYXRoIFVSTFxuICBzaW1wbGVQYXRoUGF0dGVybiA9IC9eKFxcL1xcLz8oPyFcXC8pW14/XFxzXSopKFxcP1teXFxzXSopPyQvLFxuXG4gIC8qXG4gICAqIFJGQyAyMzk2OiBjaGFyYWN0ZXJzIHJlc2VydmVkIGZvciBkZWxpbWl0aW5nIFVSTHMuXG4gICAqIFdlIGFjdHVhbGx5IGp1c3QgYXV0by1lc2NhcGUgdGhlc2UuXG4gICAqL1xuICBkZWxpbXMgPSBbXG4gICAgJzwnLCAnPicsICdcIicsICdgJywgJyAnLCAnXFxyJywgJ1xcbicsICdcXHQnXG4gIF0sXG5cbiAgLy8gUkZDIDIzOTY6IGNoYXJhY3RlcnMgbm90IGFsbG93ZWQgZm9yIHZhcmlvdXMgcmVhc29ucy5cbiAgdW53aXNlID0gW1xuICAgICd7JywgJ30nLCAnfCcsICdcXFxcJywgJ14nLCAnYCdcbiAgXS5jb25jYXQoZGVsaW1zKSxcblxuICAvLyBBbGxvd2VkIGJ5IFJGQ3MsIGJ1dCBjYXVzZSBvZiBYU1MgYXR0YWNrcy4gIEFsd2F5cyBlc2NhcGUgdGhlc2UuXG4gIGF1dG9Fc2NhcGUgPSBbJ1xcJyddLmNvbmNhdCh1bndpc2UpLFxuICAvKlxuICAgKiBDaGFyYWN0ZXJzIHRoYXQgYXJlIG5ldmVyIGV2ZXIgYWxsb3dlZCBpbiBhIGhvc3RuYW1lLlxuICAgKiBOb3RlIHRoYXQgYW55IGludmFsaWQgY2hhcnMgYXJlIGFsc28gaGFuZGxlZCwgYnV0IHRoZXNlXG4gICAqIGFyZSB0aGUgb25lcyB0aGF0IGFyZSAqZXhwZWN0ZWQqIHRvIGJlIHNlZW4sIHNvIHdlIGZhc3QtcGF0aFxuICAgKiB0aGVtLlxuICAgKi9cbiAgbm9uSG9zdENoYXJzID0gW1xuICAgICclJywgJy8nLCAnPycsICc7JywgJyMnXG4gIF0uY29uY2F0KGF1dG9Fc2NhcGUpLFxuICBob3N0RW5kaW5nQ2hhcnMgPSBbXG4gICAgJy8nLCAnPycsICcjJ1xuICBdLFxuICBob3N0bmFtZU1heExlbiA9IDI1NSxcbiAgaG9zdG5hbWVQYXJ0UGF0dGVybiA9IC9eWythLXowLTlBLVpfLV17MCw2M30kLyxcbiAgaG9zdG5hbWVQYXJ0U3RhcnQgPSAvXihbK2EtejAtOUEtWl8tXXswLDYzfSkoLiopJC8sXG4gIC8vIHByb3RvY29scyB0aGF0IGNhbiBhbGxvdyBcInVuc2FmZVwiIGFuZCBcInVud2lzZVwiIGNoYXJzLlxuICB1bnNhZmVQcm90b2NvbCA9IHtcbiAgICBqYXZhc2NyaXB0OiB0cnVlLFxuICAgICdqYXZhc2NyaXB0Oic6IHRydWVcbiAgfSxcbiAgLy8gcHJvdG9jb2xzIHRoYXQgbmV2ZXIgaGF2ZSBhIGhvc3RuYW1lLlxuICBob3N0bGVzc1Byb3RvY29sID0ge1xuICAgIGphdmFzY3JpcHQ6IHRydWUsXG4gICAgJ2phdmFzY3JpcHQ6JzogdHJ1ZVxuICB9LFxuICAvLyBwcm90b2NvbHMgdGhhdCBhbHdheXMgY29udGFpbiBhIC8vIGJpdC5cbiAgc2xhc2hlZFByb3RvY29sID0ge1xuICAgIGh0dHA6IHRydWUsXG4gICAgaHR0cHM6IHRydWUsXG4gICAgZnRwOiB0cnVlLFxuICAgIGdvcGhlcjogdHJ1ZSxcbiAgICBmaWxlOiB0cnVlLFxuICAgICdodHRwOic6IHRydWUsXG4gICAgJ2h0dHBzOic6IHRydWUsXG4gICAgJ2Z0cDonOiB0cnVlLFxuICAgICdnb3BoZXI6JzogdHJ1ZSxcbiAgICAnZmlsZTonOiB0cnVlXG4gIH0sXG4gIHF1ZXJ5c3RyaW5nID0gcmVxdWlyZSgncXMnKTtcblxuZnVuY3Rpb24gdXJsUGFyc2UodXJsLCBwYXJzZVF1ZXJ5U3RyaW5nLCBzbGFzaGVzRGVub3RlSG9zdCkge1xuICBpZiAodXJsICYmIHR5cGVvZiB1cmwgPT09ICdvYmplY3QnICYmIHVybCBpbnN0YW5jZW9mIFVybCkgeyByZXR1cm4gdXJsOyB9XG5cbiAgdmFyIHUgPSBuZXcgVXJsKCk7XG4gIHUucGFyc2UodXJsLCBwYXJzZVF1ZXJ5U3RyaW5nLCBzbGFzaGVzRGVub3RlSG9zdCk7XG4gIHJldHVybiB1O1xufVxuXG5VcmwucHJvdG90eXBlLnBhcnNlID0gZnVuY3Rpb24gKHVybCwgcGFyc2VRdWVyeVN0cmluZywgc2xhc2hlc0Rlbm90ZUhvc3QpIHtcbiAgaWYgKHR5cGVvZiB1cmwgIT09ICdzdHJpbmcnKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlBhcmFtZXRlciAndXJsJyBtdXN0IGJlIGEgc3RyaW5nLCBub3QgXCIgKyB0eXBlb2YgdXJsKTtcbiAgfVxuXG4gIC8qXG4gICAqIENvcHkgY2hyb21lLCBJRSwgb3BlcmEgYmFja3NsYXNoLWhhbmRsaW5nIGJlaGF2aW9yLlxuICAgKiBCYWNrIHNsYXNoZXMgYmVmb3JlIHRoZSBxdWVyeSBzdHJpbmcgZ2V0IGNvbnZlcnRlZCB0byBmb3J3YXJkIHNsYXNoZXNcbiAgICogU2VlOiBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9MjU5MTZcbiAgICovXG4gIHZhciBxdWVyeUluZGV4ID0gdXJsLmluZGV4T2YoJz8nKSxcbiAgICBzcGxpdHRlciA9IHF1ZXJ5SW5kZXggIT09IC0xICYmIHF1ZXJ5SW5kZXggPCB1cmwuaW5kZXhPZignIycpID8gJz8nIDogJyMnLFxuICAgIHVTcGxpdCA9IHVybC5zcGxpdChzcGxpdHRlciksXG4gICAgc2xhc2hSZWdleCA9IC9cXFxcL2c7XG4gIHVTcGxpdFswXSA9IHVTcGxpdFswXS5yZXBsYWNlKHNsYXNoUmVnZXgsICcvJyk7XG4gIHVybCA9IHVTcGxpdC5qb2luKHNwbGl0dGVyKTtcblxuICB2YXIgcmVzdCA9IHVybDtcblxuICAvKlxuICAgKiB0cmltIGJlZm9yZSBwcm9jZWVkaW5nLlxuICAgKiBUaGlzIGlzIHRvIHN1cHBvcnQgcGFyc2Ugc3R1ZmYgbGlrZSBcIiAgaHR0cDovL2Zvby5jb20gIFxcblwiXG4gICAqL1xuICByZXN0ID0gcmVzdC50cmltKCk7XG5cbiAgaWYgKCFzbGFzaGVzRGVub3RlSG9zdCAmJiB1cmwuc3BsaXQoJyMnKS5sZW5ndGggPT09IDEpIHtcbiAgICAvLyBUcnkgZmFzdCBwYXRoIHJlZ2V4cFxuICAgIHZhciBzaW1wbGVQYXRoID0gc2ltcGxlUGF0aFBhdHRlcm4uZXhlYyhyZXN0KTtcbiAgICBpZiAoc2ltcGxlUGF0aCkge1xuICAgICAgdGhpcy5wYXRoID0gcmVzdDtcbiAgICAgIHRoaXMuaHJlZiA9IHJlc3Q7XG4gICAgICB0aGlzLnBhdGhuYW1lID0gc2ltcGxlUGF0aFsxXTtcbiAgICAgIGlmIChzaW1wbGVQYXRoWzJdKSB7XG4gICAgICAgIHRoaXMuc2VhcmNoID0gc2ltcGxlUGF0aFsyXTtcbiAgICAgICAgaWYgKHBhcnNlUXVlcnlTdHJpbmcpIHtcbiAgICAgICAgICB0aGlzLnF1ZXJ5ID0gcXVlcnlzdHJpbmcucGFyc2UodGhpcy5zZWFyY2guc3Vic3RyKDEpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnF1ZXJ5ID0gdGhpcy5zZWFyY2guc3Vic3RyKDEpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHBhcnNlUXVlcnlTdHJpbmcpIHtcbiAgICAgICAgdGhpcy5zZWFyY2ggPSAnJztcbiAgICAgICAgdGhpcy5xdWVyeSA9IHt9O1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICB9XG5cbiAgdmFyIHByb3RvID0gcHJvdG9jb2xQYXR0ZXJuLmV4ZWMocmVzdCk7XG4gIGlmIChwcm90bykge1xuICAgIHByb3RvID0gcHJvdG9bMF07XG4gICAgdmFyIGxvd2VyUHJvdG8gPSBwcm90by50b0xvd2VyQ2FzZSgpO1xuICAgIHRoaXMucHJvdG9jb2wgPSBsb3dlclByb3RvO1xuICAgIHJlc3QgPSByZXN0LnN1YnN0cihwcm90by5sZW5ndGgpO1xuICB9XG5cbiAgLypcbiAgICogZmlndXJlIG91dCBpZiBpdCdzIGdvdCBhIGhvc3RcbiAgICogdXNlckBzZXJ2ZXIgaXMgKmFsd2F5cyogaW50ZXJwcmV0ZWQgYXMgYSBob3N0bmFtZSwgYW5kIHVybFxuICAgKiByZXNvbHV0aW9uIHdpbGwgdHJlYXQgLy9mb28vYmFyIGFzIGhvc3Q9Zm9vLHBhdGg9YmFyIGJlY2F1c2UgdGhhdCdzXG4gICAqIGhvdyB0aGUgYnJvd3NlciByZXNvbHZlcyByZWxhdGl2ZSBVUkxzLlxuICAgKi9cbiAgaWYgKHNsYXNoZXNEZW5vdGVIb3N0IHx8IHByb3RvIHx8IHJlc3QubWF0Y2goL15cXC9cXC9bXkAvXStAW15AL10rLykpIHtcbiAgICB2YXIgc2xhc2hlcyA9IHJlc3Quc3Vic3RyKDAsIDIpID09PSAnLy8nO1xuICAgIGlmIChzbGFzaGVzICYmICEocHJvdG8gJiYgaG9zdGxlc3NQcm90b2NvbFtwcm90b10pKSB7XG4gICAgICByZXN0ID0gcmVzdC5zdWJzdHIoMik7XG4gICAgICB0aGlzLnNsYXNoZXMgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIGlmICghaG9zdGxlc3NQcm90b2NvbFtwcm90b10gJiYgKHNsYXNoZXMgfHwgKHByb3RvICYmICFzbGFzaGVkUHJvdG9jb2xbcHJvdG9dKSkpIHtcblxuICAgIC8qXG4gICAgICogdGhlcmUncyBhIGhvc3RuYW1lLlxuICAgICAqIHRoZSBmaXJzdCBpbnN0YW5jZSBvZiAvLCA/LCA7LCBvciAjIGVuZHMgdGhlIGhvc3QuXG4gICAgICpcbiAgICAgKiBJZiB0aGVyZSBpcyBhbiBAIGluIHRoZSBob3N0bmFtZSwgdGhlbiBub24taG9zdCBjaGFycyAqYXJlKiBhbGxvd2VkXG4gICAgICogdG8gdGhlIGxlZnQgb2YgdGhlIGxhc3QgQCBzaWduLCB1bmxlc3Mgc29tZSBob3N0LWVuZGluZyBjaGFyYWN0ZXJcbiAgICAgKiBjb21lcyAqYmVmb3JlKiB0aGUgQC1zaWduLlxuICAgICAqIFVSTHMgYXJlIG9ibm94aW91cy5cbiAgICAgKlxuICAgICAqIGV4OlxuICAgICAqIGh0dHA6Ly9hQGJAYy8gPT4gdXNlcjphQGIgaG9zdDpjXG4gICAgICogaHR0cDovL2FAYj9AYyA9PiB1c2VyOmEgaG9zdDpjIHBhdGg6Lz9AY1xuICAgICAqL1xuXG4gICAgLypcbiAgICAgKiB2MC4xMiBUT0RPKGlzYWFjcyk6IFRoaXMgaXMgbm90IHF1aXRlIGhvdyBDaHJvbWUgZG9lcyB0aGluZ3MuXG4gICAgICogUmV2aWV3IG91ciB0ZXN0IGNhc2UgYWdhaW5zdCBicm93c2VycyBtb3JlIGNvbXByZWhlbnNpdmVseS5cbiAgICAgKi9cblxuICAgIC8vIGZpbmQgdGhlIGZpcnN0IGluc3RhbmNlIG9mIGFueSBob3N0RW5kaW5nQ2hhcnNcbiAgICB2YXIgaG9zdEVuZCA9IC0xO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaG9zdEVuZGluZ0NoYXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgaGVjID0gcmVzdC5pbmRleE9mKGhvc3RFbmRpbmdDaGFyc1tpXSk7XG4gICAgICBpZiAoaGVjICE9PSAtMSAmJiAoaG9zdEVuZCA9PT0gLTEgfHwgaGVjIDwgaG9zdEVuZCkpIHsgaG9zdEVuZCA9IGhlYzsgfVxuICAgIH1cblxuICAgIC8qXG4gICAgICogYXQgdGhpcyBwb2ludCwgZWl0aGVyIHdlIGhhdmUgYW4gZXhwbGljaXQgcG9pbnQgd2hlcmUgdGhlXG4gICAgICogYXV0aCBwb3J0aW9uIGNhbm5vdCBnbyBwYXN0LCBvciB0aGUgbGFzdCBAIGNoYXIgaXMgdGhlIGRlY2lkZXIuXG4gICAgICovXG4gICAgdmFyIGF1dGgsIGF0U2lnbjtcbiAgICBpZiAoaG9zdEVuZCA9PT0gLTEpIHtcbiAgICAgIC8vIGF0U2lnbiBjYW4gYmUgYW55d2hlcmUuXG4gICAgICBhdFNpZ24gPSByZXN0Lmxhc3RJbmRleE9mKCdAJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8qXG4gICAgICAgKiBhdFNpZ24gbXVzdCBiZSBpbiBhdXRoIHBvcnRpb24uXG4gICAgICAgKiBodHRwOi8vYUBiL2NAZCA9PiBob3N0OmIgYXV0aDphIHBhdGg6L2NAZFxuICAgICAgICovXG4gICAgICBhdFNpZ24gPSByZXN0Lmxhc3RJbmRleE9mKCdAJywgaG9zdEVuZCk7XG4gICAgfVxuXG4gICAgLypcbiAgICAgKiBOb3cgd2UgaGF2ZSBhIHBvcnRpb24gd2hpY2ggaXMgZGVmaW5pdGVseSB0aGUgYXV0aC5cbiAgICAgKiBQdWxsIHRoYXQgb2ZmLlxuICAgICAqL1xuICAgIGlmIChhdFNpZ24gIT09IC0xKSB7XG4gICAgICBhdXRoID0gcmVzdC5zbGljZSgwLCBhdFNpZ24pO1xuICAgICAgcmVzdCA9IHJlc3Quc2xpY2UoYXRTaWduICsgMSk7XG4gICAgICB0aGlzLmF1dGggPSBkZWNvZGVVUklDb21wb25lbnQoYXV0aCk7XG4gICAgfVxuXG4gICAgLy8gdGhlIGhvc3QgaXMgdGhlIHJlbWFpbmluZyB0byB0aGUgbGVmdCBvZiB0aGUgZmlyc3Qgbm9uLWhvc3QgY2hhclxuICAgIGhvc3RFbmQgPSAtMTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5vbkhvc3RDaGFycy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGhlYyA9IHJlc3QuaW5kZXhPZihub25Ib3N0Q2hhcnNbaV0pO1xuICAgICAgaWYgKGhlYyAhPT0gLTEgJiYgKGhvc3RFbmQgPT09IC0xIHx8IGhlYyA8IGhvc3RFbmQpKSB7IGhvc3RFbmQgPSBoZWM7IH1cbiAgICB9XG4gICAgLy8gaWYgd2Ugc3RpbGwgaGF2ZSBub3QgaGl0IGl0LCB0aGVuIHRoZSBlbnRpcmUgdGhpbmcgaXMgYSBob3N0LlxuICAgIGlmIChob3N0RW5kID09PSAtMSkgeyBob3N0RW5kID0gcmVzdC5sZW5ndGg7IH1cblxuICAgIHRoaXMuaG9zdCA9IHJlc3Quc2xpY2UoMCwgaG9zdEVuZCk7XG4gICAgcmVzdCA9IHJlc3Quc2xpY2UoaG9zdEVuZCk7XG5cbiAgICAvLyBwdWxsIG91dCBwb3J0LlxuICAgIHRoaXMucGFyc2VIb3N0KCk7XG5cbiAgICAvKlxuICAgICAqIHdlJ3ZlIGluZGljYXRlZCB0aGF0IHRoZXJlIGlzIGEgaG9zdG5hbWUsXG4gICAgICogc28gZXZlbiBpZiBpdCdzIGVtcHR5LCBpdCBoYXMgdG8gYmUgcHJlc2VudC5cbiAgICAgKi9cbiAgICB0aGlzLmhvc3RuYW1lID0gdGhpcy5ob3N0bmFtZSB8fCAnJztcblxuICAgIC8qXG4gICAgICogaWYgaG9zdG5hbWUgYmVnaW5zIHdpdGggWyBhbmQgZW5kcyB3aXRoIF1cbiAgICAgKiBhc3N1bWUgdGhhdCBpdCdzIGFuIElQdjYgYWRkcmVzcy5cbiAgICAgKi9cbiAgICB2YXIgaXB2Nkhvc3RuYW1lID0gdGhpcy5ob3N0bmFtZVswXSA9PT0gJ1snICYmIHRoaXMuaG9zdG5hbWVbdGhpcy5ob3N0bmFtZS5sZW5ndGggLSAxXSA9PT0gJ10nO1xuXG4gICAgLy8gdmFsaWRhdGUgYSBsaXR0bGUuXG4gICAgaWYgKCFpcHY2SG9zdG5hbWUpIHtcbiAgICAgIHZhciBob3N0cGFydHMgPSB0aGlzLmhvc3RuYW1lLnNwbGl0KC9cXC4vKTtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gaG9zdHBhcnRzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICB2YXIgcGFydCA9IGhvc3RwYXJ0c1tpXTtcbiAgICAgICAgaWYgKCFwYXJ0KSB7IGNvbnRpbnVlOyB9XG4gICAgICAgIGlmICghcGFydC5tYXRjaChob3N0bmFtZVBhcnRQYXR0ZXJuKSkge1xuICAgICAgICAgIHZhciBuZXdwYXJ0ID0gJyc7XG4gICAgICAgICAgZm9yICh2YXIgaiA9IDAsIGsgPSBwYXJ0Lmxlbmd0aDsgaiA8IGs7IGorKykge1xuICAgICAgICAgICAgaWYgKHBhcnQuY2hhckNvZGVBdChqKSA+IDEyNykge1xuICAgICAgICAgICAgICAvKlxuICAgICAgICAgICAgICAgKiB3ZSByZXBsYWNlIG5vbi1BU0NJSSBjaGFyIHdpdGggYSB0ZW1wb3JhcnkgcGxhY2Vob2xkZXJcbiAgICAgICAgICAgICAgICogd2UgbmVlZCB0aGlzIHRvIG1ha2Ugc3VyZSBzaXplIG9mIGhvc3RuYW1lIGlzIG5vdFxuICAgICAgICAgICAgICAgKiBicm9rZW4gYnkgcmVwbGFjaW5nIG5vbi1BU0NJSSBieSBub3RoaW5nXG4gICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICBuZXdwYXJ0ICs9ICd4JztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIG5ld3BhcnQgKz0gcGFydFtqXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gd2UgdGVzdCBhZ2FpbiB3aXRoIEFTQ0lJIGNoYXIgb25seVxuICAgICAgICAgIGlmICghbmV3cGFydC5tYXRjaChob3N0bmFtZVBhcnRQYXR0ZXJuKSkge1xuICAgICAgICAgICAgdmFyIHZhbGlkUGFydHMgPSBob3N0cGFydHMuc2xpY2UoMCwgaSk7XG4gICAgICAgICAgICB2YXIgbm90SG9zdCA9IGhvc3RwYXJ0cy5zbGljZShpICsgMSk7XG4gICAgICAgICAgICB2YXIgYml0ID0gcGFydC5tYXRjaChob3N0bmFtZVBhcnRTdGFydCk7XG4gICAgICAgICAgICBpZiAoYml0KSB7XG4gICAgICAgICAgICAgIHZhbGlkUGFydHMucHVzaChiaXRbMV0pO1xuICAgICAgICAgICAgICBub3RIb3N0LnVuc2hpZnQoYml0WzJdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChub3RIb3N0Lmxlbmd0aCkge1xuICAgICAgICAgICAgICByZXN0ID0gJy8nICsgbm90SG9zdC5qb2luKCcuJykgKyByZXN0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5ob3N0bmFtZSA9IHZhbGlkUGFydHMuam9pbignLicpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaG9zdG5hbWUubGVuZ3RoID4gaG9zdG5hbWVNYXhMZW4pIHtcbiAgICAgIHRoaXMuaG9zdG5hbWUgPSAnJztcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gaG9zdG5hbWVzIGFyZSBhbHdheXMgbG93ZXIgY2FzZS5cbiAgICAgIHRoaXMuaG9zdG5hbWUgPSB0aGlzLmhvc3RuYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgfVxuXG4gICAgaWYgKCFpcHY2SG9zdG5hbWUpIHtcbiAgICAgIC8qXG4gICAgICAgKiBJRE5BIFN1cHBvcnQ6IFJldHVybnMgYSBwdW55Y29kZWQgcmVwcmVzZW50YXRpb24gb2YgXCJkb21haW5cIi5cbiAgICAgICAqIEl0IG9ubHkgY29udmVydHMgcGFydHMgb2YgdGhlIGRvbWFpbiBuYW1lIHRoYXRcbiAgICAgICAqIGhhdmUgbm9uLUFTQ0lJIGNoYXJhY3RlcnMsIGkuZS4gaXQgZG9lc24ndCBtYXR0ZXIgaWZcbiAgICAgICAqIHlvdSBjYWxsIGl0IHdpdGggYSBkb21haW4gdGhhdCBhbHJlYWR5IGlzIEFTQ0lJLW9ubHkuXG4gICAgICAgKi9cbiAgICAgIHRoaXMuaG9zdG5hbWUgPSBwdW55Y29kZS50b0FTQ0lJKHRoaXMuaG9zdG5hbWUpO1xuICAgIH1cblxuICAgIHZhciBwID0gdGhpcy5wb3J0ID8gJzonICsgdGhpcy5wb3J0IDogJyc7XG4gICAgdmFyIGggPSB0aGlzLmhvc3RuYW1lIHx8ICcnO1xuICAgIHRoaXMuaG9zdCA9IGggKyBwO1xuICAgIHRoaXMuaHJlZiArPSB0aGlzLmhvc3Q7XG5cbiAgICAvKlxuICAgICAqIHN0cmlwIFsgYW5kIF0gZnJvbSB0aGUgaG9zdG5hbWVcbiAgICAgKiB0aGUgaG9zdCBmaWVsZCBzdGlsbCByZXRhaW5zIHRoZW0sIHRob3VnaFxuICAgICAqL1xuICAgIGlmIChpcHY2SG9zdG5hbWUpIHtcbiAgICAgIHRoaXMuaG9zdG5hbWUgPSB0aGlzLmhvc3RuYW1lLnN1YnN0cigxLCB0aGlzLmhvc3RuYW1lLmxlbmd0aCAtIDIpO1xuICAgICAgaWYgKHJlc3RbMF0gIT09ICcvJykge1xuICAgICAgICByZXN0ID0gJy8nICsgcmVzdDtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKlxuICAgKiBub3cgcmVzdCBpcyBzZXQgdG8gdGhlIHBvc3QtaG9zdCBzdHVmZi5cbiAgICogY2hvcCBvZmYgYW55IGRlbGltIGNoYXJzLlxuICAgKi9cbiAgaWYgKCF1bnNhZmVQcm90b2NvbFtsb3dlclByb3RvXSkge1xuXG4gICAgLypcbiAgICAgKiBGaXJzdCwgbWFrZSAxMDAlIHN1cmUgdGhhdCBhbnkgXCJhdXRvRXNjYXBlXCIgY2hhcnMgZ2V0XG4gICAgICogZXNjYXBlZCwgZXZlbiBpZiBlbmNvZGVVUklDb21wb25lbnQgZG9lc24ndCB0aGluayB0aGV5XG4gICAgICogbmVlZCB0byBiZS5cbiAgICAgKi9cbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IGF1dG9Fc2NhcGUubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICB2YXIgYWUgPSBhdXRvRXNjYXBlW2ldO1xuICAgICAgaWYgKHJlc3QuaW5kZXhPZihhZSkgPT09IC0xKSB7IGNvbnRpbnVlOyB9XG4gICAgICB2YXIgZXNjID0gZW5jb2RlVVJJQ29tcG9uZW50KGFlKTtcbiAgICAgIGlmIChlc2MgPT09IGFlKSB7XG4gICAgICAgIGVzYyA9IGVzY2FwZShhZSk7XG4gICAgICB9XG4gICAgICByZXN0ID0gcmVzdC5zcGxpdChhZSkuam9pbihlc2MpO1xuICAgIH1cbiAgfVxuXG4gIC8vIGNob3Agb2ZmIGZyb20gdGhlIHRhaWwgZmlyc3QuXG4gIHZhciBoYXNoID0gcmVzdC5pbmRleE9mKCcjJyk7XG4gIGlmIChoYXNoICE9PSAtMSkge1xuICAgIC8vIGdvdCBhIGZyYWdtZW50IHN0cmluZy5cbiAgICB0aGlzLmhhc2ggPSByZXN0LnN1YnN0cihoYXNoKTtcbiAgICByZXN0ID0gcmVzdC5zbGljZSgwLCBoYXNoKTtcbiAgfVxuICB2YXIgcW0gPSByZXN0LmluZGV4T2YoJz8nKTtcbiAgaWYgKHFtICE9PSAtMSkge1xuICAgIHRoaXMuc2VhcmNoID0gcmVzdC5zdWJzdHIocW0pO1xuICAgIHRoaXMucXVlcnkgPSByZXN0LnN1YnN0cihxbSArIDEpO1xuICAgIGlmIChwYXJzZVF1ZXJ5U3RyaW5nKSB7XG4gICAgICB0aGlzLnF1ZXJ5ID0gcXVlcnlzdHJpbmcucGFyc2UodGhpcy5xdWVyeSk7XG4gICAgfVxuICAgIHJlc3QgPSByZXN0LnNsaWNlKDAsIHFtKTtcbiAgfSBlbHNlIGlmIChwYXJzZVF1ZXJ5U3RyaW5nKSB7XG4gICAgLy8gbm8gcXVlcnkgc3RyaW5nLCBidXQgcGFyc2VRdWVyeVN0cmluZyBzdGlsbCByZXF1ZXN0ZWRcbiAgICB0aGlzLnNlYXJjaCA9ICcnO1xuICAgIHRoaXMucXVlcnkgPSB7fTtcbiAgfVxuICBpZiAocmVzdCkgeyB0aGlzLnBhdGhuYW1lID0gcmVzdDsgfVxuICBpZiAoc2xhc2hlZFByb3RvY29sW2xvd2VyUHJvdG9dICYmIHRoaXMuaG9zdG5hbWUgJiYgIXRoaXMucGF0aG5hbWUpIHtcbiAgICB0aGlzLnBhdGhuYW1lID0gJy8nO1xuICB9XG5cbiAgLy8gdG8gc3VwcG9ydCBodHRwLnJlcXVlc3RcbiAgaWYgKHRoaXMucGF0aG5hbWUgfHwgdGhpcy5zZWFyY2gpIHtcbiAgICB2YXIgcCA9IHRoaXMucGF0aG5hbWUgfHwgJyc7XG4gICAgdmFyIHMgPSB0aGlzLnNlYXJjaCB8fCAnJztcbiAgICB0aGlzLnBhdGggPSBwICsgcztcbiAgfVxuXG4gIC8vIGZpbmFsbHksIHJlY29uc3RydWN0IHRoZSBocmVmIGJhc2VkIG9uIHdoYXQgaGFzIGJlZW4gdmFsaWRhdGVkLlxuICB0aGlzLmhyZWYgPSB0aGlzLmZvcm1hdCgpO1xuICByZXR1cm4gdGhpcztcbn07XG5cbi8vIGZvcm1hdCBhIHBhcnNlZCBvYmplY3QgaW50byBhIHVybCBzdHJpbmdcbmZ1bmN0aW9uIHVybEZvcm1hdChvYmopIHtcbiAgLypcbiAgICogZW5zdXJlIGl0J3MgYW4gb2JqZWN0LCBhbmQgbm90IGEgc3RyaW5nIHVybC5cbiAgICogSWYgaXQncyBhbiBvYmosIHRoaXMgaXMgYSBuby1vcC5cbiAgICogdGhpcyB3YXksIHlvdSBjYW4gY2FsbCB1cmxfZm9ybWF0KCkgb24gc3RyaW5nc1xuICAgKiB0byBjbGVhbiB1cCBwb3RlbnRpYWxseSB3b25reSB1cmxzLlxuICAgKi9cbiAgaWYgKHR5cGVvZiBvYmogPT09ICdzdHJpbmcnKSB7IG9iaiA9IHVybFBhcnNlKG9iaik7IH1cbiAgaWYgKCEob2JqIGluc3RhbmNlb2YgVXJsKSkgeyByZXR1cm4gVXJsLnByb3RvdHlwZS5mb3JtYXQuY2FsbChvYmopOyB9XG4gIHJldHVybiBvYmouZm9ybWF0KCk7XG59XG5cblVybC5wcm90b3R5cGUuZm9ybWF0ID0gZnVuY3Rpb24gKCkge1xuICB2YXIgYXV0aCA9IHRoaXMuYXV0aCB8fCAnJztcbiAgaWYgKGF1dGgpIHtcbiAgICBhdXRoID0gZW5jb2RlVVJJQ29tcG9uZW50KGF1dGgpO1xuICAgIGF1dGggPSBhdXRoLnJlcGxhY2UoLyUzQS9pLCAnOicpO1xuICAgIGF1dGggKz0gJ0AnO1xuICB9XG5cbiAgdmFyIHByb3RvY29sID0gdGhpcy5wcm90b2NvbCB8fCAnJyxcbiAgICBwYXRobmFtZSA9IHRoaXMucGF0aG5hbWUgfHwgJycsXG4gICAgaGFzaCA9IHRoaXMuaGFzaCB8fCAnJyxcbiAgICBob3N0ID0gZmFsc2UsXG4gICAgcXVlcnkgPSAnJztcblxuICBpZiAodGhpcy5ob3N0KSB7XG4gICAgaG9zdCA9IGF1dGggKyB0aGlzLmhvc3Q7XG4gIH0gZWxzZSBpZiAodGhpcy5ob3N0bmFtZSkge1xuICAgIGhvc3QgPSBhdXRoICsgKHRoaXMuaG9zdG5hbWUuaW5kZXhPZignOicpID09PSAtMSA/IHRoaXMuaG9zdG5hbWUgOiAnWycgKyB0aGlzLmhvc3RuYW1lICsgJ10nKTtcbiAgICBpZiAodGhpcy5wb3J0KSB7XG4gICAgICBob3N0ICs9ICc6JyArIHRoaXMucG9ydDtcbiAgICB9XG4gIH1cblxuICBpZiAodGhpcy5xdWVyeSAmJiB0eXBlb2YgdGhpcy5xdWVyeSA9PT0gJ29iamVjdCcgJiYgT2JqZWN0LmtleXModGhpcy5xdWVyeSkubGVuZ3RoKSB7XG4gICAgcXVlcnkgPSBxdWVyeXN0cmluZy5zdHJpbmdpZnkodGhpcy5xdWVyeSwge1xuICAgICAgYXJyYXlGb3JtYXQ6ICdyZXBlYXQnLFxuICAgICAgYWRkUXVlcnlQcmVmaXg6IGZhbHNlXG4gICAgfSk7XG4gIH1cblxuICB2YXIgc2VhcmNoID0gdGhpcy5zZWFyY2ggfHwgKHF1ZXJ5ICYmICgnPycgKyBxdWVyeSkpIHx8ICcnO1xuXG4gIGlmIChwcm90b2NvbCAmJiBwcm90b2NvbC5zdWJzdHIoLTEpICE9PSAnOicpIHsgcHJvdG9jb2wgKz0gJzonOyB9XG5cbiAgLypcbiAgICogb25seSB0aGUgc2xhc2hlZFByb3RvY29scyBnZXQgdGhlIC8vLiAgTm90IG1haWx0bzosIHhtcHA6LCBldGMuXG4gICAqIHVubGVzcyB0aGV5IGhhZCB0aGVtIHRvIGJlZ2luIHdpdGguXG4gICAqL1xuICBpZiAodGhpcy5zbGFzaGVzIHx8ICghcHJvdG9jb2wgfHwgc2xhc2hlZFByb3RvY29sW3Byb3RvY29sXSkgJiYgaG9zdCAhPT0gZmFsc2UpIHtcbiAgICBob3N0ID0gJy8vJyArIChob3N0IHx8ICcnKTtcbiAgICBpZiAocGF0aG5hbWUgJiYgcGF0aG5hbWUuY2hhckF0KDApICE9PSAnLycpIHsgcGF0aG5hbWUgPSAnLycgKyBwYXRobmFtZTsgfVxuICB9IGVsc2UgaWYgKCFob3N0KSB7XG4gICAgaG9zdCA9ICcnO1xuICB9XG5cbiAgaWYgKGhhc2ggJiYgaGFzaC5jaGFyQXQoMCkgIT09ICcjJykgeyBoYXNoID0gJyMnICsgaGFzaDsgfVxuICBpZiAoc2VhcmNoICYmIHNlYXJjaC5jaGFyQXQoMCkgIT09ICc/JykgeyBzZWFyY2ggPSAnPycgKyBzZWFyY2g7IH1cblxuICBwYXRobmFtZSA9IHBhdGhuYW1lLnJlcGxhY2UoL1s/I10vZywgZnVuY3Rpb24gKG1hdGNoKSB7XG4gICAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChtYXRjaCk7XG4gIH0pO1xuICBzZWFyY2ggPSBzZWFyY2gucmVwbGFjZSgnIycsICclMjMnKTtcblxuICByZXR1cm4gcHJvdG9jb2wgKyBob3N0ICsgcGF0aG5hbWUgKyBzZWFyY2ggKyBoYXNoO1xufTtcblxuZnVuY3Rpb24gdXJsUmVzb2x2ZShzb3VyY2UsIHJlbGF0aXZlKSB7XG4gIHJldHVybiB1cmxQYXJzZShzb3VyY2UsIGZhbHNlLCB0cnVlKS5yZXNvbHZlKHJlbGF0aXZlKTtcbn1cblxuVXJsLnByb3RvdHlwZS5yZXNvbHZlID0gZnVuY3Rpb24gKHJlbGF0aXZlKSB7XG4gIHJldHVybiB0aGlzLnJlc29sdmVPYmplY3QodXJsUGFyc2UocmVsYXRpdmUsIGZhbHNlLCB0cnVlKSkuZm9ybWF0KCk7XG59O1xuXG5mdW5jdGlvbiB1cmxSZXNvbHZlT2JqZWN0KHNvdXJjZSwgcmVsYXRpdmUpIHtcbiAgaWYgKCFzb3VyY2UpIHsgcmV0dXJuIHJlbGF0aXZlOyB9XG4gIHJldHVybiB1cmxQYXJzZShzb3VyY2UsIGZhbHNlLCB0cnVlKS5yZXNvbHZlT2JqZWN0KHJlbGF0aXZlKTtcbn1cblxuVXJsLnByb3RvdHlwZS5yZXNvbHZlT2JqZWN0ID0gZnVuY3Rpb24gKHJlbGF0aXZlKSB7XG4gIGlmICh0eXBlb2YgcmVsYXRpdmUgPT09ICdzdHJpbmcnKSB7XG4gICAgdmFyIHJlbCA9IG5ldyBVcmwoKTtcbiAgICByZWwucGFyc2UocmVsYXRpdmUsIGZhbHNlLCB0cnVlKTtcbiAgICByZWxhdGl2ZSA9IHJlbDtcbiAgfVxuXG4gIHZhciByZXN1bHQgPSBuZXcgVXJsKCk7XG4gIHZhciB0a2V5cyA9IE9iamVjdC5rZXlzKHRoaXMpO1xuICBmb3IgKHZhciB0ayA9IDA7IHRrIDwgdGtleXMubGVuZ3RoOyB0aysrKSB7XG4gICAgdmFyIHRrZXkgPSB0a2V5c1t0a107XG4gICAgcmVzdWx0W3RrZXldID0gdGhpc1t0a2V5XTtcbiAgfVxuXG4gIC8qXG4gICAqIGhhc2ggaXMgYWx3YXlzIG92ZXJyaWRkZW4sIG5vIG1hdHRlciB3aGF0LlxuICAgKiBldmVuIGhyZWY9XCJcIiB3aWxsIHJlbW92ZSBpdC5cbiAgICovXG4gIHJlc3VsdC5oYXNoID0gcmVsYXRpdmUuaGFzaDtcblxuICAvLyBpZiB0aGUgcmVsYXRpdmUgdXJsIGlzIGVtcHR5LCB0aGVuIHRoZXJlJ3Mgbm90aGluZyBsZWZ0IHRvIGRvIGhlcmUuXG4gIGlmIChyZWxhdGl2ZS5ocmVmID09PSAnJykge1xuICAgIHJlc3VsdC5ocmVmID0gcmVzdWx0LmZvcm1hdCgpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICAvLyBocmVmcyBsaWtlIC8vZm9vL2JhciBhbHdheXMgY3V0IHRvIHRoZSBwcm90b2NvbC5cbiAgaWYgKHJlbGF0aXZlLnNsYXNoZXMgJiYgIXJlbGF0aXZlLnByb3RvY29sKSB7XG4gICAgLy8gdGFrZSBldmVyeXRoaW5nIGV4Y2VwdCB0aGUgcHJvdG9jb2wgZnJvbSByZWxhdGl2ZVxuICAgIHZhciBya2V5cyA9IE9iamVjdC5rZXlzKHJlbGF0aXZlKTtcbiAgICBmb3IgKHZhciByayA9IDA7IHJrIDwgcmtleXMubGVuZ3RoOyByaysrKSB7XG4gICAgICB2YXIgcmtleSA9IHJrZXlzW3JrXTtcbiAgICAgIGlmIChya2V5ICE9PSAncHJvdG9jb2wnKSB7IHJlc3VsdFtya2V5XSA9IHJlbGF0aXZlW3JrZXldOyB9XG4gICAgfVxuXG4gICAgLy8gdXJsUGFyc2UgYXBwZW5kcyB0cmFpbGluZyAvIHRvIHVybHMgbGlrZSBodHRwOi8vd3d3LmV4YW1wbGUuY29tXG4gICAgaWYgKHNsYXNoZWRQcm90b2NvbFtyZXN1bHQucHJvdG9jb2xdICYmIHJlc3VsdC5ob3N0bmFtZSAmJiAhcmVzdWx0LnBhdGhuYW1lKSB7XG4gICAgICByZXN1bHQucGF0aG5hbWUgPSAnLyc7XG4gICAgICByZXN1bHQucGF0aCA9IHJlc3VsdC5wYXRobmFtZTtcbiAgICB9XG5cbiAgICByZXN1bHQuaHJlZiA9IHJlc3VsdC5mb3JtYXQoKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgaWYgKHJlbGF0aXZlLnByb3RvY29sICYmIHJlbGF0aXZlLnByb3RvY29sICE9PSByZXN1bHQucHJvdG9jb2wpIHtcbiAgICAvKlxuICAgICAqIGlmIGl0J3MgYSBrbm93biB1cmwgcHJvdG9jb2wsIHRoZW4gY2hhbmdpbmdcbiAgICAgKiB0aGUgcHJvdG9jb2wgZG9lcyB3ZWlyZCB0aGluZ3NcbiAgICAgKiBmaXJzdCwgaWYgaXQncyBub3QgZmlsZTosIHRoZW4gd2UgTVVTVCBoYXZlIGEgaG9zdCxcbiAgICAgKiBhbmQgaWYgdGhlcmUgd2FzIGEgcGF0aFxuICAgICAqIHRvIGJlZ2luIHdpdGgsIHRoZW4gd2UgTVVTVCBoYXZlIGEgcGF0aC5cbiAgICAgKiBpZiBpdCBpcyBmaWxlOiwgdGhlbiB0aGUgaG9zdCBpcyBkcm9wcGVkLFxuICAgICAqIGJlY2F1c2UgdGhhdCdzIGtub3duIHRvIGJlIGhvc3RsZXNzLlxuICAgICAqIGFueXRoaW5nIGVsc2UgaXMgYXNzdW1lZCB0byBiZSBhYnNvbHV0ZS5cbiAgICAgKi9cbiAgICBpZiAoIXNsYXNoZWRQcm90b2NvbFtyZWxhdGl2ZS5wcm90b2NvbF0pIHtcbiAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMocmVsYXRpdmUpO1xuICAgICAgZm9yICh2YXIgdiA9IDA7IHYgPCBrZXlzLmxlbmd0aDsgdisrKSB7XG4gICAgICAgIHZhciBrID0ga2V5c1t2XTtcbiAgICAgICAgcmVzdWx0W2tdID0gcmVsYXRpdmVba107XG4gICAgICB9XG4gICAgICByZXN1bHQuaHJlZiA9IHJlc3VsdC5mb3JtYXQoKTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgcmVzdWx0LnByb3RvY29sID0gcmVsYXRpdmUucHJvdG9jb2w7XG4gICAgaWYgKCFyZWxhdGl2ZS5ob3N0ICYmICFob3N0bGVzc1Byb3RvY29sW3JlbGF0aXZlLnByb3RvY29sXSkge1xuICAgICAgdmFyIHJlbFBhdGggPSAocmVsYXRpdmUucGF0aG5hbWUgfHwgJycpLnNwbGl0KCcvJyk7XG4gICAgICB3aGlsZSAocmVsUGF0aC5sZW5ndGggJiYgIShyZWxhdGl2ZS5ob3N0ID0gcmVsUGF0aC5zaGlmdCgpKSkgeyB9XG4gICAgICBpZiAoIXJlbGF0aXZlLmhvc3QpIHsgcmVsYXRpdmUuaG9zdCA9ICcnOyB9XG4gICAgICBpZiAoIXJlbGF0aXZlLmhvc3RuYW1lKSB7IHJlbGF0aXZlLmhvc3RuYW1lID0gJyc7IH1cbiAgICAgIGlmIChyZWxQYXRoWzBdICE9PSAnJykgeyByZWxQYXRoLnVuc2hpZnQoJycpOyB9XG4gICAgICBpZiAocmVsUGF0aC5sZW5ndGggPCAyKSB7IHJlbFBhdGgudW5zaGlmdCgnJyk7IH1cbiAgICAgIHJlc3VsdC5wYXRobmFtZSA9IHJlbFBhdGguam9pbignLycpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXN1bHQucGF0aG5hbWUgPSByZWxhdGl2ZS5wYXRobmFtZTtcbiAgICB9XG4gICAgcmVzdWx0LnNlYXJjaCA9IHJlbGF0aXZlLnNlYXJjaDtcbiAgICByZXN1bHQucXVlcnkgPSByZWxhdGl2ZS5xdWVyeTtcbiAgICByZXN1bHQuaG9zdCA9IHJlbGF0aXZlLmhvc3QgfHwgJyc7XG4gICAgcmVzdWx0LmF1dGggPSByZWxhdGl2ZS5hdXRoO1xuICAgIHJlc3VsdC5ob3N0bmFtZSA9IHJlbGF0aXZlLmhvc3RuYW1lIHx8IHJlbGF0aXZlLmhvc3Q7XG4gICAgcmVzdWx0LnBvcnQgPSByZWxhdGl2ZS5wb3J0O1xuICAgIC8vIHRvIHN1cHBvcnQgaHR0cC5yZXF1ZXN0XG4gICAgaWYgKHJlc3VsdC5wYXRobmFtZSB8fCByZXN1bHQuc2VhcmNoKSB7XG4gICAgICB2YXIgcCA9IHJlc3VsdC5wYXRobmFtZSB8fCAnJztcbiAgICAgIHZhciBzID0gcmVzdWx0LnNlYXJjaCB8fCAnJztcbiAgICAgIHJlc3VsdC5wYXRoID0gcCArIHM7XG4gICAgfVxuICAgIHJlc3VsdC5zbGFzaGVzID0gcmVzdWx0LnNsYXNoZXMgfHwgcmVsYXRpdmUuc2xhc2hlcztcbiAgICByZXN1bHQuaHJlZiA9IHJlc3VsdC5mb3JtYXQoKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgdmFyIGlzU291cmNlQWJzID0gcmVzdWx0LnBhdGhuYW1lICYmIHJlc3VsdC5wYXRobmFtZS5jaGFyQXQoMCkgPT09ICcvJyxcbiAgICBpc1JlbEFicyA9IHJlbGF0aXZlLmhvc3QgfHwgcmVsYXRpdmUucGF0aG5hbWUgJiYgcmVsYXRpdmUucGF0aG5hbWUuY2hhckF0KDApID09PSAnLycsXG4gICAgbXVzdEVuZEFicyA9IGlzUmVsQWJzIHx8IGlzU291cmNlQWJzIHx8IChyZXN1bHQuaG9zdCAmJiByZWxhdGl2ZS5wYXRobmFtZSksXG4gICAgcmVtb3ZlQWxsRG90cyA9IG11c3RFbmRBYnMsXG4gICAgc3JjUGF0aCA9IHJlc3VsdC5wYXRobmFtZSAmJiByZXN1bHQucGF0aG5hbWUuc3BsaXQoJy8nKSB8fCBbXSxcbiAgICByZWxQYXRoID0gcmVsYXRpdmUucGF0aG5hbWUgJiYgcmVsYXRpdmUucGF0aG5hbWUuc3BsaXQoJy8nKSB8fCBbXSxcbiAgICBwc3ljaG90aWMgPSByZXN1bHQucHJvdG9jb2wgJiYgIXNsYXNoZWRQcm90b2NvbFtyZXN1bHQucHJvdG9jb2xdO1xuXG4gIC8qXG4gICAqIGlmIHRoZSB1cmwgaXMgYSBub24tc2xhc2hlZCB1cmwsIHRoZW4gcmVsYXRpdmVcbiAgICogbGlua3MgbGlrZSAuLi8uLiBzaG91bGQgYmUgYWJsZVxuICAgKiB0byBjcmF3bCB1cCB0byB0aGUgaG9zdG5hbWUsIGFzIHdlbGwuICBUaGlzIGlzIHN0cmFuZ2UuXG4gICAqIHJlc3VsdC5wcm90b2NvbCBoYXMgYWxyZWFkeSBiZWVuIHNldCBieSBub3cuXG4gICAqIExhdGVyIG9uLCBwdXQgdGhlIGZpcnN0IHBhdGggcGFydCBpbnRvIHRoZSBob3N0IGZpZWxkLlxuICAgKi9cbiAgaWYgKHBzeWNob3RpYykge1xuICAgIHJlc3VsdC5ob3N0bmFtZSA9ICcnO1xuICAgIHJlc3VsdC5wb3J0ID0gbnVsbDtcbiAgICBpZiAocmVzdWx0Lmhvc3QpIHtcbiAgICAgIGlmIChzcmNQYXRoWzBdID09PSAnJykgeyBzcmNQYXRoWzBdID0gcmVzdWx0Lmhvc3Q7IH0gZWxzZSB7IHNyY1BhdGgudW5zaGlmdChyZXN1bHQuaG9zdCk7IH1cbiAgICB9XG4gICAgcmVzdWx0Lmhvc3QgPSAnJztcbiAgICBpZiAocmVsYXRpdmUucHJvdG9jb2wpIHtcbiAgICAgIHJlbGF0aXZlLmhvc3RuYW1lID0gbnVsbDtcbiAgICAgIHJlbGF0aXZlLnBvcnQgPSBudWxsO1xuICAgICAgaWYgKHJlbGF0aXZlLmhvc3QpIHtcbiAgICAgICAgaWYgKHJlbFBhdGhbMF0gPT09ICcnKSB7IHJlbFBhdGhbMF0gPSByZWxhdGl2ZS5ob3N0OyB9IGVsc2UgeyByZWxQYXRoLnVuc2hpZnQocmVsYXRpdmUuaG9zdCk7IH1cbiAgICAgIH1cbiAgICAgIHJlbGF0aXZlLmhvc3QgPSBudWxsO1xuICAgIH1cbiAgICBtdXN0RW5kQWJzID0gbXVzdEVuZEFicyAmJiAocmVsUGF0aFswXSA9PT0gJycgfHwgc3JjUGF0aFswXSA9PT0gJycpO1xuICB9XG5cbiAgaWYgKGlzUmVsQWJzKSB7XG4gICAgLy8gaXQncyBhYnNvbHV0ZS5cbiAgICByZXN1bHQuaG9zdCA9IHJlbGF0aXZlLmhvc3QgfHwgcmVsYXRpdmUuaG9zdCA9PT0gJycgPyByZWxhdGl2ZS5ob3N0IDogcmVzdWx0Lmhvc3Q7XG4gICAgcmVzdWx0Lmhvc3RuYW1lID0gcmVsYXRpdmUuaG9zdG5hbWUgfHwgcmVsYXRpdmUuaG9zdG5hbWUgPT09ICcnID8gcmVsYXRpdmUuaG9zdG5hbWUgOiByZXN1bHQuaG9zdG5hbWU7XG4gICAgcmVzdWx0LnNlYXJjaCA9IHJlbGF0aXZlLnNlYXJjaDtcbiAgICByZXN1bHQucXVlcnkgPSByZWxhdGl2ZS5xdWVyeTtcbiAgICBzcmNQYXRoID0gcmVsUGF0aDtcbiAgICAvLyBmYWxsIHRocm91Z2ggdG8gdGhlIGRvdC1oYW5kbGluZyBiZWxvdy5cbiAgfSBlbHNlIGlmIChyZWxQYXRoLmxlbmd0aCkge1xuICAgIC8qXG4gICAgICogaXQncyByZWxhdGl2ZVxuICAgICAqIHRocm93IGF3YXkgdGhlIGV4aXN0aW5nIGZpbGUsIGFuZCB0YWtlIHRoZSBuZXcgcGF0aCBpbnN0ZWFkLlxuICAgICAqL1xuICAgIGlmICghc3JjUGF0aCkgeyBzcmNQYXRoID0gW107IH1cbiAgICBzcmNQYXRoLnBvcCgpO1xuICAgIHNyY1BhdGggPSBzcmNQYXRoLmNvbmNhdChyZWxQYXRoKTtcbiAgICByZXN1bHQuc2VhcmNoID0gcmVsYXRpdmUuc2VhcmNoO1xuICAgIHJlc3VsdC5xdWVyeSA9IHJlbGF0aXZlLnF1ZXJ5O1xuICB9IGVsc2UgaWYgKHJlbGF0aXZlLnNlYXJjaCAhPSBudWxsKSB7XG4gICAgLypcbiAgICAgKiBqdXN0IHB1bGwgb3V0IHRoZSBzZWFyY2guXG4gICAgICogbGlrZSBocmVmPSc/Zm9vJy5cbiAgICAgKiBQdXQgdGhpcyBhZnRlciB0aGUgb3RoZXIgdHdvIGNhc2VzIGJlY2F1c2UgaXQgc2ltcGxpZmllcyB0aGUgYm9vbGVhbnNcbiAgICAgKi9cbiAgICBpZiAocHN5Y2hvdGljKSB7XG4gICAgICByZXN1bHQuaG9zdCA9IHNyY1BhdGguc2hpZnQoKTtcbiAgICAgIHJlc3VsdC5ob3N0bmFtZSA9IHJlc3VsdC5ob3N0O1xuICAgICAgLypcbiAgICAgICAqIG9jY2F0aW9uYWx5IHRoZSBhdXRoIGNhbiBnZXQgc3R1Y2sgb25seSBpbiBob3N0XG4gICAgICAgKiB0aGlzIGVzcGVjaWFsbHkgaGFwcGVucyBpbiBjYXNlcyBsaWtlXG4gICAgICAgKiB1cmwucmVzb2x2ZU9iamVjdCgnbWFpbHRvOmxvY2FsMUBkb21haW4xJywgJ2xvY2FsMkBkb21haW4yJylcbiAgICAgICAqL1xuICAgICAgdmFyIGF1dGhJbkhvc3QgPSByZXN1bHQuaG9zdCAmJiByZXN1bHQuaG9zdC5pbmRleE9mKCdAJykgPiAwID8gcmVzdWx0Lmhvc3Quc3BsaXQoJ0AnKSA6IGZhbHNlO1xuICAgICAgaWYgKGF1dGhJbkhvc3QpIHtcbiAgICAgICAgcmVzdWx0LmF1dGggPSBhdXRoSW5Ib3N0LnNoaWZ0KCk7XG4gICAgICAgIHJlc3VsdC5ob3N0bmFtZSA9IGF1dGhJbkhvc3Quc2hpZnQoKTtcbiAgICAgICAgcmVzdWx0Lmhvc3QgPSByZXN1bHQuaG9zdG5hbWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJlc3VsdC5zZWFyY2ggPSByZWxhdGl2ZS5zZWFyY2g7XG4gICAgcmVzdWx0LnF1ZXJ5ID0gcmVsYXRpdmUucXVlcnk7XG4gICAgLy8gdG8gc3VwcG9ydCBodHRwLnJlcXVlc3RcbiAgICBpZiAocmVzdWx0LnBhdGhuYW1lICE9PSBudWxsIHx8IHJlc3VsdC5zZWFyY2ggIT09IG51bGwpIHtcbiAgICAgIHJlc3VsdC5wYXRoID0gKHJlc3VsdC5wYXRobmFtZSA/IHJlc3VsdC5wYXRobmFtZSA6ICcnKSArIChyZXN1bHQuc2VhcmNoID8gcmVzdWx0LnNlYXJjaCA6ICcnKTtcbiAgICB9XG4gICAgcmVzdWx0LmhyZWYgPSByZXN1bHQuZm9ybWF0KCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIGlmICghc3JjUGF0aC5sZW5ndGgpIHtcbiAgICAvKlxuICAgICAqIG5vIHBhdGggYXQgYWxsLiAgZWFzeS5cbiAgICAgKiB3ZSd2ZSBhbHJlYWR5IGhhbmRsZWQgdGhlIG90aGVyIHN0dWZmIGFib3ZlLlxuICAgICAqL1xuICAgIHJlc3VsdC5wYXRobmFtZSA9IG51bGw7XG4gICAgLy8gdG8gc3VwcG9ydCBodHRwLnJlcXVlc3RcbiAgICBpZiAocmVzdWx0LnNlYXJjaCkge1xuICAgICAgcmVzdWx0LnBhdGggPSAnLycgKyByZXN1bHQuc2VhcmNoO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXN1bHQucGF0aCA9IG51bGw7XG4gICAgfVxuICAgIHJlc3VsdC5ocmVmID0gcmVzdWx0LmZvcm1hdCgpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICAvKlxuICAgKiBpZiBhIHVybCBFTkRzIGluIC4gb3IgLi4sIHRoZW4gaXQgbXVzdCBnZXQgYSB0cmFpbGluZyBzbGFzaC5cbiAgICogaG93ZXZlciwgaWYgaXQgZW5kcyBpbiBhbnl0aGluZyBlbHNlIG5vbi1zbGFzaHksXG4gICAqIHRoZW4gaXQgbXVzdCBOT1QgZ2V0IGEgdHJhaWxpbmcgc2xhc2guXG4gICAqL1xuICB2YXIgbGFzdCA9IHNyY1BhdGguc2xpY2UoLTEpWzBdO1xuICB2YXIgaGFzVHJhaWxpbmdTbGFzaCA9IChyZXN1bHQuaG9zdCB8fCByZWxhdGl2ZS5ob3N0IHx8IHNyY1BhdGgubGVuZ3RoID4gMSkgJiYgKGxhc3QgPT09ICcuJyB8fCBsYXN0ID09PSAnLi4nKSB8fCBsYXN0ID09PSAnJztcblxuICAvKlxuICAgKiBzdHJpcCBzaW5nbGUgZG90cywgcmVzb2x2ZSBkb3VibGUgZG90cyB0byBwYXJlbnQgZGlyXG4gICAqIGlmIHRoZSBwYXRoIHRyaWVzIHRvIGdvIGFib3ZlIHRoZSByb290LCBgdXBgIGVuZHMgdXAgPiAwXG4gICAqL1xuICB2YXIgdXAgPSAwO1xuICBmb3IgKHZhciBpID0gc3JjUGF0aC5sZW5ndGg7IGkgPj0gMDsgaS0tKSB7XG4gICAgbGFzdCA9IHNyY1BhdGhbaV07XG4gICAgaWYgKGxhc3QgPT09ICcuJykge1xuICAgICAgc3JjUGF0aC5zcGxpY2UoaSwgMSk7XG4gICAgfSBlbHNlIGlmIChsYXN0ID09PSAnLi4nKSB7XG4gICAgICBzcmNQYXRoLnNwbGljZShpLCAxKTtcbiAgICAgIHVwKys7XG4gICAgfSBlbHNlIGlmICh1cCkge1xuICAgICAgc3JjUGF0aC5zcGxpY2UoaSwgMSk7XG4gICAgICB1cC0tO1xuICAgIH1cbiAgfVxuXG4gIC8vIGlmIHRoZSBwYXRoIGlzIGFsbG93ZWQgdG8gZ28gYWJvdmUgdGhlIHJvb3QsIHJlc3RvcmUgbGVhZGluZyAuLnNcbiAgaWYgKCFtdXN0RW5kQWJzICYmICFyZW1vdmVBbGxEb3RzKSB7XG4gICAgZm9yICg7IHVwLS07IHVwKSB7XG4gICAgICBzcmNQYXRoLnVuc2hpZnQoJy4uJyk7XG4gICAgfVxuICB9XG5cbiAgaWYgKG11c3RFbmRBYnMgJiYgc3JjUGF0aFswXSAhPT0gJycgJiYgKCFzcmNQYXRoWzBdIHx8IHNyY1BhdGhbMF0uY2hhckF0KDApICE9PSAnLycpKSB7XG4gICAgc3JjUGF0aC51bnNoaWZ0KCcnKTtcbiAgfVxuXG4gIGlmIChoYXNUcmFpbGluZ1NsYXNoICYmIChzcmNQYXRoLmpvaW4oJy8nKS5zdWJzdHIoLTEpICE9PSAnLycpKSB7XG4gICAgc3JjUGF0aC5wdXNoKCcnKTtcbiAgfVxuXG4gIHZhciBpc0Fic29sdXRlID0gc3JjUGF0aFswXSA9PT0gJycgfHwgKHNyY1BhdGhbMF0gJiYgc3JjUGF0aFswXS5jaGFyQXQoMCkgPT09ICcvJyk7XG5cbiAgLy8gcHV0IHRoZSBob3N0IGJhY2tcbiAgaWYgKHBzeWNob3RpYykge1xuICAgIHJlc3VsdC5ob3N0bmFtZSA9IGlzQWJzb2x1dGUgPyAnJyA6IHNyY1BhdGgubGVuZ3RoID8gc3JjUGF0aC5zaGlmdCgpIDogJyc7XG4gICAgcmVzdWx0Lmhvc3QgPSByZXN1bHQuaG9zdG5hbWU7XG4gICAgLypcbiAgICAgKiBvY2NhdGlvbmFseSB0aGUgYXV0aCBjYW4gZ2V0IHN0dWNrIG9ubHkgaW4gaG9zdFxuICAgICAqIHRoaXMgZXNwZWNpYWxseSBoYXBwZW5zIGluIGNhc2VzIGxpa2VcbiAgICAgKiB1cmwucmVzb2x2ZU9iamVjdCgnbWFpbHRvOmxvY2FsMUBkb21haW4xJywgJ2xvY2FsMkBkb21haW4yJylcbiAgICAgKi9cbiAgICB2YXIgYXV0aEluSG9zdCA9IHJlc3VsdC5ob3N0ICYmIHJlc3VsdC5ob3N0LmluZGV4T2YoJ0AnKSA+IDAgPyByZXN1bHQuaG9zdC5zcGxpdCgnQCcpIDogZmFsc2U7XG4gICAgaWYgKGF1dGhJbkhvc3QpIHtcbiAgICAgIHJlc3VsdC5hdXRoID0gYXV0aEluSG9zdC5zaGlmdCgpO1xuICAgICAgcmVzdWx0Lmhvc3RuYW1lID0gYXV0aEluSG9zdC5zaGlmdCgpO1xuICAgICAgcmVzdWx0Lmhvc3QgPSByZXN1bHQuaG9zdG5hbWU7XG4gICAgfVxuICB9XG5cbiAgbXVzdEVuZEFicyA9IG11c3RFbmRBYnMgfHwgKHJlc3VsdC5ob3N0ICYmIHNyY1BhdGgubGVuZ3RoKTtcblxuICBpZiAobXVzdEVuZEFicyAmJiAhaXNBYnNvbHV0ZSkge1xuICAgIHNyY1BhdGgudW5zaGlmdCgnJyk7XG4gIH1cblxuICBpZiAoc3JjUGF0aC5sZW5ndGggPiAwKSB7XG4gICAgcmVzdWx0LnBhdGhuYW1lID0gc3JjUGF0aC5qb2luKCcvJyk7XG4gIH0gZWxzZSB7XG4gICAgcmVzdWx0LnBhdGhuYW1lID0gbnVsbDtcbiAgICByZXN1bHQucGF0aCA9IG51bGw7XG4gIH1cblxuICAvLyB0byBzdXBwb3J0IHJlcXVlc3QuaHR0cFxuICBpZiAocmVzdWx0LnBhdGhuYW1lICE9PSBudWxsIHx8IHJlc3VsdC5zZWFyY2ggIT09IG51bGwpIHtcbiAgICByZXN1bHQucGF0aCA9IChyZXN1bHQucGF0aG5hbWUgPyByZXN1bHQucGF0aG5hbWUgOiAnJykgKyAocmVzdWx0LnNlYXJjaCA/IHJlc3VsdC5zZWFyY2ggOiAnJyk7XG4gIH1cbiAgcmVzdWx0LmF1dGggPSByZWxhdGl2ZS5hdXRoIHx8IHJlc3VsdC5hdXRoO1xuICByZXN1bHQuc2xhc2hlcyA9IHJlc3VsdC5zbGFzaGVzIHx8IHJlbGF0aXZlLnNsYXNoZXM7XG4gIHJlc3VsdC5ocmVmID0gcmVzdWx0LmZvcm1hdCgpO1xuICByZXR1cm4gcmVzdWx0O1xufTtcblxuVXJsLnByb3RvdHlwZS5wYXJzZUhvc3QgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBob3N0ID0gdGhpcy5ob3N0O1xuICB2YXIgcG9ydCA9IHBvcnRQYXR0ZXJuLmV4ZWMoaG9zdCk7XG4gIGlmIChwb3J0KSB7XG4gICAgcG9ydCA9IHBvcnRbMF07XG4gICAgaWYgKHBvcnQgIT09ICc6Jykge1xuICAgICAgdGhpcy5wb3J0ID0gcG9ydC5zdWJzdHIoMSk7XG4gICAgfVxuICAgIGhvc3QgPSBob3N0LnN1YnN0cigwLCBob3N0Lmxlbmd0aCAtIHBvcnQubGVuZ3RoKTtcbiAgfVxuICBpZiAoaG9zdCkgeyB0aGlzLmhvc3RuYW1lID0gaG9zdDsgfVxufTtcblxuZXhwb3J0cy5wYXJzZSA9IHVybFBhcnNlO1xuZXhwb3J0cy5yZXNvbHZlID0gdXJsUmVzb2x2ZTtcbmV4cG9ydHMucmVzb2x2ZU9iamVjdCA9IHVybFJlc29sdmVPYmplY3Q7XG5leHBvcnRzLmZvcm1hdCA9IHVybEZvcm1hdDtcblxuZXhwb3J0cy5VcmwgPSBVcmw7XG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8qIGdsb2JhbCBpbzpmYWxzZSAqL1xudmFyIGxpdmVyZWxvYWQgPSByZXF1aXJlKCcuL2xpdmUtcmVsb2FkLWNsaWVudCcpO1xudmFyIE1lc3NhZ2VzID0gcmVxdWlyZSgnbWVzc2FnZXMnKTtcbnZhciB0ZWxlbWV0cnkgPSByZXF1aXJlKCd0ZWxlbWV0cnktaGVscGVyJyk7XG5cbnZhciBjb3Jkb3ZhO1xudmFyIHNvY2tldCA9IGlvKCk7XG52YXIgbmV4dEV4ZWNDYWNoZUluZGV4ID0gMDtcblxuLy8gRGV0YWlscyBvZiBlYWNoIHBsdWdpbiB0aGF0IGhhcyBhcHAtaG9zdCBjb2RlIGlzIGluamVjdGVkIHdoZW4gdGhpcyBmaWxlIGlzIHNlcnZlZC5cbnZhciBwbHVnaW5zID0ge1xuICAgICdldmVudHMnOiByZXF1aXJlKCdldmVudHMnKSxcbidjb3Jkb3ZhLXBsdWdpbi1kZXZpY2UnOiByZXF1aXJlKCdjb3Jkb3ZhLXBsdWdpbi1kZXZpY2UnKSxcbidjb3Jkb3ZhLXBsdWdpbi1kaWFsb2dzJzogcmVxdWlyZSgnY29yZG92YS1wbHVnaW4tZGlhbG9ncycpLFxuJ2NvcmRvdmEtcGx1Z2luLXZpYnJhdGlvbic6IHJlcXVpcmUoJ2NvcmRvdmEtcGx1Z2luLXZpYnJhdGlvbicpXG59O1xuXG52YXIgcGx1Z2luSGFuZGxlcnNEZWZpbml0aW9ucyA9IHtcbiAgICAnY29yZG92YS1wbHVnaW4tY2FtZXJhJzogcmVxdWlyZSgnY29yZG92YS1wbHVnaW4tY2FtZXJhLWhhbmRsZXJzJyksXG4nY29yZG92YS1wbHVnaW4tZmlsZSc6IHJlcXVpcmUoJ2NvcmRvdmEtcGx1Z2luLWZpbGUtaGFuZGxlcnMnKSxcbidjb3Jkb3ZhLXBsdWdpbi1pbmFwcGJyb3dzZXInOiByZXF1aXJlKCdjb3Jkb3ZhLXBsdWdpbi1pbmFwcGJyb3dzZXItaGFuZGxlcnMnKSxcbidjb3Jkb3ZhLXBsdWdpbi1tZWRpYSc6IHJlcXVpcmUoJ2NvcmRvdmEtcGx1Z2luLW1lZGlhLWhhbmRsZXJzJylcbn07XG5cbnZhciBwbHVnaW5DbG9iYmVyRGVmaW5pdGlvbnMgPSB7XG4gICAgJ2NvcmRvdmEtcGx1Z2luLWdlb2xvY2F0aW9uJzogcmVxdWlyZSgnY29yZG92YS1wbHVnaW4tZ2VvbG9jYXRpb24tY2xvYmJlcnMnKSxcbidjb3Jkb3ZhLXBsdWdpbi1nbG9iYWxpemF0aW9uJzogcmVxdWlyZSgnY29yZG92YS1wbHVnaW4tZ2xvYmFsaXphdGlvbi1jbG9iYmVycycpXG59O1xuXG52YXIgZXhlY0NhY2hlID0ge307XG52YXIgcGx1Z2luTWVzc2FnZXMgPSB7fTtcbnZhciBwbHVnaW5IYW5kbGVycyA9IHt9O1xudmFyIHNlcnZpY2VUb1BsdWdpbk1hcCA9IHt9O1xuXG5mdW5jdGlvbiBjbG9iYmVyKGNsb2JiZXJzLCBzY29wZSwgY2xvYmJlclRvUGx1Z2luTWFwLCBwbHVnaW5JZCkge1xuICAgIE9iamVjdC5rZXlzKGNsb2JiZXJzKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgaWYgKGNsb2JiZXJUb1BsdWdpbk1hcCAmJiBwbHVnaW5JZCkge1xuICAgICAgICAgICAgY2xvYmJlclRvUGx1Z2luTWFwW2tleV0gPSBwbHVnaW5JZDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjbG9iYmVyc1trZXldICYmIHR5cGVvZiBjbG9iYmVyc1trZXldID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgc2NvcGVba2V5XSA9IHNjb3BlW2tleV0gfHwge307XG4gICAgICAgICAgICBjbG9iYmVyKGNsb2JiZXJzW2tleV0sIHNjb3BlW2tleV0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2NvcGVba2V5XSA9IGNsb2JiZXJzW2tleV07XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gYXBwbHlQbHVnaW5zKHBsdWdpbnMsIGNsb2JiZXJTY29wZSwgY2xvYmJlclRvUGx1Z2luTWFwKSB7XG4gICAgT2JqZWN0LmtleXMocGx1Z2lucykuZm9yRWFjaChmdW5jdGlvbiAocGx1Z2luSWQpIHtcbiAgICAgICAgdmFyIHBsdWdpbiA9IHBsdWdpbnNbcGx1Z2luSWRdO1xuICAgICAgICBpZiAocGx1Z2luKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHBsdWdpbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIHBsdWdpbk1lc3NhZ2VzW3BsdWdpbklkXSA9IHBsdWdpbk1lc3NhZ2VzW3BsdWdpbklkXSB8fCBuZXcgTWVzc2FnZXMocGx1Z2luSWQsIHNvY2tldCk7XG4gICAgICAgICAgICAgICAgcGx1Z2luID0gcGx1Z2luKHBsdWdpbk1lc3NhZ2VzW3BsdWdpbklkXSwgZXhlYyk7XG4gICAgICAgICAgICAgICAgcGx1Z2luc1twbHVnaW5JZF0gPSBwbHVnaW47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY2xvYmJlclNjb3BlKSB7XG4gICAgICAgICAgICAgICAgY2xvYmJlcihwbHVnaW4sIGNsb2JiZXJTY29wZSwgY2xvYmJlclRvUGx1Z2luTWFwLCBwbHVnaW5JZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuLypcbiAqIFRoaXMgZnVuY3Rpb24gaXMgdXNlZCBhcyBzZXR0ZXIgZm9yIHdpbmRvdy5jb3Jkb3ZhIHByb3BlcnR5LiBCZXNpZGVzIHNldHRpbmdcbiAqIHRoZSBnbG9iYWwgcHJvcGVydHksIGl0IG92ZXJyaWRlcyBzb21lIGNvcmRvdmEgZGVmaW5pdGlvbnMgYW5kIHNldHMgdXAgdGhlXG4gKiBjb21tdW5pY2F0aW9uIHByb3RvY29sIHdpdGggdGhlIHNlcnZlciBhbmQgdGhlIHNpbS1ob3N0LlxuICovXG5mdW5jdGlvbiBzZXRDb3Jkb3ZhQW5kSW5pdGlhbGl6ZShvcmlnaW5hbENvcmRvdmEpIHtcbiAgICB2YXIgY2hhbm5lbCxcbiAgICAgICAgcGxhdGZvcm0sXG4gICAgICAgIHBsYXRmb3JtQm9vdHN0cmFwO1xuXG4gICAgaWYgKGNvcmRvdmEpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvcmRvdmEgPSBvcmlnaW5hbENvcmRvdmE7XG5cbiAgICBjb3Jkb3ZhLmRlZmluZS5yZW1vdmUoJ2NvcmRvdmEvZXhlYycpO1xuICAgIGNvcmRvdmEuZGVmaW5lKCdjb3Jkb3ZhL2V4ZWMnLCBmdW5jdGlvbiAocmVxdWlyZSwgZXhwb3J0cywgbW9kdWxlKSB7XG4gICAgICAgIG1vZHVsZS5leHBvcnRzID0gZXhlYztcbiAgICB9KTtcblxuICAgIHBsYXRmb3JtID0gY29yZG92YS5yZXF1aXJlKCdjb3Jkb3ZhL3BsYXRmb3JtJyk7XG4gICAgcGxhdGZvcm1Cb290c3RyYXAgPSBwbGF0Zm9ybS5ib290c3RyYXA7XG4gICAgcGxhdGZvcm0uYm9vdHN0cmFwID0gZnVuY3Rpb24gKCkge1xuICAgIH07XG5cbiAgICAvLyBkZWZhdWx0IFdpbmRvd3MgYm9vdHN0cmFwIGZ1bmN0aW9uIHRyaWVzIHRvIGxvYWQgV2luSlMgd2hpY2ggaXMgbm90XG4gICAgLy8gYXZhaWxhYmxlIGFuZCBub3QgcmVxdWlyZWQgaW4gc2ltdWxhdGlvbiBtb2RlIHNvIHdlIG92ZXJyaWRlIGJvb3RzdHJhcFxuICAgIGlmIChjb3Jkb3ZhLnBsYXRmb3JtSWQgPT09ICd3aW5kb3dzJykge1xuICAgICAgICBwbGF0Zm9ybUJvb3RzdHJhcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNvcmRvdmEucmVxdWlyZSgnY29yZG92YS9tb2R1bGVtYXBwZXInKVxuICAgICAgICAgICAgICAgIC5jbG9iYmVycygnY29yZG92YS9leGVjL3Byb3h5JywgJ2NvcmRvdmEuY29tbWFuZFByb3h5Jyk7XG5cbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBjaGFubmVsID0gY29yZG92YS5yZXF1aXJlKCdjb3Jkb3ZhL2NoYW5uZWwnKTtcblxuICAgIC8vIGRlZmluZSBvdXIgb3duIGNoYW5uZWwgdG8gZGVsYXkgdGhlIGluaXRpYWxpemF0aW9uIHVudGlsIHNpbS1ob3N0IHRlbGxzXG4gICAgLy8gdXMgZXZlcnl0aGluZydzIHJlYWR5IChmaXJlZCBpbiAnc3RhcnQnIGV2ZW50IGhhbmRsZXIpLlxuICAgIGNoYW5uZWwuY3JlYXRlU3RpY2t5KCdvbkNvcmRvdmFTaW11bGF0ZVJlYWR5Jyk7XG4gICAgY2hhbm5lbC53YWl0Rm9ySW5pdGlhbGl6YXRpb24oJ29uQ29yZG92YVNpbXVsYXRlUmVhZHknKTtcblxuICAgIHNvY2tldC5vbignc3RhcnQtbGl2ZS1yZWxvYWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGxpdmVyZWxvYWQuc3RhcnQoc29ja2V0KTtcbiAgICB9KTtcblxuICAgIHNvY2tldC5vbignaW5pdC10ZWxlbWV0cnknLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRlbGVtZXRyeS5pbml0KHNvY2tldCk7XG4gICAgfSk7XG5cbiAgICBzb2NrZXQub24oJ2luaXQteGhyLXByb3h5JywgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXF1aXJlKCd4aHItcHJveHknKS5pbml0KCk7XG4gICAgfSk7XG5cbiAgICBzb2NrZXQub24oJ2luaXQtdG91Y2gtZXZlbnRzJywgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXF1aXJlKCcuL3RvdWNoLWV2ZW50cycpLmluaXQoKTtcbiAgICB9KTtcblxuICAgIHNvY2tldC5vbigncmVmcmVzaCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZG9jdW1lbnQubG9jYXRpb24ucmVsb2FkKHRydWUpO1xuICAgIH0pO1xuXG4gICAgLy8gZmlyaW5nIG9mIG9uTmF0aXZlUmVhZHkgaXMgZGVsYXllZCB1bnRpbCBTSU1fSE9TVCB0ZWxscyB1cyBpdCdzIHJlYWR5XG4gICAgc29ja2V0Lm9uY2UoJ2luaXQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIHNpbS1ob3N0IGlzIHJlYWR5LCByZWdpc3RlciBleGVjIGhhbmRsZXJzLCBmaXJlIG9uTmF0aXZlUmVhZHkgYW5kIHNlbmRcbiAgICAgICAgLy8gdGhlIGxpc3Qgb2YgcGx1Z2luc1xuICAgICAgICBzb2NrZXQub24oJ2V4ZWMtc3VjY2VzcycsIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICB2YXIgZXhlY0NhY2hlSW5mbyA9IGV4ZWNDYWNoZVtkYXRhLmluZGV4XTtcbiAgICAgICAgICAgIGlmIChleGVjQ2FjaGVJbmZvICYmIHR5cGVvZiBleGVjQ2FjaGVJbmZvLnN1Y2Nlc3MgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICBleGVjQ2FjaGVJbmZvLnN1Y2Nlc3MoZGF0YS5yZXN1bHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBzb2NrZXQub24oJ2V4ZWMtZmFpbHVyZScsIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICB2YXIgZXhlY0NhY2hlSW5mbyA9IGV4ZWNDYWNoZVtkYXRhLmluZGV4XTtcbiAgICAgICAgICAgIGlmIChleGVjQ2FjaGVJbmZvICYmIHR5cGVvZiBleGVjQ2FjaGVJbmZvLmZhaWwgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICBleGVjQ2FjaGVJbmZvLmZhaWwoZGF0YS5lcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChjb3Jkb3ZhLnBsYXRmb3JtSWQgIT09ICdicm93c2VyJykge1xuICAgICAgICAgICAgY2hhbm5lbC5vblBsdWdpbnNSZWFkeS5zdWJzY3JpYmUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBwbHVnaW5MaXN0O1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHBsdWdpbkxpc3QgPSBjb3Jkb3ZhLnJlcXVpcmUoJ2NvcmRvdmEvcGx1Z2luX2xpc3QnKS5tZXRhZGF0YTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChleCkge1xuICAgICAgICAgICAgICAgICAgICAvLyB3aGVuIHRoZSBhcHAgZG9lc24ndCBjb250YWluIGFueSBwbHVnaW4sIHRoZSBtb2R1bGUgXCJjb3Jkb3ZhL3BsdWdpbl9saXN0XCJcbiAgICAgICAgICAgICAgICAgICAgLy8gaXMgbm90IGxvYWRlZCBhbmQgY29yZG92YS5yZXF1aXJlIHRocm93cyBhbiBleGNlcHRpb25cbiAgICAgICAgICAgICAgICAgICAgcGx1Z2luTGlzdCA9IHt9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzb2NrZXQuZW1pdCgnYXBwLXBsdWdpbi1saXN0JywgcGx1Z2luTGlzdCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNvY2tldC5lbWl0KCdhcHAtcGx1Z2luLWxpc3QnLCB7fSk7XG4gICAgICAgIH1cblxuICAgICAgICBhcHBseVBsdWdpbnMocGx1Z2lucyk7XG4gICAgICAgIGFwcGx5UGx1Z2lucyhwbHVnaW5IYW5kbGVyc0RlZmluaXRpb25zLCBwbHVnaW5IYW5kbGVycywgc2VydmljZVRvUGx1Z2luTWFwKTtcbiAgICAgICAgYXBwbHlQbHVnaW5zKHBsdWdpbkNsb2JiZXJEZWZpbml0aW9ucywgd2luZG93KTtcblxuICAgICAgICB0ZWxlbWV0cnkucmVnaXN0ZXJQbHVnaW5TZXJ2aWNlcyhzZXJ2aWNlVG9QbHVnaW5NYXApO1xuXG4gICAgICAgIHBsYXRmb3JtQm9vdHN0cmFwKCk7XG5cbiAgICAgICAgc3dpdGNoIChjb3Jkb3ZhLnBsYXRmb3JtSWQpIHtcbiAgICAgICAgICAgIC8vIHRoZXNlIHBsYXRmb3JtIGZpcmUgb25OYXRpdmVSZWFkeSBpbiB0aGVpciBib290c3RyYXBcbiAgICAgICAgICAgIGNhc2UgJ2lvcyc6XG4gICAgICAgICAgICBjYXNlICdicm93c2VyJzpcbiAgICAgICAgICAgIGNhc2UgJ3VidW50dSc6XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAvLyB3aW5kb3dzIGhhcyBhbiBvdmVycmlkZGVuIGJvb3RzdHJhcCB3aGljaCBkb2VzIG5vdCBmaXJlXG4gICAgICAgICAgICAvLyBvbk5hdGl2ZVJlYWR5XG4gICAgICAgICAgICBjYXNlICd3aW5kb3dzJzpcbiAgICAgICAgICAgIC8vIGFuZHJvaWQgc3BlY2lmaWVkIGhlcmUganVzdCB0byBiZSBleHBsaWNpdCBhYm91dCBpdFxuICAgICAgICAgICAgLyogZmFsbHMgdGhyb3VnaCAqL1xuICAgICAgICAgICAgY2FzZSAnYW5kcm9pZCc6XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGNoYW5uZWwub25OYXRpdmVSZWFkeS5maXJlKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgIH0pO1xuXG4gICAgc29ja2V0Lm9uY2UoJ3N0YXJ0JywgZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBhbGwgc2V0LCBmaXJlIG9uQ29yZG92YVNpbXVsYXRlIHJlYWR5ICh3aGljaCB1cCB0byB0aGlzIHBvaW50IHdhc1xuICAgICAgICAvLyBkZWxheWluZyBvbkRldmljZVJlYWR5KS5cbiAgICAgICAgY2hhbm5lbC5vbkNvcmRvdmFTaW11bGF0ZVJlYWR5LmZpcmUoKTtcbiAgICAgICAgLy8gYW4gaW5pdCBhZnRlciBzdGFydCBtZWFucyByZWxvYWQuIGl0IGlzIG9ubHkgc2VudCBpZiBzaW0taG9zdCB3YXNcbiAgICAgICAgLy8gcmVsb2FkZWRcbiAgICAgICAgc29ja2V0Lm9uY2UoJ2luaXQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKHRydWUpO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIC8vIHJlZ2lzdGVyIGFwcC1ob3N0XG4gICAgc29ja2V0LmVtaXQoJ3JlZ2lzdGVyLWFwcC1ob3N0Jyk7XG59XG5cbmZ1bmN0aW9uIGdldENvcmRvdmEoKSB7XG4gICAgcmV0dXJuIGNvcmRvdmE7XG59XG5cbmZ1bmN0aW9uIGV4ZWMoc3VjY2VzcywgZmFpbCwgc2VydmljZSwgYWN0aW9uLCBhcmdzKSB7XG4gICAgLy8gSWYgd2UgaGF2ZSBhIGxvY2FsIGhhbmRsZXIsIGNhbGwgdGhhdC4gT3RoZXJ3aXNlIHBhc3MgaXQgdG8gdGhlIHNpbXVsYXRpb24gaG9zdC5cbiAgICB2YXIgaGFuZGxlciA9IHBsdWdpbkhhbmRsZXJzW3NlcnZpY2VdICYmIHBsdWdpbkhhbmRsZXJzW3NlcnZpY2VdW2FjdGlvbl07XG4gICAgaWYgKGhhbmRsZXIpIHtcbiAgICAgICAgdGVsZW1ldHJ5LnNlbmRDbGllbnRUZWxlbWV0cnkoJ2V4ZWMnLCB7IGhhbmRsZWQ6ICdhcHAtaG9zdCcsIHNlcnZpY2U6IHNlcnZpY2UsIGFjdGlvbjogYWN0aW9uIH0pO1xuXG4gICAgICAgIC8vIEVuc3VyZSBsb2NhbCBoYW5kbGVycyBhcmUgZXhlY3V0ZWQgYXN5bmNocm9ub3VzbHkuXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaGFuZGxlcihzdWNjZXNzLCBmYWlsLCBhcmdzKTtcbiAgICAgICAgfSwgMCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGV4ZWNJbmRleCA9IG5leHRFeGVjQ2FjaGVJbmRleCsrO1xuICAgICAgICBleGVjQ2FjaGVbZXhlY0luZGV4XSA9IHsgaW5kZXg6IGV4ZWNJbmRleCwgc3VjY2Vzczogc3VjY2VzcywgZmFpbDogZmFpbCB9O1xuICAgICAgICBzb2NrZXQuZW1pdCgnZXhlYycsIHsgaW5kZXg6IGV4ZWNJbmRleCwgc2VydmljZTogc2VydmljZSwgYWN0aW9uOiBhY3Rpb24sIGFyZ3M6IGFyZ3MsIGhhc1N1Y2Nlc3M6ICEhc3VjY2VzcywgaGFzRmFpbDogISFmYWlsIH0pO1xuICAgIH1cbn1cblxuLy8gaGF2ZSB0aGlzIHN0dWIgZnVuY3Rpb24gYWx3YXlzLCBzb21lIHBsYXRmb3JtcyByZXF1aXJlIGl0XG5leGVjLmluaXQgPSBmdW5jdGlvbiAoKSB7XG59O1xuXG4vLyBTZXR1cCBmb3IgY29yZG92YSBwYXRjaGluZ1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdywgJ2NvcmRvdmEnLCB7XG4gICAgc2V0OiBzZXRDb3Jkb3ZhQW5kSW5pdGlhbGl6ZSxcbiAgICBnZXQ6IGdldENvcmRvdmFcbn0pO1xuXG52YXIgb3JpZ2luYWxVc2VyQWdlbnQgPSB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudDtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3cubmF2aWdhdG9yLCAndXNlckFnZW50Jywge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBUaGUgdXNlciBhZ2VudCBpcyBpbnNlcnRlZCBoZXJlIGJ5IHRoZSBzZXJ2ZXIgd2hlbiB0aGlzIGZpbGUgaXMgc2VydmVkIHVwLlxuICAgICAgICB2YXIgdXNlckFnZW50ID0gJy8qKiBVU0VSLUFHRU5UICoqLyc7XG4gICAgICAgIHJldHVybiB1c2VyQWdlbnQgfHwgb3JpZ2luYWxVc2VyQWdlbnQ7XG4gICAgfVxufSk7XG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIEJhc2VkIGluIHBhcnQgb24gY29kZSBmcm9tIFZvZ3VlIChodHRwczovL2dpdGh1Yi5jb20vYW5kcmV3ZGF2ZXkvdm9ndWUpXG5cbnZhciB1cmwgPSByZXF1aXJlKCd1cmwnKTtcblxudmFyIFVSTF9BVFRSSUJfTkFNRSA9ICd1cmwnO1xudmFyIEhSRUZfQVRUUklCX05BTUUgPSAnaHJlZic7XG52YXIgU1JDX0FUVFJJQl9OQU1FID0gJ3NyYyc7XG52YXIgcmVmZXJlbmNlQXR0cmlidXRlcyA9IFtcbiAgICBVUkxfQVRUUklCX05BTUUsXG4gICAgSFJFRl9BVFRSSUJfTkFNRSxcbiAgICBTUkNfQVRUUklCX05BTUVcbl07XG5cbm1vZHVsZS5leHBvcnRzLnN0YXJ0ID0gZnVuY3Rpb24gKHNvY2spIHtcbiAgICB2YXIgc2VydmVyVXJsID0gd2luZG93LmxvY2F0aW9uLnByb3RvY29sICsgJy8vJyArIHdpbmRvdy5sb2NhdGlvbi5ob3N0O1xuICAgIHZhciBsb2NhbFVybFByZWZpeGVzID0gW1xuICAgICAgICBzZXJ2ZXJVcmwsXG4gICAgICAgIHNlcnZlclVybCArICcvJyxcbiAgICAgICAgJy8nLFxuICAgICAgICAnJ1xuICAgIF07XG4gICAgdmFyIHNvY2tldCA9IHNvY2s7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBuYW1lIG9mIHRoZSByZWZlcmVuY2UgYXR0cmlidXRlIChlaXRoZXIgXCJ1cmxcIiwgXCJocmVmXCIgb3IgXCJzcmNcIikgdGhhdCBpcyBkZWZpbmVkIGZvciB0aGUgZ2l2ZW4gbm9kZS5cbiAgICAgKiBJZiB0aGUgbm9kZSBkZWZpbmVzIG1vcmUgdGhhbiBvbmUsIHJldHVybnMgdGhlIGZpcnN0IGVuY291bnRlcmVkLCBpbiB0aGF0IG9yZGVyLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBkb21Ob2RlIFRoZSBET00gbm9kZSB0byBjaGVjay5cbiAgICAgKiBAcmV0dXJucyB7U3RyaW5nfSBcInVybFwiLCBcImhyZWZcIiBvciBcInNyY1wiLCBvciBudWxsIGlmIG5vbmUgb2YgdGhlc2UgYXR0cmlidXRlcyBpcyBkZWZpbmVkLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGdldFJlZmVyZW5jZUF0dHJpYnV0ZUZvck5vZGUoZG9tTm9kZSkge1xuICAgICAgICBpZiAoZG9tTm9kZS5nZXRBdHRyaWJ1dGUoVVJMX0FUVFJJQl9OQU1FKSkge1xuICAgICAgICAgICAgcmV0dXJuIFVSTF9BVFRSSUJfTkFNRTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkb21Ob2RlLmdldEF0dHJpYnV0ZShIUkVGX0FUVFJJQl9OQU1FKSkge1xuICAgICAgICAgICAgcmV0dXJuIEhSRUZfQVRUUklCX05BTUU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZG9tTm9kZS5nZXRBdHRyaWJ1dGUoU1JDX0FUVFJJQl9OQU1FKSkge1xuICAgICAgICAgICAgcmV0dXJuIFNSQ19BVFRSSUJfTkFNRTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyB3aGV0aGVyIHRoZSBnaXZlbiBVUkwgY29ycmVzcG9uZHMgdG8gYSBnaXZlbiBmaWxlIHBhdGggZnJvbSB0aGUgc2VydmVyLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHVybCBUaGUgVVJMIHRvIGNoZWNrLlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBmaWxlUmVsYXRpdmVQYXRoIFRoZSBwYXRoIG9mIHRoZSBtb2RpZmllZCBmaWxlIHRvIGNoZWNrLCByZWxhdGl2ZSB0byB0aGUgd2ViUm9vdC5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gV2hldGhlciB0aGUgVVJMIHBvaW50cyB0byB0aGUgbW9kaWZpZWQgZmlsZSBmcm9tIHRoZSBzZXJ2ZXIuXG4gICAgICovXG4gICAgZnVuY3Rpb24gdXJsTWF0Y2hlc1BhdGgodXJsLCBmaWxlUmVsYXRpdmVQYXRoKSB7XG4gICAgICAgIHJldHVybiBsb2NhbFVybFByZWZpeGVzLnNvbWUoZnVuY3Rpb24gKHByZWZpeCkge1xuICAgICAgICAgICAgcmV0dXJuIChwcmVmaXggKyBmaWxlUmVsYXRpdmVQYXRoKSA9PT0gdXJsO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGaW5kcyBhbGwgdGhlIERPTSBlbGVtZW50cyB0aGF0IGhhdmUgYSByZWZlcmVuY2UgYXR0cmlidXRlIChcInVybFwiLCBcImhyZWZcIiBvciBcInNyY1wiKSBwb2ludGluZyB0byB0aGUgZ2l2ZW5cbiAgICAgKiByZWxhdGl2ZSBwYXRoLiBFeGNsdWRlcyA8c2NyaXB0PiB0YWdzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGZpbGVSZWxhdGl2ZVBhdGggVGhlIFVSTCBvZiB0aGUgZmlsZSB0byBjaGVjaywgcmVsYXRpdmUgdG8gdGhlIHdlYlJvb3QuXG4gICAgICogQHJldHVybnMge3sgZG9tTm9kZTogRWxlbWVudCwgcmVmZXJlbmNlQXR0cmlidXRlOiBzdHJpbmcgfVtdfSBBbiBhcnJheSBvZiBcInJlc291cmNlc1wiIHJlZmVyZW5jaW5nIHRoZSBnaXZlbiBmaWxlLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGZpbmREb21Ob2Rlc0ZvckZpbGVQYXRoKGZpbGVSZWxhdGl2ZVBhdGgpIHtcbiAgICAgICAgLy8gVG8gdXNlIHF1ZXJ5U2VsZWN0b3JBbGwgdG8gcXVlcnkgZWxlbWVudHMgYmFzZWQgb24gdGhlaXIgYXR0cmlidXRlcywgdGhlIHNlbGVjdG9yJ3Mgc3ludGF4IGlzOlxuICAgICAgICAvLyAnW2F0dHJpYjFdLCBbYXR0cmliMl0sIC4uLicuXG4gICAgICAgIHZhciBzZWxlY3RvclN0cmluZyA9ICdbJyArIHJlZmVyZW5jZUF0dHJpYnV0ZXMuam9pbignXSwgWycpICsgJ10nO1xuICAgICAgICB2YXIgcmF3Tm9kZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yU3RyaW5nKTtcbiAgICAgICAgdmFyIGZpbHRlcmVkTm9kZXMgPSBbXTtcblxuICAgICAgICAvLyBxdWVyeVNlbGVjdG9yQWxsKCkgZG9lcyBub3QgcmV0dXJuIGFuIGFycmF5LCBzbyB3ZSBjYW4ndCB1c2UgQXJyYXkucHJvdG90eXBlLmZpbHRlcigpLlxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJhd05vZGVzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICB2YXIgY3VycmVudE5vZGUgPSByYXdOb2Rlc1tpXTtcblxuICAgICAgICAgICAgLy8gSWdub3JlIDxzY3JpcHQ+IHRhZ3MgKHdlIG5lZWQgdG8gZG8gYSBmdWxsIHJlbG9hZCBmb3Igc2NyaXB0cykuXG4gICAgICAgICAgICBpZiAoY3VycmVudE5vZGUudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnc2NyaXB0Jykge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBWZXJpZnkgaWYgdGhlIG5vZGUgaXMgcmVmZXJlbmNpbmcgdGhlIG1vZGlmaWVkIGZpbGVcbiAgICAgICAgICAgIHZhciByZWZlcmVuY2VBdHRyaWJ1dGUgPSBnZXRSZWZlcmVuY2VBdHRyaWJ1dGVGb3JOb2RlKGN1cnJlbnROb2RlKTtcbiAgICAgICAgICAgIHZhciBub2RlUmVmZXJlbmNlID0gY3VycmVudE5vZGUuZ2V0QXR0cmlidXRlKHJlZmVyZW5jZUF0dHJpYnV0ZSk7XG5cbiAgICAgICAgICAgIC8vIElmIHRoZSBub2RlJ3MgdXJsIC8gaHJlZiAvIHNyYyBkb2Vzbid0IHJlZmVyZW5jZSB0aGUgbW9kaWZpZWQgZmlsZSBvbiB0aGUgc2VydmVyLCBpZ25vcmUgdGhlIG5vZGUuXG4gICAgICAgICAgICBpZiAoIW5vZGVSZWZlcmVuY2UgfHwgIXVybE1hdGNoZXNQYXRoKHVybC5wYXJzZShub2RlUmVmZXJlbmNlKS5wYXRobmFtZSwgZmlsZVJlbGF0aXZlUGF0aCkpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gV2UgY2FyZSBhYm91dCB0aGlzIG5vZGUuXG4gICAgICAgICAgICBmaWx0ZXJlZE5vZGVzLnB1c2goe1xuICAgICAgICAgICAgICAgIGRvbU5vZGU6IGN1cnJlbnROb2RlLFxuICAgICAgICAgICAgICAgIHJlZmVyZW5jZUF0dHJpYnV0ZTogcmVmZXJlbmNlQXR0cmlidXRlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmaWx0ZXJlZE5vZGVzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERldGVybWluZXMgd2hldGhlciB0aGUgY2hhbmdlcyBmb3JtIHRoZSBzcGVjaWZpZWQgZmlsZSBjYW4gYmUgYXBwbGllZCB0byB0aGUgYXBwIHdpdGhvdXQgYSBmdWxsIHBhZ2UgcmVsb2FkLlxuICAgICAqIFRoZW4sIGJhc2VkIG9uIHRoYXQsIGVpdGhlciB1cGRhdGVzIHRoZSByZWZlcmVuY2UgYXR0cmlidXRlIG9mIHRoZSBhcHByb3ByaWF0ZSBub2RlLCBvciBkb2VzIGEgZnVsbCBwYWdlXG4gICAgICogcmVsb2FkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGZpbGVSZWxhdGl2ZVBhdGggVGhlIFVSTCBvZiB0aGUgZmlsZSB0aGF0IGNoYW5nZWQsIHJlbGF0aXZlIHRvIHRoZSB3ZWJSb290LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG9uRmlsZUNoYW5nZWQoZmlsZVJlbGF0aXZlUGF0aCkge1xuICAgICAgICB2YXIgYXNzb2NpYXRlZE5vZGVzID0gZmluZERvbU5vZGVzRm9yRmlsZVBhdGgoZmlsZVJlbGF0aXZlUGF0aCk7XG5cbiAgICAgICAgaWYgKGFzc29jaWF0ZWROb2Rlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJlZnJlc2hGaWxlKGZpbGVSZWxhdGl2ZVBhdGgsIGFzc29jaWF0ZWROb2Rlcyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZWxvYWRQYWdlKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZWZyZXNoZXMgYSBmaWxlIGJ5IHVwZGF0aW5nIHRoZSBhc3NvY2lhdGVkIG5vZGVzJyBxdWVyeXN0cmluZyB3aXRoIGEgbmV3IF9saXZlcmVsb2FkIHBhcmFtZXRlci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBmaWxlUmVsYXRpdmVQYXRoIFRoZSBVUkwgb2YgdGhlIGZpbGUgdG8gYmUgcmVmcmVzaGVkLCByZWxhdGl2ZSB0byB0aGUgd2ViUm9vdC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiByZWZyZXNoRmlsZShmaWxlUmVsYXRpdmVQYXRoLCBub2Rlc1RvUmVmcmVzaCkge1xuICAgICAgICBub2Rlc1RvUmVmcmVzaCA9IG5vZGVzVG9SZWZyZXNoIHx8IGZpbmREb21Ob2Rlc0ZvckZpbGVQYXRoKGZpbGVSZWxhdGl2ZVBhdGgpO1xuXG4gICAgICAgIGlmICghbm9kZXNUb1JlZnJlc2gpIHtcbiAgICAgICAgICAgIC8vIFRoZSBtb2RpZmllZCBmaWxlIGRvZXNuJ3QgYXBwZWFyIHRvIGJlIHJlZmVyZW5jZWQgaW4gdGhlIERPTSBhbnltb3JlLiBEbyBhIGZ1bGwgcmVsb2FkLlxuICAgICAgICAgICAgcmVsb2FkUGFnZSgpO1xuXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBVcGRhdGUgdGhlIG5vZGVzJyB1cmwgLyBocmVmIC8gc3JjIGF0dHJpYnV0ZSB3aXRoIGEgbmV3IF9saXZlcmVsb2FkIHF1ZXJ5c3RyaW5nIHBhcmFtZXRlci5cbiAgICAgICAgbm9kZXNUb1JlZnJlc2guZm9yRWFjaChmdW5jdGlvbiAobm9kZUluZm8pIHtcbiAgICAgICAgICAgIHZhciBwcmV2aW91c1VybCA9IG5vZGVJbmZvLmRvbU5vZGUuZ2V0QXR0cmlidXRlKG5vZGVJbmZvLnJlZmVyZW5jZUF0dHJpYnV0ZSk7XG4gICAgICAgICAgICB2YXIgcGFyc2VkVXJsID0gdXJsLnBhcnNlKHByZXZpb3VzVXJsLCB0cnVlKTtcblxuICAgICAgICAgICAgcGFyc2VkVXJsLnF1ZXJ5Ll9saXZlcmVsb2FkID0gKG5ldyBEYXRlKS5nZXRUaW1lKCk7XG4gICAgICAgICAgICBkZWxldGUgcGFyc2VkVXJsLnNlYXJjaDtcbiAgICAgICAgICAgIG5vZGVJbmZvLmRvbU5vZGUuc2V0QXR0cmlidXRlKG5vZGVJbmZvLnJlZmVyZW5jZUF0dHJpYnV0ZSwgdXJsLmZvcm1hdChwYXJzZWRVcmwpKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVsb2FkIHRoZSBwYWdlLiBDdXJyZW50bHksIG9ubHkgZG9lcyBhIG5haXZlIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiByZWxvYWRQYWdlKCkge1xuICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKHRydWUpO1xuICAgIH1cblxuICAgIHNvY2tldC5vbignbHItZmlsZS1jaGFuZ2VkJywgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgb25GaWxlQ2hhbmdlZChkYXRhLmZpbGVSZWxhdGl2ZVBhdGgpO1xuICAgIH0pO1xufTtcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gQmFzZWQgaW4gcGFydCBvbiBjb2RlIGZyb20gQXBhY2hlIFJpcHBsZSwgaHR0cHM6Ly9naXRodWIuY29tL2FwYWNoZS9pbmN1YmF0b3ItcmlwcGxlXG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJ3V0aWxzJyk7XG5cbnZhciBfbGFzdE1vdXNlRXZlbnQsXG4gICAgX2lzTW91c2VEb3duO1xuXG4vLyBOT1RFOiBtaXNzaW5nIHZpZXcsIGRldGFpbCwgdG91Y2hlcywgdGFyZ2V0VG91Y2hlcywgc2NhbGUgYW5kIHJvdGF0aW9uXG5mdW5jdGlvbiBfY3JlYXRlVG91Y2hFdmVudCh0eXBlLCBjYW5CdWJibGUsIGNhbmNlbGFibGUsIGV2ZW50RGF0YSkge1xuICAgIHZhciB0b3VjaEV2ZW50ID0gd2luZG93LmRvY3VtZW50LmNyZWF0ZUV2ZW50KCdFdmVudCcpO1xuICAgIHRvdWNoRXZlbnQuaW5pdEV2ZW50KHR5cGUsIGNhbkJ1YmJsZSwgY2FuY2VsYWJsZSk7XG4gICAgdXRpbHMubWl4aW4oZXZlbnREYXRhLCB0b3VjaEV2ZW50KTtcblxuICAgIHJldHVybiB0b3VjaEV2ZW50O1xufVxuXG5mdW5jdGlvbiBfc2ltdWxhdGVUb3VjaEV2ZW50KHR5cGUsIG1vdXNlZXZlbnQpIHtcbiAgICBpZiAoX2xhc3RNb3VzZUV2ZW50ICYmXG4gICAgICAgICAgICBtb3VzZWV2ZW50LnR5cGUgPT09IF9sYXN0TW91c2VFdmVudC50eXBlICYmXG4gICAgICAgICAgICBtb3VzZWV2ZW50LnBhZ2VYID09PSBfbGFzdE1vdXNlRXZlbnQucGFnZVggJiZcbiAgICAgICAgICAgIG1vdXNlZXZlbnQucGFnZVkgPT09IF9sYXN0TW91c2VFdmVudC5wYWdlWSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgX2xhc3RNb3VzZUV2ZW50ID0gbW91c2VldmVudDtcblxuICAgIHZhciB0b3VjaE9iaiA9IHtcbiAgICAgICAgY2xpZW50WDogbW91c2VldmVudC5wYWdlWCxcbiAgICAgICAgY2xpZW50WTogbW91c2VldmVudC5wYWdlWSxcbiAgICAgICAgcGFnZVg6IG1vdXNlZXZlbnQucGFnZVgsXG4gICAgICAgIHBhZ2VZOiBtb3VzZWV2ZW50LnBhZ2VZLFxuICAgICAgICBzY3JlZW5YOiBtb3VzZWV2ZW50LnBhZ2VYLFxuICAgICAgICBzY3JlZW5ZOiBtb3VzZWV2ZW50LnBhZ2VZLFxuICAgICAgICB0YXJnZXQ6IG1vdXNlZXZlbnQudGFyZ2V0LFxuICAgICAgICBpZGVudGlmaWVyOiAnJ1xuICAgIH07XG5cbiAgICB2YXIgZXZlbnREYXRhID0ge1xuICAgICAgICBhbHRLZXk6IG1vdXNlZXZlbnQuYWx0S2V5LFxuICAgICAgICBjdHJsS2V5OiBtb3VzZWV2ZW50LmN0cmxLZXksXG4gICAgICAgIHNoaWZ0S2V5OiBtb3VzZWV2ZW50LnNoaWZ0S2V5LFxuICAgICAgICBtZXRhS2V5OiBtb3VzZWV2ZW50Lm1ldGFLZXksXG4gICAgICAgIGNoYW5nZWRUb3VjaGVzOiBbdG91Y2hPYmpdLFxuICAgICAgICB0YXJnZXRUb3VjaGVzOiB0eXBlID09PSAndG91Y2hlbmQnID8gW10gOiBbdG91Y2hPYmpdLFxuICAgICAgICB0b3VjaGVzOiB0eXBlID09PSAndG91Y2hlbmQnID8gW10gOiBbdG91Y2hPYmpdXG4gICAgfTtcblxuICAgIHV0aWxzLm1peGluKHRvdWNoT2JqLCBldmVudERhdGEpO1xuXG4gICAgdmFyIGl0ZW1GbiA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICByZXR1cm4gdGhpc1tpbmRleF07XG4gICAgfTtcblxuICAgIGV2ZW50RGF0YS50b3VjaGVzLml0ZW0gPSBpdGVtRm47XG4gICAgZXZlbnREYXRhLmNoYW5nZWRUb3VjaGVzLml0ZW0gPSBpdGVtRm47XG4gICAgZXZlbnREYXRhLnRhcmdldFRvdWNoZXMuaXRlbSA9IGl0ZW1GbjtcblxuICAgIHZhciBsaXN0ZW5lck5hbWUgPSAnb24nICsgdHlwZSxcbiAgICAgICAgc2ltdWxhdGVkRXZlbnQgPSBfY3JlYXRlVG91Y2hFdmVudCh0eXBlLCB0cnVlLCB0cnVlLCBldmVudERhdGEpO1xuXG4gICAgbW91c2VldmVudC50YXJnZXQuZGlzcGF0Y2hFdmVudChzaW11bGF0ZWRFdmVudCk7XG5cbiAgICBpZiAodHlwZW9mIG1vdXNlZXZlbnQudGFyZ2V0W2xpc3RlbmVyTmFtZV0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgbW91c2VldmVudC50YXJnZXRbbGlzdGVuZXJOYW1lXS5hcHBseShtb3VzZWV2ZW50LnRhcmdldCwgW3NpbXVsYXRlZEV2ZW50XSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBpbml0KCkge1xuICAgIHdpbmRvdy5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgX2lzTW91c2VEb3duID0gdHJ1ZTtcbiAgICAgICAgX3NpbXVsYXRlVG91Y2hFdmVudCgndG91Y2hzdGFydCcsIGV2ZW50KTtcbiAgICB9LCB0cnVlKTtcblxuICAgIHdpbmRvdy5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgaWYgKF9pc01vdXNlRG93bikge1xuICAgICAgICAgICAgX3NpbXVsYXRlVG91Y2hFdmVudCgndG91Y2htb3ZlJywgZXZlbnQpO1xuICAgICAgICB9XG4gICAgfSwgdHJ1ZSk7XG5cbiAgICB3aW5kb3cuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBfaXNNb3VzZURvd24gPSBmYWxzZTtcbiAgICAgICAgX3NpbXVsYXRlVG91Y2hFdmVudCgndG91Y2hlbmQnLCBldmVudCk7XG4gICAgfSwgdHJ1ZSk7XG5cbiAgICB3aW5kb3cuTm9kZS5wcm90b3R5cGUub250b3VjaHN0YXJ0ID0gbnVsbDtcbiAgICB3aW5kb3cuTm9kZS5wcm90b3R5cGUub250b3VjaGVuZCA9IG51bGw7XG4gICAgd2luZG93Lk5vZGUucHJvdG90eXBlLm9udG91Y2htb3ZlID0gbnVsbDtcbn1cblxubW9kdWxlLmV4cG9ydHMuaW5pdCA9IGluaXQ7XG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cblxuLyoqXG4gKiBJbnRlcmZhY2UgdG8gd3JhcCB0aGUgbmF0aXZlIEZpbGUgaW50ZXJmYWNlLlxuICpcbiAqIFRoaXMgaW50ZXJmYWNlIGlzIG5lY2Vzc2FyeSBmb3IgY3JlYXRpbmcgemVyby1sZW5ndGggKGVtcHR5KSBmaWxlcyxcbiAqIHNvbWV0aGluZyB0aGUgRmlsZXN5c3RlbSBBUEkgYWxsb3dzIHlvdSB0byBkby4gVW5mb3J0dW5hdGVseSwgRmlsZSdzXG4gKiBjb25zdHJ1Y3RvciBjYW5ub3QgYmUgY2FsbGVkIGRpcmVjdGx5LCBtYWtpbmcgaXQgaW1wb3NzaWJsZSB0byBpbnN0YW50aWF0ZVxuICogYW4gZW1wdHkgRmlsZSBpbiBKUy5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0cyBJbml0aWFsIHZhbHVlcy5cbiAqIEBjb25zdHJ1Y3RvclxuICovXG5mdW5jdGlvbiBNeUZpbGUob3B0cykge1xuICAgIHZhciBibG9iXyA9IG5ldyBCbG9iKCk7XG5cbiAgICB0aGlzLnNpemUgPSBvcHRzLnNpemUgfHwgMDtcbiAgICB0aGlzLm5hbWUgPSBvcHRzLm5hbWUgfHwgJyc7XG4gICAgdGhpcy50eXBlID0gb3B0cy50eXBlIHx8ICcnO1xuICAgIHRoaXMubGFzdE1vZGlmaWVkRGF0ZSA9IG9wdHMubGFzdE1vZGlmaWVkRGF0ZSB8fCBudWxsO1xuICAgIHRoaXMuc3RvcmFnZVBhdGggPSBvcHRzLnN0b3JhZ2VQYXRoIHx8ICcnO1xuXG4gICAgLy8gTmVlZCBzb21lIGJsYWNrIG1hZ2ljIHRvIGNvcnJlY3QgdGhlIG9iamVjdCdzIHNpemUvbmFtZS90eXBlIGJhc2VkIG9uIHRoZVxuICAgIC8vIGJsb2IgdGhhdCBpcyBzYXZlZC5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ2Jsb2JfJywge1xuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIGJsb2JfO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uKHZhbCkge1xuICAgICAgICAgICAgYmxvYl8gPSB2YWw7XG4gICAgICAgICAgICB0aGlzLnNpemUgPSBibG9iXy5zaXplO1xuICAgICAgICAgICAgdGhpcy5uYW1lID0gYmxvYl8ubmFtZTtcbiAgICAgICAgICAgIHRoaXMudHlwZSA9IGJsb2JfLnR5cGU7XG4gICAgICAgICAgICB0aGlzLmxhc3RNb2RpZmllZERhdGUgPSBibG9iXy5sYXN0TW9kaWZpZWREYXRlO1xuICAgICAgICB9LmJpbmQodGhpcylcbiAgICB9KTtcbn1cblxuTXlGaWxlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IE15RmlsZTtcblxubW9kdWxlLmV4cG9ydHMgPSBNeUZpbGU7XG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cblxuLypnbG9iYWwgVWludDhBcnJheTogZmFsc2UgKi9cblxuaWYgKCF3aW5kb3cuaW5kZXhlZERCKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdpbmRleGVkREIgbm90IHN1cHBvcnRlZCcpO1xufVxuXG4vLyBTaW5jZSB3ZSBhcmUgdXNpbmcgYnJvd3NlciBpbXBsZW1lbnRhdGlvblxuLy8gb2YgY29yZG92YS1maWxlLXBsdWdpbiBmb3Igbm9uLXdlYmtpdCBicm93c2Vycyxcbi8vIHdlIHNob3VsZCByZWZlcmVuY2UgTXlGaWxlLCBiZWNhdXNlIGN1cnJlbnRseSBsb2FkZWRcbi8vIHNpbXVsYXRpb24gcGxhdGZvcm0gbWlnaHQgbm90IGJlIHRoZSAnYnJvd3NlcicuXG4vLyAoYnJvd3NlciBwbGF0Zm9ybSB1c2VzIHRoaXMgZmlsZSBpbiBpdHMgaW1wbGVtZW50YXRpb24pLlxudmFyIE15RmlsZSA9IHJlcXVpcmUoJy4vTXlGaWxlJyk7XG5cbi8vIFNpbmNlIHdlIGFyZSB1c2luZyBicm93c2VyIGltcGxlbWVudGF0aW9uXG4vLyBvZiBjb3Jkb3ZhLWZpbGUtcGx1Z2luIGZvciBub24td2Via2l0IGJyb3dzZXJzLFxuLy8gd2Ugc2hvdWxkIHJlZmVyZW5jZSBJbmRleGVkIERCLCBiZWNhdXNlIGN1cnJlbnRseSBsb2FkZWRcbi8vIHNpbXVsYXRpb24gcGxhdGZvcm0gbWlnaHQgbm90IGJlIHRoZSAnYnJvd3NlcicuXG4vLyAoYnJvd3NlciBwbGF0Zm9ybSB1c2VzIHRoaXMgZmlsZSBpbiBpdHMgaW1wbGVtZW50YXRpb24pLlxudmFyIGluZGV4ZWREQiA9IHJlcXVpcmUoJy4vaW5kZXhlZERCJyk7XG5cbnZhciBESVJfU0VQQVJBVE9SID0gJy8nO1xudmFyIEZJTEVTWVNURU1fUFJFRklYID0gJ2ZpbGU6Ly8vJztcblxudmFyIGZpbGVTeXN0ZW0gPSBudWxsO1xuXG52YXIgcGF0aHNQcmVmaXggPSB7XG4gICAgLy8gUmVhZC1vbmx5IGRpcmVjdG9yeSB3aGVyZSB0aGUgYXBwbGljYXRpb24gaXMgaW5zdGFsbGVkLlxuICAgIGFwcGxpY2F0aW9uRGlyZWN0b3J5OiB3aW5kb3cubG9jYXRpb24ub3JpZ2luICsgJy8nLFxuICAgIC8vIFdoZXJlIHRvIHB1dCBhcHAtc3BlY2lmaWMgZGF0YSBmaWxlcy5cbiAgICBkYXRhRGlyZWN0b3J5OiAnZmlsZTovLy9wZXJzaXN0ZW50LycsXG4gICAgLy8gQ2FjaGVkIGZpbGVzIHRoYXQgc2hvdWxkIHN1cnZpdmUgYXBwIHJlc3RhcnRzLlxuICAgIC8vIEFwcHMgc2hvdWxkIG5vdCByZWx5IG9uIHRoZSBPUyB0byBkZWxldGUgZmlsZXMgaW4gaGVyZS5cbiAgICBjYWNoZURpcmVjdG9yeTogJ2ZpbGU6Ly8vdGVtcG9yYXJ5LycsXG4gICAgLy8gUmVhZC1vbmx5IGRpcmVjdG9yeSB3aGVyZSB0aGUgYXBwbGljYXRpb24gaXMgaW5zdGFsbGVkLlxuICAgIC8vIEFuZHJvaWQ6IHRoZSBhcHBsaWNhdGlvbiBzcGFjZSBvbiBleHRlcm5hbCBzdG9yYWdlLlxuICAgIGV4dGVybmFsQXBwbGljYXRpb25TdG9yYWdlRGlyZWN0b3J5OiBudWxsLFxuICAgIC8vIEFuZHJvaWQ6IFdoZXJlIHRvIHB1dCBhcHAtc3BlY2lmaWMgZGF0YSBmaWxlcyBvbiBleHRlcm5hbCBzdG9yYWdlLlxuICAgIGV4dGVybmFsRGF0YURpcmVjdG9yeTogbnVsbCxcbiAgICAvLyBBbmRyb2lkOiB0aGUgYXBwbGljYXRpb24gY2FjaGUgb24gZXh0ZXJuYWwgc3RvcmFnZS5cbiAgICBleHRlcm5hbENhY2hlRGlyZWN0b3J5OiBudWxsLFxuICAgIC8vIEFuZHJvaWQ6IHRoZSBleHRlcm5hbCBzdG9yYWdlIChTRCBjYXJkKSByb290LlxuICAgIGV4dGVybmFsUm9vdERpcmVjdG9yeTogbnVsbCxcbiAgICAvLyBpT1M6IFRlbXAgZGlyZWN0b3J5IHRoYXQgdGhlIE9TIGNhbiBjbGVhciBhdCB3aWxsLlxuICAgIHRlbXBEaXJlY3Rvcnk6IG51bGwsXG4gICAgLy8gaU9TOiBIb2xkcyBhcHAtc3BlY2lmaWMgZmlsZXMgdGhhdCBzaG91bGQgYmUgc3luY2VkIChlLmcuIHRvIGlDbG91ZCkuXG4gICAgc3luY2VkRGF0YURpcmVjdG9yeTogbnVsbCxcbiAgICAvLyBpT1M6IEZpbGVzIHByaXZhdGUgdG8gdGhlIGFwcCwgYnV0IHRoYXQgYXJlIG1lYW5pbmdmdWwgdG8gb3RoZXIgYXBwbGNpYXRpb25zIChlLmcuIE9mZmljZSBmaWxlcylcbiAgICBkb2N1bWVudHNEaXJlY3Rvcnk6IG51bGwsXG4gICAgLy8gQmxhY2tCZXJyeTEwOiBGaWxlcyBnbG9iYWxseSBhdmFpbGFibGUgdG8gYWxsIGFwcHNcbiAgICBzaGFyZWREaXJlY3Rvcnk6IG51bGxcbn07XG5cbi8vIFdlIG11c3Qgb3ZlcnJpZGUgc29tZSBmdW5jdGlvbmFsaXR5IHNvIHRoYXQgcGx1Z2luIGNhbiB3b3JrIHByb3Blcmx5LFxuLy8gZm9yIGV4YW1wbGUsIHdlIGNhbm5vdCBjYWxsICdjb3Jkb3ZhJyBvciBmaWxlLXBsdWdpbiByZWxhdGVkIGZpbGVzIGJlZm9yZSBkZXZpY2VyZWFkeVxuLy8gZXZlbnQgZmlyZWQgc2luY2UgYXBwLWhvc3QtaGFuZGxlcidzIGZpbGVzIGluaXRpYWxpemVzIGJlZm9yZSB0aGVtLlxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZGV2aWNlcmVhZHknLCBmdW5jdGlvbiAoKSB7XG4gICAgLy8gV2UgbXVzdCBvdmVycmlkZSBnZXRGcyBmdW5jdGlvbiBzaW5jZSB3ZSBhcmUgdXNpbmcgYnJvd3NlciBpbXBsZW1lbnRhdGlvblxuICAgIC8vIG9mIGNvcmRvdmEtcGx1Z2luLWZpbGUgc28gZXZlcnl0aGluZyB3aWxsIHdvcmsgYXMgZXhwZWN0ZWQuXG4gICAgd2luZG93LmNvcmRvdmEucmVxdWlyZSgnY29yZG92YS1wbHVnaW4tZmlsZS5maWxlU3lzdGVtcycpLmdldEZzID0gZnVuY3Rpb24gKG5hbWUsIGNhbGxiYWNrKSB7XG4gICAgICAgIGNhbGxiYWNrKG5ldyB3aW5kb3cuRmlsZVN5c3RlbShuYW1lLCBmaWxlU3lzdGVtLnJvb3QpKTtcbiAgICB9O1xuICAgIC8vIFNwZWNpYWwgZnVuY3Rpb25hbGl0eSBmb3IgcHJvcGVyIEZpcmVmb3ggd29yay5cbiAgICB3aW5kb3cuRmlsZVN5c3RlbS5wcm90b3R5cGUuX19mb3JtYXRfXyA9IGZ1bmN0aW9uKGZ1bGxQYXRoKSB7XG4gICAgICAgIHJldHVybiAoRklMRVNZU1RFTV9QUkVGSVggKyB0aGlzLm5hbWUgKyAoZnVsbFBhdGhbMF0gPT09ICcvJyA/ICcnIDogJy8nKSArIGVuY29kZVVSSShmdWxsUGF0aCkpO1xuICAgIH07XG59LCBmYWxzZSk7XG5cbi8qKiogSGVscGVycyAqKiovXG5cbi8vIFdoZW4gc2F2aW5nIGFuIGVudHJ5LCB0aGUgZnVsbFBhdGggc2hvdWxkIGFsd2F5cyBsZWFkIHdpdGggYSBzbGFzaCBhbmQgbmV2ZXJcbi8vIGVuZCB3aXRoIG9uZSAoZS5nLiBhIGRpcmVjdG9yeSkuIEFsc28sIHJlc29sdmUgJy4nIGFuZCAnLi4nIHRvIGFuIGFic29sdXRlXG4vLyBvbmUuIFRoaXMgbWV0aG9kIGVuc3VyZXMgcGF0aCBpcyBsZWdpdCFcbmZ1bmN0aW9uIHJlc29sdmVUb0Z1bGxQYXRoXyhjd2RGdWxsUGF0aCwgcGF0aCkge1xuICAgIHBhdGggPSBwYXRoIHx8ICcnO1xuICAgIHZhciBmdWxsUGF0aCA9IHBhdGg7XG4gICAgdmFyIHByZWZpeCA9ICcnO1xuXG4gICAgY3dkRnVsbFBhdGggPSBjd2RGdWxsUGF0aCB8fCBESVJfU0VQQVJBVE9SO1xuICAgIGlmIChjd2RGdWxsUGF0aC5pbmRleE9mKEZJTEVTWVNURU1fUFJFRklYKSA9PT0gMCkge1xuICAgICAgICBwcmVmaXggPSBjd2RGdWxsUGF0aC5zdWJzdHJpbmcoMCwgY3dkRnVsbFBhdGguaW5kZXhPZihESVJfU0VQQVJBVE9SLCBGSUxFU1lTVEVNX1BSRUZJWC5sZW5ndGgpKTtcbiAgICAgICAgY3dkRnVsbFBhdGggPSBjd2RGdWxsUGF0aC5zdWJzdHJpbmcoY3dkRnVsbFBhdGguaW5kZXhPZihESVJfU0VQQVJBVE9SLCBGSUxFU1lTVEVNX1BSRUZJWC5sZW5ndGgpKTtcbiAgICB9XG5cbiAgICB2YXIgcmVsYXRpdmVQYXRoID0gcGF0aFswXSAhPT0gRElSX1NFUEFSQVRPUjtcbiAgICBpZiAocmVsYXRpdmVQYXRoKSB7XG4gICAgICAgIGZ1bGxQYXRoID0gY3dkRnVsbFBhdGg7XG4gICAgICAgIGlmIChjd2RGdWxsUGF0aCAhPT0gRElSX1NFUEFSQVRPUikge1xuICAgICAgICAgICAgZnVsbFBhdGggKz0gRElSX1NFUEFSQVRPUiArIHBhdGg7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmdWxsUGF0aCArPSBwYXRoO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gUmVtb3ZlIGRvdWJsZWQgc2VwYXJhdG9yIHN1YnN0cmluZ3NcbiAgICB2YXIgcmUgPSBuZXcgUmVnRXhwKERJUl9TRVBBUkFUT1IgKyBESVJfU0VQQVJBVE9SLCAnZycpO1xuICAgIGZ1bGxQYXRoID0gZnVsbFBhdGgucmVwbGFjZShyZSwgRElSX1NFUEFSQVRPUik7XG5cbiAgICAvLyBBZGp1c3QgJy4uJ3MgYnkgcmVtb3ZpbmcgcGFyZW50IGRpcmVjdG9yaWVzIHdoZW4gJy4uJyBmbG93cyBpbiBwYXRoLlxuICAgIHZhciBwYXJ0cyA9IGZ1bGxQYXRoLnNwbGl0KERJUl9TRVBBUkFUT1IpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGFydHMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdmFyIHBhcnQgPSBwYXJ0c1tpXTtcbiAgICAgICAgaWYgKHBhcnQgPT09ICcuLicpIHtcbiAgICAgICAgICAgIHBhcnRzW2kgLSAxXSA9ICcnO1xuICAgICAgICAgICAgcGFydHNbaV0gPSAnJztcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdWxsUGF0aCA9IHBhcnRzLmZpbHRlcihmdW5jdGlvbihlbCkge1xuICAgICAgICByZXR1cm4gZWw7XG4gICAgfSkuam9pbihESVJfU0VQQVJBVE9SKTtcblxuICAgIC8vIEFkZCBiYWNrIGluIGxlYWRpbmcgc2xhc2guXG4gICAgaWYgKGZ1bGxQYXRoWzBdICE9PSBESVJfU0VQQVJBVE9SKSB7XG4gICAgICAgIGZ1bGxQYXRoID0gRElSX1NFUEFSQVRPUiArIGZ1bGxQYXRoO1xuICAgIH1cblxuICAgIC8vIFJlcGxhY2UgJy4vJyBieSBjdXJyZW50IGRpci4gKCcuL29uZS8uL3R3bycgLT4gb25lL3R3bylcbiAgICBmdWxsUGF0aCA9IGZ1bGxQYXRoLnJlcGxhY2UoL1xcLlxcLy9nLCBESVJfU0VQQVJBVE9SKTtcblxuICAgIC8vIFJlcGxhY2UgJy8vJyB3aXRoICcvJy5cbiAgICBmdWxsUGF0aCA9IGZ1bGxQYXRoLnJlcGxhY2UoL1xcL1xcLy9nLCBESVJfU0VQQVJBVE9SKTtcblxuICAgIC8vIFJlcGxhY2UgJy8uJyB3aXRoICcvJy5cbiAgICBmdWxsUGF0aCA9IGZ1bGxQYXRoLnJlcGxhY2UoL1xcL1xcLi9nLCBESVJfU0VQQVJBVE9SKTtcblxuICAgIC8vIFJlbW92ZSAnLycgaWYgaXQgYXBwZWFycyBvbiB0aGUgZW5kLlxuICAgIGlmIChmdWxsUGF0aFtmdWxsUGF0aC5sZW5ndGggLSAxXSA9PT0gRElSX1NFUEFSQVRPUiAmJlxuICAgICAgICBmdWxsUGF0aCAhPT0gRElSX1NFUEFSQVRPUikge1xuICAgICAgICBmdWxsUGF0aCA9IGZ1bGxQYXRoLnN1YnN0cmluZygwLCBmdWxsUGF0aC5sZW5ndGggLSAxKTtcbiAgICB9XG5cbiAgICB2YXIgc3RvcmFnZVBhdGggPSBwcmVmaXggKyBmdWxsUGF0aDtcbiAgICBzdG9yYWdlUGF0aCA9IGRlY29kZVVSSShzdG9yYWdlUGF0aCk7XG4gICAgZnVsbFBhdGggPSBkZWNvZGVVUkkoZnVsbFBhdGgpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgc3RvcmFnZVBhdGg6IHN0b3JhZ2VQYXRoLFxuICAgICAgICBmdWxsUGF0aDogZnVsbFBhdGgsXG4gICAgICAgIGZpbGVOYW1lOiBmdWxsUGF0aC5zcGxpdChESVJfU0VQQVJBVE9SKS5wb3AoKSxcbiAgICAgICAgZnNOYW1lOiBwcmVmaXguc3BsaXQoRElSX1NFUEFSQVRPUikucG9wKClcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBmaWxlRW50cnlGcm9tSWRiRW50cnkoZmlsZUVudHJ5KSB7XG4gICAgLy8gSURCIHdvbid0IHNhdmUgbWV0aG9kcywgc28gd2UgbmVlZCByZS1jcmVhdGUgdGhlIEZpbGVFbnRyeS5cbiAgICB2YXIgY2xvbmVkRmlsZUVudHJ5ID0gbmV3IHdpbmRvdy5GaWxlRW50cnkoZmlsZUVudHJ5Lm5hbWUsIGZpbGVFbnRyeS5mdWxsUGF0aCwgZmlsZUVudHJ5LmZpbGVzeXN0ZW0pO1xuICAgIGNsb25lZEZpbGVFbnRyeS5maWxlXyA9IGZpbGVFbnRyeS5maWxlXztcblxuICAgIHJldHVybiBjbG9uZWRGaWxlRW50cnk7XG59XG5cbmZ1bmN0aW9uIHJlYWRBcyh3aGF0LCBmdWxsUGF0aCwgZW5jb2RpbmcsIHN0YXJ0UG9zLCBlbmRQb3MsIHN1Y2Nlc3NDYWxsYmFjaywgZXJyb3JDYWxsYmFjaykge1xuICAgIGdldEZpbGUoZnVuY3Rpb24oZmlsZUVudHJ5KSB7XG4gICAgICAgIHZhciBmaWxlUmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKSxcbiAgICAgICAgICAgIGJsb2IgPSBmaWxlRW50cnkuZmlsZV8uYmxvYl8uc2xpY2Uoc3RhcnRQb3MsIGVuZFBvcyk7XG5cbiAgICAgICAgZmlsZVJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBzdWNjZXNzQ2FsbGJhY2soZS50YXJnZXQucmVzdWx0KTtcbiAgICAgICAgfTtcblxuICAgICAgICBmaWxlUmVhZGVyLm9uZXJyb3IgPSBlcnJvckNhbGxiYWNrO1xuXG4gICAgICAgIHN3aXRjaCAod2hhdCkge1xuICAgICAgICAgICAgY2FzZSAndGV4dCc6XG4gICAgICAgICAgICAgICAgZmlsZVJlYWRlci5yZWFkQXNUZXh0KGJsb2IsIGVuY29kaW5nKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ2RhdGFVUkwnOlxuICAgICAgICAgICAgICAgIGZpbGVSZWFkZXIucmVhZEFzRGF0YVVSTChibG9iKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ2FycmF5QnVmZmVyJzpcbiAgICAgICAgICAgICAgICBmaWxlUmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKGJsb2IpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnYmluYXJ5U3RyaW5nJzpcbiAgICAgICAgICAgICAgICBmaWxlUmVhZGVyLnJlYWRBc0JpbmFyeVN0cmluZyhibG9iKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgfSwgZXJyb3JDYWxsYmFjaywgW2Z1bGxQYXRoLCBudWxsXSk7XG59XG5cbi8qKiogSGFuZGxlcnMgKioqL1xuXG5mdW5jdGlvbiByZXF1ZXN0RmlsZVN5c3RlbShzdWNjZXNzQ2FsbGJhY2ssIGVycm9yQ2FsbGJhY2ssIGFyZ3MpIHtcbiAgICB2YXIgdHlwZSA9IGFyZ3NbMF07XG4gICAgLy8gU2l6ZSBpcyBpZ25vcmVkIHNpbmNlIElEQiBmaWxlc3lzdGVtIHNpemUgZGVwZW5kc1xuICAgIC8vIG9uIGJyb3dzZXIgaW1wbGVtZW50YXRpb24gYW5kIGNhbid0IGJlIHNldCB1cCBieSB1c2VyXG4gICAgdmFyIHNpemUgPSBhcmdzWzFdOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXG5cbiAgICBpZiAodHlwZSAhPT0gd2luZG93LkxvY2FsRmlsZVN5c3RlbS5URU1QT1JBUlkgJiYgdHlwZSAhPT0gd2luZG93LkxvY2FsRmlsZVN5c3RlbS5QRVJTSVNURU5UKSB7XG4gICAgICAgIGVycm9yQ2FsbGJhY2sgJiYgZXJyb3JDYWxsYmFjayh3aW5kb3cuRmlsZUVycm9yLklOVkFMSURfTU9ESUZJQ0FUSU9OX0VSUik7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgbmFtZSA9IHR5cGUgPT09IHdpbmRvdy5Mb2NhbEZpbGVTeXN0ZW0uVEVNUE9SQVJZID8gJ3RlbXBvcmFyeScgOiAncGVyc2lzdGVudCc7XG4gICAgdmFyIHN0b3JhZ2VOYW1lID0gKGxvY2F0aW9uLnByb3RvY29sICsgbG9jYXRpb24uaG9zdCkucmVwbGFjZSgvOi9nLCAnXycpO1xuXG4gICAgdmFyIHJvb3QgPSBuZXcgd2luZG93LkRpcmVjdG9yeUVudHJ5KCcnLCBESVJfU0VQQVJBVE9SKTtcbiAgICBmaWxlU3lzdGVtID0gbmV3IHdpbmRvdy5GaWxlU3lzdGVtKG5hbWUsIHJvb3QpO1xuXG4gICAgaW5kZXhlZERCLm9wZW4oc3RvcmFnZU5hbWUsIGZ1bmN0aW9uKCkge1xuICAgICAgICBzdWNjZXNzQ2FsbGJhY2soZmlsZVN5c3RlbSk7XG4gICAgfSwgZXJyb3JDYWxsYmFjayk7XG59XG5cbmZ1bmN0aW9uIHJlcXVlc3RGaWxlU3lzdGVtSGFuZGxlcihzdWNjZXNzQ2FsbGJhY2ssIGVycm9yQ2FsbGJhY2ssIG1vZHVsZSwgZXZlbnQsIGFyZ3MpIHtcbiAgICByZXF1ZXN0RmlsZVN5c3RlbShzdWNjZXNzQ2FsbGJhY2ssIGVycm9yQ2FsbGJhY2ssIGFyZ3MpO1xufVxuXG4vLyBsaXN0IGEgZGlyZWN0b3J5J3MgY29udGVudHMgKGZpbGVzIGFuZCBmb2xkZXJzKS5cbmZ1bmN0aW9uIHJlYWRFbnRyaWVzKHN1Y2Nlc3NDYWxsYmFjaywgZXJyb3JDYWxsYmFjaywgYXJncykge1xuICAgIHZhciBmdWxsUGF0aCA9IGFyZ3NbMF07XG5cbiAgICBpZiAodHlwZW9mIHN1Y2Nlc3NDYWxsYmFjayAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0aHJvdyBFcnJvcignRXhwZWN0ZWQgc3VjY2Vzc0NhbGxiYWNrIGFyZ3VtZW50LicpO1xuICAgIH1cblxuICAgIHZhciBwYXRoID0gcmVzb2x2ZVRvRnVsbFBhdGhfKGZ1bGxQYXRoKTtcblxuICAgIGdldERpcmVjdG9yeShmdW5jdGlvbigpIHtcbiAgICAgICAgaW5kZXhlZERCLmdldEFsbEVudHJpZXMocGF0aC5mdWxsUGF0aCArIERJUl9TRVBBUkFUT1IsIHBhdGguc3RvcmFnZVBhdGgsIGZ1bmN0aW9uKGVudHJpZXMpIHtcbiAgICAgICAgICAgIHN1Y2Nlc3NDYWxsYmFjayhlbnRyaWVzKTtcbiAgICAgICAgfSwgZXJyb3JDYWxsYmFjayk7XG4gICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmIChlcnJvckNhbGxiYWNrKSB7XG4gICAgICAgICAgICBlcnJvckNhbGxiYWNrKHdpbmRvdy5GaWxlRXJyb3IuTk9UX0ZPVU5EX0VSUik7XG4gICAgICAgIH1cbiAgICB9LCBbcGF0aC5zdG9yYWdlUGF0aCwgcGF0aC5mdWxsUGF0aCwge2NyZWF0ZTogZmFsc2V9XSk7XG59XG5cbmZ1bmN0aW9uIHJlYWRFbnRyaWVzSGFuZGxlcihzdWNjZXNzQ2FsbGJhY2ssIGVycm9yQ2FsbGJhY2ssIG1vZHVsZSwgZXZlbnQsIGFyZ3MpIHtcbiAgICByZWFkRW50cmllcyhzdWNjZXNzQ2FsbGJhY2ssIGVycm9yQ2FsbGJhY2ssIGFyZ3MpO1xufVxuXG5mdW5jdGlvbiBnZXRGaWxlKHN1Y2Nlc3NDYWxsYmFjaywgZXJyb3JDYWxsYmFjaywgYXJncykge1xuICAgIHZhciBmdWxsUGF0aCA9IGFyZ3NbMF07XG4gICAgdmFyIHBhdGggPSBhcmdzWzFdO1xuICAgIHZhciBvcHRpb25zID0gYXJnc1syXSB8fCB7fTtcblxuICAgIC8vIENyZWF0ZSBhbiBhYnNvbHV0ZSBwYXRoIGlmIHdlIHdlcmUgaGFuZGVkIGEgcmVsYXRpdmUgb25lLlxuICAgIHBhdGggPSByZXNvbHZlVG9GdWxsUGF0aF8oZnVsbFBhdGgsIHBhdGgpO1xuXG4gICAgaW5kZXhlZERCLmdldChwYXRoLnN0b3JhZ2VQYXRoLCBmdW5jdGlvbihmaWxlRW50cnkpIHtcbiAgICAgICAgaWYgKG9wdGlvbnMuY3JlYXRlID09PSB0cnVlICYmIG9wdGlvbnMuZXhjbHVzaXZlID09PSB0cnVlICYmIGZpbGVFbnRyeSkge1xuICAgICAgICAgICAgLy8gSWYgY3JlYXRlIGFuZCBleGNsdXNpdmUgYXJlIGJvdGggdHJ1ZSwgYW5kIHRoZSBwYXRoIGFscmVhZHkgZXhpc3RzLFxuICAgICAgICAgICAgLy8gZ2V0RmlsZSBtdXN0IGZhaWwuXG5cbiAgICAgICAgICAgIGlmIChlcnJvckNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgZXJyb3JDYWxsYmFjayh3aW5kb3cuRmlsZUVycm9yLlBBVEhfRVhJU1RTX0VSUik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAob3B0aW9ucy5jcmVhdGUgPT09IHRydWUgJiYgIWZpbGVFbnRyeSkge1xuICAgICAgICAgICAgLy8gSWYgY3JlYXRlIGlzIHRydWUsIHRoZSBwYXRoIGRvZXNuJ3QgZXhpc3QsIGFuZCBubyBvdGhlciBlcnJvciBvY2N1cnMsXG4gICAgICAgICAgICAvLyBnZXRGaWxlIG11c3QgY3JlYXRlIGl0IGFzIGEgemVyby1sZW5ndGggZmlsZSBhbmQgcmV0dXJuIGEgY29ycmVzcG9uZGluZ1xuICAgICAgICAgICAgLy8gRmlsZUVudHJ5LlxuICAgICAgICAgICAgdmFyIG5ld0ZpbGVFbnRyeSA9IG5ldyB3aW5kb3cuRmlsZUVudHJ5KHBhdGguZmlsZU5hbWUsIHBhdGguZnVsbFBhdGgsIG5ldyB3aW5kb3cuRmlsZVN5c3RlbShwYXRoLmZzTmFtZSwgZmlsZVN5c3RlbS5yb290KSk7XG5cbiAgICAgICAgICAgIG5ld0ZpbGVFbnRyeS5maWxlXyA9IG5ldyBNeUZpbGUoe1xuICAgICAgICAgICAgICAgIHNpemU6IDAsXG4gICAgICAgICAgICAgICAgbmFtZTogbmV3RmlsZUVudHJ5Lm5hbWUsXG4gICAgICAgICAgICAgICAgbGFzdE1vZGlmaWVkRGF0ZTogbmV3IERhdGUoKSxcbiAgICAgICAgICAgICAgICBzdG9yYWdlUGF0aDogcGF0aC5zdG9yYWdlUGF0aFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGluZGV4ZWREQi5wdXQobmV3RmlsZUVudHJ5LCBwYXRoLnN0b3JhZ2VQYXRoLCBzdWNjZXNzQ2FsbGJhY2ssIGVycm9yQ2FsbGJhY2spO1xuICAgICAgICB9IGVsc2UgaWYgKG9wdGlvbnMuY3JlYXRlID09PSB0cnVlICYmIGZpbGVFbnRyeSkge1xuICAgICAgICAgICAgaWYgKGZpbGVFbnRyeS5pc0ZpbGUpIHtcbiAgICAgICAgICAgICAgICAvLyBPdmVyd3JpdGUgZmlsZSwgZGVsZXRlIHRoZW4gY3JlYXRlIG5ldy5cbiAgICAgICAgICAgICAgICBpbmRleGVkREJbJ2RlbGV0ZSddKHBhdGguc3RvcmFnZVBhdGgsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbmV3RmlsZUVudHJ5ID0gbmV3IHdpbmRvdy5GaWxlRW50cnkocGF0aC5maWxlTmFtZSwgcGF0aC5mdWxsUGF0aCwgbmV3IHdpbmRvdy5GaWxlU3lzdGVtKHBhdGguZnNOYW1lLCBmaWxlU3lzdGVtLnJvb3QpKTtcblxuICAgICAgICAgICAgICAgICAgICBuZXdGaWxlRW50cnkuZmlsZV8gPSBuZXcgTXlGaWxlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpemU6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBuZXdGaWxlRW50cnkubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RNb2RpZmllZERhdGU6IG5ldyBEYXRlKCksXG4gICAgICAgICAgICAgICAgICAgICAgICBzdG9yYWdlUGF0aDogcGF0aC5zdG9yYWdlUGF0aFxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICBpbmRleGVkREIucHV0KG5ld0ZpbGVFbnRyeSwgcGF0aC5zdG9yYWdlUGF0aCwgc3VjY2Vzc0NhbGxiYWNrLCBlcnJvckNhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICB9LCBlcnJvckNhbGxiYWNrKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yQ2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JDYWxsYmFjayh3aW5kb3cuRmlsZUVycm9yLklOVkFMSURfTU9ESUZJQ0FUSU9OX0VSUik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKCghb3B0aW9ucy5jcmVhdGUgfHwgb3B0aW9ucy5jcmVhdGUgPT09IGZhbHNlKSAmJiAhZmlsZUVudHJ5KSB7XG4gICAgICAgICAgICAvLyBJZiBjcmVhdGUgaXMgbm90IHRydWUgYW5kIHRoZSBwYXRoIGRvZXNuJ3QgZXhpc3QsIGdldEZpbGUgbXVzdCBmYWlsLlxuICAgICAgICAgICAgaWYgKGVycm9yQ2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICBlcnJvckNhbGxiYWNrKHdpbmRvdy5GaWxlRXJyb3IuTk9UX0ZPVU5EX0VSUik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoKCFvcHRpb25zLmNyZWF0ZSB8fCBvcHRpb25zLmNyZWF0ZSA9PT0gZmFsc2UpICYmIGZpbGVFbnRyeSAmJlxuICAgICAgICAgICAgZmlsZUVudHJ5LmlzRGlyZWN0b3J5KSB7XG4gICAgICAgICAgICAvLyBJZiBjcmVhdGUgaXMgbm90IHRydWUgYW5kIHRoZSBwYXRoIGV4aXN0cywgYnV0IGlzIGEgZGlyZWN0b3J5LCBnZXRGaWxlXG4gICAgICAgICAgICAvLyBtdXN0IGZhaWwuXG4gICAgICAgICAgICBpZiAoZXJyb3JDYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIGVycm9yQ2FsbGJhY2sod2luZG93LkZpbGVFcnJvci5UWVBFX01JU01BVENIX0VSUik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBPdGhlcndpc2UsIGlmIG5vIG90aGVyIGVycm9yIG9jY3VycywgZ2V0RmlsZSBtdXN0IHJldHVybiBhIEZpbGVFbnRyeVxuICAgICAgICAgICAgLy8gY29ycmVzcG9uZGluZyB0byBwYXRoLlxuXG4gICAgICAgICAgICBzdWNjZXNzQ2FsbGJhY2soZmlsZUVudHJ5RnJvbUlkYkVudHJ5KGZpbGVFbnRyeSkpO1xuICAgICAgICB9XG4gICAgfSwgZXJyb3JDYWxsYmFjayk7XG59XG5cbmZ1bmN0aW9uIGdldEZpbGVIYW5kbGVyKHN1Y2Nlc3NDYWxsYmFjaywgZXJyb3JDYWxsYmFjaywgbW9kdWxlLCBldmVudCwgYXJncykge1xuICAgIGdldEZpbGUoc3VjY2Vzc0NhbGxiYWNrLCBlcnJvckNhbGxiYWNrLCBhcmdzKTtcbn1cblxuZnVuY3Rpb24gZ2V0RmlsZU1ldGFkYXRhKHN1Y2Nlc3NDYWxsYmFjaywgZXJyb3JDYWxsYmFjaywgbW9kdWxlLCBldmVudCwgYXJncykge1xuICAgIHZhciBmdWxsUGF0aCA9IGFyZ3NbMF07XG5cbiAgICBnZXRGaWxlKGZ1bmN0aW9uKGZpbGVFbnRyeSkge1xuICAgICAgICBzdWNjZXNzQ2FsbGJhY2sobmV3IHdpbmRvdy5GaWxlKGZpbGVFbnRyeS5maWxlXy5uYW1lLCBmaWxlRW50cnkuZnVsbFBhdGgsICcnLCBmaWxlRW50cnkuZmlsZV8ubGFzdE1vZGlmaWVkRGF0ZSxcbiAgICAgICAgICAgIGZpbGVFbnRyeS5maWxlXy5zaXplKSk7XG4gICAgfSwgZXJyb3JDYWxsYmFjaywgW2Z1bGxQYXRoLCBudWxsXSk7XG59XG5cbmZ1bmN0aW9uIHNldE1ldGFkYXRhKHN1Y2Nlc3NDYWxsYmFjaywgZXJyb3JDYWxsYmFjaywgbW9kdWxlLCBldmVudCwgYXJncykge1xuICAgIHZhciBmdWxsUGF0aCA9IGFyZ3NbMF07XG4gICAgdmFyIG1ldGFkYXRhT2JqZWN0ID0gYXJnc1sxXTtcblxuICAgIGdldEZpbGUoZnVuY3Rpb24gKGZpbGVFbnRyeSkge1xuICAgICAgICBmaWxlRW50cnkuZmlsZV8ubGFzdE1vZGlmaWVkRGF0ZSA9IG1ldGFkYXRhT2JqZWN0Lm1vZGlmaWNhdGlvblRpbWU7XG4gICAgICAgIGluZGV4ZWREQi5wdXQoZmlsZUVudHJ5LCBmaWxlRW50cnkuZmlsZV8uc3RvcmFnZVBhdGgsIHN1Y2Nlc3NDYWxsYmFjaywgZXJyb3JDYWxsYmFjayk7XG4gICAgfSwgZXJyb3JDYWxsYmFjaywgW2Z1bGxQYXRoLCBudWxsXSk7XG59XG5cbmZ1bmN0aW9uIHdyaXRlKHN1Y2Nlc3NDYWxsYmFjaywgZXJyb3JDYWxsYmFjaywgYXJncykge1xuICAgIHZhciBmaWxlTmFtZSA9IGFyZ3NbMF0sXG4gICAgICAgIGRhdGEgPSBhcmdzWzFdLFxuICAgICAgICBwb3NpdGlvbiA9IGFyZ3NbMl0sXG4gICAgICAgIGlzQmluYXJ5ID0gYXJnc1szXTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xuXG4gICAgaWYgKCFkYXRhKSB7XG4gICAgICAgIGVycm9yQ2FsbGJhY2sgJiYgZXJyb3JDYWxsYmFjayh3aW5kb3cuRmlsZUVycm9yLklOVkFMSURfTU9ESUZJQ0FUSU9OX0VSUik7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnIHx8IGRhdGEgaW5zdGFuY2VvZiBTdHJpbmcpIHtcbiAgICAgICAgZGF0YSA9IG5ldyBCbG9iKFtkYXRhXSk7XG4gICAgfVxuXG4gICAgZ2V0RmlsZShmdW5jdGlvbihmaWxlRW50cnkpIHtcbiAgICAgICAgdmFyIGJsb2JfID0gZmlsZUVudHJ5LmZpbGVfLmJsb2JfO1xuXG4gICAgICAgIGlmICghYmxvYl8pIHtcbiAgICAgICAgICAgIGJsb2JfID0gbmV3IEJsb2IoW2RhdGFdLCB7dHlwZTogZGF0YS50eXBlfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBDYWxjIHRoZSBoZWFkIGFuZCB0YWlsIGZyYWdtZW50c1xuICAgICAgICAgICAgdmFyIGhlYWQgPSBibG9iXy5zbGljZSgwLCBwb3NpdGlvbik7XG4gICAgICAgICAgICB2YXIgdGFpbCA9IGJsb2JfLnNsaWNlKHBvc2l0aW9uICsgKGRhdGEuc2l6ZSB8fCBkYXRhLmJ5dGVMZW5ndGgpKTtcblxuICAgICAgICAgICAgLy8gQ2FsYyB0aGUgcGFkZGluZ1xuICAgICAgICAgICAgdmFyIHBhZGRpbmcgPSBwb3NpdGlvbiAtIGhlYWQuc2l6ZTtcbiAgICAgICAgICAgIGlmIChwYWRkaW5nIDwgMCkge1xuICAgICAgICAgICAgICAgIHBhZGRpbmcgPSAwO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBEbyB0aGUgJ3dyaXRlJy4gSW4gZmFjdCwgYSBmdWxsIG92ZXJ3cml0ZSBvZiB0aGUgQmxvYi5cbiAgICAgICAgICAgIGJsb2JfID0gbmV3IEJsb2IoW2hlYWQsIG5ldyBVaW50OEFycmF5KHBhZGRpbmcpLCBkYXRhLCB0YWlsXSxcbiAgICAgICAgICAgICAgICB7dHlwZTogZGF0YS50eXBlfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTZXQgdGhlIGJsb2Igd2UncmUgd3JpdGluZyBvbiB0aGlzIGZpbGUgZW50cnkgc28gd2UgY2FuIHJlY2FsbCBpdCBsYXRlci5cbiAgICAgICAgZmlsZUVudHJ5LmZpbGVfLmJsb2JfID0gYmxvYl87XG4gICAgICAgIGZpbGVFbnRyeS5maWxlXy5sYXN0TW9kaWZpZWREYXRlID0gbmV3IERhdGUoKSB8fCBudWxsO1xuICAgICAgICBmaWxlRW50cnkuZmlsZV8uc2l6ZSA9IGJsb2JfLnNpemU7XG4gICAgICAgIGZpbGVFbnRyeS5maWxlXy5uYW1lID0gYmxvYl8ubmFtZTtcbiAgICAgICAgZmlsZUVudHJ5LmZpbGVfLnR5cGUgPSBibG9iXy50eXBlO1xuXG4gICAgICAgIGluZGV4ZWREQi5wdXQoZmlsZUVudHJ5LCBmaWxlRW50cnkuZmlsZV8uc3RvcmFnZVBhdGgsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc3VjY2Vzc0NhbGxiYWNrKGRhdGEuc2l6ZSB8fCBkYXRhLmJ5dGVMZW5ndGgpO1xuICAgICAgICB9LCBlcnJvckNhbGxiYWNrKTtcbiAgICB9LCBlcnJvckNhbGxiYWNrLCBbZmlsZU5hbWUsIG51bGxdKTtcbn1cblxuZnVuY3Rpb24gd3JpdGVIYW5kbGVyKHN1Y2Nlc3NDYWxsYmFjaywgZXJyb3JDYWxsYmFjaywgbW9kdWxlLCBldmVudCwgYXJncykge1xuICAgIHdyaXRlKHN1Y2Nlc3NDYWxsYmFjaywgZXJyb3JDYWxsYmFjaywgYXJncyk7XG59XG5cbmZ1bmN0aW9uIHJlYWRBc1RleHRIYW5kbGVyKHN1Y2Nlc3NDYWxsYmFjaywgZXJyb3JDYWxsYmFjaywgbW9kdWxlLCBldmVudCwgYXJncykge1xuICAgIHZhciBmaWxlTmFtZSA9IGFyZ3NbMF0sXG4gICAgICAgIGVuYyA9IGFyZ3NbMV0sXG4gICAgICAgIHN0YXJ0UG9zID0gYXJnc1syXSxcbiAgICAgICAgZW5kUG9zID0gYXJnc1szXTtcblxuICAgIHJlYWRBcygndGV4dCcsIGZpbGVOYW1lLCBlbmMsIHN0YXJ0UG9zLCBlbmRQb3MsIHN1Y2Nlc3NDYWxsYmFjaywgZXJyb3JDYWxsYmFjayk7XG59XG5cbmZ1bmN0aW9uIHJlYWRBc0RhdGFVUkxIYW5kbGVyKHN1Y2Nlc3NDYWxsYmFjaywgZXJyb3JDYWxsYmFjaywgbW9kdWxlLCBldmVudCwgYXJncykge1xuICAgIHZhciBmaWxlTmFtZSA9IGFyZ3NbMF0sXG4gICAgICAgIHN0YXJ0UG9zID0gYXJnc1sxXSxcbiAgICAgICAgZW5kUG9zID0gYXJnc1syXTtcblxuICAgIHJlYWRBcygnZGF0YVVSTCcsIGZpbGVOYW1lLCBudWxsLCBzdGFydFBvcywgZW5kUG9zLCBzdWNjZXNzQ2FsbGJhY2ssIGVycm9yQ2FsbGJhY2spO1xufVxuXG5mdW5jdGlvbiByZWFkQXNCaW5hcnlTdHJpbmdIYW5kbGVyKHN1Y2Nlc3NDYWxsYmFjaywgZXJyb3JDYWxsYmFjaywgbW9kdWxlLCBldmVudCwgYXJncykge1xuICAgIHZhciBmaWxlTmFtZSA9IGFyZ3NbMF0sXG4gICAgICAgIHN0YXJ0UG9zID0gYXJnc1sxXSxcbiAgICAgICAgZW5kUG9zID0gYXJnc1syXTtcblxuICAgIHJlYWRBcygnYmluYXJ5U3RyaW5nJywgZmlsZU5hbWUsIG51bGwsIHN0YXJ0UG9zLCBlbmRQb3MsIHN1Y2Nlc3NDYWxsYmFjaywgZXJyb3JDYWxsYmFjayk7XG59XG5cbmZ1bmN0aW9uIHJlYWRBc0FycmF5QnVmZmVySGFuZGxlcihzdWNjZXNzQ2FsbGJhY2ssIGVycm9yQ2FsbGJhY2ssIG1vZHVsZSwgZXZlbnQsIGFyZ3MpIHtcbiAgICB2YXIgZmlsZU5hbWUgPSBhcmdzWzBdLFxuICAgICAgICBzdGFydFBvcyA9IGFyZ3NbMV0sXG4gICAgICAgIGVuZFBvcyA9IGFyZ3NbMl07XG5cbiAgICByZWFkQXMoJ2FycmF5QnVmZmVyJywgZmlsZU5hbWUsIG51bGwsIHN0YXJ0UG9zLCBlbmRQb3MsIHN1Y2Nlc3NDYWxsYmFjaywgZXJyb3JDYWxsYmFjayk7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZVJlY3Vyc2l2ZWx5KHN1Y2Nlc3NDYWxsYmFjaywgZXJyb3JDYWxsYmFjaywgbW9kdWxlLCBldmVudCwgYXJncykge1xuICAgIHJlbW92ZUhhbmRsZXIoc3VjY2Vzc0NhbGxiYWNrLCBlcnJvckNhbGxiYWNrLCBtb2R1bGUsIGV2ZW50LCBhcmdzKTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlKHN1Y2Nlc3NDYWxsYmFjaywgZXJyb3JDYWxsYmFjaywgYXJncykge1xuICAgIHZhciBmdWxsUGF0aCA9IHJlc29sdmVUb0Z1bGxQYXRoXyhhcmdzWzBdKS5zdG9yYWdlUGF0aDtcbiAgICBpZiAoZnVsbFBhdGggPT09IHBhdGhzUHJlZml4LmNhY2hlRGlyZWN0b3J5IHx8IGZ1bGxQYXRoID09PSBwYXRoc1ByZWZpeC5kYXRhRGlyZWN0b3J5KSB7XG4gICAgICAgIGVycm9yQ2FsbGJhY2sod2luZG93LkZpbGVFcnJvci5OT19NT0RJRklDQVRJT05fQUxMT1dFRF9FUlIpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGVsZXRlRW50cnkoaXNEaXJlY3RvcnkpIHtcbiAgICAgICAgLy8gVE9ETzogVGhpcyBkb2Vzbid0IHByb3RlY3QgYWdhaW5zdCBkaXJlY3RvcmllcyB0aGF0IGhhdmUgY29udGVudCBpbiBpdC5cbiAgICAgICAgLy8gU2hvdWxkIHRocm93IGFuIGVycm9yIGluc3RlYWQgaWYgdGhlIGRpckVudHJ5IGlzIG5vdCBlbXB0eS5cbiAgICAgICAgaW5kZXhlZERCWydkZWxldGUnXShmdWxsUGF0aCwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzdWNjZXNzQ2FsbGJhY2sgJiYgc3VjY2Vzc0NhbGxiYWNrKCk7XG4gICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgZXJyb3JDYWxsYmFjayAmJiBlcnJvckNhbGxiYWNrKCk7XG4gICAgICAgIH0sIGlzRGlyZWN0b3J5KTtcbiAgICB9XG5cbiAgICAvLyBXZSBuZWVkIHRvIHRvIHVuZGVyc3RhbmQgd2hhdCB3ZSBhcmUgZGVsZXRpbmc6XG4gICAgZ2V0RGlyZWN0b3J5KGZ1bmN0aW9uKGVudHJ5KSB7XG4gICAgICAgIGRlbGV0ZUVudHJ5KGVudHJ5LmlzRGlyZWN0b3J5KTtcbiAgICB9LCBmdW5jdGlvbigpe1xuICAgICAgICAvL0RpcmVjdG9yeUVudHJ5IHdhcyBhbHJlYWR5IGRlbGV0ZWQgb3IgZW50cnkgaXMgRmlsZUVudHJ5XG4gICAgICAgIGRlbGV0ZUVudHJ5KGZhbHNlKTtcbiAgICB9LCBbZnVsbFBhdGgsIG51bGwsIHtjcmVhdGU6IGZhbHNlfV0pO1xufVxuXG5mdW5jdGlvbiByZW1vdmVIYW5kbGVyKHN1Y2Nlc3NDYWxsYmFjaywgZXJyb3JDYWxsYmFjaywgbW9kdWxlLCBldmVudCwgYXJncykge1xuICAgIHJlbW92ZShzdWNjZXNzQ2FsbGJhY2ssIGVycm9yQ2FsbGJhY2ssIGFyZ3MpO1xufVxuXG5mdW5jdGlvbiBnZXREaXJlY3Rvcnkoc3VjY2Vzc0NhbGxiYWNrLCBlcnJvckNhbGxiYWNrLCBhcmdzKSB7XG4gICAgdmFyIGZ1bGxQYXRoID0gYXJnc1swXTtcbiAgICB2YXIgcGF0aCA9IGFyZ3NbMV07XG4gICAgdmFyIG9wdGlvbnMgPSBhcmdzWzJdO1xuXG4gICAgLy8gQ3JlYXRlIGFuIGFic29sdXRlIHBhdGggaWYgd2Ugd2VyZSBoYW5kZWQgYSByZWxhdGl2ZSBvbmUuXG4gICAgcGF0aCA9IHJlc29sdmVUb0Z1bGxQYXRoXyhmdWxsUGF0aCwgcGF0aCk7XG5cbiAgICBpbmRleGVkREIuZ2V0KHBhdGguc3RvcmFnZVBhdGgsIGZ1bmN0aW9uKGZvbGRlckVudHJ5KSB7XG4gICAgICAgIGlmICghb3B0aW9ucykge1xuICAgICAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG9wdGlvbnMuY3JlYXRlID09PSB0cnVlICYmIG9wdGlvbnMuZXhjbHVzaXZlID09PSB0cnVlICYmIGZvbGRlckVudHJ5KSB7XG4gICAgICAgICAgICAvLyBJZiBjcmVhdGUgYW5kIGV4Y2x1c2l2ZSBhcmUgYm90aCB0cnVlLCBhbmQgdGhlIHBhdGggYWxyZWFkeSBleGlzdHMsXG4gICAgICAgICAgICAvLyBnZXREaXJlY3RvcnkgbXVzdCBmYWlsLlxuICAgICAgICAgICAgaWYgKGVycm9yQ2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICBlcnJvckNhbGxiYWNrKHdpbmRvdy5GaWxlRXJyb3IuUEFUSF9FWElTVFNfRVJSKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFRoZXJlIGlzIGEgc3RyYW5nZSBidWcgaW4gbW9iaWxlc3BlYyArIEZGLCB3aGljaCByZXN1bHRzIGluIGNvbWluZyB0byBtdWx0aXBsZSBlbHNlLWlmJ3NcbiAgICAgICAgICAgIC8vIHNvIHdlIGFyZSBzaGllbGRpbmcgZnJvbSBpdCB3aXRoIHJldHVybnMuXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAob3B0aW9ucy5jcmVhdGUgPT09IHRydWUgJiYgIWZvbGRlckVudHJ5KSB7XG4gICAgICAgICAgICAvLyBJZiBjcmVhdGUgaXMgdHJ1ZSwgdGhlIHBhdGggZG9lc24ndCBleGlzdCwgYW5kIG5vIG90aGVyIGVycm9yIG9jY3VycyxcbiAgICAgICAgICAgIC8vIGdldERpcmVjdG9yeSBtdXN0IGNyZWF0ZSBpdCBhcyBhIHplcm8tbGVuZ3RoIGZpbGUgYW5kIHJldHVybiBhIGNvcnJlc3BvbmRpbmdcbiAgICAgICAgICAgIC8vIE15RGlyZWN0b3J5RW50cnkuXG4gICAgICAgICAgICB2YXIgZGlyRW50cnkgPSBuZXcgd2luZG93LkRpcmVjdG9yeUVudHJ5KHBhdGguZmlsZU5hbWUsIHBhdGguZnVsbFBhdGgsIG5ldyB3aW5kb3cuRmlsZVN5c3RlbShwYXRoLmZzTmFtZSwgZmlsZVN5c3RlbS5yb290KSk7XG5cbiAgICAgICAgICAgIGluZGV4ZWREQi5wdXQoZGlyRW50cnksIHBhdGguc3RvcmFnZVBhdGgsIHN1Y2Nlc3NDYWxsYmFjaywgZXJyb3JDYWxsYmFjayk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAob3B0aW9ucy5jcmVhdGUgPT09IHRydWUgJiYgZm9sZGVyRW50cnkpIHtcblxuICAgICAgICAgICAgaWYgKGZvbGRlckVudHJ5LmlzRGlyZWN0b3J5KSB7XG4gICAgICAgICAgICAgICAgLy8gSURCIHdvbid0IHNhdmUgbWV0aG9kcywgc28gd2UgbmVlZCByZS1jcmVhdGUgdGhlIE15RGlyZWN0b3J5RW50cnkuXG4gICAgICAgICAgICAgICAgc3VjY2Vzc0NhbGxiYWNrKG5ldyB3aW5kb3cuRGlyZWN0b3J5RW50cnkoZm9sZGVyRW50cnkubmFtZSwgZm9sZGVyRW50cnkuZnVsbFBhdGgsIGZvbGRlckVudHJ5LmZpbGVzeXN0ZW0pKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yQ2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JDYWxsYmFjayh3aW5kb3cuRmlsZUVycm9yLklOVkFMSURfTU9ESUZJQ0FUSU9OX0VSUik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCghb3B0aW9ucy5jcmVhdGUgfHwgb3B0aW9ucy5jcmVhdGUgPT09IGZhbHNlKSAmJiAhZm9sZGVyRW50cnkpIHtcbiAgICAgICAgICAgIC8vIEhhbmRsZSByb290IHNwZWNpYWwuIEl0IHNob3VsZCBhbHdheXMgZXhpc3QuXG4gICAgICAgICAgICBpZiAocGF0aC5mdWxsUGF0aCA9PT0gRElSX1NFUEFSQVRPUikge1xuICAgICAgICAgICAgICAgIHN1Y2Nlc3NDYWxsYmFjayhmaWxlU3lzdGVtLnJvb3QpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gSWYgY3JlYXRlIGlzIG5vdCB0cnVlIGFuZCB0aGUgcGF0aCBkb2Vzbid0IGV4aXN0LCBnZXREaXJlY3RvcnkgbXVzdCBmYWlsLlxuICAgICAgICAgICAgaWYgKGVycm9yQ2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICBlcnJvckNhbGxiYWNrKHdpbmRvdy5GaWxlRXJyb3IuTk9UX0ZPVU5EX0VSUik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoKCFvcHRpb25zLmNyZWF0ZSB8fCBvcHRpb25zLmNyZWF0ZSA9PT0gZmFsc2UpICYmIGZvbGRlckVudHJ5ICYmIGZvbGRlckVudHJ5LmlzRmlsZSkge1xuICAgICAgICAgICAgLy8gSWYgY3JlYXRlIGlzIG5vdCB0cnVlIGFuZCB0aGUgcGF0aCBleGlzdHMsIGJ1dCBpcyBhIGZpbGUsIGdldERpcmVjdG9yeVxuICAgICAgICAgICAgLy8gbXVzdCBmYWlsLlxuICAgICAgICAgICAgaWYgKGVycm9yQ2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICBlcnJvckNhbGxiYWNrKHdpbmRvdy5GaWxlRXJyb3IuVFlQRV9NSVNNQVRDSF9FUlIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gT3RoZXJ3aXNlLCBpZiBubyBvdGhlciBlcnJvciBvY2N1cnMsIGdldERpcmVjdG9yeSBtdXN0IHJldHVybiBhXG4gICAgICAgIC8vIE15RGlyZWN0b3J5RW50cnkgY29ycmVzcG9uZGluZyB0byBwYXRoLlxuXG4gICAgICAgIC8vIElEQiB3b24ndCcgc2F2ZSBtZXRob2RzLCBzbyB3ZSBuZWVkIHJlLWNyZWF0ZSBNeURpcmVjdG9yeUVudHJ5LlxuICAgICAgICBzdWNjZXNzQ2FsbGJhY2sobmV3IHdpbmRvdy5EaXJlY3RvcnlFbnRyeShmb2xkZXJFbnRyeS5uYW1lLCBmb2xkZXJFbnRyeS5mdWxsUGF0aCwgZm9sZGVyRW50cnkuZmlsZXN5c3RlbSkpO1xuICAgIH0sIGVycm9yQ2FsbGJhY2spO1xufVxuXG5mdW5jdGlvbiBnZXREaXJlY3RvcnlIYW5kbGVyKHN1Y2Nlc3NDYWxsYmFjaywgZXJyb3JDYWxsYmFjaywgbW9kdWxlLCBldmVudCwgYXJncykge1xuICAgIGdldERpcmVjdG9yeShzdWNjZXNzQ2FsbGJhY2ssIGVycm9yQ2FsbGJhY2ssIGFyZ3MpO1xufVxuXG5mdW5jdGlvbiBnZXRQYXJlbnRIYW5kbGVyKHN1Y2Nlc3NDYWxsYmFjaywgZXJyb3JDYWxsYmFjaywgbW9kdWxlLCBhcmdzKSB7XG4gICAgaWYgKHR5cGVvZiBzdWNjZXNzQ2FsbGJhY2sgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdGhyb3cgRXJyb3IoJ0V4cGVjdGVkIHN1Y2Nlc3NDYWxsYmFjayBhcmd1bWVudC4nKTtcbiAgICB9XG5cbiAgICB2YXIgZnVsbFBhdGggPSBhcmdzWzBdO1xuICAgIC8vZnVsbFBhdGggaXMgbGlrZSB0aGlzOlxuICAgIC8vZmlsZTovLy9wZXJzaXN0ZW50L3BhdGgvdG8vZmlsZSBvclxuICAgIC8vZmlsZTovLy9wZXJzaXN0ZW50L3BhdGgvdG8vZGlyZWN0b3J5L1xuXG4gICAgaWYgKGZ1bGxQYXRoID09PSBESVJfU0VQQVJBVE9SIHx8IGZ1bGxQYXRoID09PSBwYXRoc1ByZWZpeC5jYWNoZURpcmVjdG9yeSB8fFxuICAgICAgICBmdWxsUGF0aCA9PT0gcGF0aHNQcmVmaXguZGF0YURpcmVjdG9yeSkge1xuICAgICAgICBzdWNjZXNzQ2FsbGJhY2soZmlsZVN5c3RlbS5yb290KTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vVG8gZGVsZXRlIGFsbCBzbGFzaGVzIGF0IHRoZSBlbmRcbiAgICB3aGlsZSAoZnVsbFBhdGhbZnVsbFBhdGgubGVuZ3RoIC0gMV0gPT09ICcvJykge1xuICAgICAgICBmdWxsUGF0aCA9IGZ1bGxQYXRoLnN1YnN0cigwLCBmdWxsUGF0aC5sZW5ndGggLSAxKTtcbiAgICB9XG5cbiAgICB2YXIgcGF0aEFyciA9IGZ1bGxQYXRoLnNwbGl0KERJUl9TRVBBUkFUT1IpO1xuICAgIHBhdGhBcnIucG9wKCk7XG4gICAgdmFyIHBhcmVudE5hbWUgPSBwYXRoQXJyLnBvcCgpO1xuICAgIHZhciBwYXRoID0gcGF0aEFyci5qb2luKERJUl9TRVBBUkFUT1IpICsgRElSX1NFUEFSQVRPUjtcblxuICAgIC8vVG8gZ2V0IHBhcmVudCBvZiByb290IGZpbGVzXG4gICAgdmFyIGpvaW5lZCA9IHBhdGggKyBwYXJlbnROYW1lICsgRElSX1NFUEFSQVRPUjsvL2lzIGxpa2UgdGhpczogZmlsZTovLy9wZXJzaXN0ZW50L1xuICAgIGlmIChqb2luZWQgPT09IHBhdGhzUHJlZml4LmNhY2hlRGlyZWN0b3J5IHx8IGpvaW5lZCA9PT0gcGF0aHNQcmVmaXguZGF0YURpcmVjdG9yeSkge1xuICAgICAgICBnZXREaXJlY3Rvcnkoc3VjY2Vzc0NhbGxiYWNrLCBlcnJvckNhbGxiYWNrLCBbam9pbmVkLCBESVJfU0VQQVJBVE9SLCB7Y3JlYXRlOiBmYWxzZX1dKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGdldERpcmVjdG9yeShzdWNjZXNzQ2FsbGJhY2ssIGVycm9yQ2FsbGJhY2ssIFtwYXRoLCBwYXJlbnROYW1lLCB7Y3JlYXRlOiBmYWxzZX1dKTtcbn1cblxuZnVuY3Rpb24gY29weVRvKHN1Y2Nlc3NDYWxsYmFjaywgZXJyb3JDYWxsYmFjaywgYXJncykge1xuICAgIHZhciBzcmNQYXRoID0gYXJnc1swXTtcbiAgICB2YXIgcGFyZW50RnVsbFBhdGggPSBhcmdzWzFdO1xuICAgIHZhciBuYW1lID0gYXJnc1syXTtcblxuICAgIGlmIChuYW1lLmluZGV4T2YoJy8nKSAhPT0gLTEgfHwgc3JjUGF0aCA9PT0gcGFyZW50RnVsbFBhdGggKyBuYW1lKSB7XG4gICAgICAgIGlmIChlcnJvckNhbGxiYWNrKSB7XG4gICAgICAgICAgICBlcnJvckNhbGxiYWNrKHdpbmRvdy5GaWxlRXJyb3IuSU5WQUxJRF9NT0RJRklDQVRJT05fRVJSKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBSZWFkIHNyYyBmaWxlXG4gICAgZ2V0RmlsZShmdW5jdGlvbihzcmNGaWxlRW50cnkpIHtcblxuICAgICAgICB2YXIgcGF0aCA9IHJlc29sdmVUb0Z1bGxQYXRoXyhwYXJlbnRGdWxsUGF0aCk7XG4gICAgICAgIC8vQ2hlY2sgZGlyZWN0b3J5XG4gICAgICAgIGdldERpcmVjdG9yeShmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgLy8gQ3JlYXRlIGRlc3QgZmlsZVxuICAgICAgICAgICAgZ2V0RmlsZShmdW5jdGlvbihkc3RGaWxlRW50cnkpIHtcblxuICAgICAgICAgICAgICAgIHdyaXRlKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzQ2FsbGJhY2soZHN0RmlsZUVudHJ5KTtcbiAgICAgICAgICAgICAgICB9LCBlcnJvckNhbGxiYWNrLCBbZHN0RmlsZUVudHJ5LmZpbGVfLnN0b3JhZ2VQYXRoLCBzcmNGaWxlRW50cnkuZmlsZV8uYmxvYl8sIDBdKTtcblxuICAgICAgICAgICAgfSwgZXJyb3JDYWxsYmFjaywgW3BhcmVudEZ1bGxQYXRoLCBuYW1lLCB7Y3JlYXRlOiB0cnVlfV0pO1xuXG4gICAgICAgIH0sIGZ1bmN0aW9uKCkgeyBpZiAoZXJyb3JDYWxsYmFjaykgeyBlcnJvckNhbGxiYWNrKHdpbmRvdy5GaWxlRXJyb3IuTk9UX0ZPVU5EX0VSUik7IH19LFxuICAgICAgICBbcGF0aC5zdG9yYWdlUGF0aCwgbnVsbCwge2NyZWF0ZTogZmFsc2V9XSk7XG5cbiAgICB9LCBlcnJvckNhbGxiYWNrLCBbc3JjUGF0aCwgbnVsbF0pO1xufVxuXG5mdW5jdGlvbiBjb3B5VG9IYW5kbGVyKHN1Y2Nlc3NDYWxsYmFjaywgZXJyb3JDYWxsYmFjaywgbW9kdWxlLCBldmVudCwgYXJncykge1xuICAgIGNvcHlUbyhzdWNjZXNzQ2FsbGJhY2ssIGVycm9yQ2FsbGJhY2ssIGFyZ3MpO1xufVxuXG5mdW5jdGlvbiBtb3ZlVG9IYW5kbGVyKHN1Y2Nlc3NDYWxsYmFjaywgZXJyb3JDYWxsYmFjaywgbW9kdWxlLCBldmVudCwgYXJncykge1xuICAgIHZhciBzcmNQYXRoID0gYXJnc1swXTtcbiAgICAvLyBwYXJlbnRGdWxsUGF0aCBhbmQgbmFtZSBwYXJhbWV0ZXJzIGlzIGlnbm9yZWQgYmVjYXVzZVxuICAgIC8vIGFyZ3MgaXMgYmVpbmcgcGFzc2VkIGRvd25zdHJlYW0gdG8gZXhwb3J0cy5jb3B5VG8gbWV0aG9kXG4gICAgdmFyIHBhcmVudEZ1bGxQYXRoID0gYXJnc1sxXTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xuICAgIHZhciBuYW1lID0gYXJnc1syXTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xuXG4gICAgY29weVRvKGZ1bmN0aW9uIChmaWxlRW50cnkpIHtcbiAgICAgICAgcmVtb3ZlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHN1Y2Nlc3NDYWxsYmFjayhmaWxlRW50cnkpO1xuICAgICAgICB9LCBlcnJvckNhbGxiYWNrLCBbc3JjUGF0aF0pO1xuICAgIH0sIGVycm9yQ2FsbGJhY2ssIGFyZ3MpO1xufVxuXG5mdW5jdGlvbiByZXNvbHZlTG9jYWxGaWxlU3lzdGVtVVJJKHN1Y2Nlc3NDYWxsYmFjaywgZXJyb3JDYWxsYmFjaywgYXJncykge1xuICAgIHZhciBwYXRoID0gYXJnc1swXTtcblxuICAgIC8vIElnbm9yZSBwYXJhbWV0ZXJzXG4gICAgaWYgKHBhdGguaW5kZXhPZignPycpICE9PSAtMSkge1xuICAgICAgICBwYXRoID0gU3RyaW5nKHBhdGgpLnNwbGl0KCc/JylbMF07XG4gICAgfVxuXG4gICAgLy8gc3VwcG9ydCBmb3IgZW5jb2RlVVJJXG4gICAgaWYgKC9cXCU1L2cudGVzdChwYXRoKSB8fCAvXFwlMjAvZy50ZXN0KHBhdGgpKSB7XG4gICAgICAgIHBhdGggPSBkZWNvZGVVUkkocGF0aCk7XG4gICAgfVxuXG4gICAgaWYgKHBhdGgudHJpbSgpWzBdID09PSAnLycpIHtcbiAgICAgICAgZXJyb3JDYWxsYmFjayAmJiBlcnJvckNhbGxiYWNrKHdpbmRvdy5GaWxlRXJyb3IuRU5DT0RJTkdfRVJSKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vc3VwcG9ydCBmb3IgY2R2ZmlsZVxuICAgIGlmIChwYXRoLnRyaW0oKS5zdWJzdHIoMCwgNykgPT09ICdjZHZmaWxlJykge1xuICAgICAgICBpZiAocGF0aC5pbmRleE9mKCdjZHZmaWxlOi8vbG9jYWxob3N0JykgPT09IC0xKSB7XG4gICAgICAgICAgICBlcnJvckNhbGxiYWNrICYmIGVycm9yQ2FsbGJhY2sod2luZG93LkZpbGVFcnJvci5FTkNPRElOR19FUlIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGluZGV4UGVyc2lzdGVudCA9IHBhdGguaW5kZXhPZigncGVyc2lzdGVudCcpO1xuICAgICAgICB2YXIgaW5kZXhUZW1wb3JhcnkgPSBwYXRoLmluZGV4T2YoJ3RlbXBvcmFyeScpO1xuXG4gICAgICAgIC8vY2R2ZmlsZTovL2xvY2FsaG9zdC9wZXJzaXN0ZW50L3BhdGgvdG8vZmlsZVxuICAgICAgICBpZiAoaW5kZXhQZXJzaXN0ZW50ICE9PSAtMSkge1xuICAgICAgICAgICAgcGF0aCA9ICAnZmlsZTovLy9wZXJzaXN0ZW50JyArIHBhdGguc3Vic3RyKGluZGV4UGVyc2lzdGVudCArIDEwKTtcbiAgICAgICAgfSBlbHNlIGlmIChpbmRleFRlbXBvcmFyeSAhPT0gLTEpIHtcbiAgICAgICAgICAgIHBhdGggPSAnZmlsZTovLy90ZW1wb3JhcnknICsgcGF0aC5zdWJzdHIoaW5kZXhUZW1wb3JhcnkgKyA5KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGVycm9yQ2FsbGJhY2sgJiYgZXJyb3JDYWxsYmFjayh3aW5kb3cuRmlsZUVycm9yLkVOQ09ESU5HX0VSUik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyB0byBhdm9pZCBwYXRoIGZvcm0gb2YgJy8vL3BhdGgvdG8vZmlsZSdcbiAgICBmdW5jdGlvbiBoYW5kbGVQYXRoU2xhc2hlcyhwYXRoKSB7XG4gICAgICAgIHZhciBjdXRJbmRleCAgPSAwO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBhdGgubGVuZ3RoIC0gMTsgaSsrKSB7XG4gICAgICAgICAgICBpZiAocGF0aFtpXSA9PT0gRElSX1NFUEFSQVRPUiAmJiBwYXRoW2kgKyAxXSA9PT0gRElSX1NFUEFSQVRPUikge1xuICAgICAgICAgICAgICAgIGN1dEluZGV4ID0gaSArIDE7XG4gICAgICAgICAgICB9IGVsc2UgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcGF0aC5zdWJzdHIoY3V0SW5kZXgpO1xuICAgIH1cblxuICAgIC8vIEhhbmRsZSBsb2NhbGhvc3QgY29udGFpbmluZyBwYXRocyAoc2VlIHNwZWNzIClcbiAgICBpZiAocGF0aC5pbmRleE9mKCdmaWxlOi8vbG9jYWxob3N0LycpID09PSAwKSB7XG4gICAgICAgIHBhdGggPSBwYXRoLnJlcGxhY2UoJ2ZpbGU6Ly9sb2NhbGhvc3QvJywgJ2ZpbGU6Ly8vJyk7XG4gICAgfVxuXG4gICAgaWYgKHBhdGguaW5kZXhPZihwYXRoc1ByZWZpeC5kYXRhRGlyZWN0b3J5KSA9PT0gMCkge1xuICAgICAgICBwYXRoID0gcGF0aC5zdWJzdHJpbmcocGF0aHNQcmVmaXguZGF0YURpcmVjdG9yeS5sZW5ndGggLSAxKTtcbiAgICAgICAgcGF0aCA9IGhhbmRsZVBhdGhTbGFzaGVzKHBhdGgpO1xuXG4gICAgICAgIHJlcXVlc3RGaWxlU3lzdGVtKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgZ2V0RmlsZShzdWNjZXNzQ2FsbGJhY2ssIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGdldERpcmVjdG9yeShzdWNjZXNzQ2FsbGJhY2ssIGVycm9yQ2FsbGJhY2ssIFtwYXRoc1ByZWZpeC5kYXRhRGlyZWN0b3J5LCBwYXRoLFxuICAgICAgICAgICAgICAgICAgICB7Y3JlYXRlOiBmYWxzZX1dKTtcbiAgICAgICAgICAgIH0sIFtwYXRoc1ByZWZpeC5kYXRhRGlyZWN0b3J5LCBwYXRoLCB7Y3JlYXRlOiBmYWxzZX1dKTtcbiAgICAgICAgfSwgZXJyb3JDYWxsYmFjaywgW3dpbmRvdy5Mb2NhbEZpbGVTeXN0ZW0uUEVSU0lTVEVOVF0pO1xuICAgIH0gZWxzZSBpZiAocGF0aC5pbmRleE9mKHBhdGhzUHJlZml4LmNhY2hlRGlyZWN0b3J5KSA9PT0gMCkge1xuICAgICAgICBwYXRoID0gcGF0aC5zdWJzdHJpbmcocGF0aHNQcmVmaXguY2FjaGVEaXJlY3RvcnkubGVuZ3RoIC0gMSk7XG4gICAgICAgIHBhdGggPSBoYW5kbGVQYXRoU2xhc2hlcyhwYXRoKTtcblxuICAgICAgICByZXF1ZXN0RmlsZVN5c3RlbShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGdldEZpbGUoc3VjY2Vzc0NhbGxiYWNrLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBnZXREaXJlY3Rvcnkoc3VjY2Vzc0NhbGxiYWNrLCBlcnJvckNhbGxiYWNrLCBbcGF0aHNQcmVmaXguY2FjaGVEaXJlY3RvcnksIHBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHtjcmVhdGU6IGZhbHNlfV0pO1xuICAgICAgICAgICAgfSwgW3BhdGhzUHJlZml4LmNhY2hlRGlyZWN0b3J5LCBwYXRoLCB7Y3JlYXRlOiBmYWxzZX1dKTtcbiAgICAgICAgfSwgZXJyb3JDYWxsYmFjaywgW3dpbmRvdy5Mb2NhbEZpbGVTeXN0ZW0uVEVNUE9SQVJZXSk7XG4gICAgfSBlbHNlIGlmIChwYXRoLmluZGV4T2YocGF0aHNQcmVmaXguYXBwbGljYXRpb25EaXJlY3RvcnkpID09PSAwKSB7XG4gICAgICAgIHBhdGggPSBwYXRoLnN1YnN0cmluZyhwYXRoc1ByZWZpeC5hcHBsaWNhdGlvbkRpcmVjdG9yeS5sZW5ndGgpO1xuICAgICAgICAvL1RPRE86IG5lZWQgdG8gY3V0IG91dCByZWR1bmRhbnQgc2xhc2hlcz9cblxuICAgICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICAgIHhoci5vcGVuKCdHRVQnLCBwYXRoLCB0cnVlKTtcbiAgICAgICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh4aHIuc3RhdHVzID09PSAyMDAgJiYgeGhyLnJlYWR5U3RhdGUgPT09IDQpIHtcbiAgICAgICAgICAgICAgICByZXF1ZXN0RmlsZVN5c3RlbShmdW5jdGlvbihmcykge1xuICAgICAgICAgICAgICAgICAgICBmcy5uYW1lID0gbG9jYXRpb24uaG9zdG5hbWU7XG5cbiAgICAgICAgICAgICAgICAgICAgLy9UT0RPOiBuZWVkIHRvIGNhbGwgZXhwb3J0cy5nZXRGaWxlKC4uLikgdG8gaGFuZGxlIGVycm9ycyBjb3JyZWN0XG4gICAgICAgICAgICAgICAgICAgIGZzLnJvb3QuZ2V0RmlsZShwYXRoLCB7Y3JlYXRlOiB0cnVlfSwgd3JpdGVGaWxlLCBlcnJvckNhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICB9LCBlcnJvckNhbGxiYWNrLCBbd2luZG93LkxvY2FsRmlsZVN5c3RlbS5QRVJTSVNURU5UXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgeGhyLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBlcnJvckNhbGxiYWNrICYmIGVycm9yQ2FsbGJhY2sod2luZG93LkZpbGVFcnJvci5OT1RfUkVBREFCTEVfRVJSKTtcbiAgICAgICAgfTtcblxuICAgICAgICB4aHIuc2VuZCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGVycm9yQ2FsbGJhY2sgJiYgZXJyb3JDYWxsYmFjayh3aW5kb3cuRmlsZUVycm9yLk5PVF9GT1VORF9FUlIpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHdyaXRlRmlsZShlbnRyeSkge1xuICAgICAgICBlbnRyeS5jcmVhdGVXcml0ZXIoZnVuY3Rpb24gKGZpbGVXcml0ZXIpIHtcbiAgICAgICAgICAgIGZpbGVXcml0ZXIub253cml0ZWVuZCA9IGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWV2dC50YXJnZXQuZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgZW50cnkuZmlsZXN5c3RlbU5hbWUgPSBsb2NhdGlvbi5ob3N0bmFtZTtcbiAgICAgICAgICAgICAgICAgICAgc3VjY2Vzc0NhbGxiYWNrKGVudHJ5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZmlsZVdyaXRlci5vbmVycm9yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGVycm9yQ2FsbGJhY2sgJiYgZXJyb3JDYWxsYmFjayh3aW5kb3cuRmlsZUVycm9yLk5PVF9SRUFEQUJMRV9FUlIpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGZpbGVXcml0ZXIud3JpdGUobmV3IEJsb2IoW3hoci5yZXNwb25zZV0pKTtcbiAgICAgICAgfSwgZXJyb3JDYWxsYmFjayk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiByZXNvbHZlTG9jYWxGaWxlU3lzdGVtVVJJSGFuZGxlcihzdWNjZXNzQ2FsbGJhY2ssIGVycm9yQ2FsbGJhY2ssIG1vZHVsZSwgZXZlbnQsIGFyZ3MpIHtcbiAgICByZXNvbHZlTG9jYWxGaWxlU3lzdGVtVVJJKHN1Y2Nlc3NDYWxsYmFjaywgZXJyb3JDYWxsYmFjaywgYXJncyk7XG59XG5cbmZ1bmN0aW9uIHJlcXVlc3RBbGxQYXRoc0hhbmRsZXIoc3VjY2Vzc0NhbGxiYWNrLCBlcnJvckNhbGxiYWNrLCBtb2R1bGUsIGV2ZW50LCBhcmdzKSB7XG4gICAgc3VjY2Vzc0NhbGxiYWNrKHBhdGhzUHJlZml4KTtcbn1cblxuLy8gVGhpcyBoYW5kbGVyIGlzIHJlcXVpcmVkIGZvciB0ZXN0cyBhbmQgYmFja3dhcmRzIGNvbXBhdGliaWxpdHlcbmZ1bmN0aW9uIF9nZXRMb2NhbEZpbGVzeXN0ZW1QYXRoSGFuZGxlcihzdWNjZXNzQ2FsbGJhY2ssIGVycm9yQ2FsbGJhY2ssIG1vZHVsZSwgZXZlbnQsIGFyZ3MpIHtcbiAgICB2YXIgdXJsID0gYXJnc1swXTtcbiAgICB2YXIgc3RyaW5nVG9DdXQgPSAnZmlsZTovLyc7XG4gICAgdmFyIGZpbGVJbmRleCA9IHVybC5pbmRleE9mKHN0cmluZ1RvQ3V0KTtcbiAgICBpZiAoZmlsZUluZGV4ICE9PSAtMSkge1xuICAgICAgICB1cmwgPSB1cmwuc3Vic3RyKHN0cmluZ1RvQ3V0Lmxlbmd0aCwgdXJsLmxlbmd0aCAtIHN0cmluZ1RvQ3V0Lmxlbmd0aCk7XG4gICAgfVxuICAgIHN1Y2Nlc3NDYWxsYmFjayh1cmwpO1xufVxuXG5mdW5jdGlvbiBub3RpZnlOb3RTdXBwb3J0ZWQoc3VjY2VzcywgZmFpbCwgYXJncykge1xuICAgIGZhaWwoJ1RoaXMgbWV0aG9kIGlzIG5vdCBzdXBwb3J0ZWQgeWV0Jyk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICAgICdGaWxlJzoge1xuICAgICAgICAncmVxdWVzdEFsbFBhdGhzJzogcmVxdWVzdEFsbFBhdGhzSGFuZGxlcixcbiAgICAgICAgJ2dldERpcmVjdG9yeSc6IGdldERpcmVjdG9yeUhhbmRsZXIsXG4gICAgICAgICdyZW1vdmVSZWN1cnNpdmVseSc6IHJlbW92ZVJlY3Vyc2l2ZWx5LFxuICAgICAgICAnZ2V0RmlsZSc6IGdldEZpbGVIYW5kbGVyLFxuICAgICAgICAncmVhZEVudHJpZXMnOiByZWFkRW50cmllc0hhbmRsZXIsXG4gICAgICAgICdnZXRGaWxlTWV0YWRhdGEnOiBnZXRGaWxlTWV0YWRhdGEsXG4gICAgICAgICdzZXRNZXRhZGF0YSc6IHNldE1ldGFkYXRhLFxuICAgICAgICAnbW92ZVRvJzogbW92ZVRvSGFuZGxlcixcbiAgICAgICAgJ2NvcHlUbyc6IGNvcHlUb0hhbmRsZXIsXG4gICAgICAgICdyZW1vdmUnOiByZW1vdmVIYW5kbGVyLFxuICAgICAgICAnZ2V0UGFyZW50JzogZ2V0UGFyZW50SGFuZGxlcixcbiAgICAgICAgJ3JlYWRBc0RhdGFVUkwnOiByZWFkQXNEYXRhVVJMSGFuZGxlcixcbiAgICAgICAgJ3JlYWRBc0JpbmFyeVN0cmluZyc6IHJlYWRBc0JpbmFyeVN0cmluZ0hhbmRsZXIsXG4gICAgICAgICdyZWFkQXNBcnJheUJ1ZmZlcic6IHJlYWRBc0FycmF5QnVmZmVySGFuZGxlcixcbiAgICAgICAgJ3JlYWRBc1RleHQnOiByZWFkQXNUZXh0SGFuZGxlcixcbiAgICAgICAgJ3dyaXRlJzogd3JpdGVIYW5kbGVyLFxuICAgICAgICAncmVxdWVzdEZpbGVTeXN0ZW0nOiByZXF1ZXN0RmlsZVN5c3RlbUhhbmRsZXIsXG4gICAgICAgICdyZXNvbHZlTG9jYWxGaWxlU3lzdGVtVVJJJzogcmVzb2x2ZUxvY2FsRmlsZVN5c3RlbVVSSUhhbmRsZXIsXG4gICAgICAgIC8vIGV4ZWMncyBiZWxvdyBhcmUgbm90IGltcGxlbWVudGVkIGluIGJyb3dzZXIgcGxhdGZvcm1cbiAgICAgICAgJ3RydW5jYXRlJzogbm90aWZ5Tm90U3VwcG9ydGVkLFxuICAgICAgICAncmVxdWVzdEFsbEZpbGVTeXN0ZW1zJzogbm90aWZ5Tm90U3VwcG9ydGVkLFxuICAgICAgICAvLyBtZXRob2QgYmVsb3cgaXMgdXNlZCBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eSB3LyBvbGQgRmlsZSBwbHVnaW4gaW1wbGVtZW50YXRpb25cbiAgICAgICAgJ19nZXRMb2NhbEZpbGVzeXN0ZW1QYXRoJzogX2dldExvY2FsRmlsZXN5c3RlbVBhdGhIYW5kbGVyXG4gICAgfVxufTtcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXG52YXIgZmlsZVBsdWdpbklzUmVhZHlFdmVudCA9IG5ldyBFdmVudCgnZmlsZVBsdWdpbklzUmVhZHknKTtcbnZhciBQRVJTSVNURU5UX0ZTX1FVT1RBID0gNSAqIDEwMjQgKiAxMDI0O1xuXG52YXIgZW50cnlGdW5jdGlvbnNDcmVhdGVkID0gZmFsc2U7XG52YXIgcXVvdGFXYXNSZXF1ZXN0ZWQgPSBmYWxzZTtcbnZhciBldmVudFdhc1Rocm93biA9IGZhbHNlO1xuXG53aW5kb3cuaW5pdFBlcnNpc3RlbnRGaWxlU3lzdGVtID0gZnVuY3Rpb24oc2l6ZSwgd2luLCBmYWlsKSB7XG4gICAgaWYgKG5hdmlnYXRvci53ZWJraXRQZXJzaXN0ZW50U3RvcmFnZSkge1xuICAgICAgICBuYXZpZ2F0b3Iud2Via2l0UGVyc2lzdGVudFN0b3JhZ2UucmVxdWVzdFF1b3RhKHNpemUsIHdpbiwgZmFpbCk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBmYWlsKCdUaGlzIGJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCB0aGlzIGZ1bmN0aW9uJyk7XG59O1xuXG53aW5kb3cuaXNGaWxlUGx1Z2luUmVhZHlSYWlzZWQgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBldmVudFdhc1Rocm93bjsgfTtcblxud2luZG93LmluaXRQZXJzaXN0ZW50RmlsZVN5c3RlbShQRVJTSVNURU5UX0ZTX1FVT1RBLCBmdW5jdGlvbigpIHtcbiAgICBjb25zb2xlLmxvZygnUGVyc2lzdGVudCBmcyBxdW90YSBncmFudGVkJyk7XG4gICAgcXVvdGFXYXNSZXF1ZXN0ZWQgPSB0cnVlO1xufSwgZnVuY3Rpb24oZSl7XG4gICAgY29uc29sZS5sb2coJ0Vycm9yIG9jY3VyZWQgd2hpbGUgdHJ5aW5nIHRvIHJlcXVlc3QgUGVyc2lzdGVudCBmcyBxdW90YTogJyArIEpTT04uc3RyaW5naWZ5KGUpKTtcbn0pO1xuXG5mdW5jdGlvbiBkaXNwYXRjaEV2ZW50SWZSZWFkeSgpIHtcbiAgICBpZiAoZW50cnlGdW5jdGlvbnNDcmVhdGVkICYmIHF1b3RhV2FzUmVxdWVzdGVkKSB7XG4gICAgICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KGZpbGVQbHVnaW5Jc1JlYWR5RXZlbnQpO1xuICAgICAgICBldmVudFdhc1Rocm93biA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgc2V0VGltZW91dChkaXNwYXRjaEV2ZW50SWZSZWFkeSwgMTAwKTtcbiAgICB9XG59XG5cbi8vIFdlIGNyZWF0ZSBhbmQgZmlyZSBldmVudCAnZmlsZVBsdWdpbklzUmVhZHknIHdoZW4gZmlsZSBzeXN0ZW0gcGVyc2lzdGVudCBmaWxlIHF1b3RhXG4vLyBpcyBncmFudGVkIGFuZCBlbnRyeSBmdW5jdGlvbnMgYXJlIG92ZXJyaWRlbiwgc28gd2UgY2FuIGFscmVhZHkgd29yayB3aXRoIGZpbGUgc3lzdGVtIHByb3Blcmx5LlxuZGlzcGF0Y2hFdmVudElmUmVhZHkoKTtcblxuLy8gV2UgbXVzdCBvdmVycmlkZSBzb21lIGZ1bmN0aW9uYWxpdHkgc28gdGhhdCBwbHVnaW4gY2FuIHdvcmsgcHJvcGVybHksXG4vLyBmb3IgZXhhbXBsZSwgaWYgd2Ugb3ZlcnJpZGUgd2luZG93LnJlcXVlc3RGaWxlU3lzdGVtIG9yIHdpbmRvdy5yZXNvbHZlTG9jYWxGaWxlU3lzdGVtVVJMLFxuLy8gdGhleSBtaWdodCBiZSBvdmVycmlkZWQgbGF0ZXIsIGFuZCBpZiB3ZSB3aWxsIHdhaXQgZm9yIGRldmljZXJlYWR5IGV2ZW50LCB3ZSBhc3N1bWUgdGhhdFxuLy8gdGhlc2UgZnVuY3Rpb25zIHdpbGwgbm90IGJlIG92ZXJyaWRlZCBsYXRlci5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2RldmljZXJlYWR5JywgZnVuY3Rpb24gKCkge1xuICAgIHdpbmRvdy5yZXF1ZXN0RmlsZVN5c3RlbSA9IHdpbmRvdy53ZWJraXRSZXF1ZXN0RmlsZVN5c3RlbTtcblxuICAgIGlmICghd2luZG93LnJlcXVlc3RGaWxlU3lzdGVtKSB7XG4gICAgICAgIHdpbmRvdy5yZXF1ZXN0RmlsZVN5c3RlbSA9IGZ1bmN0aW9uKHR5cGUsIHNpemUsIHdpbiwgZmFpbCkge1xuICAgICAgICAgICAgaWYgKGZhaWwpIHtcbiAgICAgICAgICAgICAgICBmYWlsKCdOb3Qgc3VwcG9ydGVkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgICAgd2luZG93LnJlcXVlc3RGaWxlU3lzdGVtKHdpbmRvdy5URU1QT1JBUlksIDEsIGNyZWF0ZUZpbGVFbnRyeUZ1bmN0aW9ucywgZnVuY3Rpb24oKSB7fSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlRmlsZUVudHJ5RnVuY3Rpb25zKGZzKSB7XG4gICAgICAgIGZzLnJvb3QuZ2V0RmlsZSgndG9kZWxldGVfNjU4Njc0XzgzM180X2NkdicsIHtjcmVhdGU6IHRydWV9LCBmdW5jdGlvbihmaWxlRW50cnkpIHtcbiAgICAgICAgICAgIHZhciBmaWxlRW50cnlUeXBlID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKGZpbGVFbnRyeSk7XG4gICAgICAgICAgICB2YXIgZW50cnlUeXBlID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKGZpbGVFbnRyeVR5cGUpO1xuXG4gICAgICAgICAgICAvLyBTYXZlIHRoZSBvcmlnaW5hbCBtZXRob2RcbiAgICAgICAgICAgIHZhciBvcmlnVG9VUkwgPSBlbnRyeVR5cGUudG9VUkw7XG4gICAgICAgICAgICBlbnRyeVR5cGUudG9VUkwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIG9yaWdVUkwgPSBvcmlnVG9VUkwuY2FsbCh0aGlzKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0RpcmVjdG9yeSAmJiBvcmlnVVJMLnN1YnN0cigtMSkgIT09ICcvJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb3JpZ1VSTCArICcvJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG9yaWdVUkw7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBlbnRyeVR5cGUudG9OYXRpdmVVUkwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdERVBSRUNBVEVEOiBVcGRhdGUgeW91ciBjb2RlIHRvIHVzZSBcXCd0b1VSTFxcJycpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnRvVVJMKCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBlbnRyeVR5cGUudG9JbnRlcm5hbFVSTCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnRvVVJMKCkuaW5kZXhPZigncGVyc2lzdGVudCcpID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdjZHZmaWxlOi8vbG9jYWxob3N0L3BlcnNpc3RlbnQnICsgdGhpcy5mdWxsUGF0aDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAodGhpcy50b1VSTCgpLmluZGV4T2YoJ3RlbXBvcmFyeScpID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdjZHZmaWxlOi8vbG9jYWxob3N0L3RlbXBvcmFyeScgKyB0aGlzLmZ1bGxQYXRoO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGVudHJ5VHlwZS5zZXRNZXRhZGF0YSA9IGZ1bmN0aW9uKHdpbiwgZmFpbCAvKiwgbWV0YWRhdGEqLykge1xuICAgICAgICAgICAgICAgIGZhaWwgJiYgZmFpbCgnTm90IHN1cHBvcnRlZCcpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgZmlsZUVudHJ5LmNyZWF0ZVdyaXRlcihmdW5jdGlvbih3cml0ZXIpIHtcbiAgICAgICAgICAgICAgICB2YXIgb3JpZ2luYWxXcml0ZSA9IHdyaXRlci53cml0ZTtcbiAgICAgICAgICAgICAgICB2YXIgd3JpdGVyUHJvdG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Yod3JpdGVyKTtcbiAgICAgICAgICAgICAgICB3cml0ZXJQcm90by53cml0ZSA9IGZ1bmN0aW9uKGJsb2IpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYoYmxvYiBpbnN0YW5jZW9mIEJsb2IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbmFsV3JpdGUuYXBwbHkodGhpcywgW2Jsb2JdKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZWFsQmxvYiA9IG5ldyBCbG9iKFtibG9iXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbFdyaXRlLmFwcGx5KHRoaXMsIFtyZWFsQmxvYl0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIGZpbGVFbnRyeS5yZW1vdmUoZnVuY3Rpb24oKXsgZW50cnlGdW5jdGlvbnNDcmVhdGVkID0gdHJ1ZTsgfSwgZnVuY3Rpb24oKXsgLyogZW1wdHkgY2FsbGJhY2sgKi8gfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKCF3aW5kb3cucmVzb2x2ZUxvY2FsRmlsZVN5c3RlbVVSTCkge1xuICAgICAgICB3aW5kb3cucmVzb2x2ZUxvY2FsRmlsZVN5c3RlbVVSTCA9IGZ1bmN0aW9uKHVybCwgd2luLCBmYWlsKSB7XG4gICAgICAgICAgICBpZihmYWlsKSB7XG4gICAgICAgICAgICAgICAgZmFpbCgnTm90IHN1cHBvcnRlZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8vIFJlc29sdmVzIGEgZmlsZXN5c3RlbSBlbnRyeSBieSBpdHMgcGF0aCAtIHdoaWNoIGlzIHBhc3NlZCBlaXRoZXIgaW4gc3RhbmRhcmQgKGZpbGVzeXN0ZW06ZmlsZTovLykgb3JcbiAgICAvLyBDb3Jkb3ZhLXNwZWNpZmljIChjZHZmaWxlOi8vKSB1bml2ZXJzYWwgd2F5LlxuICAgIC8vIEFsaWducyB3aXRoIHNwZWNpZmljYXRpb246IGh0dHA6Ly93d3cudzMub3JnL1RSLzIwMTEvV0QtZmlsZS1zeXN0ZW0tYXBpLTIwMTEwNDE5LyN3aWRsLUxvY2FsRmlsZVN5c3RlbS1yZXNvbHZlTG9jYWxGaWxlU3lzdGVtVVJMXG4gICAgdmFyIG5hdGl2ZVJlc29sdmVMb2NhbEZpbGVTeXN0ZW1VUkwgPSB3aW5kb3cud2Via2l0UmVzb2x2ZUxvY2FsRmlsZVN5c3RlbVVSTCB8fCB3aW5kb3cucmVzb2x2ZUxvY2FsRmlsZVN5c3RlbVVSTDtcbiAgICB3aW5kb3cucmVzb2x2ZUxvY2FsRmlsZVN5c3RlbVVSTCA9IGZ1bmN0aW9uKHVybCwgd2luLCBmYWlsKSB7XG4gICAgICAgIC8qIElmIHVybCBzdGFydHMgd2l0aCBgY2R2ZmlsZWAgdGhlbiB3ZSBuZWVkIGNvbnZlcnQgaXQgdG8gQ2hyb21lIHJlYWwgdXJsIGZpcnN0OlxuICAgICAgICAgIGNkdmZpbGU6Ly9sb2NhbGhvc3QvcGVyc2lzdGVudC9wYXRoL3RvL2ZpbGUgLT4gZmlsZXN5c3RlbTpmaWxlOi8vcGVyc2lzdGVudC9wYXRoL3RvL2ZpbGUgKi9cbiAgICAgICAgaWYgKHVybC50cmltKCkuc3Vic3RyKDAsIDcpID09PSAnY2R2ZmlsZScpIHtcbiAgICAgICAgICAgIC8qIFF1aXJrOlxuICAgICAgICAgICAgUGx1Z2luIHN1cHBvcnRzIGNkdmZpbGU6Ly9sb2NhbGhvc3QgKGxvY2FsIHJlc291cmNlcykgb25seS5cbiAgICAgICAgICAgIEkuZS4gZXh0ZXJuYWwgcmVzb3VyY2VzIGFyZSBub3Qgc3VwcG9ydGVkIHZpYSBjZHZmaWxlLiAqL1xuICAgICAgICAgICAgaWYgKHVybC5pbmRleE9mKCdjZHZmaWxlOi8vbG9jYWxob3N0JykgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgLy8gQnJvd3NlciBzdXBwb3J0cyB0ZW1wb3JhcnkgYW5kIHBlcnNpc3RlbnQgb25seVxuICAgICAgICAgICAgICAgIHZhciBpbmRleFBlcnNpc3RlbnQgPSB1cmwuaW5kZXhPZigncGVyc2lzdGVudCcpO1xuICAgICAgICAgICAgICAgIHZhciBpbmRleFRlbXBvcmFyeSA9IHVybC5pbmRleE9mKCd0ZW1wb3JhcnknKTtcblxuICAgICAgICAgICAgICAgIC8qIENocm9tZSB1cmxzIHN0YXJ0IHdpdGggJ2ZpbGVzeXN0ZW06JyBwcmVmaXguIFNlZSBxdWlyazpcbiAgICAgICAgICAgICAgICAgICB0b1VSTCBmdW5jdGlvbiBpbiBDaHJvbWUgcmV0dXJucyBmaWxlc3lzdGVtOi1wcmVmaXhlZCBwYXRoIGRlcGVuZGluZyBvbiBhcHBsaWNhdGlvbiBob3N0LlxuICAgICAgICAgICAgICAgICAgIEZvciBleGFtcGxlLCBmaWxlc3lzdGVtOmZpbGU6Ly8vcGVyc2lzdGVudC9zb21lZmlsZS50eHQsXG4gICAgICAgICAgICAgICAgICAgZmlsZXN5c3RlbTpodHRwOi8vbG9jYWxob3N0OjgwODAvcGVyc2lzdGVudC9zb21lZmlsZS50eHQuICovXG4gICAgICAgICAgICAgICAgdmFyIHByZWZpeCA9ICdmaWxlc3lzdGVtOmZpbGU6Ly8vJztcbiAgICAgICAgICAgICAgICBpZiAobG9jYXRpb24ucHJvdG9jb2wgIT09ICdmaWxlOicpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJlZml4ID0gJ2ZpbGVzeXN0ZW06JyArIGxvY2F0aW9uLm9yaWdpbiArICcvJztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0O1xuICAgICAgICAgICAgICAgIGlmIChpbmRleFBlcnNpc3RlbnQgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGNkdmZpbGU6Ly9sb2NhbGhvc3QvcGVyc2lzdGVudC9wYXRoL3RvL2ZpbGUgLT4gZmlsZXN5c3RlbTpmaWxlOi8vcGVyc2lzdGVudC9wYXRoL3RvL2ZpbGVcbiAgICAgICAgICAgICAgICAgICAgLy8gb3IgZmlsZXN5c3RlbTpodHRwOi8vbG9jYWxob3N0OjgwODAvcGVyc2lzdGVudC9wYXRoL3RvL2ZpbGVcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gIHByZWZpeCArICdwZXJzaXN0ZW50JyArIHVybC5zdWJzdHIoaW5kZXhQZXJzaXN0ZW50ICsgMTApO1xuICAgICAgICAgICAgICAgICAgICBuYXRpdmVSZXNvbHZlTG9jYWxGaWxlU3lzdGVtVVJMKHJlc3VsdCwgd2luLCBmYWlsKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChpbmRleFRlbXBvcmFyeSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gY2R2ZmlsZTovL2xvY2FsaG9zdC90ZW1wb3JhcnkvcGF0aC90by9maWxlIC0+IGZpbGVzeXN0ZW06ZmlsZTovL3RlbXBvcmFyeS9wYXRoL3RvL2ZpbGVcbiAgICAgICAgICAgICAgICAgICAgLy8gb3IgZmlsZXN5c3RlbTpodHRwOi8vbG9jYWxob3N0OjgwODAvdGVtcG9yYXJ5L3BhdGgvdG8vZmlsZVxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBwcmVmaXggKyAndGVtcG9yYXJ5JyArIHVybC5zdWJzdHIoaW5kZXhUZW1wb3JhcnkgKyA5KTtcbiAgICAgICAgICAgICAgICAgICAgbmF0aXZlUmVzb2x2ZUxvY2FsRmlsZVN5c3RlbVVSTChyZXN1bHQsIHdpbiwgZmFpbCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGNkdmZpbGUgb3RoZXIgdGhhbiBsb2NhbCBmaWxlIHJlc291cmNlIGlzIG5vdCBzdXBwb3J0ZWRcbiAgICAgICAgICAgIGZhaWwgJiYgZmFpbChmdW5jdGlvbiAoKSB7dGhyb3cgbmV3IHdpbmRvdy5GaWxlRXJyb3Iod2luZG93LkZpbGVFcnJvci5FTkNPRElOR19FUlIpO30pO1xuICAgICAgICB9IGVsc2UgaWYgKHVybC50cmltKCkuaW5kZXhPZignZmlsZTovLycpID09PSAwKSB7XG4gICAgICAgICAgICAvLyBBRERFRFxuICAgICAgICAgICAgdXJsID0gJ2ZpbGVzeXN0ZW06aHR0cDovLycgKyB1cmwucmVwbGFjZSgnZmlsZTovLycsICcnKTtcbiAgICAgICAgICAgIG5hdGl2ZVJlc29sdmVMb2NhbEZpbGVTeXN0ZW1VUkwodXJsLCB3aW4sIGZhaWwpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbmF0aXZlUmVzb2x2ZUxvY2FsRmlsZVN5c3RlbVVSTCh1cmwsIHdpbiwgZmFpbCk7XG4gICAgICAgIH1cbiAgICB9O1xufSwgZmFsc2UpO1xuXG4vLyBUaGlzIGhhbmRsZXIgaXMgcmVxdWlyZWQgZm9yIHRlc3RzIGFuZCBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eVxuZnVuY3Rpb24gX2dldExvY2FsRmlsZXN5c3RlbVBhdGhIYW5kbGVyKHN1Y2Nlc3NDYWxsYmFjaywgZXJyb3JDYWxsYmFjaywgbW9kdWxlLCBldmVudCwgYXJncykge1xuICAgIHZhciB1cmwgPSBhcmdzWzBdO1xuICAgIHZhciBsb2NhbGhvc3RJbmRleCA9IHVybC5pbmRleE9mKCdsb2NhbGhvc3QnKTtcbiAgICBpZiAobG9jYWxob3N0SW5kZXggIT09IC0xKSB7XG4gICAgICAgIHVybCA9IHVybC5zdWJzdHIobG9jYWxob3N0SW5kZXgsIHVybC5sZW5ndGggLSBsb2NhbGhvc3RJbmRleCk7XG4gICAgfVxuICAgIHN1Y2Nlc3NDYWxsYmFjayh1cmwpO1xufVxuXG5mdW5jdGlvbiByZXF1ZXN0QWxsUGF0aHNIYW5kbGVyKHN1Y2Nlc3NDYWxsYmFjaywgZXJyb3JDYWxsYmFjaywgbW9kdWxlLCBldmVudCwgYXJncykge1xuICAgIHZhciBwYXRoc1ByZWZpeCA9IHtcbiAgICAgICAgLy8gUmVhZC1vbmx5IGRpcmVjdG9yeSB3aGVyZSB0aGUgYXBwbGljYXRpb24gaXMgaW5zdGFsbGVkLlxuICAgICAgICBhcHBsaWNhdGlvbkRpcmVjdG9yeTogbG9jYXRpb24ub3JpZ2luICsgJy8nLFxuICAgICAgICAvLyBXaGVyZSB0byBwdXQgYXBwLXNwZWNpZmljIGRhdGEgZmlsZXMuXG4gICAgICAgIGRhdGFEaXJlY3Rvcnk6ICdmaWxlc3lzdGVtOmZpbGU6Ly8vcGVyc2lzdGVudC8nLFxuICAgICAgICAvLyBDYWNoZWQgZmlsZXMgdGhhdCBzaG91bGQgc3Vydml2ZSBhcHAgcmVzdGFydHMuXG4gICAgICAgIC8vIEFwcHMgc2hvdWxkIG5vdCByZWx5IG9uIHRoZSBPUyB0byBkZWxldGUgZmlsZXMgaW4gaGVyZS5cbiAgICAgICAgY2FjaGVEaXJlY3Rvcnk6ICdmaWxlc3lzdGVtOmZpbGU6Ly8vdGVtcG9yYXJ5LydcbiAgICB9O1xuXG4gICAgc3VjY2Vzc0NhbGxiYWNrKHBhdGhzUHJlZml4KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgJ0ZpbGUnOiB7XG4gICAgICAgICdfZ2V0TG9jYWxGaWxlc3lzdGVtUGF0aCc6IF9nZXRMb2NhbEZpbGVzeXN0ZW1QYXRoSGFuZGxlcixcbiAgICAgICAgJ3JlcXVlc3RBbGxQYXRocyc6IHJlcXVlc3RBbGxQYXRoc0hhbmRsZXJcbiAgICB9XG59O1xuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cbnZhciBpbmRleGVkREIgPSB7XG4gICAgZGI6IG51bGxcbn07XG5cbnZhciBGSUxFX1NUT1JFXyA9ICdlbnRyaWVzJyxcbiAgICBESVJfU0VQQVJBVE9SID0gJy8nLFxuICAgIHVuaWNvZGVMYXN0Q2hhciA9IDY1NTM1O1xuXG5pbmRleGVkREIub3BlbiA9IGZ1bmN0aW9uKGRiTmFtZSwgc3VjY2Vzc0NhbGxiYWNrLCBlcnJvckNhbGxiYWNrKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgLy8gVE9ETzogRkYgMTIuMGExIGlzbid0IGxpa2luZyBhIGRiIG5hbWUgd2l0aCA6IGluIGl0LlxuICAgIHZhciByZXF1ZXN0ID0gd2luZG93LmluZGV4ZWREQi5vcGVuKGRiTmFtZS5yZXBsYWNlKCc6JywgJ18nKS8qLCAxIC8qdmVyc2lvbiovKTtcblxuICAgIHJlcXVlc3Qub25lcnJvciA9IGVycm9yQ2FsbGJhY2sgfHwgb25FcnJvcjtcblxuICAgIHJlcXVlc3Qub251cGdyYWRlbmVlZGVkID0gZnVuY3Rpb24oZSkge1xuICAgICAgICAvLyBGaXJzdCBvcGVuIHdhcyBjYWxsZWQgb3IgaGlnaGVyIGRiIHZlcnNpb24gd2FzIHVzZWQuXG5cbiAgICAgICAgLy8gY29uc29sZS5sb2coJ29udXBncmFkZW5lZWRlZDogb2xkVmVyc2lvbjonICsgZS5vbGRWZXJzaW9uLFxuICAgICAgICAvLyAgICAgICAgICAgJ25ld1ZlcnNpb246JyArIGUubmV3VmVyc2lvbik7XG5cbiAgICAgICAgc2VsZi5kYiA9IGUudGFyZ2V0LnJlc3VsdDtcbiAgICAgICAgc2VsZi5kYi5vbmVycm9yID0gb25FcnJvcjtcblxuICAgICAgICBpZiAoIXNlbGYuZGIub2JqZWN0U3RvcmVOYW1lcy5jb250YWlucyhGSUxFX1NUT1JFXykpIHtcbiAgICAgICAgICAgIHNlbGYuZGIuY3JlYXRlT2JqZWN0U3RvcmUoRklMRV9TVE9SRV8vKix7a2V5UGF0aDogJ2lkJywgYXV0b0luY3JlbWVudDogdHJ1ZX0qLyk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgIHNlbGYuZGIgPSBlLnRhcmdldC5yZXN1bHQ7XG4gICAgICAgIHNlbGYuZGIub25lcnJvciA9IG9uRXJyb3I7XG4gICAgICAgIHN1Y2Nlc3NDYWxsYmFjayhlKTtcbiAgICB9O1xuXG4gICAgcmVxdWVzdC5vbmJsb2NrZWQgPSBlcnJvckNhbGxiYWNrIHx8IG9uRXJyb3I7XG59O1xuXG5pbmRleGVkREIuY2xvc2UgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmRiLmNsb3NlKCk7XG4gICAgdGhpcy5kYiA9IG51bGw7XG59O1xuXG5pbmRleGVkREIuZ2V0ID0gZnVuY3Rpb24oZnVsbFBhdGgsIHN1Y2Nlc3NDYWxsYmFjaywgZXJyb3JDYWxsYmFjaykge1xuICAgIGlmICghdGhpcy5kYikge1xuICAgICAgICBlcnJvckNhbGxiYWNrICYmIGVycm9yQ2FsbGJhY2sod2luZG93LkZpbGVFcnJvci5JTlZBTElEX01PRElGSUNBVElPTl9FUlIpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIHR4ID0gdGhpcy5kYi50cmFuc2FjdGlvbihbRklMRV9TVE9SRV9dLCAncmVhZG9ubHknKTtcblxuICAgIHZhciByZXF1ZXN0ID0gdHgub2JqZWN0U3RvcmUoRklMRV9TVE9SRV8pLmdldChmdWxsUGF0aCk7XG5cbiAgICB0eC5vbmFib3J0ID0gZXJyb3JDYWxsYmFjayB8fCBvbkVycm9yO1xuICAgIHR4Lm9uY29tcGxldGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgc3VjY2Vzc0NhbGxiYWNrKHJlcXVlc3QucmVzdWx0KTtcbiAgICB9O1xufTtcblxuaW5kZXhlZERCLmdldEFsbEVudHJpZXMgPSBmdW5jdGlvbihmdWxsUGF0aCwgc3RvcmFnZVBhdGgsIHN1Y2Nlc3NDYWxsYmFjaywgZXJyb3JDYWxsYmFjaykge1xuICAgIGlmICghdGhpcy5kYikge1xuICAgICAgICBlcnJvckNhbGxiYWNrICYmIGVycm9yQ2FsbGJhY2sod2luZG93LkZpbGVFcnJvci5JTlZBTElEX01PRElGSUNBVElPTl9FUlIpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIHJlc3VsdHMgPSBbXTtcblxuICAgIGlmIChzdG9yYWdlUGF0aFtzdG9yYWdlUGF0aC5sZW5ndGggLSAxXSA9PT0gRElSX1NFUEFSQVRPUikge1xuICAgICAgICBzdG9yYWdlUGF0aCA9IHN0b3JhZ2VQYXRoLnN1YnN0cmluZygwLCBzdG9yYWdlUGF0aC5sZW5ndGggLSAxKTtcbiAgICB9XG5cbiAgICB2YXIgcmFuZ2UgPSB3aW5kb3cuSURCS2V5UmFuZ2UuYm91bmQoc3RvcmFnZVBhdGggKyBESVJfU0VQQVJBVE9SICsgJyAnLFxuICAgICAgICBzdG9yYWdlUGF0aCArIERJUl9TRVBBUkFUT1IgKyBTdHJpbmcuZnJvbUNoYXJDb2RlKHVuaWNvZGVMYXN0Q2hhcikpO1xuXG4gICAgdmFyIHR4ID0gdGhpcy5kYi50cmFuc2FjdGlvbihbRklMRV9TVE9SRV9dLCAncmVhZG9ubHknKTtcbiAgICB0eC5vbmFib3J0ID0gZXJyb3JDYWxsYmFjayB8fCBvbkVycm9yO1xuICAgIHR4Lm9uY29tcGxldGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmVzdWx0cyA9IHJlc3VsdHMuZmlsdGVyKGZ1bmN0aW9uKHZhbCkge1xuICAgICAgICAgICAgdmFyIHBhdGhXaXRob3V0U2xhc2ggPSB2YWwuZnVsbFBhdGg7XG5cbiAgICAgICAgICAgIGlmICh2YWwuZnVsbFBhdGhbdmFsLmZ1bGxQYXRoLmxlbmd0aCAtIDFdID09PSBESVJfU0VQQVJBVE9SKSB7XG4gICAgICAgICAgICAgICAgcGF0aFdpdGhvdXRTbGFzaCA9IHBhdGhXaXRob3V0U2xhc2guc3Vic3RyKDAsIHBhdGhXaXRob3V0U2xhc2gubGVuZ3RoIC0gMSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciB2YWxQYXJ0c0xlbiA9IHBhdGhXaXRob3V0U2xhc2guc3BsaXQoRElSX1NFUEFSQVRPUikubGVuZ3RoO1xuICAgICAgICAgICAgdmFyIGZ1bGxQYXRoUGFydHNMZW4gPSBmdWxsUGF0aC5zcGxpdChESVJfU0VQQVJBVE9SKS5sZW5ndGg7XG5cbiAgICAgICAgICAgIC8qIElucHV0IGZ1bGxQYXRoIHBhcmFtZXRlciAgZXF1YWxzICcvLycgZm9yIHJvb3QgZm9sZGVyICovXG4gICAgICAgICAgICAvKiBFbnRyaWVzIGluIHJvb3QgZm9sZGVyIGhhcyB2YWxQYXJ0c0xlbiBlcXVhbHMgMiAoc2VlIGJlbG93KSAqL1xuICAgICAgICAgICAgaWYgKGZ1bGxQYXRoW2Z1bGxQYXRoLmxlbmd0aCAtIDFdID09PSBESVJfU0VQQVJBVE9SICYmIGZ1bGxQYXRoLnRyaW0oKS5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgICAgICAgICBmdWxsUGF0aFBhcnRzTGVuID0gMTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZnVsbFBhdGhbZnVsbFBhdGgubGVuZ3RoIC0gMV0gPT09IERJUl9TRVBBUkFUT1IpIHtcbiAgICAgICAgICAgICAgICBmdWxsUGF0aFBhcnRzTGVuID0gZnVsbFBhdGguc3Vic3RyKDAsIGZ1bGxQYXRoLmxlbmd0aCAtIDEpLnNwbGl0KERJUl9TRVBBUkFUT1IpLmxlbmd0aDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZnVsbFBhdGhQYXJ0c0xlbiA9IGZ1bGxQYXRoLnNwbGl0KERJUl9TRVBBUkFUT1IpLmxlbmd0aDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHZhbFBhcnRzTGVuID09PSBmdWxsUGF0aFBhcnRzTGVuICsgMSkge1xuICAgICAgICAgICAgICAgIC8vIElmIHRoaXMgYSBzdWJmb2xkZXIgYW5kIGVudHJ5IGlzIGEgZGlyZWN0IGNoaWxkLCBpbmNsdWRlIGl0IGluXG4gICAgICAgICAgICAgICAgLy8gdGhlIHJlc3VsdHMuIE90aGVyd2lzZSwgaXQncyBub3QgYW4gZW50cnkgb2YgdGhpcyBmb2xkZXIuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbDtcbiAgICAgICAgICAgIH0gZWxzZSByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHN1Y2Nlc3NDYWxsYmFjayhyZXN1bHRzKTtcbiAgICB9O1xuXG4gICAgdmFyIHJlcXVlc3QgPSB0eC5vYmplY3RTdG9yZShGSUxFX1NUT1JFXykub3BlbkN1cnNvcihyYW5nZSk7XG5cbiAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgdmFyIGN1cnNvciA9IGUudGFyZ2V0LnJlc3VsdDtcbiAgICAgICAgaWYgKGN1cnNvcikge1xuICAgICAgICAgICAgdmFyIHZhbCA9IGN1cnNvci52YWx1ZTtcblxuICAgICAgICAgICAgcmVzdWx0cy5wdXNoKHZhbC5pc0ZpbGUgPyBmaWxlRW50cnlGcm9tSWRiRW50cnkodmFsKSA6IG5ldyB3aW5kb3cuRGlyZWN0b3J5RW50cnkodmFsLm5hbWUsIHZhbC5mdWxsUGF0aCwgdmFsLmZpbGVzeXN0ZW0pKTtcbiAgICAgICAgICAgIGN1cnNvclsnY29udGludWUnXSgpO1xuICAgICAgICB9XG4gICAgfTtcbn07XG5cbmluZGV4ZWREQlsnZGVsZXRlJ10gPSBmdW5jdGlvbihmdWxsUGF0aCwgc3VjY2Vzc0NhbGxiYWNrLCBlcnJvckNhbGxiYWNrLCBpc0RpcmVjdG9yeSkge1xuICAgIGlmICghaW5kZXhlZERCLmRiKSB7XG4gICAgICAgIGVycm9yQ2FsbGJhY2sgJiYgZXJyb3JDYWxsYmFjayh3aW5kb3cuRmlsZUVycm9yLklOVkFMSURfTU9ESUZJQ0FUSU9OX0VSUik7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgdHggPSB0aGlzLmRiLnRyYW5zYWN0aW9uKFtGSUxFX1NUT1JFX10sICdyZWFkd3JpdGUnKTtcbiAgICB0eC5vbmNvbXBsZXRlID0gc3VjY2Vzc0NhbGxiYWNrO1xuICAgIHR4Lm9uYWJvcnQgPSBlcnJvckNhbGxiYWNrIHx8IG9uRXJyb3I7XG4gICAgdHgub25jb21wbGV0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoaXNEaXJlY3RvcnkpIHtcbiAgICAgICAgICAgIC8vV2UgZGVsZXRlIG5lc3RlZCBmaWxlcyBhbmQgZm9sZGVycyBhZnRlciBkZWxldGluZyBwYXJlbnQgZm9sZGVyXG4gICAgICAgICAgICAvL1dlIHVzZSByYW5nZXM6IGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9JREJLZXlSYW5nZVxuICAgICAgICAgICAgZnVsbFBhdGggPSBmdWxsUGF0aCArIERJUl9TRVBBUkFUT1I7XG5cbiAgICAgICAgICAgIC8vUmFuZ2UgY29udGFpbnMgYWxsIGVudHJpZXMgaW4gdGhlIGZvcm0gZnVsbFBhdGg8c3ltYm9sPiB3aGVyZVxuICAgICAgICAgICAgLy9zeW1ib2wgaW4gdGhlIHJhbmdlIGZyb20gJyAnIHRvIHN5bWJvbCB3aGljaCBoYXMgY29kZSBgdW5pY29kZUxhc3RDaGFyYFxuICAgICAgICAgICAgdmFyIHJhbmdlID0gd2luZG93LklEQktleVJhbmdlLmJvdW5kKGZ1bGxQYXRoICsgJyAnLCBmdWxsUGF0aCArIFN0cmluZy5mcm9tQ2hhckNvZGUodW5pY29kZUxhc3RDaGFyKSk7XG5cbiAgICAgICAgICAgIHZhciBuZXdUeCA9IHRoaXMuZGIudHJhbnNhY3Rpb24oW0ZJTEVfU1RPUkVfXSwgJ3JlYWR3cml0ZScpO1xuICAgICAgICAgICAgbmV3VHgub25jb21wbGV0ZSA9IHN1Y2Nlc3NDYWxsYmFjaztcbiAgICAgICAgICAgIG5ld1R4Lm9uYWJvcnQgPSBlcnJvckNhbGxiYWNrIHx8IG9uRXJyb3I7XG4gICAgICAgICAgICBuZXdUeC5vYmplY3RTdG9yZShGSUxFX1NUT1JFXylbJ2RlbGV0ZSddKHJhbmdlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHN1Y2Nlc3NDYWxsYmFjaygpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICB0eC5vYmplY3RTdG9yZShGSUxFX1NUT1JFXylbJ2RlbGV0ZSddKGZ1bGxQYXRoKTtcbn07XG5cbmluZGV4ZWREQi5wdXQgPSBmdW5jdGlvbihlbnRyeSwgc3RvcmFnZVBhdGgsIHN1Y2Nlc3NDYWxsYmFjaywgZXJyb3JDYWxsYmFjaykge1xuICAgIGlmICghdGhpcy5kYikge1xuICAgICAgICBlcnJvckNhbGxiYWNrICYmIGVycm9yQ2FsbGJhY2sod2luZG93LkZpbGVFcnJvci5JTlZBTElEX01PRElGSUNBVElPTl9FUlIpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIHR4ID0gdGhpcy5kYi50cmFuc2FjdGlvbihbRklMRV9TVE9SRV9dLCAncmVhZHdyaXRlJyk7XG4gICAgdHgub25hYm9ydCA9IG9uRXJyb3I7XG4gICAgdHgub25jb21wbGV0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBUT0RPOiBFcnJvciBpcyB0aHJvd24gaWYgd2UgcGFzcyB0aGUgcmVxdWVzdCBldmVudCBiYWNrIGluc3RlYWQuXG4gICAgICAgIHN1Y2Nlc3NDYWxsYmFjayhlbnRyeSk7XG4gICAgfTtcblxuICAgIHR4Lm9iamVjdFN0b3JlKEZJTEVfU1RPUkVfKS5wdXQoZW50cnksIHN0b3JhZ2VQYXRoKTtcbn07XG5cbmZ1bmN0aW9uIG9uRXJyb3IoZSkge1xuICAgIHN3aXRjaCAoZS50YXJnZXQuZXJyb3JDb2RlKSB7XG4gICAgICAgIGNhc2UgMTI6XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnRXJyb3IgLSBBdHRlbXB0IHRvIG9wZW4gZGIgd2l0aCBhIGxvd2VyIHZlcnNpb24gdGhhbiB0aGUgJyArXG4gICAgICAgICAgICAgICAgJ2N1cnJlbnQgb25lLicpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnZXJyb3JDb2RlOiAnICsgZS50YXJnZXQuZXJyb3JDb2RlKTtcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZyhlLCBlLmNvZGUsIGUubWVzc2FnZSk7XG59XG5cbmZ1bmN0aW9uIGZpbGVFbnRyeUZyb21JZGJFbnRyeShmaWxlRW50cnkpIHtcbiAgICAvLyBJREIgd29uJ3Qgc2F2ZSBtZXRob2RzLCBzbyB3ZSBuZWVkIHJlLWNyZWF0ZSB0aGUgRmlsZUVudHJ5LlxuICAgIHZhciBjbG9uZWRGaWxlRW50cnkgPSBuZXcgd2luZG93LkZpbGVFbnRyeShmaWxlRW50cnkubmFtZSwgZmlsZUVudHJ5LmZ1bGxQYXRoLCBmaWxlRW50cnkuZmlsZXN5c3RlbSk7XG4gICAgY2xvbmVkRmlsZUVudHJ5LmZpbGVfID0gZmlsZUVudHJ5LmZpbGVfO1xuXG4gICAgcmV0dXJuIGNsb25lZEZpbGVFbnRyeTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpbmRleGVkREI7XG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIEJhc2VkIG9uIEFwYWNoZSBDb3Jkb3ZhIGdlb2xvY2F0aW9uIHBsdWdpbidzIENvb3JkaW5hdGVzIGltcGxlbWVudGF0aW9uLlxuLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9hcGFjaGUvY29yZG92YS1wbHVnaW4tZ2VvbG9jYXRpb24vYmxvYi9tYXN0ZXIvd3d3L0Nvb3JkaW5hdGVzLmpzXG5cbi8qKlxuICogVGhpcyBjbGFzcyBjb250YWlucyBwb3NpdGlvbiBpbmZvcm1hdGlvbi5cbiAqIEBwYXJhbSB7T2JqZWN0fSBsYXRcbiAqIEBwYXJhbSB7T2JqZWN0fSBsbmdcbiAqIEBwYXJhbSB7T2JqZWN0fSBhbHRcbiAqIEBwYXJhbSB7T2JqZWN0fSBhY2NcbiAqIEBwYXJhbSB7T2JqZWN0fSBoZWFkXG4gKiBAcGFyYW0ge09iamVjdH0gdmVsXG4gKiBAcGFyYW0ge09iamVjdH0gYWx0YWNjXG4gKiBAY29uc3RydWN0b3JcbiAqL1xudmFyIENvb3JkaW5hdGVzID0gZnVuY3Rpb24obGF0LCBsbmcsIGFsdCwgYWNjLCBoZWFkLCB2ZWwsIGFsdGFjYykge1xuICAgIC8qKlxuICAgICAqIFRoZSBsYXRpdHVkZSBvZiB0aGUgcG9zaXRpb24uXG4gICAgICovXG4gICAgdGhpcy5sYXRpdHVkZSA9IGxhdDtcbiAgICAvKipcbiAgICAgKiBUaGUgbG9uZ2l0dWRlIG9mIHRoZSBwb3NpdGlvbixcbiAgICAgKi9cbiAgICB0aGlzLmxvbmdpdHVkZSA9IGxuZztcbiAgICAvKipcbiAgICAgKiBUaGUgYWNjdXJhY3kgb2YgdGhlIHBvc2l0aW9uLlxuICAgICAqL1xuICAgIHRoaXMuYWNjdXJhY3kgPSBhY2M7XG4gICAgLyoqXG4gICAgICogVGhlIGFsdGl0dWRlIG9mIHRoZSBwb3NpdGlvbi5cbiAgICAgKi9cbiAgICB0aGlzLmFsdGl0dWRlID0gKGFsdCAhPT0gdW5kZWZpbmVkID8gYWx0IDogbnVsbCk7XG4gICAgLyoqXG4gICAgICogVGhlIGRpcmVjdGlvbiB0aGUgZGV2aWNlIGlzIG1vdmluZyBhdCB0aGUgcG9zaXRpb24uXG4gICAgICovXG4gICAgdGhpcy5oZWFkaW5nID0gKGhlYWQgIT09IHVuZGVmaW5lZCA/IGhlYWQgOiBudWxsKTtcbiAgICAvKipcbiAgICAgKiBUaGUgdmVsb2NpdHkgd2l0aCB3aGljaCB0aGUgZGV2aWNlIGlzIG1vdmluZyBhdCB0aGUgcG9zaXRpb24uXG4gICAgICovXG4gICAgdGhpcy5zcGVlZCA9ICh2ZWwgIT09IHVuZGVmaW5lZCA/IHZlbCA6IG51bGwpO1xuXG4gICAgaWYgKHRoaXMuc3BlZWQgPT09IDAgfHwgdGhpcy5zcGVlZCA9PT0gbnVsbCkge1xuICAgICAgICB0aGlzLmhlYWRpbmcgPSBOYU47XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGFsdGl0dWRlIGFjY3VyYWN5IG9mIHRoZSBwb3NpdGlvbi5cbiAgICAgKi9cbiAgICB0aGlzLmFsdGl0dWRlQWNjdXJhY3kgPSAoYWx0YWNjICE9PSB1bmRlZmluZWQpID8gYWx0YWNjIDogbnVsbDtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gQ29vcmRpbmF0ZXM7XG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIEJhc2VkIG9uIEFwYWNoZSBDb3Jkb3ZhIGdlb2xvY2F0aW9uIHBsdWdpbidzIFBvc2l0aW9uIGltcGxlbWVudGF0aW9uLlxuLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9hcGFjaGUvY29yZG92YS1wbHVnaW4tZ2VvbG9jYXRpb24vYmxvYi9tYXN0ZXIvd3d3L1Bvc2l0aW9uLmpzXG5cbnZhciBDb29yZGluYXRlcyA9IHJlcXVpcmUoJy4vQ29vcmRpbmF0ZXMnKTtcblxudmFyIFBvc2l0aW9uID0gZnVuY3Rpb24oY29vcmRzLCB0aW1lc3RhbXApIHtcbiAgICBpZiAoY29vcmRzKSB7XG4gICAgICAgIHRoaXMuY29vcmRzID0gbmV3IENvb3JkaW5hdGVzKGNvb3Jkcy5sYXRpdHVkZSwgY29vcmRzLmxvbmdpdHVkZSwgY29vcmRzLmFsdGl0dWRlLCBjb29yZHMuYWNjdXJhY3ksIGNvb3Jkcy5oZWFkaW5nLCBjb29yZHMudmVsb2NpdHksIGNvb3Jkcy5hbHRpdHVkZUFjY3VyYWN5KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmNvb3JkcyA9IG5ldyBDb29yZGluYXRlcygpO1xuICAgIH1cbiAgICB0aGlzLnRpbWVzdGFtcCA9ICh0aW1lc3RhbXAgIT09IHVuZGVmaW5lZCkgPyB0aW1lc3RhbXAgOiBuZXcgRGF0ZSgpO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBQb3NpdGlvbjtcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gQmFzZWQgb24gQXBhY2hlIENvcmRvdmEgZ2VvbG9jYXRpb24gcGx1Z2luJ3MgUG9zaXRpb25FcnJvciBpbXBsZW1lbnRhdGlvbi5cbi8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vYXBhY2hlL2NvcmRvdmEtcGx1Z2luLWdlb2xvY2F0aW9uL2Jsb2IvbWFzdGVyL3d3dy9Qb3NpdGlvbkVycm9yLmpzXG5cbi8qKlxuICogUG9zaXRpb24gZXJyb3Igb2JqZWN0XG4gKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0gY29kZVxuICogQHBhcmFtIG1lc3NhZ2VcbiAqL1xudmFyIFBvc2l0aW9uRXJyb3IgPSBmdW5jdGlvbihjb2RlLCBtZXNzYWdlKSB7XG4gICAgdGhpcy5jb2RlID0gY29kZSB8fCBudWxsO1xuICAgIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2UgfHwgJyc7XG59O1xuXG5Qb3NpdGlvbkVycm9yLnByb3RvdHlwZS5QRVJNSVNTSU9OX0RFTklFRCA9IFBvc2l0aW9uRXJyb3IuUEVSTUlTU0lPTl9ERU5JRUQgPSAxO1xuUG9zaXRpb25FcnJvci5wcm90b3R5cGUuUE9TSVRJT05fVU5BVkFJTEFCTEUgPSBQb3NpdGlvbkVycm9yLlBPU0lUSU9OX1VOQVZBSUxBQkxFID0gMjtcblBvc2l0aW9uRXJyb3IucHJvdG90eXBlLlRJTUVPVVQgPSBQb3NpdGlvbkVycm9yLlRJTUVPVVQgPSAzO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFBvc2l0aW9uRXJyb3I7XG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cblxuLy8gRXZlbnRzIHRha2VuIGZyb20gY29yZG92YS1wbHVnaW4taW5hcHBicm93c2VyIGltcGxlbWVudGF0aW9uLCBhbmQgaWZyYW1lIGFwcHJvYWNoXG4vLyBiYXNlZCBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9hcGFjaGUvY29yZG92YS1wbHVnaW4taW5hcHBicm93c2VyL2Jsb2IvbWFzdGVyL3NyYy9icm93c2VyL0luQXBwQnJvd3NlclByb3h5LmpzXG5cbi8qZ2xvYmFsIGNvcmRvdmE6IGZhbHNlICovXG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJ3V0aWxzJyk7XG5cbnZhciBfZGVmYXVsdEluQXBwQnJvd3NlclR5cGUgPSAnaWZyYW1lJztcblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsXG4gKiBAcGFyYW0ge0FycmF5fSBvcHRpb25zXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBzdWNjZXNzXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBmYWlsXG4gKiBAY29uc3RydWN0b3JcbiAqL1xuZnVuY3Rpb24gSW5BcHBCcm93c2VyKHVybCwgb3B0aW9ucywgc3VjY2VzcywgZmFpbCkge1xuICAgIHRoaXMuX3VybCA9IHRoaXMuX3ByZXBhcmVVcmwodXJsKTtcbiAgICB0aGlzLl9vcHRpb25zID0ge307XG4gICAgdGhpcy5fY2FsbGJhY2tzID0ge1xuICAgICAgICBzdWNjZXNzOiBzdWNjZXNzLFxuICAgICAgICBmYWlsOiBmYWlsXG4gICAgfTtcblxuICAgIG9wdGlvbnMgPSAob3B0aW9ucy50cmltKCkgPT09ICcnKSA/IFtdIDogb3B0aW9ucy5zcGxpdCgnOycpO1xuXG4gICAgLy8gcHJlcGFyZSBvcHRpb25zIG9iamVjdFxuICAgIG9wdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAob3B0aW9uKSB7XG4gICAgICAgIHZhciBwcm9wID0gb3B0aW9uLnNwbGl0KCc9Jyk7IC8vIFwidGhlT3B0aW9uPXZhbHVlXCJcbiAgICAgICAgdGhpcy5fb3B0aW9uc1twcm9wWzBdXSA9IHByb3BbMV07XG4gICAgfS5iaW5kKHRoaXMpKTtcblxuICAgIGlmICh0aGlzLl9vcHRpb25zLmhpZGRlbiAhPT0gJ3llcycpIHtcbiAgICAgICAgdGhpcy5zaG93KCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBlbnVtXG4gKi9cbkluQXBwQnJvd3Nlci5FdmVudHMgPSB7XG4gICAgTE9BRF9TVEFSVDogJ2xvYWRzdGFydCcsXG4gICAgTE9BRF9TVE9QOiAnbG9hZHN0b3AnLFxuICAgIExPQURfRVJST1I6ICdsb2FkZXJyb3InLFxuICAgIEVYSVQ6ICdleGl0J1xufTtcblxuSW5BcHBCcm93c2VyLnByb3RvdHlwZS5fcHJlcGFyZVVybCA9IGZ1bmN0aW9uICh1cmwpIHtcbiAgICB2YXIgcXVlcnlQYXJhbWV0ZXIgPSAnY2R2c2ltLWVuYWJsZWQ9ZmFsc2UnLFxuICAgICAgICB1cGRhdGVkVXJsID0gdXJsO1xuXG4gICAgaWYgKHV0aWxzLmlzU2FtZU9yaWdpblJlcXVlc3QodXJsKSkge1xuICAgICAgICB1cmwgPSB1dGlscy5wYXJzZVVybCh1cmwpO1xuICAgICAgICB1cGRhdGVkVXJsICs9ICh1cmwuc2VhcmNoLmxlbmd0aCA+IDApID8gJyYnIDogJz8nO1xuICAgICAgICB1cGRhdGVkVXJsICs9IHF1ZXJ5UGFyYW1ldGVyO1xuICAgIH1cblxuICAgIHJldHVybiB1cGRhdGVkVXJsO1xufTtcblxuSW5BcHBCcm93c2VyLnByb3RvdHlwZS5nZXRDdXJyZW50VXJsID0gZnVuY3Rpb24gKCkge307XG5cbi8qKlxuICogSmF2YVNjcmlwdCBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgTmF0aXZlIGNhbGwgdG8gc2hvdy4gVGhlIHNpbXVsYXRvciBicm93c2VyIHNob3VsZCBiZVxuICogZGlzcGxheWVkLlxuICogU3ViY2xhc3NlcyBtdXN0IGltcGxlbWVudCB0aGlzLlxuICovXG5JbkFwcEJyb3dzZXIucHJvdG90eXBlLnNob3cgPSBmdW5jdGlvbiAoKSB7fTtcblxuLyoqXG4gKiBIaWRlIHRoZSBzaW11bGF0b3IgYnJvd3Nlci5cbiAqIFN1YmNsYXNzZXMgbXVzdCBpbXBsZW1lbnQgdGhpcy5cbiAqL1xuSW5BcHBCcm93c2VyLnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uICgpIHt9O1xuXG5JbkFwcEJyb3dzZXIucHJvdG90eXBlLmluamVjdFNjcmlwdENvZGUgPSBmdW5jdGlvbiAoY2FsbGJhY2ssIGFyZ3MpIHtcbiAgICBjb25zb2xlLmVycm9yKCdJbkFwcEJyb3dzZXIgXCJpbmplY3RTY3JpcHRDb2RlXCIgc2ltdWxhdGlvbiBub3Qgc3VwcG9ydGVkJyk7XG59O1xuXG5JbkFwcEJyb3dzZXIucHJvdG90eXBlLmluamVjdFNjcmlwdEZpbGUgPSBmdW5jdGlvbiAoY2FsbGJhY2ssIGFyZ3MpIHtcbiAgICBjb25zb2xlLmVycm9yKCdJbkFwcEJyb3dzZXIgXCJpbmplY3RTY3JpcHRGaWxlXCIgc2ltdWxhdGlvbiBub3Qgc3VwcG9ydGVkJyk7XG59O1xuXG5JbkFwcEJyb3dzZXIucHJvdG90eXBlLmluamVjdFN0eWxlQ29kZSA9IGZ1bmN0aW9uIChjYWxsYmFjaywgYXJncykge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0luQXBwQnJvd3NlciBcImluamVjdFN0eWxlQ29kZVwiIHNpbXVsYXRpb24gbm90IHN1cHBvcnRlZCcpO1xufTtcblxuSW5BcHBCcm93c2VyLnByb3RvdHlwZS5pbmplY3RTdHlsZUZpbGUgPSBmdW5jdGlvbiAoY2FsbGJhY2ssIGFyZ3MpIHtcbiAgICBjb25zb2xlLmVycm9yKCdJbkFwcEJyb3dzZXIgXCJpbmplY3RTY3JpcHRGaWxlXCIgc2ltdWxhdGlvbiBub3Qgc3VwcG9ydGVkJyk7XG59O1xuXG4vKipcbiAqIEV4ZWN1dGUgdGhlIHN1Y2Nlc3MgY2FsbGJhY2sgc3BlY2lmaWVkIGF0IHRoZSBuYXRpdmUgXCJvcGVuXCIgY2FsbC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBldmVudE5hbWVcbiAqIEBwcml2YXRlXG4gKi9cbkluQXBwQnJvd3Nlci5wcm90b3R5cGUuX3N1Y2Nlc3MgPSBmdW5jdGlvbiAoZXZlbnROYW1lKSB7XG4gICAgdGhpcy5fY2FsbGJhY2tzLnN1Y2Nlc3Moe1xuICAgICAgICB0eXBlOiBldmVudE5hbWUsXG4gICAgICAgIHVybDogdGhpcy5nZXRDdXJyZW50VXJsKClcbiAgICB9KTtcbn07XG5cbi8qKlxuICogSW1wbGVtZW50YXRpb24gb2YgdGhlIFN5c3RlbSBicm93c2VyIHNpbXVsYXRpb24uIFRoaXMgdXNlcyBhIG5ldyBicm93c2VyIHdpbmRvd1xuICogYXMgdGhlIHN5c3RlbSBicm93c2VyLlxuICogQHBhcmFtIHtzdHJpbmd9IHVybFxuICogQHBhcmFtIHtBcnJheX0gb3B0aW9uc1xuICogQHBhcmFtIHtmdW5jdGlvbn0gc3VjY2Vzc1xuICogQHBhcmFtIHtmdW5jdGlvbn0gZmFpbFxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmZ1bmN0aW9uIFN5c3RlbUJyb3dzZXIodXJsLCBvcHRpb25zLCBzdWNjZXNzLCBmYWlsKSB7XG4gICAgSW5BcHBCcm93c2VyLmNhbGwodGhpcywgdXJsLCBvcHRpb25zLCBzdWNjZXNzLCBmYWlsKTtcblxuICAgIHRoaXMuX3dpbmRvdyA9IG51bGw7XG59XG5cblN5c3RlbUJyb3dzZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShJbkFwcEJyb3dzZXIucHJvdG90eXBlKTtcblN5c3RlbUJyb3dzZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gU3lzdGVtQnJvd3NlcjtcblN5c3RlbUJyb3dzZXIucHJvdG90eXBlLnBhcmVudENsYXNzID0gSW5BcHBCcm93c2VyLnByb3RvdHlwZTtcblxuU3lzdGVtQnJvd3Nlci5wcm90b3R5cGUuZ2V0Q3VycmVudFVybCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gKHRoaXMuX3dpbmRvdyA/IHRoaXMuX3dpbmRvdy5sb2NhdGlvbi5ocmVmIDogJycpO1xufTtcblxuU3lzdGVtQnJvd3Nlci5wcm90b3R5cGUuc2hvdyA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIXRoaXMuX3dpbmRvdykge1xuICAgICAgICB2YXIgbW9kdWxlbWFwcGVyID0gY29yZG92YS5yZXF1aXJlKCdjb3Jkb3ZhL21vZHVsZW1hcHBlcicpLFxuICAgICAgICAgICAgd2luZG93T3BlbiA9IG1vZHVsZW1hcHBlci5nZXRPcmlnaW5hbFN5bWJvbCh3aW5kb3csICd3aW5kb3cub3BlbicpO1xuXG4gICAgICAgIHRoaXMuX3N1Y2Nlc3MoSW5BcHBCcm93c2VyLkV2ZW50cy5MT0FEX1NUQVJUKTtcblxuICAgICAgICB0aGlzLl93aW5kb3cgPSB3aW5kb3dPcGVuLmNhbGwod2luZG93LCB0aGlzLl91cmwsICdfYmxhbmsnKTtcbiAgICB9XG59O1xuXG5TeXN0ZW1Ccm93c2VyLnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5fd2luZG93KSB7XG4gICAgICAgIHRoaXMuX3dpbmRvdy5jbG9zZSgpO1xuICAgICAgICB0aGlzLl93aW5kb3cgPSBudWxsO1xuXG4gICAgICAgIHRoaXMuX3N1Y2Nlc3MoSW5BcHBCcm93c2VyLkV2ZW50cy5FWElUKTtcbiAgICB9XG59O1xuXG4vKipcbiAqIEltcGxlbWVudGF0aW9uIG9mIHRoZSBXZWJWaWV3IHR5cGUgb2YgSW5BcHBCcm93c2VyIHBsdWdpbi4gVGhpcyBjcmVhdGVzIGFuIGlmcmFtZVxuICogdGhhdCBzaW11bGF0ZXMgdGhlIGVtYmVkZGVkIFdlYlZpZXcuXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsXG4gKiBAcGFyYW0ge0FycmF5fSBvcHRpb25zXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBzdWNjZXNzXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBmYWlsXG4gKiBAY29uc3RydWN0b3JcbiAqL1xuZnVuY3Rpb24gSWZyYW1lQnJvd3Nlcih1cmwsIG9wdGlvbnMsIHN1Y2Nlc3MsIGZhaWwpIHtcbiAgICB0aGlzLl9jb250YWluZXIgPSBudWxsO1xuICAgIHRoaXMuX2lmcmFtZSA9IG51bGw7XG4gICAgdGhpcy5fcmVzaXplQ2FsbGJhY2sgPSB0aGlzLl9yZXNpemVDb250YWluZXIuYmluZCh0aGlzKTtcbiAgICB0aGlzLl9pc1Zpc2libGUgPSBmYWxzZTtcblxuICAgIEluQXBwQnJvd3Nlci5jYWxsKHRoaXMsIHVybCwgb3B0aW9ucywgc3VjY2VzcywgZmFpbCk7XG59XG5cbklmcmFtZUJyb3dzZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShJbkFwcEJyb3dzZXIucHJvdG90eXBlKTtcbklmcmFtZUJyb3dzZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gSWZyYW1lQnJvd3NlcjtcbklmcmFtZUJyb3dzZXIucHJvdG90eXBlLnBhcmVudENsYXNzID0gSW5BcHBCcm93c2VyLnByb3RvdHlwZTtcblxuSWZyYW1lQnJvd3Nlci5wcm90b3R5cGUuZ2V0Q3VycmVudFVybCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gKHRoaXMuX2lmcmFtZSA/IHRoaXMuX2lmcmFtZS5zcmMgOiAnJyk7XG59O1xuXG5JZnJhbWVCcm93c2VyLnByb3RvdHlwZS5zaG93ID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICghdGhpcy5fY29udGFpbmVyKSB7XG4gICAgICAgIHRoaXMuX2NyZWF0ZUZyYW1lKCk7XG4gICAgfVxuXG4gICAgdGhpcy5faXNWaXNpYmxlID0gdHJ1ZTtcblxuICAgIHRoaXMuX2lmcmFtZS5zcmMgPSB0aGlzLl91cmw7XG4gICAgdGhpcy5fY29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuXG4gICAgdGhpcy5fcmVzaXplQ29udGFpbmVyKCk7XG5cbiAgICB0aGlzLl9zdWNjZXNzKEluQXBwQnJvd3Nlci5FdmVudHMuTE9BRF9TVEFSVCk7XG59O1xuXG5JZnJhbWVCcm93c2VyLnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5fY29udGFpbmVyKSB7XG4gICAgICAgIHRoaXMuX2NvbnRhaW5lci5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuX2NvbnRhaW5lcik7XG4gICAgICAgIHRoaXMuX2NvbnRhaW5lciA9IG51bGw7XG4gICAgICAgIHRoaXMuX2lzVmlzaWJsZSA9IGZhbHNlO1xuXG4gICAgICAgIHRoaXMuX3N1Y2Nlc3MoSW5BcHBCcm93c2VyLkV2ZW50cy5FWElUKTtcblxuICAgICAgICB0aGlzLl9pZnJhbWUgPSBudWxsO1xuXG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLl9yZXNpemVDYWxsYmFjayk7XG4gICAgfVxufTtcblxuSWZyYW1lQnJvd3Nlci5wcm90b3R5cGUuaGlkZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5fY29udGFpbmVyICYmIHRoaXMuX2lzVmlzaWJsZSkge1xuICAgICAgICB0aGlzLl9jb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgdGhpcy5faXNWaXNpYmxlID0gZmFsc2U7XG4gICAgfVxufTtcblxuSWZyYW1lQnJvd3Nlci5wcm90b3R5cGUuaW5qZWN0U2NyaXB0Q29kZSA9IGZ1bmN0aW9uIChjYWxsYmFjaywgYXJncykge1xuICAgIGlmICh0aGlzLl9jb250YWluZXIgJiYgdGhpcy5faWZyYW1lKSB7XG4gICAgICAgIHZhciBjb2RlID0gYXJnc1swXS5yZXBsYWNlKC9cXHI/XFxufFxcci9nLCAnJyksXG4gICAgICAgICAgICBoYXNDYWxsYmFjayA9IGFyZ3NbMV07XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSB0aGlzLl9pbmplY3RDb2RlKGNvZGUpO1xuICAgICAgICAgICAgaWYgKGhhc0NhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2socmVzdWx0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIG9jY3VyZWQgd2hpbGUgdHJ5aW5nIHRvIGluamVjdCBzY3JpcHQnLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG5JZnJhbWVCcm93c2VyLnByb3RvdHlwZS5pbmplY3RTY3JpcHRGaWxlID0gZnVuY3Rpb24gKGNhbGxiYWNrLCBhcmdzKSB7XG4gICAgdmFyIGZpbGUgPSBhcmdzWzBdO1xuICAgIHZhciBjb2RlID0gJyhmdW5jdGlvbiAoKSB7JyArXG4gICAgICAgICd2YXIgaGVhZCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaGVhZFwiKVswXTsnICtcbiAgICAgICAgJ3ZhciBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpOycgK1xuICAgICAgICAnc2NyaXB0LnR5cGUgPSBcInRleHQvamF2YXNjcmlwdFwiOycgK1xuICAgICAgICAnc2NyaXB0LmlkID0gXCJpbmFwcGJyb3dzZXItaW5qZWN0LXNjcmlwdFwiOycgK1xuICAgICAgICAnc2NyaXB0LnNyYyA9IFwiJyArIGZpbGUgKyAnXCI7JyArXG4gICAgICAgICdoZWFkLmFwcGVuZENoaWxkKHNjcmlwdCk7JyArXG4gICAgICAgICd9KCkpOyc7XG5cbiAgICBhcmdzWzBdID0gY29kZTtcblxuICAgIHRoaXMuaW5qZWN0U2NyaXB0Q29kZShjYWxsYmFjaywgYXJncyk7XG59O1xuXG5JZnJhbWVCcm93c2VyLnByb3RvdHlwZS5pbmplY3RTdHlsZUNvZGUgPSBmdW5jdGlvbiAoY2FsbGJhY2ssIGFyZ3MpIHtcbiAgICBpZiAodGhpcy5fY29udGFpbmVyICYmIHRoaXMuX2lmcmFtZSkge1xuICAgICAgICB2YXIgY3NzID0gYXJnc1swXS5yZXBsYWNlKC9cXHI/XFxufFxcci9nLCAnJyksXG4gICAgICAgICAgICBoYXNDYWxsYmFjayA9IGFyZ3NbMV07XG5cbiAgICAgICAgdmFyIGNvZGUgPSAnKGZ1bmN0aW9uICgpIHsnICtcbiAgICAgICAgICAgICd2YXIgaGVhZCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaGVhZFwiKVswXTsnICtcbiAgICAgICAgICAgICd2YXIgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7JyArXG4gICAgICAgICAgICAnc3R5bGUudHlwZSA9IFwidGV4dC9jc3NcIjsnICtcbiAgICAgICAgICAgICdpZiAoc3R5bGUuc3R5bGVTaGVldCkgeycgK1xuICAgICAgICAgICAgJ3N0eWxlLnN0eWxlU2hlZXQuY3NzVGV4dCA9IFwiJyArIGNzcyArICdcIjsnICtcbiAgICAgICAgICAgICd9IGVsc2UgeycgK1xuICAgICAgICAgICAgJ3N0eWxlLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwiJyArIGNzcyArICdcIikpO30nICtcbiAgICAgICAgICAgICdoZWFkLmFwcGVuZENoaWxkKHN0eWxlKTsnICtcbiAgICAgICAgICAgICd9KCkpOyc7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSB0aGlzLl9pbmplY3RDb2RlKGNvZGUpO1xuICAgICAgICAgICAgaWYgKGhhc0NhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2socmVzdWx0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIG9jY3VyZWQgd2hpbGUgdHJ5aW5nIHRvIGluamVjdCBzdHlsZScsIGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5cbklmcmFtZUJyb3dzZXIucHJvdG90eXBlLmluamVjdFN0eWxlRmlsZSA9IGZ1bmN0aW9uIChjYWxsYmFjaywgYXJncykge1xuICAgIGlmICh0aGlzLl9jb250YWluZXIgJiYgdGhpcy5faWZyYW1lKSB7XG4gICAgICAgIHZhciBmaWxlID0gYXJnc1swXSxcbiAgICAgICAgICAgIGhhc0NhbGxiYWNrID0gYXJnc1sxXTtcblxuICAgICAgICB2YXIgY29kZSA9ICcoZnVuY3Rpb24gKCkgeycgK1xuICAgICAgICAgICAgJ3ZhciBoZWFkID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJoZWFkXCIpWzBdOycgK1xuICAgICAgICAgICAgJ3ZhciBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpbmtcIik7JyArXG4gICAgICAgICAgICAnbGluay50eXBlID0gXCJ0ZXh0L2Nzc1wiOycgK1xuICAgICAgICAgICAgJ2xpbmsucmVsID0gXCJzdHlsZXNoZWV0XCI7JyArXG4gICAgICAgICAgICAnbGluay5ocmVmID0gXCInICsgZmlsZSArICdcIjsnICtcbiAgICAgICAgICAgICdoZWFkLmFwcGVuZENoaWxkKGxpbmspOycgK1xuICAgICAgICAgICAgJ30oKSk7JztcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHRoaXMuX2luamVjdENvZGUoY29kZSk7XG4gICAgICAgICAgICBpZiAoaGFzQ2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhyZXN1bHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igb2NjdXJlZCB3aGlsZSB0cnlpbmcgdG8gaW5qZWN0IGEgc3R5bGUgZmlsZScsIGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5cbi8qKlxuICogQHByaXZhdGVcbiAqL1xuSWZyYW1lQnJvd3Nlci5wcm90b3R5cGUuX2NyZWF0ZUZyYW1lID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRoaXMuX2lmcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lmcmFtZScpO1xuICAgIHRoaXMuX2lmcmFtZS5zYW5kYm94ID0gJ2FsbG93LW1vZGFscyBhbGxvdy1wb3B1cHMnO1xuXG4gICAgLy8gY29udGFpbmVyIHN0eWxlXG4gICAgdmFyIHN0eWxlID0gdGhpcy5fY29udGFpbmVyLnN0eWxlO1xuICAgIHN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICBzdHlsZS50b3AgPSBzdHlsZS5sZWZ0ID0gJzAnO1xuICAgIHN0eWxlLmJvcmRlciA9ICcwJztcbiAgICBzdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnI2ZmZmZmZic7XG4gICAgc3R5bGUuekluZGV4ID0gJzEwMDAwJztcbiAgICBzdHlsZS53aWR0aCA9IGRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGggKyAncHgnO1xuICAgIHN0eWxlLmhlaWdodCA9IGRvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0ICsgJ3B4JztcbiAgICBzdHlsZS5taW5IZWlnaHQgPSBzdHlsZS5taW5XaWR0aCA9ICcxMDAlJztcblxuICAgIC8vIGlmcmFtZSBzdHlsZVxuICAgIHN0eWxlID0gdGhpcy5faWZyYW1lLnN0eWxlO1xuICAgIHN0eWxlLmJvcmRlciA9ICcwJztcbiAgICBzdHlsZS53aWR0aCA9ICcxMDAlJztcblxuICAgIGlmICghdGhpcy5fb3B0aW9ucy5sb2NhdGlvbiB8fCB0aGlzLl9vcHRpb25zLmxvY2F0aW9uID09PSAneWVzJykge1xuICAgICAgICBzdHlsZS5oZWlnaHQgPSAnY2FsYygxMDAlIC0gMzVweCknO1xuXG4gICAgICAgIHRoaXMuX2NvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLl9jcmVhdGVOYXZpZ2F0aW9uQmFyKCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHN0eWxlLmhlaWdodCA9ICcxMDAlJztcbiAgICB9XG5cbiAgICB0aGlzLl9jb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5faWZyYW1lKTtcblxuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5fY29udGFpbmVyKTtcblxuICAgIHRoaXMuX2lmcmFtZS5hZGRFdmVudExpc3RlbmVyKCdwYWdlc2hvdycsIHRoaXMuX3N1Y2Nlc3MuYmluZCh0aGlzLCBJbkFwcEJyb3dzZXIuRXZlbnRzLkxPQURfU1RBUlQpKTtcbiAgICB0aGlzLl9pZnJhbWUuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIHRoaXMuX3N1Y2Nlc3MuYmluZCh0aGlzLCBJbkFwcEJyb3dzZXIuRXZlbnRzLkxPQURfU1RPUCkpO1xuICAgIHRoaXMuX2lmcmFtZS5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIHRoaXMuX3N1Y2Nlc3MuYmluZCh0aGlzLCBJbkFwcEJyb3dzZXIuRXZlbnRzLkxPQURfRVJST1IpKTtcbiAgICB0aGlzLl9pZnJhbWUuYWRkRXZlbnRMaXN0ZW5lcignYWJvcnQnLCB0aGlzLl9zdWNjZXNzLmJpbmQodGhpcywgSW5BcHBCcm93c2VyLkV2ZW50cy5MT0FEX0VSUk9SKSk7XG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5fcmVzaXplQ2FsbGJhY2spO1xufTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgZmFrZSBicm93c2VyJ3MgbmF2aWdhdGlvbiBiYXIsIHRoYXQgb25seSBjb250YWlucyBhIGJ1dHRvbiB0byByZW1vdmUgdGhlIGlmcmFtZS5cbiAqIEBwcml2YXRlXG4gKi9cbklmcmFtZUJyb3dzZXIucHJvdG90eXBlLl9jcmVhdGVOYXZpZ2F0aW9uQmFyID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBuYXZpZ2F0aW9uRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JyksXG4gICAgICAgIGNsb3NlU3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcblxuICAgIG5hdmlnYXRpb25EaXYuc3R5bGUuaGVpZ2h0ID0gJzMwcHgnO1xuICAgIG5hdmlnYXRpb25EaXYuc3R5bGUucGFkZGluZyA9ICcycHgnO1xuICAgIG5hdmlnYXRpb25EaXYuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyM0MDQwNDAnO1xuXG4gICAgY2xvc2VTcGFuLmlubmVySFRNTCA9ICfinJYnO1xuICAgIGNsb3NlU3Bhbi5zdHlsZS53aWR0aCA9ICczMHB4JztcbiAgICBjbG9zZVNwYW4uc3R5bGUuaGVpZ2h0ID0gJzI1cHgnO1xuICAgIGNsb3NlU3Bhbi5zdHlsZS5jb2xvciA9ICcjZmZmZmZmJztcbiAgICBjbG9zZVNwYW4uc3R5bGUuZm9udFNpemUgPSAnMjJweCc7XG4gICAgY2xvc2VTcGFuLnN0eWxlLm1hcmdpbkxlZnQgPSAnNXB4JztcbiAgICBjbG9zZVNwYW4uc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInO1xuXG4gICAgY2xvc2VTcGFuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH0uYmluZCh0aGlzKSwgMCk7XG4gICAgfS5iaW5kKHRoaXMpKTtcblxuICAgIG5hdmlnYXRpb25EaXYuYXBwZW5kQ2hpbGQoY2xvc2VTcGFuKTtcblxuICAgIHJldHVybiBuYXZpZ2F0aW9uRGl2O1xufTtcblxuLyoqXG4gKiBSZXNpemUgdGhlIG1haW4gY29udGFpbmVyIHdpdGggdGhlIGRvY3VtZW50LmJvZHkgc2l6ZSwgb25seSB3aGVuIGl0IGlzIHZpc2libGUuXG4gKiBAcHJpdmF0ZVxuICovXG5JZnJhbWVCcm93c2VyLnByb3RvdHlwZS5fcmVzaXplQ29udGFpbmVyID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLl9jb250YWluZXIgJiYgdGhpcy5faXNWaXNpYmxlKSB7XG4gICAgICAgIHZhciBib2R5ID0gZG9jdW1lbnQuYm9keTtcblxuICAgICAgICB0aGlzLl9jb250YWluZXIuc3R5bGUud2lkdGggPSBib2R5LmNsaWVudFdpZHRoICsgJ3B4JztcbiAgICAgICAgdGhpcy5fY29udGFpbmVyLnN0eWxlLmhlaWdodCA9IGJvZHkuY2xpZW50SGVpZ2h0ICsgJ3B4JztcbiAgICB9XG59O1xuXG4vKipcbiAqIEV4ZWN1dGUgdGhlIGdpdmVuIGNvZGUgaW4gdGhlIGlmcmFtZSBjb250ZXh0IHdoZW5ldmVyIGl0J3MgcG9zc2libGUuIFRoaXMgbWF5XG4gKiB0aHJvdyBhbiBlcnJvciB3aGVuIHRoZSBVUkwgbG9hZGVkIGluIHRoZSBpZnJhbWUgaXMgbm90IGluIHRoZSBzYW1lIGRvbWFpbiB0aGFuXG4gKiB0aGUgYXBwbGljYXRpb24uXG4gKiBAdGhyb3dzIEl0IHRocm93cyBhbiBlcnJvciB3aGVuIHRoZSBldmFsIGNhbGwgZnJvbSB0aGUgaWZyYW1lIGZhaWxzLlxuICogQHByaXZhdGVcbiAqL1xuSWZyYW1lQnJvd3Nlci5wcm90b3R5cGUuX2luamVjdENvZGUgPSBmdW5jdGlvbiAoY29kZSkge1xuICAgIHZhciByZXN1bHQgPSB0aGlzLl9pZnJhbWUuY29udGVudFdpbmRvdy5ldmFsKGNvZGUpO1xuXG4gICAgcmV0dXJuIHJlc3VsdCA/IFtyZXN1bHRdIDogW107XG59O1xuXG4vKipcbiAqIENyZWF0ZSBhbiBpbnN0YW5jZSBvZiBJbkFwcEJyb3dzZXIgYmFzZWQgb24gdGhlIHRhcmdldCB0eXBlLiBXaGVuIHRoZSB0eXBlIGlzICdfc3lzdGVtJyxcbiAqIGFuIGluc3RhbmNlIG9mIHRoZSBzeXN0ZW0gYnJvd3NlciBpcyBjcmVhdGVkLCB3aGVuIHRoZSB0eXBlIGlzICdfYmxhbmsnLCBhbiBpbnN0YW5jZSBvZlxuICogYSBicm93c2VyIGJhc2VkIG9uIGlmcmFtZSBpcyBjcmVhdGVkLiBGb3IgYW55IG90aGVyIHRhcmdldCB0eXBlLCBpbmNsdWRpbmcgJ19zZWxmJyxcbiAqIHRoZSBjdXJyZW50IHdpbmRvdyB3aWxsIG5hdmlnYXRlIHRvIHRoZSBnaXZlbiBVUkwuXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBzdWNjZXNzXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBmYWlsXG4gKiBAcGFyYW0ge0FycmF5fSBhcmdzXG4gKiBAcmV0dXJuIHtvYmplY3R9XG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZShzdWNjZXNzLCBmYWlsLCBhcmdzKSB7XG4gICAgLy8gYXJnc1swXTogdXJsLCBhcmdzWzFdOiB0YXJnZXQsIGFyZ3NbMl06IG9wdGlvbnNcbiAgICB2YXIgQ29uc3RydWN0b3I7XG5cbiAgICBzd2l0Y2ggKGFyZ3NbMV0pIHtcbiAgICAgICAgY2FzZSAnX3N5c3RlbSc6XG4gICAgICAgICAgICAvLyBvcGVuIGluIGEgbmV3IGJyb3dzZXIgdGFiXG4gICAgICAgICAgICBDb25zdHJ1Y3RvciA9IFN5c3RlbUJyb3dzZXI7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnX3NlbGYnOlxuICAgICAgICAgICAgLy8gdXNlIHRoZSBjdXJyZW50IHdpbmRvd1xuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uID0gYXJnc1swXTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGlmIChfZGVmYXVsdEluQXBwQnJvd3NlclR5cGUgPT09ICdpZnJhbWUnKSB7XG4gICAgICAgICAgICAgICAgLy8gXCJfYmxhbmtcIiBhbmQgYW55IG90aGVyIG9wdGlvbiwgdXNlIHRoZSBpZnJhbWUgYnJvd3NlclxuICAgICAgICAgICAgICAgIENvbnN0cnVjdG9yID0gSWZyYW1lQnJvd3NlcjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gbmV3IGJyb3dzZXIgd2luZG93XG4gICAgICAgICAgICAgICAgQ29uc3RydWN0b3IgPSBTeXN0ZW1Ccm93c2VyO1xuICAgICAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBuZXcgQ29uc3RydWN0b3IoYXJnc1swXSwgYXJnc1syXSwgc3VjY2VzcywgZmFpbCk7XG59XG5cbmZ1bmN0aW9uIHNldERlZmF1bHRJbkFwcEJyb3dzZXIodmFsdWUpIHtcbiAgICBfZGVmYXVsdEluQXBwQnJvd3NlclR5cGUgPSB2YWx1ZTtcbn1cblxubW9kdWxlLmV4cG9ydHMuY3JlYXRlID0gY3JlYXRlO1xubW9kdWxlLmV4cG9ydHMuc2V0RGVmYXVsdEluQXBwQnJvd3NlciA9IHNldERlZmF1bHRJbkFwcEJyb3dzZXI7XG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cblxuLy8gaHR0cHM6Ly9naXRodWIuY29tL2FwYWNoZS9jb3Jkb3ZhLXBsdWdpbi1tZWRpYS9cblxuLypnbG9iYWwgTWVkaWE6IGZhbHNlICovXG5cbnZhciBfcGxheWVycyA9IHt9O1xuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBpZFxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmZ1bmN0aW9uIFBsYXllcihpZCwgc3JjKSB7XG4gICAgdGhpcy5pZCA9IGlkO1xuICAgIHRoaXMuc3JjID0gc3JjO1xuICAgIHRoaXMuX25vZGUgPSBudWxsO1xuICAgIHRoaXMuX3N0YXRlID0gbnVsbDsgLy8gcmVmZW5jZSB0byBhIE1lZGlhLlN0YXRlXG5cbiAgICB0aGlzLl91cGRhdGVTdGF0ZShNZWRpYS5NRURJQV9TVEFSVElORyk7XG4gICAgdGhpcy5fcHJlcGFyZSgpO1xufVxuXG5QbGF5ZXIucHJvdG90eXBlLnN0YXJ0UGxheWluZyA9IGZ1bmN0aW9uIChzcmMpIHtcbiAgICB0aGlzLnNyYyA9IHNyYztcbiAgICBpZiAodGhpcy5fcHJlcGFyZSgpKSB7XG4gICAgICAgIHRoaXMuX25vZGUucGxheSgpO1xuICAgIH1cbn07XG5cblBsYXllci5wcm90b3R5cGUucGF1c2VQbGF5aW5nID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLl9pc1JlYWR5KCkgJiYgdGhpcy5fc3RhdGUgPT09IE1lZGlhLk1FRElBX1JVTk5JTkcpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMuX25vZGUucGF1c2UoKTtcbiAgICAgICAgICAgIHRoaXMuX3VwZGF0ZVN0YXRlKE1lZGlhLk1FRElBX1BBVVNFRCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgdGhpcy5fbm90aWZ5RXJyb3Iod2luZG93Lk1lZGlhRXJyb3IuTUVESUFfRVJSX0FCT1JURUQpO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fbm90aWZ5RXJyb3Iod2luZG93Lk1lZGlhRXJyb3IuTUVESUFfRVJSX05PTkVfQUNUSVZFKTtcbiAgICB9XG59O1xuXG5QbGF5ZXIucHJvdG90eXBlLnN0b3BQbGF5aW5nID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLl9pc1JlYWR5KCkgJiYgKHRoaXMuX3N0YXRlID09PSBNZWRpYS5NRURJQV9SVU5OSU5HIHx8IHRoaXMuX3N0YXRlID09PSBNZWRpYS5NRURJQV9QQVVTRUQpKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLl9ub2RlLnBhdXNlKCk7XG4gICAgICAgICAgICB0aGlzLnNlZWtUb0F1ZGlvKDApO1xuICAgICAgICAgICAgdGhpcy5fdXBkYXRlU3RhdGUoTWVkaWEuTUVESUFfU1RPUFBFRCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgdGhpcy5fbm90aWZ5RXJyb3Iod2luZG93Lk1lZGlhRXJyb3IuTUVESUFfRVJSX0FCT1JURUQpO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fbm90aWZ5RXJyb3Iod2luZG93Lk1lZGlhRXJyb3IuTUVESUFfRVJSX05PTkVfQUNUSVZFKTtcbiAgICB9XG59O1xuXG5QbGF5ZXIucHJvdG90eXBlLnNlZWtUb0F1ZGlvID0gZnVuY3Rpb24gKG1pbGxpc2Vjb25kcykge1xuICAgIGlmICh0aGlzLl9pc1JlYWR5KCkpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMuX25vZGUuY3VycmVudFRpbWUgPSAobWlsbGlzZWNvbmRzIC8gMTAwMCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgdGhpcy5fbm90aWZ5RXJyb3Iod2luZG93Lk1lZGlhRXJyb3IuTUVESUFfRVJSX0FCT1JURUQpO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fbm90aWZ5RXJyb3Iod2luZG93Lk1lZGlhRXJyb3IuTUVESUFfRVJSX05PTkVfQUNUSVZFKTtcbiAgICB9XG59O1xuXG5QbGF5ZXIucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHRoaXMuX2lzUmVhZHkoKSkge1xuICAgICAgICAgICAgdGhpcy5fbm9kZS5wYXVzZSgpO1xuICAgICAgICAgICAgdGhpcy5fbm9kZSA9IG51bGw7XG5cbiAgICAgICAgICAgIHRoaXMuX3VwZGF0ZVN0YXRlKE1lZGlhLk1FRElBX1NUT1BQRUQpO1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIHRoaXMuX25vdGlmeUVycm9yKHdpbmRvdy5NZWRpYUVycm9yLk1FRElBX0VSUl9BQk9SVEVEKTtcbiAgICB9XG59O1xuXG4vKipcbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgd2hlbiB0aGUgb3BlcmF0aW9uIGlzIHN1Y2Nlc3NmdWwgYW5kIHRoZSBub2RlIGlzIGF2YWlsYWJsZSxcbiAqICAgICAgICAgICAgICAgICAgZmFsc2Ugd2hlbiB0aGVyZSdzIHdhcyBhbiBlcnJvciB0cnlpbmcgdG8gY3JlYXRlIGFuIEF1ZGlvIG5vZGUuXG4gKiBAcHJpdmF0ZVxuICovXG5QbGF5ZXIucHJvdG90eXBlLl9wcmVwYXJlID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICghdGhpcy5faXNSZWFkeSgpKSB7XG4gICAgICAgIC8vIGlmIHRoZSBwbGF5ZXIgd2FzIGRlc3Ryb3llZCwgdGhlbiB0aGUgbm9kZSB3aWxsIGJlIG51bGxcbiAgICAgICAgLy8gYW5kIHdlIG5lZWQgdG8gY3JlYXRlIGl0IGFnYWluXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLl9ub2RlID0gdGhpcy5fY3JlYXRlQXVkaW9Ob2RlKCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgdGhpcy5fc3RhdGUgPSBNZWRpYS5NRURJQV9OT05FO1xuICAgICAgICAgICAgdGhpcy5fbm90aWZ5RXJyb3Iod2luZG93Lk1lZGlhRXJyb3IuTUVESUFfRVJSX0FCT1JURUQpO1xuXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gYXVkaW8gcGxheWVyIGlzIHJlYWR5XG4gICAgcmV0dXJuIHRydWU7XG59O1xuXG5QbGF5ZXIucHJvdG90eXBlLmdldEN1cnJlbnRQb3NpdGlvbiA9IGZ1bmN0aW9uIChzdWNjZXNzLCBmYWlsKSB7XG4gICAgdmFyIHBvc2l0aW9uID0gdGhpcy5fbm9kZS5jdXJyZW50VGltZTtcblxuICAgIHRoaXMuX25vdGlmeVN0YXR1cyhNZWRpYS5NRURJQV9QT1NJVElPTiwgcG9zaXRpb24pO1xuICAgIHN1Y2Nlc3MocG9zaXRpb24pO1xufTtcblxuUGxheWVyLnByb3RvdHlwZS5zdGFydFJlY29yZCA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLl9ub3RpZnlFcnJvcih3aW5kb3cuTWVkaWFFcnJvci5NRURJQV9FUlJfU1JDX05PVF9TVVBQT1JURUQsICdOb3Qgc3VwcG9ydGVkIEFQSScpO1xufTtcblxuUGxheWVyLnByb3RvdHlwZS5zdG9wUmVjb3JkID0gZnVuY3Rpb24gKHBhdXNlKSB7XG4gICAgdGhpcy5fbm90aWZ5RXJyb3Iod2luZG93Lk1lZGlhRXJyb3IuTUVESUFfRVJSX1NSQ19OT1RfU1VQUE9SVEVELCAnTm90IHN1cHBvcnRlZCBBUEknKTtcbn07XG5cblBsYXllci5wcm90b3R5cGUucmVzdW1lUmVjb3JkID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX25vdGlmeUVycm9yKHdpbmRvdy5NZWRpYUVycm9yLk1FRElBX0VSUl9TUkNfTk9UX1NVUFBPUlRFRCwgJ05vdCBzdXBwb3J0ZWQgQVBJJyk7XG59O1xuXG5QbGF5ZXIucHJvdG90eXBlLnJlbGVhc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5fcGxheWVyLnJlbGVhc2UoKTtcbn07XG5cblBsYXllci5wcm90b3R5cGUuc2V0Vm9sdW1lID0gZnVuY3Rpb24gKHZvbHVtZSkge1xuICAgIGlmICh0aGlzLl9pc1JlYWR5KCkpIHtcbiAgICAgICAgdGhpcy5fbm9kZS52b2x1bWUgPSB2b2x1bWU7XG4gICAgfVxufTtcblxuUGxheWVyLnByb3RvdHlwZS5zZXRSYXRlID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX25vdGlmeUVycm9yKHdpbmRvdy5NZWRpYUVycm9yLk1FRElBX0VSUl9TUkNfTk9UX1NVUFBPUlRFRCwgJ05vdCBzdXBwb3J0ZWQgQVBJJyk7XG59O1xuXG5QbGF5ZXIucHJvdG90eXBlLmdldEN1cnJlbnRBbXBsaXR1ZGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5fbm90aWZ5RXJyb3Iod2luZG93Lk1lZGlhRXJyb3IuTUVESUFfRVJSX1NSQ19OT1RfU1VQUE9SVEVELCAnTm90IHN1cHBvcnRlZCBBUEknKTtcbn07XG5cbi8qKlxuICogQG51bWJlciB7c3RhdGV9XG4gKiBAcHJpdmF0ZVxuICovXG5QbGF5ZXIucHJvdG90eXBlLl91cGRhdGVTdGF0ZSA9IGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgIGlmICh0aGlzLl9zdGF0ZSAhPT0gc3RhdGUpIHtcbiAgICAgICAgdGhpcy5fc3RhdGUgPSBzdGF0ZTtcblxuICAgICAgICB0aGlzLl9ub3RpZnlTdGF0dXMoTWVkaWEuTUVESUFfU1RBVEUsIHRoaXMuX3N0YXRlKTtcbiAgICB9XG59O1xuXG4vKipcbiAqIEBwYXJhbSB7bnVtYmVyfSBjb2RlXG4gKiBAcGFyYW0ge3N0cmluZz19IG1lc3NhZ2VcbiAqIEBwcml2YXRlXG4gKi9cblBsYXllci5wcm90b3R5cGUuX25vdGlmeUVycm9yID0gZnVuY3Rpb24gKGNvZGUsIG1lc3NhZ2UpIHtcbiAgICB2YXIgbWVkaWFFcnJvciA9IHtcbiAgICAgICAgY29kZTogY29kZVxuICAgIH07XG5cbiAgICBpZiAodHlwZW9mIG1zZyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgbWVkaWFFcnJvci5tZXNzYWdlID0gbWVzc2FnZTtcbiAgICB9XG5cbiAgICB0aGlzLl9ub3RpZnlTdGF0dXMoTWVkaWEuTUVESUFfRVJST1IsIG1lZGlhRXJyb3IpO1xufTtcblxuUGxheWVyLnByb3RvdHlwZS5fbm90aWZ5U3RhdHVzID0gZnVuY3Rpb24gKHR5cGUsIHZhbHVlKSB7XG4gICAgaWYgKHdpbmRvdy5NZWRpYS5vblN0YXR1cykge1xuICAgICAgICB3aW5kb3cuTWVkaWEub25TdGF0dXModGhpcy5pZCwgdHlwZSwgdmFsdWUpO1xuICAgIH1cbn07XG5cbi8qKlxuICogQ2hlY2sgaWYgdGhlIG1lZGlhIHBsYXllciBpcyByZWFkeTogdGhlIEF1ZGlvIGluc3RhbmNlIGlzIGF2YWlsYWJsZS5cbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKiBAcHJpdmF0ZVxuICovXG5QbGF5ZXIucHJvdG90eXBlLl9pc1JlYWR5ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAhIXRoaXMuX25vZGU7XG59O1xuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgcGxheWVyIHdpdGggbmVjZXNzYXJ5IGV2ZW50IGxpc3RlbmVycyBhdHRhY2hlZC5cbiAqIEByZXR1cm4ge0F1ZGlvfVxuICogQHRyb3dzXG4gKiBAcHJpdmF0ZVxuICovXG5QbGF5ZXIucHJvdG90eXBlLl9jcmVhdGVBdWRpb05vZGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIG5vZGUgPSBuZXcgQXVkaW8oKTtcbiAgICBub2RlLm9ubG9hZHN0YXJ0ID0gdGhpcy5fdXBkYXRlU3RhdGUuYmluZCh0aGlzLCBNZWRpYS5NRURJQV9TVEFSVElORyk7XG4gICAgbm9kZS5vbnBsYXlpbmcgPSB0aGlzLl91cGRhdGVTdGF0ZS5iaW5kKHRoaXMsIE1lZGlhLk1FRElBX1JVTk5JTkcpO1xuICAgIG5vZGUub25lbmRlZCA9IHRoaXMuX3VwZGF0ZVN0YXRlLmJpbmQodGhpcywgTWVkaWEuTUVESUFfU1RPUFBFRCk7XG5cbiAgICBub2RlLm9uZHVyYXRpb25jaGFuZ2UgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICB0aGlzLl9ub3RpZnlTdGF0dXMoTWVkaWEuTUVESUFfRFVSQVRJT04sIChlLnRhcmdldC5kdXJhdGlvbiB8fCAtMSkpO1xuICAgIH0uYmluZCh0aGlzKTtcblxuICAgIG5vZGUub25lcnJvciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIC8vIER1ZSB0byBtZWRpYS5zcGVjLjE1IEl0IHNob3VsZCByZXR1cm4gTWVkaWFFcnJvciBmb3IgYmFkIGZpbGVuYW1lXG4gICAgICAgIHZhciBjb2RlO1xuICAgICAgICBpZiAoZS50YXJnZXQuZXJyb3IuY29kZSA9PT0gd2luZG93Lk1lZGlhRXJyb3IuTUVESUFfRVJSX1NSQ19OT1RfU1VQUE9SVEVEKSB7XG4gICAgICAgICAgICBjb2RlID0gd2luZG93Lk1lZGlhRXJyb3IuTUVESUFfRVJSX0FCT1JURUQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb2RlID0gIGUudGFyZ2V0LmVycm9yLmNvZGU7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9ub3RpZnlFcnJvcihjb2RlKTtcbiAgICB9LmJpbmQodGhpcyk7XG5cbiAgICBpZiAodGhpcy5zcmMpIHtcbiAgICAgICAgbm9kZS5zcmMgPSB0aGlzLnNyYztcbiAgICB9XG5cbiAgICByZXR1cm4gbm9kZTtcbn07XG5cbmZ1bmN0aW9uIGdldEJ5SWQoaWQpIHtcbiAgICByZXR1cm4gX3BsYXllcnNbaWRdO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVJZk5lZWRlZChpZCwgc3JjKSB7XG4gICAgdmFyIHBsYXllciA9IGdldEJ5SWQoaWQpO1xuICAgIGlmICghcGxheWVyKSB7XG4gICAgICAgIHBsYXllciA9IG5ldyBQbGF5ZXIoaWQsIHNyYyk7XG4gICAgICAgIF9wbGF5ZXJzW2lkXSA9IHBsYXllcjtcbiAgICB9XG5cbiAgICByZXR1cm4gcGxheWVyO1xufVxuXG5mdW5jdGlvbiByZW1vdmVCeUlkKGlkKSB7XG4gICAgaWYgKF9wbGF5ZXJzW2lkXSkge1xuICAgICAgICBkZWxldGUgX3BsYXllcnNbaWRdO1xuICAgIH1cbn1cblxubW9kdWxlLmV4cG9ydHMuY3JlYXRlSWZOZWVkZWQgICAgPSBjcmVhdGVJZk5lZWRlZDtcbm1vZHVsZS5leHBvcnRzLmdldEJ5SWQgICAgICAgICAgID0gZ2V0QnlJZDtcbm1vZHVsZS5leHBvcnRzLnJlbW92ZUJ5SWQgICAgICAgID0gcmVtb3ZlQnlJZDtcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gQmFzZWQgaW4gcGFydCBvbiBjb2RlIGZyb20gQXBhY2hlIENvcmRvdmEgKGh0dHBzOi8vZ2l0aHViLmNvbS9hcGFjaGUvY29yZG92YS1qcylcblxudmFyIHV0aWxzID0gcmVxdWlyZSgndXRpbHMnKTtcblxudmFyIG1vZHVsZUV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cztcblxudmFyIHR5cGVNYXAgPSB7XG4gICAgJ0EnOiAnQXJyYXknLFxuICAgICdEJzogJ0RhdGUnLFxuICAgICdOJzogJ051bWJlcicsXG4gICAgJ1MnOiAnU3RyaW5nJyxcbiAgICAnRic6ICdGdW5jdGlvbicsXG4gICAgJ08nOiAnT2JqZWN0J1xufTtcblxuZnVuY3Rpb24gZXh0cmFjdFBhcmFtTmFtZShjYWxsZWUsIGFyZ0luZGV4KSB7XG4gICAgcmV0dXJuICgvLio/XFwoKC4qPylcXCkvKS5leGVjKGNhbGxlZSlbMV0uc3BsaXQoJywgJylbYXJnSW5kZXhdO1xufVxuXG5mdW5jdGlvbiBjaGVja0FyZ3Moc3BlYywgZnVuY3Rpb25OYW1lLCBhcmdzLCBvcHRfY2FsbGVlKSB7XG4gICAgaWYgKCFtb2R1bGVFeHBvcnRzLmVuYWJsZUNoZWNrcykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBlcnJNc2cgPSBudWxsO1xuICAgIHZhciB0eXBlTmFtZTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNwZWMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdmFyIGMgPSBzcGVjLmNoYXJBdChpKSxcbiAgICAgICAgICAgIGNVcHBlciA9IGMudG9VcHBlckNhc2UoKSxcbiAgICAgICAgICAgIGFyZyA9IGFyZ3NbaV07XG4gICAgICAgIC8vIEFzdGVyaXggbWVhbnMgYWxsb3cgYW55dGhpbmcuXG4gICAgICAgIGlmIChjID09ICcqJykge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgdHlwZU5hbWUgPSB1dGlscy50eXBlTmFtZShhcmcpO1xuICAgICAgICBpZiAoKGFyZyA9PT0gbnVsbCB8fCBhcmcgPT09IHVuZGVmaW5lZCkgJiYgYyA9PSBjVXBwZXIpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlTmFtZSAhPSB0eXBlTWFwW2NVcHBlcl0pIHtcbiAgICAgICAgICAgIGVyck1zZyA9ICdFeHBlY3RlZCAnICsgdHlwZU1hcFtjVXBwZXJdO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGVyck1zZykge1xuICAgICAgICBlcnJNc2cgKz0gJywgYnV0IGdvdCAnICsgdHlwZU5hbWUgKyAnLic7XG4gICAgICAgIGVyck1zZyA9ICdXcm9uZyB0eXBlIGZvciBwYXJhbWV0ZXIgXCInICsgZXh0cmFjdFBhcmFtTmFtZShvcHRfY2FsbGVlIHx8IGFyZ3MuY2FsbGVlLCBpKSArICdcIiBvZiAnICsgZnVuY3Rpb25OYW1lICsgJzogJyArIGVyck1zZztcbiAgICAgICAgdGhyb3cgVHlwZUVycm9yKGVyck1zZyk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBnZXRWYWx1ZSh2YWx1ZSwgZGVmYXVsdFZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlID09PSB1bmRlZmluZWQgPyBkZWZhdWx0VmFsdWUgOiB2YWx1ZTtcbn1cblxubW9kdWxlRXhwb3J0cy5jaGVja0FyZ3MgPSBjaGVja0FyZ3M7XG5tb2R1bGVFeHBvcnRzLmdldFZhbHVlID0gZ2V0VmFsdWU7XG5tb2R1bGVFeHBvcnRzLmVuYWJsZUNoZWNrcyA9IHRydWU7XG5cbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChtZXNzYWdlcykge1xuICAgIHJldHVybiAge1xuICAgICAgICBDYW1lcmE6IHtcbiAgICAgICAgICAgIHRha2VQaWN0dXJlOiBmdW5jdGlvbiAoc3VjY2VzcywgZmFpbCwgYXJncykge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2VzLmNhbGwoJ3Rha2VQaWN0dXJlJywgYXJncykudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhcmdzICYmIGFyZ3NbMV0gPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIERlc3RpbmF0aW9uIHR5cGUgaXMgREFUQV9VUkwgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3MocmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICdyZXN1bHQnIHNob3VsZCBiZSB7ZGF0YTogPEFycmF5QnVmZmVyPiwgdHlwZTogPG1pbWVUeXBlPn0sIGZyb20gd2hpY2ggd2UnbGwgY3JlYXRlIGEgYmxvYlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJsb2IgPSBuZXcgQmxvYihbcmVzdWx0LmRhdGFdLCB7IHR5cGU6IHJlc3VsdC50eXBlIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VzcyhVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBmYWlsKGVycm9yKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG59O1xuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24obWVzc2FnZXMpIHtcbiAgICBtZXNzYWdlcy5yZWdpc3RlcignY29yZG92YS12ZXJzaW9uJywgZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgIGlmICh3aW5kb3cuY29yZG92YSkge1xuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgd2luZG93LmNvcmRvdmEudmVyc2lvbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCAnWW91IG11c3QgaGF2ZSBjb3Jkb3ZhLmpzIGluY2x1ZGVkIGluIHlvdXIgcHJvamVjdHMsIHRvIGJlIGFibGUgdG8gZ2V0IGNvcmRvdmEgdmVyc2lvbicpO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9hcGFjaGUvY29yZG92YS1wbHVnaW4tZGlhbG9ncy9cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAobWVzc2FnZXMpIHtcbiAgICBtZXNzYWdlcy5yZWdpc3RlcignYWxlcnQnLCBmdW5jdGlvbiAoZXZlbnQsIGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBhcmdzID0gZXZlbnQ7XG4gICAgICAgIHZhciB0aXRsZSA9IGFyZ3NbMV07XG4gICAgICAgIHZhciB0ZXh0ID0gYXJnc1swXTtcbiAgICAgICAgdmFyIGJ1dHRvbk5hbWUgPSBhcmdzWzJdO1xuICAgICAgICBjcmVhdGVEaWFsb2codGl0bGUsIHRleHQsIFtidXR0b25OYW1lXSwgZmFsc2UsIG51bGwsIGNhbGxiYWNrKTtcbiAgICB9KTtcblxuICAgIG1lc3NhZ2VzLnJlZ2lzdGVyKCdjb25maXJtJywgZnVuY3Rpb24gKGV2ZW50LCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgYXJncyA9IGV2ZW50O1xuICAgICAgICB2YXIgdGl0bGUgPSBhcmdzWzFdO1xuICAgICAgICB2YXIgdGV4dCA9IGFyZ3NbMF07XG4gICAgICAgIHZhciBidXR0b25zID0gYXJnc1syXTtcbiAgICAgICAgY3JlYXRlRGlhbG9nKHRpdGxlLCB0ZXh0LCBidXR0b25zLCBmYWxzZSwgbnVsbCwgY2FsbGJhY2spO1xuICAgIH0pO1xuXG4gICAgbWVzc2FnZXMucmVnaXN0ZXIoJ3Byb21wdCcsIGZ1bmN0aW9uIChldmVudCwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIGFyZ3MgPSBldmVudDtcbiAgICAgICAgdmFyIHRpdGxlID0gYXJnc1sxXTtcbiAgICAgICAgdmFyIHRleHQgPSBhcmdzWzBdO1xuICAgICAgICB2YXIgYnV0dG9ucyA9IGFyZ3NbMl07XG4gICAgICAgIHZhciBkZWZhdWx0VGV4dCA9IGFyZ3NbM107XG4gICAgICAgIGNyZWF0ZURpYWxvZyh0aXRsZSwgdGV4dCwgYnV0dG9ucywgdHJ1ZSwgZGVmYXVsdFRleHQsIGNhbGxiYWNrKTtcbiAgICB9KTtcblxuICAgIG1lc3NhZ2VzLnJlZ2lzdGVyKCdiZWVwJywgZnVuY3Rpb24gKGV2ZW50LCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgdGltZXMgPSBldmVudDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aW1lczsgaSsrKSB7XG4gICAgICAgICAgICAvLyAxNzAwbXMgYmVsb3cgaXMgdGhlIGJlZXAgc291bmQgZHVyYXRpb25cbiAgICAgICAgICAgIHNldFRpbWVvdXQobWFrZUJlZXAsIDE3MDAgKiBpKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBjYWxsIGNhbGxiYWNrIHdoZW4gYmVlcChzKSBpcyBkb25lXG4gICAgICAgIHNldFRpbWVvdXQoY2FsbGJhY2ssIDE3MDAgKiB0aW1lcyk7XG4gICAgfSk7XG5cbiAgICBmdW5jdGlvbiBtYWtlQmVlcCgpIHtcbiAgICAgICAgdmFyIGF1ZGlvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYXVkaW8nKTtcbiAgICAgICAgYXVkaW8uc3JjID0gJ2RhdGE6YXVkaW8vd2F2O2Jhc2U2NCxVa2xHUmpRbkFBQlhRVlpGWm0xMElCQUFBQUFCQUFFQVFCOEFBQUFBQUFBQkFBZ0FaR0YwWVJBbkFBQ0FtYkhJMit2Mi9mLzg4K2ZXd2F1U2VXQklNaUFSQndJQkJoQWVNRVZkZFkrb3Y5UGw4dnYvL3ZmdDNjcTBuSU5xVVRzbkZ3c0RBUVFMR0NnOFUydUVuYlhMM3UzNC92Lzc4dVRUdnFhT2RGdEVMeDBQQmdFQ0J4SWhNMGxoZXBPc3d0Zm45UHovL2ZicTJzZXdtSDltVGpja0ZRa0RBUVVOR2lzL1YyK0pvcm5QNGUvNS92NzU4T0hQdXFLSmNGZEFMQnNOQlFFRENSUWpOMDFsZnBld3h0cnE5djMvL1BUbzE4T3NsSHRpU2pRaEVnZ0NBUVlQSFM1RFczT05wcjNTNVBINi8vNzQ3dC9NdHA2RmJGTTlLUmdNQkFFRENoWW1PbEZwZ3B1MHl0M3M5LzcvKy9QbDFNQ29rSFpkUmpFZUVBWUNBZ2NSSHpKSFgzaVJxc0hWNXZQNy8vMzM2OXpJc3BxQmFFODVKaFlLQXdFRURCa3FQbFZ0aDZDM3plRHUrZjcvK3ZIajBieWtpM0paUWkwY0RnVUJBZ2dUSWpWTFkzeVZyc1RZNmZYOC8vMzE2ZG5GcnBaOVkwczJJeE1JQWdFRkRoc3RRVmx4aTZTNzBPTHcrdi8rK2UvZ3pyaWdoMjVWUGlvWkRBUUJBd29WSlRoUFo0Q1pzc2piNi9iOS8veno1OWJCcXBKNFgwZ3lJQkVIQWdJR0VCNHdSVjEyajZpLzFPWHkrLy8rOSt6ZHlyU2NnMnBST3ljWEN3TUJCQXNZS0R4VGE0U2V0c3ZlN2ZqKy8vdnk1TksrcG8xMFcwUXZIUThHQVFJSUVpRXpTV0Y2azZ6RDErZjAvUC85OXVyYXg3Q1lmMlZOTnlRVUNRTUJCUTBhSzBCWGI0bWl1Yy9oNy9uKy92bnc0Yys2b29sd1YwQXNHZzBGQVFNSkZDUTNUV1YrbDdERzJ1cjIvZi84OU9qWHc2eVVlbUZKTkNFU0NBSUJCZzhkTGtOYmRJMm12ZExrOGZyLy92anQzc3kybm9Wc1V6d29HQXdFQVFNTEZpYzZVV21DbkxUSzNlejMvdi83OHVYVXY2aVBkbDFHTUI0UUJnSUNCeEVmTWtkZmVKR3F3ZFhtOC96Ly9mZnIzTWl5bW9GblR6a2xGUW9EQVFRTUdTbytWVzJIb0xqTjRPNzUvdi82OGVQUnZLU0xjbGxDTFJ3T0JRRUNDQk1pTlV0amZKV3V4ZGpwOWZ6Ly9QWHAyY1d1bG54alN6VWlFd2dDQVFVT0d5MUNXWEtMcEx2UjR2RDYvLzc1N3VETnVLQ0hibFUrS2hrTUJBRURDaFVsT1U5bmdKcXl5TnZyOS8zLy9QUG0xY0dxa1hoZlJ6SWdFUWNDQWdZUUhqQkZYWGFQcUwvVTVmTDcvLzczN04zS3RKeURhVkU3SnhjTEF3RUVDeGdvUEZOcmhaNjJ6Tjd0K1A3LysvSGswcjJtalhSYlJDOGREd1lCQWdnU0lUUkpZWHFUck1QWDZQVDgvLzMyNnRyR3NKaCtaVTAzSkJRSkF3RUZEUm9yUUZkd2lhSzZ6K0h2K2Y3KytlL2h6N3FpaVhCWFFDc2FEUVVCQXdrVUpEZE5aWDZZc01iYTZ2YjkvL3owNk5mRHJKTjZZVWswSVJJSUFnRUdEeDB2UkZ0MGphYTkwdVR4Ky8vKytPM2V6TGFlaFd0VFBDZ1lDd1FCQXdzWEp6dFJhWU9jdE1yZDdQZisvL3Z5NWRTL3FJOTJYVVV3SGhBR0FnSUhFU0F5UjE5NGthckIxZWJ6L1AvOTkrdmJ5TEthZ0dkUE9TVVZDZ01CQkF3WktqNVZib2VndU0zZzd2bisvL3J3NHRHN3BJdHlXVUl0R3c0RkFRSUlFeUkxUzJOOGxxN0YyZW4xL1AvODllbll4YTZWZkdOTE5TSVRDQUlCQlE0Y0xVSlpjb3Vrdk5Iajhmci8vdm51NE0yNG9JZHRWVDRxR1F3RUFRTUtGaVU1VDJlQm1yTEkzT3YzL2YvODgrYlZ3YXFSZUY5SE1oOFJCd0lDQmhBZU1FWmRkbytvdjlUbDh2di8vdmZzM2NxMG5JSnBVVG9uRmdzREFRUU1HQ2c4VTJ5Rm5yYk0zdTM0L3YvNjhlVFN2YWFOZEZ0RExoMFBCZ0VDQ0JJaE5FbGhlcFNzdzlmbzlQei8vZmJxMnNhd2wzNWxUVGNrRkFrREFRVU5HaXhBVjNDSm9yclA0ZkQ1L3Y3NTcrSFB1YUtKYjFkQUt4b05CUUVEQ1JRa04wMWxmNWl3eDlycTl2My8vUFRuMThPc2szcGhTVE1oRWdnQ0FRWVBIUzlFVzNTTnByN1M1UEw3Ly83NDdkN0x0cDZFYTFNOEtCZ0xCQUVEQ3hjbk8xRnFnNXkweXQzczkvNy8rL0xsMUwrb2ozWmRSVEFlRUFZQ0FnY1JJREpJWDNpU3FzSFc1L1A4Ly8zMjY5dklzcG1BWjA4NEpSVUtBd0VFREJrcVBsVnVoNkM0enVEditmNy8rdkRpMEx1a2kzRlpRUzBiRGdVQkFnZ1RJelpMWTMyV3JzWFo2Zlg5Ly96MTZkakVycFY4WTBzMUloTUlBZ0VGRGh3dFFsbHlpNlM4MGVQeCt2LysrZTdnemJlZ2gyMVZQaW9aREFRQkF3b1dKamxQYUlHYXNzamM2L2Y5Ly92ejV0WEJxcEY0WDBjeUh4RUhBZ0lHRUI0eFJsMTJrS2pBMU9YeisvLys5K3pkeXJTYmdtbFJPaVlXQ2dNQkJBd1lLVDFUYklXZXRzemY3dmorLy9yeDVOSzlwbzF6VzBNdUhROEdBUUlJRWlFMFNtSjdsS3pEMStqMC9QLzk5dXJheHJDWGZtVk5OeU1VQ1FNQkJRMGJMRUJYY0ltaXVzL2g4UG4rL3ZudjRjKzVvb2x2Vno4ckdnMEZBUU1KRlNRM1RtWi9tTERIMnVyMi9mLzg5T2ZYd3F5VGVtRkpNeUVTQndJQkJnOGRMMFJiZEk2bXZ0UGs4dnYvL3ZqdDNzdTFuWVJyVXp3b0Z3c0VBUU1MRnljN1VXcURuTFRLM2UzMy92Lzc4dVhUdjZpUGRWMUZNQjRRQmdFQ0J4RWdNa2hnZVpLcndkYm44L3ovL2ZicjI4aXhtWUJuVHpnbEZRb0RBUVFOR1NvL1ZXNkhvTGpPNE8vNS92LzY4T0xRdTZPTGNWaEJMUnNPQlFFQ0NSTWpOa3hrZlphdnhkbnA5ZjMvL1BYbzJNU3RsWHhqU3pVaUV3Z0NBUVVPSEMxQ1duS01wYnpSNC9INi8vNzU3dC9OdDUrR2JWUStLUmtNQkFFRENoWW1PVkJvZ1pxeXlkenI5LzMvKy9QbTFjQ3BrWGRlUnpFZkVRY0NBZ2NRSHpGR1huZVFxY0RVNWZQNy8vMzM3TnpKczV1Q2FWQTZKaFlLQXdFRURCZ3BQVlJzaFo2MnpOL3UrUDcvK3ZIajByMmxqWE5hUXk0Y0R3WUJBZ2dTSVRSS1ludVVyY1BYNlBUOC8vMzI2dHJHcjVkK1pVdzJJeFFKQWdFRkRSc3NRRmh3aXFPNnorTHcrdjcrK2UvaHpybWhpRzlXUHlzYURRVUJBd2tWSkRoT1puK1lzY2ZhNnZiOS8vejA1OWJDcTVONVlFa3pJQklIQWdFR0R4MHZSRngxanFlKzArVHkrLy8rK08zZXk3V2RoR3RTUENnWEN3UUJBd3NYSnp0U2FvT2R0Y3JkN2ZqKy8vdnk1ZE8vcDQ5MVhFVXdIaEFHQVFJSEVTQXlTR0I1a3F2QzF1ZjAvUC85OXV2YnlMR1pnR2RPT0NVVkNnTUJCQTBaS2o5V2JvaWh1TTdnNy9uKy92cnc0dEM3bzRweFdFRXNHdzRGQVFJSkZDTTJUR1I5bHEvRjJlbjEvZi84OWVqWXhLMlZmR0pLTlNJVENBSUJCUTRjTGtKYWM0eWx2TkhqOGZyLy92anUzODIzbjRadFZEMHBHUXdFQVFNS0ZpWTVVR2lCbTdQSjNPejMvZi83OCtiVndLbVJkMTVITVI4UkJ3SUNCeEFmTVVaZWQ1Q3B3TlRtOC92Ly9mZnMzTW16bTRKcFVEb21GZ29EQVFRTUdDazlWR3lHbjdmTTMrNzQvdi82OGVQU3ZhV01jMXBETGh3UEJnRUNDQk1pTkVwaWU1U3R4TmpvOVB6Ly9mWHEyY2F2bDM1a1REWWpGQWtDQVFVT0d5eEJXSEdLbzdyUTR2RDYvdjc1NytIT3VhR0liMVkvS3hvTkJBRURDUlVrT0U1bWY1bXh4OXZyOXYzLy9QVG4xc0tyazNsZ1NETWdFZ2NDQVFZUEhTOUVYSFdPcDc3VDVQTDcvLzc0N2Q3THRaMkVhMUk3S0JjTEJBRUVDeGNuTzFKcWhKMjF5OTd0K1A3LysvTGwwNzZuam5WY1JTOGVFQVlCQWdjU0lETklZSG1TcThMVzUvVDgvLzMyNjl2SHNabUFaazQ0SlJVSkF3RUVEUm9yUDFadmlLRzV6dUR2K2Y3Kyt2RGkwTHVqaW5GWVFTd2JEZ1VCQWdrVUl6Wk1aSDJYcjhYWjZmWDkvL3oxNk5qRXJaVjdZa28wSWhNSUFnRUZEeHd1UTFwempLVzgwZVB4K3YvKytPN2Z6TGVmaG0xVVBTa1lEQVFCQXdvV0pqcFFhSUticzhuYzdQZjkvL3Z6NXRYQXFaQjNYa1l4SHhFSEFnSUhFUjh4Umw1M2tLbkExZWJ6Ky8vOTkremN5Yk9iZ21oUU9pWVdDZ01CQkF3WUtUMVViWWFmdDh6Zjd2aisvL3J4NDlHOHBZeHpXa011SEE4RkFRSUlFeUkwU21KN2xhM0UyT2oxL1AvOTllblp4YStYZldSTU5pTVVDUUlCQlE0YkxFRlljWXFqdTlEaThQcisvdm52NE02NW9ZaHZWajhyR2cwRUFRTUpGU1U0VG1hQW1iSEgyK3YyL2YvODlPZld3cXVTZVdCSU15QVNCd0lCQmhBZUwwVmNkWTZudnRQbDh2di8vdmp0M3N1MW5ZUnFVanNuRndzRUFRUUxGeWc3VW11RW5iWEwzdTM0L3YvNzh1VFR2cWVPZFZ4RUx4MFBCZ0VDQnhJZ00waGdlWk9yd3RibjlQei8vZmJxMjhleG1YOW1UamdrRlFrREFRUU5HaXMvVm0rSW9ibk80ZS81L3Y3NjhPTFF1cU9LY1ZoQkxCc09CUUVDQ1JRak5reGtmcGV2eHRucTlmMy8vUFRvMk1TdGxIdGlTalFpRXdnQ0FRWVBIQzVEV25PTXBiM1M0L0g2Ly83NDd0L010NStHYkZROUtSZ01CQUVEQ2hZbU9sQnBncHV6eWR6czkvMy8rL1BtMU1DcGtIZGVSakVmRUFjQ0FnY1JIekZIWG5lUnFjRFY1dlA3Ly8zMzdOekpzNXVCYUZBNUpoWUtBd0VFREJrcFBWUnRocCszemQvdStQNy8rdkhqMGJ5bGpITmFRaTRjRGdVQkFnZ1RJalZLWW55VnJjVFk2UFg4Ly8zMTZkbkZyNVo5WkV3Mkl4UUpBZ0VGRGhzc1FWaHhpcU83ME9Mdyt2NysrZS9nenJpaGlHNVdQeW9aRFFRQkF3b1ZKVGhPWjRDWnNjamI2L2I5Ly96MDU5YkNxNUo1WUVneUlCRUhBZ0VHRUI0d1JWeDFqNmUvMCtYeSsvLysrTzNkeXJXZGcycFNPeWNYQ3dNQkJBc1hLRHhTYTRTZHRjdmU3ZmorLy92eTVOTytwNDUxWEVRdkhROEdBUUlIRWlBelNXQjVrNnZDMXVmMC9QLzk5dXJheDdHWWYyWk9PQ1FWQ1FNQkJRMGFLejlXYjRpaHVjN2g3L24rL3ZydzRzKzZvNHB3V0VBc0d3MEZBUUlKRkNNMlRHVitsNi9HMnVyMi9mLzg5T2pYdzYyVWUySktOQ0VTQ0FJQkJnOGNMa05hYzQybHZkTGo4ZnIvL3ZqdTM4eTJub1ZzVkQwcEdBd0VBUU1LRmlZNlVHbUNtN1BKM2V6My9mLzc4K1hVd0ttUWQxNUdNUjhRQndJQ0J4RWZNVWRlZDVHcHdkWG04L3YvL2ZmcjNNbXltb0ZvVURrbUZnb0RBUVFNR1NrK1ZHMkduN2ZOMys3NS92LzY4ZVBSdktXTWNsbENMUndPQlFFQ0NCTWlOVXRqZkpXdXhOanA5ZnovL2ZYcDJjV3ZsbjFrVERZakV3a0NBUVVPR3kxQldIR0xvN3ZRNHZENi8vNzU3K0RPdUtDSGJsVS9LaGtOQkFFRENoVWxPRTluZ0pteHlOdnI5djMvL1BQbjFzR3JrbmxnU0RJZ0VRY0NBUVlRSGpCRlhYV1BxTC9UNWZMNy8vNzM3ZDNLdEp5RGFsRTdKeGNMQXdFRUN4Z29QRk5yaEoyMXk5N3QrUDcvKy9MazA3Nm1qblJiUkM4ZER3WUJBZ2NTSVROSllYcVRyTUxYNS9UOC8vMzI2dHJIc0poL1prNDNKQlVKQXdFRkRSb3JRRmR2aWFLNXorSHYrZjcrK2ZEaHo3cWlpWEJYUUN3YkRRVUJBd2tVSkRkTlpYNlhzTWJhNnZiOS8vejA2TmZEckpSN1lVbzBJUklJQWdFR0R4MHVRMXR6amFhOTB1VHgrdi8rK083ZnpMYWVoV3hUUFNrWURBUUJBd29XSmpwUmFZS2J0TXJkN1BmKy8vdno1ZFRBcUpCMlhVWXhIaEFHQWdJSEVSOHlSMTk0a2FyQjFlYnorLy85OSt2Y3lMS2FnV2hQT1NZV0NnTUJCQXdaS2o1VmJZZWd0ODNnN3ZuKy8vcng0OUc4cEl0eVdVSXRIQTRGQVFJSUV5STFTMk44bGE3RTJPbjEvUC85OWVuWnhhNldmV05MTmlNVENBSUJCUTRiTFVGWmNZdWt1OURpOFByLy92bnY0TTY0b0lkdVZUNHFHUXdFQVFNS0ZTVTRUMmVBbWJMSTIrdjIvZi84OCtmV3dhcVNlRjlJTWlBUkJ3SUNCaEFlTUVWZGRvK292OVRsOHZ2Ly92ZnMzY3EwbklOcVVUc25Gd3NEQVFRTEdDZzhVMnVGbnJiTDN1MzQvdi83OHVUU3ZxYU5kRnRFTHgwUEJnRUNDQkloTTBsaGVwT3N3OWZuOVB6Ly9mYnEyc2V3bUg5bFRUY2tGQWtEQVFVTkdpdEFWMitKb3JuUDRlLzUvdjc1OE9IUHVxS0pjRmRBTEJvTkJRRURDUlFrTjAxbGZwZXd4dHJxOXYzLy9QVG8xOE9zbEhwaFNUUWhFZ2dDQVFZUEhTNURXM1NOcHIzUzVQSDYvLzc0N2Q3TXRwNkZiRk04S0JnTUJBRURDeFluT2xGcGdweTB5dDNzOS83LysvTGwxTCtvajNaZFJqQWVFQVlDQWdjUkh6SkhYM2lScXNIVjV2UDgvLzMzNjl6SXNwcUJaMDg1SlJVS0F3RUVEQmtxUGxWdGg2QzR6ZUR1K2Y3Lyt2SGowYnlraTNKWlFpMGNEZ1VCQWdnVElqVkxZM3lWcnNYWTZmWDgvL3oxNmRuRnJwWjhZMHMxSWhNSUFnRUZEaHN0UWxseWk2UzcwZUx3K3YvKytlN2d6YmlnaDI1VlBpb1pEQVFCQXdvVkpUbFBaNENhc3NqYjYvZjkvL3p6NXRYQnFwRjRYMGN5SUJFSEFnSUdFQjR3UlYxMmo2aS8xT1h5Ky8vKzkremR5clNjZzJsUk95Y1hDd01CQkFzWUtEeFRhNFdldHN6ZTdmaisvL3Z4NU5LOXBvMTBXMFF2SFE4R0FRSUlFaUUwU1dGNms2ekQxK2owL1AvOTl1cmF4ckNZZm1WTk55UVVDUU1CQlEwYUswQlhjSW1pdXMvaDcvbisvdm52NGMrNm9vbHdWMEFyR2cwRkFRTUpGQ1EzVFdWK21MREcydXIyL2YvODlPalh3NnlUZW1GSk5DRVNDQUlCQmc4ZEwwUmJkSTJtdmRMazhmdi8vdmp0M3N5Mm5vVnJVendvR0FzRUFRTUxGeWM3VVdtRG5MVEszZXozL3YvNzh1WFV2NmlQZGwxRk1CNFFCZ0lDQnhFZ01rZGZlSkdxd2RYbTgvei8vZmZyMjhpeW1vQm5UemtsRlFvREFRUU1HU28rVlc2SG9Mak40Tzc1L3YvNjhPTFJ1NlNMY2xsQ0xSc09CUUVDQ0JNaU5VdGpmSmF1eGRucDlmei8vUFhwMk1XdWxYeGpTelVpRXdnQ0FRVU9IQzFDV1hLTHBMelI0L0g2Ly83NTd1RE51S0NIYlZVK0toa01CQUVEQ2hZbE9VOW5nWnF5eU56cjkvMy8vUFBtMWNHcWtYaGZSeklmRVFjQ0FnWVFIakJHWFhhUHFML1U1Zkw3Ly83MzdOM0t0SnlDYVZFNkp4WUxBd0VFREJnb1BGTnNoWjYyek43dCtQNy8rdkhrMHIybWpYUmJReTRkRHdZQkFnZ1NJVFJKWVhxVXJNUFg2UFQ4Ly8zMjZ0ckdzSmQrWlUwM0pCUUpBd0VGRFJvc1FGZHdpYUs2eitIdytmNysrZS9oejdtaWlXOVhRQ3NhRFFVQkF3a1VKRGROWlgrWXNNZmE2dmI5Ly96MDU5ZkRySk42WVVreklSSUlBZ0VHRHgwdlJGdDBqYWErMHVUeSsvLysrTzNleTdhZWhHdFRQQ2dZQ3dRQkF3c1hKenRSYW9PY3RNcmQ3UGYrLy92eTVkUy9xSTkyWFVVd0hoQUdBZ0lIRVNBeVNGOTRrcXJCMXVmei9QLzk5dXZieUxLWmdHZFBPQ1VWQ2dNQkJBd1pLajVWYm9lZ3VNN2c3L24rLy9ydzR0QzdwSXR4V1VFdEd3NEZBUUlJRXlNMlMyTjlscTdGMmVuMS9mLzg5ZW5ZeEs2VmZHTkxOU0lUQ0FJQkJRNGNMVUpaY291a3ZOSGo4ZnIvL3ZudTRNMjNvSWR0VlQ0cUdRd0VBUU1LRmlZNVQyaUJtckxJM092My9mLzc4K2JWd2FxUmVGOUhNaDhSQndJQ0JoQWVNVVpkZHBDb3dOVGw4L3YvL3ZmczNjcTBtNEpwVVRvbUZnb0RBUVFNR0NrOVUyeUZucmJNMys3NC92LzY4ZVRTdmFhTmMxdERMaDBQQmdFQ0NCSWhORXBpZTVTc3c5Zm85UHovL2ZicTJzYXdsMzVsVFRjakZBa0RBUVVOR3l4QVYzQ0pvcnJQNGZENS92NzU3K0hQdWFLSmIxYy9LeG9OQlFFRENSVWtOMDVtZjVpd3g5cnE5djMvL1BUbjE4S3NrM3BoU1RNaEVnY0NBUVlQSFM5RVczU09wNzdUNVBMNy8vNzQ3ZDdMdFoyRWExSThLQmNMQkFFREN4Y25PMUZxZzV5MHl0M3Q5LzcvKy9MbDA3K29qM1ZkUlRBZUVBWUJBZ2NSSURKSVlIbVNxOEhXNS9QOC8vMzI2OXZJc1ptQVowODRKUlVLQXdFRURSa3FQMVZ1aDZDNHp1RHYrZjcvK3ZEaTBMdWppM0ZZUVMwYkRnVUJBZ2tUSXpaTVpIMldyOFhaNmZYOS8vejE2TmpFclpWOFkwczFJaE1JQWdFRkRod3RRbHB5aktXODBlUHgrdi8rK083ZnpiZWZobTFVUGlrWkRBUUJBd29XSmpsUWFJR2FzOG5jNi9mOS8vdno1dFhBcVpGM1hrY3hIeEVIQWdJSEVCOHhSbDUza0tuQTFPWHorLy85OSt6Y3liT2JnbWxRT2lZV0NnTUJCQXdZS1QxVWJJV2Z0c3pmN3ZqKy8vcng0OUs5cFkxeldrTXVIQThHQVFJSUVpRTBTbUo3bEszRDErajAvUC85OXVyYXhxK1hmbVZNTmlNVUNRSUJCUTBiTEVCWWNJcWp1cy9pOFByKy92bnY0YzY1b1lodlZqOHJHZzBGQVFNSkZTUTRUbVovbUxISDJ1cjIvZi84OU9mV3dxdVRlV0JKTXlBU0J3SUJCZzhkTDBSY2RZNm52dFBrOHZ2Ly92anQzc3UxbllSclVqd29Gd3NFQVFNTEZ5YzdVbXFEbmJYSzNlMzQvdi83OHVYVHY2ZVBkVnhGTUI0UUJnRUNCeEVnTWtoZ2VaS3J3dGJuOVB6Ly9mYnIyOGl4bVlCblRqZ2xGUW9EQVFRTkdTby9WbTZJb2JqTzRPLzUvdjc2OE9MUXU2T0tjVmhCTEJzT0JRRUNDUlFqTmt4a2ZaYXZ4ZG5wOWYzLy9QWG8yTVN0bFh0aVNqVWlFd2dDQVFVT0hDNUNXbk9NcGJ6UjQvSDYvLzc0N3QvTnQ1K0diVlE5S1JrTUJBRURDaFltT1ZCb2dadXp5ZHpzOS8zLysvUG0xY0Nwa1hkZVJ6RWZFUWNDQWdjUUh6RkdYbmVRcWNEVTV2UDcvLzMzN056SnM1dUNhVkE2SmhZS0F3RUVEQmdwUFZSc2hwKzN6Ti91K1A3Lyt2SGowcjJsakhOYVF5NGNEd1lCQWdnVElqUktZbnVVcmNUWTZQVDgvLzMxNnRuR3I1ZCtaRXcySXhRSkFnRUZEaHNzUVZoeGlxTzYwT0x3K3Y3KytlL2h6cm1oaUc5V1B5c2FEUVFCQXdrVkpEaE9abitac2NmYjYvYjkvL3owNTliQ3E1TjVZRWd6SUJJSEFnRUdEeDB2UkZ4MWpxZSswK1R5Ky8vKytPM2V5N1dkaEd0U095Z1hDd1FCQkFzWEp6dFNhb1NkdGN2ZTdmaisvL3Z5NWRPK3A0NTFYRVV2SGhBR0FRSUhFaUF6U0dCNWtxdkMxdWYwL1AvOTl1dmJ4N0daZ0daT09DVVZDUU1CQkEwYUt6OVdiNGlodWM3ZzcvbisvdnJ3NHRDN280cHhXRUVzR3c0RkFRSUpGQ00yVEdSOWw2L0YyZW4xL2YvODllall4SzJWZTJKS05DSVRDQUlCQlE4Y0xrTmFjNHlsdk5Iajhmci8vdmp1Mzh5M240WnRWRDBwR0F3RUFRTUtGaVk2VUdpQ203UEozT3ozL2YvNzgrYlZ3S21RZDE1R01SOFJCd0lDQnhFZk1VWmVkNUNwd05YbTgvdi8vZmZzM01tem00Sm9VRG9tRmdvREFRUU1HQ2s5VkcyR243Zk0zKzc0L3YvNjhlUFJ2S1dNYzFwRExod1BCUUVDQ0JNaU5FcGllNVd0eE5qbzlmei8vZlhwMmNXdmwzMWtURFlqRkFrQ0FRVU9HeXhCV0hHS283dlE0dkQ2L3Y3NTcrRE91YUdJYjFZL0t4b05CQUVEQ1JVbE9FNW1nSm14eDl2cjl2My8vUFRuMXNLcmtubGdTRE1nRWdjQ0FRWVFIaTlGWEhXT3A3N1Q1Zkw3Ly83NDdkN0x0WjJFYWxJN0p4Y0xCQUVFQ3hjb08xSnJoSjIxeTk3dCtQNy8rL0xrMDc2bmpuVmNSQzhkRHdZQkFnY1NJRE5JWUhtVHE4TFc1L1Q4Ly8zMjZ0dkhzWmwvWms0NEpCVUpBd0VFRFJvclAxWnZpS0c1enVIditmNysrdkRpMExxamluRllRU3diRGdVQkFna1VJelpNWkg2WHI4Ylo2dlg5Ly96MDZOakVyWlI3WWtvMEloTUlBZ0VHRHh3dVExcHpqS1c5MHVQeCt2LysrTzdmekxlZmhteFVQU2tZREFRQkF3b1dKanBRYVlLYnM4bmM3UGY5Ly92ejV0VEFxWkIzWGtZeEh4QUhBZ0lIRVI4eFIxNTNrYW5BMWVieisvLzk5K3pjeWJPYmdXaFFPU1lXQ2dNQkJBd1pLVDFVYllhZnQ4M2Y3dmorLy9yeDQ5RzhwWXh6V2tJdUhBNEZBUUlJRXlJMVNtSjhsYTNFMk9qMS9QLzk5ZW5aeGErV2ZXUk1OaU1VQ1FJQkJRNGJMRUZZY1lxanU5RGk4UHIrL3ZudjRNNjRvWWh1Vmo4cUdRMEVBUU1LRlNVNFRtZUFtYkhJMit2Mi9mLzg5T2ZXd3F1U2VXQklNaUFSQndJQkJoQWVNRVZjZFkrbnY5UGw4dnYvL3ZqdDNjcTFuWU5xVWpzbkZ3c0RBUVFMRnlnOFVtdUVuYlhMM3UzNC92Lzc4dVRUdnFlT2RWeEVMeDBQQmdFQ0J4SWdNMGxnZVpPcnd0Ym45UHovL2ZicTJzZXhtSDltVGpna0ZRa0RBUVVOR2lzL1ZtK0lvYm5PNGUvNS92NzY4T0xQdXFPS2NGaEFMQnNOQlFFQ0NSUWpOa3hsZnBldnh0cnE5djMvL1BUbzE4T3RsSHRpU2pRaEVnZ0NBUVlQSEM1RFduT05wYjNTNC9INi8vNzQ3dC9NdHA2RmJGUTlLUmdNQkFFRENoWW1PbEJwZ3B1enlkM3M5LzMvKy9QbDFNQ3BrSGRlUmpFZkVBY0NBZ2NSSHpGSFhuZVJxY0hWNXZQNy8vMzM2OXpKc3BxQmFGQTVKaFlLQXdFRURCa3BQbFJ0aHArM3pkL3UrZjcvK3ZIajBieWxqSEpaUWkwY0RnVUJBZ2dUSWpWTFkzeVZyc1RZNmZYOC8vMzE2ZG5GcjVaOVpFdzJJeE1KQWdFRkRoc3RRVmh4aTZTNzBPTHcrdi8rK2UvZ3pyaWdoMjVWUHlvWkRRUUJBd29WSlRoUFo0Q1pzY2piNi9iOS8veno1OWJCcTVKNVlFZ3lJQkVIQWdFR0VCNHdSVjExajZpLzArWHkrLy8rOSszZHlyU2NnMnBST3ljWEN3TUJCQXNZS0R4VGE0U2R0Y3ZlN2ZqKy8vdnk1Tk8rcG81MFcwUXZIUThHQVFJSUVpRXpTV0Y2azZ6QzErZjAvUC85OXVyYXg3Q1lmMlpOTnlRVkNRTUJCUTBhSzBCWGI0bWl1Yy9oNy9uKy92bnc0Yys2b29sd1YwQXNHdzBGQVFNSkZDUTNUV1YrbDdERzJ1cjIvZi84OU9qWHc2eVVlMkZLTkNFU0NBSUJCZzhkTGtOYmM0Mm12ZExrOGZyLy92anUzOHkybm9Wc1V6MHBHQXdFQVFNS0ZpWTZVV21DbTdUSzNlejMnICtcbiAgICAgICAgICAgICcvdi83OCtYVXdLaVFkbDFHTVI0UUJnSUNCeEVmTWtkZmVKR3F3ZFhtOC92Ly9mZnIzTWl5bW9Gb1R6a21GZ29EQVFRTUdTbytWVzJIb0xmTjRPNzUvdi82OGVQUnZLU0xjbGxDTFJ3T0JRRUNDQk1pTlV0amZKV3V4TmpwOWZ6Ly9mWHAyY1d1bG4xalN6WWpFd2dDQVFVT0d5MUJXWEdMcEx2UTR2RDYvLzc1NytET3VLQ0hibFUrS2hrTUJBRURDaFVsT0U5bmdKbXl5TnZyOXYzLy9QUG4xc0dxa25oZlNESWdFUWNDQWdZUUhqQkZYWGFQcUwvVTVmTDcvLzczN04zS3RKeURhbEU3SnhjTEF3RUVDeGdvUEZOcmhaNjJ5OTd0K1A3LysvTGswcjZtalhSYlJDOGREd1lCQWdnU0lUTkpZWHFUck1QWDUvVDgvLzMyNnRySHNKaC9aVTAzSkJRSkF3RUZEUm9yUUZkdmlhSzV6K0h2K2Y3KytmRGh6N3FpaVhCWFFDd2FEUVVCQXdrVUpEZE5aWDZYc01iYTZ2YjkvL3owNk5mRHJKUjZZVWswSVJJSUFnRUdEeDB1UTF0MGphYTkwdVR4K3YvKytPM2V6TGFlaFd4VFBDZ1lEQVFCQXdzV0p6cFJhWUtjdE1yZDdQZisvL3Z5NWRTL3FJOTJYVVl3SGhBR0FnSUhFUjh5UjE5NGthckIxZWJ6L1AvOTkrdmN5TEthZ1dkUE9TVVZDZ01CQkF3WktqNVZiWWVndU0zZzd2bisvL3J4NDlHOHBJdHlXVUl0SEE0RkFRSUlFeUkxUzJOOGxhN0YyT24xL1AvODllblp4YTZXZkdOTE5TSVRDQUlCQlE0YkxVSlpjb3VrdTlIaThQci8vdm51NE0yNG9JZHVWVDRxR1F3RUFRTUtGU1U1VDJlQW1yTEkyK3YzL2YvODgrYlZ3YXFSZUY5SE1pQVJCd0lDQmhBZU1FVmRkbytvdjlUbDh2di8vdmZzM2NxMG5JTnBVVHNuRndzREFRUUxHQ2c4VTJ1Rm5yYk0zdTM0L3YvNzhlVFN2YWFOZEZ0RUx4MFBCZ0VDQ0JJaE5FbGhlcE9zdzlmbzlQei8vZmJxMnNhd21INWxUVGNrRkFrREFRVU5HaXRBVjNDSm9yclA0ZS81L3Y3NTcrSFB1cUtKY0ZkQUt4b05CUUVEQ1JRa04wMWxmcGl3eHRycTl2My8vUFRvMThPc2szcGhTVFFoRWdnQ0FRWVBIUzlFVzNTTnByM1M1UEg3Ly83NDdkN010cDZGYTFNOEtCZ0xCQUVEQ3hjbk8xRnBnNXkweXQzczkvNy8rL0xsMUwrb2ozWmRSVEFlRUFZQ0FnY1JJREpIWDNpUnFzSFY1dlA4Ly8zMzY5dklzcHFBWjA4NUpSVUtBd0VFREJrcVBsVnVoNkM0emVEdStmNy8rdkRpMGJ1a2kzSlpRaTBiRGdVQkFnZ1RJalZMWTN5V3JzWFo2Zlg4Ly96MTZkakZycFY4WTBzMUloTUlBZ0VGRGh3dFFsbHlpNlM4MGVQeCt2LysrZTdnemJpZ2gyMVZQaW9aREFRQkF3b1dKVGxQWjRHYXNzamM2L2Y5Ly96ejV0WEJxcEY0WDBjeUh4RUhBZ0lHRUI0d1JsMTJqNmkvMU9YeSsvLys5K3pkeXJTY2dtbFJPaWNXQ3dNQkJBd1lLRHhUYklXZXRzemU3ZmorLy9yeDVOSzlwbzEwVzBNdUhROEdBUUlJRWlFMFNXRjZsS3pEMStqMC9QLzk5dXJheHJDWGZtVk5OeVFVQ1FNQkJRMGFMRUJYY0ltaXVzL2g4UG4rL3ZudjRjKzVvb2x2VjBBckdnMEZBUU1KRkNRM1RXVi9tTERIMnVyMi9mLzg5T2ZYdzZ5VGVtRkpNeUVTQ0FJQkJnOGRMMFJiZEkybXZ0TGs4dnYvL3ZqdDNzdTJub1JyVXp3b0dBc0VBUU1MRnljN1VXcURuTFRLM2V6My92Lzc4dVhVdjZpUGRsMUZNQjRRQmdJQ0J4RWdNa2hmZUpLcXdkYm44L3ovL2ZicjI4aXltWUJuVHpnbEZRb0RBUVFNR1NvK1ZXNkhvTGpPNE8vNS92LzY4T0xRdTZTTGNWbEJMUnNPQlFFQ0NCTWpOa3RqZlphdXhkbnA5ZjMvL1BYcDJNU3VsWHhqU3pVaUV3Z0NBUVVPSEMxQ1dYS0xwTHpSNC9INi8vNzU3dUROdDZDR2JWVStLaGtNQkFFRENoWW1PVTlvZ1pxeXlOenI5LzMvKy9QbTFjR3FrWGhmUnpJZkVRY0NBZ1lRSGpGR1hYYVFxTURVNWZQNy8vNzM3TjNLdEp1Q2FWRTZKaFlLQXdFRURCZ3BQVk5zaFo2MnpOL3UrUDcvK3ZIazByMm1qWE5iUXk0ZER3WUJBZ2dTSVRSS1ludVVyTVBYNlBUOC8vMzI2dHJHc0pkK1pVMDNJeFFKQXdFRkRSc3NRRmR3aWFLNnorSHcrZjcrK2UvaHo3bWlpVzlXUHlzYURRVUJBd2tWSkRkT1puK1lzTWZhNnZiOS8vejA1OWZDckpONllVa3pJUklIQWdFR0R4MHZSRnQwanFlKzArVHkrLy8rK08zZXk3V2RoR3RTUENnWEN3UUJBd3NYSnp0UmFvT2N0TXJkN2ZmKy8vdnk1ZE8vcUk5MVhFVXdIaEFHQVFJSEVTQXlTR0I1a3F2QjF1ZnovUC85OXV2YnlMR1pnR2RQT0NVVkNnTUJCQTBaS2o5VmJvZWd1TTdnNy9uKy8vcnc0dEM3bzR0eFdFRXRHdzRGQVFJSkV5TTJUR1I5bHEvRjJlbjEvZi84OWVqWXhLMlZmR05MTlNJVENBSUJCUTRjTFVKYWNveWx2TkhqOGZyLy92anUzODIzbjRadFZENHBHUXdFQVFNS0ZpWTVVR2lCbXJQSjNPdjMvZi83OCtiVndLbVJkMTVITVI4UkJ3SUNCeEFmTVVaZWQ1Q3B3TlRsOC92Ly9mZnMzTW16bTRKcFVEb21GZ29EQVFRTUdDazlWR3lGbjdiTTMrNzQvdi82OGVQU3ZhV05jMXBETGh3UEJnRUNDQkloTkVwaWU1U3R3OWZvOVB6Ly9mYnEyc2F2bDM1bFREWWpGQWtDQVFVTkd5eEFXSENLbzdyUDR2RDYvdjc1NytIT3VhR0liMVkvS3hvTkJRRURDUlVrT0U1bWY1aXh4OXJxOXYzLy9QVG4xc0tyazNsZ1NUTWdFZ2NDQVFZUEhTOUVYSFdPcDc3VDVQTDcvLzc0N2Q3THRaMkVhMUk4S0JjTEJBRURDeGNuTzFKcWc1MjF5dDN0K1A3LysvTGwwNytuajNWY1JUQWVFQVlCQWdjUklESklZSG1TcThMVzUvVDgvLzMyNjl2SXNabUFaMDQ0SlJVS0F3RUVEUmtxUDFadWlLRzR6dUR2K2Y3Kyt2RGkwTHVqaW5GWVFTd2JEZ1VCQWdrVUl6Wk1aSDJXcjhYWjZmWDkvL3oxNk5qRXJaVjdZa28xSWhNSUFnRUZEaHd1UWxwempLVzgwZVB4K3YvKytPN2Z6YmVmaG0xVVBTa1pEQVFCQXdvV0pqbFFhSUdiczhuYzdQZjkvL3Z6NXRYQXFaRjNYa2N4SHhFSEFnSUhFQjh4Umw1M2tLbkExT2J6Ky8vOTkremN5Yk9iZ21sUU9pWVdDZ01CQkF3WUtUMVViSWFmdDh6Zjd2aisvL3J4NDlLOXBZeHpXa011SEE4R0FRSUlFeUkwU21KN2xLM0UyT2owL1AvOTllblp4cStYZm1STU5pTVVDUUlCQlE0YkxFRlljWXFqdXREaThQcisvdm52NGM2NW9ZaHZWajhyR2cwRUFRTUpGU1E0VG1aL21iSEgyK3YyL2YvODlPZld3cXVUZVdCSU15QVNCd0lCQmc4ZEwwUmNkWTZudnRQazh2di8vdmp0M3N1MW5ZUnJVanNvRndzRUFRUUxGeWM3VW1xRW5iWEwzdTM0L3YvNzh1WFR2cWVPZFZ4Rkx4NFFCZ0VDQnhJZ00waGdlWktyd3RibjlQei8vZmJyMjhleG1ZQm1UamdsRlFrREFRUU5HaXMvVm0rSW9ibk80Ty81L3Y3NjhPTFF1Nk9LY1ZoQkxCc09CUUVDQ1JRak5reGtmWmV2eGRucDlmMy8vUFhvMk1TdGxYdGlTalFpRXdnQ0FRVVBIQzVEV25PTXBielI0L0g2Ly83NDd0L010NStHYlZROUtSZ01CQUVEQ2hZbU9sQm9ncHV6eWR6czkvMy8rL1BtMWNDcGtIZGVSakVmRVFjQ0FnY1JIekZHWG5lUXFjRFY1dlA3Ly8zMzdOekpzNXVDYUZBNkpoWUtBd0VFREJncFBWUnRocCszek4vdStQNy8rdkhqMGJ5bGpITmFReTRjRHdVQkFnZ1RJalJLWW51VnJjVFk2UFg4Ly8zMTZkbkZyNWQ5WkV3Mkl4UUpBZ0VGRGhzc1FWaHhpcU83ME9Mdyt2NysrZS9nenJtaGlHOVdQeXNhRFFRQkF3a1ZKVGhPWm9DWnNjZmI2L2I5Ly96MDU5YkNxNUo1WUVneklCSUhBZ0VHRUI0dlJWeDFqcWUrMCtYeSsvLysrTzNleTdXZGhHcFNPeWNYQ3dRQkJBc1hLRHRTYTRTZHRjdmU3ZmorLy92eTVOTytwNDUxWEVRdkhROEdBUUlIRWlBelNHQjVrNnZDMXVmMC9QLzknO1xuICAgICAgICBhdWRpby5wbGF5KCk7XG4gICAgfSBcblxuICAgIGZ1bmN0aW9uIGNyZWF0ZURpYWxvZyAodGl0bGUsIG1lc3NhZ2UsIGJ1dHRvbnMsIGFkZElucHV0LCBkZWZhdWx0VGV4dCwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIGRsZ1dyYXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgZGxnV3JhcC5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgICAgIGRsZ1dyYXAuc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gICAgICAgIGRsZ1dyYXAuc3R5bGUuaGVpZ2h0ID0gJzEwMCUnO1xuICAgICAgICBkbGdXcmFwLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICdyZ2JhKDAsMCwwLDAuMjUpJztcbiAgICAgICAgZGxnV3JhcC5zdHlsZS56SW5kZXggPSAnMTAwMDAwJztcbiAgICAgICAgZGxnV3JhcC5zdHlsZS50b3AgPSAnMCc7XG4gICAgICAgIGRsZ1dyYXAuc3R5bGUubGVmdCA9ICcwJztcbiAgICAgICAgZGxnV3JhcC5zdHlsZS5tYXJnaW4gPSAnMCc7XG4gICAgICAgIGRsZ1dyYXAuc3R5bGUucGFkZGluZyA9ICcwJztcblxuICAgICAgICB2YXIgZGxnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGRsZy5zdHlsZS5oZWlnaHQgPSAnYXV0byc7XG4gICAgICAgIGRsZy5zdHlsZS5vdmVyZmxvdyA9ICdhdXRvJztcbiAgICAgICAgZGxnLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICd3aGl0ZSc7XG4gICAgICAgIGRsZy5zdHlsZS5wb3NpdGlvbiA9ICdyZWxhdGl2ZSc7XG4gICAgICAgIGRsZy5zdHlsZS5saW5lSGVpZ2h0ID0gJzInO1xuXG4gICAgICAgIGRsZy5zdHlsZS50b3AgPSAnNTAlJzsgLy8gY2VudGVyIHZlcnRpY2FsbHlcbiAgICAgICAgZGxnLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGVZKC01MCUpJztcbiAgICAgICAgZGxnLnN0eWxlLm1hcmdpbiA9ICcwcHggMzAlJztcbiAgICAgICAgZGxnLnN0eWxlLnBhZGRpbmcgPSAnMTBweCc7XG4gICAgICAgIGRsZy5zdHlsZS5ib3hTaGFkb3cgPSAnMnB4IDJweCA1cHggMXB4IHJnYmEoMCwgMCwgMCwgMC4yKSc7XG4gICAgICAgIGRsZy5zdHlsZS5ib3JkZXJSYWRpdXMgPSAnMnB4JztcblxuICAgICAgICB2YXIgdGl0bGVTdHlsZSA9ICdib3JkZXItdG9wLWxlZnQtcmFkaXVzOiAycHg7IGJvcmRlci10b3AtcmlnaHQtcmFkaXVzOiAycHg7IHBvc2l0aW9uOiByZWxhdGl2ZTsgYmFja2dyb3VuZC1jb2xvcjogIzAzYTlmNDsgY29sb3I6ICNmZmY7IGZvbnQtc2l6ZTogMTZweDsgcGFkZGluZzogN3B4IDEwcHg7IGhlaWdodDogMjRweDsgdGV4dC10cmFuc2Zvcm06IG5vbmU7IGZvbnQtZmFtaWx5OiBcXCdIZWx2ZXRpY2EgTmV1ZVxcJywgXFwnUm9ib3RvXFwnLCBcXCdTZWdvZSBVSVxcJywgXFwnc2Fucy1zZXJpZlxcJzsgbGluZS1oZWlnaHQ6IDI0cHg7JztcbiAgICAgICAgLy8gbmVlZGVkIHRvIHJlbW92ZSB3aGl0ZSBsaW5lIGF0IHRoZSB0b3Agb2YgdGhlIHRpdGxlIGNvbnRhaW5lclxuICAgICAgICBpZiAoYWRkSW5wdXQpIHtcbiAgICAgICAgICAgIHRpdGxlU3R5bGUgKz0gJ21hcmdpbjogLTExcHggLTEwcHggLTEwcHg7JztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRpdGxlU3R5bGUgKz0gJ21hcmdpbjogLTEwcHg7JztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGRpYWxvZyBsYXlvdXQgdGVtcGxhdGVcbiAgICAgICAgdmFyIGRsZ0h0bWwgPSAnPHNlY3Rpb24gaWQ9XCJsYmwtdGl0bGVcIiBzdHlsZT1cIicgKyB0aXRsZVN0eWxlICsgJ1wiPjwvc2VjdGlvbj4nICtcbiAgICAgICAgJzxzZWN0aW9uIGlkPVwibGJsLW1lc3NhZ2VcIiBzdHlsZT1cImNvbG9yOiAjM2M4YjllOyB0ZXh0LXRyYW5zZm9ybTogbm9uZTsgZm9udC1zaXplOiAxNHB4OyBtYXJnaW46IDIwcHggMCAwIDA7IGZvbnQtZmFtaWx5OiBcXCdIZWx2ZXRpY2EgTmV1ZVxcJywgXFwnUm9ib3RvXFwnLCBcXCdTZWdvZSBVSVxcJywgXFwnc2Fucy1zZXJpZlxcJztcIj48L3NlY3Rpb24+JztcblxuICAgICAgICBpZiAoYWRkSW5wdXQpIHtcbiAgICAgICAgICAgIGRsZ0h0bWwgKz0gJzxpbnB1dCBpZD1cInByb21wdC1pbnB1dFwiIHN0eWxlPVwid2lkdGg6IDk3LjUlOyBib3JkZXI6IDFweCBzb2xpZCAjZDNkM2QzOyBmb250LXdlaWdodDogbm9ybWFsOyBjb2xvcjogIzU1NTsgcGFkZGluZzogMSU7XCIvPic7XG4gICAgICAgIH1cbiAgICAgICAgZGxnLmlubmVySFRNTCA9IGRsZ0h0bWw7XG5cbiAgICAgICAgZGxnLnF1ZXJ5U2VsZWN0b3IoJyNsYmwtdGl0bGUnKS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0aXRsZSkpO1xuICAgICAgICBkbGcucXVlcnlTZWxlY3RvcignI2xibC1tZXNzYWdlJykuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUobWVzc2FnZSkpO1xuICAgICAgICBpZiAoYWRkSW5wdXQpIHtcbiAgICAgICAgICAgIGRsZy5xdWVyeVNlbGVjdG9yKCcjcHJvbXB0LWlucHV0Jykuc2V0QXR0cmlidXRlKCdwbGFjZWhvbGRlcicsIGRlZmF1bHRUZXh0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIG1ha2VCdXR0b25DYWxsYmFjayhpZHgpIHtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlO1xuICAgICAgICAgICAgICAgIGlmIChhZGRJbnB1dCkge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IGRsZy5xdWVyeVNlbGVjdG9yKCcjcHJvbXB0LWlucHV0JykudmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGRsZ1dyYXAucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChkbGdXcmFwKTtcblxuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoYWRkSW5wdXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKGZhbHNlLCB7IGlucHV0MTogdmFsdWUsIGJ1dHRvbkluZGV4OiBpZHggfSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhmYWxzZSwgaWR4KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBhZGRCdXR0b24oaWR4LCBsYWJlbCkge1xuICAgICAgICAgICAgdmFyIGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICAgICAgYnV0dG9uLnN0eWxlLmZsb2F0ID0gJ3JpZ2h0JztcbiAgICAgICAgICAgIGJ1dHRvbi5zdHlsZS5taW5XaWR0aCA9ICcxMTJweCc7XG4gICAgICAgICAgICBidXR0b24uc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUtYmxvY2snO1xuICAgICAgICAgICAgYnV0dG9uLnN0eWxlLnRleHRBbGlnbiA9ICdjZW50ZXInO1xuICAgICAgICAgICAgYnV0dG9uLnN0eWxlLnpvb20gPSAnMSc7XG4gICAgICAgICAgICBidXR0b24uc3R5bGUuZm9udEZhbWlseSA9ICdcXCdIZWx2ZXRpY2EgTmV1ZVxcJywgXFwnUm9ib3RvXFwnLCBcXCdTZWdvZSBVSVxcJywgXFwnc2Fucy1zZXJpZlxcJyc7XG4gICAgICAgICAgICBidXR0b24uc3R5bGUub3ZlcmZsb3cgPSAndmlzaWJsZSc7XG4gICAgICAgICAgICBidXR0b24uc3R5bGUuYm9yZGVyID0gJzFweCBzb2xpZCAjZDNkM2QzJztcbiAgICAgICAgICAgIGJ1dHRvbi5zdHlsZS5iYWNrZ3JvdW5kID0gJyNlNmU2ZTYnO1xuICAgICAgICAgICAgYnV0dG9uLnN0eWxlLmZvbnRXZWlnaHQgPSAnbm9ybWFsJztcbiAgICAgICAgICAgIGJ1dHRvbi5zdHlsZS5jb2xvciA9ICcjNTU1JztcbiAgICAgICAgICAgIGJ1dHRvbi5zdHlsZS5tYXJnaW4gPSAnMTBweCAwIDEwcHggMTBweCc7XG4gICAgICAgICAgICBidXR0b24uc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInO1xuICAgICAgICAgICAgYnV0dG9uLnN0eWxlLmZvbnRTaXplID0gJzE0cHgnO1xuICAgICAgICAgICAgYnV0dG9uLnN0eWxlLm1pbkhlaWdodCA9ICczMHB4JztcbiAgICAgICAgICAgIGJ1dHRvbi50YWJJbmRleCA9IGlkeDtcbiAgICAgICAgICAgIGJ1dHRvbi5vbmNsaWNrID0gbWFrZUJ1dHRvbkNhbGxiYWNrKGlkeCArIDEpO1xuICAgICAgICAgICAgYnV0dG9uLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGxhYmVsKSk7XG4gICAgICAgICAgICBkbGcuYXBwZW5kQ2hpbGQoYnV0dG9uKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHJldmVyc2Ugb3JkZXIgaXMgdXNlZCBzaW5jZSB3ZSBhbGlnbiBidXR0b25zIHRvIHRoZSByaWdodFxuICAgICAgICBmb3IgKHZhciBpZHggPSBidXR0b25zLmxlbmd0aCAtIDE7IGlkeCA+PSAwOyBpZHgtLSkge1xuICAgICAgICAgICAgYWRkQnV0dG9uKGlkeCwgYnV0dG9uc1tpZHhdKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGRsZ1dyYXAuYXBwZW5kQ2hpbGQoZGxnKTtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChkbGdXcmFwKTtcblxuICAgICAgICAvLyBtYWtlIHN1cmUgaW5wdXQgZmllbGQgaXMgdW5kZXIgZm9jdXNcbiAgICAgICAgaWYgKGFkZElucHV0KSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGRsZy5xdWVyeVNlbGVjdG9yKCcjcHJvbXB0LWlucHV0JykuZm9jdXMoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGRsZ1dyYXA7XG4gICAgfVxufTtcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChtZXNzYWdlcykge1xuICAgIHZhciBpc1dlYmtpdCA9IHdpbmRvdy53ZWJraXRSZXF1ZXN0RmlsZVN5c3RlbSAmJiB3aW5kb3cud2Via2l0UmVzb2x2ZUxvY2FsRmlsZVN5c3RlbVVSTDtcblxuICAgIHJldHVybiBpc1dlYmtpdCA/IHJlcXVpcmUoJy4vYXBwLWhvc3Qtd2Via2l0LWhhbmRsZXJzJykgOiByZXF1aXJlKCcuL2FwcC1ob3N0LW5vbi13ZWJraXQtaGFuZGxlcnMnKTtcbn07XG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIEJhc2VkIG9uIEFwYWNoZSBDb3Jkb3ZhIGdlb2xvY2F0aW9uIHBsdWdpbidzIG5hdmlnYXRvci5nZW9sb2NhdGlvbiBpbXBsZW1lbnRhdGlvbi5cbi8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vYXBhY2hlL2NvcmRvdmEtcGx1Z2luLWdlb2xvY2F0aW9uL2Jsb2IvbWFzdGVyL3d3dy9nZW9sb2NhdGlvbi5qc1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCd1dGlscycpLFxuICAgIFBvc2l0aW9uRXJyb3IgPSByZXF1aXJlKCcuL1Bvc2l0aW9uRXJyb3InKSxcbiAgICBQb3NpdGlvbiA9IHJlcXVpcmUoJy4vUG9zaXRpb24nKTtcblxudmFyIHRpbWVycyA9IHt9OyAgIC8vIGxpc3Qgb2YgdGltZXJzIGluIHVzZVxuXG4vLyBSZXR1cm5zIGRlZmF1bHQgcGFyYW1zLCBvdmVycmlkZXMgaWYgcHJvdmlkZWQgd2l0aCB2YWx1ZXNcbmZ1bmN0aW9uIHBhcnNlUGFyYW1ldGVycyhvcHRpb25zKSB7XG4gICAgdmFyIG9wdCA9IHtcbiAgICAgICAgbWF4aW11bUFnZTogMCxcbiAgICAgICAgZW5hYmxlSGlnaEFjY3VyYWN5OiBmYWxzZSxcbiAgICAgICAgdGltZW91dDogSW5maW5pdHlcbiAgICB9O1xuXG4gICAgaWYgKG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKG9wdGlvbnMubWF4aW11bUFnZSAhPT0gdW5kZWZpbmVkICYmICFpc05hTihvcHRpb25zLm1heGltdW1BZ2UpICYmIG9wdGlvbnMubWF4aW11bUFnZSA+IDApIHtcbiAgICAgICAgICAgIG9wdC5tYXhpbXVtQWdlID0gb3B0aW9ucy5tYXhpbXVtQWdlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLmVuYWJsZUhpZ2hBY2N1cmFjeSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBvcHQuZW5hYmxlSGlnaEFjY3VyYWN5ID0gb3B0aW9ucy5lbmFibGVIaWdoQWNjdXJhY3k7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMudGltZW91dCAhPT0gdW5kZWZpbmVkICYmICFpc05hTihvcHRpb25zLnRpbWVvdXQpKSB7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy50aW1lb3V0IDwgMCkge1xuICAgICAgICAgICAgICAgIG9wdC50aW1lb3V0ID0gMDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgb3B0LnRpbWVvdXQgPSBvcHRpb25zLnRpbWVvdXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gb3B0O1xufVxuXG4vLyBSZXR1cm5zIGEgdGltZW91dCBmYWlsdXJlLCBjbG9zZWQgb3ZlciBhIHNwZWNpZmllZCB0aW1lb3V0IHZhbHVlIGFuZCBlcnJvciBjYWxsYmFjay5cbmZ1bmN0aW9uIGNyZWF0ZVRpbWVvdXQoZXJyb3JDYWxsYmFjaywgdGltZW91dCkge1xuICAgIHZhciB0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0KTtcbiAgICAgICAgdCA9IG51bGw7XG4gICAgICAgIGVycm9yQ2FsbGJhY2soe1xuICAgICAgICAgICAgY29kZTogUG9zaXRpb25FcnJvci5USU1FT1VULFxuICAgICAgICAgICAgbWVzc2FnZTogJ1Bvc2l0aW9uIHJldHJpZXZhbCB0aW1lZCBvdXQuJ1xuICAgICAgICB9KTtcbiAgICB9LCB0aW1lb3V0KTtcbiAgICByZXR1cm4gdDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAobWVzc2FnZXMsIGV4ZWMpIHtcbiAgICB2YXIgZ2VvbG9jYXRpb24gPSB7XG4gICAgICAgIGxhc3RQb3NpdGlvbjogbnVsbCwgLy8gcmVmZXJlbmNlIHRvIGxhc3Qga25vd24gKGNhY2hlZCkgcG9zaXRpb24gcmV0dXJuZWRcblxuICAgICAgICAvKipcbiAgICAgICAgICogQXN5bmNocm9ub3VzbHkgYWNxdWlyZXMgdGhlIGN1cnJlbnQgcG9zaXRpb24uXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHN1Y2Nlc3NDYWxsYmFjayAgICBUaGUgZnVuY3Rpb24gdG8gY2FsbCB3aGVuIHRoZSBwb3NpdGlvbiBkYXRhIGlzIGF2YWlsYWJsZVxuICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBlcnJvckNhbGxiYWNrICAgICAgVGhlIGZ1bmN0aW9uIHRvIGNhbGwgd2hlbiB0aGVyZSBpcyBhbiBlcnJvciBnZXR0aW5nIHRoZSBoZWFkaW5nIHBvc2l0aW9uLiAoT1BUSU9OQUwpXG4gICAgICAgICAqIEBwYXJhbSB7UG9zaXRpb25PcHRpb25zfSBvcHRpb25zICAgICBUaGUgb3B0aW9ucyBmb3IgZ2V0dGluZyB0aGUgcG9zaXRpb24gZGF0YS4gKE9QVElPTkFMKVxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0Q3VycmVudFBvc2l0aW9uOiBmdW5jdGlvbiAoc3VjY2Vzc0NhbGxiYWNrLCBlcnJvckNhbGxiYWNrLCBvcHRpb25zKSB7XG4gICAgICAgICAgICBvcHRpb25zID0gcGFyc2VQYXJhbWV0ZXJzKG9wdGlvbnMpO1xuXG4gICAgICAgICAgICAvLyBUaW1lciB2YXIgdGhhdCB3aWxsIGZpcmUgYW4gZXJyb3IgY2FsbGJhY2sgaWYgbm8gcG9zaXRpb24gaXMgcmV0cmlldmVkIGZyb20gbmF0aXZlXG4gICAgICAgICAgICAvLyBiZWZvcmUgdGhlIFwidGltZW91dFwiIHBhcmFtIHByb3ZpZGVkIGV4cGlyZXNcbiAgICAgICAgICAgIHZhciB0aW1lb3V0VGltZXIgPSB7dGltZXI6IG51bGx9O1xuXG4gICAgICAgICAgICB2YXIgd2luID0gZnVuY3Rpb24gKHApIHtcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dFRpbWVyLnRpbWVyKTtcbiAgICAgICAgICAgICAgICBpZiAoISh0aW1lb3V0VGltZXIudGltZXIpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFRpbWVvdXQgYWxyZWFkeSBoYXBwZW5lZCwgb3IgbmF0aXZlIGZpcmVkIGVycm9yIGNhbGxiYWNrIGZvclxuICAgICAgICAgICAgICAgICAgICAvLyB0aGlzIGdlbyByZXF1ZXN0LlxuICAgICAgICAgICAgICAgICAgICAvLyBEb24ndCBjb250aW51ZSB3aXRoIHN1Y2Nlc3MgY2FsbGJhY2suXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHBvcyA9IG5ldyBQb3NpdGlvbihcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGF0aXR1ZGU6IHAubGF0aXR1ZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBsb25naXR1ZGU6IHAubG9uZ2l0dWRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgYWx0aXR1ZGU6IHAuYWx0aXR1ZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBhY2N1cmFjeTogcC5hY2N1cmFjeSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRpbmc6IHAuaGVhZGluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlbG9jaXR5OiBwLnZlbG9jaXR5LFxuICAgICAgICAgICAgICAgICAgICAgICAgYWx0aXR1ZGVBY2N1cmFjeTogcC5hbHRpdHVkZUFjY3VyYWN5XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIChwLnRpbWVzdGFtcCA9PT0gdW5kZWZpbmVkID8gbmV3IERhdGUoKSA6ICgocC50aW1lc3RhbXAgaW5zdGFuY2VvZiBEYXRlKSA/IHAudGltZXN0YW1wIDogbmV3IERhdGUocC50aW1lc3RhbXApKSlcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGdlb2xvY2F0aW9uLmxhc3RQb3NpdGlvbiA9IHBvcztcbiAgICAgICAgICAgICAgICBzdWNjZXNzQ2FsbGJhY2socG9zKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgZmFpbCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRUaW1lci50aW1lcik7XG4gICAgICAgICAgICAgICAgdGltZW91dFRpbWVyLnRpbWVyID0gbnVsbDtcbiAgICAgICAgICAgICAgICB2YXIgZXJyID0gbmV3IFBvc2l0aW9uRXJyb3IoZS5jb2RlLCBlLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIGlmIChlcnJvckNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yQ2FsbGJhY2soZXJyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvLyBDaGVjayBvdXIgY2FjaGVkIHBvc2l0aW9uLCBpZiBpdHMgdGltZXN0YW1wIGRpZmZlcmVuY2Ugd2l0aCBjdXJyZW50IHRpbWUgaXMgbGVzcyB0aGFuIHRoZSBtYXhpbXVtQWdlLCB0aGVuIGp1c3RcbiAgICAgICAgICAgIC8vIGZpcmUgdGhlIHN1Y2Nlc3MgY2FsbGJhY2sgd2l0aCB0aGUgY2FjaGVkIHBvc2l0aW9uLlxuICAgICAgICAgICAgaWYgKGdlb2xvY2F0aW9uLmxhc3RQb3NpdGlvbiAmJiBvcHRpb25zLm1heGltdW1BZ2UgJiYgKCgobmV3IERhdGUoKSkuZ2V0VGltZSgpIC0gZ2VvbG9jYXRpb24ubGFzdFBvc2l0aW9uLnRpbWVzdGFtcC5nZXRUaW1lKCkpIDw9IG9wdGlvbnMubWF4aW11bUFnZSkpIHtcbiAgICAgICAgICAgICAgICBzdWNjZXNzQ2FsbGJhY2soZ2VvbG9jYXRpb24ubGFzdFBvc2l0aW9uKTtcbiAgICAgICAgICAgICAgICAvLyBJZiB0aGUgY2FjaGVkIHBvc2l0aW9uIGNoZWNrIGZhaWxlZCBhbmQgdGhlIHRpbWVvdXQgd2FzIHNldCB0byAwLCBlcnJvciBvdXQgd2l0aCBhIFRJTUVPVVQgZXJyb3Igb2JqZWN0LlxuICAgICAgICAgICAgfSBlbHNlIGlmIChvcHRpb25zLnRpbWVvdXQgPT09IDApIHtcbiAgICAgICAgICAgICAgICBmYWlsKHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogUG9zaXRpb25FcnJvci5USU1FT1VULFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAndGltZW91dCB2YWx1ZSBpbiBQb3NpdGlvbk9wdGlvbnMgc2V0IHRvIDAgYW5kIG5vIGNhY2hlZCBQb3NpdGlvbiBvYmplY3QgYXZhaWxhYmxlLCBvciBjYWNoZWQgUG9zaXRpb24gb2JqZWN0XFwncyBhZ2UgZXhjZWVkcyBwcm92aWRlZCBQb3NpdGlvbk9wdGlvbnMubWF4aW11bUFnZSBwYXJhbWV0ZXIuJ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIC8vIE90aGVyd2lzZSB3ZSBoYXZlIHRvIGNhbGwgaW50byBuYXRpdmUgdG8gcmV0cmlldmUgYSBwb3NpdGlvbi5cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMudGltZW91dCAhPT0gSW5maW5pdHkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIHRpbWVvdXQgdmFsdWUgd2FzIG5vdCBzZXQgdG8gSW5maW5pdHkgKGRlZmF1bHQpLCB0aGVuXG4gICAgICAgICAgICAgICAgICAgIC8vIHNldCB1cCBhIHRpbWVvdXQgZnVuY3Rpb24gdGhhdCB3aWxsIGZpcmUgdGhlIGVycm9yIGNhbGxiYWNrXG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIG5vIHN1Y2Nlc3NmdWwgcG9zaXRpb24gd2FzIHJldHJpZXZlZCBiZWZvcmUgdGltZW91dCBleHBpcmVkLlxuICAgICAgICAgICAgICAgICAgICB0aW1lb3V0VGltZXIudGltZXIgPSBjcmVhdGVUaW1lb3V0KGZhaWwsIG9wdGlvbnMudGltZW91dCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBpcyBoZXJlIHNvIHRoZSBjaGVjayBpbiB0aGUgd2luIGZ1bmN0aW9uIGRvZXNuJ3QgbWVzcyBzdHVmZiB1cFxuICAgICAgICAgICAgICAgICAgICAvLyBtYXkgc2VlbSB3ZWlyZCBidXQgdGhpcyBndWFyYW50ZWVzIHRpbWVvdXRUaW1lciBpc1xuICAgICAgICAgICAgICAgICAgICAvLyBhbHdheXMgdHJ1dGh5IGJlZm9yZSB3ZSBjYWxsIGludG8gbmF0aXZlXG4gICAgICAgICAgICAgICAgICAgIHRpbWVvdXRUaW1lci50aW1lciA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGV4ZWMod2luLCBmYWlsLCAnR2VvbG9jYXRpb24nLCAnZ2V0TG9jYXRpb24nLCBbb3B0aW9ucy5lbmFibGVIaWdoQWNjdXJhY3ksIG9wdGlvbnMubWF4aW11bUFnZV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRpbWVvdXRUaW1lcjtcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFzeW5jaHJvbm91c2x5IHdhdGNoZXMgdGhlIGdlb2xvY2F0aW9uIGZvciBjaGFuZ2VzIHRvIGdlb2xvY2F0aW9uLiAgV2hlbiBhIGNoYW5nZSBvY2N1cnMsXG4gICAgICAgICAqIHRoZSBzdWNjZXNzQ2FsbGJhY2sgaXMgY2FsbGVkIHdpdGggdGhlIG5ldyBsb2NhdGlvbi5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gc3VjY2Vzc0NhbGxiYWNrICAgIFRoZSBmdW5jdGlvbiB0byBjYWxsIGVhY2ggdGltZSB0aGUgbG9jYXRpb24gZGF0YSBpcyBhdmFpbGFibGVcbiAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZXJyb3JDYWxsYmFjayAgICAgIFRoZSBmdW5jdGlvbiB0byBjYWxsIHdoZW4gdGhlcmUgaXMgYW4gZXJyb3IgZ2V0dGluZyB0aGUgbG9jYXRpb24gZGF0YS4gKE9QVElPTkFMKVxuICAgICAgICAgKiBAcGFyYW0ge1Bvc2l0aW9uT3B0aW9uc30gb3B0aW9ucyAgICAgVGhlIG9wdGlvbnMgZm9yIGdldHRpbmcgdGhlIGxvY2F0aW9uIGRhdGEgc3VjaCBhcyBmcmVxdWVuY3kuIChPUFRJT05BTClcbiAgICAgICAgICogQHJldHVybiBTdHJpbmcgICAgICAgICAgICAgICAgICAgICAgIFRoZSB3YXRjaCBpZCB0aGF0IG11c3QgYmUgcGFzc2VkIHRvICNjbGVhcldhdGNoIHRvIHN0b3Agd2F0Y2hpbmcuXG4gICAgICAgICAqL1xuICAgICAgICB3YXRjaFBvc2l0aW9uOiBmdW5jdGlvbiAoc3VjY2Vzc0NhbGxiYWNrLCBlcnJvckNhbGxiYWNrLCBvcHRpb25zKSB7XG4gICAgICAgICAgICBvcHRpb25zID0gcGFyc2VQYXJhbWV0ZXJzKG9wdGlvbnMpO1xuXG4gICAgICAgICAgICB2YXIgaWQgPSB1dGlscy5jcmVhdGVVVUlEKCk7XG5cbiAgICAgICAgICAgIC8vIFRlbGwgZGV2aWNlIHRvIGdldCBhIHBvc2l0aW9uIEFTQVAsIGFuZCBhbHNvIHJldHJpZXZlIGEgcmVmZXJlbmNlIHRvIHRoZSB0aW1lb3V0IHRpbWVyIGdlbmVyYXRlZCBpbiBnZXRDdXJyZW50UG9zaXRpb25cbiAgICAgICAgICAgIHRpbWVyc1tpZF0gPSBnZW9sb2NhdGlvbi5nZXRDdXJyZW50UG9zaXRpb24oc3VjY2Vzc0NhbGxiYWNrLCBlcnJvckNhbGxiYWNrLCBvcHRpb25zKTtcblxuICAgICAgICAgICAgdmFyIGZhaWwgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lcnNbaWRdLnRpbWVyKTtcbiAgICAgICAgICAgICAgICB2YXIgZXJyID0gbmV3IFBvc2l0aW9uRXJyb3IoZS5jb2RlLCBlLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIGlmIChlcnJvckNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yQ2FsbGJhY2soZXJyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB2YXIgd2luID0gZnVuY3Rpb24gKHApIHtcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZXJzW2lkXS50aW1lcik7XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMudGltZW91dCAhPT0gSW5maW5pdHkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGltZXJzW2lkXS50aW1lciA9IGNyZWF0ZVRpbWVvdXQoZmFpbCwgb3B0aW9ucy50aW1lb3V0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHBvcyA9IG5ldyBQb3NpdGlvbihcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGF0aXR1ZGU6IHAubGF0aXR1ZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBsb25naXR1ZGU6IHAubG9uZ2l0dWRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgYWx0aXR1ZGU6IHAuYWx0aXR1ZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBhY2N1cmFjeTogcC5hY2N1cmFjeSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRpbmc6IHAuaGVhZGluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlbG9jaXR5OiBwLnZlbG9jaXR5LFxuICAgICAgICAgICAgICAgICAgICAgICAgYWx0aXR1ZGVBY2N1cmFjeTogcC5hbHRpdHVkZUFjY3VyYWN5XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIChwLnRpbWVzdGFtcCA9PT0gdW5kZWZpbmVkID8gbmV3IERhdGUoKSA6ICgocC50aW1lc3RhbXAgaW5zdGFuY2VvZiBEYXRlKSA/IHAudGltZXN0YW1wIDogbmV3IERhdGUocC50aW1lc3RhbXApKSlcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGdlb2xvY2F0aW9uLmxhc3RQb3NpdGlvbiA9IHBvcztcbiAgICAgICAgICAgICAgICBzdWNjZXNzQ2FsbGJhY2socG9zKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGV4ZWMod2luLCBmYWlsLCAnR2VvbG9jYXRpb24nLCAnYWRkV2F0Y2gnLCBbaWQsIG9wdGlvbnMuZW5hYmxlSGlnaEFjY3VyYWN5XSk7XG5cbiAgICAgICAgICAgIHJldHVybiBpZDtcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIENsZWFycyB0aGUgc3BlY2lmaWVkIGhlYWRpbmcgd2F0Y2guXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBpZCAgICAgICBUaGUgSUQgb2YgdGhlIHdhdGNoIHJldHVybmVkIGZyb20gI3dhdGNoUG9zaXRpb25cbiAgICAgICAgICovXG4gICAgICAgIGNsZWFyV2F0Y2g6IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICAgICAgaWYgKGlkICYmIHRpbWVyc1tpZF0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lcnNbaWRdLnRpbWVyKTtcbiAgICAgICAgICAgICAgICB0aW1lcnNbaWRdLnRpbWVyID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgZXhlYyhudWxsLCBudWxsLCAnR2VvbG9jYXRpb24nLCAnY2xlYXJXYXRjaCcsIFtpZF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIGdldFBlcm1pc3Npb246IGZ1bmN0aW9uIChzdWNjZXNzLCBmYWlsLCBhcmdzKSB7XG4gICAgICAgICAgICBzdWNjZXNzKCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgbmF2aWdhdG9yOiB7XG4gICAgICAgICAgICBnZW9sb2NhdGlvbjogZ2VvbG9jYXRpb25cbiAgICAgICAgfVxuICAgIH07XG59O1xuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gXG4vLyBodHRwczovL2dpdGh1Yi5jb20vYXBhY2hlL2NvcmRvdmEtcGx1Z2luLWdsb2JhbGl6YXRpb24vXG5cbi8vIHRoaXMgb2JqZWN0IGZpeGVzIHBsdWdpbiBsb2FkaW5nIG9uIHdpbmRvd3MgcGxhdGZvcm1cbm1vZHVsZS5leHBvcnRzID0ge1xuICAgIEdsb2JhbGl6YXRpb25Qcm94eToge1xuICAgICAgICBHbG9iYWxpemF0aW9uUHJveHk6IHtcbiAgICAgICAgICAgIHNldExvY2FsZTogZnVuY3Rpb24gKCkge31cbiAgICAgICAgfVxuICAgIH1cbn07XG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAobWVzc2FnZXMpIHtcbiAgICB2YXIgQnJvd3NlciA9IHJlcXVpcmUoJy4vaW5hcHAtYnJvd3NlcicpLFxuICAgICAgICBpbnN0YW5jZTtcblxuICAgIG1lc3NhZ2VzLmNhbGwoJ2luQXBwQnJvd3NlclNlbGVjdGVkJylcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICBCcm93c2VyLnNldERlZmF1bHRJbkFwcEJyb3dzZXIodmFsdWUpO1xuICAgICAgICB9KTtcblxuICAgIG1lc3NhZ2VzLm9uKCdpbmFwcGJyb3dzZXItc2VsZWN0ZWQnLCBmdW5jdGlvbiAoZXZlbnQsIHZhbHVlKSB7XG4gICAgICAgIEJyb3dzZXIuc2V0RGVmYXVsdEluQXBwQnJvd3Nlcih2YWx1ZSk7XG4gICAgfSk7XG5cbiAgICBmdW5jdGlvbiBleGVjdXRlKGZuTmFtZSkge1xuICAgICAgICBpZiAoIWluc3RhbmNlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZm4gPSBpbnN0YW5jZVtmbk5hbWVdLFxuICAgICAgICAgICAgYXJncztcblxuICAgICAgICBpZiAoT2JqZWN0LmtleXMoYXJndW1lbnRzKS5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAvLyByZW1vdmUgdGhlIGZpcnN0IGVsZW1lbnQgc2luY2UgaXQgaXMgdGhlIFwiZm5OYW1lXCIgcGFyYW1ldGVyXG4gICAgICAgICAgICBBcnJheS5wcm90b3R5cGUuc2hpZnQuYXBwbHkoYXJndW1lbnRzKTtcbiAgICAgICAgICAgIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZm4uYXBwbHkoaW5zdGFuY2UsIGFyZ3MpO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgICdJbkFwcEJyb3dzZXInOiB7XG4gICAgICAgICAgICAnb3Blbic6IGZ1bmN0aW9uIChzdWNjZXNzLCBmYWlsLCBhcmdzKSB7XG4gICAgICAgICAgICAgICAgaW5zdGFuY2UgPSBCcm93c2VyLmNyZWF0ZShzdWNjZXNzLCBmYWlsLCBhcmdzKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnc2hvdyc6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBleGVjdXRlKCdzaG93Jyk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ2Nsb3NlJzogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGV4ZWN1dGUoJ2Nsb3NlJyk7XG4gICAgICAgICAgICAgICAgaW5zdGFuY2UgPSBudWxsO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdpbmplY3RTY3JpcHRDb2RlJzogZnVuY3Rpb24gKHN1Y2Nlc3MsIGZhaWwsIGFyZ3MpIHtcbiAgICAgICAgICAgICAgICBleGVjdXRlKCdpbmplY3RTY3JpcHRDb2RlJywgc3VjY2VzcywgYXJncyk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ2luamVjdFNjcmlwdEZpbGUnOiBmdW5jdGlvbiAoc3VjY2VzcywgZmFpbCwgYXJncykge1xuICAgICAgICAgICAgICAgIGV4ZWN1dGUoJ2luamVjdFNjcmlwdEZpbGUnLCBzdWNjZXNzLCBhcmdzKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnaW5qZWN0U3R5bGVDb2RlJzogZnVuY3Rpb24gKHN1Y2Nlc3MsIGZhaWwsIGFyZ3MpIHtcbiAgICAgICAgICAgICAgICBleGVjdXRlKCdpbmplY3RTdHlsZUNvZGUnLCBzdWNjZXNzLCBhcmdzKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnaW5qZWN0U3R5bGVGaWxlJzogZnVuY3Rpb24gKHN1Y2Nlc3MsIGZhaWwsIGFyZ3MpIHtcbiAgICAgICAgICAgICAgICBleGVjdXRlKCdpbmplY3RTdHlsZUZpbGUnLCBzdWNjZXNzLCBhcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG59O1xuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9hcGFjaGUvY29yZG92YS1wbHVnaW4tbWVkaWEvXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG1lc3NhZ2VzKSB7XG5cbiAgICB2YXIgUGxheWVyID0gcmVxdWlyZSgnLi9wbGF5ZXInKTtcblxuICAgIHJldHVybiB7XG4gICAgICAgICdNZWRpYSc6IHtcbiAgICAgICAgICAgICdtZXNzYWdlQ2hhbm5lbCc6IGZ1bmN0aW9uIChzdWNjZXNzLCBmYWlsLCBhcmdzKSB7XG4gICAgICAgICAgICAgICAgLy8gaWdub3JlLCB0aGlzIGlzIG9ubHkgYXZhaWxhYmxlIGZvciBcImFuZHJvaWRcIiwgXCJhbWF6b24tZmlyZW9zXCIgYW5kIFwid2luZG93c3Bob25lXCJcbiAgICAgICAgICAgICAgICAvLyBwbGF0Zm9ybXMsIGFueSBvdGhlciBhY2Nlc3MgdG8gb25TdGF0dXMgY2FsbGJhY2sgaXMgZG9uZSB0aHJvdWdoXG4gICAgICAgICAgICAgICAgLy8gd2luZG93Lk1lZGlhLm9uU3RhdHVzXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ2NyZWF0ZSc6IGZ1bmN0aW9uIChzdWNjZXNzLCBmYWlsLCBhcmdzKSB7XG4gICAgICAgICAgICAgICAgLy8gYXJnc1swXTogaWQsIGFyZ3NbMV06IHNyY1xuICAgICAgICAgICAgICAgIFBsYXllci5jcmVhdGVJZk5lZWRlZChhcmdzWzBdLCBhcmdzWzFdKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnc3RhcnRQbGF5aW5nQXVkaW8nOiBmdW5jdGlvbiAoc3VjY2VzcywgZmFpbCwgYXJncykge1xuICAgICAgICAgICAgICAgIHZhciBwbGF5ZXIgPSBQbGF5ZXIuY3JlYXRlSWZOZWVkZWQoYXJnc1swXSwgYXJnc1sxXSk7XG4gICAgICAgICAgICAgICAgcGxheWVyLnN0YXJ0UGxheWluZyhhcmdzWzFdKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnc3RvcFBsYXlpbmdBdWRpbyc6IGZ1bmN0aW9uIChzdWNjZXNzLCBmYWlsLCBhcmdzKSB7XG4gICAgICAgICAgICAgICAgdmFyIHBsYXllciA9IFBsYXllci5nZXRCeUlkKGFyZ3NbMF0pO1xuICAgICAgICAgICAgICAgIGlmIChwbGF5ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgcGxheWVyLnN0b3BQbGF5aW5nKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdzZWVrVG9BdWRpbyc6IGZ1bmN0aW9uIChzdWNjZXNzLCBmYWlsLCBhcmdzKSB7XG4gICAgICAgICAgICAgICAgdmFyIHBsYXllciA9IFBsYXllci5nZXRCeUlkKGFyZ3NbMF0pO1xuICAgICAgICAgICAgICAgIGlmIChwbGF5ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgcGxheWVyLnNlZWtUb0F1ZGlvKGFyZ3NbMV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAncGF1c2VQbGF5aW5nQXVkaW8nOiBmdW5jdGlvbiAoc3VjY2VzcywgZmFpbCwgYXJncykge1xuICAgICAgICAgICAgICAgIHZhciBwbGF5ZXIgPSBQbGF5ZXIuZ2V0QnlJZChhcmdzWzBdKTtcbiAgICAgICAgICAgICAgICBpZiAocGxheWVyKSB7XG4gICAgICAgICAgICAgICAgICAgIHBsYXllci5wYXVzZVBsYXlpbmcoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ2dldEN1cnJlbnRQb3NpdGlvbkF1ZGlvJzogZnVuY3Rpb24gKHN1Y2Nlc3MsIGZhaWwsIGFyZ3MpIHtcbiAgICAgICAgICAgICAgICB2YXIgcGxheWVyID0gUGxheWVyLmdldEJ5SWQoYXJnc1swXSk7XG5cbiAgICAgICAgICAgICAgICBpZiAocGxheWVyKSB7XG4gICAgICAgICAgICAgICAgICAgIHBsYXllci5nZXRDdXJyZW50UG9zaXRpb24oc3VjY2VzcywgZmFpbCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzcygtMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdzdGFydFJlY29yZGluZ0F1ZGlvJzogZnVuY3Rpb24gKHN1Y2Nlc3MsIGZhaWwsIGFyZ3MpIHtcbiAgICAgICAgICAgICAgICB2YXIgcGxheWVyID0gUGxheWVyLmNyZWF0ZUlmTmVlZGVkKGFyZ3NbMF0pO1xuICAgICAgICAgICAgICAgIHBsYXllci5zdGFydFJlY29yZChhcmdzWzFdKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnc3RvcFJlY29yZGluZ0F1ZGlvJzogZnVuY3Rpb24gKHN1Y2Nlc3MsIGZhaWwsIGFyZ3MpIHtcbiAgICAgICAgICAgICAgICB2YXIgcGxheWVyID0gUGxheWVyLmdldEJ5SWQoYXJnc1swXSk7XG4gICAgICAgICAgICAgICAgaWYgKHBsYXllcikge1xuICAgICAgICAgICAgICAgICAgICBwbGF5ZXIuc3RvcFJlY29yZCh0cnVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ3BhdXNlUmVjb3JkaW5nQXVkaW8nOiBmdW5jdGlvbiAoc3VjY2VzcywgZmFpbCwgYXJncykge1xuICAgICAgICAgICAgICAgIHZhciBwbGF5ZXIgPSBQbGF5ZXIuZ2V0QnlJZChhcmdzWzBdKTtcbiAgICAgICAgICAgICAgICBpZiAocGxheWVyKSB7XG4gICAgICAgICAgICAgICAgICAgIHBsYXllci5zdG9wUmVjb3JkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ3Jlc3VtZVJlY29yZGluZ0F1ZGlvJzogZnVuY3Rpb24gKHN1Y2Nlc3MsIGZhaWwsIGFyZ3MpIHtcbiAgICAgICAgICAgICAgICB2YXIgcGxheWVyID0gUGxheWVyLmdldEJ5SWQoYXJnc1swXSk7XG4gICAgICAgICAgICAgICAgaWYgKHBsYXllcikge1xuICAgICAgICAgICAgICAgICAgICBwbGF5ZXIucmVzdW1lUmVjb3JkKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdyZWxlYXNlJzogZnVuY3Rpb24gKHN1Y2Nlc3MsIGZhaWwsIGFyZ3MpIHtcbiAgICAgICAgICAgICAgICB2YXIgaWQgPSBhcmdzWzBdLFxuICAgICAgICAgICAgICAgICAgICBwbGF5ZXIgPSBQbGF5ZXIuZ2V0QnlJZChpZCksXG4gICAgICAgICAgICAgICAgICAgIGV4aXN0cyA9ICEhcGxheWVyO1xuXG4gICAgICAgICAgICAgICAgaWYgKGV4aXN0cykge1xuICAgICAgICAgICAgICAgICAgICBwbGF5ZXIuZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgICAgICBQbGF5ZXIucmVtb3ZlQnlJZChpZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdzZXRWb2x1bWUnOiBmdW5jdGlvbiAoc3VjY2VzcywgZmFpbCwgYXJncykge1xuICAgICAgICAgICAgICAgIHZhciBwbGF5ZXIgPSBQbGF5ZXIuZ2V0QnlJZChhcmdzWzBdKTtcbiAgICAgICAgICAgICAgICBpZiAocGxheWVyKSB7XG4gICAgICAgICAgICAgICAgICAgIHBsYXllci5zZXRWb2x1bWUoYXJnc1sxXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdzZXRSYXRlJzogZnVuY3Rpb24gKHN1Y2Nlc3MsIGZhaWwsIGFyZ3MpIHtcbiAgICAgICAgICAgICAgICB2YXIgcGxheWVyID0gUGxheWVyLmdldEJ5SWQoYXJnc1swXSk7XG4gICAgICAgICAgICAgICAgaWYgKHBsYXllcikge1xuICAgICAgICAgICAgICAgICAgICBwbGF5ZXIuc2V0UmF0ZShhcmdzWzFdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ2dldEN1cnJlbnRBbXBsaXR1ZGVBdWRpbyc6IGZ1bmN0aW9uIChzdWNjZXNzLCBmYWlsLCBhcmdzKSB7XG4gICAgICAgICAgICAgICAgdmFyIHBsYXllciA9IFBsYXllci5nZXRCeUlkKGFyZ3NbMF0pLFxuICAgICAgICAgICAgICAgICAgICBhbXBsaXR1ZGUgPSAwO1xuXG4gICAgICAgICAgICAgICAgaWYgKHBsYXllcikge1xuICAgICAgICAgICAgICAgICAgICBhbXBsaXR1ZGUgPSBwbGF5ZXIuZ2V0Q3VycmVudEFtcGxpdHVkZShhcmdzWzFdKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBzdWNjZXNzKGFtcGxpdHVkZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xufTtcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXG52YXIgalF1ZXJ5ID0gcmVxdWlyZSgnanF1ZXJ5Lm1pbi5qcycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChtZXNzYWdlcykge1xuICAgIC8vIGluZGljYXRlcyB3aGV0aGVyIHZpYnJhdGlvbiB3YXMgY2FuY2VsbGVkXG4gICAgdmFyIHZpYnJhdGlvbkNhbmNlbGVkID0gZmFsc2U7XG5cbiAgICAvLyByZXByZXNlbnRzIGluZGV4IG9mIHRoZSB2aWJyYXRpb24gcGF0dGVybiBhcnJheSBcbiAgICB2YXIgY3VycmVudFZpYnJhdGlvbldpdGhQYXR0ZXJuSW5kZXg7XG5cbiAgICAvLyBpbmRpY2F0ZXMgd2hldGhlciB3ZSB3aWxsIG5lZWQgdG8gc3RvcCB2aWJyYXRpb24gZWZmZWN0IG9yIG5vdFxuICAgIHZhciBjdXJyZW50VmlicmF0aW9uTnVtID0gMDtcblxuICAgIG1lc3NhZ2VzLnJlZ2lzdGVyKCd2aWJyYXRlJywgZnVuY3Rpb24gKGV2ZW50LCBjYWxsYmFjaykge1xuICAgICAgICBpZiAoIXdpbmRvdy5uYXZpZ2F0b3IgJiYgIXdpbmRvdy5uYXZpZ2F0b3IudmlicmF0ZSkge1xuICAgICAgICAgICAgY2FsbGJhY2soJ25hdmlnYXRvci52aWJyYXRlIGlzIG5vdCBkZWZpbmVkJyk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgbXMgPSBwYXJzZUludChldmVudCwgMTApO1xuICAgICAgICB2YXIgc2Vjb25kcyA9IG1zIC8gMTAwMDtcbiAgICAgICAgY3VycmVudFZpYnJhdGlvbk51bSsrO1xuICAgICAgICB2aWJyYXRlKG1zKVxuICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGVycikgdGhyb3cgZXJyO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIGNvbnNvbGUubG9nKCd2aWJyYXRpbmcgZm9yICcgKyBzZWNvbmRzICsgJyBzZWNvbmQocyknKTtcbiAgICAgICAgY2FsbGJhY2soKTtcbiAgICB9KTtcblxuICAgIG1lc3NhZ2VzLnJlZ2lzdGVyKCd2aWJyYXRlV2l0aFBhdHRlcm4nLCBmdW5jdGlvbiAoZXZlbnQsIGNhbGxiYWNrKSB7XG4gICAgICAgIGlmICghd2luZG93Lm5hdmlnYXRvciAmJiAhd2luZG93Lm5hdmlnYXRvci52aWJyYXRlKSB7XG4gICAgICAgICAgICBjYWxsYmFjaygnbmF2aWdhdG9yLnZpYnJhdGUgaXMgbm90IGRlZmluZWQnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBwYXR0ZXJuID0gZXZlbnRbMF07XG4gICAgICAgIGN1cnJlbnRWaWJyYXRpb25XaXRoUGF0dGVybkluZGV4ID0gMDtcbiAgICAgICAgY29uc29sZS5sb2coJ3ZpYnJhdGluZyB3aXRoIHBhdHRlcm4gJyArIHBhdHRlcm4pO1xuICAgICAgICBjdXJyZW50VmlicmF0aW9uTnVtKys7XG4gICAgICAgIHZpYnJhdGVXaXRoUGF0dGVybihwYXR0ZXJuLCBjdXJyZW50VmlicmF0aW9uTnVtKVxuICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGVycikgdGhyb3cgZXJyO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIGNvbnNvbGUubG9nKGN1cnJlbnRWaWJyYXRpb25OdW0pO1xuICAgICAgICBjYWxsYmFjaygpO1xuICAgIH0pO1xuXG4gICAgbWVzc2FnZXMucmVnaXN0ZXIoJ2NhbmNlbFZpYnJhdGlvbicsIGZ1bmN0aW9uIChldmVudCwgY2FsbGJhY2spIHtcbiAgICAgICAgaWYgKCF3aW5kb3cubmF2aWdhdG9yICYmICF3aW5kb3cubmF2aWdhdG9yLnZpYnJhdGUpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKCduYXZpZ2F0b3IudmlicmF0ZSBpcyBub3QgZGVmaW5lZCcpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gY2FuY2VsVmlicmF0aW9uIGlzIG5vdCBzdXBwb3J0ZWQgb24gaW9zXG4gICAgICAgIGlmICh3aW5kb3cuY29yZG92YSAmJiB3aW5kb3cuY29yZG92YS5wbGF0Zm9ybUlkID09PSAnaW9zJykge1xuICAgICAgICAgICAgY2FsbGJhY2soJ05vdCBzdXBwb3J0ZWQgb24gaU9TJyk7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vdCBzdXBwb3J0ZWQgb24gaU9TJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyB0byBzdG9wIGV2ZXJ5IG90aGVyIHZpYnJhdGlvblxuICAgICAgICBjdXJyZW50VmlicmF0aW9uTnVtKys7XG5cbiAgICAgICAgLy8gcGFzcyAwIHRvIGNhbmNlbCB2aWJyYXRpb25cbiAgICAgICAgdmlicmF0ZSgwKVxuICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGVycikgdGhyb3cgZXJyO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIHZpYnJhdGlvbkNhbmNlbGVkID0gdHJ1ZTtcbiAgICAgICAgY29uc29sZS5sb2coJ2NhbmNlbGluZyB2aWJyYXRpb24nKTtcbiAgICAgICAgY2FsbGJhY2soKTtcbiAgICB9KTtcblxuICAgIGZ1bmN0aW9uIHZpYnJhdGUgKG1pbGxpc2Vjb25kcywgcGxhY2Vob2xkZXJOdW0pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIC8vIGluZGljYXRpbmcgd2hldGhlciB3ZSB3aWxsIG5lZWQgdG8gc3RvcCB2aWJyYXRpb24gZWZmZWN0IG9yIG5vdFxuICAgICAgICAgICAgbGV0IGtub3duVmlicmF0aW9uQ2FsbHNDb3VudCA9IHBsYWNlaG9sZGVyTnVtO1xuXG4gICAgICAgICAgICBjb25zdCBib2R5ID0galF1ZXJ5KCdib2R5Jyk7XG4gICAgICAgICAgICBsZXQgeCwgdGltZXM7XG5cbiAgICAgICAgICAgIC8vIGlmIHRoaXMgY2FsbCBpcyBjYW5jZWxWaWJyYXRpb24gLSBpbW1lZGlhdGVseSBzdG9wIHZpYnJhdGlvbiBhbmQgcmV0dXJuXG4gICAgICAgICAgICBpZiAobWlsbGlzZWNvbmRzID09PSAwKSB7XG4gICAgICAgICAgICAgICAgYm9keS5jc3Moe3Bvc2l0aW9uOiAnJywgbGVmdDogJycsIHRvcDogJyd9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBpbiB0aGUgY2FzZSB3ZSBjYWxsaW5nIHZpYnJhdGVXaXRoUGF0dGVybiBhZnRlciBjYW5jZWxsaW5nIHZpYnJhdGlvblxuICAgICAgICAgICAgdmlicmF0aW9uQ2FuY2VsZWQgPSBmYWxzZTtcblxuICAgICAgICAgICAgdGltZXMgPSBNYXRoLmZsb29yKG1pbGxpc2Vjb25kcyAvIDEwMCk7XG5cbiAgICAgICAgICAgIGJvZHkuY3NzKHtwb3NpdGlvbjogJ2ZpeGVkJ30pO1xuXG4gICAgICAgICAgICBmb3IgKHggPSAxOyB4IDw9IHRpbWVzOyB4KyspIHtcbiAgICAgICAgICAgICAgICBib2R5LmFuaW1hdGUoeyBsZWZ0OiAtMTAgfSwgNSwgZnVuY3Rpb24gKCkgeyBjaGVja0ZvclZpYnJhdGlvbihyZWplY3QsIGJvZHkpOyB9KVxuICAgICAgICAgICAgICAgICAgICAuYW5pbWF0ZSh7IGxlZnQ6IDAgfSwgMSlcbiAgICAgICAgICAgICAgICAgICAgLmFuaW1hdGUoeyBsZWZ0OiAxMCB9LCA1KVxuICAgICAgICAgICAgICAgICAgICAuYW5pbWF0ZSh7IGxlZnQ6IDAgfSwgMSlcbiAgICAgICAgICAgICAgICAgICAgLmFuaW1hdGUoeyB0b3A6IC0xMCB9LCA1KVxuICAgICAgICAgICAgICAgICAgICAuYW5pbWF0ZSh7IHRvcDogMCB9LCAxKVxuICAgICAgICAgICAgICAgICAgICAuYW5pbWF0ZSh7IHRvcDogMTAgfSwgNSlcbiAgICAgICAgICAgICAgICAgICAgLmFuaW1hdGUoeyB0b3A6IDAgfSwgMSk7XG5cbiAgICAgICAgICAgICAgICAvLyBzdG9wIHZpYnJhdGluZyBpbiB0aGUgZW5kIG9mIHZpYnJhdGlvbiB0aW1lIGlmIHRoZXJlIGlzIG5vIG1vcmUgdmlicmF0aW9uc1xuICAgICAgICAgICAgICAgIGlmICh4ID49IHRpbWVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGJvZHkuYW5pbWF0ZShcbiAgICAgICAgICAgICAgICAgICAgICAgIHt0b3A6IDB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgMSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGVyZSBhcmUgYW5vdGhlciB2aWJyYXRpb25zIHRoYXQgc3RhcnRlZCByaWdodCBhZnRlciB2aWJyYXRpb24gY2FsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB3ZSBkb24ndCBuZWVkIHRvIHN0b3AgdmlicmF0aW9uIGVmZmVjdCBieSBzZXR0aW5nIHBvc2l0aW9uIHRvIG5vdGhpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoa25vd25WaWJyYXRpb25DYWxsc0NvdW50ID09PSBjdXJyZW50VmlicmF0aW9uTnVtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpYnJhdGUoMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gaWYgdmlicmF0aW9uIGlzIGNhbmNlbGxlZCwgd2UgbmVlZCB0byBzZXQgYm9keSBwb3NpdGlvbiB0byBub3RoaW5nIGluIHRoZSBjYXNlIHRvIHN0b3AgdmlicmF0aW9uIGVmZmVjdFxuICAgIGZ1bmN0aW9uIGNoZWNrRm9yVmlicmF0aW9uIChyZWplY3QsIGVsZW1lbnQpIHtcbiAgICAgICAgaWYgKHZpYnJhdGlvbkNhbmNlbGVkKSB7XG4gICAgICAgICAgICB2aWJyYXRpb25DYW5jZWxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgZWxlbWVudC5jc3Moe3Bvc2l0aW9uOiAnJywgbGVmdDogJycsIHRvcDogJyd9KTtcbiAgICAgICAgICAgIHJlamVjdCgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdmlicmF0ZVdpdGhQYXR0ZXJuIChwYXR0ZXJuLCBwbGFjZWhvbGRlck51bSkge1xuICAgICAgICAvLyBjaGVja2luZyBpZiBhbm90aGVyIHZpYnJhdGUgd2l0aCBwYXR0ZXJuIGNhbGwgaW52b2tlZFxuICAgICAgICBpZiAoY3VycmVudFZpYnJhdGlvbk51bSAhPSBwbGFjZWhvbGRlck51bSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ2NhbmNlbGxpbmcgdmlicmF0aW9uIHdpdGggcGF0dGVybicpO1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIG1pbGxpc2Vjb25kcyA9IHBhdHRlcm5bY3VycmVudFZpYnJhdGlvbldpdGhQYXR0ZXJuSW5kZXhdO1xuICAgICAgICBpZiAobWlsbGlzZWNvbmRzKSB7XG4gICAgICAgICAgICBpZiAoY3VycmVudFZpYnJhdGlvbldpdGhQYXR0ZXJuSW5kZXggJSAyID09PSAwKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3ZpYnJhdGluZy4uLicgKyBtaWxsaXNlY29uZHMpO1xuICAgICAgICAgICAgICAgIGN1cnJlbnRWaWJyYXRpb25XaXRoUGF0dGVybkluZGV4Kys7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZpYnJhdGUobWlsbGlzZWNvbmRzLCBwbGFjZWhvbGRlck51bSlcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkgeyBcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB2aWJyYXRlV2l0aFBhdHRlcm4ocGF0dGVybiwgcGxhY2Vob2xkZXJOdW0pO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2RlbGF5aW5nLi4uJyArIG1pbGxpc2Vjb25kcyk7XG4gICAgICAgICAgICAgICAgY3VycmVudFZpYnJhdGlvbldpdGhQYXR0ZXJuSW5kZXgrKztcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUodmlicmF0ZVdpdGhQYXR0ZXJuKHBhdHRlcm4sIHBsYWNlaG9sZGVyTnVtKSk7XG4gICAgICAgICAgICAgICAgfSwgbWlsbGlzZWNvbmRzKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59O1xuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBCYXNlZCBpbiBwYXJ0IG9uIGNvZGUgZnJvbSBBcGFjaGUgUmlwcGxlLCBodHRwczovL2dpdGh1Yi5jb20vYXBhY2hlL2luY3ViYXRvci1yaXBwbGVcblxudmFyIHV0aWxzID0gcmVxdWlyZSgndXRpbHMnKSxcbiAgICBjb25zdGFudHMgPSByZXF1aXJlKCdzaW0tY29uc3RhbnRzJyksXG4gICAgZXZlbnQgPSByZXF1aXJlKCdldmVudCcpLFxuICAgIERCX05BTUUgPSAncmlwcGxlJyxcbiAgICBjYWNoZSxcbiAgICBzZWxmLFxuICAgIG9wZW5kYjtcblxuLy8gVE9ETzogVGhpcyBjb3VsZCB1c2Ugc29tZSByZWZhY3RvcmluZy4uXG5cbmZ1bmN0aW9uIHNhdmVUb1N0b3JhZ2UoKSB7XG4gICAgbG9jYWxTdG9yYWdlW0RCX05BTUVdID0gSlNPTi5zdHJpbmdpZnkoY2FjaGUpO1xufVxuXG5mdW5jdGlvbiB2YWxpZGF0ZUFuZFNldFByZWZpeChwcmVmaXgpIHtcbiAgICBpZiAocHJlZml4KSB7XG4gICAgICAgIHV0aWxzLnZhbGlkYXRlQXJndW1lbnRUeXBlKHByZWZpeCwgJ3N0cmluZycpO1xuICAgIH1cblxuICAgIHJldHVybiBwcmVmaXggfHwgY29uc3RhbnRzLkNPTU1PTi5QUkVGSVg7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUtleShrZXksIHByZWZpeCkge1xuICAgIHJldHVybiB2YWxpZGF0ZUFuZFNldFByZWZpeChwcmVmaXgpICsga2V5O1xufVxuXG5mdW5jdGlvbiBjcmVhdGVJdGVtKGtleSwgdmFsdWUsIHByZWZpeCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIGlkOiBjcmVhdGVLZXkoa2V5LCBwcmVmaXgpLFxuICAgICAgICBrZXk6IGtleSxcbiAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICBwcmVmaXg6IHZhbGlkYXRlQW5kU2V0UHJlZml4KHByZWZpeClcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBzYXZlKGtleSwgdmFsdWUsIHByZWZpeCwgY2FsbGJhY2spIHtcbiAgICB2YXIgaXRlbSA9IGNyZWF0ZUl0ZW0oa2V5LCB2YWx1ZSwgcHJlZml4KTtcbiAgICBjYWNoZVtpdGVtLmlkXSA9IGl0ZW07XG5cbiAgICBpZiAoIXdpbmRvdy5vcGVuRGF0YWJhc2UpIHtcbiAgICAgICAgc2F2ZVRvU3RvcmFnZSgpO1xuICAgICAgICBpZiAoY2FsbGJhY2spIHsgY2FsbGJhY2soKTsgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIG9wZW5kYi50cmFuc2FjdGlvbihmdW5jdGlvbiAodHgpIHtcbiAgICAgICAgICAgIHR4LmV4ZWN1dGVTcWwoJ1JFUExBQ0UgSU5UTyBwZXJzaXN0ZW5jZSAoaWQsIGtleSwgdmFsdWUsIHByZWZpeCkgVkFMVUVTICg/LCA/LCA/LCA/KScsIFtpdGVtLmlkLCBpdGVtLmtleSwgaXRlbS52YWx1ZSwgaXRlbS5wcmVmaXhdLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrICYmIGNhbGxiYWNrKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiByZXRyaWV2ZShrZXksIHByZWZpeCkge1xuICAgIHZhciBpdGVtID0gY2FjaGVbY3JlYXRlS2V5KGtleSwgcHJlZml4KV07XG4gICAgcmV0dXJuIGl0ZW0gPyBpdGVtLnZhbHVlIDogdW5kZWZpbmVkO1xufVxuXG5mdW5jdGlvbiByZXRyaWV2ZUFsbChwcmVmaXgsIGNhbGxiYWNrKSB7XG4gICAgdmFyIHJlc3VsdCA9IHt9O1xuXG4gICAgaWYgKHByZWZpeCkge1xuICAgICAgICB1dGlscy5mb3JFYWNoKGNhY2hlLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZS5wcmVmaXggPT09IHByZWZpeCkge1xuICAgICAgICAgICAgICAgIHJlc3VsdFt2YWx1ZS5rZXldID0gdmFsdWUudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmIChjYWxsYmFjaykgeyBjYWxsYmFjayhyZXN1bHQpOyB9XG59XG5cbmZ1bmN0aW9uIHJlbW92ZShrZXksIHByZWZpeCwgY2FsbGJhY2spIHtcbiAgICB2YXIgaWQgPSBjcmVhdGVLZXkoa2V5LCBwcmVmaXgpO1xuXG4gICAgZGVsZXRlIGNhY2hlW2lkXTtcblxuICAgIGlmICghd2luZG93Lm9wZW5EYXRhYmFzZSkge1xuICAgICAgICBzYXZlVG9TdG9yYWdlKCk7XG4gICAgICAgIGlmIChjYWxsYmFjaykgeyBjYWxsYmFjaygpOyB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgb3BlbmRiLnRyYW5zYWN0aW9uKGZ1bmN0aW9uICh0eCkge1xuICAgICAgICAgICAgdHguZXhlY3V0ZVNxbCgnREVMRVRFIEZST00gcGVyc2lzdGVuY2UgV0hFUkUga2V5ID0gPyBBTkQgcHJlZml4ID0gPycsIFtrZXksIHZhbGlkYXRlQW5kU2V0UHJlZml4KHByZWZpeCldLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrICYmIGNhbGxiYWNrKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiByZW1vdmVBbGwoY2FsbGJhY2spIHtcbiAgICBjYWNoZSA9IHt9O1xuXG4gICAgaWYgKCF3aW5kb3cub3BlbkRhdGFiYXNlKSB7XG4gICAgICAgIGRlbGV0ZSBsb2NhbFN0b3JhZ2VbREJfTkFNRV07XG4gICAgICAgIHNhdmVUb1N0b3JhZ2UoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBvcGVuZGIudHJhbnNhY3Rpb24oZnVuY3Rpb24gKHR4KSB7XG4gICAgICAgICAgICB0eC5leGVjdXRlU3FsKCdERUxFVEUgRlJPTSBwZXJzaXN0ZW5jZScsIFtdLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrICYmIGNhbGxiYWNrKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG5zZWxmID0ge1xuICAgIHNhdmU6IGZ1bmN0aW9uIChrZXksIHZhbHVlLCBwcmVmaXgsIGNhbGxiYWNrKSB7XG4gICAgICAgIHNhdmUoa2V5LCB2YWx1ZSwgcHJlZml4LCBjYWxsYmFjayk7XG4gICAgICAgIGV2ZW50LnRyaWdnZXIoJ1N0b3JhZ2VVcGRhdGVkRXZlbnQnKTtcbiAgICB9LFxuXG4gICAgc2F2ZU9iamVjdDogZnVuY3Rpb24gKGtleSwgb2JqLCBwcmVmaXgsIGNhbGxiYWNrKSB7XG4gICAgICAgIHNhdmUoa2V5LCBKU09OLnN0cmluZ2lmeShvYmopLCBwcmVmaXgsIGNhbGxiYWNrKTtcbiAgICAgICAgZXZlbnQudHJpZ2dlcignU3RvcmFnZVVwZGF0ZWRFdmVudCcpO1xuICAgIH0sXG5cbiAgICByZXRyaWV2ZTogZnVuY3Rpb24gKGtleSwgcHJlZml4KSB7XG4gICAgICAgIHJldHVybiByZXRyaWV2ZShrZXksIHByZWZpeCk7XG4gICAgfSxcblxuICAgIHJldHJpZXZlT2JqZWN0OiBmdW5jdGlvbiAoa2V5LCBwcmVmaXgpIHtcbiAgICAgICAgdmFyIHJldHJpZXZlZFZhbHVlID0gcmV0cmlldmUoa2V5LCBwcmVmaXgpO1xuICAgICAgICByZXR1cm4gcmV0cmlldmVkVmFsdWUgPyBKU09OLnBhcnNlKHJldHJpZXZlZFZhbHVlKSA6IHJldHJpZXZlZFZhbHVlO1xuICAgIH0sXG5cbiAgICByZXRyaWV2ZUFsbDogZnVuY3Rpb24gKHByZWZpeCwgY2FsbGJhY2spIHtcbiAgICAgICAgcmV0dXJuIHJldHJpZXZlQWxsKHByZWZpeCwgY2FsbGJhY2spO1xuICAgIH0sXG5cbiAgICByZW1vdmU6IGZ1bmN0aW9uIChrZXksIHByZWZpeCwgY2FsbGJhY2spIHtcbiAgICAgICAgZXZlbnQudHJpZ2dlcignU3RvcmFnZVVwZGF0ZWRFdmVudCcpO1xuICAgICAgICByZW1vdmUoa2V5LCBwcmVmaXgsIGNhbGxiYWNrKTtcbiAgICB9LFxuXG4gICAgcmVtb3ZlQWxsOiBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgcmVtb3ZlQWxsKGNhbGxiYWNrKTtcbiAgICAgICAgZXZlbnQudHJpZ2dlcignU3RvcmFnZVVwZGF0ZWRFdmVudCcpO1xuICAgIH0sXG5cbiAgICBpbml0aWFsaXplOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgICAgICAgaWYgKCF3aW5kb3cub3BlbkRhdGFiYXNlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHN0b3JlID0gbG9jYWxTdG9yYWdlW0RCX05BTUVdO1xuICAgICAgICAgICAgICAgIGNhY2hlID0gc3RvcmUgPyBKU09OLnBhcnNlKHN0b3JlKSA6IHt9O1xuICAgICAgICAgICAgICAgIHNhdmVUb1N0b3JhZ2UoKTtcbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNhY2hlID0ge307XG4gICAgICAgICAgICAgICAgb3BlbmRiID0gb3BlbkRhdGFiYXNlKCd0aW55SGlwcG9zJywgJzEuMCcsICd0aW55IEhpcHBvcyBwZXJzaXN0ZW5jZScsIDIgKiAxMDI0ICogMTAyNCk7XG4gICAgICAgICAgICAgICAgb3BlbmRiLnRyYW5zYWN0aW9uKGZ1bmN0aW9uICh0eCkge1xuICAgICAgICAgICAgICAgICAgICB0eC5leGVjdXRlU3FsKCdDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBwZXJzaXN0ZW5jZSAoaWQgdW5pcXVlLCBrZXksIHZhbHVlLCBwcmVmaXgpJyk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHR4LmV4ZWN1dGVTcWwoJ1NFTEVDVCBpZCwga2V5LCB2YWx1ZSwgcHJlZml4IEZST00gcGVyc2lzdGVuY2UnLCBbXSwgZnVuY3Rpb24gKHR4LCByZXN1bHRzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGVuID0gcmVzdWx0cy5yb3dzLmxlbmd0aCwgaSwgaXRlbTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0gPSByZXN1bHRzLnJvd3MuaXRlbShpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWNoZVtpdGVtLmlkXSA9IGl0ZW07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHNlbGY7XG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihtZXNzYWdlcykge1xuICAgIG1lc3NhZ2VzLnJlZ2lzdGVyKCdldmVudCcsIGZ1bmN0aW9uIChldmVudCwgY2FsbGJhY2spIHtcbiAgICAgICAgaWYgKCF3aW5kb3cuY29yZG92YSkge1xuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgJ1lvdSBtdXN0IGhhdmUgY29yZG92YS5qcyBpbmNsdWRlZCBpbiB5b3VyIHByb2plY3RzLCB0byBiZSBhYmxlIHRvIHRyaWdnZXIgZXZlbnRzJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHdpbmRvdy5jb3Jkb3ZhLmZpcmVEb2N1bWVudEV2ZW50KGV2ZW50KTtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhudWxsLCBldmVudCk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbn07XG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIEJhc2VkIGluIHBhcnQgb24gY29kZSBmcm9tIEFwYWNoZSBSaXBwbGUsIGh0dHBzOi8vZ2l0aHViLmNvbS9hcGFjaGUvaW5jdWJhdG9yLXJpcHBsZVxuXG52YXIgdXRpbHMgPSByZXF1aXJlKCd1dGlscycpLFxuICAgIGV4Y2VwdGlvbiA9IHJlcXVpcmUoJ2V4Y2VwdGlvbicpLFxuICAgIF9saXN0ZW5lcnMgPSB7fTtcblxuZnVuY3Rpb24gX29uKGV2ZW50VHlwZSwgbGlzdGVuZXIsIHNjb3BlLCBvbmNlKSB7XG4gICAgaWYgKCFldmVudFR5cGUpIHtcbiAgICAgICAgdGhyb3cgJ2V2ZW50VHlwZSBtdXN0IGJlIHRydXRoeSc7XG4gICAgfVxuICAgIF9saXN0ZW5lcnNbZXZlbnRUeXBlXSA9IF9saXN0ZW5lcnNbZXZlbnRUeXBlXSB8fCBbXTtcbiAgICBfbGlzdGVuZXJzW2V2ZW50VHlwZV0ucHVzaCh7XG4gICAgICAgIGZ1bmM6IGxpc3RlbmVyLFxuICAgICAgICBzY29wZTogc2NvcGUsXG4gICAgICAgIG9uY2U6ICEhb25jZVxuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBfdHJpZ2dlcihsaXN0ZW5lciwgYXJncywgc3luYykge1xuICAgIHRyeSB7XG4gICAgICAgIGlmIChzeW5jKSB7XG4gICAgICAgICAgICBsaXN0ZW5lci5mdW5jLmFwcGx5KGxpc3RlbmVyLnNjb3BlLCBhcmdzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGxpc3RlbmVyLmZ1bmMuYXBwbHkobGlzdGVuZXIuc2NvcGUsIGFyZ3MpO1xuICAgICAgICAgICAgfSwgMSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgZXhjZXB0aW9uLmhhbmRsZShlKTtcbiAgICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICAgIG9uOiBmdW5jdGlvbiAoZXZlbnRUeXBlLCBsaXN0ZW5lciwgc2NvcGUpIHtcbiAgICAgICAgX29uKGV2ZW50VHlwZSwgbGlzdGVuZXIsIHNjb3BlLCBmYWxzZSk7XG4gICAgfSxcblxuICAgIG9uY2U6IGZ1bmN0aW9uIChldmVudFR5cGUsIGxpc3RlbmVyLCBzY29wZSkge1xuICAgICAgICBfb24oZXZlbnRUeXBlLCBsaXN0ZW5lciwgc2NvcGUsIHRydWUpO1xuICAgIH0sXG5cbiAgICB0cmlnZ2VyOiBmdW5jdGlvbiAoZXZlbnRUeXBlLCBhcmdzLCBzeW5jKSB7XG4gICAgICAgIGFyZ3MgPSBhcmdzIHx8IFtdO1xuICAgICAgICBzeW5jID0gc3luYyB8fCBmYWxzZTtcblxuICAgICAgICB2YXIgbGlzdGVuZXJzID0gX2xpc3RlbmVyc1tldmVudFR5cGVdO1xuXG4gICAgICAgIGlmIChsaXN0ZW5lcnMpIHtcbiAgICAgICAgICAgIGxpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uIChsaXN0ZW5lcikge1xuICAgICAgICAgICAgICAgIF90cmlnZ2VyKGxpc3RlbmVyLCBhcmdzLCBzeW5jKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBfbGlzdGVuZXJzW2V2ZW50VHlwZV0gPSBsaXN0ZW5lcnMuZmlsdGVyKGZ1bmN0aW9uIChsaXN0ZW5lcikge1xuICAgICAgICAgICAgICAgIHJldHVybiAhbGlzdGVuZXIub25jZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIGV2ZW50SGFzU3Vic2NyaWJlcjogZnVuY3Rpb24gKGV2ZW50VHlwZSkge1xuICAgICAgICByZXR1cm4gISFfbGlzdGVuZXJzW2V2ZW50VHlwZV07XG4gICAgfSxcblxuICAgIGdldEV2ZW50U3Vic2NyaWJlcnM6IGZ1bmN0aW9uIChldmVudFR5cGUpIHtcbiAgICAgICAgcmV0dXJuIHV0aWxzLmNvcHkoX2xpc3RlbmVyc1tldmVudFR5cGVdKSB8fCBbXTtcbiAgICB9LFxuXG4gICAgY2xlYXI6IGZ1bmN0aW9uIChldmVudFR5cGUpIHtcbiAgICAgICAgaWYgKGV2ZW50VHlwZSkge1xuICAgICAgICAgICAgZGVsZXRlIF9saXN0ZW5lcnNbZXZlbnRUeXBlXTtcbiAgICAgICAgfVxuICAgIH1cbn07XG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vIEJhc2VkIGluIHBhcnQgb24gY29kZSBmcm9tIEFwYWNoZSBSaXBwbGUsIGh0dHBzOi8vZ2l0aHViLmNvbS9hcGFjaGUvaW5jdWJhdG9yLXJpcHBsZVxuXG5mdW5jdGlvbiBfZ2V0U3RhY2soZGVwdGgpIHtcbiAgICB2YXIgY2FsbGVyLFxuICAgICAgICBzdGFjayA9ICcnLFxuICAgICAgICBjb3VudCA9IDA7XG5cbiAgICB0cnkge1xuICAgICAgICAvKmpzaGludCBub2FyZzpmYWxzZSovIC8vIFRISVMgU0hPVUxEIE5PVCBiZSBhIGNvbW1vbiBvY2N1cnJlbmNlLi5cbiAgICAgICAgY2FsbGVyID0gYXJndW1lbnRzLmNhbGxlZS5jYWxsZXIuYXJndW1lbnRzLmNhbGxlZS5jYWxsZXI7XG5cbiAgICAgICAgd2hpbGUgKGNvdW50IDw9IGRlcHRoICYmIGNhbGxlcikge1xuICAgICAgICAgICAgc3RhY2sgKz0gJ2Z1bmN0aW9uOiAnICsgY2FsbGVyLnRvU3RyaW5nKCkubWF0Y2goL2Z1bmN0aW9uXFxzPyguKilcXHsvKVsxXSArICdcXG4nO1xuICAgICAgICAgICAgY2FsbGVyID0gY2FsbGVyLmFyZ3VtZW50cy5jYWxsZWUuY2FsbGVyO1xuICAgICAgICAgICAgY291bnQrKztcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgc3RhY2sgPSAnZmFpbGVkIHRvIGRldGVybWluZSBzdGFjayB0cmFjZSAoJyArIChlLm5hbWUgfHwgZS50eXBlKSArICcgOjogJyArIGUubWVzc2FnZSArICcpJztcbiAgICB9XG5cbiAgICByZXR1cm4gc3RhY2s7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuXG4gICAgdHlwZXM6IHtcbiAgICAgICAgQXBwbGljYXRpb246ICdBcHBsaWNhdGlvbicsXG4gICAgICAgIEFyZ3VtZW50TGVuZ3RoOiAnQXJndW1lbnRMZW5ndGgnLFxuICAgICAgICBBcmd1bWVudFR5cGU6ICdBcmd1bWVudFR5cGUnLFxuICAgICAgICBBcmd1bWVudDogJ0FyZ3VtZW50JyxcbiAgICAgICAgTm90aWZpY2F0aW9uVHlwZTogJ05vdGlmaWNhdGlvblR5cGUnLFxuICAgICAgICBOb3RpZmljYXRpb25TdGF0ZVR5cGU6ICdOb3RpZmljYXRpb25TdGF0ZVR5cGUnLFxuICAgICAgICBEb21PYmplY3ROb3RGb3VuZDogJ0RvbU9iamVjdE5vdEZvdW5kJyxcbiAgICAgICAgTGF5b3V0VHlwZTogJ0xheW91dFR5cGUnLFxuICAgICAgICBEZXZpY2VOb3RGb3VuZDogJ0RldmljZU5vdEZvdW5kJyxcbiAgICAgICAgdGlueUhpcHBvc01hc2tlZEV4Y2VwdGlvbjogJ3RpbnlIaXBwb3NNYXNrZWRFeGNlcHRpb24nLFxuICAgICAgICBHZW86ICdHZW8nLFxuICAgICAgICBBY2NlbGVyb21ldGVyOiAnQWNjZWxlcm9tZXRlcicsXG4gICAgICAgIE1ldGhvZE5vdEltcGxlbWVudGVkOiAnTWV0aG9kTm90SW1wbGVtZW50ZWQnLFxuICAgICAgICBJbnZhbGlkU3RhdGU6ICdJbnZhbGlkU3RhdGUnLFxuICAgICAgICBBcHBsaWNhdGlvblN0YXRlOiAnQXBwbGljYXRpb25TdGF0ZSdcbiAgICB9LFxuXG4gICAgaGFuZGxlOiBmdW5jdGlvbiBoYW5kbGUoZXhjZXB0aW9uLCByZVRocm93KSB7XG4gICAgICAgIHJlVGhyb3cgPSByZVRocm93IHx8IGZhbHNlO1xuXG4gICAgICAgIHZhciBlTXNnID0gZXhjZXB0aW9uLm1lc3NhZ2UgfHwgJ2V4Y2VwdGlvbiBjYXVnaHQhJyxcbiAgICAgICAgICAgIG1zZyA9IGVNc2cgKyAnXFxuXFxuJyArIChleGNlcHRpb24uc3RhY2sgfHwgJypubyBzdGFjayBwcm92aWRlZConKSArICdcXG5cXG4nO1xuXG4gICAgICAgIGNvbnNvbGUuZXJyb3IobXNnKTtcblxuICAgICAgICBpZiAocmVUaHJvdykge1xuICAgICAgICAgICAgdGhyb3cgZXhjZXB0aW9uO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIHJhaXNlOiBmdW5jdGlvbiByYWlzZShleGNlcHRpb25UeXBlLCBtZXNzYWdlLCBjdXN0b21FeGNlcHRpb25PYmplY3QpIHtcbiAgICAgICAgdmFyIG9iaiA9IGN1c3RvbUV4Y2VwdGlvbk9iamVjdCB8fCB7XG4gICAgICAgICAgICB0eXBlOiAnJyxcbiAgICAgICAgICAgIG1lc3NhZ2U6ICcnLFxuXG4gICAgICAgICAgICB0b1N0cmluZzogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSB0aGlzLm5hbWUgKyAnOiBcXCcnICsgdGhpcy5tZXNzYWdlICsgJ1xcJyc7XG5cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zdGFjaykge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gJ1xcbicgKyB0aGlzLnN0YWNrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIG1lc3NhZ2UgPSBtZXNzYWdlIHx8ICcnO1xuXG4gICAgICAgIG9iai5uYW1lID0gZXhjZXB0aW9uVHlwZTtcbiAgICAgICAgb2JqLnR5cGUgPSBleGNlcHRpb25UeXBlO1xuICAgICAgICAvLyBUT0RPOiBpbmNsdWRlIHRoZSBleGNlcHRpb24gb2JqZWN0cyBvcmlnaW5hbCBtZXNzYWdlIGlmIGV4aXN0c1xuICAgICAgICBvYmoubWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgICAgIG9iai5zdGFjayA9IF9nZXRTdGFjayg1KTtcblxuICAgICAgICB0aHJvdyBvYmo7XG4gICAgfVxufTtcbiIsIi8qISBqUXVlcnkgdjIuMS40IHwgKGMpIDIwMDUsIDIwMTUgalF1ZXJ5IEZvdW5kYXRpb24sIEluYy4gfCBqcXVlcnkub3JnL2xpY2Vuc2UgKi9cbiFmdW5jdGlvbihhLGIpe1wib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGUmJlwib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1hLmRvY3VtZW50P2IoYSwhMCk6ZnVuY3Rpb24oYSl7aWYoIWEuZG9jdW1lbnQpdGhyb3cgbmV3IEVycm9yKFwialF1ZXJ5IHJlcXVpcmVzIGEgd2luZG93IHdpdGggYSBkb2N1bWVudFwiKTtyZXR1cm4gYihhKX06YihhKX0oXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6dGhpcyxmdW5jdGlvbihhLGIpe3ZhciBjPVtdLGQ9Yy5zbGljZSxlPWMuY29uY2F0LGY9Yy5wdXNoLGc9Yy5pbmRleE9mLGg9e30saT1oLnRvU3RyaW5nLGo9aC5oYXNPd25Qcm9wZXJ0eSxrPXt9LGw9YS5kb2N1bWVudCxtPVwiMi4xLjRcIixuPWZ1bmN0aW9uKGEsYil7cmV0dXJuIG5ldyBuLmZuLmluaXQoYSxiKX0sbz0vXltcXHNcXHVGRUZGXFx4QTBdK3xbXFxzXFx1RkVGRlxceEEwXSskL2cscD0vXi1tcy0vLHE9Ly0oW1xcZGEtel0pL2dpLHI9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi50b1VwcGVyQ2FzZSgpfTtuLmZuPW4ucHJvdG90eXBlPXtqcXVlcnk6bSxjb25zdHJ1Y3RvcjpuLHNlbGVjdG9yOlwiXCIsbGVuZ3RoOjAsdG9BcnJheTpmdW5jdGlvbigpe3JldHVybiBkLmNhbGwodGhpcyl9LGdldDpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbCE9YT8wPmE/dGhpc1thK3RoaXMubGVuZ3RoXTp0aGlzW2FdOmQuY2FsbCh0aGlzKX0scHVzaFN0YWNrOmZ1bmN0aW9uKGEpe3ZhciBiPW4ubWVyZ2UodGhpcy5jb25zdHJ1Y3RvcigpLGEpO3JldHVybiBiLnByZXZPYmplY3Q9dGhpcyxiLmNvbnRleHQ9dGhpcy5jb250ZXh0LGJ9LGVhY2g6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbi5lYWNoKHRoaXMsYSxiKX0sbWFwOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnB1c2hTdGFjayhuLm1hcCh0aGlzLGZ1bmN0aW9uKGIsYyl7cmV0dXJuIGEuY2FsbChiLGMsYil9KSl9LHNsaWNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGQuYXBwbHkodGhpcyxhcmd1bWVudHMpKX0sZmlyc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lcSgwKX0sbGFzdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVxKC0xKX0sZXE6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5sZW5ndGgsYz0rYSsoMD5hP2I6MCk7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGM+PTAmJmI+Yz9bdGhpc1tjXV06W10pfSxlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcmV2T2JqZWN0fHx0aGlzLmNvbnN0cnVjdG9yKG51bGwpfSxwdXNoOmYsc29ydDpjLnNvcnQsc3BsaWNlOmMuc3BsaWNlfSxuLmV4dGVuZD1uLmZuLmV4dGVuZD1mdW5jdGlvbigpe3ZhciBhLGIsYyxkLGUsZixnPWFyZ3VtZW50c1swXXx8e30saD0xLGk9YXJndW1lbnRzLmxlbmd0aCxqPSExO2ZvcihcImJvb2xlYW5cIj09dHlwZW9mIGcmJihqPWcsZz1hcmd1bWVudHNbaF18fHt9LGgrKyksXCJvYmplY3RcIj09dHlwZW9mIGd8fG4uaXNGdW5jdGlvbihnKXx8KGc9e30pLGg9PT1pJiYoZz10aGlzLGgtLSk7aT5oO2grKylpZihudWxsIT0oYT1hcmd1bWVudHNbaF0pKWZvcihiIGluIGEpYz1nW2JdLGQ9YVtiXSxnIT09ZCYmKGomJmQmJihuLmlzUGxhaW5PYmplY3QoZCl8fChlPW4uaXNBcnJheShkKSkpPyhlPyhlPSExLGY9YyYmbi5pc0FycmF5KGMpP2M6W10pOmY9YyYmbi5pc1BsYWluT2JqZWN0KGMpP2M6e30sZ1tiXT1uLmV4dGVuZChqLGYsZCkpOnZvaWQgMCE9PWQmJihnW2JdPWQpKTtyZXR1cm4gZ30sbi5leHRlbmQoe2V4cGFuZG86XCJqUXVlcnlcIisobStNYXRoLnJhbmRvbSgpKS5yZXBsYWNlKC9cXEQvZyxcIlwiKSxpc1JlYWR5OiEwLGVycm9yOmZ1bmN0aW9uKGEpe3Rocm93IG5ldyBFcnJvcihhKX0sbm9vcDpmdW5jdGlvbigpe30saXNGdW5jdGlvbjpmdW5jdGlvbihhKXtyZXR1cm5cImZ1bmN0aW9uXCI9PT1uLnR5cGUoYSl9LGlzQXJyYXk6QXJyYXkuaXNBcnJheSxpc1dpbmRvdzpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbCE9YSYmYT09PWEud2luZG93fSxpc051bWVyaWM6ZnVuY3Rpb24oYSl7cmV0dXJuIW4uaXNBcnJheShhKSYmYS1wYXJzZUZsb2F0KGEpKzE+PTB9LGlzUGxhaW5PYmplY3Q6ZnVuY3Rpb24oYSl7cmV0dXJuXCJvYmplY3RcIiE9PW4udHlwZShhKXx8YS5ub2RlVHlwZXx8bi5pc1dpbmRvdyhhKT8hMTphLmNvbnN0cnVjdG9yJiYhai5jYWxsKGEuY29uc3RydWN0b3IucHJvdG90eXBlLFwiaXNQcm90b3R5cGVPZlwiKT8hMTohMH0saXNFbXB0eU9iamVjdDpmdW5jdGlvbihhKXt2YXIgYjtmb3IoYiBpbiBhKXJldHVybiExO3JldHVybiEwfSx0eXBlOmZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT1hP2ErXCJcIjpcIm9iamVjdFwiPT10eXBlb2YgYXx8XCJmdW5jdGlvblwiPT10eXBlb2YgYT9oW2kuY2FsbChhKV18fFwib2JqZWN0XCI6dHlwZW9mIGF9LGdsb2JhbEV2YWw6ZnVuY3Rpb24oYSl7dmFyIGIsYz1ldmFsO2E9bi50cmltKGEpLGEmJigxPT09YS5pbmRleE9mKFwidXNlIHN0cmljdFwiKT8oYj1sLmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIiksYi50ZXh0PWEsbC5oZWFkLmFwcGVuZENoaWxkKGIpLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYikpOmMoYSkpfSxjYW1lbENhc2U6ZnVuY3Rpb24oYSl7cmV0dXJuIGEucmVwbGFjZShwLFwibXMtXCIpLnJlcGxhY2UocSxyKX0sbm9kZU5hbWU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS5ub2RlTmFtZSYmYS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09Yi50b0xvd2VyQ2FzZSgpfSxlYWNoOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlPTAsZj1hLmxlbmd0aCxnPXMoYSk7aWYoYyl7aWYoZyl7Zm9yKDtmPmU7ZSsrKWlmKGQ9Yi5hcHBseShhW2VdLGMpLGQ9PT0hMSlicmVha31lbHNlIGZvcihlIGluIGEpaWYoZD1iLmFwcGx5KGFbZV0sYyksZD09PSExKWJyZWFrfWVsc2UgaWYoZyl7Zm9yKDtmPmU7ZSsrKWlmKGQ9Yi5jYWxsKGFbZV0sZSxhW2VdKSxkPT09ITEpYnJlYWt9ZWxzZSBmb3IoZSBpbiBhKWlmKGQ9Yi5jYWxsKGFbZV0sZSxhW2VdKSxkPT09ITEpYnJlYWs7cmV0dXJuIGF9LHRyaW06ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PWE/XCJcIjooYStcIlwiKS5yZXBsYWNlKG8sXCJcIil9LG1ha2VBcnJheTpmdW5jdGlvbihhLGIpe3ZhciBjPWJ8fFtdO3JldHVybiBudWxsIT1hJiYocyhPYmplY3QoYSkpP24ubWVyZ2UoYyxcInN0cmluZ1wiPT10eXBlb2YgYT9bYV06YSk6Zi5jYWxsKGMsYSkpLGN9LGluQXJyYXk6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBudWxsPT1iPy0xOmcuY2FsbChiLGEsYyl9LG1lcmdlOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPStiLmxlbmd0aCxkPTAsZT1hLmxlbmd0aDtjPmQ7ZCsrKWFbZSsrXT1iW2RdO3JldHVybiBhLmxlbmd0aD1lLGF9LGdyZXA6ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZCxlPVtdLGY9MCxnPWEubGVuZ3RoLGg9IWM7Zz5mO2YrKylkPSFiKGFbZl0sZiksZCE9PWgmJmUucHVzaChhW2ZdKTtyZXR1cm4gZX0sbWFwOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxmPTAsZz1hLmxlbmd0aCxoPXMoYSksaT1bXTtpZihoKWZvcig7Zz5mO2YrKylkPWIoYVtmXSxmLGMpLG51bGwhPWQmJmkucHVzaChkKTtlbHNlIGZvcihmIGluIGEpZD1iKGFbZl0sZixjKSxudWxsIT1kJiZpLnB1c2goZCk7cmV0dXJuIGUuYXBwbHkoW10saSl9LGd1aWQ6MSxwcm94eTpmdW5jdGlvbihhLGIpe3ZhciBjLGUsZjtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgYiYmKGM9YVtiXSxiPWEsYT1jKSxuLmlzRnVuY3Rpb24oYSk/KGU9ZC5jYWxsKGFyZ3VtZW50cywyKSxmPWZ1bmN0aW9uKCl7cmV0dXJuIGEuYXBwbHkoYnx8dGhpcyxlLmNvbmNhdChkLmNhbGwoYXJndW1lbnRzKSkpfSxmLmd1aWQ9YS5ndWlkPWEuZ3VpZHx8bi5ndWlkKyssZik6dm9pZCAwfSxub3c6RGF0ZS5ub3csc3VwcG9ydDprfSksbi5lYWNoKFwiQm9vbGVhbiBOdW1iZXIgU3RyaW5nIEZ1bmN0aW9uIEFycmF5IERhdGUgUmVnRXhwIE9iamVjdCBFcnJvclwiLnNwbGl0KFwiIFwiKSxmdW5jdGlvbihhLGIpe2hbXCJbb2JqZWN0IFwiK2IrXCJdXCJdPWIudG9Mb3dlckNhc2UoKX0pO2Z1bmN0aW9uIHMoYSl7dmFyIGI9XCJsZW5ndGhcImluIGEmJmEubGVuZ3RoLGM9bi50eXBlKGEpO3JldHVyblwiZnVuY3Rpb25cIj09PWN8fG4uaXNXaW5kb3coYSk/ITE6MT09PWEubm9kZVR5cGUmJmI/ITA6XCJhcnJheVwiPT09Y3x8MD09PWJ8fFwibnVtYmVyXCI9PXR5cGVvZiBiJiZiPjAmJmItMSBpbiBhfXZhciB0PWZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlLGYsZyxoLGksaixrLGwsbSxuLG8scCxxLHIscyx0LHU9XCJzaXp6bGVcIisxKm5ldyBEYXRlLHY9YS5kb2N1bWVudCx3PTAseD0wLHk9aGEoKSx6PWhhKCksQT1oYSgpLEI9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT09PWImJihsPSEwKSwwfSxDPTE8PDMxLEQ9e30uaGFzT3duUHJvcGVydHksRT1bXSxGPUUucG9wLEc9RS5wdXNoLEg9RS5wdXNoLEk9RS5zbGljZSxKPWZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTAsZD1hLmxlbmd0aDtkPmM7YysrKWlmKGFbY109PT1iKXJldHVybiBjO3JldHVybi0xfSxLPVwiY2hlY2tlZHxzZWxlY3RlZHxhc3luY3xhdXRvZm9jdXN8YXV0b3BsYXl8Y29udHJvbHN8ZGVmZXJ8ZGlzYWJsZWR8aGlkZGVufGlzbWFwfGxvb3B8bXVsdGlwbGV8b3BlbnxyZWFkb25seXxyZXF1aXJlZHxzY29wZWRcIixMPVwiW1xcXFx4MjBcXFxcdFxcXFxyXFxcXG5cXFxcZl1cIixNPVwiKD86XFxcXFxcXFwufFtcXFxcdy1dfFteXFxcXHgwMC1cXFxceGEwXSkrXCIsTj1NLnJlcGxhY2UoXCJ3XCIsXCJ3I1wiKSxPPVwiXFxcXFtcIitMK1wiKihcIitNK1wiKSg/OlwiK0wrXCIqKFsqXiR8IX5dPz0pXCIrTCtcIiooPzonKCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcJ10pKiknfFxcXCIoKD86XFxcXFxcXFwufFteXFxcXFxcXFxcXFwiXSkqKVxcXCJ8KFwiK04rXCIpKXwpXCIrTCtcIipcXFxcXVwiLFA9XCI6KFwiK00rXCIpKD86XFxcXCgoKCcoKD86XFxcXFxcXFwufFteXFxcXFxcXFwnXSkqKSd8XFxcIigoPzpcXFxcXFxcXC58W15cXFxcXFxcXFxcXCJdKSopXFxcIil8KCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcKClbXFxcXF1dfFwiK08rXCIpKil8LiopXFxcXCl8KVwiLFE9bmV3IFJlZ0V4cChMK1wiK1wiLFwiZ1wiKSxSPW5ldyBSZWdFeHAoXCJeXCIrTCtcIit8KCg/Ol58W15cXFxcXFxcXF0pKD86XFxcXFxcXFwuKSopXCIrTCtcIiskXCIsXCJnXCIpLFM9bmV3IFJlZ0V4cChcIl5cIitMK1wiKixcIitMK1wiKlwiKSxUPW5ldyBSZWdFeHAoXCJeXCIrTCtcIiooWz4rfl18XCIrTCtcIilcIitMK1wiKlwiKSxVPW5ldyBSZWdFeHAoXCI9XCIrTCtcIiooW15cXFxcXSdcXFwiXSo/KVwiK0wrXCIqXFxcXF1cIixcImdcIiksVj1uZXcgUmVnRXhwKFApLFc9bmV3IFJlZ0V4cChcIl5cIitOK1wiJFwiKSxYPXtJRDpuZXcgUmVnRXhwKFwiXiMoXCIrTStcIilcIiksQ0xBU1M6bmV3IFJlZ0V4cChcIl5cXFxcLihcIitNK1wiKVwiKSxUQUc6bmV3IFJlZ0V4cChcIl4oXCIrTS5yZXBsYWNlKFwid1wiLFwidypcIikrXCIpXCIpLEFUVFI6bmV3IFJlZ0V4cChcIl5cIitPKSxQU0VVRE86bmV3IFJlZ0V4cChcIl5cIitQKSxDSElMRDpuZXcgUmVnRXhwKFwiXjoob25seXxmaXJzdHxsYXN0fG50aHxudGgtbGFzdCktKGNoaWxkfG9mLXR5cGUpKD86XFxcXChcIitMK1wiKihldmVufG9kZHwoKFsrLV18KShcXFxcZCopbnwpXCIrTCtcIiooPzooWystXXwpXCIrTCtcIiooXFxcXGQrKXwpKVwiK0wrXCIqXFxcXCl8KVwiLFwiaVwiKSxib29sOm5ldyBSZWdFeHAoXCJeKD86XCIrSytcIikkXCIsXCJpXCIpLG5lZWRzQ29udGV4dDpuZXcgUmVnRXhwKFwiXlwiK0wrXCIqWz4rfl18OihldmVufG9kZHxlcXxndHxsdHxudGh8Zmlyc3R8bGFzdCkoPzpcXFxcKFwiK0wrXCIqKCg/Oi1cXFxcZCk/XFxcXGQqKVwiK0wrXCIqXFxcXCl8KSg/PVteLV18JClcIixcImlcIil9LFk9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9uKSQvaSxaPS9eaFxcZCQvaSwkPS9eW157XStcXHtcXHMqXFxbbmF0aXZlIFxcdy8sXz0vXig/OiMoW1xcdy1dKyl8KFxcdyspfFxcLihbXFx3LV0rKSkkLyxhYT0vWyt+XS8sYmE9Lyd8XFxcXC9nLGNhPW5ldyBSZWdFeHAoXCJcXFxcXFxcXChbXFxcXGRhLWZdezEsNn1cIitMK1wiP3woXCIrTCtcIil8LilcIixcImlnXCIpLGRhPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1cIjB4XCIrYi02NTUzNjtyZXR1cm4gZCE9PWR8fGM/YjowPmQ/U3RyaW5nLmZyb21DaGFyQ29kZShkKzY1NTM2KTpTdHJpbmcuZnJvbUNoYXJDb2RlKGQ+PjEwfDU1Mjk2LDEwMjMmZHw1NjMyMCl9LGVhPWZ1bmN0aW9uKCl7bSgpfTt0cnl7SC5hcHBseShFPUkuY2FsbCh2LmNoaWxkTm9kZXMpLHYuY2hpbGROb2RlcyksRVt2LmNoaWxkTm9kZXMubGVuZ3RoXS5ub2RlVHlwZX1jYXRjaChmYSl7SD17YXBwbHk6RS5sZW5ndGg/ZnVuY3Rpb24oYSxiKXtHLmFwcGx5KGEsSS5jYWxsKGIpKX06ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmxlbmd0aCxkPTA7d2hpbGUoYVtjKytdPWJbZCsrXSk7YS5sZW5ndGg9Yy0xfX19ZnVuY3Rpb24gZ2EoYSxiLGQsZSl7dmFyIGYsaCxqLGssbCxvLHIscyx3LHg7aWYoKGI/Yi5vd25lckRvY3VtZW50fHxiOnYpIT09biYmbShiKSxiPWJ8fG4sZD1kfHxbXSxrPWIubm9kZVR5cGUsXCJzdHJpbmdcIiE9dHlwZW9mIGF8fCFhfHwxIT09ayYmOSE9PWsmJjExIT09aylyZXR1cm4gZDtpZighZSYmcCl7aWYoMTEhPT1rJiYoZj1fLmV4ZWMoYSkpKWlmKGo9ZlsxXSl7aWYoOT09PWspe2lmKGg9Yi5nZXRFbGVtZW50QnlJZChqKSwhaHx8IWgucGFyZW50Tm9kZSlyZXR1cm4gZDtpZihoLmlkPT09ailyZXR1cm4gZC5wdXNoKGgpLGR9ZWxzZSBpZihiLm93bmVyRG9jdW1lbnQmJihoPWIub3duZXJEb2N1bWVudC5nZXRFbGVtZW50QnlJZChqKSkmJnQoYixoKSYmaC5pZD09PWopcmV0dXJuIGQucHVzaChoKSxkfWVsc2V7aWYoZlsyXSlyZXR1cm4gSC5hcHBseShkLGIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYSkpLGQ7aWYoKGo9ZlszXSkmJmMuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSlyZXR1cm4gSC5hcHBseShkLGIuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShqKSksZH1pZihjLnFzYSYmKCFxfHwhcS50ZXN0KGEpKSl7aWYocz1yPXUsdz1iLHg9MSE9PWsmJmEsMT09PWsmJlwib2JqZWN0XCIhPT1iLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpe289ZyhhKSwocj1iLmdldEF0dHJpYnV0ZShcImlkXCIpKT9zPXIucmVwbGFjZShiYSxcIlxcXFwkJlwiKTpiLnNldEF0dHJpYnV0ZShcImlkXCIscykscz1cIltpZD0nXCIrcytcIiddIFwiLGw9by5sZW5ndGg7d2hpbGUobC0tKW9bbF09cytyYShvW2xdKTt3PWFhLnRlc3QoYSkmJnBhKGIucGFyZW50Tm9kZSl8fGIseD1vLmpvaW4oXCIsXCIpfWlmKHgpdHJ5e3JldHVybiBILmFwcGx5KGQsdy5xdWVyeVNlbGVjdG9yQWxsKHgpKSxkfWNhdGNoKHkpe31maW5hbGx5e3J8fGIucmVtb3ZlQXR0cmlidXRlKFwiaWRcIil9fX1yZXR1cm4gaShhLnJlcGxhY2UoUixcIiQxXCIpLGIsZCxlKX1mdW5jdGlvbiBoYSgpe3ZhciBhPVtdO2Z1bmN0aW9uIGIoYyxlKXtyZXR1cm4gYS5wdXNoKGMrXCIgXCIpPmQuY2FjaGVMZW5ndGgmJmRlbGV0ZSBiW2Euc2hpZnQoKV0sYltjK1wiIFwiXT1lfXJldHVybiBifWZ1bmN0aW9uIGlhKGEpe3JldHVybiBhW3VdPSEwLGF9ZnVuY3Rpb24gamEoYSl7dmFyIGI9bi5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO3RyeXtyZXR1cm4hIWEoYil9Y2F0Y2goYyl7cmV0dXJuITF9ZmluYWxseXtiLnBhcmVudE5vZGUmJmIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChiKSxiPW51bGx9fWZ1bmN0aW9uIGthKGEsYil7dmFyIGM9YS5zcGxpdChcInxcIiksZT1hLmxlbmd0aDt3aGlsZShlLS0pZC5hdHRySGFuZGxlW2NbZV1dPWJ9ZnVuY3Rpb24gbGEoYSxiKXt2YXIgYz1iJiZhLGQ9YyYmMT09PWEubm9kZVR5cGUmJjE9PT1iLm5vZGVUeXBlJiYofmIuc291cmNlSW5kZXh8fEMpLSh+YS5zb3VyY2VJbmRleHx8Qyk7aWYoZClyZXR1cm4gZDtpZihjKXdoaWxlKGM9Yy5uZXh0U2libGluZylpZihjPT09YilyZXR1cm4tMTtyZXR1cm4gYT8xOi0xfWZ1bmN0aW9uIG1hKGEpe3JldHVybiBmdW5jdGlvbihiKXt2YXIgYz1iLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuXCJpbnB1dFwiPT09YyYmYi50eXBlPT09YX19ZnVuY3Rpb24gbmEoYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3ZhciBjPWIubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4oXCJpbnB1dFwiPT09Y3x8XCJidXR0b25cIj09PWMpJiZiLnR5cGU9PT1hfX1mdW5jdGlvbiBvYShhKXtyZXR1cm4gaWEoZnVuY3Rpb24oYil7cmV0dXJuIGI9K2IsaWEoZnVuY3Rpb24oYyxkKXt2YXIgZSxmPWEoW10sYy5sZW5ndGgsYiksZz1mLmxlbmd0aDt3aGlsZShnLS0pY1tlPWZbZ11dJiYoY1tlXT0hKGRbZV09Y1tlXSkpfSl9KX1mdW5jdGlvbiBwYShhKXtyZXR1cm4gYSYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGEuZ2V0RWxlbWVudHNCeVRhZ05hbWUmJmF9Yz1nYS5zdXBwb3J0PXt9LGY9Z2EuaXNYTUw9ZnVuY3Rpb24oYSl7dmFyIGI9YSYmKGEub3duZXJEb2N1bWVudHx8YSkuZG9jdW1lbnRFbGVtZW50O3JldHVybiBiP1wiSFRNTFwiIT09Yi5ub2RlTmFtZTohMX0sbT1nYS5zZXREb2N1bWVudD1mdW5jdGlvbihhKXt2YXIgYixlLGc9YT9hLm93bmVyRG9jdW1lbnR8fGE6djtyZXR1cm4gZyE9PW4mJjk9PT1nLm5vZGVUeXBlJiZnLmRvY3VtZW50RWxlbWVudD8obj1nLG89Zy5kb2N1bWVudEVsZW1lbnQsZT1nLmRlZmF1bHRWaWV3LGUmJmUhPT1lLnRvcCYmKGUuYWRkRXZlbnRMaXN0ZW5lcj9lLmFkZEV2ZW50TGlzdGVuZXIoXCJ1bmxvYWRcIixlYSwhMSk6ZS5hdHRhY2hFdmVudCYmZS5hdHRhY2hFdmVudChcIm9udW5sb2FkXCIsZWEpKSxwPSFmKGcpLGMuYXR0cmlidXRlcz1qYShmdW5jdGlvbihhKXtyZXR1cm4gYS5jbGFzc05hbWU9XCJpXCIsIWEuZ2V0QXR0cmlidXRlKFwiY2xhc3NOYW1lXCIpfSksYy5nZXRFbGVtZW50c0J5VGFnTmFtZT1qYShmdW5jdGlvbihhKXtyZXR1cm4gYS5hcHBlbmRDaGlsZChnLmNyZWF0ZUNvbW1lbnQoXCJcIikpLCFhLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiKlwiKS5sZW5ndGh9KSxjLmdldEVsZW1lbnRzQnlDbGFzc05hbWU9JC50ZXN0KGcuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSksYy5nZXRCeUlkPWphKGZ1bmN0aW9uKGEpe3JldHVybiBvLmFwcGVuZENoaWxkKGEpLmlkPXUsIWcuZ2V0RWxlbWVudHNCeU5hbWV8fCFnLmdldEVsZW1lbnRzQnlOYW1lKHUpLmxlbmd0aH0pLGMuZ2V0QnlJZD8oZC5maW5kLklEPWZ1bmN0aW9uKGEsYil7aWYoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGIuZ2V0RWxlbWVudEJ5SWQmJnApe3ZhciBjPWIuZ2V0RWxlbWVudEJ5SWQoYSk7cmV0dXJuIGMmJmMucGFyZW50Tm9kZT9bY106W119fSxkLmZpbHRlci5JRD1mdW5jdGlvbihhKXt2YXIgYj1hLnJlcGxhY2UoY2EsZGEpO3JldHVybiBmdW5jdGlvbihhKXtyZXR1cm4gYS5nZXRBdHRyaWJ1dGUoXCJpZFwiKT09PWJ9fSk6KGRlbGV0ZSBkLmZpbmQuSUQsZC5maWx0ZXIuSUQ9ZnVuY3Rpb24oYSl7dmFyIGI9YS5yZXBsYWNlKGNhLGRhKTtyZXR1cm4gZnVuY3Rpb24oYSl7dmFyIGM9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGEuZ2V0QXR0cmlidXRlTm9kZSYmYS5nZXRBdHRyaWJ1dGVOb2RlKFwiaWRcIik7cmV0dXJuIGMmJmMudmFsdWU9PT1ifX0pLGQuZmluZC5UQUc9Yy5nZXRFbGVtZW50c0J5VGFnTmFtZT9mdW5jdGlvbihhLGIpe3JldHVyblwidW5kZWZpbmVkXCIhPXR5cGVvZiBiLmdldEVsZW1lbnRzQnlUYWdOYW1lP2IuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYSk6Yy5xc2E/Yi5xdWVyeVNlbGVjdG9yQWxsKGEpOnZvaWQgMH06ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPVtdLGU9MCxmPWIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYSk7aWYoXCIqXCI9PT1hKXt3aGlsZShjPWZbZSsrXSkxPT09Yy5ub2RlVHlwZSYmZC5wdXNoKGMpO3JldHVybiBkfXJldHVybiBmfSxkLmZpbmQuQ0xBU1M9Yy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lJiZmdW5jdGlvbihhLGIpe3JldHVybiBwP2IuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShhKTp2b2lkIDB9LHI9W10scT1bXSwoYy5xc2E9JC50ZXN0KGcucXVlcnlTZWxlY3RvckFsbCkpJiYoamEoZnVuY3Rpb24oYSl7by5hcHBlbmRDaGlsZChhKS5pbm5lckhUTUw9XCI8YSBpZD0nXCIrdStcIic+PC9hPjxzZWxlY3QgaWQ9J1wiK3UrXCItXFxmXScgbXNhbGxvd2NhcHR1cmU9Jyc+PG9wdGlvbiBzZWxlY3RlZD0nJz48L29wdGlvbj48L3NlbGVjdD5cIixhLnF1ZXJ5U2VsZWN0b3JBbGwoXCJbbXNhbGxvd2NhcHR1cmVePScnXVwiKS5sZW5ndGgmJnEucHVzaChcIlsqXiRdPVwiK0wrXCIqKD86Jyd8XFxcIlxcXCIpXCIpLGEucXVlcnlTZWxlY3RvckFsbChcIltzZWxlY3RlZF1cIikubGVuZ3RofHxxLnB1c2goXCJcXFxcW1wiK0wrXCIqKD86dmFsdWV8XCIrSytcIilcIiksYS5xdWVyeVNlbGVjdG9yQWxsKFwiW2lkfj1cIit1K1wiLV1cIikubGVuZ3RofHxxLnB1c2goXCJ+PVwiKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoXCI6Y2hlY2tlZFwiKS5sZW5ndGh8fHEucHVzaChcIjpjaGVja2VkXCIpLGEucXVlcnlTZWxlY3RvckFsbChcImEjXCIrdStcIisqXCIpLmxlbmd0aHx8cS5wdXNoKFwiLiMuK1srfl1cIil9KSxqYShmdW5jdGlvbihhKXt2YXIgYj1nLmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtiLnNldEF0dHJpYnV0ZShcInR5cGVcIixcImhpZGRlblwiKSxhLmFwcGVuZENoaWxkKGIpLnNldEF0dHJpYnV0ZShcIm5hbWVcIixcIkRcIiksYS5xdWVyeVNlbGVjdG9yQWxsKFwiW25hbWU9ZF1cIikubGVuZ3RoJiZxLnB1c2goXCJuYW1lXCIrTCtcIipbKl4kfCF+XT89XCIpLGEucXVlcnlTZWxlY3RvckFsbChcIjplbmFibGVkXCIpLmxlbmd0aHx8cS5wdXNoKFwiOmVuYWJsZWRcIixcIjpkaXNhYmxlZFwiKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoXCIqLDp4XCIpLHEucHVzaChcIiwuKjpcIil9KSksKGMubWF0Y2hlc1NlbGVjdG9yPSQudGVzdChzPW8ubWF0Y2hlc3x8by53ZWJraXRNYXRjaGVzU2VsZWN0b3J8fG8ubW96TWF0Y2hlc1NlbGVjdG9yfHxvLm9NYXRjaGVzU2VsZWN0b3J8fG8ubXNNYXRjaGVzU2VsZWN0b3IpKSYmamEoZnVuY3Rpb24oYSl7Yy5kaXNjb25uZWN0ZWRNYXRjaD1zLmNhbGwoYSxcImRpdlwiKSxzLmNhbGwoYSxcIltzIT0nJ106eFwiKSxyLnB1c2goXCIhPVwiLFApfSkscT1xLmxlbmd0aCYmbmV3IFJlZ0V4cChxLmpvaW4oXCJ8XCIpKSxyPXIubGVuZ3RoJiZuZXcgUmVnRXhwKHIuam9pbihcInxcIikpLGI9JC50ZXN0KG8uY29tcGFyZURvY3VtZW50UG9zaXRpb24pLHQ9Ynx8JC50ZXN0KG8uY29udGFpbnMpP2Z1bmN0aW9uKGEsYil7dmFyIGM9OT09PWEubm9kZVR5cGU/YS5kb2N1bWVudEVsZW1lbnQ6YSxkPWImJmIucGFyZW50Tm9kZTtyZXR1cm4gYT09PWR8fCEoIWR8fDEhPT1kLm5vZGVUeXBlfHwhKGMuY29udGFpbnM/Yy5jb250YWlucyhkKTphLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uJiYxNiZhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGQpKSl9OmZ1bmN0aW9uKGEsYil7aWYoYil3aGlsZShiPWIucGFyZW50Tm9kZSlpZihiPT09YSlyZXR1cm4hMDtyZXR1cm4hMX0sQj1iP2Z1bmN0aW9uKGEsYil7aWYoYT09PWIpcmV0dXJuIGw9ITAsMDt2YXIgZD0hYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbi0hYi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbjtyZXR1cm4gZD9kOihkPShhLm93bmVyRG9jdW1lbnR8fGEpPT09KGIub3duZXJEb2N1bWVudHx8Yik/YS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihiKToxLDEmZHx8IWMuc29ydERldGFjaGVkJiZiLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGEpPT09ZD9hPT09Z3x8YS5vd25lckRvY3VtZW50PT09diYmdCh2LGEpPy0xOmI9PT1nfHxiLm93bmVyRG9jdW1lbnQ9PT12JiZ0KHYsYik/MTprP0ooayxhKS1KKGssYik6MDo0JmQ/LTE6MSl9OmZ1bmN0aW9uKGEsYil7aWYoYT09PWIpcmV0dXJuIGw9ITAsMDt2YXIgYyxkPTAsZT1hLnBhcmVudE5vZGUsZj1iLnBhcmVudE5vZGUsaD1bYV0saT1bYl07aWYoIWV8fCFmKXJldHVybiBhPT09Zz8tMTpiPT09Zz8xOmU/LTE6Zj8xOms/SihrLGEpLUooayxiKTowO2lmKGU9PT1mKXJldHVybiBsYShhLGIpO2M9YTt3aGlsZShjPWMucGFyZW50Tm9kZSloLnVuc2hpZnQoYyk7Yz1iO3doaWxlKGM9Yy5wYXJlbnROb2RlKWkudW5zaGlmdChjKTt3aGlsZShoW2RdPT09aVtkXSlkKys7cmV0dXJuIGQ/bGEoaFtkXSxpW2RdKTpoW2RdPT09dj8tMTppW2RdPT09dj8xOjB9LGcpOm59LGdhLm1hdGNoZXM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gZ2EoYSxudWxsLG51bGwsYil9LGdhLm1hdGNoZXNTZWxlY3Rvcj1mdW5jdGlvbihhLGIpe2lmKChhLm93bmVyRG9jdW1lbnR8fGEpIT09biYmbShhKSxiPWIucmVwbGFjZShVLFwiPSckMSddXCIpLCEoIWMubWF0Y2hlc1NlbGVjdG9yfHwhcHx8ciYmci50ZXN0KGIpfHxxJiZxLnRlc3QoYikpKXRyeXt2YXIgZD1zLmNhbGwoYSxiKTtpZihkfHxjLmRpc2Nvbm5lY3RlZE1hdGNofHxhLmRvY3VtZW50JiYxMSE9PWEuZG9jdW1lbnQubm9kZVR5cGUpcmV0dXJuIGR9Y2F0Y2goZSl7fXJldHVybiBnYShiLG4sbnVsbCxbYV0pLmxlbmd0aD4wfSxnYS5jb250YWlucz1mdW5jdGlvbihhLGIpe3JldHVybihhLm93bmVyRG9jdW1lbnR8fGEpIT09biYmbShhKSx0KGEsYil9LGdhLmF0dHI9ZnVuY3Rpb24oYSxiKXsoYS5vd25lckRvY3VtZW50fHxhKSE9PW4mJm0oYSk7dmFyIGU9ZC5hdHRySGFuZGxlW2IudG9Mb3dlckNhc2UoKV0sZj1lJiZELmNhbGwoZC5hdHRySGFuZGxlLGIudG9Mb3dlckNhc2UoKSk/ZShhLGIsIXApOnZvaWQgMDtyZXR1cm4gdm9pZCAwIT09Zj9mOmMuYXR0cmlidXRlc3x8IXA/YS5nZXRBdHRyaWJ1dGUoYik6KGY9YS5nZXRBdHRyaWJ1dGVOb2RlKGIpKSYmZi5zcGVjaWZpZWQ/Zi52YWx1ZTpudWxsfSxnYS5lcnJvcj1mdW5jdGlvbihhKXt0aHJvdyBuZXcgRXJyb3IoXCJTeW50YXggZXJyb3IsIHVucmVjb2duaXplZCBleHByZXNzaW9uOiBcIithKX0sZ2EudW5pcXVlU29ydD1mdW5jdGlvbihhKXt2YXIgYixkPVtdLGU9MCxmPTA7aWYobD0hYy5kZXRlY3REdXBsaWNhdGVzLGs9IWMuc29ydFN0YWJsZSYmYS5zbGljZSgwKSxhLnNvcnQoQiksbCl7d2hpbGUoYj1hW2YrK10pYj09PWFbZl0mJihlPWQucHVzaChmKSk7d2hpbGUoZS0tKWEuc3BsaWNlKGRbZV0sMSl9cmV0dXJuIGs9bnVsbCxhfSxlPWdhLmdldFRleHQ9ZnVuY3Rpb24oYSl7dmFyIGIsYz1cIlwiLGQ9MCxmPWEubm9kZVR5cGU7aWYoZil7aWYoMT09PWZ8fDk9PT1mfHwxMT09PWYpe2lmKFwic3RyaW5nXCI9PXR5cGVvZiBhLnRleHRDb250ZW50KXJldHVybiBhLnRleHRDb250ZW50O2ZvcihhPWEuZmlyc3RDaGlsZDthO2E9YS5uZXh0U2libGluZyljKz1lKGEpfWVsc2UgaWYoMz09PWZ8fDQ9PT1mKXJldHVybiBhLm5vZGVWYWx1ZX1lbHNlIHdoaWxlKGI9YVtkKytdKWMrPWUoYik7cmV0dXJuIGN9LGQ9Z2Euc2VsZWN0b3JzPXtjYWNoZUxlbmd0aDo1MCxjcmVhdGVQc2V1ZG86aWEsbWF0Y2g6WCxhdHRySGFuZGxlOnt9LGZpbmQ6e30scmVsYXRpdmU6e1wiPlwiOntkaXI6XCJwYXJlbnROb2RlXCIsZmlyc3Q6ITB9LFwiIFwiOntkaXI6XCJwYXJlbnROb2RlXCJ9LFwiK1wiOntkaXI6XCJwcmV2aW91c1NpYmxpbmdcIixmaXJzdDohMH0sXCJ+XCI6e2RpcjpcInByZXZpb3VzU2libGluZ1wifX0scHJlRmlsdGVyOntBVFRSOmZ1bmN0aW9uKGEpe3JldHVybiBhWzFdPWFbMV0ucmVwbGFjZShjYSxkYSksYVszXT0oYVszXXx8YVs0XXx8YVs1XXx8XCJcIikucmVwbGFjZShjYSxkYSksXCJ+PVwiPT09YVsyXSYmKGFbM109XCIgXCIrYVszXStcIiBcIiksYS5zbGljZSgwLDQpfSxDSElMRDpmdW5jdGlvbihhKXtyZXR1cm4gYVsxXT1hWzFdLnRvTG93ZXJDYXNlKCksXCJudGhcIj09PWFbMV0uc2xpY2UoMCwzKT8oYVszXXx8Z2EuZXJyb3IoYVswXSksYVs0XT0rKGFbNF0/YVs1XSsoYVs2XXx8MSk6MiooXCJldmVuXCI9PT1hWzNdfHxcIm9kZFwiPT09YVszXSkpLGFbNV09KyhhWzddK2FbOF18fFwib2RkXCI9PT1hWzNdKSk6YVszXSYmZ2EuZXJyb3IoYVswXSksYX0sUFNFVURPOmZ1bmN0aW9uKGEpe3ZhciBiLGM9IWFbNl0mJmFbMl07cmV0dXJuIFguQ0hJTEQudGVzdChhWzBdKT9udWxsOihhWzNdP2FbMl09YVs0XXx8YVs1XXx8XCJcIjpjJiZWLnRlc3QoYykmJihiPWcoYywhMCkpJiYoYj1jLmluZGV4T2YoXCIpXCIsYy5sZW5ndGgtYiktYy5sZW5ndGgpJiYoYVswXT1hWzBdLnNsaWNlKDAsYiksYVsyXT1jLnNsaWNlKDAsYikpLGEuc2xpY2UoMCwzKSl9fSxmaWx0ZXI6e1RBRzpmdW5jdGlvbihhKXt2YXIgYj1hLnJlcGxhY2UoY2EsZGEpLnRvTG93ZXJDYXNlKCk7cmV0dXJuXCIqXCI9PT1hP2Z1bmN0aW9uKCl7cmV0dXJuITB9OmZ1bmN0aW9uKGEpe3JldHVybiBhLm5vZGVOYW1lJiZhLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1ifX0sQ0xBU1M6ZnVuY3Rpb24oYSl7dmFyIGI9eVthK1wiIFwiXTtyZXR1cm4gYnx8KGI9bmV3IFJlZ0V4cChcIihefFwiK0wrXCIpXCIrYStcIihcIitMK1wifCQpXCIpKSYmeShhLGZ1bmN0aW9uKGEpe3JldHVybiBiLnRlc3QoXCJzdHJpbmdcIj09dHlwZW9mIGEuY2xhc3NOYW1lJiZhLmNsYXNzTmFtZXx8XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGEuZ2V0QXR0cmlidXRlJiZhLmdldEF0dHJpYnV0ZShcImNsYXNzXCIpfHxcIlwiKX0pfSxBVFRSOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gZnVuY3Rpb24oZCl7dmFyIGU9Z2EuYXR0cihkLGEpO3JldHVybiBudWxsPT1lP1wiIT1cIj09PWI6Yj8oZSs9XCJcIixcIj1cIj09PWI/ZT09PWM6XCIhPVwiPT09Yj9lIT09YzpcIl49XCI9PT1iP2MmJjA9PT1lLmluZGV4T2YoYyk6XCIqPVwiPT09Yj9jJiZlLmluZGV4T2YoYyk+LTE6XCIkPVwiPT09Yj9jJiZlLnNsaWNlKC1jLmxlbmd0aCk9PT1jOlwifj1cIj09PWI/KFwiIFwiK2UucmVwbGFjZShRLFwiIFwiKStcIiBcIikuaW5kZXhPZihjKT4tMTpcInw9XCI9PT1iP2U9PT1jfHxlLnNsaWNlKDAsYy5sZW5ndGgrMSk9PT1jK1wiLVwiOiExKTohMH19LENISUxEOmZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGY9XCJudGhcIiE9PWEuc2xpY2UoMCwzKSxnPVwibGFzdFwiIT09YS5zbGljZSgtNCksaD1cIm9mLXR5cGVcIj09PWI7cmV0dXJuIDE9PT1kJiYwPT09ZT9mdW5jdGlvbihhKXtyZXR1cm4hIWEucGFyZW50Tm9kZX06ZnVuY3Rpb24oYixjLGkpe3ZhciBqLGssbCxtLG4sbyxwPWYhPT1nP1wibmV4dFNpYmxpbmdcIjpcInByZXZpb3VzU2libGluZ1wiLHE9Yi5wYXJlbnROb2RlLHI9aCYmYi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLHM9IWkmJiFoO2lmKHEpe2lmKGYpe3doaWxlKHApe2w9Yjt3aGlsZShsPWxbcF0paWYoaD9sLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1yOjE9PT1sLm5vZGVUeXBlKXJldHVybiExO289cD1cIm9ubHlcIj09PWEmJiFvJiZcIm5leHRTaWJsaW5nXCJ9cmV0dXJuITB9aWYobz1bZz9xLmZpcnN0Q2hpbGQ6cS5sYXN0Q2hpbGRdLGcmJnMpe2s9cVt1XXx8KHFbdV09e30pLGo9a1thXXx8W10sbj1qWzBdPT09dyYmalsxXSxtPWpbMF09PT13JiZqWzJdLGw9biYmcS5jaGlsZE5vZGVzW25dO3doaWxlKGw9KytuJiZsJiZsW3BdfHwobT1uPTApfHxvLnBvcCgpKWlmKDE9PT1sLm5vZGVUeXBlJiYrK20mJmw9PT1iKXtrW2FdPVt3LG4sbV07YnJlYWt9fWVsc2UgaWYocyYmKGo9KGJbdV18fChiW3VdPXt9KSlbYV0pJiZqWzBdPT09dyltPWpbMV07ZWxzZSB3aGlsZShsPSsrbiYmbCYmbFtwXXx8KG09bj0wKXx8by5wb3AoKSlpZigoaD9sLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1yOjE9PT1sLm5vZGVUeXBlKSYmKyttJiYocyYmKChsW3VdfHwobFt1XT17fSkpW2FdPVt3LG1dKSxsPT09YikpYnJlYWs7cmV0dXJuIG0tPWUsbT09PWR8fG0lZD09PTAmJm0vZD49MH19fSxQU0VVRE86ZnVuY3Rpb24oYSxiKXt2YXIgYyxlPWQucHNldWRvc1thXXx8ZC5zZXRGaWx0ZXJzW2EudG9Mb3dlckNhc2UoKV18fGdhLmVycm9yKFwidW5zdXBwb3J0ZWQgcHNldWRvOiBcIithKTtyZXR1cm4gZVt1XT9lKGIpOmUubGVuZ3RoPjE/KGM9W2EsYSxcIlwiLGJdLGQuc2V0RmlsdGVycy5oYXNPd25Qcm9wZXJ0eShhLnRvTG93ZXJDYXNlKCkpP2lhKGZ1bmN0aW9uKGEsYyl7dmFyIGQsZj1lKGEsYiksZz1mLmxlbmd0aDt3aGlsZShnLS0pZD1KKGEsZltnXSksYVtkXT0hKGNbZF09ZltnXSl9KTpmdW5jdGlvbihhKXtyZXR1cm4gZShhLDAsYyl9KTplfX0scHNldWRvczp7bm90OmlhKGZ1bmN0aW9uKGEpe3ZhciBiPVtdLGM9W10sZD1oKGEucmVwbGFjZShSLFwiJDFcIikpO3JldHVybiBkW3VdP2lhKGZ1bmN0aW9uKGEsYixjLGUpe3ZhciBmLGc9ZChhLG51bGwsZSxbXSksaD1hLmxlbmd0aDt3aGlsZShoLS0pKGY9Z1toXSkmJihhW2hdPSEoYltoXT1mKSl9KTpmdW5jdGlvbihhLGUsZil7cmV0dXJuIGJbMF09YSxkKGIsbnVsbCxmLGMpLGJbMF09bnVsbCwhYy5wb3AoKX19KSxoYXM6aWEoZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybiBnYShhLGIpLmxlbmd0aD4wfX0pLGNvbnRhaW5zOmlhKGZ1bmN0aW9uKGEpe3JldHVybiBhPWEucmVwbGFjZShjYSxkYSksZnVuY3Rpb24oYil7cmV0dXJuKGIudGV4dENvbnRlbnR8fGIuaW5uZXJUZXh0fHxlKGIpKS5pbmRleE9mKGEpPi0xfX0pLGxhbmc6aWEoZnVuY3Rpb24oYSl7cmV0dXJuIFcudGVzdChhfHxcIlwiKXx8Z2EuZXJyb3IoXCJ1bnN1cHBvcnRlZCBsYW5nOiBcIithKSxhPWEucmVwbGFjZShjYSxkYSkudG9Mb3dlckNhc2UoKSxmdW5jdGlvbihiKXt2YXIgYztkbyBpZihjPXA/Yi5sYW5nOmIuZ2V0QXR0cmlidXRlKFwieG1sOmxhbmdcIil8fGIuZ2V0QXR0cmlidXRlKFwibGFuZ1wiKSlyZXR1cm4gYz1jLnRvTG93ZXJDYXNlKCksYz09PWF8fDA9PT1jLmluZGV4T2YoYStcIi1cIik7d2hpbGUoKGI9Yi5wYXJlbnROb2RlKSYmMT09PWIubm9kZVR5cGUpO3JldHVybiExfX0pLHRhcmdldDpmdW5jdGlvbihiKXt2YXIgYz1hLmxvY2F0aW9uJiZhLmxvY2F0aW9uLmhhc2g7cmV0dXJuIGMmJmMuc2xpY2UoMSk9PT1iLmlkfSxyb290OmZ1bmN0aW9uKGEpe3JldHVybiBhPT09b30sZm9jdXM6ZnVuY3Rpb24oYSl7cmV0dXJuIGE9PT1uLmFjdGl2ZUVsZW1lbnQmJighbi5oYXNGb2N1c3x8bi5oYXNGb2N1cygpKSYmISEoYS50eXBlfHxhLmhyZWZ8fH5hLnRhYkluZGV4KX0sZW5hYmxlZDpmdW5jdGlvbihhKXtyZXR1cm4gYS5kaXNhYmxlZD09PSExfSxkaXNhYmxlZDpmdW5jdGlvbihhKXtyZXR1cm4gYS5kaXNhYmxlZD09PSEwfSxjaGVja2VkOmZ1bmN0aW9uKGEpe3ZhciBiPWEubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm5cImlucHV0XCI9PT1iJiYhIWEuY2hlY2tlZHx8XCJvcHRpb25cIj09PWImJiEhYS5zZWxlY3RlZH0sc2VsZWN0ZWQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEucGFyZW50Tm9kZSYmYS5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXgsYS5zZWxlY3RlZD09PSEwfSxlbXB0eTpmdW5jdGlvbihhKXtmb3IoYT1hLmZpcnN0Q2hpbGQ7YTthPWEubmV4dFNpYmxpbmcpaWYoYS5ub2RlVHlwZTw2KXJldHVybiExO3JldHVybiEwfSxwYXJlbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuIWQucHNldWRvcy5lbXB0eShhKX0saGVhZGVyOmZ1bmN0aW9uKGEpe3JldHVybiBaLnRlc3QoYS5ub2RlTmFtZSl9LGlucHV0OmZ1bmN0aW9uKGEpe3JldHVybiBZLnRlc3QoYS5ub2RlTmFtZSl9LGJ1dHRvbjpmdW5jdGlvbihhKXt2YXIgYj1hLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuXCJpbnB1dFwiPT09YiYmXCJidXR0b25cIj09PWEudHlwZXx8XCJidXR0b25cIj09PWJ9LHRleHQ6ZnVuY3Rpb24oYSl7dmFyIGI7cmV0dXJuXCJpbnB1dFwiPT09YS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpJiZcInRleHRcIj09PWEudHlwZSYmKG51bGw9PShiPWEuZ2V0QXR0cmlidXRlKFwidHlwZVwiKSl8fFwidGV4dFwiPT09Yi50b0xvd2VyQ2FzZSgpKX0sZmlyc3Q6b2EoZnVuY3Rpb24oKXtyZXR1cm5bMF19KSxsYXN0Om9hKGZ1bmN0aW9uKGEsYil7cmV0dXJuW2ItMV19KSxlcTpvYShmdW5jdGlvbihhLGIsYyl7cmV0dXJuWzA+Yz9jK2I6Y119KSxldmVuOm9hKGZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTA7Yj5jO2MrPTIpYS5wdXNoKGMpO3JldHVybiBhfSksb2RkOm9hKGZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTE7Yj5jO2MrPTIpYS5wdXNoKGMpO3JldHVybiBhfSksbHQ6b2EoZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD0wPmM/YytiOmM7LS1kPj0wOylhLnB1c2goZCk7cmV0dXJuIGF9KSxndDpvYShmdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkPTA+Yz9jK2I6YzsrK2Q8YjspYS5wdXNoKGQpO3JldHVybiBhfSl9fSxkLnBzZXVkb3MubnRoPWQucHNldWRvcy5lcTtmb3IoYiBpbntyYWRpbzohMCxjaGVja2JveDohMCxmaWxlOiEwLHBhc3N3b3JkOiEwLGltYWdlOiEwfSlkLnBzZXVkb3NbYl09bWEoYik7Zm9yKGIgaW57c3VibWl0OiEwLHJlc2V0OiEwfSlkLnBzZXVkb3NbYl09bmEoYik7ZnVuY3Rpb24gcWEoKXt9cWEucHJvdG90eXBlPWQuZmlsdGVycz1kLnBzZXVkb3MsZC5zZXRGaWx0ZXJzPW5ldyBxYSxnPWdhLnRva2VuaXplPWZ1bmN0aW9uKGEsYil7dmFyIGMsZSxmLGcsaCxpLGosaz16W2ErXCIgXCJdO2lmKGspcmV0dXJuIGI/MDprLnNsaWNlKDApO2g9YSxpPVtdLGo9ZC5wcmVGaWx0ZXI7d2hpbGUoaCl7KCFjfHwoZT1TLmV4ZWMoaCkpKSYmKGUmJihoPWguc2xpY2UoZVswXS5sZW5ndGgpfHxoKSxpLnB1c2goZj1bXSkpLGM9ITEsKGU9VC5leGVjKGgpKSYmKGM9ZS5zaGlmdCgpLGYucHVzaCh7dmFsdWU6Yyx0eXBlOmVbMF0ucmVwbGFjZShSLFwiIFwiKX0pLGg9aC5zbGljZShjLmxlbmd0aCkpO2ZvcihnIGluIGQuZmlsdGVyKSEoZT1YW2ddLmV4ZWMoaCkpfHxqW2ddJiYhKGU9altnXShlKSl8fChjPWUuc2hpZnQoKSxmLnB1c2goe3ZhbHVlOmMsdHlwZTpnLG1hdGNoZXM6ZX0pLGg9aC5zbGljZShjLmxlbmd0aCkpO2lmKCFjKWJyZWFrfXJldHVybiBiP2gubGVuZ3RoOmg/Z2EuZXJyb3IoYSk6eihhLGkpLnNsaWNlKDApfTtmdW5jdGlvbiByYShhKXtmb3IodmFyIGI9MCxjPWEubGVuZ3RoLGQ9XCJcIjtjPmI7YisrKWQrPWFbYl0udmFsdWU7cmV0dXJuIGR9ZnVuY3Rpb24gc2EoYSxiLGMpe3ZhciBkPWIuZGlyLGU9YyYmXCJwYXJlbnROb2RlXCI9PT1kLGY9eCsrO3JldHVybiBiLmZpcnN0P2Z1bmN0aW9uKGIsYyxmKXt3aGlsZShiPWJbZF0paWYoMT09PWIubm9kZVR5cGV8fGUpcmV0dXJuIGEoYixjLGYpfTpmdW5jdGlvbihiLGMsZyl7dmFyIGgsaSxqPVt3LGZdO2lmKGcpe3doaWxlKGI9YltkXSlpZigoMT09PWIubm9kZVR5cGV8fGUpJiZhKGIsYyxnKSlyZXR1cm4hMH1lbHNlIHdoaWxlKGI9YltkXSlpZigxPT09Yi5ub2RlVHlwZXx8ZSl7aWYoaT1iW3VdfHwoYlt1XT17fSksKGg9aVtkXSkmJmhbMF09PT13JiZoWzFdPT09ZilyZXR1cm4galsyXT1oWzJdO2lmKGlbZF09aixqWzJdPWEoYixjLGcpKXJldHVybiEwfX19ZnVuY3Rpb24gdGEoYSl7cmV0dXJuIGEubGVuZ3RoPjE/ZnVuY3Rpb24oYixjLGQpe3ZhciBlPWEubGVuZ3RoO3doaWxlKGUtLSlpZighYVtlXShiLGMsZCkpcmV0dXJuITE7cmV0dXJuITB9OmFbMF19ZnVuY3Rpb24gdWEoYSxiLGMpe2Zvcih2YXIgZD0wLGU9Yi5sZW5ndGg7ZT5kO2QrKylnYShhLGJbZF0sYyk7cmV0dXJuIGN9ZnVuY3Rpb24gdmEoYSxiLGMsZCxlKXtmb3IodmFyIGYsZz1bXSxoPTAsaT1hLmxlbmd0aCxqPW51bGwhPWI7aT5oO2grKykoZj1hW2hdKSYmKCFjfHxjKGYsZCxlKSkmJihnLnB1c2goZiksaiYmYi5wdXNoKGgpKTtyZXR1cm4gZ31mdW5jdGlvbiB3YShhLGIsYyxkLGUsZil7cmV0dXJuIGQmJiFkW3VdJiYoZD13YShkKSksZSYmIWVbdV0mJihlPXdhKGUsZikpLGlhKGZ1bmN0aW9uKGYsZyxoLGkpe3ZhciBqLGssbCxtPVtdLG49W10sbz1nLmxlbmd0aCxwPWZ8fHVhKGJ8fFwiKlwiLGgubm9kZVR5cGU/W2hdOmgsW10pLHE9IWF8fCFmJiZiP3A6dmEocCxtLGEsaCxpKSxyPWM/ZXx8KGY/YTpvfHxkKT9bXTpnOnE7aWYoYyYmYyhxLHIsaCxpKSxkKXtqPXZhKHIsbiksZChqLFtdLGgsaSksaz1qLmxlbmd0aDt3aGlsZShrLS0pKGw9altrXSkmJihyW25ba11dPSEocVtuW2tdXT1sKSl9aWYoZil7aWYoZXx8YSl7aWYoZSl7aj1bXSxrPXIubGVuZ3RoO3doaWxlKGstLSkobD1yW2tdKSYmai5wdXNoKHFba109bCk7ZShudWxsLHI9W10saixpKX1rPXIubGVuZ3RoO3doaWxlKGstLSkobD1yW2tdKSYmKGo9ZT9KKGYsbCk6bVtrXSk+LTEmJihmW2pdPSEoZ1tqXT1sKSl9fWVsc2Ugcj12YShyPT09Zz9yLnNwbGljZShvLHIubGVuZ3RoKTpyKSxlP2UobnVsbCxnLHIsaSk6SC5hcHBseShnLHIpfSl9ZnVuY3Rpb24geGEoYSl7Zm9yKHZhciBiLGMsZSxmPWEubGVuZ3RoLGc9ZC5yZWxhdGl2ZVthWzBdLnR5cGVdLGg9Z3x8ZC5yZWxhdGl2ZVtcIiBcIl0saT1nPzE6MCxrPXNhKGZ1bmN0aW9uKGEpe3JldHVybiBhPT09Yn0saCwhMCksbD1zYShmdW5jdGlvbihhKXtyZXR1cm4gSihiLGEpPi0xfSxoLCEwKSxtPVtmdW5jdGlvbihhLGMsZCl7dmFyIGU9IWcmJihkfHxjIT09ail8fCgoYj1jKS5ub2RlVHlwZT9rKGEsYyxkKTpsKGEsYyxkKSk7cmV0dXJuIGI9bnVsbCxlfV07Zj5pO2krKylpZihjPWQucmVsYXRpdmVbYVtpXS50eXBlXSltPVtzYSh0YShtKSxjKV07ZWxzZXtpZihjPWQuZmlsdGVyW2FbaV0udHlwZV0uYXBwbHkobnVsbCxhW2ldLm1hdGNoZXMpLGNbdV0pe2ZvcihlPSsraTtmPmU7ZSsrKWlmKGQucmVsYXRpdmVbYVtlXS50eXBlXSlicmVhaztyZXR1cm4gd2EoaT4xJiZ0YShtKSxpPjEmJnJhKGEuc2xpY2UoMCxpLTEpLmNvbmNhdCh7dmFsdWU6XCIgXCI9PT1hW2ktMl0udHlwZT9cIipcIjpcIlwifSkpLnJlcGxhY2UoUixcIiQxXCIpLGMsZT5pJiZ4YShhLnNsaWNlKGksZSkpLGY+ZSYmeGEoYT1hLnNsaWNlKGUpKSxmPmUmJnJhKGEpKX1tLnB1c2goYyl9cmV0dXJuIHRhKG0pfWZ1bmN0aW9uIHlhKGEsYil7dmFyIGM9Yi5sZW5ndGg+MCxlPWEubGVuZ3RoPjAsZj1mdW5jdGlvbihmLGcsaCxpLGspe3ZhciBsLG0sbyxwPTAscT1cIjBcIixyPWYmJltdLHM9W10sdD1qLHU9Znx8ZSYmZC5maW5kLlRBRyhcIipcIixrKSx2PXcrPW51bGw9PXQ/MTpNYXRoLnJhbmRvbSgpfHwuMSx4PXUubGVuZ3RoO2ZvcihrJiYoaj1nIT09biYmZyk7cSE9PXgmJm51bGwhPShsPXVbcV0pO3ErKyl7aWYoZSYmbCl7bT0wO3doaWxlKG89YVttKytdKWlmKG8obCxnLGgpKXtpLnB1c2gobCk7YnJlYWt9ayYmKHc9dil9YyYmKChsPSFvJiZsKSYmcC0tLGYmJnIucHVzaChsKSl9aWYocCs9cSxjJiZxIT09cCl7bT0wO3doaWxlKG89YlttKytdKW8ocixzLGcsaCk7aWYoZil7aWYocD4wKXdoaWxlKHEtLSlyW3FdfHxzW3FdfHwoc1txXT1GLmNhbGwoaSkpO3M9dmEocyl9SC5hcHBseShpLHMpLGsmJiFmJiZzLmxlbmd0aD4wJiZwK2IubGVuZ3RoPjEmJmdhLnVuaXF1ZVNvcnQoaSl9cmV0dXJuIGsmJih3PXYsaj10KSxyfTtyZXR1cm4gYz9pYShmKTpmfXJldHVybiBoPWdhLmNvbXBpbGU9ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPVtdLGU9W10sZj1BW2ErXCIgXCJdO2lmKCFmKXtifHwoYj1nKGEpKSxjPWIubGVuZ3RoO3doaWxlKGMtLSlmPXhhKGJbY10pLGZbdV0/ZC5wdXNoKGYpOmUucHVzaChmKTtmPUEoYSx5YShlLGQpKSxmLnNlbGVjdG9yPWF9cmV0dXJuIGZ9LGk9Z2Euc2VsZWN0PWZ1bmN0aW9uKGEsYixlLGYpe3ZhciBpLGosayxsLG0sbj1cImZ1bmN0aW9uXCI9PXR5cGVvZiBhJiZhLG89IWYmJmcoYT1uLnNlbGVjdG9yfHxhKTtpZihlPWV8fFtdLDE9PT1vLmxlbmd0aCl7aWYoaj1vWzBdPW9bMF0uc2xpY2UoMCksai5sZW5ndGg+MiYmXCJJRFwiPT09KGs9alswXSkudHlwZSYmYy5nZXRCeUlkJiY5PT09Yi5ub2RlVHlwZSYmcCYmZC5yZWxhdGl2ZVtqWzFdLnR5cGVdKXtpZihiPShkLmZpbmQuSUQoay5tYXRjaGVzWzBdLnJlcGxhY2UoY2EsZGEpLGIpfHxbXSlbMF0sIWIpcmV0dXJuIGU7biYmKGI9Yi5wYXJlbnROb2RlKSxhPWEuc2xpY2Uoai5zaGlmdCgpLnZhbHVlLmxlbmd0aCl9aT1YLm5lZWRzQ29udGV4dC50ZXN0KGEpPzA6ai5sZW5ndGg7d2hpbGUoaS0tKXtpZihrPWpbaV0sZC5yZWxhdGl2ZVtsPWsudHlwZV0pYnJlYWs7aWYoKG09ZC5maW5kW2xdKSYmKGY9bShrLm1hdGNoZXNbMF0ucmVwbGFjZShjYSxkYSksYWEudGVzdChqWzBdLnR5cGUpJiZwYShiLnBhcmVudE5vZGUpfHxiKSkpe2lmKGouc3BsaWNlKGksMSksYT1mLmxlbmd0aCYmcmEoaiksIWEpcmV0dXJuIEguYXBwbHkoZSxmKSxlO2JyZWFrfX19cmV0dXJuKG58fGgoYSxvKSkoZixiLCFwLGUsYWEudGVzdChhKSYmcGEoYi5wYXJlbnROb2RlKXx8YiksZX0sYy5zb3J0U3RhYmxlPXUuc3BsaXQoXCJcIikuc29ydChCKS5qb2luKFwiXCIpPT09dSxjLmRldGVjdER1cGxpY2F0ZXM9ISFsLG0oKSxjLnNvcnREZXRhY2hlZD1qYShmdW5jdGlvbihhKXtyZXR1cm4gMSZhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKG4uY3JlYXRlRWxlbWVudChcImRpdlwiKSl9KSxqYShmdW5jdGlvbihhKXtyZXR1cm4gYS5pbm5lckhUTUw9XCI8YSBocmVmPScjJz48L2E+XCIsXCIjXCI9PT1hLmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKFwiaHJlZlwiKX0pfHxrYShcInR5cGV8aHJlZnxoZWlnaHR8d2lkdGhcIixmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGM/dm9pZCAwOmEuZ2V0QXR0cmlidXRlKGIsXCJ0eXBlXCI9PT1iLnRvTG93ZXJDYXNlKCk/MToyKX0pLGMuYXR0cmlidXRlcyYmamEoZnVuY3Rpb24oYSl7cmV0dXJuIGEuaW5uZXJIVE1MPVwiPGlucHV0Lz5cIixhLmZpcnN0Q2hpbGQuc2V0QXR0cmlidXRlKFwidmFsdWVcIixcIlwiKSxcIlwiPT09YS5maXJzdENoaWxkLmdldEF0dHJpYnV0ZShcInZhbHVlXCIpfSl8fGthKFwidmFsdWVcIixmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGN8fFwiaW5wdXRcIiE9PWEubm9kZU5hbWUudG9Mb3dlckNhc2UoKT92b2lkIDA6YS5kZWZhdWx0VmFsdWV9KSxqYShmdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09YS5nZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKX0pfHxrYShLLGZ1bmN0aW9uKGEsYixjKXt2YXIgZDtyZXR1cm4gYz92b2lkIDA6YVtiXT09PSEwP2IudG9Mb3dlckNhc2UoKTooZD1hLmdldEF0dHJpYnV0ZU5vZGUoYikpJiZkLnNwZWNpZmllZD9kLnZhbHVlOm51bGx9KSxnYX0oYSk7bi5maW5kPXQsbi5leHByPXQuc2VsZWN0b3JzLG4uZXhwcltcIjpcIl09bi5leHByLnBzZXVkb3Msbi51bmlxdWU9dC51bmlxdWVTb3J0LG4udGV4dD10LmdldFRleHQsbi5pc1hNTERvYz10LmlzWE1MLG4uY29udGFpbnM9dC5jb250YWluczt2YXIgdT1uLmV4cHIubWF0Y2gubmVlZHNDb250ZXh0LHY9L148KFxcdyspXFxzKlxcLz8+KD86PFxcL1xcMT58KSQvLHc9L14uW146I1xcW1xcLixdKiQvO2Z1bmN0aW9uIHgoYSxiLGMpe2lmKG4uaXNGdW5jdGlvbihiKSlyZXR1cm4gbi5ncmVwKGEsZnVuY3Rpb24oYSxkKXtyZXR1cm4hIWIuY2FsbChhLGQsYSkhPT1jfSk7aWYoYi5ub2RlVHlwZSlyZXR1cm4gbi5ncmVwKGEsZnVuY3Rpb24oYSl7cmV0dXJuIGE9PT1iIT09Y30pO2lmKFwic3RyaW5nXCI9PXR5cGVvZiBiKXtpZih3LnRlc3QoYikpcmV0dXJuIG4uZmlsdGVyKGIsYSxjKTtiPW4uZmlsdGVyKGIsYSl9cmV0dXJuIG4uZ3JlcChhLGZ1bmN0aW9uKGEpe3JldHVybiBnLmNhbGwoYixhKT49MCE9PWN9KX1uLmZpbHRlcj1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9YlswXTtyZXR1cm4gYyYmKGE9XCI6bm90KFwiK2ErXCIpXCIpLDE9PT1iLmxlbmd0aCYmMT09PWQubm9kZVR5cGU/bi5maW5kLm1hdGNoZXNTZWxlY3RvcihkLGEpP1tkXTpbXTpuLmZpbmQubWF0Y2hlcyhhLG4uZ3JlcChiLGZ1bmN0aW9uKGEpe3JldHVybiAxPT09YS5ub2RlVHlwZX0pKX0sbi5mbi5leHRlbmQoe2ZpbmQ6ZnVuY3Rpb24oYSl7dmFyIGIsYz10aGlzLmxlbmd0aCxkPVtdLGU9dGhpcztpZihcInN0cmluZ1wiIT10eXBlb2YgYSlyZXR1cm4gdGhpcy5wdXNoU3RhY2sobihhKS5maWx0ZXIoZnVuY3Rpb24oKXtmb3IoYj0wO2M+YjtiKyspaWYobi5jb250YWlucyhlW2JdLHRoaXMpKXJldHVybiEwfSkpO2ZvcihiPTA7Yz5iO2IrKyluLmZpbmQoYSxlW2JdLGQpO3JldHVybiBkPXRoaXMucHVzaFN0YWNrKGM+MT9uLnVuaXF1ZShkKTpkKSxkLnNlbGVjdG9yPXRoaXMuc2VsZWN0b3I/dGhpcy5zZWxlY3RvcitcIiBcIithOmEsZH0sZmlsdGVyOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnB1c2hTdGFjayh4KHRoaXMsYXx8W10sITEpKX0sbm90OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnB1c2hTdGFjayh4KHRoaXMsYXx8W10sITApKX0saXM6ZnVuY3Rpb24oYSl7cmV0dXJuISF4KHRoaXMsXCJzdHJpbmdcIj09dHlwZW9mIGEmJnUudGVzdChhKT9uKGEpOmF8fFtdLCExKS5sZW5ndGh9fSk7dmFyIHksej0vXig/OlxccyooPFtcXHdcXFddKz4pW14+XSp8IyhbXFx3LV0qKSkkLyxBPW4uZm4uaW5pdD1mdW5jdGlvbihhLGIpe3ZhciBjLGQ7aWYoIWEpcmV0dXJuIHRoaXM7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGEpe2lmKGM9XCI8XCI9PT1hWzBdJiZcIj5cIj09PWFbYS5sZW5ndGgtMV0mJmEubGVuZ3RoPj0zP1tudWxsLGEsbnVsbF06ei5leGVjKGEpLCFjfHwhY1sxXSYmYilyZXR1cm4hYnx8Yi5qcXVlcnk/KGJ8fHkpLmZpbmQoYSk6dGhpcy5jb25zdHJ1Y3RvcihiKS5maW5kKGEpO2lmKGNbMV0pe2lmKGI9YiBpbnN0YW5jZW9mIG4/YlswXTpiLG4ubWVyZ2UodGhpcyxuLnBhcnNlSFRNTChjWzFdLGImJmIubm9kZVR5cGU/Yi5vd25lckRvY3VtZW50fHxiOmwsITApKSx2LnRlc3QoY1sxXSkmJm4uaXNQbGFpbk9iamVjdChiKSlmb3IoYyBpbiBiKW4uaXNGdW5jdGlvbih0aGlzW2NdKT90aGlzW2NdKGJbY10pOnRoaXMuYXR0cihjLGJbY10pO3JldHVybiB0aGlzfXJldHVybiBkPWwuZ2V0RWxlbWVudEJ5SWQoY1syXSksZCYmZC5wYXJlbnROb2RlJiYodGhpcy5sZW5ndGg9MSx0aGlzWzBdPWQpLHRoaXMuY29udGV4dD1sLHRoaXMuc2VsZWN0b3I9YSx0aGlzfXJldHVybiBhLm5vZGVUeXBlPyh0aGlzLmNvbnRleHQ9dGhpc1swXT1hLHRoaXMubGVuZ3RoPTEsdGhpcyk6bi5pc0Z1bmN0aW9uKGEpP1widW5kZWZpbmVkXCIhPXR5cGVvZiB5LnJlYWR5P3kucmVhZHkoYSk6YShuKToodm9pZCAwIT09YS5zZWxlY3RvciYmKHRoaXMuc2VsZWN0b3I9YS5zZWxlY3Rvcix0aGlzLmNvbnRleHQ9YS5jb250ZXh0KSxuLm1ha2VBcnJheShhLHRoaXMpKX07QS5wcm90b3R5cGU9bi5mbix5PW4obCk7dmFyIEI9L14oPzpwYXJlbnRzfHByZXYoPzpVbnRpbHxBbGwpKS8sQz17Y2hpbGRyZW46ITAsY29udGVudHM6ITAsbmV4dDohMCxwcmV2OiEwfTtuLmV4dGVuZCh7ZGlyOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1bXSxlPXZvaWQgMCE9PWM7d2hpbGUoKGE9YVtiXSkmJjkhPT1hLm5vZGVUeXBlKWlmKDE9PT1hLm5vZGVUeXBlKXtpZihlJiZuKGEpLmlzKGMpKWJyZWFrO2QucHVzaChhKX1yZXR1cm4gZH0sc2libGluZzpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz1bXTthO2E9YS5uZXh0U2libGluZykxPT09YS5ub2RlVHlwZSYmYSE9PWImJmMucHVzaChhKTtyZXR1cm4gY319KSxuLmZuLmV4dGVuZCh7aGFzOmZ1bmN0aW9uKGEpe3ZhciBiPW4oYSx0aGlzKSxjPWIubGVuZ3RoO3JldHVybiB0aGlzLmZpbHRlcihmdW5jdGlvbigpe2Zvcih2YXIgYT0wO2M+YTthKyspaWYobi5jb250YWlucyh0aGlzLGJbYV0pKXJldHVybiEwfSl9LGNsb3Nlc3Q6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGMsZD0wLGU9dGhpcy5sZW5ndGgsZj1bXSxnPXUudGVzdChhKXx8XCJzdHJpbmdcIiE9dHlwZW9mIGE/bihhLGJ8fHRoaXMuY29udGV4dCk6MDtlPmQ7ZCsrKWZvcihjPXRoaXNbZF07YyYmYyE9PWI7Yz1jLnBhcmVudE5vZGUpaWYoYy5ub2RlVHlwZTwxMSYmKGc/Zy5pbmRleChjKT4tMToxPT09Yy5ub2RlVHlwZSYmbi5maW5kLm1hdGNoZXNTZWxlY3RvcihjLGEpKSl7Zi5wdXNoKGMpO2JyZWFrfXJldHVybiB0aGlzLnB1c2hTdGFjayhmLmxlbmd0aD4xP24udW5pcXVlKGYpOmYpfSxpbmRleDpmdW5jdGlvbihhKXtyZXR1cm4gYT9cInN0cmluZ1wiPT10eXBlb2YgYT9nLmNhbGwobihhKSx0aGlzWzBdKTpnLmNhbGwodGhpcyxhLmpxdWVyeT9hWzBdOmEpOnRoaXNbMF0mJnRoaXNbMF0ucGFyZW50Tm9kZT90aGlzLmZpcnN0KCkucHJldkFsbCgpLmxlbmd0aDotMX0sYWRkOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMucHVzaFN0YWNrKG4udW5pcXVlKG4ubWVyZ2UodGhpcy5nZXQoKSxuKGEsYikpKSl9LGFkZEJhY2s6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuYWRkKG51bGw9PWE/dGhpcy5wcmV2T2JqZWN0OnRoaXMucHJldk9iamVjdC5maWx0ZXIoYSkpfX0pO2Z1bmN0aW9uIEQoYSxiKXt3aGlsZSgoYT1hW2JdKSYmMSE9PWEubm9kZVR5cGUpO3JldHVybiBhfW4uZWFjaCh7cGFyZW50OmZ1bmN0aW9uKGEpe3ZhciBiPWEucGFyZW50Tm9kZTtyZXR1cm4gYiYmMTEhPT1iLm5vZGVUeXBlP2I6bnVsbH0scGFyZW50czpmdW5jdGlvbihhKXtyZXR1cm4gbi5kaXIoYSxcInBhcmVudE5vZGVcIil9LHBhcmVudHNVbnRpbDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIG4uZGlyKGEsXCJwYXJlbnROb2RlXCIsYyl9LG5leHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIEQoYSxcIm5leHRTaWJsaW5nXCIpfSxwcmV2OmZ1bmN0aW9uKGEpe3JldHVybiBEKGEsXCJwcmV2aW91c1NpYmxpbmdcIil9LG5leHRBbGw6ZnVuY3Rpb24oYSl7cmV0dXJuIG4uZGlyKGEsXCJuZXh0U2libGluZ1wiKX0scHJldkFsbDpmdW5jdGlvbihhKXtyZXR1cm4gbi5kaXIoYSxcInByZXZpb3VzU2libGluZ1wiKX0sbmV4dFVudGlsOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gbi5kaXIoYSxcIm5leHRTaWJsaW5nXCIsYyl9LHByZXZVbnRpbDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIG4uZGlyKGEsXCJwcmV2aW91c1NpYmxpbmdcIixjKX0sc2libGluZ3M6ZnVuY3Rpb24oYSl7cmV0dXJuIG4uc2libGluZygoYS5wYXJlbnROb2RlfHx7fSkuZmlyc3RDaGlsZCxhKX0sY2hpbGRyZW46ZnVuY3Rpb24oYSl7cmV0dXJuIG4uc2libGluZyhhLmZpcnN0Q2hpbGQpfSxjb250ZW50czpmdW5jdGlvbihhKXtyZXR1cm4gYS5jb250ZW50RG9jdW1lbnR8fG4ubWVyZ2UoW10sYS5jaGlsZE5vZGVzKX19LGZ1bmN0aW9uKGEsYil7bi5mblthXT1mdW5jdGlvbihjLGQpe3ZhciBlPW4ubWFwKHRoaXMsYixjKTtyZXR1cm5cIlVudGlsXCIhPT1hLnNsaWNlKC01KSYmKGQ9YyksZCYmXCJzdHJpbmdcIj09dHlwZW9mIGQmJihlPW4uZmlsdGVyKGQsZSkpLHRoaXMubGVuZ3RoPjEmJihDW2FdfHxuLnVuaXF1ZShlKSxCLnRlc3QoYSkmJmUucmV2ZXJzZSgpKSx0aGlzLnB1c2hTdGFjayhlKX19KTt2YXIgRT0vXFxTKy9nLEY9e307ZnVuY3Rpb24gRyhhKXt2YXIgYj1GW2FdPXt9O3JldHVybiBuLmVhY2goYS5tYXRjaChFKXx8W10sZnVuY3Rpb24oYSxjKXtiW2NdPSEwfSksYn1uLkNhbGxiYWNrcz1mdW5jdGlvbihhKXthPVwic3RyaW5nXCI9PXR5cGVvZiBhP0ZbYV18fEcoYSk6bi5leHRlbmQoe30sYSk7dmFyIGIsYyxkLGUsZixnLGg9W10saT0hYS5vbmNlJiZbXSxqPWZ1bmN0aW9uKGwpe2ZvcihiPWEubWVtb3J5JiZsLGM9ITAsZz1lfHwwLGU9MCxmPWgubGVuZ3RoLGQ9ITA7aCYmZj5nO2crKylpZihoW2ddLmFwcGx5KGxbMF0sbFsxXSk9PT0hMSYmYS5zdG9wT25GYWxzZSl7Yj0hMTticmVha31kPSExLGgmJihpP2kubGVuZ3RoJiZqKGkuc2hpZnQoKSk6Yj9oPVtdOmsuZGlzYWJsZSgpKX0saz17YWRkOmZ1bmN0aW9uKCl7aWYoaCl7dmFyIGM9aC5sZW5ndGg7IWZ1bmN0aW9uIGcoYil7bi5lYWNoKGIsZnVuY3Rpb24oYixjKXt2YXIgZD1uLnR5cGUoYyk7XCJmdW5jdGlvblwiPT09ZD9hLnVuaXF1ZSYmay5oYXMoYyl8fGgucHVzaChjKTpjJiZjLmxlbmd0aCYmXCJzdHJpbmdcIiE9PWQmJmcoYyl9KX0oYXJndW1lbnRzKSxkP2Y9aC5sZW5ndGg6YiYmKGU9YyxqKGIpKX1yZXR1cm4gdGhpc30scmVtb3ZlOmZ1bmN0aW9uKCl7cmV0dXJuIGgmJm4uZWFjaChhcmd1bWVudHMsZnVuY3Rpb24oYSxiKXt2YXIgYzt3aGlsZSgoYz1uLmluQXJyYXkoYixoLGMpKT4tMSloLnNwbGljZShjLDEpLGQmJihmPj1jJiZmLS0sZz49YyYmZy0tKX0pLHRoaXN9LGhhczpmdW5jdGlvbihhKXtyZXR1cm4gYT9uLmluQXJyYXkoYSxoKT4tMTohKCFofHwhaC5sZW5ndGgpfSxlbXB0eTpmdW5jdGlvbigpe3JldHVybiBoPVtdLGY9MCx0aGlzfSxkaXNhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIGg9aT1iPXZvaWQgMCx0aGlzfSxkaXNhYmxlZDpmdW5jdGlvbigpe3JldHVybiFofSxsb2NrOmZ1bmN0aW9uKCl7cmV0dXJuIGk9dm9pZCAwLGJ8fGsuZGlzYWJsZSgpLHRoaXN9LGxvY2tlZDpmdW5jdGlvbigpe3JldHVybiFpfSxmaXJlV2l0aDpmdW5jdGlvbihhLGIpe3JldHVybiFofHxjJiYhaXx8KGI9Ynx8W10sYj1bYSxiLnNsaWNlP2Iuc2xpY2UoKTpiXSxkP2kucHVzaChiKTpqKGIpKSx0aGlzfSxmaXJlOmZ1bmN0aW9uKCl7cmV0dXJuIGsuZmlyZVdpdGgodGhpcyxhcmd1bWVudHMpLHRoaXN9LGZpcmVkOmZ1bmN0aW9uKCl7cmV0dXJuISFjfX07cmV0dXJuIGt9LG4uZXh0ZW5kKHtEZWZlcnJlZDpmdW5jdGlvbihhKXt2YXIgYj1bW1wicmVzb2x2ZVwiLFwiZG9uZVwiLG4uQ2FsbGJhY2tzKFwib25jZSBtZW1vcnlcIiksXCJyZXNvbHZlZFwiXSxbXCJyZWplY3RcIixcImZhaWxcIixuLkNhbGxiYWNrcyhcIm9uY2UgbWVtb3J5XCIpLFwicmVqZWN0ZWRcIl0sW1wibm90aWZ5XCIsXCJwcm9ncmVzc1wiLG4uQ2FsbGJhY2tzKFwibWVtb3J5XCIpXV0sYz1cInBlbmRpbmdcIixkPXtzdGF0ZTpmdW5jdGlvbigpe3JldHVybiBjfSxhbHdheXM6ZnVuY3Rpb24oKXtyZXR1cm4gZS5kb25lKGFyZ3VtZW50cykuZmFpbChhcmd1bWVudHMpLHRoaXN9LHRoZW46ZnVuY3Rpb24oKXt2YXIgYT1hcmd1bWVudHM7cmV0dXJuIG4uRGVmZXJyZWQoZnVuY3Rpb24oYyl7bi5lYWNoKGIsZnVuY3Rpb24oYixmKXt2YXIgZz1uLmlzRnVuY3Rpb24oYVtiXSkmJmFbYl07ZVtmWzFdXShmdW5jdGlvbigpe3ZhciBhPWcmJmcuYXBwbHkodGhpcyxhcmd1bWVudHMpO2EmJm4uaXNGdW5jdGlvbihhLnByb21pc2UpP2EucHJvbWlzZSgpLmRvbmUoYy5yZXNvbHZlKS5mYWlsKGMucmVqZWN0KS5wcm9ncmVzcyhjLm5vdGlmeSk6Y1tmWzBdK1wiV2l0aFwiXSh0aGlzPT09ZD9jLnByb21pc2UoKTp0aGlzLGc/W2FdOmFyZ3VtZW50cyl9KX0pLGE9bnVsbH0pLnByb21pc2UoKX0scHJvbWlzZTpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbCE9YT9uLmV4dGVuZChhLGQpOmR9fSxlPXt9O3JldHVybiBkLnBpcGU9ZC50aGVuLG4uZWFjaChiLGZ1bmN0aW9uKGEsZil7dmFyIGc9ZlsyXSxoPWZbM107ZFtmWzFdXT1nLmFkZCxoJiZnLmFkZChmdW5jdGlvbigpe2M9aH0sYlsxXmFdWzJdLmRpc2FibGUsYlsyXVsyXS5sb2NrKSxlW2ZbMF1dPWZ1bmN0aW9uKCl7cmV0dXJuIGVbZlswXStcIldpdGhcIl0odGhpcz09PWU/ZDp0aGlzLGFyZ3VtZW50cyksdGhpc30sZVtmWzBdK1wiV2l0aFwiXT1nLmZpcmVXaXRofSksZC5wcm9taXNlKGUpLGEmJmEuY2FsbChlLGUpLGV9LHdoZW46ZnVuY3Rpb24oYSl7dmFyIGI9MCxjPWQuY2FsbChhcmd1bWVudHMpLGU9Yy5sZW5ndGgsZj0xIT09ZXx8YSYmbi5pc0Z1bmN0aW9uKGEucHJvbWlzZSk/ZTowLGc9MT09PWY/YTpuLkRlZmVycmVkKCksaD1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIGZ1bmN0aW9uKGUpe2JbYV09dGhpcyxjW2FdPWFyZ3VtZW50cy5sZW5ndGg+MT9kLmNhbGwoYXJndW1lbnRzKTplLGM9PT1pP2cubm90aWZ5V2l0aChiLGMpOi0tZnx8Zy5yZXNvbHZlV2l0aChiLGMpfX0saSxqLGs7aWYoZT4xKWZvcihpPW5ldyBBcnJheShlKSxqPW5ldyBBcnJheShlKSxrPW5ldyBBcnJheShlKTtlPmI7YisrKWNbYl0mJm4uaXNGdW5jdGlvbihjW2JdLnByb21pc2UpP2NbYl0ucHJvbWlzZSgpLmRvbmUoaChiLGssYykpLmZhaWwoZy5yZWplY3QpLnByb2dyZXNzKGgoYixqLGkpKTotLWY7cmV0dXJuIGZ8fGcucmVzb2x2ZVdpdGgoayxjKSxnLnByb21pc2UoKX19KTt2YXIgSDtuLmZuLnJlYWR5PWZ1bmN0aW9uKGEpe3JldHVybiBuLnJlYWR5LnByb21pc2UoKS5kb25lKGEpLHRoaXN9LG4uZXh0ZW5kKHtpc1JlYWR5OiExLHJlYWR5V2FpdDoxLGhvbGRSZWFkeTpmdW5jdGlvbihhKXthP24ucmVhZHlXYWl0Kys6bi5yZWFkeSghMCl9LHJlYWR5OmZ1bmN0aW9uKGEpeyhhPT09ITA/LS1uLnJlYWR5V2FpdDpuLmlzUmVhZHkpfHwobi5pc1JlYWR5PSEwLGEhPT0hMCYmLS1uLnJlYWR5V2FpdD4wfHwoSC5yZXNvbHZlV2l0aChsLFtuXSksbi5mbi50cmlnZ2VySGFuZGxlciYmKG4obCkudHJpZ2dlckhhbmRsZXIoXCJyZWFkeVwiKSxuKGwpLm9mZihcInJlYWR5XCIpKSkpfX0pO2Z1bmN0aW9uIEkoKXtsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsSSwhMSksYS5yZW1vdmVFdmVudExpc3RlbmVyKFwibG9hZFwiLEksITEpLG4ucmVhZHkoKX1uLnJlYWR5LnByb21pc2U9ZnVuY3Rpb24oYil7cmV0dXJuIEh8fChIPW4uRGVmZXJyZWQoKSxcImNvbXBsZXRlXCI9PT1sLnJlYWR5U3RhdGU/c2V0VGltZW91dChuLnJlYWR5KToobC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLEksITEpLGEuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIixJLCExKSkpLEgucHJvbWlzZShiKX0sbi5yZWFkeS5wcm9taXNlKCk7dmFyIEo9bi5hY2Nlc3M9ZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyl7dmFyIGg9MCxpPWEubGVuZ3RoLGo9bnVsbD09YztpZihcIm9iamVjdFwiPT09bi50eXBlKGMpKXtlPSEwO2ZvcihoIGluIGMpbi5hY2Nlc3MoYSxiLGgsY1toXSwhMCxmLGcpfWVsc2UgaWYodm9pZCAwIT09ZCYmKGU9ITAsbi5pc0Z1bmN0aW9uKGQpfHwoZz0hMCksaiYmKGc/KGIuY2FsbChhLGQpLGI9bnVsbCk6KGo9YixiPWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gai5jYWxsKG4oYSksYyl9KSksYikpZm9yKDtpPmg7aCsrKWIoYVtoXSxjLGc/ZDpkLmNhbGwoYVtoXSxoLGIoYVtoXSxjKSkpO3JldHVybiBlP2E6aj9iLmNhbGwoYSk6aT9iKGFbMF0sYyk6Zn07bi5hY2NlcHREYXRhPWZ1bmN0aW9uKGEpe3JldHVybiAxPT09YS5ub2RlVHlwZXx8OT09PWEubm9kZVR5cGV8fCErYS5ub2RlVHlwZX07ZnVuY3Rpb24gSygpe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLmNhY2hlPXt9LDAse2dldDpmdW5jdGlvbigpe3JldHVybnt9fX0pLHRoaXMuZXhwYW5kbz1uLmV4cGFuZG8rSy51aWQrK31LLnVpZD0xLEsuYWNjZXB0cz1uLmFjY2VwdERhdGEsSy5wcm90b3R5cGU9e2tleTpmdW5jdGlvbihhKXtpZighSy5hY2NlcHRzKGEpKXJldHVybiAwO3ZhciBiPXt9LGM9YVt0aGlzLmV4cGFuZG9dO2lmKCFjKXtjPUsudWlkKys7dHJ5e2JbdGhpcy5leHBhbmRvXT17dmFsdWU6Y30sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoYSxiKX1jYXRjaChkKXtiW3RoaXMuZXhwYW5kb109YyxuLmV4dGVuZChhLGIpfX1yZXR1cm4gdGhpcy5jYWNoZVtjXXx8KHRoaXMuY2FjaGVbY109e30pLGN9LHNldDpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZT10aGlzLmtleShhKSxmPXRoaXMuY2FjaGVbZV07aWYoXCJzdHJpbmdcIj09dHlwZW9mIGIpZltiXT1jO2Vsc2UgaWYobi5pc0VtcHR5T2JqZWN0KGYpKW4uZXh0ZW5kKHRoaXMuY2FjaGVbZV0sYik7ZWxzZSBmb3IoZCBpbiBiKWZbZF09YltkXTtyZXR1cm4gZn0sZ2V0OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5jYWNoZVt0aGlzLmtleShhKV07cmV0dXJuIHZvaWQgMD09PWI/YzpjW2JdfSxhY2Nlc3M6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkO3JldHVybiB2b2lkIDA9PT1ifHxiJiZcInN0cmluZ1wiPT10eXBlb2YgYiYmdm9pZCAwPT09Yz8oZD10aGlzLmdldChhLGIpLHZvaWQgMCE9PWQ/ZDp0aGlzLmdldChhLG4uY2FtZWxDYXNlKGIpKSk6KHRoaXMuc2V0KGEsYixjKSx2b2lkIDAhPT1jP2M6Yil9LHJlbW92ZTpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZSxmPXRoaXMua2V5KGEpLGc9dGhpcy5jYWNoZVtmXTtpZih2b2lkIDA9PT1iKXRoaXMuY2FjaGVbZl09e307ZWxzZXtuLmlzQXJyYXkoYik/ZD1iLmNvbmNhdChiLm1hcChuLmNhbWVsQ2FzZSkpOihlPW4uY2FtZWxDYXNlKGIpLGIgaW4gZz9kPVtiLGVdOihkPWUsZD1kIGluIGc/W2RdOmQubWF0Y2goRSl8fFtdKSksYz1kLmxlbmd0aDt3aGlsZShjLS0pZGVsZXRlIGdbZFtjXV19fSxoYXNEYXRhOmZ1bmN0aW9uKGEpe3JldHVybiFuLmlzRW1wdHlPYmplY3QodGhpcy5jYWNoZVthW3RoaXMuZXhwYW5kb11dfHx7fSl9LGRpc2NhcmQ6ZnVuY3Rpb24oYSl7YVt0aGlzLmV4cGFuZG9dJiZkZWxldGUgdGhpcy5jYWNoZVthW3RoaXMuZXhwYW5kb11dfX07dmFyIEw9bmV3IEssTT1uZXcgSyxOPS9eKD86XFx7W1xcd1xcV10qXFx9fFxcW1tcXHdcXFddKlxcXSkkLyxPPS8oW0EtWl0pL2c7ZnVuY3Rpb24gUChhLGIsYyl7dmFyIGQ7aWYodm9pZCAwPT09YyYmMT09PWEubm9kZVR5cGUpaWYoZD1cImRhdGEtXCIrYi5yZXBsYWNlKE8sXCItJDFcIikudG9Mb3dlckNhc2UoKSxjPWEuZ2V0QXR0cmlidXRlKGQpLFwic3RyaW5nXCI9PXR5cGVvZiBjKXt0cnl7Yz1cInRydWVcIj09PWM/ITA6XCJmYWxzZVwiPT09Yz8hMTpcIm51bGxcIj09PWM/bnVsbDorYytcIlwiPT09Yz8rYzpOLnRlc3QoYyk/bi5wYXJzZUpTT04oYyk6Y31jYXRjaChlKXt9TS5zZXQoYSxiLGMpfWVsc2UgYz12b2lkIDA7cmV0dXJuIGN9bi5leHRlbmQoe2hhc0RhdGE6ZnVuY3Rpb24oYSl7cmV0dXJuIE0uaGFzRGF0YShhKXx8TC5oYXNEYXRhKGEpfSxkYXRhOmZ1bmN0aW9uKGEsYixjKXtcbnJldHVybiBNLmFjY2VzcyhhLGIsYyl9LHJlbW92ZURhdGE6ZnVuY3Rpb24oYSxiKXtNLnJlbW92ZShhLGIpfSxfZGF0YTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIEwuYWNjZXNzKGEsYixjKX0sX3JlbW92ZURhdGE6ZnVuY3Rpb24oYSxiKXtMLnJlbW92ZShhLGIpfX0pLG4uZm4uZXh0ZW5kKHtkYXRhOmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlLGY9dGhpc1swXSxnPWYmJmYuYXR0cmlidXRlcztpZih2b2lkIDA9PT1hKXtpZih0aGlzLmxlbmd0aCYmKGU9TS5nZXQoZiksMT09PWYubm9kZVR5cGUmJiFMLmdldChmLFwiaGFzRGF0YUF0dHJzXCIpKSl7Yz1nLmxlbmd0aDt3aGlsZShjLS0pZ1tjXSYmKGQ9Z1tjXS5uYW1lLDA9PT1kLmluZGV4T2YoXCJkYXRhLVwiKSYmKGQ9bi5jYW1lbENhc2UoZC5zbGljZSg1KSksUChmLGQsZVtkXSkpKTtMLnNldChmLFwiaGFzRGF0YUF0dHJzXCIsITApfXJldHVybiBlfXJldHVyblwib2JqZWN0XCI9PXR5cGVvZiBhP3RoaXMuZWFjaChmdW5jdGlvbigpe00uc2V0KHRoaXMsYSl9KTpKKHRoaXMsZnVuY3Rpb24oYil7dmFyIGMsZD1uLmNhbWVsQ2FzZShhKTtpZihmJiZ2b2lkIDA9PT1iKXtpZihjPU0uZ2V0KGYsYSksdm9pZCAwIT09YylyZXR1cm4gYztpZihjPU0uZ2V0KGYsZCksdm9pZCAwIT09YylyZXR1cm4gYztpZihjPVAoZixkLHZvaWQgMCksdm9pZCAwIT09YylyZXR1cm4gY31lbHNlIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBjPU0uZ2V0KHRoaXMsZCk7TS5zZXQodGhpcyxkLGIpLC0xIT09YS5pbmRleE9mKFwiLVwiKSYmdm9pZCAwIT09YyYmTS5zZXQodGhpcyxhLGIpfSl9LG51bGwsYixhcmd1bWVudHMubGVuZ3RoPjEsbnVsbCwhMCl9LHJlbW92ZURhdGE6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe00ucmVtb3ZlKHRoaXMsYSl9KX19KSxuLmV4dGVuZCh7cXVldWU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkO3JldHVybiBhPyhiPShifHxcImZ4XCIpK1wicXVldWVcIixkPUwuZ2V0KGEsYiksYyYmKCFkfHxuLmlzQXJyYXkoYyk/ZD1MLmFjY2VzcyhhLGIsbi5tYWtlQXJyYXkoYykpOmQucHVzaChjKSksZHx8W10pOnZvaWQgMH0sZGVxdWV1ZTpmdW5jdGlvbihhLGIpe2I9Ynx8XCJmeFwiO3ZhciBjPW4ucXVldWUoYSxiKSxkPWMubGVuZ3RoLGU9Yy5zaGlmdCgpLGY9bi5fcXVldWVIb29rcyhhLGIpLGc9ZnVuY3Rpb24oKXtuLmRlcXVldWUoYSxiKX07XCJpbnByb2dyZXNzXCI9PT1lJiYoZT1jLnNoaWZ0KCksZC0tKSxlJiYoXCJmeFwiPT09YiYmYy51bnNoaWZ0KFwiaW5wcm9ncmVzc1wiKSxkZWxldGUgZi5zdG9wLGUuY2FsbChhLGcsZikpLCFkJiZmJiZmLmVtcHR5LmZpcmUoKX0sX3F1ZXVlSG9va3M6ZnVuY3Rpb24oYSxiKXt2YXIgYz1iK1wicXVldWVIb29rc1wiO3JldHVybiBMLmdldChhLGMpfHxMLmFjY2VzcyhhLGMse2VtcHR5Om4uQ2FsbGJhY2tzKFwib25jZSBtZW1vcnlcIikuYWRkKGZ1bmN0aW9uKCl7TC5yZW1vdmUoYSxbYitcInF1ZXVlXCIsY10pfSl9KX19KSxuLmZuLmV4dGVuZCh7cXVldWU6ZnVuY3Rpb24oYSxiKXt2YXIgYz0yO3JldHVyblwic3RyaW5nXCIhPXR5cGVvZiBhJiYoYj1hLGE9XCJmeFwiLGMtLSksYXJndW1lbnRzLmxlbmd0aDxjP24ucXVldWUodGhpc1swXSxhKTp2b2lkIDA9PT1iP3RoaXM6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGM9bi5xdWV1ZSh0aGlzLGEsYik7bi5fcXVldWVIb29rcyh0aGlzLGEpLFwiZnhcIj09PWEmJlwiaW5wcm9ncmVzc1wiIT09Y1swXSYmbi5kZXF1ZXVlKHRoaXMsYSl9KX0sZGVxdWV1ZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7bi5kZXF1ZXVlKHRoaXMsYSl9KX0sY2xlYXJRdWV1ZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5xdWV1ZShhfHxcImZ4XCIsW10pfSxwcm9taXNlOmZ1bmN0aW9uKGEsYil7dmFyIGMsZD0xLGU9bi5EZWZlcnJlZCgpLGY9dGhpcyxnPXRoaXMubGVuZ3RoLGg9ZnVuY3Rpb24oKXstLWR8fGUucmVzb2x2ZVdpdGgoZixbZl0pfTtcInN0cmluZ1wiIT10eXBlb2YgYSYmKGI9YSxhPXZvaWQgMCksYT1hfHxcImZ4XCI7d2hpbGUoZy0tKWM9TC5nZXQoZltnXSxhK1wicXVldWVIb29rc1wiKSxjJiZjLmVtcHR5JiYoZCsrLGMuZW1wdHkuYWRkKGgpKTtyZXR1cm4gaCgpLGUucHJvbWlzZShiKX19KTt2YXIgUT0vWystXT8oPzpcXGQqXFwufClcXGQrKD86W2VFXVsrLV0/XFxkK3wpLy5zb3VyY2UsUj1bXCJUb3BcIixcIlJpZ2h0XCIsXCJCb3R0b21cIixcIkxlZnRcIl0sUz1mdW5jdGlvbihhLGIpe3JldHVybiBhPWJ8fGEsXCJub25lXCI9PT1uLmNzcyhhLFwiZGlzcGxheVwiKXx8IW4uY29udGFpbnMoYS5vd25lckRvY3VtZW50LGEpfSxUPS9eKD86Y2hlY2tib3h8cmFkaW8pJC9pOyFmdW5jdGlvbigpe3ZhciBhPWwuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLGI9YS5hcHBlbmRDaGlsZChsLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikpLGM9bC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7Yy5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsXCJyYWRpb1wiKSxjLnNldEF0dHJpYnV0ZShcImNoZWNrZWRcIixcImNoZWNrZWRcIiksYy5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIsXCJ0XCIpLGIuYXBwZW5kQ2hpbGQoYyksay5jaGVja0Nsb25lPWIuY2xvbmVOb2RlKCEwKS5jbG9uZU5vZGUoITApLmxhc3RDaGlsZC5jaGVja2VkLGIuaW5uZXJIVE1MPVwiPHRleHRhcmVhPng8L3RleHRhcmVhPlwiLGsubm9DbG9uZUNoZWNrZWQ9ISFiLmNsb25lTm9kZSghMCkubGFzdENoaWxkLmRlZmF1bHRWYWx1ZX0oKTt2YXIgVT1cInVuZGVmaW5lZFwiO2suZm9jdXNpbkJ1YmJsZXM9XCJvbmZvY3VzaW5cImluIGE7dmFyIFY9L15rZXkvLFc9L14oPzptb3VzZXxwb2ludGVyfGNvbnRleHRtZW51KXxjbGljay8sWD0vXig/OmZvY3VzaW5mb2N1c3xmb2N1c291dGJsdXIpJC8sWT0vXihbXi5dKikoPzpcXC4oLispfCkkLztmdW5jdGlvbiBaKCl7cmV0dXJuITB9ZnVuY3Rpb24gJCgpe3JldHVybiExfWZ1bmN0aW9uIF8oKXt0cnl7cmV0dXJuIGwuYWN0aXZlRWxlbWVudH1jYXRjaChhKXt9fW4uZXZlbnQ9e2dsb2JhbDp7fSxhZGQ6ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZixnLGgsaSxqLGssbCxtLG8scCxxLHI9TC5nZXQoYSk7aWYocil7Yy5oYW5kbGVyJiYoZj1jLGM9Zi5oYW5kbGVyLGU9Zi5zZWxlY3RvciksYy5ndWlkfHwoYy5ndWlkPW4uZ3VpZCsrKSwoaT1yLmV2ZW50cyl8fChpPXIuZXZlbnRzPXt9KSwoZz1yLmhhbmRsZSl8fChnPXIuaGFuZGxlPWZ1bmN0aW9uKGIpe3JldHVybiB0eXBlb2YgbiE9PVUmJm4uZXZlbnQudHJpZ2dlcmVkIT09Yi50eXBlP24uZXZlbnQuZGlzcGF0Y2guYXBwbHkoYSxhcmd1bWVudHMpOnZvaWQgMH0pLGI9KGJ8fFwiXCIpLm1hdGNoKEUpfHxbXCJcIl0saj1iLmxlbmd0aDt3aGlsZShqLS0paD1ZLmV4ZWMoYltqXSl8fFtdLG89cT1oWzFdLHA9KGhbMl18fFwiXCIpLnNwbGl0KFwiLlwiKS5zb3J0KCksbyYmKGw9bi5ldmVudC5zcGVjaWFsW29dfHx7fSxvPShlP2wuZGVsZWdhdGVUeXBlOmwuYmluZFR5cGUpfHxvLGw9bi5ldmVudC5zcGVjaWFsW29dfHx7fSxrPW4uZXh0ZW5kKHt0eXBlOm8sb3JpZ1R5cGU6cSxkYXRhOmQsaGFuZGxlcjpjLGd1aWQ6Yy5ndWlkLHNlbGVjdG9yOmUsbmVlZHNDb250ZXh0OmUmJm4uZXhwci5tYXRjaC5uZWVkc0NvbnRleHQudGVzdChlKSxuYW1lc3BhY2U6cC5qb2luKFwiLlwiKX0sZiksKG09aVtvXSl8fChtPWlbb109W10sbS5kZWxlZ2F0ZUNvdW50PTAsbC5zZXR1cCYmbC5zZXR1cC5jYWxsKGEsZCxwLGcpIT09ITF8fGEuYWRkRXZlbnRMaXN0ZW5lciYmYS5hZGRFdmVudExpc3RlbmVyKG8sZywhMSkpLGwuYWRkJiYobC5hZGQuY2FsbChhLGspLGsuaGFuZGxlci5ndWlkfHwoay5oYW5kbGVyLmd1aWQ9Yy5ndWlkKSksZT9tLnNwbGljZShtLmRlbGVnYXRlQ291bnQrKywwLGspOm0ucHVzaChrKSxuLmV2ZW50Lmdsb2JhbFtvXT0hMCl9fSxyZW1vdmU6ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZixnLGgsaSxqLGssbCxtLG8scCxxLHI9TC5oYXNEYXRhKGEpJiZMLmdldChhKTtpZihyJiYoaT1yLmV2ZW50cykpe2I9KGJ8fFwiXCIpLm1hdGNoKEUpfHxbXCJcIl0saj1iLmxlbmd0aDt3aGlsZShqLS0paWYoaD1ZLmV4ZWMoYltqXSl8fFtdLG89cT1oWzFdLHA9KGhbMl18fFwiXCIpLnNwbGl0KFwiLlwiKS5zb3J0KCksbyl7bD1uLmV2ZW50LnNwZWNpYWxbb118fHt9LG89KGQ/bC5kZWxlZ2F0ZVR5cGU6bC5iaW5kVHlwZSl8fG8sbT1pW29dfHxbXSxoPWhbMl0mJm5ldyBSZWdFeHAoXCIoXnxcXFxcLilcIitwLmpvaW4oXCJcXFxcLig/Oi4qXFxcXC58KVwiKStcIihcXFxcLnwkKVwiKSxnPWY9bS5sZW5ndGg7d2hpbGUoZi0tKWs9bVtmXSwhZSYmcSE9PWsub3JpZ1R5cGV8fGMmJmMuZ3VpZCE9PWsuZ3VpZHx8aCYmIWgudGVzdChrLm5hbWVzcGFjZSl8fGQmJmQhPT1rLnNlbGVjdG9yJiYoXCIqKlwiIT09ZHx8IWsuc2VsZWN0b3IpfHwobS5zcGxpY2UoZiwxKSxrLnNlbGVjdG9yJiZtLmRlbGVnYXRlQ291bnQtLSxsLnJlbW92ZSYmbC5yZW1vdmUuY2FsbChhLGspKTtnJiYhbS5sZW5ndGgmJihsLnRlYXJkb3duJiZsLnRlYXJkb3duLmNhbGwoYSxwLHIuaGFuZGxlKSE9PSExfHxuLnJlbW92ZUV2ZW50KGEsbyxyLmhhbmRsZSksZGVsZXRlIGlbb10pfWVsc2UgZm9yKG8gaW4gaSluLmV2ZW50LnJlbW92ZShhLG8rYltqXSxjLGQsITApO24uaXNFbXB0eU9iamVjdChpKSYmKGRlbGV0ZSByLmhhbmRsZSxMLnJlbW92ZShhLFwiZXZlbnRzXCIpKX19LHRyaWdnZXI6ZnVuY3Rpb24oYixjLGQsZSl7dmFyIGYsZyxoLGksayxtLG8scD1bZHx8bF0scT1qLmNhbGwoYixcInR5cGVcIik/Yi50eXBlOmIscj1qLmNhbGwoYixcIm5hbWVzcGFjZVwiKT9iLm5hbWVzcGFjZS5zcGxpdChcIi5cIik6W107aWYoZz1oPWQ9ZHx8bCwzIT09ZC5ub2RlVHlwZSYmOCE9PWQubm9kZVR5cGUmJiFYLnRlc3QocStuLmV2ZW50LnRyaWdnZXJlZCkmJihxLmluZGV4T2YoXCIuXCIpPj0wJiYocj1xLnNwbGl0KFwiLlwiKSxxPXIuc2hpZnQoKSxyLnNvcnQoKSksaz1xLmluZGV4T2YoXCI6XCIpPDAmJlwib25cIitxLGI9YltuLmV4cGFuZG9dP2I6bmV3IG4uRXZlbnQocSxcIm9iamVjdFwiPT10eXBlb2YgYiYmYiksYi5pc1RyaWdnZXI9ZT8yOjMsYi5uYW1lc3BhY2U9ci5qb2luKFwiLlwiKSxiLm5hbWVzcGFjZV9yZT1iLm5hbWVzcGFjZT9uZXcgUmVnRXhwKFwiKF58XFxcXC4pXCIrci5qb2luKFwiXFxcXC4oPzouKlxcXFwufClcIikrXCIoXFxcXC58JClcIik6bnVsbCxiLnJlc3VsdD12b2lkIDAsYi50YXJnZXR8fChiLnRhcmdldD1kKSxjPW51bGw9PWM/W2JdOm4ubWFrZUFycmF5KGMsW2JdKSxvPW4uZXZlbnQuc3BlY2lhbFtxXXx8e30sZXx8IW8udHJpZ2dlcnx8by50cmlnZ2VyLmFwcGx5KGQsYykhPT0hMSkpe2lmKCFlJiYhby5ub0J1YmJsZSYmIW4uaXNXaW5kb3coZCkpe2ZvcihpPW8uZGVsZWdhdGVUeXBlfHxxLFgudGVzdChpK3EpfHwoZz1nLnBhcmVudE5vZGUpO2c7Zz1nLnBhcmVudE5vZGUpcC5wdXNoKGcpLGg9ZztoPT09KGQub3duZXJEb2N1bWVudHx8bCkmJnAucHVzaChoLmRlZmF1bHRWaWV3fHxoLnBhcmVudFdpbmRvd3x8YSl9Zj0wO3doaWxlKChnPXBbZisrXSkmJiFiLmlzUHJvcGFnYXRpb25TdG9wcGVkKCkpYi50eXBlPWY+MT9pOm8uYmluZFR5cGV8fHEsbT0oTC5nZXQoZyxcImV2ZW50c1wiKXx8e30pW2IudHlwZV0mJkwuZ2V0KGcsXCJoYW5kbGVcIiksbSYmbS5hcHBseShnLGMpLG09ayYmZ1trXSxtJiZtLmFwcGx5JiZuLmFjY2VwdERhdGEoZykmJihiLnJlc3VsdD1tLmFwcGx5KGcsYyksYi5yZXN1bHQ9PT0hMSYmYi5wcmV2ZW50RGVmYXVsdCgpKTtyZXR1cm4gYi50eXBlPXEsZXx8Yi5pc0RlZmF1bHRQcmV2ZW50ZWQoKXx8by5fZGVmYXVsdCYmby5fZGVmYXVsdC5hcHBseShwLnBvcCgpLGMpIT09ITF8fCFuLmFjY2VwdERhdGEoZCl8fGsmJm4uaXNGdW5jdGlvbihkW3FdKSYmIW4uaXNXaW5kb3coZCkmJihoPWRba10saCYmKGRba109bnVsbCksbi5ldmVudC50cmlnZ2VyZWQ9cSxkW3FdKCksbi5ldmVudC50cmlnZ2VyZWQ9dm9pZCAwLGgmJihkW2tdPWgpKSxiLnJlc3VsdH19LGRpc3BhdGNoOmZ1bmN0aW9uKGEpe2E9bi5ldmVudC5maXgoYSk7dmFyIGIsYyxlLGYsZyxoPVtdLGk9ZC5jYWxsKGFyZ3VtZW50cyksaj0oTC5nZXQodGhpcyxcImV2ZW50c1wiKXx8e30pW2EudHlwZV18fFtdLGs9bi5ldmVudC5zcGVjaWFsW2EudHlwZV18fHt9O2lmKGlbMF09YSxhLmRlbGVnYXRlVGFyZ2V0PXRoaXMsIWsucHJlRGlzcGF0Y2h8fGsucHJlRGlzcGF0Y2guY2FsbCh0aGlzLGEpIT09ITEpe2g9bi5ldmVudC5oYW5kbGVycy5jYWxsKHRoaXMsYSxqKSxiPTA7d2hpbGUoKGY9aFtiKytdKSYmIWEuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSl7YS5jdXJyZW50VGFyZ2V0PWYuZWxlbSxjPTA7d2hpbGUoKGc9Zi5oYW5kbGVyc1tjKytdKSYmIWEuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQoKSkoIWEubmFtZXNwYWNlX3JlfHxhLm5hbWVzcGFjZV9yZS50ZXN0KGcubmFtZXNwYWNlKSkmJihhLmhhbmRsZU9iaj1nLGEuZGF0YT1nLmRhdGEsZT0oKG4uZXZlbnQuc3BlY2lhbFtnLm9yaWdUeXBlXXx8e30pLmhhbmRsZXx8Zy5oYW5kbGVyKS5hcHBseShmLmVsZW0saSksdm9pZCAwIT09ZSYmKGEucmVzdWx0PWUpPT09ITEmJihhLnByZXZlbnREZWZhdWx0KCksYS5zdG9wUHJvcGFnYXRpb24oKSkpfXJldHVybiBrLnBvc3REaXNwYXRjaCYmay5wb3N0RGlzcGF0Y2guY2FsbCh0aGlzLGEpLGEucmVzdWx0fX0saGFuZGxlcnM6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGUsZixnPVtdLGg9Yi5kZWxlZ2F0ZUNvdW50LGk9YS50YXJnZXQ7aWYoaCYmaS5ub2RlVHlwZSYmKCFhLmJ1dHRvbnx8XCJjbGlja1wiIT09YS50eXBlKSlmb3IoO2khPT10aGlzO2k9aS5wYXJlbnROb2RlfHx0aGlzKWlmKGkuZGlzYWJsZWQhPT0hMHx8XCJjbGlja1wiIT09YS50eXBlKXtmb3IoZD1bXSxjPTA7aD5jO2MrKylmPWJbY10sZT1mLnNlbGVjdG9yK1wiIFwiLHZvaWQgMD09PWRbZV0mJihkW2VdPWYubmVlZHNDb250ZXh0P24oZSx0aGlzKS5pbmRleChpKT49MDpuLmZpbmQoZSx0aGlzLG51bGwsW2ldKS5sZW5ndGgpLGRbZV0mJmQucHVzaChmKTtkLmxlbmd0aCYmZy5wdXNoKHtlbGVtOmksaGFuZGxlcnM6ZH0pfXJldHVybiBoPGIubGVuZ3RoJiZnLnB1c2goe2VsZW06dGhpcyxoYW5kbGVyczpiLnNsaWNlKGgpfSksZ30scHJvcHM6XCJhbHRLZXkgYnViYmxlcyBjYW5jZWxhYmxlIGN0cmxLZXkgY3VycmVudFRhcmdldCBldmVudFBoYXNlIG1ldGFLZXkgcmVsYXRlZFRhcmdldCBzaGlmdEtleSB0YXJnZXQgdGltZVN0YW1wIHZpZXcgd2hpY2hcIi5zcGxpdChcIiBcIiksZml4SG9va3M6e30sa2V5SG9va3M6e3Byb3BzOlwiY2hhciBjaGFyQ29kZSBrZXkga2V5Q29kZVwiLnNwbGl0KFwiIFwiKSxmaWx0ZXI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbnVsbD09YS53aGljaCYmKGEud2hpY2g9bnVsbCE9Yi5jaGFyQ29kZT9iLmNoYXJDb2RlOmIua2V5Q29kZSksYX19LG1vdXNlSG9va3M6e3Byb3BzOlwiYnV0dG9uIGJ1dHRvbnMgY2xpZW50WCBjbGllbnRZIG9mZnNldFggb2Zmc2V0WSBwYWdlWCBwYWdlWSBzY3JlZW5YIHNjcmVlblkgdG9FbGVtZW50XCIuc3BsaXQoXCIgXCIpLGZpbHRlcjpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZSxmPWIuYnV0dG9uO3JldHVybiBudWxsPT1hLnBhZ2VYJiZudWxsIT1iLmNsaWVudFgmJihjPWEudGFyZ2V0Lm93bmVyRG9jdW1lbnR8fGwsZD1jLmRvY3VtZW50RWxlbWVudCxlPWMuYm9keSxhLnBhZ2VYPWIuY2xpZW50WCsoZCYmZC5zY3JvbGxMZWZ0fHxlJiZlLnNjcm9sbExlZnR8fDApLShkJiZkLmNsaWVudExlZnR8fGUmJmUuY2xpZW50TGVmdHx8MCksYS5wYWdlWT1iLmNsaWVudFkrKGQmJmQuc2Nyb2xsVG9wfHxlJiZlLnNjcm9sbFRvcHx8MCktKGQmJmQuY2xpZW50VG9wfHxlJiZlLmNsaWVudFRvcHx8MCkpLGEud2hpY2h8fHZvaWQgMD09PWZ8fChhLndoaWNoPTEmZj8xOjImZj8zOjQmZj8yOjApLGF9fSxmaXg6ZnVuY3Rpb24oYSl7aWYoYVtuLmV4cGFuZG9dKXJldHVybiBhO3ZhciBiLGMsZCxlPWEudHlwZSxmPWEsZz10aGlzLmZpeEhvb2tzW2VdO2d8fCh0aGlzLmZpeEhvb2tzW2VdPWc9Vy50ZXN0KGUpP3RoaXMubW91c2VIb29rczpWLnRlc3QoZSk/dGhpcy5rZXlIb29rczp7fSksZD1nLnByb3BzP3RoaXMucHJvcHMuY29uY2F0KGcucHJvcHMpOnRoaXMucHJvcHMsYT1uZXcgbi5FdmVudChmKSxiPWQubGVuZ3RoO3doaWxlKGItLSljPWRbYl0sYVtjXT1mW2NdO3JldHVybiBhLnRhcmdldHx8KGEudGFyZ2V0PWwpLDM9PT1hLnRhcmdldC5ub2RlVHlwZSYmKGEudGFyZ2V0PWEudGFyZ2V0LnBhcmVudE5vZGUpLGcuZmlsdGVyP2cuZmlsdGVyKGEsZik6YX0sc3BlY2lhbDp7bG9hZDp7bm9CdWJibGU6ITB9LGZvY3VzOnt0cmlnZ2VyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMhPT1fKCkmJnRoaXMuZm9jdXM/KHRoaXMuZm9jdXMoKSwhMSk6dm9pZCAwfSxkZWxlZ2F0ZVR5cGU6XCJmb2N1c2luXCJ9LGJsdXI6e3RyaWdnZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcz09PV8oKSYmdGhpcy5ibHVyPyh0aGlzLmJsdXIoKSwhMSk6dm9pZCAwfSxkZWxlZ2F0ZVR5cGU6XCJmb2N1c291dFwifSxjbGljazp7dHJpZ2dlcjpmdW5jdGlvbigpe3JldHVyblwiY2hlY2tib3hcIj09PXRoaXMudHlwZSYmdGhpcy5jbGljayYmbi5ub2RlTmFtZSh0aGlzLFwiaW5wdXRcIik/KHRoaXMuY2xpY2soKSwhMSk6dm9pZCAwfSxfZGVmYXVsdDpmdW5jdGlvbihhKXtyZXR1cm4gbi5ub2RlTmFtZShhLnRhcmdldCxcImFcIil9fSxiZWZvcmV1bmxvYWQ6e3Bvc3REaXNwYXRjaDpmdW5jdGlvbihhKXt2b2lkIDAhPT1hLnJlc3VsdCYmYS5vcmlnaW5hbEV2ZW50JiYoYS5vcmlnaW5hbEV2ZW50LnJldHVyblZhbHVlPWEucmVzdWx0KX19fSxzaW11bGF0ZTpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1uLmV4dGVuZChuZXcgbi5FdmVudCxjLHt0eXBlOmEsaXNTaW11bGF0ZWQ6ITAsb3JpZ2luYWxFdmVudDp7fX0pO2Q/bi5ldmVudC50cmlnZ2VyKGUsbnVsbCxiKTpuLmV2ZW50LmRpc3BhdGNoLmNhbGwoYixlKSxlLmlzRGVmYXVsdFByZXZlbnRlZCgpJiZjLnByZXZlbnREZWZhdWx0KCl9fSxuLnJlbW92ZUV2ZW50PWZ1bmN0aW9uKGEsYixjKXthLnJlbW92ZUV2ZW50TGlzdGVuZXImJmEucmVtb3ZlRXZlbnRMaXN0ZW5lcihiLGMsITEpfSxuLkV2ZW50PWZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBuLkV2ZW50PyhhJiZhLnR5cGU/KHRoaXMub3JpZ2luYWxFdmVudD1hLHRoaXMudHlwZT1hLnR5cGUsdGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQ9YS5kZWZhdWx0UHJldmVudGVkfHx2b2lkIDA9PT1hLmRlZmF1bHRQcmV2ZW50ZWQmJmEucmV0dXJuVmFsdWU9PT0hMT9aOiQpOnRoaXMudHlwZT1hLGImJm4uZXh0ZW5kKHRoaXMsYiksdGhpcy50aW1lU3RhbXA9YSYmYS50aW1lU3RhbXB8fG4ubm93KCksdm9pZCh0aGlzW24uZXhwYW5kb109ITApKTpuZXcgbi5FdmVudChhLGIpfSxuLkV2ZW50LnByb3RvdHlwZT17aXNEZWZhdWx0UHJldmVudGVkOiQsaXNQcm9wYWdhdGlvblN0b3BwZWQ6JCxpc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZDokLHByZXZlbnREZWZhdWx0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5vcmlnaW5hbEV2ZW50O3RoaXMuaXNEZWZhdWx0UHJldmVudGVkPVosYSYmYS5wcmV2ZW50RGVmYXVsdCYmYS5wcmV2ZW50RGVmYXVsdCgpfSxzdG9wUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc1Byb3BhZ2F0aW9uU3RvcHBlZD1aLGEmJmEuc3RvcFByb3BhZ2F0aW9uJiZhLnN0b3BQcm9wYWdhdGlvbigpfSxzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZD1aLGEmJmEuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uJiZhLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpLHRoaXMuc3RvcFByb3BhZ2F0aW9uKCl9fSxuLmVhY2goe21vdXNlZW50ZXI6XCJtb3VzZW92ZXJcIixtb3VzZWxlYXZlOlwibW91c2VvdXRcIixwb2ludGVyZW50ZXI6XCJwb2ludGVyb3ZlclwiLHBvaW50ZXJsZWF2ZTpcInBvaW50ZXJvdXRcIn0sZnVuY3Rpb24oYSxiKXtuLmV2ZW50LnNwZWNpYWxbYV09e2RlbGVnYXRlVHlwZTpiLGJpbmRUeXBlOmIsaGFuZGxlOmZ1bmN0aW9uKGEpe3ZhciBjLGQ9dGhpcyxlPWEucmVsYXRlZFRhcmdldCxmPWEuaGFuZGxlT2JqO3JldHVybighZXx8ZSE9PWQmJiFuLmNvbnRhaW5zKGQsZSkpJiYoYS50eXBlPWYub3JpZ1R5cGUsYz1mLmhhbmRsZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpLGEudHlwZT1iKSxjfX19KSxrLmZvY3VzaW5CdWJibGVzfHxuLmVhY2goe2ZvY3VzOlwiZm9jdXNpblwiLGJsdXI6XCJmb2N1c291dFwifSxmdW5jdGlvbihhLGIpe3ZhciBjPWZ1bmN0aW9uKGEpe24uZXZlbnQuc2ltdWxhdGUoYixhLnRhcmdldCxuLmV2ZW50LmZpeChhKSwhMCl9O24uZXZlbnQuc3BlY2lhbFtiXT17c2V0dXA6ZnVuY3Rpb24oKXt2YXIgZD10aGlzLm93bmVyRG9jdW1lbnR8fHRoaXMsZT1MLmFjY2VzcyhkLGIpO2V8fGQuYWRkRXZlbnRMaXN0ZW5lcihhLGMsITApLEwuYWNjZXNzKGQsYiwoZXx8MCkrMSl9LHRlYXJkb3duOmZ1bmN0aW9uKCl7dmFyIGQ9dGhpcy5vd25lckRvY3VtZW50fHx0aGlzLGU9TC5hY2Nlc3MoZCxiKS0xO2U/TC5hY2Nlc3MoZCxiLGUpOihkLnJlbW92ZUV2ZW50TGlzdGVuZXIoYSxjLCEwKSxMLnJlbW92ZShkLGIpKX19fSksbi5mbi5leHRlbmQoe29uOmZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGYsZztpZihcIm9iamVjdFwiPT10eXBlb2YgYSl7XCJzdHJpbmdcIiE9dHlwZW9mIGImJihjPWN8fGIsYj12b2lkIDApO2ZvcihnIGluIGEpdGhpcy5vbihnLGIsYyxhW2ddLGUpO3JldHVybiB0aGlzfWlmKG51bGw9PWMmJm51bGw9PWQ/KGQ9YixjPWI9dm9pZCAwKTpudWxsPT1kJiYoXCJzdHJpbmdcIj09dHlwZW9mIGI/KGQ9YyxjPXZvaWQgMCk6KGQ9YyxjPWIsYj12b2lkIDApKSxkPT09ITEpZD0kO2Vsc2UgaWYoIWQpcmV0dXJuIHRoaXM7cmV0dXJuIDE9PT1lJiYoZj1kLGQ9ZnVuY3Rpb24oYSl7cmV0dXJuIG4oKS5vZmYoYSksZi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGQuZ3VpZD1mLmd1aWR8fChmLmd1aWQ9bi5ndWlkKyspKSx0aGlzLmVhY2goZnVuY3Rpb24oKXtuLmV2ZW50LmFkZCh0aGlzLGEsZCxjLGIpfSl9LG9uZTpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gdGhpcy5vbihhLGIsYyxkLDEpfSxvZmY6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGU7aWYoYSYmYS5wcmV2ZW50RGVmYXVsdCYmYS5oYW5kbGVPYmopcmV0dXJuIGQ9YS5oYW5kbGVPYmosbihhLmRlbGVnYXRlVGFyZ2V0KS5vZmYoZC5uYW1lc3BhY2U/ZC5vcmlnVHlwZStcIi5cIitkLm5hbWVzcGFjZTpkLm9yaWdUeXBlLGQuc2VsZWN0b3IsZC5oYW5kbGVyKSx0aGlzO2lmKFwib2JqZWN0XCI9PXR5cGVvZiBhKXtmb3IoZSBpbiBhKXRoaXMub2ZmKGUsYixhW2VdKTtyZXR1cm4gdGhpc31yZXR1cm4oYj09PSExfHxcImZ1bmN0aW9uXCI9PXR5cGVvZiBiKSYmKGM9YixiPXZvaWQgMCksYz09PSExJiYoYz0kKSx0aGlzLmVhY2goZnVuY3Rpb24oKXtuLmV2ZW50LnJlbW92ZSh0aGlzLGEsYyxiKX0pfSx0cmlnZ2VyOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe24uZXZlbnQudHJpZ2dlcihhLGIsdGhpcyl9KX0sdHJpZ2dlckhhbmRsZXI6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzWzBdO3JldHVybiBjP24uZXZlbnQudHJpZ2dlcihhLGIsYywhMCk6dm9pZCAwfX0pO3ZhciBhYT0vPCg/IWFyZWF8YnJ8Y29sfGVtYmVkfGhyfGltZ3xpbnB1dHxsaW5rfG1ldGF8cGFyYW0pKChbXFx3Ol0rKVtePl0qKVxcLz4vZ2ksYmE9LzwoW1xcdzpdKykvLGNhPS88fCYjP1xcdys7LyxkYT0vPCg/OnNjcmlwdHxzdHlsZXxsaW5rKS9pLGVhPS9jaGVja2VkXFxzKig/OltePV18PVxccyouY2hlY2tlZC4pL2ksZmE9L14kfFxcLyg/OmphdmF8ZWNtYSlzY3JpcHQvaSxnYT0vXnRydWVcXC8oLiopLyxoYT0vXlxccyo8ISg/OlxcW0NEQVRBXFxbfC0tKXwoPzpcXF1cXF18LS0pPlxccyokL2csaWE9e29wdGlvbjpbMSxcIjxzZWxlY3QgbXVsdGlwbGU9J211bHRpcGxlJz5cIixcIjwvc2VsZWN0PlwiXSx0aGVhZDpbMSxcIjx0YWJsZT5cIixcIjwvdGFibGU+XCJdLGNvbDpbMixcIjx0YWJsZT48Y29sZ3JvdXA+XCIsXCI8L2NvbGdyb3VwPjwvdGFibGU+XCJdLHRyOlsyLFwiPHRhYmxlPjx0Ym9keT5cIixcIjwvdGJvZHk+PC90YWJsZT5cIl0sdGQ6WzMsXCI8dGFibGU+PHRib2R5Pjx0cj5cIixcIjwvdHI+PC90Ym9keT48L3RhYmxlPlwiXSxfZGVmYXVsdDpbMCxcIlwiLFwiXCJdfTtpYS5vcHRncm91cD1pYS5vcHRpb24saWEudGJvZHk9aWEudGZvb3Q9aWEuY29sZ3JvdXA9aWEuY2FwdGlvbj1pYS50aGVhZCxpYS50aD1pYS50ZDtmdW5jdGlvbiBqYShhLGIpe3JldHVybiBuLm5vZGVOYW1lKGEsXCJ0YWJsZVwiKSYmbi5ub2RlTmFtZSgxMSE9PWIubm9kZVR5cGU/YjpiLmZpcnN0Q2hpbGQsXCJ0clwiKT9hLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwidGJvZHlcIilbMF18fGEuYXBwZW5kQ2hpbGQoYS5vd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0Ym9keVwiKSk6YX1mdW5jdGlvbiBrYShhKXtyZXR1cm4gYS50eXBlPShudWxsIT09YS5nZXRBdHRyaWJ1dGUoXCJ0eXBlXCIpKStcIi9cIithLnR5cGUsYX1mdW5jdGlvbiBsYShhKXt2YXIgYj1nYS5leGVjKGEudHlwZSk7cmV0dXJuIGI/YS50eXBlPWJbMV06YS5yZW1vdmVBdHRyaWJ1dGUoXCJ0eXBlXCIpLGF9ZnVuY3Rpb24gbWEoYSxiKXtmb3IodmFyIGM9MCxkPWEubGVuZ3RoO2Q+YztjKyspTC5zZXQoYVtjXSxcImdsb2JhbEV2YWxcIiwhYnx8TC5nZXQoYltjXSxcImdsb2JhbEV2YWxcIikpfWZ1bmN0aW9uIG5hKGEsYil7dmFyIGMsZCxlLGYsZyxoLGksajtpZigxPT09Yi5ub2RlVHlwZSl7aWYoTC5oYXNEYXRhKGEpJiYoZj1MLmFjY2VzcyhhKSxnPUwuc2V0KGIsZiksaj1mLmV2ZW50cykpe2RlbGV0ZSBnLmhhbmRsZSxnLmV2ZW50cz17fTtmb3IoZSBpbiBqKWZvcihjPTAsZD1qW2VdLmxlbmd0aDtkPmM7YysrKW4uZXZlbnQuYWRkKGIsZSxqW2VdW2NdKX1NLmhhc0RhdGEoYSkmJihoPU0uYWNjZXNzKGEpLGk9bi5leHRlbmQoe30saCksTS5zZXQoYixpKSl9fWZ1bmN0aW9uIG9hKGEsYil7dmFyIGM9YS5nZXRFbGVtZW50c0J5VGFnTmFtZT9hLmdldEVsZW1lbnRzQnlUYWdOYW1lKGJ8fFwiKlwiKTphLnF1ZXJ5U2VsZWN0b3JBbGw/YS5xdWVyeVNlbGVjdG9yQWxsKGJ8fFwiKlwiKTpbXTtyZXR1cm4gdm9pZCAwPT09Ynx8YiYmbi5ub2RlTmFtZShhLGIpP24ubWVyZ2UoW2FdLGMpOmN9ZnVuY3Rpb24gcGEoYSxiKXt2YXIgYz1iLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XCJpbnB1dFwiPT09YyYmVC50ZXN0KGEudHlwZSk/Yi5jaGVja2VkPWEuY2hlY2tlZDooXCJpbnB1dFwiPT09Y3x8XCJ0ZXh0YXJlYVwiPT09YykmJihiLmRlZmF1bHRWYWx1ZT1hLmRlZmF1bHRWYWx1ZSl9bi5leHRlbmQoe2Nsb25lOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGYsZyxoPWEuY2xvbmVOb2RlKCEwKSxpPW4uY29udGFpbnMoYS5vd25lckRvY3VtZW50LGEpO2lmKCEoay5ub0Nsb25lQ2hlY2tlZHx8MSE9PWEubm9kZVR5cGUmJjExIT09YS5ub2RlVHlwZXx8bi5pc1hNTERvYyhhKSkpZm9yKGc9b2EoaCksZj1vYShhKSxkPTAsZT1mLmxlbmd0aDtlPmQ7ZCsrKXBhKGZbZF0sZ1tkXSk7aWYoYilpZihjKWZvcihmPWZ8fG9hKGEpLGc9Z3x8b2EoaCksZD0wLGU9Zi5sZW5ndGg7ZT5kO2QrKyluYShmW2RdLGdbZF0pO2Vsc2UgbmEoYSxoKTtyZXR1cm4gZz1vYShoLFwic2NyaXB0XCIpLGcubGVuZ3RoPjAmJm1hKGcsIWkmJm9hKGEsXCJzY3JpcHRcIikpLGh9LGJ1aWxkRnJhZ21lbnQ6ZnVuY3Rpb24oYSxiLGMsZCl7Zm9yKHZhciBlLGYsZyxoLGksaixrPWIuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLGw9W10sbT0wLG89YS5sZW5ndGg7bz5tO20rKylpZihlPWFbbV0sZXx8MD09PWUpaWYoXCJvYmplY3RcIj09PW4udHlwZShlKSluLm1lcmdlKGwsZS5ub2RlVHlwZT9bZV06ZSk7ZWxzZSBpZihjYS50ZXN0KGUpKXtmPWZ8fGsuYXBwZW5kQ2hpbGQoYi5jcmVhdGVFbGVtZW50KFwiZGl2XCIpKSxnPShiYS5leGVjKGUpfHxbXCJcIixcIlwiXSlbMV0udG9Mb3dlckNhc2UoKSxoPWlhW2ddfHxpYS5fZGVmYXVsdCxmLmlubmVySFRNTD1oWzFdK2UucmVwbGFjZShhYSxcIjwkMT48LyQyPlwiKStoWzJdLGo9aFswXTt3aGlsZShqLS0pZj1mLmxhc3RDaGlsZDtuLm1lcmdlKGwsZi5jaGlsZE5vZGVzKSxmPWsuZmlyc3RDaGlsZCxmLnRleHRDb250ZW50PVwiXCJ9ZWxzZSBsLnB1c2goYi5jcmVhdGVUZXh0Tm9kZShlKSk7ay50ZXh0Q29udGVudD1cIlwiLG09MDt3aGlsZShlPWxbbSsrXSlpZigoIWR8fC0xPT09bi5pbkFycmF5KGUsZCkpJiYoaT1uLmNvbnRhaW5zKGUub3duZXJEb2N1bWVudCxlKSxmPW9hKGsuYXBwZW5kQ2hpbGQoZSksXCJzY3JpcHRcIiksaSYmbWEoZiksYykpe2o9MDt3aGlsZShlPWZbaisrXSlmYS50ZXN0KGUudHlwZXx8XCJcIikmJmMucHVzaChlKX1yZXR1cm4ga30sY2xlYW5EYXRhOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYixjLGQsZSxmPW4uZXZlbnQuc3BlY2lhbCxnPTA7dm9pZCAwIT09KGM9YVtnXSk7ZysrKXtpZihuLmFjY2VwdERhdGEoYykmJihlPWNbTC5leHBhbmRvXSxlJiYoYj1MLmNhY2hlW2VdKSkpe2lmKGIuZXZlbnRzKWZvcihkIGluIGIuZXZlbnRzKWZbZF0/bi5ldmVudC5yZW1vdmUoYyxkKTpuLnJlbW92ZUV2ZW50KGMsZCxiLmhhbmRsZSk7TC5jYWNoZVtlXSYmZGVsZXRlIEwuY2FjaGVbZV19ZGVsZXRlIE0uY2FjaGVbY1tNLmV4cGFuZG9dXX19fSksbi5mbi5leHRlbmQoe3RleHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIEoodGhpcyxmdW5jdGlvbihhKXtyZXR1cm4gdm9pZCAwPT09YT9uLnRleHQodGhpcyk6dGhpcy5lbXB0eSgpLmVhY2goZnVuY3Rpb24oKXsoMT09PXRoaXMubm9kZVR5cGV8fDExPT09dGhpcy5ub2RlVHlwZXx8OT09PXRoaXMubm9kZVR5cGUpJiYodGhpcy50ZXh0Q29udGVudD1hKX0pfSxudWxsLGEsYXJndW1lbnRzLmxlbmd0aCl9LGFwcGVuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRvbU1hbmlwKGFyZ3VtZW50cyxmdW5jdGlvbihhKXtpZigxPT09dGhpcy5ub2RlVHlwZXx8MTE9PT10aGlzLm5vZGVUeXBlfHw5PT09dGhpcy5ub2RlVHlwZSl7dmFyIGI9amEodGhpcyxhKTtiLmFwcGVuZENoaWxkKGEpfX0pfSxwcmVwZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZG9tTWFuaXAoYXJndW1lbnRzLGZ1bmN0aW9uKGEpe2lmKDE9PT10aGlzLm5vZGVUeXBlfHwxMT09PXRoaXMubm9kZVR5cGV8fDk9PT10aGlzLm5vZGVUeXBlKXt2YXIgYj1qYSh0aGlzLGEpO2IuaW5zZXJ0QmVmb3JlKGEsYi5maXJzdENoaWxkKX19KX0sYmVmb3JlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZG9tTWFuaXAoYXJndW1lbnRzLGZ1bmN0aW9uKGEpe3RoaXMucGFyZW50Tm9kZSYmdGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShhLHRoaXMpfSl9LGFmdGVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZG9tTWFuaXAoYXJndW1lbnRzLGZ1bmN0aW9uKGEpe3RoaXMucGFyZW50Tm9kZSYmdGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShhLHRoaXMubmV4dFNpYmxpbmcpfSl9LHJlbW92ZTpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYyxkPWE/bi5maWx0ZXIoYSx0aGlzKTp0aGlzLGU9MDtudWxsIT0oYz1kW2VdKTtlKyspYnx8MSE9PWMubm9kZVR5cGV8fG4uY2xlYW5EYXRhKG9hKGMpKSxjLnBhcmVudE5vZGUmJihiJiZuLmNvbnRhaW5zKGMub3duZXJEb2N1bWVudCxjKSYmbWEob2EoYyxcInNjcmlwdFwiKSksYy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGMpKTtyZXR1cm4gdGhpc30sZW1wdHk6ZnVuY3Rpb24oKXtmb3IodmFyIGEsYj0wO251bGwhPShhPXRoaXNbYl0pO2IrKykxPT09YS5ub2RlVHlwZSYmKG4uY2xlYW5EYXRhKG9hKGEsITEpKSxhLnRleHRDb250ZW50PVwiXCIpO3JldHVybiB0aGlzfSxjbG9uZTpmdW5jdGlvbihhLGIpe3JldHVybiBhPW51bGw9PWE/ITE6YSxiPW51bGw9PWI/YTpiLHRoaXMubWFwKGZ1bmN0aW9uKCl7cmV0dXJuIG4uY2xvbmUodGhpcyxhLGIpfSl9LGh0bWw6ZnVuY3Rpb24oYSl7cmV0dXJuIEoodGhpcyxmdW5jdGlvbihhKXt2YXIgYj10aGlzWzBdfHx7fSxjPTAsZD10aGlzLmxlbmd0aDtpZih2b2lkIDA9PT1hJiYxPT09Yi5ub2RlVHlwZSlyZXR1cm4gYi5pbm5lckhUTUw7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGEmJiFkYS50ZXN0KGEpJiYhaWFbKGJhLmV4ZWMoYSl8fFtcIlwiLFwiXCJdKVsxXS50b0xvd2VyQ2FzZSgpXSl7YT1hLnJlcGxhY2UoYWEsXCI8JDE+PC8kMj5cIik7dHJ5e2Zvcig7ZD5jO2MrKyliPXRoaXNbY118fHt9LDE9PT1iLm5vZGVUeXBlJiYobi5jbGVhbkRhdGEob2EoYiwhMSkpLGIuaW5uZXJIVE1MPWEpO2I9MH1jYXRjaChlKXt9fWImJnRoaXMuZW1wdHkoKS5hcHBlbmQoYSl9LG51bGwsYSxhcmd1bWVudHMubGVuZ3RoKX0scmVwbGFjZVdpdGg6ZnVuY3Rpb24oKXt2YXIgYT1hcmd1bWVudHNbMF07cmV0dXJuIHRoaXMuZG9tTWFuaXAoYXJndW1lbnRzLGZ1bmN0aW9uKGIpe2E9dGhpcy5wYXJlbnROb2RlLG4uY2xlYW5EYXRhKG9hKHRoaXMpKSxhJiZhLnJlcGxhY2VDaGlsZChiLHRoaXMpfSksYSYmKGEubGVuZ3RofHxhLm5vZGVUeXBlKT90aGlzOnRoaXMucmVtb3ZlKCl9LGRldGFjaDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5yZW1vdmUoYSwhMCl9LGRvbU1hbmlwOmZ1bmN0aW9uKGEsYil7YT1lLmFwcGx5KFtdLGEpO3ZhciBjLGQsZixnLGgsaSxqPTAsbD10aGlzLmxlbmd0aCxtPXRoaXMsbz1sLTEscD1hWzBdLHE9bi5pc0Z1bmN0aW9uKHApO2lmKHF8fGw+MSYmXCJzdHJpbmdcIj09dHlwZW9mIHAmJiFrLmNoZWNrQ2xvbmUmJmVhLnRlc3QocCkpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihjKXt2YXIgZD1tLmVxKGMpO3EmJihhWzBdPXAuY2FsbCh0aGlzLGMsZC5odG1sKCkpKSxkLmRvbU1hbmlwKGEsYil9KTtpZihsJiYoYz1uLmJ1aWxkRnJhZ21lbnQoYSx0aGlzWzBdLm93bmVyRG9jdW1lbnQsITEsdGhpcyksZD1jLmZpcnN0Q2hpbGQsMT09PWMuY2hpbGROb2Rlcy5sZW5ndGgmJihjPWQpLGQpKXtmb3IoZj1uLm1hcChvYShjLFwic2NyaXB0XCIpLGthKSxnPWYubGVuZ3RoO2w+ajtqKyspaD1jLGohPT1vJiYoaD1uLmNsb25lKGgsITAsITApLGcmJm4ubWVyZ2UoZixvYShoLFwic2NyaXB0XCIpKSksYi5jYWxsKHRoaXNbal0saCxqKTtpZihnKWZvcihpPWZbZi5sZW5ndGgtMV0ub3duZXJEb2N1bWVudCxuLm1hcChmLGxhKSxqPTA7Zz5qO2orKyloPWZbal0sZmEudGVzdChoLnR5cGV8fFwiXCIpJiYhTC5hY2Nlc3MoaCxcImdsb2JhbEV2YWxcIikmJm4uY29udGFpbnMoaSxoKSYmKGguc3JjP24uX2V2YWxVcmwmJm4uX2V2YWxVcmwoaC5zcmMpOm4uZ2xvYmFsRXZhbChoLnRleHRDb250ZW50LnJlcGxhY2UoaGEsXCJcIikpKX1yZXR1cm4gdGhpc319KSxuLmVhY2goe2FwcGVuZFRvOlwiYXBwZW5kXCIscHJlcGVuZFRvOlwicHJlcGVuZFwiLGluc2VydEJlZm9yZTpcImJlZm9yZVwiLGluc2VydEFmdGVyOlwiYWZ0ZXJcIixyZXBsYWNlQWxsOlwicmVwbGFjZVdpdGhcIn0sZnVuY3Rpb24oYSxiKXtuLmZuW2FdPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYyxkPVtdLGU9bihhKSxnPWUubGVuZ3RoLTEsaD0wO2c+PWg7aCsrKWM9aD09PWc/dGhpczp0aGlzLmNsb25lKCEwKSxuKGVbaF0pW2JdKGMpLGYuYXBwbHkoZCxjLmdldCgpKTtyZXR1cm4gdGhpcy5wdXNoU3RhY2soZCl9fSk7dmFyIHFhLHJhPXt9O2Z1bmN0aW9uIHNhKGIsYyl7dmFyIGQsZT1uKGMuY3JlYXRlRWxlbWVudChiKSkuYXBwZW5kVG8oYy5ib2R5KSxmPWEuZ2V0RGVmYXVsdENvbXB1dGVkU3R5bGUmJihkPWEuZ2V0RGVmYXVsdENvbXB1dGVkU3R5bGUoZVswXSkpP2QuZGlzcGxheTpuLmNzcyhlWzBdLFwiZGlzcGxheVwiKTtyZXR1cm4gZS5kZXRhY2goKSxmfWZ1bmN0aW9uIHRhKGEpe3ZhciBiPWwsYz1yYVthXTtyZXR1cm4gY3x8KGM9c2EoYSxiKSxcIm5vbmVcIiE9PWMmJmN8fChxYT0ocWF8fG4oXCI8aWZyYW1lIGZyYW1lYm9yZGVyPScwJyB3aWR0aD0nMCcgaGVpZ2h0PScwJy8+XCIpKS5hcHBlbmRUbyhiLmRvY3VtZW50RWxlbWVudCksYj1xYVswXS5jb250ZW50RG9jdW1lbnQsYi53cml0ZSgpLGIuY2xvc2UoKSxjPXNhKGEsYikscWEuZGV0YWNoKCkpLHJhW2FdPWMpLGN9dmFyIHVhPS9ebWFyZ2luLyx2YT1uZXcgUmVnRXhwKFwiXihcIitRK1wiKSg/IXB4KVthLXolXSskXCIsXCJpXCIpLHdhPWZ1bmN0aW9uKGIpe3JldHVybiBiLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcub3BlbmVyP2Iub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlKGIsbnVsbCk6YS5nZXRDb21wdXRlZFN0eWxlKGIsbnVsbCl9O2Z1bmN0aW9uIHhhKGEsYixjKXt2YXIgZCxlLGYsZyxoPWEuc3R5bGU7cmV0dXJuIGM9Y3x8d2EoYSksYyYmKGc9Yy5nZXRQcm9wZXJ0eVZhbHVlKGIpfHxjW2JdKSxjJiYoXCJcIiE9PWd8fG4uY29udGFpbnMoYS5vd25lckRvY3VtZW50LGEpfHwoZz1uLnN0eWxlKGEsYikpLHZhLnRlc3QoZykmJnVhLnRlc3QoYikmJihkPWgud2lkdGgsZT1oLm1pbldpZHRoLGY9aC5tYXhXaWR0aCxoLm1pbldpZHRoPWgubWF4V2lkdGg9aC53aWR0aD1nLGc9Yy53aWR0aCxoLndpZHRoPWQsaC5taW5XaWR0aD1lLGgubWF4V2lkdGg9ZikpLHZvaWQgMCE9PWc/ZytcIlwiOmd9ZnVuY3Rpb24geWEoYSxiKXtyZXR1cm57Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGEoKT92b2lkIGRlbGV0ZSB0aGlzLmdldDoodGhpcy5nZXQ9YikuYXBwbHkodGhpcyxhcmd1bWVudHMpfX19IWZ1bmN0aW9uKCl7dmFyIGIsYyxkPWwuZG9jdW1lbnRFbGVtZW50LGU9bC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLGY9bC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2lmKGYuc3R5bGUpe2Yuc3R5bGUuYmFja2dyb3VuZENsaXA9XCJjb250ZW50LWJveFwiLGYuY2xvbmVOb2RlKCEwKS5zdHlsZS5iYWNrZ3JvdW5kQ2xpcD1cIlwiLGsuY2xlYXJDbG9uZVN0eWxlPVwiY29udGVudC1ib3hcIj09PWYuc3R5bGUuYmFja2dyb3VuZENsaXAsZS5zdHlsZS5jc3NUZXh0PVwiYm9yZGVyOjA7d2lkdGg6MDtoZWlnaHQ6MDt0b3A6MDtsZWZ0Oi05OTk5cHg7bWFyZ2luLXRvcDoxcHg7cG9zaXRpb246YWJzb2x1dGVcIixlLmFwcGVuZENoaWxkKGYpO2Z1bmN0aW9uIGcoKXtmLnN0eWxlLmNzc1RleHQ9XCItd2Via2l0LWJveC1zaXppbmc6Ym9yZGVyLWJveDstbW96LWJveC1zaXppbmc6Ym9yZGVyLWJveDtib3gtc2l6aW5nOmJvcmRlci1ib3g7ZGlzcGxheTpibG9jazttYXJnaW4tdG9wOjElO3RvcDoxJTtib3JkZXI6MXB4O3BhZGRpbmc6MXB4O3dpZHRoOjRweDtwb3NpdGlvbjphYnNvbHV0ZVwiLGYuaW5uZXJIVE1MPVwiXCIsZC5hcHBlbmRDaGlsZChlKTt2YXIgZz1hLmdldENvbXB1dGVkU3R5bGUoZixudWxsKTtiPVwiMSVcIiE9PWcudG9wLGM9XCI0cHhcIj09PWcud2lkdGgsZC5yZW1vdmVDaGlsZChlKX1hLmdldENvbXB1dGVkU3R5bGUmJm4uZXh0ZW5kKGsse3BpeGVsUG9zaXRpb246ZnVuY3Rpb24oKXtyZXR1cm4gZygpLGJ9LGJveFNpemluZ1JlbGlhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGw9PWMmJmcoKSxjfSxyZWxpYWJsZU1hcmdpblJpZ2h0OmZ1bmN0aW9uKCl7dmFyIGIsYz1mLmFwcGVuZENoaWxkKGwuY3JlYXRlRWxlbWVudChcImRpdlwiKSk7cmV0dXJuIGMuc3R5bGUuY3NzVGV4dD1mLnN0eWxlLmNzc1RleHQ9XCItd2Via2l0LWJveC1zaXppbmc6Y29udGVudC1ib3g7LW1vei1ib3gtc2l6aW5nOmNvbnRlbnQtYm94O2JveC1zaXppbmc6Y29udGVudC1ib3g7ZGlzcGxheTpibG9jazttYXJnaW46MDtib3JkZXI6MDtwYWRkaW5nOjBcIixjLnN0eWxlLm1hcmdpblJpZ2h0PWMuc3R5bGUud2lkdGg9XCIwXCIsZi5zdHlsZS53aWR0aD1cIjFweFwiLGQuYXBwZW5kQ2hpbGQoZSksYj0hcGFyc2VGbG9hdChhLmdldENvbXB1dGVkU3R5bGUoYyxudWxsKS5tYXJnaW5SaWdodCksZC5yZW1vdmVDaGlsZChlKSxmLnJlbW92ZUNoaWxkKGMpLGJ9fSl9fSgpLG4uc3dhcD1mdW5jdGlvbihhLGIsYyxkKXt2YXIgZSxmLGc9e307Zm9yKGYgaW4gYilnW2ZdPWEuc3R5bGVbZl0sYS5zdHlsZVtmXT1iW2ZdO2U9Yy5hcHBseShhLGR8fFtdKTtmb3IoZiBpbiBiKWEuc3R5bGVbZl09Z1tmXTtyZXR1cm4gZX07dmFyIHphPS9eKG5vbmV8dGFibGUoPyEtY1tlYV0pLispLyxBYT1uZXcgUmVnRXhwKFwiXihcIitRK1wiKSguKikkXCIsXCJpXCIpLEJhPW5ldyBSZWdFeHAoXCJeKFsrLV0pPShcIitRK1wiKVwiLFwiaVwiKSxDYT17cG9zaXRpb246XCJhYnNvbHV0ZVwiLHZpc2liaWxpdHk6XCJoaWRkZW5cIixkaXNwbGF5OlwiYmxvY2tcIn0sRGE9e2xldHRlclNwYWNpbmc6XCIwXCIsZm9udFdlaWdodDpcIjQwMFwifSxFYT1bXCJXZWJraXRcIixcIk9cIixcIk1velwiLFwibXNcIl07ZnVuY3Rpb24gRmEoYSxiKXtpZihiIGluIGEpcmV0dXJuIGI7dmFyIGM9YlswXS50b1VwcGVyQ2FzZSgpK2Iuc2xpY2UoMSksZD1iLGU9RWEubGVuZ3RoO3doaWxlKGUtLSlpZihiPUVhW2VdK2MsYiBpbiBhKXJldHVybiBiO3JldHVybiBkfWZ1bmN0aW9uIEdhKGEsYixjKXt2YXIgZD1BYS5leGVjKGIpO3JldHVybiBkP01hdGgubWF4KDAsZFsxXS0oY3x8MCkpKyhkWzJdfHxcInB4XCIpOmJ9ZnVuY3Rpb24gSGEoYSxiLGMsZCxlKXtmb3IodmFyIGY9Yz09PShkP1wiYm9yZGVyXCI6XCJjb250ZW50XCIpPzQ6XCJ3aWR0aFwiPT09Yj8xOjAsZz0wOzQ+ZjtmKz0yKVwibWFyZ2luXCI9PT1jJiYoZys9bi5jc3MoYSxjK1JbZl0sITAsZSkpLGQ/KFwiY29udGVudFwiPT09YyYmKGctPW4uY3NzKGEsXCJwYWRkaW5nXCIrUltmXSwhMCxlKSksXCJtYXJnaW5cIiE9PWMmJihnLT1uLmNzcyhhLFwiYm9yZGVyXCIrUltmXStcIldpZHRoXCIsITAsZSkpKTooZys9bi5jc3MoYSxcInBhZGRpbmdcIitSW2ZdLCEwLGUpLFwicGFkZGluZ1wiIT09YyYmKGcrPW4uY3NzKGEsXCJib3JkZXJcIitSW2ZdK1wiV2lkdGhcIiwhMCxlKSkpO3JldHVybiBnfWZ1bmN0aW9uIElhKGEsYixjKXt2YXIgZD0hMCxlPVwid2lkdGhcIj09PWI/YS5vZmZzZXRXaWR0aDphLm9mZnNldEhlaWdodCxmPXdhKGEpLGc9XCJib3JkZXItYm94XCI9PT1uLmNzcyhhLFwiYm94U2l6aW5nXCIsITEsZik7aWYoMD49ZXx8bnVsbD09ZSl7aWYoZT14YShhLGIsZiksKDA+ZXx8bnVsbD09ZSkmJihlPWEuc3R5bGVbYl0pLHZhLnRlc3QoZSkpcmV0dXJuIGU7ZD1nJiYoay5ib3hTaXppbmdSZWxpYWJsZSgpfHxlPT09YS5zdHlsZVtiXSksZT1wYXJzZUZsb2F0KGUpfHwwfXJldHVybiBlK0hhKGEsYixjfHwoZz9cImJvcmRlclwiOlwiY29udGVudFwiKSxkLGYpK1wicHhcIn1mdW5jdGlvbiBKYShhLGIpe2Zvcih2YXIgYyxkLGUsZj1bXSxnPTAsaD1hLmxlbmd0aDtoPmc7ZysrKWQ9YVtnXSxkLnN0eWxlJiYoZltnXT1MLmdldChkLFwib2xkZGlzcGxheVwiKSxjPWQuc3R5bGUuZGlzcGxheSxiPyhmW2ddfHxcIm5vbmVcIiE9PWN8fChkLnN0eWxlLmRpc3BsYXk9XCJcIiksXCJcIj09PWQuc3R5bGUuZGlzcGxheSYmUyhkKSYmKGZbZ109TC5hY2Nlc3MoZCxcIm9sZGRpc3BsYXlcIix0YShkLm5vZGVOYW1lKSkpKTooZT1TKGQpLFwibm9uZVwiPT09YyYmZXx8TC5zZXQoZCxcIm9sZGRpc3BsYXlcIixlP2M6bi5jc3MoZCxcImRpc3BsYXlcIikpKSk7Zm9yKGc9MDtoPmc7ZysrKWQ9YVtnXSxkLnN0eWxlJiYoYiYmXCJub25lXCIhPT1kLnN0eWxlLmRpc3BsYXkmJlwiXCIhPT1kLnN0eWxlLmRpc3BsYXl8fChkLnN0eWxlLmRpc3BsYXk9Yj9mW2ddfHxcIlwiOlwibm9uZVwiKSk7cmV0dXJuIGF9bi5leHRlbmQoe2Nzc0hvb2tzOntvcGFjaXR5OntnZXQ6ZnVuY3Rpb24oYSxiKXtpZihiKXt2YXIgYz14YShhLFwib3BhY2l0eVwiKTtyZXR1cm5cIlwiPT09Yz9cIjFcIjpjfX19fSxjc3NOdW1iZXI6e2NvbHVtbkNvdW50OiEwLGZpbGxPcGFjaXR5OiEwLGZsZXhHcm93OiEwLGZsZXhTaHJpbms6ITAsZm9udFdlaWdodDohMCxsaW5lSGVpZ2h0OiEwLG9wYWNpdHk6ITAsb3JkZXI6ITAsb3JwaGFuczohMCx3aWRvd3M6ITAsekluZGV4OiEwLHpvb206ITB9LGNzc1Byb3BzOntcImZsb2F0XCI6XCJjc3NGbG9hdFwifSxzdHlsZTpmdW5jdGlvbihhLGIsYyxkKXtpZihhJiYzIT09YS5ub2RlVHlwZSYmOCE9PWEubm9kZVR5cGUmJmEuc3R5bGUpe3ZhciBlLGYsZyxoPW4uY2FtZWxDYXNlKGIpLGk9YS5zdHlsZTtyZXR1cm4gYj1uLmNzc1Byb3BzW2hdfHwobi5jc3NQcm9wc1toXT1GYShpLGgpKSxnPW4uY3NzSG9va3NbYl18fG4uY3NzSG9va3NbaF0sdm9pZCAwPT09Yz9nJiZcImdldFwiaW4gZyYmdm9pZCAwIT09KGU9Zy5nZXQoYSwhMSxkKSk/ZTppW2JdOihmPXR5cGVvZiBjLFwic3RyaW5nXCI9PT1mJiYoZT1CYS5leGVjKGMpKSYmKGM9KGVbMV0rMSkqZVsyXStwYXJzZUZsb2F0KG4uY3NzKGEsYikpLGY9XCJudW1iZXJcIiksbnVsbCE9YyYmYz09PWMmJihcIm51bWJlclwiIT09Znx8bi5jc3NOdW1iZXJbaF18fChjKz1cInB4XCIpLGsuY2xlYXJDbG9uZVN0eWxlfHxcIlwiIT09Y3x8MCE9PWIuaW5kZXhPZihcImJhY2tncm91bmRcIil8fChpW2JdPVwiaW5oZXJpdFwiKSxnJiZcInNldFwiaW4gZyYmdm9pZCAwPT09KGM9Zy5zZXQoYSxjLGQpKXx8KGlbYl09YykpLHZvaWQgMCl9fSxjc3M6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGUsZixnLGg9bi5jYW1lbENhc2UoYik7cmV0dXJuIGI9bi5jc3NQcm9wc1toXXx8KG4uY3NzUHJvcHNbaF09RmEoYS5zdHlsZSxoKSksZz1uLmNzc0hvb2tzW2JdfHxuLmNzc0hvb2tzW2hdLGcmJlwiZ2V0XCJpbiBnJiYoZT1nLmdldChhLCEwLGMpKSx2b2lkIDA9PT1lJiYoZT14YShhLGIsZCkpLFwibm9ybWFsXCI9PT1lJiZiIGluIERhJiYoZT1EYVtiXSksXCJcIj09PWN8fGM/KGY9cGFyc2VGbG9hdChlKSxjPT09ITB8fG4uaXNOdW1lcmljKGYpP2Z8fDA6ZSk6ZX19KSxuLmVhY2goW1wiaGVpZ2h0XCIsXCJ3aWR0aFwiXSxmdW5jdGlvbihhLGIpe24uY3NzSG9va3NbYl09e2dldDpmdW5jdGlvbihhLGMsZCl7cmV0dXJuIGM/emEudGVzdChuLmNzcyhhLFwiZGlzcGxheVwiKSkmJjA9PT1hLm9mZnNldFdpZHRoP24uc3dhcChhLENhLGZ1bmN0aW9uKCl7cmV0dXJuIElhKGEsYixkKX0pOklhKGEsYixkKTp2b2lkIDB9LHNldDpmdW5jdGlvbihhLGMsZCl7dmFyIGU9ZCYmd2EoYSk7cmV0dXJuIEdhKGEsYyxkP0hhKGEsYixkLFwiYm9yZGVyLWJveFwiPT09bi5jc3MoYSxcImJveFNpemluZ1wiLCExLGUpLGUpOjApfX19KSxuLmNzc0hvb2tzLm1hcmdpblJpZ2h0PXlhKGsucmVsaWFibGVNYXJnaW5SaWdodCxmdW5jdGlvbihhLGIpe3JldHVybiBiP24uc3dhcChhLHtkaXNwbGF5OlwiaW5saW5lLWJsb2NrXCJ9LHhhLFthLFwibWFyZ2luUmlnaHRcIl0pOnZvaWQgMH0pLG4uZWFjaCh7bWFyZ2luOlwiXCIscGFkZGluZzpcIlwiLGJvcmRlcjpcIldpZHRoXCJ9LGZ1bmN0aW9uKGEsYil7bi5jc3NIb29rc1thK2JdPXtleHBhbmQ6ZnVuY3Rpb24oYyl7Zm9yKHZhciBkPTAsZT17fSxmPVwic3RyaW5nXCI9PXR5cGVvZiBjP2Muc3BsaXQoXCIgXCIpOltjXTs0PmQ7ZCsrKWVbYStSW2RdK2JdPWZbZF18fGZbZC0yXXx8ZlswXTtyZXR1cm4gZX19LHVhLnRlc3QoYSl8fChuLmNzc0hvb2tzW2ErYl0uc2V0PUdhKX0pLG4uZm4uZXh0ZW5kKHtjc3M6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gSih0aGlzLGZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGY9e30sZz0wO2lmKG4uaXNBcnJheShiKSl7Zm9yKGQ9d2EoYSksZT1iLmxlbmd0aDtlPmc7ZysrKWZbYltnXV09bi5jc3MoYSxiW2ddLCExLGQpO3JldHVybiBmfXJldHVybiB2b2lkIDAhPT1jP24uc3R5bGUoYSxiLGMpOm4uY3NzKGEsYil9LGEsYixhcmd1bWVudHMubGVuZ3RoPjEpfSxzaG93OmZ1bmN0aW9uKCl7cmV0dXJuIEphKHRoaXMsITApfSxoaWRlOmZ1bmN0aW9uKCl7cmV0dXJuIEphKHRoaXMpfSx0b2dnbGU6ZnVuY3Rpb24oYSl7cmV0dXJuXCJib29sZWFuXCI9PXR5cGVvZiBhP2E/dGhpcy5zaG93KCk6dGhpcy5oaWRlKCk6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7Uyh0aGlzKT9uKHRoaXMpLnNob3coKTpuKHRoaXMpLmhpZGUoKX0pfX0pO2Z1bmN0aW9uIEthKGEsYixjLGQsZSl7cmV0dXJuIG5ldyBLYS5wcm90b3R5cGUuaW5pdChhLGIsYyxkLGUpfW4uVHdlZW49S2EsS2EucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpLYSxpbml0OmZ1bmN0aW9uKGEsYixjLGQsZSxmKXt0aGlzLmVsZW09YSx0aGlzLnByb3A9Yyx0aGlzLmVhc2luZz1lfHxcInN3aW5nXCIsdGhpcy5vcHRpb25zPWIsdGhpcy5zdGFydD10aGlzLm5vdz10aGlzLmN1cigpLHRoaXMuZW5kPWQsdGhpcy51bml0PWZ8fChuLmNzc051bWJlcltjXT9cIlwiOlwicHhcIil9LGN1cjpmdW5jdGlvbigpe3ZhciBhPUthLnByb3BIb29rc1t0aGlzLnByb3BdO3JldHVybiBhJiZhLmdldD9hLmdldCh0aGlzKTpLYS5wcm9wSG9va3MuX2RlZmF1bHQuZ2V0KHRoaXMpfSxydW46ZnVuY3Rpb24oYSl7dmFyIGIsYz1LYS5wcm9wSG9va3NbdGhpcy5wcm9wXTtyZXR1cm4gdGhpcy5vcHRpb25zLmR1cmF0aW9uP3RoaXMucG9zPWI9bi5lYXNpbmdbdGhpcy5lYXNpbmddKGEsdGhpcy5vcHRpb25zLmR1cmF0aW9uKmEsMCwxLHRoaXMub3B0aW9ucy5kdXJhdGlvbik6dGhpcy5wb3M9Yj1hLHRoaXMubm93PSh0aGlzLmVuZC10aGlzLnN0YXJ0KSpiK3RoaXMuc3RhcnQsdGhpcy5vcHRpb25zLnN0ZXAmJnRoaXMub3B0aW9ucy5zdGVwLmNhbGwodGhpcy5lbGVtLHRoaXMubm93LHRoaXMpLGMmJmMuc2V0P2Muc2V0KHRoaXMpOkthLnByb3BIb29rcy5fZGVmYXVsdC5zZXQodGhpcyksdGhpc319LEthLnByb3RvdHlwZS5pbml0LnByb3RvdHlwZT1LYS5wcm90b3R5cGUsS2EucHJvcEhvb2tzPXtfZGVmYXVsdDp7Z2V0OmZ1bmN0aW9uKGEpe3ZhciBiO3JldHVybiBudWxsPT1hLmVsZW1bYS5wcm9wXXx8YS5lbGVtLnN0eWxlJiZudWxsIT1hLmVsZW0uc3R5bGVbYS5wcm9wXT8oYj1uLmNzcyhhLmVsZW0sYS5wcm9wLFwiXCIpLGImJlwiYXV0b1wiIT09Yj9iOjApOmEuZWxlbVthLnByb3BdfSxzZXQ6ZnVuY3Rpb24oYSl7bi5meC5zdGVwW2EucHJvcF0/bi5meC5zdGVwW2EucHJvcF0oYSk6YS5lbGVtLnN0eWxlJiYobnVsbCE9YS5lbGVtLnN0eWxlW24uY3NzUHJvcHNbYS5wcm9wXV18fG4uY3NzSG9va3NbYS5wcm9wXSk/bi5zdHlsZShhLmVsZW0sYS5wcm9wLGEubm93K2EudW5pdCk6YS5lbGVtW2EucHJvcF09YS5ub3d9fX0sS2EucHJvcEhvb2tzLnNjcm9sbFRvcD1LYS5wcm9wSG9va3Muc2Nyb2xsTGVmdD17c2V0OmZ1bmN0aW9uKGEpe2EuZWxlbS5ub2RlVHlwZSYmYS5lbGVtLnBhcmVudE5vZGUmJihhLmVsZW1bYS5wcm9wXT1hLm5vdyl9fSxuLmVhc2luZz17bGluZWFyOmZ1bmN0aW9uKGEpe3JldHVybiBhfSxzd2luZzpmdW5jdGlvbihhKXtyZXR1cm4uNS1NYXRoLmNvcyhhKk1hdGguUEkpLzJ9fSxuLmZ4PUthLnByb3RvdHlwZS5pbml0LG4uZnguc3RlcD17fTt2YXIgTGEsTWEsTmE9L14oPzp0b2dnbGV8c2hvd3xoaWRlKSQvLE9hPW5ldyBSZWdFeHAoXCJeKD86KFsrLV0pPXwpKFwiK1ErXCIpKFthLXolXSopJFwiLFwiaVwiKSxQYT0vcXVldWVIb29rcyQvLFFhPVtWYV0sUmE9e1wiKlwiOltmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuY3JlYXRlVHdlZW4oYSxiKSxkPWMuY3VyKCksZT1PYS5leGVjKGIpLGY9ZSYmZVszXXx8KG4uY3NzTnVtYmVyW2FdP1wiXCI6XCJweFwiKSxnPShuLmNzc051bWJlclthXXx8XCJweFwiIT09ZiYmK2QpJiZPYS5leGVjKG4uY3NzKGMuZWxlbSxhKSksaD0xLGk9MjA7aWYoZyYmZ1szXSE9PWYpe2Y9Znx8Z1szXSxlPWV8fFtdLGc9K2R8fDE7ZG8gaD1ofHxcIi41XCIsZy89aCxuLnN0eWxlKGMuZWxlbSxhLGcrZik7d2hpbGUoaCE9PShoPWMuY3VyKCkvZCkmJjEhPT1oJiYtLWkpfXJldHVybiBlJiYoZz1jLnN0YXJ0PStnfHwrZHx8MCxjLnVuaXQ9ZixjLmVuZD1lWzFdP2crKGVbMV0rMSkqZVsyXTorZVsyXSksY31dfTtmdW5jdGlvbiBTYSgpe3JldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7TGE9dm9pZCAwfSksTGE9bi5ub3coKX1mdW5jdGlvbiBUYShhLGIpe3ZhciBjLGQ9MCxlPXtoZWlnaHQ6YX07Zm9yKGI9Yj8xOjA7ND5kO2QrPTItYiljPVJbZF0sZVtcIm1hcmdpblwiK2NdPWVbXCJwYWRkaW5nXCIrY109YTtyZXR1cm4gYiYmKGUub3BhY2l0eT1lLndpZHRoPWEpLGV9ZnVuY3Rpb24gVWEoYSxiLGMpe2Zvcih2YXIgZCxlPShSYVtiXXx8W10pLmNvbmNhdChSYVtcIipcIl0pLGY9MCxnPWUubGVuZ3RoO2c+ZjtmKyspaWYoZD1lW2ZdLmNhbGwoYyxiLGEpKXJldHVybiBkfWZ1bmN0aW9uIFZhKGEsYixjKXt2YXIgZCxlLGYsZyxoLGksaixrLGw9dGhpcyxtPXt9LG89YS5zdHlsZSxwPWEubm9kZVR5cGUmJlMoYSkscT1MLmdldChhLFwiZnhzaG93XCIpO2MucXVldWV8fChoPW4uX3F1ZXVlSG9va3MoYSxcImZ4XCIpLG51bGw9PWgudW5xdWV1ZWQmJihoLnVucXVldWVkPTAsaT1oLmVtcHR5LmZpcmUsaC5lbXB0eS5maXJlPWZ1bmN0aW9uKCl7aC51bnF1ZXVlZHx8aSgpfSksaC51bnF1ZXVlZCsrLGwuYWx3YXlzKGZ1bmN0aW9uKCl7bC5hbHdheXMoZnVuY3Rpb24oKXtoLnVucXVldWVkLS0sbi5xdWV1ZShhLFwiZnhcIikubGVuZ3RofHxoLmVtcHR5LmZpcmUoKX0pfSkpLDE9PT1hLm5vZGVUeXBlJiYoXCJoZWlnaHRcImluIGJ8fFwid2lkdGhcImluIGIpJiYoYy5vdmVyZmxvdz1bby5vdmVyZmxvdyxvLm92ZXJmbG93WCxvLm92ZXJmbG93WV0saj1uLmNzcyhhLFwiZGlzcGxheVwiKSxrPVwibm9uZVwiPT09aj9MLmdldChhLFwib2xkZGlzcGxheVwiKXx8dGEoYS5ub2RlTmFtZSk6aixcImlubGluZVwiPT09ayYmXCJub25lXCI9PT1uLmNzcyhhLFwiZmxvYXRcIikmJihvLmRpc3BsYXk9XCJpbmxpbmUtYmxvY2tcIikpLGMub3ZlcmZsb3cmJihvLm92ZXJmbG93PVwiaGlkZGVuXCIsbC5hbHdheXMoZnVuY3Rpb24oKXtvLm92ZXJmbG93PWMub3ZlcmZsb3dbMF0sby5vdmVyZmxvd1g9Yy5vdmVyZmxvd1sxXSxvLm92ZXJmbG93WT1jLm92ZXJmbG93WzJdfSkpO2ZvcihkIGluIGIpaWYoZT1iW2RdLE5hLmV4ZWMoZSkpe2lmKGRlbGV0ZSBiW2RdLGY9Znx8XCJ0b2dnbGVcIj09PWUsZT09PShwP1wiaGlkZVwiOlwic2hvd1wiKSl7aWYoXCJzaG93XCIhPT1lfHwhcXx8dm9pZCAwPT09cVtkXSljb250aW51ZTtwPSEwfW1bZF09cSYmcVtkXXx8bi5zdHlsZShhLGQpfWVsc2Ugaj12b2lkIDA7aWYobi5pc0VtcHR5T2JqZWN0KG0pKVwiaW5saW5lXCI9PT0oXCJub25lXCI9PT1qP3RhKGEubm9kZU5hbWUpOmopJiYoby5kaXNwbGF5PWopO2Vsc2V7cT9cImhpZGRlblwiaW4gcSYmKHA9cS5oaWRkZW4pOnE9TC5hY2Nlc3MoYSxcImZ4c2hvd1wiLHt9KSxmJiYocS5oaWRkZW49IXApLHA/bihhKS5zaG93KCk6bC5kb25lKGZ1bmN0aW9uKCl7bihhKS5oaWRlKCl9KSxsLmRvbmUoZnVuY3Rpb24oKXt2YXIgYjtMLnJlbW92ZShhLFwiZnhzaG93XCIpO2ZvcihiIGluIG0pbi5zdHlsZShhLGIsbVtiXSl9KTtmb3IoZCBpbiBtKWc9VWEocD9xW2RdOjAsZCxsKSxkIGluIHF8fChxW2RdPWcuc3RhcnQscCYmKGcuZW5kPWcuc3RhcnQsZy5zdGFydD1cIndpZHRoXCI9PT1kfHxcImhlaWdodFwiPT09ZD8xOjApKX19ZnVuY3Rpb24gV2EoYSxiKXt2YXIgYyxkLGUsZixnO2ZvcihjIGluIGEpaWYoZD1uLmNhbWVsQ2FzZShjKSxlPWJbZF0sZj1hW2NdLG4uaXNBcnJheShmKSYmKGU9ZlsxXSxmPWFbY109ZlswXSksYyE9PWQmJihhW2RdPWYsZGVsZXRlIGFbY10pLGc9bi5jc3NIb29rc1tkXSxnJiZcImV4cGFuZFwiaW4gZyl7Zj1nLmV4cGFuZChmKSxkZWxldGUgYVtkXTtmb3IoYyBpbiBmKWMgaW4gYXx8KGFbY109ZltjXSxiW2NdPWUpfWVsc2UgYltkXT1lfWZ1bmN0aW9uIFhhKGEsYixjKXt2YXIgZCxlLGY9MCxnPVFhLmxlbmd0aCxoPW4uRGVmZXJyZWQoKS5hbHdheXMoZnVuY3Rpb24oKXtkZWxldGUgaS5lbGVtfSksaT1mdW5jdGlvbigpe2lmKGUpcmV0dXJuITE7Zm9yKHZhciBiPUxhfHxTYSgpLGM9TWF0aC5tYXgoMCxqLnN0YXJ0VGltZStqLmR1cmF0aW9uLWIpLGQ9Yy9qLmR1cmF0aW9ufHwwLGY9MS1kLGc9MCxpPWoudHdlZW5zLmxlbmd0aDtpPmc7ZysrKWoudHdlZW5zW2ddLnJ1bihmKTtyZXR1cm4gaC5ub3RpZnlXaXRoKGEsW2osZixjXSksMT5mJiZpP2M6KGgucmVzb2x2ZVdpdGgoYSxbal0pLCExKX0saj1oLnByb21pc2Uoe2VsZW06YSxwcm9wczpuLmV4dGVuZCh7fSxiKSxvcHRzOm4uZXh0ZW5kKCEwLHtzcGVjaWFsRWFzaW5nOnt9fSxjKSxvcmlnaW5hbFByb3BlcnRpZXM6YixvcmlnaW5hbE9wdGlvbnM6YyxzdGFydFRpbWU6TGF8fFNhKCksZHVyYXRpb246Yy5kdXJhdGlvbix0d2VlbnM6W10sY3JlYXRlVHdlZW46ZnVuY3Rpb24oYixjKXt2YXIgZD1uLlR3ZWVuKGEsai5vcHRzLGIsYyxqLm9wdHMuc3BlY2lhbEVhc2luZ1tiXXx8ai5vcHRzLmVhc2luZyk7cmV0dXJuIGoudHdlZW5zLnB1c2goZCksZH0sc3RvcDpmdW5jdGlvbihiKXt2YXIgYz0wLGQ9Yj9qLnR3ZWVucy5sZW5ndGg6MDtpZihlKXJldHVybiB0aGlzO2ZvcihlPSEwO2Q+YztjKyspai50d2VlbnNbY10ucnVuKDEpO3JldHVybiBiP2gucmVzb2x2ZVdpdGgoYSxbaixiXSk6aC5yZWplY3RXaXRoKGEsW2osYl0pLHRoaXN9fSksaz1qLnByb3BzO2ZvcihXYShrLGoub3B0cy5zcGVjaWFsRWFzaW5nKTtnPmY7ZisrKWlmKGQ9UWFbZl0uY2FsbChqLGEsayxqLm9wdHMpKXJldHVybiBkO3JldHVybiBuLm1hcChrLFVhLGopLG4uaXNGdW5jdGlvbihqLm9wdHMuc3RhcnQpJiZqLm9wdHMuc3RhcnQuY2FsbChhLGopLG4uZngudGltZXIobi5leHRlbmQoaSx7ZWxlbTphLGFuaW06aixxdWV1ZTpqLm9wdHMucXVldWV9KSksai5wcm9ncmVzcyhqLm9wdHMucHJvZ3Jlc3MpLmRvbmUoai5vcHRzLmRvbmUsai5vcHRzLmNvbXBsZXRlKS5mYWlsKGoub3B0cy5mYWlsKS5hbHdheXMoai5vcHRzLmFsd2F5cyl9bi5BbmltYXRpb249bi5leHRlbmQoWGEse3R3ZWVuZXI6ZnVuY3Rpb24oYSxiKXtuLmlzRnVuY3Rpb24oYSk/KGI9YSxhPVtcIipcIl0pOmE9YS5zcGxpdChcIiBcIik7Zm9yKHZhciBjLGQ9MCxlPWEubGVuZ3RoO2U+ZDtkKyspYz1hW2RdLFJhW2NdPVJhW2NdfHxbXSxSYVtjXS51bnNoaWZ0KGIpfSxwcmVmaWx0ZXI6ZnVuY3Rpb24oYSxiKXtiP1FhLnVuc2hpZnQoYSk6UWEucHVzaChhKX19KSxuLnNwZWVkPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1hJiZcIm9iamVjdFwiPT10eXBlb2YgYT9uLmV4dGVuZCh7fSxhKTp7Y29tcGxldGU6Y3x8IWMmJmJ8fG4uaXNGdW5jdGlvbihhKSYmYSxkdXJhdGlvbjphLGVhc2luZzpjJiZifHxiJiYhbi5pc0Z1bmN0aW9uKGIpJiZifTtyZXR1cm4gZC5kdXJhdGlvbj1uLmZ4Lm9mZj8wOlwibnVtYmVyXCI9PXR5cGVvZiBkLmR1cmF0aW9uP2QuZHVyYXRpb246ZC5kdXJhdGlvbiBpbiBuLmZ4LnNwZWVkcz9uLmZ4LnNwZWVkc1tkLmR1cmF0aW9uXTpuLmZ4LnNwZWVkcy5fZGVmYXVsdCwobnVsbD09ZC5xdWV1ZXx8ZC5xdWV1ZT09PSEwKSYmKGQucXVldWU9XCJmeFwiKSxkLm9sZD1kLmNvbXBsZXRlLGQuY29tcGxldGU9ZnVuY3Rpb24oKXtuLmlzRnVuY3Rpb24oZC5vbGQpJiZkLm9sZC5jYWxsKHRoaXMpLGQucXVldWUmJm4uZGVxdWV1ZSh0aGlzLGQucXVldWUpfSxkfSxuLmZuLmV4dGVuZCh7ZmFkZVRvOmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiB0aGlzLmZpbHRlcihTKS5jc3MoXCJvcGFjaXR5XCIsMCkuc2hvdygpLmVuZCgpLmFuaW1hdGUoe29wYWNpdHk6Yn0sYSxjLGQpfSxhbmltYXRlOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPW4uaXNFbXB0eU9iamVjdChhKSxmPW4uc3BlZWQoYixjLGQpLGc9ZnVuY3Rpb24oKXt2YXIgYj1YYSh0aGlzLG4uZXh0ZW5kKHt9LGEpLGYpOyhlfHxMLmdldCh0aGlzLFwiZmluaXNoXCIpKSYmYi5zdG9wKCEwKX07cmV0dXJuIGcuZmluaXNoPWcsZXx8Zi5xdWV1ZT09PSExP3RoaXMuZWFjaChnKTp0aGlzLnF1ZXVlKGYucXVldWUsZyl9LHN0b3A6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWZ1bmN0aW9uKGEpe3ZhciBiPWEuc3RvcDtkZWxldGUgYS5zdG9wLGIoYyl9O3JldHVyblwic3RyaW5nXCIhPXR5cGVvZiBhJiYoYz1iLGI9YSxhPXZvaWQgMCksYiYmYSE9PSExJiZ0aGlzLnF1ZXVlKGF8fFwiZnhcIixbXSksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGI9ITAsZT1udWxsIT1hJiZhK1wicXVldWVIb29rc1wiLGY9bi50aW1lcnMsZz1MLmdldCh0aGlzKTtpZihlKWdbZV0mJmdbZV0uc3RvcCYmZChnW2VdKTtlbHNlIGZvcihlIGluIGcpZ1tlXSYmZ1tlXS5zdG9wJiZQYS50ZXN0KGUpJiZkKGdbZV0pO2ZvcihlPWYubGVuZ3RoO2UtLTspZltlXS5lbGVtIT09dGhpc3x8bnVsbCE9YSYmZltlXS5xdWV1ZSE9PWF8fChmW2VdLmFuaW0uc3RvcChjKSxiPSExLGYuc3BsaWNlKGUsMSkpOyhifHwhYykmJm4uZGVxdWV1ZSh0aGlzLGEpfSl9LGZpbmlzaDpmdW5jdGlvbihhKXtyZXR1cm4gYSE9PSExJiYoYT1hfHxcImZ4XCIpLHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBiLGM9TC5nZXQodGhpcyksZD1jW2ErXCJxdWV1ZVwiXSxlPWNbYStcInF1ZXVlSG9va3NcIl0sZj1uLnRpbWVycyxnPWQ/ZC5sZW5ndGg6MDtmb3IoYy5maW5pc2g9ITAsbi5xdWV1ZSh0aGlzLGEsW10pLGUmJmUuc3RvcCYmZS5zdG9wLmNhbGwodGhpcywhMCksYj1mLmxlbmd0aDtiLS07KWZbYl0uZWxlbT09PXRoaXMmJmZbYl0ucXVldWU9PT1hJiYoZltiXS5hbmltLnN0b3AoITApLGYuc3BsaWNlKGIsMSkpO2ZvcihiPTA7Zz5iO2IrKylkW2JdJiZkW2JdLmZpbmlzaCYmZFtiXS5maW5pc2guY2FsbCh0aGlzKTtkZWxldGUgYy5maW5pc2h9KX19KSxuLmVhY2goW1widG9nZ2xlXCIsXCJzaG93XCIsXCJoaWRlXCJdLGZ1bmN0aW9uKGEsYil7dmFyIGM9bi5mbltiXTtuLmZuW2JdPWZ1bmN0aW9uKGEsZCxlKXtyZXR1cm4gbnVsbD09YXx8XCJib29sZWFuXCI9PXR5cGVvZiBhP2MuYXBwbHkodGhpcyxhcmd1bWVudHMpOnRoaXMuYW5pbWF0ZShUYShiLCEwKSxhLGQsZSl9fSksbi5lYWNoKHtzbGlkZURvd246VGEoXCJzaG93XCIpLHNsaWRlVXA6VGEoXCJoaWRlXCIpLHNsaWRlVG9nZ2xlOlRhKFwidG9nZ2xlXCIpLGZhZGVJbjp7b3BhY2l0eTpcInNob3dcIn0sZmFkZU91dDp7b3BhY2l0eTpcImhpZGVcIn0sZmFkZVRvZ2dsZTp7b3BhY2l0eTpcInRvZ2dsZVwifX0sZnVuY3Rpb24oYSxiKXtuLmZuW2FdPWZ1bmN0aW9uKGEsYyxkKXtyZXR1cm4gdGhpcy5hbmltYXRlKGIsYSxjLGQpfX0pLG4udGltZXJzPVtdLG4uZngudGljaz1mdW5jdGlvbigpe3ZhciBhLGI9MCxjPW4udGltZXJzO2ZvcihMYT1uLm5vdygpO2I8Yy5sZW5ndGg7YisrKWE9Y1tiXSxhKCl8fGNbYl0hPT1hfHxjLnNwbGljZShiLS0sMSk7Yy5sZW5ndGh8fG4uZnguc3RvcCgpLExhPXZvaWQgMH0sbi5meC50aW1lcj1mdW5jdGlvbihhKXtuLnRpbWVycy5wdXNoKGEpLGEoKT9uLmZ4LnN0YXJ0KCk6bi50aW1lcnMucG9wKCl9LG4uZnguaW50ZXJ2YWw9MTMsbi5meC5zdGFydD1mdW5jdGlvbigpe01hfHwoTWE9c2V0SW50ZXJ2YWwobi5meC50aWNrLG4uZnguaW50ZXJ2YWwpKX0sbi5meC5zdG9wPWZ1bmN0aW9uKCl7Y2xlYXJJbnRlcnZhbChNYSksTWE9bnVsbH0sbi5meC5zcGVlZHM9e3Nsb3c6NjAwLGZhc3Q6MjAwLF9kZWZhdWx0OjQwMH0sbi5mbi5kZWxheT1mdW5jdGlvbihhLGIpe3JldHVybiBhPW4uZng/bi5meC5zcGVlZHNbYV18fGE6YSxiPWJ8fFwiZnhcIix0aGlzLnF1ZXVlKGIsZnVuY3Rpb24oYixjKXt2YXIgZD1zZXRUaW1lb3V0KGIsYSk7Yy5zdG9wPWZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KGQpfX0pfSxmdW5jdGlvbigpe3ZhciBhPWwuY3JlYXRlRWxlbWVudChcImlucHV0XCIpLGI9bC5jcmVhdGVFbGVtZW50KFwic2VsZWN0XCIpLGM9Yi5hcHBlbmRDaGlsZChsLmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIikpO2EudHlwZT1cImNoZWNrYm94XCIsay5jaGVja09uPVwiXCIhPT1hLnZhbHVlLGsub3B0U2VsZWN0ZWQ9Yy5zZWxlY3RlZCxiLmRpc2FibGVkPSEwLGsub3B0RGlzYWJsZWQ9IWMuZGlzYWJsZWQsYT1sLmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKSxhLnZhbHVlPVwidFwiLGEudHlwZT1cInJhZGlvXCIsay5yYWRpb1ZhbHVlPVwidFwiPT09YS52YWx1ZX0oKTt2YXIgWWEsWmEsJGE9bi5leHByLmF0dHJIYW5kbGU7bi5mbi5leHRlbmQoe2F0dHI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gSih0aGlzLG4uYXR0cixhLGIsYXJndW1lbnRzLmxlbmd0aD4xKX0scmVtb3ZlQXR0cjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7bi5yZW1vdmVBdHRyKHRoaXMsYSl9KX19KSxuLmV4dGVuZCh7YXR0cjpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmPWEubm9kZVR5cGU7aWYoYSYmMyE9PWYmJjghPT1mJiYyIT09ZilyZXR1cm4gdHlwZW9mIGEuZ2V0QXR0cmlidXRlPT09VT9uLnByb3AoYSxiLGMpOigxPT09ZiYmbi5pc1hNTERvYyhhKXx8KGI9Yi50b0xvd2VyQ2FzZSgpLGQ9bi5hdHRySG9va3NbYl18fChuLmV4cHIubWF0Y2guYm9vbC50ZXN0KGIpP1phOllhKSksXG52b2lkIDA9PT1jP2QmJlwiZ2V0XCJpbiBkJiZudWxsIT09KGU9ZC5nZXQoYSxiKSk/ZTooZT1uLmZpbmQuYXR0cihhLGIpLG51bGw9PWU/dm9pZCAwOmUpOm51bGwhPT1jP2QmJlwic2V0XCJpbiBkJiZ2b2lkIDAhPT0oZT1kLnNldChhLGMsYikpP2U6KGEuc2V0QXR0cmlidXRlKGIsYytcIlwiKSxjKTp2b2lkIG4ucmVtb3ZlQXR0cihhLGIpKX0scmVtb3ZlQXR0cjpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZT0wLGY9YiYmYi5tYXRjaChFKTtpZihmJiYxPT09YS5ub2RlVHlwZSl3aGlsZShjPWZbZSsrXSlkPW4ucHJvcEZpeFtjXXx8YyxuLmV4cHIubWF0Y2guYm9vbC50ZXN0KGMpJiYoYVtkXT0hMSksYS5yZW1vdmVBdHRyaWJ1dGUoYyl9LGF0dHJIb29rczp7dHlwZTp7c2V0OmZ1bmN0aW9uKGEsYil7aWYoIWsucmFkaW9WYWx1ZSYmXCJyYWRpb1wiPT09YiYmbi5ub2RlTmFtZShhLFwiaW5wdXRcIikpe3ZhciBjPWEudmFsdWU7cmV0dXJuIGEuc2V0QXR0cmlidXRlKFwidHlwZVwiLGIpLGMmJihhLnZhbHVlPWMpLGJ9fX19fSksWmE9e3NldDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGI9PT0hMT9uLnJlbW92ZUF0dHIoYSxjKTphLnNldEF0dHJpYnV0ZShjLGMpLGN9fSxuLmVhY2gobi5leHByLm1hdGNoLmJvb2wuc291cmNlLm1hdGNoKC9cXHcrL2cpLGZ1bmN0aW9uKGEsYil7dmFyIGM9JGFbYl18fG4uZmluZC5hdHRyOyRhW2JdPWZ1bmN0aW9uKGEsYixkKXt2YXIgZSxmO3JldHVybiBkfHwoZj0kYVtiXSwkYVtiXT1lLGU9bnVsbCE9YyhhLGIsZCk/Yi50b0xvd2VyQ2FzZSgpOm51bGwsJGFbYl09ZiksZX19KTt2YXIgX2E9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9uKSQvaTtuLmZuLmV4dGVuZCh7cHJvcDpmdW5jdGlvbihhLGIpe3JldHVybiBKKHRoaXMsbi5wcm9wLGEsYixhcmd1bWVudHMubGVuZ3RoPjEpfSxyZW1vdmVQcm9wOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtkZWxldGUgdGhpc1tuLnByb3BGaXhbYV18fGFdfSl9fSksbi5leHRlbmQoe3Byb3BGaXg6e1wiZm9yXCI6XCJodG1sRm9yXCIsXCJjbGFzc1wiOlwiY2xhc3NOYW1lXCJ9LHByb3A6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZixnPWEubm9kZVR5cGU7aWYoYSYmMyE9PWcmJjghPT1nJiYyIT09ZylyZXR1cm4gZj0xIT09Z3x8IW4uaXNYTUxEb2MoYSksZiYmKGI9bi5wcm9wRml4W2JdfHxiLGU9bi5wcm9wSG9va3NbYl0pLHZvaWQgMCE9PWM/ZSYmXCJzZXRcImluIGUmJnZvaWQgMCE9PShkPWUuc2V0KGEsYyxiKSk/ZDphW2JdPWM6ZSYmXCJnZXRcImluIGUmJm51bGwhPT0oZD1lLmdldChhLGIpKT9kOmFbYl19LHByb3BIb29rczp7dGFiSW5kZXg6e2dldDpmdW5jdGlvbihhKXtyZXR1cm4gYS5oYXNBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiKXx8X2EudGVzdChhLm5vZGVOYW1lKXx8YS5ocmVmP2EudGFiSW5kZXg6LTF9fX19KSxrLm9wdFNlbGVjdGVkfHwobi5wcm9wSG9va3Muc2VsZWN0ZWQ9e2dldDpmdW5jdGlvbihhKXt2YXIgYj1hLnBhcmVudE5vZGU7cmV0dXJuIGImJmIucGFyZW50Tm9kZSYmYi5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXgsbnVsbH19KSxuLmVhY2goW1widGFiSW5kZXhcIixcInJlYWRPbmx5XCIsXCJtYXhMZW5ndGhcIixcImNlbGxTcGFjaW5nXCIsXCJjZWxsUGFkZGluZ1wiLFwicm93U3BhblwiLFwiY29sU3BhblwiLFwidXNlTWFwXCIsXCJmcmFtZUJvcmRlclwiLFwiY29udGVudEVkaXRhYmxlXCJdLGZ1bmN0aW9uKCl7bi5wcm9wRml4W3RoaXMudG9Mb3dlckNhc2UoKV09dGhpc30pO3ZhciBhYj0vW1xcdFxcclxcblxcZl0vZztuLmZuLmV4dGVuZCh7YWRkQ2xhc3M6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGUsZixnLGg9XCJzdHJpbmdcIj09dHlwZW9mIGEmJmEsaT0wLGo9dGhpcy5sZW5ndGg7aWYobi5pc0Z1bmN0aW9uKGEpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oYil7bih0aGlzKS5hZGRDbGFzcyhhLmNhbGwodGhpcyxiLHRoaXMuY2xhc3NOYW1lKSl9KTtpZihoKWZvcihiPShhfHxcIlwiKS5tYXRjaChFKXx8W107aj5pO2krKylpZihjPXRoaXNbaV0sZD0xPT09Yy5ub2RlVHlwZSYmKGMuY2xhc3NOYW1lPyhcIiBcIitjLmNsYXNzTmFtZStcIiBcIikucmVwbGFjZShhYixcIiBcIik6XCIgXCIpKXtmPTA7d2hpbGUoZT1iW2YrK10pZC5pbmRleE9mKFwiIFwiK2UrXCIgXCIpPDAmJihkKz1lK1wiIFwiKTtnPW4udHJpbShkKSxjLmNsYXNzTmFtZSE9PWcmJihjLmNsYXNzTmFtZT1nKX1yZXR1cm4gdGhpc30scmVtb3ZlQ2xhc3M6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGUsZixnLGg9MD09PWFyZ3VtZW50cy5sZW5ndGh8fFwic3RyaW5nXCI9PXR5cGVvZiBhJiZhLGk9MCxqPXRoaXMubGVuZ3RoO2lmKG4uaXNGdW5jdGlvbihhKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGIpe24odGhpcykucmVtb3ZlQ2xhc3MoYS5jYWxsKHRoaXMsYix0aGlzLmNsYXNzTmFtZSkpfSk7aWYoaClmb3IoYj0oYXx8XCJcIikubWF0Y2goRSl8fFtdO2o+aTtpKyspaWYoYz10aGlzW2ldLGQ9MT09PWMubm9kZVR5cGUmJihjLmNsYXNzTmFtZT8oXCIgXCIrYy5jbGFzc05hbWUrXCIgXCIpLnJlcGxhY2UoYWIsXCIgXCIpOlwiXCIpKXtmPTA7d2hpbGUoZT1iW2YrK10pd2hpbGUoZC5pbmRleE9mKFwiIFwiK2UrXCIgXCIpPj0wKWQ9ZC5yZXBsYWNlKFwiIFwiK2UrXCIgXCIsXCIgXCIpO2c9YT9uLnRyaW0oZCk6XCJcIixjLmNsYXNzTmFtZSE9PWcmJihjLmNsYXNzTmFtZT1nKX1yZXR1cm4gdGhpc30sdG9nZ2xlQ2xhc3M6ZnVuY3Rpb24oYSxiKXt2YXIgYz10eXBlb2YgYTtyZXR1cm5cImJvb2xlYW5cIj09dHlwZW9mIGImJlwic3RyaW5nXCI9PT1jP2I/dGhpcy5hZGRDbGFzcyhhKTp0aGlzLnJlbW92ZUNsYXNzKGEpOnRoaXMuZWFjaChuLmlzRnVuY3Rpb24oYSk/ZnVuY3Rpb24oYyl7bih0aGlzKS50b2dnbGVDbGFzcyhhLmNhbGwodGhpcyxjLHRoaXMuY2xhc3NOYW1lLGIpLGIpfTpmdW5jdGlvbigpe2lmKFwic3RyaW5nXCI9PT1jKXt2YXIgYixkPTAsZT1uKHRoaXMpLGY9YS5tYXRjaChFKXx8W107d2hpbGUoYj1mW2QrK10pZS5oYXNDbGFzcyhiKT9lLnJlbW92ZUNsYXNzKGIpOmUuYWRkQ2xhc3MoYil9ZWxzZShjPT09VXx8XCJib29sZWFuXCI9PT1jKSYmKHRoaXMuY2xhc3NOYW1lJiZMLnNldCh0aGlzLFwiX19jbGFzc05hbWVfX1wiLHRoaXMuY2xhc3NOYW1lKSx0aGlzLmNsYXNzTmFtZT10aGlzLmNsYXNzTmFtZXx8YT09PSExP1wiXCI6TC5nZXQodGhpcyxcIl9fY2xhc3NOYW1lX19cIil8fFwiXCIpfSl9LGhhc0NsYXNzOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1cIiBcIithK1wiIFwiLGM9MCxkPXRoaXMubGVuZ3RoO2Q+YztjKyspaWYoMT09PXRoaXNbY10ubm9kZVR5cGUmJihcIiBcIit0aGlzW2NdLmNsYXNzTmFtZStcIiBcIikucmVwbGFjZShhYixcIiBcIikuaW5kZXhPZihiKT49MClyZXR1cm4hMDtyZXR1cm4hMX19KTt2YXIgYmI9L1xcci9nO24uZm4uZXh0ZW5kKHt2YWw6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGU9dGhpc1swXTt7aWYoYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gZD1uLmlzRnVuY3Rpb24oYSksdGhpcy5lYWNoKGZ1bmN0aW9uKGMpe3ZhciBlOzE9PT10aGlzLm5vZGVUeXBlJiYoZT1kP2EuY2FsbCh0aGlzLGMsbih0aGlzKS52YWwoKSk6YSxudWxsPT1lP2U9XCJcIjpcIm51bWJlclwiPT10eXBlb2YgZT9lKz1cIlwiOm4uaXNBcnJheShlKSYmKGU9bi5tYXAoZSxmdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09YT9cIlwiOmErXCJcIn0pKSxiPW4udmFsSG9va3NbdGhpcy50eXBlXXx8bi52YWxIb29rc1t0aGlzLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldLGImJlwic2V0XCJpbiBiJiZ2b2lkIDAhPT1iLnNldCh0aGlzLGUsXCJ2YWx1ZVwiKXx8KHRoaXMudmFsdWU9ZSkpfSk7aWYoZSlyZXR1cm4gYj1uLnZhbEhvb2tzW2UudHlwZV18fG4udmFsSG9va3NbZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXSxiJiZcImdldFwiaW4gYiYmdm9pZCAwIT09KGM9Yi5nZXQoZSxcInZhbHVlXCIpKT9jOihjPWUudmFsdWUsXCJzdHJpbmdcIj09dHlwZW9mIGM/Yy5yZXBsYWNlKGJiLFwiXCIpOm51bGw9PWM/XCJcIjpjKX19fSksbi5leHRlbmQoe3ZhbEhvb2tzOntvcHRpb246e2dldDpmdW5jdGlvbihhKXt2YXIgYj1uLmZpbmQuYXR0cihhLFwidmFsdWVcIik7cmV0dXJuIG51bGwhPWI/YjpuLnRyaW0obi50ZXh0KGEpKX19LHNlbGVjdDp7Z2V0OmZ1bmN0aW9uKGEpe2Zvcih2YXIgYixjLGQ9YS5vcHRpb25zLGU9YS5zZWxlY3RlZEluZGV4LGY9XCJzZWxlY3Qtb25lXCI9PT1hLnR5cGV8fDA+ZSxnPWY/bnVsbDpbXSxoPWY/ZSsxOmQubGVuZ3RoLGk9MD5lP2g6Zj9lOjA7aD5pO2krKylpZihjPWRbaV0sISghYy5zZWxlY3RlZCYmaSE9PWV8fChrLm9wdERpc2FibGVkP2MuZGlzYWJsZWQ6bnVsbCE9PWMuZ2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIikpfHxjLnBhcmVudE5vZGUuZGlzYWJsZWQmJm4ubm9kZU5hbWUoYy5wYXJlbnROb2RlLFwib3B0Z3JvdXBcIikpKXtpZihiPW4oYykudmFsKCksZilyZXR1cm4gYjtnLnB1c2goYil9cmV0dXJuIGd9LHNldDpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZT1hLm9wdGlvbnMsZj1uLm1ha2VBcnJheShiKSxnPWUubGVuZ3RoO3doaWxlKGctLSlkPWVbZ10sKGQuc2VsZWN0ZWQ9bi5pbkFycmF5KGQudmFsdWUsZik+PTApJiYoYz0hMCk7cmV0dXJuIGN8fChhLnNlbGVjdGVkSW5kZXg9LTEpLGZ9fX19KSxuLmVhY2goW1wicmFkaW9cIixcImNoZWNrYm94XCJdLGZ1bmN0aW9uKCl7bi52YWxIb29rc1t0aGlzXT17c2V0OmZ1bmN0aW9uKGEsYil7cmV0dXJuIG4uaXNBcnJheShiKT9hLmNoZWNrZWQ9bi5pbkFycmF5KG4oYSkudmFsKCksYik+PTA6dm9pZCAwfX0say5jaGVja09ufHwobi52YWxIb29rc1t0aGlzXS5nZXQ9ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PT1hLmdldEF0dHJpYnV0ZShcInZhbHVlXCIpP1wib25cIjphLnZhbHVlfSl9KSxuLmVhY2goXCJibHVyIGZvY3VzIGZvY3VzaW4gZm9jdXNvdXQgbG9hZCByZXNpemUgc2Nyb2xsIHVubG9hZCBjbGljayBkYmxjbGljayBtb3VzZWRvd24gbW91c2V1cCBtb3VzZW1vdmUgbW91c2VvdmVyIG1vdXNlb3V0IG1vdXNlZW50ZXIgbW91c2VsZWF2ZSBjaGFuZ2Ugc2VsZWN0IHN1Ym1pdCBrZXlkb3duIGtleXByZXNzIGtleXVwIGVycm9yIGNvbnRleHRtZW51XCIuc3BsaXQoXCIgXCIpLGZ1bmN0aW9uKGEsYil7bi5mbltiXT1mdW5jdGlvbihhLGMpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPjA/dGhpcy5vbihiLG51bGwsYSxjKTp0aGlzLnRyaWdnZXIoYil9fSksbi5mbi5leHRlbmQoe2hvdmVyOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMubW91c2VlbnRlcihhKS5tb3VzZWxlYXZlKGJ8fGEpfSxiaW5kOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gdGhpcy5vbihhLG51bGwsYixjKX0sdW5iaW5kOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMub2ZmKGEsbnVsbCxiKX0sZGVsZWdhdGU6ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIHRoaXMub24oYixhLGMsZCl9LHVuZGVsZWdhdGU6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiAxPT09YXJndW1lbnRzLmxlbmd0aD90aGlzLm9mZihhLFwiKipcIik6dGhpcy5vZmYoYixhfHxcIioqXCIsYyl9fSk7dmFyIGNiPW4ubm93KCksZGI9L1xcPy87bi5wYXJzZUpTT049ZnVuY3Rpb24oYSl7cmV0dXJuIEpTT04ucGFyc2UoYStcIlwiKX0sbi5wYXJzZVhNTD1mdW5jdGlvbihhKXt2YXIgYixjO2lmKCFhfHxcInN0cmluZ1wiIT10eXBlb2YgYSlyZXR1cm4gbnVsbDt0cnl7Yz1uZXcgRE9NUGFyc2VyLGI9Yy5wYXJzZUZyb21TdHJpbmcoYSxcInRleHQveG1sXCIpfWNhdGNoKGQpe2I9dm9pZCAwfXJldHVybighYnx8Yi5nZXRFbGVtZW50c0J5VGFnTmFtZShcInBhcnNlcmVycm9yXCIpLmxlbmd0aCkmJm4uZXJyb3IoXCJJbnZhbGlkIFhNTDogXCIrYSksYn07dmFyIGViPS8jLiokLyxmYj0vKFs/Jl0pXz1bXiZdKi8sZ2I9L14oLio/KTpbIFxcdF0qKFteXFxyXFxuXSopJC9nbSxoYj0vXig/OmFib3V0fGFwcHxhcHAtc3RvcmFnZXwuKy1leHRlbnNpb258ZmlsZXxyZXN8d2lkZ2V0KTokLyxpYj0vXig/OkdFVHxIRUFEKSQvLGpiPS9eXFwvXFwvLyxrYj0vXihbXFx3ListXSs6KSg/OlxcL1xcLyg/OlteXFwvPyNdKkB8KShbXlxcLz8jOl0qKSg/OjooXFxkKyl8KXwpLyxsYj17fSxtYj17fSxuYj1cIiovXCIuY29uY2F0KFwiKlwiKSxvYj1hLmxvY2F0aW9uLmhyZWYscGI9a2IuZXhlYyhvYi50b0xvd2VyQ2FzZSgpKXx8W107ZnVuY3Rpb24gcWIoYSl7cmV0dXJuIGZ1bmN0aW9uKGIsYyl7XCJzdHJpbmdcIiE9dHlwZW9mIGImJihjPWIsYj1cIipcIik7dmFyIGQsZT0wLGY9Yi50b0xvd2VyQ2FzZSgpLm1hdGNoKEUpfHxbXTtpZihuLmlzRnVuY3Rpb24oYykpd2hpbGUoZD1mW2UrK10pXCIrXCI9PT1kWzBdPyhkPWQuc2xpY2UoMSl8fFwiKlwiLChhW2RdPWFbZF18fFtdKS51bnNoaWZ0KGMpKTooYVtkXT1hW2RdfHxbXSkucHVzaChjKX19ZnVuY3Rpb24gcmIoYSxiLGMsZCl7dmFyIGU9e30sZj1hPT09bWI7ZnVuY3Rpb24gZyhoKXt2YXIgaTtyZXR1cm4gZVtoXT0hMCxuLmVhY2goYVtoXXx8W10sZnVuY3Rpb24oYSxoKXt2YXIgaj1oKGIsYyxkKTtyZXR1cm5cInN0cmluZ1wiIT10eXBlb2Yganx8Znx8ZVtqXT9mPyEoaT1qKTp2b2lkIDA6KGIuZGF0YVR5cGVzLnVuc2hpZnQoaiksZyhqKSwhMSl9KSxpfXJldHVybiBnKGIuZGF0YVR5cGVzWzBdKXx8IWVbXCIqXCJdJiZnKFwiKlwiKX1mdW5jdGlvbiBzYihhLGIpe3ZhciBjLGQsZT1uLmFqYXhTZXR0aW5ncy5mbGF0T3B0aW9uc3x8e307Zm9yKGMgaW4gYil2b2lkIDAhPT1iW2NdJiYoKGVbY10/YTpkfHwoZD17fSkpW2NdPWJbY10pO3JldHVybiBkJiZuLmV4dGVuZCghMCxhLGQpLGF9ZnVuY3Rpb24gdGIoYSxiLGMpe3ZhciBkLGUsZixnLGg9YS5jb250ZW50cyxpPWEuZGF0YVR5cGVzO3doaWxlKFwiKlwiPT09aVswXSlpLnNoaWZ0KCksdm9pZCAwPT09ZCYmKGQ9YS5taW1lVHlwZXx8Yi5nZXRSZXNwb25zZUhlYWRlcihcIkNvbnRlbnQtVHlwZVwiKSk7aWYoZClmb3IoZSBpbiBoKWlmKGhbZV0mJmhbZV0udGVzdChkKSl7aS51bnNoaWZ0KGUpO2JyZWFrfWlmKGlbMF1pbiBjKWY9aVswXTtlbHNle2ZvcihlIGluIGMpe2lmKCFpWzBdfHxhLmNvbnZlcnRlcnNbZStcIiBcIitpWzBdXSl7Zj1lO2JyZWFrfWd8fChnPWUpfWY9Znx8Z31yZXR1cm4gZj8oZiE9PWlbMF0mJmkudW5zaGlmdChmKSxjW2ZdKTp2b2lkIDB9ZnVuY3Rpb24gdWIoYSxiLGMsZCl7dmFyIGUsZixnLGgsaSxqPXt9LGs9YS5kYXRhVHlwZXMuc2xpY2UoKTtpZihrWzFdKWZvcihnIGluIGEuY29udmVydGVycylqW2cudG9Mb3dlckNhc2UoKV09YS5jb252ZXJ0ZXJzW2ddO2Y9ay5zaGlmdCgpO3doaWxlKGYpaWYoYS5yZXNwb25zZUZpZWxkc1tmXSYmKGNbYS5yZXNwb25zZUZpZWxkc1tmXV09YiksIWkmJmQmJmEuZGF0YUZpbHRlciYmKGI9YS5kYXRhRmlsdGVyKGIsYS5kYXRhVHlwZSkpLGk9ZixmPWsuc2hpZnQoKSlpZihcIipcIj09PWYpZj1pO2Vsc2UgaWYoXCIqXCIhPT1pJiZpIT09Zil7aWYoZz1qW2krXCIgXCIrZl18fGpbXCIqIFwiK2ZdLCFnKWZvcihlIGluIGopaWYoaD1lLnNwbGl0KFwiIFwiKSxoWzFdPT09ZiYmKGc9altpK1wiIFwiK2hbMF1dfHxqW1wiKiBcIitoWzBdXSkpe2c9PT0hMD9nPWpbZV06altlXSE9PSEwJiYoZj1oWzBdLGsudW5zaGlmdChoWzFdKSk7YnJlYWt9aWYoZyE9PSEwKWlmKGcmJmFbXCJ0aHJvd3NcIl0pYj1nKGIpO2Vsc2UgdHJ5e2I9ZyhiKX1jYXRjaChsKXtyZXR1cm57c3RhdGU6XCJwYXJzZXJlcnJvclwiLGVycm9yOmc/bDpcIk5vIGNvbnZlcnNpb24gZnJvbSBcIitpK1wiIHRvIFwiK2Z9fX1yZXR1cm57c3RhdGU6XCJzdWNjZXNzXCIsZGF0YTpifX1uLmV4dGVuZCh7YWN0aXZlOjAsbGFzdE1vZGlmaWVkOnt9LGV0YWc6e30sYWpheFNldHRpbmdzOnt1cmw6b2IsdHlwZTpcIkdFVFwiLGlzTG9jYWw6aGIudGVzdChwYlsxXSksZ2xvYmFsOiEwLHByb2Nlc3NEYXRhOiEwLGFzeW5jOiEwLGNvbnRlbnRUeXBlOlwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkOyBjaGFyc2V0PVVURi04XCIsYWNjZXB0czp7XCIqXCI6bmIsdGV4dDpcInRleHQvcGxhaW5cIixodG1sOlwidGV4dC9odG1sXCIseG1sOlwiYXBwbGljYXRpb24veG1sLCB0ZXh0L3htbFwiLGpzb246XCJhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L2phdmFzY3JpcHRcIn0sY29udGVudHM6e3htbDoveG1sLyxodG1sOi9odG1sLyxqc29uOi9qc29uL30scmVzcG9uc2VGaWVsZHM6e3htbDpcInJlc3BvbnNlWE1MXCIsdGV4dDpcInJlc3BvbnNlVGV4dFwiLGpzb246XCJyZXNwb25zZUpTT05cIn0sY29udmVydGVyczp7XCIqIHRleHRcIjpTdHJpbmcsXCJ0ZXh0IGh0bWxcIjohMCxcInRleHQganNvblwiOm4ucGFyc2VKU09OLFwidGV4dCB4bWxcIjpuLnBhcnNlWE1MfSxmbGF0T3B0aW9uczp7dXJsOiEwLGNvbnRleHQ6ITB9fSxhamF4U2V0dXA6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYj9zYihzYihhLG4uYWpheFNldHRpbmdzKSxiKTpzYihuLmFqYXhTZXR0aW5ncyxhKX0sYWpheFByZWZpbHRlcjpxYihsYiksYWpheFRyYW5zcG9ydDpxYihtYiksYWpheDpmdW5jdGlvbihhLGIpe1wib2JqZWN0XCI9PXR5cGVvZiBhJiYoYj1hLGE9dm9pZCAwKSxiPWJ8fHt9O3ZhciBjLGQsZSxmLGcsaCxpLGosaz1uLmFqYXhTZXR1cCh7fSxiKSxsPWsuY29udGV4dHx8ayxtPWsuY29udGV4dCYmKGwubm9kZVR5cGV8fGwuanF1ZXJ5KT9uKGwpOm4uZXZlbnQsbz1uLkRlZmVycmVkKCkscD1uLkNhbGxiYWNrcyhcIm9uY2UgbWVtb3J5XCIpLHE9ay5zdGF0dXNDb2RlfHx7fSxyPXt9LHM9e30sdD0wLHU9XCJjYW5jZWxlZFwiLHY9e3JlYWR5U3RhdGU6MCxnZXRSZXNwb25zZUhlYWRlcjpmdW5jdGlvbihhKXt2YXIgYjtpZigyPT09dCl7aWYoIWYpe2Y9e307d2hpbGUoYj1nYi5leGVjKGUpKWZbYlsxXS50b0xvd2VyQ2FzZSgpXT1iWzJdfWI9ZlthLnRvTG93ZXJDYXNlKCldfXJldHVybiBudWxsPT1iP251bGw6Yn0sZ2V0QWxsUmVzcG9uc2VIZWFkZXJzOmZ1bmN0aW9uKCl7cmV0dXJuIDI9PT10P2U6bnVsbH0sc2V0UmVxdWVzdEhlYWRlcjpmdW5jdGlvbihhLGIpe3ZhciBjPWEudG9Mb3dlckNhc2UoKTtyZXR1cm4gdHx8KGE9c1tjXT1zW2NdfHxhLHJbYV09YiksdGhpc30sb3ZlcnJpZGVNaW1lVHlwZTpmdW5jdGlvbihhKXtyZXR1cm4gdHx8KGsubWltZVR5cGU9YSksdGhpc30sc3RhdHVzQ29kZTpmdW5jdGlvbihhKXt2YXIgYjtpZihhKWlmKDI+dClmb3IoYiBpbiBhKXFbYl09W3FbYl0sYVtiXV07ZWxzZSB2LmFsd2F5cyhhW3Yuc3RhdHVzXSk7cmV0dXJuIHRoaXN9LGFib3J0OmZ1bmN0aW9uKGEpe3ZhciBiPWF8fHU7cmV0dXJuIGMmJmMuYWJvcnQoYikseCgwLGIpLHRoaXN9fTtpZihvLnByb21pc2UodikuY29tcGxldGU9cC5hZGQsdi5zdWNjZXNzPXYuZG9uZSx2LmVycm9yPXYuZmFpbCxrLnVybD0oKGF8fGsudXJsfHxvYikrXCJcIikucmVwbGFjZShlYixcIlwiKS5yZXBsYWNlKGpiLHBiWzFdK1wiLy9cIiksay50eXBlPWIubWV0aG9kfHxiLnR5cGV8fGsubWV0aG9kfHxrLnR5cGUsay5kYXRhVHlwZXM9bi50cmltKGsuZGF0YVR5cGV8fFwiKlwiKS50b0xvd2VyQ2FzZSgpLm1hdGNoKEUpfHxbXCJcIl0sbnVsbD09ay5jcm9zc0RvbWFpbiYmKGg9a2IuZXhlYyhrLnVybC50b0xvd2VyQ2FzZSgpKSxrLmNyb3NzRG9tYWluPSEoIWh8fGhbMV09PT1wYlsxXSYmaFsyXT09PXBiWzJdJiYoaFszXXx8KFwiaHR0cDpcIj09PWhbMV0/XCI4MFwiOlwiNDQzXCIpKT09PShwYlszXXx8KFwiaHR0cDpcIj09PXBiWzFdP1wiODBcIjpcIjQ0M1wiKSkpKSxrLmRhdGEmJmsucHJvY2Vzc0RhdGEmJlwic3RyaW5nXCIhPXR5cGVvZiBrLmRhdGEmJihrLmRhdGE9bi5wYXJhbShrLmRhdGEsay50cmFkaXRpb25hbCkpLHJiKGxiLGssYix2KSwyPT09dClyZXR1cm4gdjtpPW4uZXZlbnQmJmsuZ2xvYmFsLGkmJjA9PT1uLmFjdGl2ZSsrJiZuLmV2ZW50LnRyaWdnZXIoXCJhamF4U3RhcnRcIiksay50eXBlPWsudHlwZS50b1VwcGVyQ2FzZSgpLGsuaGFzQ29udGVudD0haWIudGVzdChrLnR5cGUpLGQ9ay51cmwsay5oYXNDb250ZW50fHwoay5kYXRhJiYoZD1rLnVybCs9KGRiLnRlc3QoZCk/XCImXCI6XCI/XCIpK2suZGF0YSxkZWxldGUgay5kYXRhKSxrLmNhY2hlPT09ITEmJihrLnVybD1mYi50ZXN0KGQpP2QucmVwbGFjZShmYixcIiQxXz1cIitjYisrKTpkKyhkYi50ZXN0KGQpP1wiJlwiOlwiP1wiKStcIl89XCIrY2IrKykpLGsuaWZNb2RpZmllZCYmKG4ubGFzdE1vZGlmaWVkW2RdJiZ2LnNldFJlcXVlc3RIZWFkZXIoXCJJZi1Nb2RpZmllZC1TaW5jZVwiLG4ubGFzdE1vZGlmaWVkW2RdKSxuLmV0YWdbZF0mJnYuc2V0UmVxdWVzdEhlYWRlcihcIklmLU5vbmUtTWF0Y2hcIixuLmV0YWdbZF0pKSwoay5kYXRhJiZrLmhhc0NvbnRlbnQmJmsuY29udGVudFR5cGUhPT0hMXx8Yi5jb250ZW50VHlwZSkmJnYuc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtVHlwZVwiLGsuY29udGVudFR5cGUpLHYuc2V0UmVxdWVzdEhlYWRlcihcIkFjY2VwdFwiLGsuZGF0YVR5cGVzWzBdJiZrLmFjY2VwdHNbay5kYXRhVHlwZXNbMF1dP2suYWNjZXB0c1trLmRhdGFUeXBlc1swXV0rKFwiKlwiIT09ay5kYXRhVHlwZXNbMF0/XCIsIFwiK25iK1wiOyBxPTAuMDFcIjpcIlwiKTprLmFjY2VwdHNbXCIqXCJdKTtmb3IoaiBpbiBrLmhlYWRlcnMpdi5zZXRSZXF1ZXN0SGVhZGVyKGosay5oZWFkZXJzW2pdKTtpZihrLmJlZm9yZVNlbmQmJihrLmJlZm9yZVNlbmQuY2FsbChsLHYsayk9PT0hMXx8Mj09PXQpKXJldHVybiB2LmFib3J0KCk7dT1cImFib3J0XCI7Zm9yKGogaW57c3VjY2VzczoxLGVycm9yOjEsY29tcGxldGU6MX0pdltqXShrW2pdKTtpZihjPXJiKG1iLGssYix2KSl7di5yZWFkeVN0YXRlPTEsaSYmbS50cmlnZ2VyKFwiYWpheFNlbmRcIixbdixrXSksay5hc3luYyYmay50aW1lb3V0PjAmJihnPXNldFRpbWVvdXQoZnVuY3Rpb24oKXt2LmFib3J0KFwidGltZW91dFwiKX0say50aW1lb3V0KSk7dHJ5e3Q9MSxjLnNlbmQocix4KX1jYXRjaCh3KXtpZighKDI+dCkpdGhyb3cgdzt4KC0xLHcpfX1lbHNlIHgoLTEsXCJObyBUcmFuc3BvcnRcIik7ZnVuY3Rpb24geChhLGIsZixoKXt2YXIgaixyLHMsdSx3LHg9YjsyIT09dCYmKHQ9MixnJiZjbGVhclRpbWVvdXQoZyksYz12b2lkIDAsZT1ofHxcIlwiLHYucmVhZHlTdGF0ZT1hPjA/NDowLGo9YT49MjAwJiYzMDA+YXx8MzA0PT09YSxmJiYodT10YihrLHYsZikpLHU9dWIoayx1LHYsaiksaj8oay5pZk1vZGlmaWVkJiYodz12LmdldFJlc3BvbnNlSGVhZGVyKFwiTGFzdC1Nb2RpZmllZFwiKSx3JiYobi5sYXN0TW9kaWZpZWRbZF09dyksdz12LmdldFJlc3BvbnNlSGVhZGVyKFwiZXRhZ1wiKSx3JiYobi5ldGFnW2RdPXcpKSwyMDQ9PT1hfHxcIkhFQURcIj09PWsudHlwZT94PVwibm9jb250ZW50XCI6MzA0PT09YT94PVwibm90bW9kaWZpZWRcIjooeD11LnN0YXRlLHI9dS5kYXRhLHM9dS5lcnJvcixqPSFzKSk6KHM9eCwoYXx8IXgpJiYoeD1cImVycm9yXCIsMD5hJiYoYT0wKSkpLHYuc3RhdHVzPWEsdi5zdGF0dXNUZXh0PShifHx4KStcIlwiLGo/by5yZXNvbHZlV2l0aChsLFtyLHgsdl0pOm8ucmVqZWN0V2l0aChsLFt2LHgsc10pLHYuc3RhdHVzQ29kZShxKSxxPXZvaWQgMCxpJiZtLnRyaWdnZXIoaj9cImFqYXhTdWNjZXNzXCI6XCJhamF4RXJyb3JcIixbdixrLGo/cjpzXSkscC5maXJlV2l0aChsLFt2LHhdKSxpJiYobS50cmlnZ2VyKFwiYWpheENvbXBsZXRlXCIsW3Ysa10pLC0tbi5hY3RpdmV8fG4uZXZlbnQudHJpZ2dlcihcImFqYXhTdG9wXCIpKSl9cmV0dXJuIHZ9LGdldEpTT046ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBuLmdldChhLGIsYyxcImpzb25cIil9LGdldFNjcmlwdDpmdW5jdGlvbihhLGIpe3JldHVybiBuLmdldChhLHZvaWQgMCxiLFwic2NyaXB0XCIpfX0pLG4uZWFjaChbXCJnZXRcIixcInBvc3RcIl0sZnVuY3Rpb24oYSxiKXtuW2JdPWZ1bmN0aW9uKGEsYyxkLGUpe3JldHVybiBuLmlzRnVuY3Rpb24oYykmJihlPWV8fGQsZD1jLGM9dm9pZCAwKSxuLmFqYXgoe3VybDphLHR5cGU6YixkYXRhVHlwZTplLGRhdGE6YyxzdWNjZXNzOmR9KX19KSxuLl9ldmFsVXJsPWZ1bmN0aW9uKGEpe3JldHVybiBuLmFqYXgoe3VybDphLHR5cGU6XCJHRVRcIixkYXRhVHlwZTpcInNjcmlwdFwiLGFzeW5jOiExLGdsb2JhbDohMSxcInRocm93c1wiOiEwfSl9LG4uZm4uZXh0ZW5kKHt3cmFwQWxsOmZ1bmN0aW9uKGEpe3ZhciBiO3JldHVybiBuLmlzRnVuY3Rpb24oYSk/dGhpcy5lYWNoKGZ1bmN0aW9uKGIpe24odGhpcykud3JhcEFsbChhLmNhbGwodGhpcyxiKSl9KToodGhpc1swXSYmKGI9bihhLHRoaXNbMF0ub3duZXJEb2N1bWVudCkuZXEoMCkuY2xvbmUoITApLHRoaXNbMF0ucGFyZW50Tm9kZSYmYi5pbnNlcnRCZWZvcmUodGhpc1swXSksYi5tYXAoZnVuY3Rpb24oKXt2YXIgYT10aGlzO3doaWxlKGEuZmlyc3RFbGVtZW50Q2hpbGQpYT1hLmZpcnN0RWxlbWVudENoaWxkO3JldHVybiBhfSkuYXBwZW5kKHRoaXMpKSx0aGlzKX0sd3JhcElubmVyOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmVhY2gobi5pc0Z1bmN0aW9uKGEpP2Z1bmN0aW9uKGIpe24odGhpcykud3JhcElubmVyKGEuY2FsbCh0aGlzLGIpKX06ZnVuY3Rpb24oKXt2YXIgYj1uKHRoaXMpLGM9Yi5jb250ZW50cygpO2MubGVuZ3RoP2Mud3JhcEFsbChhKTpiLmFwcGVuZChhKX0pfSx3cmFwOmZ1bmN0aW9uKGEpe3ZhciBiPW4uaXNGdW5jdGlvbihhKTtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGMpe24odGhpcykud3JhcEFsbChiP2EuY2FsbCh0aGlzLGMpOmEpfSl9LHVud3JhcDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnBhcmVudCgpLmVhY2goZnVuY3Rpb24oKXtuLm5vZGVOYW1lKHRoaXMsXCJib2R5XCIpfHxuKHRoaXMpLnJlcGxhY2VXaXRoKHRoaXMuY2hpbGROb2Rlcyl9KS5lbmQoKX19KSxuLmV4cHIuZmlsdGVycy5oaWRkZW49ZnVuY3Rpb24oYSl7cmV0dXJuIGEub2Zmc2V0V2lkdGg8PTAmJmEub2Zmc2V0SGVpZ2h0PD0wfSxuLmV4cHIuZmlsdGVycy52aXNpYmxlPWZ1bmN0aW9uKGEpe3JldHVybiFuLmV4cHIuZmlsdGVycy5oaWRkZW4oYSl9O3ZhciB2Yj0vJTIwL2csd2I9L1xcW1xcXSQvLHhiPS9cXHI/XFxuL2cseWI9L14oPzpzdWJtaXR8YnV0dG9ufGltYWdlfHJlc2V0fGZpbGUpJC9pLHpiPS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGtleWdlbikvaTtmdW5jdGlvbiBBYihhLGIsYyxkKXt2YXIgZTtpZihuLmlzQXJyYXkoYikpbi5lYWNoKGIsZnVuY3Rpb24oYixlKXtjfHx3Yi50ZXN0KGEpP2QoYSxlKTpBYihhK1wiW1wiKyhcIm9iamVjdFwiPT10eXBlb2YgZT9iOlwiXCIpK1wiXVwiLGUsYyxkKX0pO2Vsc2UgaWYoY3x8XCJvYmplY3RcIiE9PW4udHlwZShiKSlkKGEsYik7ZWxzZSBmb3IoZSBpbiBiKUFiKGErXCJbXCIrZStcIl1cIixiW2VdLGMsZCl9bi5wYXJhbT1mdW5jdGlvbihhLGIpe3ZhciBjLGQ9W10sZT1mdW5jdGlvbihhLGIpe2I9bi5pc0Z1bmN0aW9uKGIpP2IoKTpudWxsPT1iP1wiXCI6YixkW2QubGVuZ3RoXT1lbmNvZGVVUklDb21wb25lbnQoYSkrXCI9XCIrZW5jb2RlVVJJQ29tcG9uZW50KGIpfTtpZih2b2lkIDA9PT1iJiYoYj1uLmFqYXhTZXR0aW5ncyYmbi5hamF4U2V0dGluZ3MudHJhZGl0aW9uYWwpLG4uaXNBcnJheShhKXx8YS5qcXVlcnkmJiFuLmlzUGxhaW5PYmplY3QoYSkpbi5lYWNoKGEsZnVuY3Rpb24oKXtlKHRoaXMubmFtZSx0aGlzLnZhbHVlKX0pO2Vsc2UgZm9yKGMgaW4gYSlBYihjLGFbY10sYixlKTtyZXR1cm4gZC5qb2luKFwiJlwiKS5yZXBsYWNlKHZiLFwiK1wiKX0sbi5mbi5leHRlbmQoe3NlcmlhbGl6ZTpmdW5jdGlvbigpe3JldHVybiBuLnBhcmFtKHRoaXMuc2VyaWFsaXplQXJyYXkoKSl9LHNlcmlhbGl6ZUFycmF5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKCl7dmFyIGE9bi5wcm9wKHRoaXMsXCJlbGVtZW50c1wiKTtyZXR1cm4gYT9uLm1ha2VBcnJheShhKTp0aGlzfSkuZmlsdGVyKGZ1bmN0aW9uKCl7dmFyIGE9dGhpcy50eXBlO3JldHVybiB0aGlzLm5hbWUmJiFuKHRoaXMpLmlzKFwiOmRpc2FibGVkXCIpJiZ6Yi50ZXN0KHRoaXMubm9kZU5hbWUpJiYheWIudGVzdChhKSYmKHRoaXMuY2hlY2tlZHx8IVQudGVzdChhKSl9KS5tYXAoZnVuY3Rpb24oYSxiKXt2YXIgYz1uKHRoaXMpLnZhbCgpO3JldHVybiBudWxsPT1jP251bGw6bi5pc0FycmF5KGMpP24ubWFwKGMsZnVuY3Rpb24oYSl7cmV0dXJue25hbWU6Yi5uYW1lLHZhbHVlOmEucmVwbGFjZSh4YixcIlxcclxcblwiKX19KTp7bmFtZTpiLm5hbWUsdmFsdWU6Yy5yZXBsYWNlKHhiLFwiXFxyXFxuXCIpfX0pLmdldCgpfX0pLG4uYWpheFNldHRpbmdzLnhocj1mdW5jdGlvbigpe3RyeXtyZXR1cm4gbmV3IFhNTEh0dHBSZXF1ZXN0fWNhdGNoKGEpe319O3ZhciBCYj0wLENiPXt9LERiPXswOjIwMCwxMjIzOjIwNH0sRWI9bi5hamF4U2V0dGluZ3MueGhyKCk7YS5hdHRhY2hFdmVudCYmYS5hdHRhY2hFdmVudChcIm9udW5sb2FkXCIsZnVuY3Rpb24oKXtmb3IodmFyIGEgaW4gQ2IpQ2JbYV0oKX0pLGsuY29ycz0hIUViJiZcIndpdGhDcmVkZW50aWFsc1wiaW4gRWIsay5hamF4PUViPSEhRWIsbi5hamF4VHJhbnNwb3J0KGZ1bmN0aW9uKGEpe3ZhciBiO3JldHVybiBrLmNvcnN8fEViJiYhYS5jcm9zc0RvbWFpbj97c2VuZDpmdW5jdGlvbihjLGQpe3ZhciBlLGY9YS54aHIoKSxnPSsrQmI7aWYoZi5vcGVuKGEudHlwZSxhLnVybCxhLmFzeW5jLGEudXNlcm5hbWUsYS5wYXNzd29yZCksYS54aHJGaWVsZHMpZm9yKGUgaW4gYS54aHJGaWVsZHMpZltlXT1hLnhockZpZWxkc1tlXTthLm1pbWVUeXBlJiZmLm92ZXJyaWRlTWltZVR5cGUmJmYub3ZlcnJpZGVNaW1lVHlwZShhLm1pbWVUeXBlKSxhLmNyb3NzRG9tYWlufHxjW1wiWC1SZXF1ZXN0ZWQtV2l0aFwiXXx8KGNbXCJYLVJlcXVlc3RlZC1XaXRoXCJdPVwiWE1MSHR0cFJlcXVlc3RcIik7Zm9yKGUgaW4gYylmLnNldFJlcXVlc3RIZWFkZXIoZSxjW2VdKTtiPWZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbigpe2ImJihkZWxldGUgQ2JbZ10sYj1mLm9ubG9hZD1mLm9uZXJyb3I9bnVsbCxcImFib3J0XCI9PT1hP2YuYWJvcnQoKTpcImVycm9yXCI9PT1hP2QoZi5zdGF0dXMsZi5zdGF0dXNUZXh0KTpkKERiW2Yuc3RhdHVzXXx8Zi5zdGF0dXMsZi5zdGF0dXNUZXh0LFwic3RyaW5nXCI9PXR5cGVvZiBmLnJlc3BvbnNlVGV4dD97dGV4dDpmLnJlc3BvbnNlVGV4dH06dm9pZCAwLGYuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCkpKX19LGYub25sb2FkPWIoKSxmLm9uZXJyb3I9YihcImVycm9yXCIpLGI9Q2JbZ109YihcImFib3J0XCIpO3RyeXtmLnNlbmQoYS5oYXNDb250ZW50JiZhLmRhdGF8fG51bGwpfWNhdGNoKGgpe2lmKGIpdGhyb3cgaH19LGFib3J0OmZ1bmN0aW9uKCl7YiYmYigpfX06dm9pZCAwfSksbi5hamF4U2V0dXAoe2FjY2VwdHM6e3NjcmlwdDpcInRleHQvamF2YXNjcmlwdCwgYXBwbGljYXRpb24vamF2YXNjcmlwdCwgYXBwbGljYXRpb24vZWNtYXNjcmlwdCwgYXBwbGljYXRpb24veC1lY21hc2NyaXB0XCJ9LGNvbnRlbnRzOntzY3JpcHQ6Lyg/OmphdmF8ZWNtYSlzY3JpcHQvfSxjb252ZXJ0ZXJzOntcInRleHQgc2NyaXB0XCI6ZnVuY3Rpb24oYSl7cmV0dXJuIG4uZ2xvYmFsRXZhbChhKSxhfX19KSxuLmFqYXhQcmVmaWx0ZXIoXCJzY3JpcHRcIixmdW5jdGlvbihhKXt2b2lkIDA9PT1hLmNhY2hlJiYoYS5jYWNoZT0hMSksYS5jcm9zc0RvbWFpbiYmKGEudHlwZT1cIkdFVFwiKX0pLG4uYWpheFRyYW5zcG9ydChcInNjcmlwdFwiLGZ1bmN0aW9uKGEpe2lmKGEuY3Jvc3NEb21haW4pe3ZhciBiLGM7cmV0dXJue3NlbmQ6ZnVuY3Rpb24oZCxlKXtiPW4oXCI8c2NyaXB0PlwiKS5wcm9wKHthc3luYzohMCxjaGFyc2V0OmEuc2NyaXB0Q2hhcnNldCxzcmM6YS51cmx9KS5vbihcImxvYWQgZXJyb3JcIixjPWZ1bmN0aW9uKGEpe2IucmVtb3ZlKCksYz1udWxsLGEmJmUoXCJlcnJvclwiPT09YS50eXBlPzQwNDoyMDAsYS50eXBlKX0pLGwuaGVhZC5hcHBlbmRDaGlsZChiWzBdKX0sYWJvcnQ6ZnVuY3Rpb24oKXtjJiZjKCl9fX19KTt2YXIgRmI9W10sR2I9Lyg9KVxcPyg/PSZ8JCl8XFw/XFw/LztuLmFqYXhTZXR1cCh7anNvbnA6XCJjYWxsYmFja1wiLGpzb25wQ2FsbGJhY2s6ZnVuY3Rpb24oKXt2YXIgYT1GYi5wb3AoKXx8bi5leHBhbmRvK1wiX1wiK2NiKys7cmV0dXJuIHRoaXNbYV09ITAsYX19KSxuLmFqYXhQcmVmaWx0ZXIoXCJqc29uIGpzb25wXCIsZnVuY3Rpb24oYixjLGQpe3ZhciBlLGYsZyxoPWIuanNvbnAhPT0hMSYmKEdiLnRlc3QoYi51cmwpP1widXJsXCI6XCJzdHJpbmdcIj09dHlwZW9mIGIuZGF0YSYmIShiLmNvbnRlbnRUeXBlfHxcIlwiKS5pbmRleE9mKFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCIpJiZHYi50ZXN0KGIuZGF0YSkmJlwiZGF0YVwiKTtyZXR1cm4gaHx8XCJqc29ucFwiPT09Yi5kYXRhVHlwZXNbMF0/KGU9Yi5qc29ucENhbGxiYWNrPW4uaXNGdW5jdGlvbihiLmpzb25wQ2FsbGJhY2spP2IuanNvbnBDYWxsYmFjaygpOmIuanNvbnBDYWxsYmFjayxoP2JbaF09YltoXS5yZXBsYWNlKEdiLFwiJDFcIitlKTpiLmpzb25wIT09ITEmJihiLnVybCs9KGRiLnRlc3QoYi51cmwpP1wiJlwiOlwiP1wiKStiLmpzb25wK1wiPVwiK2UpLGIuY29udmVydGVyc1tcInNjcmlwdCBqc29uXCJdPWZ1bmN0aW9uKCl7cmV0dXJuIGd8fG4uZXJyb3IoZStcIiB3YXMgbm90IGNhbGxlZFwiKSxnWzBdfSxiLmRhdGFUeXBlc1swXT1cImpzb25cIixmPWFbZV0sYVtlXT1mdW5jdGlvbigpe2c9YXJndW1lbnRzfSxkLmFsd2F5cyhmdW5jdGlvbigpe2FbZV09ZixiW2VdJiYoYi5qc29ucENhbGxiYWNrPWMuanNvbnBDYWxsYmFjayxGYi5wdXNoKGUpKSxnJiZuLmlzRnVuY3Rpb24oZikmJmYoZ1swXSksZz1mPXZvaWQgMH0pLFwic2NyaXB0XCIpOnZvaWQgMH0pLG4ucGFyc2VIVE1MPWZ1bmN0aW9uKGEsYixjKXtpZighYXx8XCJzdHJpbmdcIiE9dHlwZW9mIGEpcmV0dXJuIG51bGw7XCJib29sZWFuXCI9PXR5cGVvZiBiJiYoYz1iLGI9ITEpLGI9Ynx8bDt2YXIgZD12LmV4ZWMoYSksZT0hYyYmW107cmV0dXJuIGQ/W2IuY3JlYXRlRWxlbWVudChkWzFdKV06KGQ9bi5idWlsZEZyYWdtZW50KFthXSxiLGUpLGUmJmUubGVuZ3RoJiZuKGUpLnJlbW92ZSgpLG4ubWVyZ2UoW10sZC5jaGlsZE5vZGVzKSl9O3ZhciBIYj1uLmZuLmxvYWQ7bi5mbi5sb2FkPWZ1bmN0aW9uKGEsYixjKXtpZihcInN0cmluZ1wiIT10eXBlb2YgYSYmSGIpcmV0dXJuIEhiLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgZCxlLGYsZz10aGlzLGg9YS5pbmRleE9mKFwiIFwiKTtyZXR1cm4gaD49MCYmKGQ9bi50cmltKGEuc2xpY2UoaCkpLGE9YS5zbGljZSgwLGgpKSxuLmlzRnVuY3Rpb24oYik/KGM9YixiPXZvaWQgMCk6YiYmXCJvYmplY3RcIj09dHlwZW9mIGImJihlPVwiUE9TVFwiKSxnLmxlbmd0aD4wJiZuLmFqYXgoe3VybDphLHR5cGU6ZSxkYXRhVHlwZTpcImh0bWxcIixkYXRhOmJ9KS5kb25lKGZ1bmN0aW9uKGEpe2Y9YXJndW1lbnRzLGcuaHRtbChkP24oXCI8ZGl2PlwiKS5hcHBlbmQobi5wYXJzZUhUTUwoYSkpLmZpbmQoZCk6YSl9KS5jb21wbGV0ZShjJiZmdW5jdGlvbihhLGIpe2cuZWFjaChjLGZ8fFthLnJlc3BvbnNlVGV4dCxiLGFdKX0pLHRoaXN9LG4uZWFjaChbXCJhamF4U3RhcnRcIixcImFqYXhTdG9wXCIsXCJhamF4Q29tcGxldGVcIixcImFqYXhFcnJvclwiLFwiYWpheFN1Y2Nlc3NcIixcImFqYXhTZW5kXCJdLGZ1bmN0aW9uKGEsYil7bi5mbltiXT1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5vbihiLGEpfX0pLG4uZXhwci5maWx0ZXJzLmFuaW1hdGVkPWZ1bmN0aW9uKGEpe3JldHVybiBuLmdyZXAobi50aW1lcnMsZnVuY3Rpb24oYil7cmV0dXJuIGE9PT1iLmVsZW19KS5sZW5ndGh9O3ZhciBJYj1hLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtmdW5jdGlvbiBKYihhKXtyZXR1cm4gbi5pc1dpbmRvdyhhKT9hOjk9PT1hLm5vZGVUeXBlJiZhLmRlZmF1bHRWaWV3fW4ub2Zmc2V0PXtzZXRPZmZzZXQ6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZixnLGgsaSxqLGs9bi5jc3MoYSxcInBvc2l0aW9uXCIpLGw9bihhKSxtPXt9O1wic3RhdGljXCI9PT1rJiYoYS5zdHlsZS5wb3NpdGlvbj1cInJlbGF0aXZlXCIpLGg9bC5vZmZzZXQoKSxmPW4uY3NzKGEsXCJ0b3BcIiksaT1uLmNzcyhhLFwibGVmdFwiKSxqPShcImFic29sdXRlXCI9PT1rfHxcImZpeGVkXCI9PT1rKSYmKGYraSkuaW5kZXhPZihcImF1dG9cIik+LTEsaj8oZD1sLnBvc2l0aW9uKCksZz1kLnRvcCxlPWQubGVmdCk6KGc9cGFyc2VGbG9hdChmKXx8MCxlPXBhcnNlRmxvYXQoaSl8fDApLG4uaXNGdW5jdGlvbihiKSYmKGI9Yi5jYWxsKGEsYyxoKSksbnVsbCE9Yi50b3AmJihtLnRvcD1iLnRvcC1oLnRvcCtnKSxudWxsIT1iLmxlZnQmJihtLmxlZnQ9Yi5sZWZ0LWgubGVmdCtlKSxcInVzaW5nXCJpbiBiP2IudXNpbmcuY2FsbChhLG0pOmwuY3NzKG0pfX0sbi5mbi5leHRlbmQoe29mZnNldDpmdW5jdGlvbihhKXtpZihhcmd1bWVudHMubGVuZ3RoKXJldHVybiB2b2lkIDA9PT1hP3RoaXM6dGhpcy5lYWNoKGZ1bmN0aW9uKGIpe24ub2Zmc2V0LnNldE9mZnNldCh0aGlzLGEsYil9KTt2YXIgYixjLGQ9dGhpc1swXSxlPXt0b3A6MCxsZWZ0OjB9LGY9ZCYmZC5vd25lckRvY3VtZW50O2lmKGYpcmV0dXJuIGI9Zi5kb2N1bWVudEVsZW1lbnQsbi5jb250YWlucyhiLGQpPyh0eXBlb2YgZC5nZXRCb3VuZGluZ0NsaWVudFJlY3QhPT1VJiYoZT1kLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpKSxjPUpiKGYpLHt0b3A6ZS50b3ArYy5wYWdlWU9mZnNldC1iLmNsaWVudFRvcCxsZWZ0OmUubGVmdCtjLnBhZ2VYT2Zmc2V0LWIuY2xpZW50TGVmdH0pOmV9LHBvc2l0aW9uOmZ1bmN0aW9uKCl7aWYodGhpc1swXSl7dmFyIGEsYixjPXRoaXNbMF0sZD17dG9wOjAsbGVmdDowfTtyZXR1cm5cImZpeGVkXCI9PT1uLmNzcyhjLFwicG9zaXRpb25cIik/Yj1jLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOihhPXRoaXMub2Zmc2V0UGFyZW50KCksYj10aGlzLm9mZnNldCgpLG4ubm9kZU5hbWUoYVswXSxcImh0bWxcIil8fChkPWEub2Zmc2V0KCkpLGQudG9wKz1uLmNzcyhhWzBdLFwiYm9yZGVyVG9wV2lkdGhcIiwhMCksZC5sZWZ0Kz1uLmNzcyhhWzBdLFwiYm9yZGVyTGVmdFdpZHRoXCIsITApKSx7dG9wOmIudG9wLWQudG9wLW4uY3NzKGMsXCJtYXJnaW5Ub3BcIiwhMCksbGVmdDpiLmxlZnQtZC5sZWZ0LW4uY3NzKGMsXCJtYXJnaW5MZWZ0XCIsITApfX19LG9mZnNldFBhcmVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1hcChmdW5jdGlvbigpe3ZhciBhPXRoaXMub2Zmc2V0UGFyZW50fHxJYjt3aGlsZShhJiYhbi5ub2RlTmFtZShhLFwiaHRtbFwiKSYmXCJzdGF0aWNcIj09PW4uY3NzKGEsXCJwb3NpdGlvblwiKSlhPWEub2Zmc2V0UGFyZW50O3JldHVybiBhfHxJYn0pfX0pLG4uZWFjaCh7c2Nyb2xsTGVmdDpcInBhZ2VYT2Zmc2V0XCIsc2Nyb2xsVG9wOlwicGFnZVlPZmZzZXRcIn0sZnVuY3Rpb24oYixjKXt2YXIgZD1cInBhZ2VZT2Zmc2V0XCI9PT1jO24uZm5bYl09ZnVuY3Rpb24oZSl7cmV0dXJuIEoodGhpcyxmdW5jdGlvbihiLGUsZil7dmFyIGc9SmIoYik7cmV0dXJuIHZvaWQgMD09PWY/Zz9nW2NdOmJbZV06dm9pZChnP2cuc2Nyb2xsVG8oZD9hLnBhZ2VYT2Zmc2V0OmYsZD9mOmEucGFnZVlPZmZzZXQpOmJbZV09Zil9LGIsZSxhcmd1bWVudHMubGVuZ3RoLG51bGwpfX0pLG4uZWFjaChbXCJ0b3BcIixcImxlZnRcIl0sZnVuY3Rpb24oYSxiKXtuLmNzc0hvb2tzW2JdPXlhKGsucGl4ZWxQb3NpdGlvbixmdW5jdGlvbihhLGMpe3JldHVybiBjPyhjPXhhKGEsYiksdmEudGVzdChjKT9uKGEpLnBvc2l0aW9uKClbYl0rXCJweFwiOmMpOnZvaWQgMH0pfSksbi5lYWNoKHtIZWlnaHQ6XCJoZWlnaHRcIixXaWR0aDpcIndpZHRoXCJ9LGZ1bmN0aW9uKGEsYil7bi5lYWNoKHtwYWRkaW5nOlwiaW5uZXJcIithLGNvbnRlbnQ6YixcIlwiOlwib3V0ZXJcIithfSxmdW5jdGlvbihjLGQpe24uZm5bZF09ZnVuY3Rpb24oZCxlKXt2YXIgZj1hcmd1bWVudHMubGVuZ3RoJiYoY3x8XCJib29sZWFuXCIhPXR5cGVvZiBkKSxnPWN8fChkPT09ITB8fGU9PT0hMD9cIm1hcmdpblwiOlwiYm9yZGVyXCIpO3JldHVybiBKKHRoaXMsZnVuY3Rpb24oYixjLGQpe3ZhciBlO3JldHVybiBuLmlzV2luZG93KGIpP2IuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50W1wiY2xpZW50XCIrYV06OT09PWIubm9kZVR5cGU/KGU9Yi5kb2N1bWVudEVsZW1lbnQsTWF0aC5tYXgoYi5ib2R5W1wic2Nyb2xsXCIrYV0sZVtcInNjcm9sbFwiK2FdLGIuYm9keVtcIm9mZnNldFwiK2FdLGVbXCJvZmZzZXRcIithXSxlW1wiY2xpZW50XCIrYV0pKTp2b2lkIDA9PT1kP24uY3NzKGIsYyxnKTpuLnN0eWxlKGIsYyxkLGcpfSxiLGY/ZDp2b2lkIDAsZixudWxsKX19KX0pLG4uZm4uc2l6ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmxlbmd0aH0sbi5mbi5hbmRTZWxmPW4uZm4uYWRkQmFjayxcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQmJmRlZmluZShcImpxdWVyeVwiLFtdLGZ1bmN0aW9uKCl7cmV0dXJuIG59KTt2YXIgS2I9YS5qUXVlcnksTGI9YS4kO3JldHVybiBuLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oYil7cmV0dXJuIGEuJD09PW4mJihhLiQ9TGIpLGImJmEualF1ZXJ5PT09biYmKGEualF1ZXJ5PUtiKSxufSx0eXBlb2YgYj09PVUmJihhLmpRdWVyeT1hLiQ9biksbn0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9anF1ZXJ5Lm1pbi5tYXAiLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cblxuLy8gUGx1Z2luIGNvbW11bmljYXRpb25zIGxheWVyLiBUd28gdHlwZXMgb2YgY29tbXVuaWNhdGlvbiBhcmUgc3VwcG9ydGVkOlxuLy8gMS4gTWVzc2FnZXMgLSB3aGVuIGVtaXR0ZWQsIGFueSBsb2NhbCBoYW5kbGVycyBhcmUgbm90aWZpZWQsIGFuZCBpdCBpcyBhbHNvIHNlbnQgYWNyb3NzIHRvIHdlYiBzb2NrZXRzIGNvbm5lY3Rpb25cbi8vICAgIHdoZXJlIGFueSByZW1vdGUgaGFuZGxlcnMgYXJlIG5vdGlmaWVkLiBUaGVyZSBjYW4gYmUgYW55IG51bWJlciBvZiBsb2NhbCBhbmQvb3IgcmVtb3RlIGhhbmRsZXJzLiBUaGVyZSBpcyBub1xuLy8gICAgb3Bwb3J0dW5pdHkgdG8gcmVzcG9uZC5cbi8vIDIuIE1ldGhvZHMgLSBjYWxscyBhY3Jvc3MgdGhlIHdlYiBzb2NrZXQgY29ubmVjdGlvbiB3aGVyZSB0aGVyZSBjYW4gYmUgYSBzaW5nbGUgaGFuZGxlciB0aGF0IGNhbiByZXR1cm4gYSBzaW5nbGVcbi8vICAgIHZhbHVlIG9yIGVycm9yIHZhbHVlLlxuXG5mdW5jdGlvbiBNZXNzYWdlcyhwbHVnaW5JZCwgc29ja2V0KSB7XG4gICAgdGhpcy5wbHVnaW5JZCA9IHBsdWdpbklkO1xuICAgIHRoaXMuc29ja2V0ID0gc29ja2V0O1xuICAgIHRoaXMubWVzc2FnZXMgPSB7fTtcbiAgICB0aGlzLm1ldGhvZHMgPSB7fTtcblxuICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICBzb2NrZXQub24oJ3BsdWdpbi1tZXNzYWdlJywgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgaWYgKGRhdGEucGx1Z2luSWQgPT09IHBsdWdpbklkKSB7XG4gICAgICAgICAgICBub3RpZnkuY2FsbCh0aGF0LCB0aGF0Lm1lc3NhZ2VzLCBkYXRhLm1lc3NhZ2UsIGRhdGEuZGF0YSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBzb2NrZXQub24oJ3BsdWdpbi1tZXRob2QnLCBmdW5jdGlvbiAoZGF0YSwgY2FsbGJhY2spIHtcbiAgICAgICAgaWYgKGRhdGEucGx1Z2luSWQgPT09IHBsdWdpbklkKSB7XG4gICAgICAgICAgICB2YXIgaGFuZGxlciA9IHRoYXQubWV0aG9kcyAmJiB0aGF0Lm1ldGhvZHNbZGF0YS5tZXRob2RdO1xuICAgICAgICAgICAgaWYgKGhhbmRsZXIpIHtcbiAgICAgICAgICAgICAgICB2YXIgYXJncyA9IGRhdGEuYXJncztcbiAgICAgICAgICAgICAgICBhcmdzLnB1c2goY2FsbGJhY2spO1xuICAgICAgICAgICAgICAgIGhhbmRsZXIuYXBwbHkodGhpcywgYXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuTWVzc2FnZXMuX2dsb2JhbE1lc3NhZ2VzID0ge307XG5cbmZ1bmN0aW9uIG5vdGlmeShtZXNzYWdlc09iaiwgbWVzc2FnZSwgZGF0YSkge1xuICAgIC8vIE5vdGlmaWVzIGxvY2FsIGxpc3RlbmVycyBvZiBhIG1lc3NhZ2VcbiAgICB2YXIgaGFuZGxlcnMgPSBtZXNzYWdlc09iaiAmJiBtZXNzYWdlc09ialttZXNzYWdlXTtcbiAgICBpZiAoaGFuZGxlcnMpIHtcbiAgICAgICAgaGFuZGxlcnMuZm9yRWFjaChmdW5jdGlvbiAoaGFuZGxlcikge1xuICAgICAgICAgICAgaGFuZGxlci5jYWxsKHRoaXMsIG1lc3NhZ2UsIGRhdGEpO1xuICAgICAgICB9KTtcbiAgICB9XG59XG5cbk1lc3NhZ2VzLnByb3RvdHlwZSA9IHtcbiAgICAvLyBDYWxsIGFuZCByZWdpc3RlciBmb3IgbWV0aG9kc1xuXG4gICAgLyoqXG4gICAgICogQGRlc2MgQ2FsbHMgdGhlIHNwZWNpZmllZCBtZXRob2QsIHdpdGggYW55IG51bWJlciBvZiBwYXJhbWV0ZXJzLiBSZXR1cm4gYSBwcm9taXNlLlxuICAgICAqIEBwYXJhbSBtZXRob2RcbiAgICAgKi9cbiAgICBjYWxsOiBmdW5jdGlvbiAobWV0aG9kKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLnNvY2tldC5lbWl0KCdwbHVnaW4tbWV0aG9kJywge1xuICAgICAgICAgICAgICAgIHBsdWdpbklkOiB0aGlzLnBsdWdpbklkLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogbWV0aG9kLFxuICAgICAgICAgICAgICAgIGFyZ3M6IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSlcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnIsIHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgcmVnaXN0ZXI6IGZ1bmN0aW9uKG1ldGhvZCwgaGFuZGxlcikge1xuICAgICAgICAvLyBDYW4gb25seSBldmVyIGhhdmUgb25lIGhhbmRsZXIgZm9yIGEgbWV0aG9kLiBDYW5jZWwgYnkgY2FsbGluZyB3aXRoIGhhbmRsZXIgbnVsbCBvciB1bmRlZmluZWQuXG4gICAgICAgIHRoaXMubWV0aG9kc1ttZXRob2RdID0gaGFuZGxlcjtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8vIEVtaXQgYW5kIGhhbmRsZSBtZXNzYWdlc1xuICAgIGVtaXQ6IGZ1bmN0aW9uIChtZXNzYWdlLCBkYXRhLCBpc0dsb2JhbCkge1xuICAgICAgICAvLyBQYXNzIHRoZSBtZXNzYWdlIGFjcm9zcyB0aGUgc29ja2V0XG4gICAgICAgIHZhciBldmVudE5hbWUsXG4gICAgICAgICAgICBtZXNzYWdlc09iajtcblxuICAgICAgICBpZiAoaXNHbG9iYWwpIHtcbiAgICAgICAgICAgIGV2ZW50TmFtZSA9ICdnbG9iYWwtcGx1Z2luLW1lc3NhZ2UnO1xuICAgICAgICAgICAgbWVzc2FnZXNPYmogPSBNZXNzYWdlcy5fZ2xvYmFsTWVzc2FnZXM7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBldmVudE5hbWUgPSAncGx1Z2luLW1lc3NhZ2UnO1xuICAgICAgICAgICAgbWVzc2FnZXNPYmogPSB0aGlzLm1lc3NhZ2VzO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zb2NrZXQuZW1pdChldmVudE5hbWUsIHtcbiAgICAgICAgICAgIHBsdWdpbklkOiB0aGlzLnBsdWdpbklkLFxuICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZSxcbiAgICAgICAgICAgIGRhdGE6IGRhdGFcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gTm90aWZ5IGFueSBsb2NhbCBsaXN0ZW5lcnNcbiAgICAgICAgbm90aWZ5LmNhbGwodGhpcywgbWVzc2FnZXNPYmosIG1lc3NhZ2UsIGRhdGEpO1xuICAgIH0sXG4gICAgXG4gICAgLy8gRW1pdCBtZXNzYWdlcyBkZXN0aW5lZCB0byBleHRlcm5hbCBkZWJ1Zy1ob3N0c1xuICAgIGVtaXREZWJ1ZzogZnVuY3Rpb24obWVzc2FnZSwgZGF0YSkge1xuICAgICAgICB0aGlzLnNvY2tldC5lbWl0KCdkZWJ1Zy1tZXNzYWdlJywge1xuICAgICAgICAgICAgcGx1Z2luSWQ6IHRoaXMucGx1Z2luSWQsXG4gICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLFxuICAgICAgICAgICAgZGF0YTogZGF0YVxuICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgcmVmcmVzaEFwcEhvc3Q6IGZ1bmN0aW9uIChkZXZpY2UpIHtcbiAgICAgICAgdGhpcy5zb2NrZXQuZW1pdCgncmVmcmVzaC1hcHAtaG9zdCcsIGRldmljZSk7XG4gICAgfSxcblxuICAgIG9uOiBmdW5jdGlvbiAobWVzc2FnZSwgaGFuZGxlciwgaXNHbG9iYWwpIHtcbiAgICAgICAgdmFyIG1lc3NhZ2VzT2JqID0gKCFpc0dsb2JhbCkgPyB0aGlzLm1lc3NhZ2VzIDogTWVzc2FnZXMuX2dsb2JhbE1lc3NhZ2VzO1xuXG4gICAgICAgIGlmICghbWVzc2FnZXNPYmpbbWVzc2FnZV0pIHtcbiAgICAgICAgICAgIG1lc3NhZ2VzT2JqW21lc3NhZ2VdID0gW2hhbmRsZXJdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbWVzc2FnZXNPYmpbbWVzc2FnZV0ucHVzaChoYW5kbGVyKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgb2ZmOiBmdW5jdGlvbiAobWVzc2FnZSwgaGFuZGxlcikge1xuICAgICAgICB2YXIgaGFuZGxlcnMgPSB0aGlzLm1lc3NhZ2VzW21lc3NhZ2VdO1xuICAgICAgICBpZiAoIWhhbmRsZXJzKSB7XG4gICAgICAgICAgICAvLyB0cnkgb24gdGhlIGdsb2JhbCBtZXNzYWdlcyBoYW5kbGVyc1xuICAgICAgICAgICAgaGFuZGxlcnMgPSBNZXNzYWdlcy5fZ2xvYmFsTWVzc2FnZXNbbWVzc2FnZV07XG4gICAgICAgICAgICBpZiAoIWhhbmRsZXJzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgcG9zID0gaGFuZGxlcnMuaW5kZXhPZihoYW5kbGVyKTtcbiAgICAgICAgd2hpbGUgKHBvcyA+IC0xKSB7XG4gICAgICAgICAgICBoYW5kbGVycy5zcGxpY2UocG9zLCAxKTtcbiAgICAgICAgICAgIHBvcyA9IGhhbmRsZXJzLmluZGV4T2YoaGFuZGxlcik7XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IE1lc3NhZ2VzO1xuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cbi8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL09iamVjdC9hc3NpZ25cblxuaWYgKHR5cGVvZiBPYmplY3QuYXNzaWduICE9ICdmdW5jdGlvbicpIHtcbiAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgICBPYmplY3QuYXNzaWduID0gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgICAgICAgJ3VzZSBzdHJpY3QnO1xuICAgICAgICAgICAgaWYgKHRhcmdldCA9PT0gdW5kZWZpbmVkIHx8IHRhcmdldCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCBjb252ZXJ0IHVuZGVmaW5lZCBvciBudWxsIHRvIG9iamVjdCcpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgb3V0cHV0ID0gT2JqZWN0KHRhcmdldCk7XG4gICAgICAgICAgICBmb3IgKHZhciBpbmRleCA9IDE7IGluZGV4IDwgYXJndW1lbnRzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgICAgICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaW5kZXhdO1xuICAgICAgICAgICAgICAgIGlmIChzb3VyY2UgIT09IHVuZGVmaW5lZCAmJiBzb3VyY2UgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbmV4dEtleSBpbiBzb3VyY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBuZXh0S2V5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dFtuZXh0S2V5XSA9IHNvdXJjZVtuZXh0S2V5XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgICAgIH07XG4gICAgfSkoKTtcbn1cbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy8gQmFzZWQgaW4gcGFydCBvbiBjb2RlIGZyb20gQXBhY2hlIFJpcHBsZSwgaHR0cHM6Ly9naXRodWIuY29tL2FwYWNoZS9pbmN1YmF0b3ItcmlwcGxlXG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICAgICdDT01NT04nOiB7XG4gICAgICAgICdQUkVGSVgnOiAndGlueWhpcHBvcy0nLFxuICAgIH0sXG5cbiAgICAnR0VPJzoge1xuICAgICAgICAnT1BUSU9OUyc6IHtcbiAgICAgICAgICAgICdMQVRJVFVERSc6ICdnZW8tbGF0aXR1ZGUnLFxuICAgICAgICAgICAgJ0xPTkdJVFVERSc6ICdnZW8tbG9uZ2l0dWRlJyxcbiAgICAgICAgICAgICdBTFRJVFVERSc6ICdnZW8tYWx0aXR1ZGUnLFxuICAgICAgICAgICAgJ0NFTExfSUQnOiAnZ2VvLWNlbGxpZCcsXG4gICAgICAgICAgICAnQUNDVVJBQ1knOiAnZ2VvLWFjY3VyYWN5JyxcbiAgICAgICAgICAgICdBTFRJVFVERV9BQ0NVUkFDWSc6ICdnZW8tYWx0aXR1ZGUtYWNjdXJhY3knLFxuICAgICAgICAgICAgJ0hFQURJTkcnOiAnZ2VvLWhlYWRpbmcnLFxuICAgICAgICAgICAgJ1NQRUVEJzogJ2dlby1zcGVlZCcsXG4gICAgICAgICAgICAnVElNRV9TVEFNUCc6ICdnZW8tdGltZXN0YW1wJyxcbiAgICAgICAgICAgICdERUxBWSc6ICdnZW8tZGVsYXknLFxuICAgICAgICAgICAgJ0RFTEFZX0xBQkVMJzogJ2dlby1kZWxheS1sYWJlbCcsXG4gICAgICAgICAgICAnSEVBRElOR19MQUJFTCc6ICdnZW8taGVhZGluZy1sYWJlbCcsXG4gICAgICAgICAgICAnSEVBRElOR19NQVBfTEFCRUwnOiAnZ2VvLW1hcC1kaXJlY3Rpb24tbGFiZWwnLFxuICAgICAgICAgICAgJ0lNQUdFJzogJ2dlby1tYXAtaW1nJyxcbiAgICAgICAgICAgICdNQVBfTUFSS0VSJzogJ2dlby1tYXAtbWFya2VyJyxcbiAgICAgICAgICAgICdNQVBfQ09OVEFJTkVSJzogJ2dlby1tYXAtY29udGFpbmVyJyxcbiAgICAgICAgICAgICdUSU1FT1VUJzogJ2dlby10aW1lb3V0JyxcbiAgICAgICAgICAgICdHUFhGSUxFJzogJ2dlby1ncHhmaWxlJyxcbiAgICAgICAgICAgICdHUFhHTyc6ICdnZW8tZ3B4LWdvJyxcbiAgICAgICAgICAgICdHUFhNVUxUSVBMSUVSJzogJ2dlby1ncHhtdWx0aXBsaWVyLXNlbGVjdCcsXG4gICAgICAgICAgICAnR1BYUkVQTEFZU1RBVFVTJzogJ2dlby1ncHhyZXBsYXlzdGF0dXMnXG4gICAgICAgIH0sXG4gICAgICAgICdNQVBfWk9PTV9NQVgnOiAxOCxcbiAgICAgICAgJ01BUF9aT09NX01JTic6IDAsXG4gICAgICAgICdNQVBfWk9PTV9MRVZFTF9DT05UQUlORVInOiAnZ2VvLW1hcC16b29tbGV2ZWwtdmFsdWUnLFxuICAgICAgICAnTUFQX1pPT01fS0VZJzogJ2dlby1tYXAtem9vbS1rZXknLFxuICAgICAgICAnR1BYR09fTEFCRUxTJzoge1xuICAgICAgICAgICAgJ0dPJzogJ0dvJyxcbiAgICAgICAgICAgICdTVE9QJzogJ1N0b3AnXG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgJ0JBVFRFUllfU1RBVFVTJzoge1xuICAgICAgICAnQkFUVEVSWV9TVEFUVVNfS0VZJzogJ2JhdHRlcnktc3RhdHVzLWtleScsXG4gICAgICAgICdJU19QTFVHR0VEX0tFWSc6ICdpcy1wbHVnZ2VkLWtleScsXG4gICAgICAgICdMRVZFTF9MQUJFTCc6ICdiYXR0ZXJ5LWxldmVsLWxhYmVsJyxcbiAgICAgICAgJ0xFVkVMX1ZBTFVFJzogJ2JhdHRlcnktbGV2ZWwnLFxuICAgICAgICAnSVNfUExVR0dFRF9DSEVDS0JPWCc6ICdpcy1wbHVnZ2VkJ1xuICAgIH0sXG59O1xuIiwiLyogQHZlcnNpb24gMS40LjUgKi9cbihmdW5jdGlvbihmKXtpZih0eXBlb2YgZXhwb3J0cz09PVwib2JqZWN0XCImJnR5cGVvZiBtb2R1bGUhPT1cInVuZGVmaW5lZFwiKXttb2R1bGUuZXhwb3J0cz1mKCl9ZWxzZSBpZih0eXBlb2YgZGVmaW5lPT09XCJmdW5jdGlvblwiJiZkZWZpbmUuYW1kKXtkZWZpbmUoW10sZil9ZWxzZXt2YXIgZztpZih0eXBlb2Ygd2luZG93IT09XCJ1bmRlZmluZWRcIil7Zz13aW5kb3d9ZWxzZSBpZih0eXBlb2YgZ2xvYmFsIT09XCJ1bmRlZmluZWRcIil7Zz1nbG9iYWx9ZWxzZSBpZih0eXBlb2Ygc2VsZiE9PVwidW5kZWZpbmVkXCIpe2c9c2VsZn1lbHNle2c9dGhpc31nLmlvPWYoKX19KShmdW5jdGlvbigpe3ZhciBkZWZpbmUsbW9kdWxlLGV4cG9ydHM7cmV0dXJuIGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSh7MTpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHM9X2RlcmVxXyhcIi4vbGliL1wiKX0se1wiLi9saWIvXCI6Mn1dLDI6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe21vZHVsZS5leHBvcnRzPV9kZXJlcV8oXCIuL3NvY2tldFwiKTttb2R1bGUuZXhwb3J0cy5wYXJzZXI9X2RlcmVxXyhcImVuZ2luZS5pby1wYXJzZXJcIil9LHtcIi4vc29ja2V0XCI6MyxcImVuZ2luZS5pby1wYXJzZXJcIjoxOX1dLDM6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpeyhmdW5jdGlvbihnbG9iYWwpe3ZhciB0cmFuc3BvcnRzPV9kZXJlcV8oXCIuL3RyYW5zcG9ydHNcIik7dmFyIEVtaXR0ZXI9X2RlcmVxXyhcImNvbXBvbmVudC1lbWl0dGVyXCIpO3ZhciBkZWJ1Zz1fZGVyZXFfKFwiZGVidWdcIikoXCJlbmdpbmUuaW8tY2xpZW50OnNvY2tldFwiKTt2YXIgaW5kZXg9X2RlcmVxXyhcImluZGV4b2ZcIik7dmFyIHBhcnNlcj1fZGVyZXFfKFwiZW5naW5lLmlvLXBhcnNlclwiKTt2YXIgcGFyc2V1cmk9X2RlcmVxXyhcInBhcnNldXJpXCIpO3ZhciBwYXJzZWpzb249X2RlcmVxXyhcInBhcnNlanNvblwiKTt2YXIgcGFyc2Vxcz1fZGVyZXFfKFwicGFyc2Vxc1wiKTttb2R1bGUuZXhwb3J0cz1Tb2NrZXQ7ZnVuY3Rpb24gbm9vcCgpe31mdW5jdGlvbiBTb2NrZXQodXJpLG9wdHMpe2lmKCEodGhpcyBpbnN0YW5jZW9mIFNvY2tldCkpcmV0dXJuIG5ldyBTb2NrZXQodXJpLG9wdHMpO29wdHM9b3B0c3x8e307aWYodXJpJiZcIm9iamVjdFwiPT10eXBlb2YgdXJpKXtvcHRzPXVyaTt1cmk9bnVsbH1pZih1cmkpe3VyaT1wYXJzZXVyaSh1cmkpO29wdHMuaG9zdG5hbWU9dXJpLmhvc3Q7b3B0cy5zZWN1cmU9dXJpLnByb3RvY29sPT1cImh0dHBzXCJ8fHVyaS5wcm90b2NvbD09XCJ3c3NcIjtvcHRzLnBvcnQ9dXJpLnBvcnQ7aWYodXJpLnF1ZXJ5KW9wdHMucXVlcnk9dXJpLnF1ZXJ5fWVsc2UgaWYob3B0cy5ob3N0KXtvcHRzLmhvc3RuYW1lPXBhcnNldXJpKG9wdHMuaG9zdCkuaG9zdH10aGlzLnNlY3VyZT1udWxsIT1vcHRzLnNlY3VyZT9vcHRzLnNlY3VyZTpnbG9iYWwubG9jYXRpb24mJlwiaHR0cHM6XCI9PWxvY2F0aW9uLnByb3RvY29sO2lmKG9wdHMuaG9zdG5hbWUmJiFvcHRzLnBvcnQpe29wdHMucG9ydD10aGlzLnNlY3VyZT9cIjQ0M1wiOlwiODBcIn10aGlzLmFnZW50PW9wdHMuYWdlbnR8fGZhbHNlO3RoaXMuaG9zdG5hbWU9b3B0cy5ob3N0bmFtZXx8KGdsb2JhbC5sb2NhdGlvbj9sb2NhdGlvbi5ob3N0bmFtZTpcImxvY2FsaG9zdFwiKTt0aGlzLnBvcnQ9b3B0cy5wb3J0fHwoZ2xvYmFsLmxvY2F0aW9uJiZsb2NhdGlvbi5wb3J0P2xvY2F0aW9uLnBvcnQ6dGhpcy5zZWN1cmU/NDQzOjgwKTt0aGlzLnF1ZXJ5PW9wdHMucXVlcnl8fHt9O2lmKFwic3RyaW5nXCI9PXR5cGVvZiB0aGlzLnF1ZXJ5KXRoaXMucXVlcnk9cGFyc2Vxcy5kZWNvZGUodGhpcy5xdWVyeSk7dGhpcy51cGdyYWRlPWZhbHNlIT09b3B0cy51cGdyYWRlO3RoaXMucGF0aD0ob3B0cy5wYXRofHxcIi9lbmdpbmUuaW9cIikucmVwbGFjZSgvXFwvJC8sXCJcIikrXCIvXCI7dGhpcy5mb3JjZUpTT05QPSEhb3B0cy5mb3JjZUpTT05QO3RoaXMuanNvbnA9ZmFsc2UhPT1vcHRzLmpzb25wO3RoaXMuZm9yY2VCYXNlNjQ9ISFvcHRzLmZvcmNlQmFzZTY0O3RoaXMuZW5hYmxlc1hEUj0hIW9wdHMuZW5hYmxlc1hEUjt0aGlzLnRpbWVzdGFtcFBhcmFtPW9wdHMudGltZXN0YW1wUGFyYW18fFwidFwiO3RoaXMudGltZXN0YW1wUmVxdWVzdHM9b3B0cy50aW1lc3RhbXBSZXF1ZXN0czt0aGlzLnRyYW5zcG9ydHM9b3B0cy50cmFuc3BvcnRzfHxbXCJwb2xsaW5nXCIsXCJ3ZWJzb2NrZXRcIl07dGhpcy5yZWFkeVN0YXRlPVwiXCI7dGhpcy53cml0ZUJ1ZmZlcj1bXTt0aGlzLnBvbGljeVBvcnQ9b3B0cy5wb2xpY3lQb3J0fHw4NDM7dGhpcy5yZW1lbWJlclVwZ3JhZGU9b3B0cy5yZW1lbWJlclVwZ3JhZGV8fGZhbHNlO3RoaXMuYmluYXJ5VHlwZT1udWxsO3RoaXMub25seUJpbmFyeVVwZ3JhZGVzPW9wdHMub25seUJpbmFyeVVwZ3JhZGVzO3RoaXMucGVyTWVzc2FnZURlZmxhdGU9ZmFsc2UhPT1vcHRzLnBlck1lc3NhZ2VEZWZsYXRlP29wdHMucGVyTWVzc2FnZURlZmxhdGV8fHt9OmZhbHNlO2lmKHRydWU9PT10aGlzLnBlck1lc3NhZ2VEZWZsYXRlKXRoaXMucGVyTWVzc2FnZURlZmxhdGU9e307aWYodGhpcy5wZXJNZXNzYWdlRGVmbGF0ZSYmbnVsbD09dGhpcy5wZXJNZXNzYWdlRGVmbGF0ZS50aHJlc2hvbGQpe3RoaXMucGVyTWVzc2FnZURlZmxhdGUudGhyZXNob2xkPTEwMjR9dGhpcy5wZng9b3B0cy5wZnh8fG51bGw7dGhpcy5rZXk9b3B0cy5rZXl8fG51bGw7dGhpcy5wYXNzcGhyYXNlPW9wdHMucGFzc3BocmFzZXx8bnVsbDt0aGlzLmNlcnQ9b3B0cy5jZXJ0fHxudWxsO3RoaXMuY2E9b3B0cy5jYXx8bnVsbDt0aGlzLmNpcGhlcnM9b3B0cy5jaXBoZXJzfHxudWxsO3RoaXMucmVqZWN0VW5hdXRob3JpemVkPW9wdHMucmVqZWN0VW5hdXRob3JpemVkPT09dW5kZWZpbmVkP251bGw6b3B0cy5yZWplY3RVbmF1dGhvcml6ZWQ7dmFyIGZyZWVHbG9iYWw9dHlwZW9mIGdsb2JhbD09XCJvYmplY3RcIiYmZ2xvYmFsO2lmKGZyZWVHbG9iYWwuZ2xvYmFsPT09ZnJlZUdsb2JhbCl7aWYob3B0cy5leHRyYUhlYWRlcnMmJk9iamVjdC5rZXlzKG9wdHMuZXh0cmFIZWFkZXJzKS5sZW5ndGg+MCl7dGhpcy5leHRyYUhlYWRlcnM9b3B0cy5leHRyYUhlYWRlcnN9fXRoaXMub3BlbigpfVNvY2tldC5wcmlvcldlYnNvY2tldFN1Y2Nlc3M9ZmFsc2U7RW1pdHRlcihTb2NrZXQucHJvdG90eXBlKTtTb2NrZXQucHJvdG9jb2w9cGFyc2VyLnByb3RvY29sO1NvY2tldC5Tb2NrZXQ9U29ja2V0O1NvY2tldC5UcmFuc3BvcnQ9X2RlcmVxXyhcIi4vdHJhbnNwb3J0XCIpO1NvY2tldC50cmFuc3BvcnRzPV9kZXJlcV8oXCIuL3RyYW5zcG9ydHNcIik7U29ja2V0LnBhcnNlcj1fZGVyZXFfKFwiZW5naW5lLmlvLXBhcnNlclwiKTtTb2NrZXQucHJvdG90eXBlLmNyZWF0ZVRyYW5zcG9ydD1mdW5jdGlvbihuYW1lKXtkZWJ1ZygnY3JlYXRpbmcgdHJhbnNwb3J0IFwiJXNcIicsbmFtZSk7dmFyIHF1ZXJ5PWNsb25lKHRoaXMucXVlcnkpO3F1ZXJ5LkVJTz1wYXJzZXIucHJvdG9jb2w7cXVlcnkudHJhbnNwb3J0PW5hbWU7aWYodGhpcy5pZClxdWVyeS5zaWQ9dGhpcy5pZDt2YXIgdHJhbnNwb3J0PW5ldyB0cmFuc3BvcnRzW25hbWVdKHthZ2VudDp0aGlzLmFnZW50LGhvc3RuYW1lOnRoaXMuaG9zdG5hbWUscG9ydDp0aGlzLnBvcnQsc2VjdXJlOnRoaXMuc2VjdXJlLHBhdGg6dGhpcy5wYXRoLHF1ZXJ5OnF1ZXJ5LGZvcmNlSlNPTlA6dGhpcy5mb3JjZUpTT05QLGpzb25wOnRoaXMuanNvbnAsZm9yY2VCYXNlNjQ6dGhpcy5mb3JjZUJhc2U2NCxlbmFibGVzWERSOnRoaXMuZW5hYmxlc1hEUix0aW1lc3RhbXBSZXF1ZXN0czp0aGlzLnRpbWVzdGFtcFJlcXVlc3RzLHRpbWVzdGFtcFBhcmFtOnRoaXMudGltZXN0YW1wUGFyYW0scG9saWN5UG9ydDp0aGlzLnBvbGljeVBvcnQsc29ja2V0OnRoaXMscGZ4OnRoaXMucGZ4LGtleTp0aGlzLmtleSxwYXNzcGhyYXNlOnRoaXMucGFzc3BocmFzZSxjZXJ0OnRoaXMuY2VydCxjYTp0aGlzLmNhLGNpcGhlcnM6dGhpcy5jaXBoZXJzLHJlamVjdFVuYXV0aG9yaXplZDp0aGlzLnJlamVjdFVuYXV0aG9yaXplZCxwZXJNZXNzYWdlRGVmbGF0ZTp0aGlzLnBlck1lc3NhZ2VEZWZsYXRlLGV4dHJhSGVhZGVyczp0aGlzLmV4dHJhSGVhZGVyc30pO3JldHVybiB0cmFuc3BvcnR9O2Z1bmN0aW9uIGNsb25lKG9iail7dmFyIG89e307Zm9yKHZhciBpIGluIG9iail7aWYob2JqLmhhc093blByb3BlcnR5KGkpKXtvW2ldPW9ialtpXX19cmV0dXJuIG99U29ja2V0LnByb3RvdHlwZS5vcGVuPWZ1bmN0aW9uKCl7dmFyIHRyYW5zcG9ydDtpZih0aGlzLnJlbWVtYmVyVXBncmFkZSYmU29ja2V0LnByaW9yV2Vic29ja2V0U3VjY2VzcyYmdGhpcy50cmFuc3BvcnRzLmluZGV4T2YoXCJ3ZWJzb2NrZXRcIikhPS0xKXt0cmFuc3BvcnQ9XCJ3ZWJzb2NrZXRcIn1lbHNlIGlmKDA9PT10aGlzLnRyYW5zcG9ydHMubGVuZ3RoKXt2YXIgc2VsZj10aGlzO3NldFRpbWVvdXQoZnVuY3Rpb24oKXtzZWxmLmVtaXQoXCJlcnJvclwiLFwiTm8gdHJhbnNwb3J0cyBhdmFpbGFibGVcIil9LDApO3JldHVybn1lbHNle3RyYW5zcG9ydD10aGlzLnRyYW5zcG9ydHNbMF19dGhpcy5yZWFkeVN0YXRlPVwib3BlbmluZ1wiO3RyeXt0cmFuc3BvcnQ9dGhpcy5jcmVhdGVUcmFuc3BvcnQodHJhbnNwb3J0KX1jYXRjaChlKXt0aGlzLnRyYW5zcG9ydHMuc2hpZnQoKTt0aGlzLm9wZW4oKTtyZXR1cm59dHJhbnNwb3J0Lm9wZW4oKTt0aGlzLnNldFRyYW5zcG9ydCh0cmFuc3BvcnQpfTtTb2NrZXQucHJvdG90eXBlLnNldFRyYW5zcG9ydD1mdW5jdGlvbih0cmFuc3BvcnQpe2RlYnVnKFwic2V0dGluZyB0cmFuc3BvcnQgJXNcIix0cmFuc3BvcnQubmFtZSk7dmFyIHNlbGY9dGhpcztpZih0aGlzLnRyYW5zcG9ydCl7ZGVidWcoXCJjbGVhcmluZyBleGlzdGluZyB0cmFuc3BvcnQgJXNcIix0aGlzLnRyYW5zcG9ydC5uYW1lKTt0aGlzLnRyYW5zcG9ydC5yZW1vdmVBbGxMaXN0ZW5lcnMoKX10aGlzLnRyYW5zcG9ydD10cmFuc3BvcnQ7dHJhbnNwb3J0Lm9uKFwiZHJhaW5cIixmdW5jdGlvbigpe3NlbGYub25EcmFpbigpfSkub24oXCJwYWNrZXRcIixmdW5jdGlvbihwYWNrZXQpe3NlbGYub25QYWNrZXQocGFja2V0KX0pLm9uKFwiZXJyb3JcIixmdW5jdGlvbihlKXtzZWxmLm9uRXJyb3IoZSl9KS5vbihcImNsb3NlXCIsZnVuY3Rpb24oKXtzZWxmLm9uQ2xvc2UoXCJ0cmFuc3BvcnQgY2xvc2VcIil9KX07U29ja2V0LnByb3RvdHlwZS5wcm9iZT1mdW5jdGlvbihuYW1lKXtkZWJ1ZygncHJvYmluZyB0cmFuc3BvcnQgXCIlc1wiJyxuYW1lKTt2YXIgdHJhbnNwb3J0PXRoaXMuY3JlYXRlVHJhbnNwb3J0KG5hbWUse3Byb2JlOjF9KSxmYWlsZWQ9ZmFsc2Usc2VsZj10aGlzO1NvY2tldC5wcmlvcldlYnNvY2tldFN1Y2Nlc3M9ZmFsc2U7ZnVuY3Rpb24gb25UcmFuc3BvcnRPcGVuKCl7aWYoc2VsZi5vbmx5QmluYXJ5VXBncmFkZXMpe3ZhciB1cGdyYWRlTG9zZXNCaW5hcnk9IXRoaXMuc3VwcG9ydHNCaW5hcnkmJnNlbGYudHJhbnNwb3J0LnN1cHBvcnRzQmluYXJ5O2ZhaWxlZD1mYWlsZWR8fHVwZ3JhZGVMb3Nlc0JpbmFyeX1pZihmYWlsZWQpcmV0dXJuO2RlYnVnKCdwcm9iZSB0cmFuc3BvcnQgXCIlc1wiIG9wZW5lZCcsbmFtZSk7dHJhbnNwb3J0LnNlbmQoW3t0eXBlOlwicGluZ1wiLGRhdGE6XCJwcm9iZVwifV0pO3RyYW5zcG9ydC5vbmNlKFwicGFja2V0XCIsZnVuY3Rpb24obXNnKXtpZihmYWlsZWQpcmV0dXJuO2lmKFwicG9uZ1wiPT1tc2cudHlwZSYmXCJwcm9iZVwiPT1tc2cuZGF0YSl7ZGVidWcoJ3Byb2JlIHRyYW5zcG9ydCBcIiVzXCIgcG9uZycsbmFtZSk7c2VsZi51cGdyYWRpbmc9dHJ1ZTtzZWxmLmVtaXQoXCJ1cGdyYWRpbmdcIix0cmFuc3BvcnQpO2lmKCF0cmFuc3BvcnQpcmV0dXJuO1NvY2tldC5wcmlvcldlYnNvY2tldFN1Y2Nlc3M9XCJ3ZWJzb2NrZXRcIj09dHJhbnNwb3J0Lm5hbWU7ZGVidWcoJ3BhdXNpbmcgY3VycmVudCB0cmFuc3BvcnQgXCIlc1wiJyxzZWxmLnRyYW5zcG9ydC5uYW1lKTtzZWxmLnRyYW5zcG9ydC5wYXVzZShmdW5jdGlvbigpe2lmKGZhaWxlZClyZXR1cm47aWYoXCJjbG9zZWRcIj09c2VsZi5yZWFkeVN0YXRlKXJldHVybjtkZWJ1ZyhcImNoYW5naW5nIHRyYW5zcG9ydCBhbmQgc2VuZGluZyB1cGdyYWRlIHBhY2tldFwiKTtjbGVhbnVwKCk7c2VsZi5zZXRUcmFuc3BvcnQodHJhbnNwb3J0KTt0cmFuc3BvcnQuc2VuZChbe3R5cGU6XCJ1cGdyYWRlXCJ9XSk7c2VsZi5lbWl0KFwidXBncmFkZVwiLHRyYW5zcG9ydCk7dHJhbnNwb3J0PW51bGw7c2VsZi51cGdyYWRpbmc9ZmFsc2U7c2VsZi5mbHVzaCgpfSl9ZWxzZXtkZWJ1ZygncHJvYmUgdHJhbnNwb3J0IFwiJXNcIiBmYWlsZWQnLG5hbWUpO3ZhciBlcnI9bmV3IEVycm9yKFwicHJvYmUgZXJyb3JcIik7ZXJyLnRyYW5zcG9ydD10cmFuc3BvcnQubmFtZTtzZWxmLmVtaXQoXCJ1cGdyYWRlRXJyb3JcIixlcnIpfX0pfWZ1bmN0aW9uIGZyZWV6ZVRyYW5zcG9ydCgpe2lmKGZhaWxlZClyZXR1cm47ZmFpbGVkPXRydWU7Y2xlYW51cCgpO3RyYW5zcG9ydC5jbG9zZSgpO3RyYW5zcG9ydD1udWxsfWZ1bmN0aW9uIG9uZXJyb3IoZXJyKXt2YXIgZXJyb3I9bmV3IEVycm9yKFwicHJvYmUgZXJyb3I6IFwiK2Vycik7ZXJyb3IudHJhbnNwb3J0PXRyYW5zcG9ydC5uYW1lO2ZyZWV6ZVRyYW5zcG9ydCgpO2RlYnVnKCdwcm9iZSB0cmFuc3BvcnQgXCIlc1wiIGZhaWxlZCBiZWNhdXNlIG9mIGVycm9yOiAlcycsbmFtZSxlcnIpO3NlbGYuZW1pdChcInVwZ3JhZGVFcnJvclwiLGVycm9yKX1mdW5jdGlvbiBvblRyYW5zcG9ydENsb3NlKCl7b25lcnJvcihcInRyYW5zcG9ydCBjbG9zZWRcIil9ZnVuY3Rpb24gb25jbG9zZSgpe29uZXJyb3IoXCJzb2NrZXQgY2xvc2VkXCIpfWZ1bmN0aW9uIG9udXBncmFkZSh0byl7aWYodHJhbnNwb3J0JiZ0by5uYW1lIT10cmFuc3BvcnQubmFtZSl7ZGVidWcoJ1wiJXNcIiB3b3JrcyAtIGFib3J0aW5nIFwiJXNcIicsdG8ubmFtZSx0cmFuc3BvcnQubmFtZSk7ZnJlZXplVHJhbnNwb3J0KCl9fWZ1bmN0aW9uIGNsZWFudXAoKXt0cmFuc3BvcnQucmVtb3ZlTGlzdGVuZXIoXCJvcGVuXCIsb25UcmFuc3BvcnRPcGVuKTt0cmFuc3BvcnQucmVtb3ZlTGlzdGVuZXIoXCJlcnJvclwiLG9uZXJyb3IpO3RyYW5zcG9ydC5yZW1vdmVMaXN0ZW5lcihcImNsb3NlXCIsb25UcmFuc3BvcnRDbG9zZSk7c2VsZi5yZW1vdmVMaXN0ZW5lcihcImNsb3NlXCIsb25jbG9zZSk7c2VsZi5yZW1vdmVMaXN0ZW5lcihcInVwZ3JhZGluZ1wiLG9udXBncmFkZSl9dHJhbnNwb3J0Lm9uY2UoXCJvcGVuXCIsb25UcmFuc3BvcnRPcGVuKTt0cmFuc3BvcnQub25jZShcImVycm9yXCIsb25lcnJvcik7dHJhbnNwb3J0Lm9uY2UoXCJjbG9zZVwiLG9uVHJhbnNwb3J0Q2xvc2UpO3RoaXMub25jZShcImNsb3NlXCIsb25jbG9zZSk7dGhpcy5vbmNlKFwidXBncmFkaW5nXCIsb251cGdyYWRlKTt0cmFuc3BvcnQub3BlbigpfTtTb2NrZXQucHJvdG90eXBlLm9uT3Blbj1mdW5jdGlvbigpe2RlYnVnKFwic29ja2V0IG9wZW5cIik7dGhpcy5yZWFkeVN0YXRlPVwib3BlblwiO1NvY2tldC5wcmlvcldlYnNvY2tldFN1Y2Nlc3M9XCJ3ZWJzb2NrZXRcIj09dGhpcy50cmFuc3BvcnQubmFtZTt0aGlzLmVtaXQoXCJvcGVuXCIpO3RoaXMuZmx1c2goKTtpZihcIm9wZW5cIj09dGhpcy5yZWFkeVN0YXRlJiZ0aGlzLnVwZ3JhZGUmJnRoaXMudHJhbnNwb3J0LnBhdXNlKXtkZWJ1ZyhcInN0YXJ0aW5nIHVwZ3JhZGUgcHJvYmVzXCIpO2Zvcih2YXIgaT0wLGw9dGhpcy51cGdyYWRlcy5sZW5ndGg7aTxsO2krKyl7dGhpcy5wcm9iZSh0aGlzLnVwZ3JhZGVzW2ldKX19fTtTb2NrZXQucHJvdG90eXBlLm9uUGFja2V0PWZ1bmN0aW9uKHBhY2tldCl7aWYoXCJvcGVuaW5nXCI9PXRoaXMucmVhZHlTdGF0ZXx8XCJvcGVuXCI9PXRoaXMucmVhZHlTdGF0ZSl7ZGVidWcoJ3NvY2tldCByZWNlaXZlOiB0eXBlIFwiJXNcIiwgZGF0YSBcIiVzXCInLHBhY2tldC50eXBlLHBhY2tldC5kYXRhKTt0aGlzLmVtaXQoXCJwYWNrZXRcIixwYWNrZXQpO3RoaXMuZW1pdChcImhlYXJ0YmVhdFwiKTtzd2l0Y2gocGFja2V0LnR5cGUpe2Nhc2VcIm9wZW5cIjp0aGlzLm9uSGFuZHNoYWtlKHBhcnNlanNvbihwYWNrZXQuZGF0YSkpO2JyZWFrO2Nhc2VcInBvbmdcIjp0aGlzLnNldFBpbmcoKTt0aGlzLmVtaXQoXCJwb25nXCIpO2JyZWFrO2Nhc2VcImVycm9yXCI6dmFyIGVycj1uZXcgRXJyb3IoXCJzZXJ2ZXIgZXJyb3JcIik7ZXJyLmNvZGU9cGFja2V0LmRhdGE7dGhpcy5vbkVycm9yKGVycik7YnJlYWs7Y2FzZVwibWVzc2FnZVwiOnRoaXMuZW1pdChcImRhdGFcIixwYWNrZXQuZGF0YSk7dGhpcy5lbWl0KFwibWVzc2FnZVwiLHBhY2tldC5kYXRhKTticmVha319ZWxzZXtkZWJ1ZygncGFja2V0IHJlY2VpdmVkIHdpdGggc29ja2V0IHJlYWR5U3RhdGUgXCIlc1wiJyx0aGlzLnJlYWR5U3RhdGUpfX07U29ja2V0LnByb3RvdHlwZS5vbkhhbmRzaGFrZT1mdW5jdGlvbihkYXRhKXt0aGlzLmVtaXQoXCJoYW5kc2hha2VcIixkYXRhKTt0aGlzLmlkPWRhdGEuc2lkO3RoaXMudHJhbnNwb3J0LnF1ZXJ5LnNpZD1kYXRhLnNpZDt0aGlzLnVwZ3JhZGVzPXRoaXMuZmlsdGVyVXBncmFkZXMoZGF0YS51cGdyYWRlcyk7dGhpcy5waW5nSW50ZXJ2YWw9ZGF0YS5waW5nSW50ZXJ2YWw7dGhpcy5waW5nVGltZW91dD1kYXRhLnBpbmdUaW1lb3V0O3RoaXMub25PcGVuKCk7aWYoXCJjbG9zZWRcIj09dGhpcy5yZWFkeVN0YXRlKXJldHVybjt0aGlzLnNldFBpbmcoKTt0aGlzLnJlbW92ZUxpc3RlbmVyKFwiaGVhcnRiZWF0XCIsdGhpcy5vbkhlYXJ0YmVhdCk7dGhpcy5vbihcImhlYXJ0YmVhdFwiLHRoaXMub25IZWFydGJlYXQpfTtTb2NrZXQucHJvdG90eXBlLm9uSGVhcnRiZWF0PWZ1bmN0aW9uKHRpbWVvdXQpe2NsZWFyVGltZW91dCh0aGlzLnBpbmdUaW1lb3V0VGltZXIpO3ZhciBzZWxmPXRoaXM7c2VsZi5waW5nVGltZW91dFRpbWVyPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtpZihcImNsb3NlZFwiPT1zZWxmLnJlYWR5U3RhdGUpcmV0dXJuO3NlbGYub25DbG9zZShcInBpbmcgdGltZW91dFwiKX0sdGltZW91dHx8c2VsZi5waW5nSW50ZXJ2YWwrc2VsZi5waW5nVGltZW91dCl9O1NvY2tldC5wcm90b3R5cGUuc2V0UGluZz1mdW5jdGlvbigpe3ZhciBzZWxmPXRoaXM7Y2xlYXJUaW1lb3V0KHNlbGYucGluZ0ludGVydmFsVGltZXIpO3NlbGYucGluZ0ludGVydmFsVGltZXI9c2V0VGltZW91dChmdW5jdGlvbigpe2RlYnVnKFwid3JpdGluZyBwaW5nIHBhY2tldCAtIGV4cGVjdGluZyBwb25nIHdpdGhpbiAlc21zXCIsc2VsZi5waW5nVGltZW91dCk7c2VsZi5waW5nKCk7c2VsZi5vbkhlYXJ0YmVhdChzZWxmLnBpbmdUaW1lb3V0KX0sc2VsZi5waW5nSW50ZXJ2YWwpfTtTb2NrZXQucHJvdG90eXBlLnBpbmc9ZnVuY3Rpb24oKXt2YXIgc2VsZj10aGlzO3RoaXMuc2VuZFBhY2tldChcInBpbmdcIixmdW5jdGlvbigpe3NlbGYuZW1pdChcInBpbmdcIil9KX07U29ja2V0LnByb3RvdHlwZS5vbkRyYWluPWZ1bmN0aW9uKCl7dGhpcy53cml0ZUJ1ZmZlci5zcGxpY2UoMCx0aGlzLnByZXZCdWZmZXJMZW4pO3RoaXMucHJldkJ1ZmZlckxlbj0wO2lmKDA9PT10aGlzLndyaXRlQnVmZmVyLmxlbmd0aCl7dGhpcy5lbWl0KFwiZHJhaW5cIil9ZWxzZXt0aGlzLmZsdXNoKCl9fTtTb2NrZXQucHJvdG90eXBlLmZsdXNoPWZ1bmN0aW9uKCl7aWYoXCJjbG9zZWRcIiE9dGhpcy5yZWFkeVN0YXRlJiZ0aGlzLnRyYW5zcG9ydC53cml0YWJsZSYmIXRoaXMudXBncmFkaW5nJiZ0aGlzLndyaXRlQnVmZmVyLmxlbmd0aCl7ZGVidWcoXCJmbHVzaGluZyAlZCBwYWNrZXRzIGluIHNvY2tldFwiLHRoaXMud3JpdGVCdWZmZXIubGVuZ3RoKTt0aGlzLnRyYW5zcG9ydC5zZW5kKHRoaXMud3JpdGVCdWZmZXIpO3RoaXMucHJldkJ1ZmZlckxlbj10aGlzLndyaXRlQnVmZmVyLmxlbmd0aDt0aGlzLmVtaXQoXCJmbHVzaFwiKX19O1NvY2tldC5wcm90b3R5cGUud3JpdGU9U29ja2V0LnByb3RvdHlwZS5zZW5kPWZ1bmN0aW9uKG1zZyxvcHRpb25zLGZuKXt0aGlzLnNlbmRQYWNrZXQoXCJtZXNzYWdlXCIsbXNnLG9wdGlvbnMsZm4pO3JldHVybiB0aGlzfTtTb2NrZXQucHJvdG90eXBlLnNlbmRQYWNrZXQ9ZnVuY3Rpb24odHlwZSxkYXRhLG9wdGlvbnMsZm4pe2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIGRhdGEpe2ZuPWRhdGE7ZGF0YT11bmRlZmluZWR9aWYoXCJmdW5jdGlvblwiPT10eXBlb2Ygb3B0aW9ucyl7Zm49b3B0aW9ucztvcHRpb25zPW51bGx9aWYoXCJjbG9zaW5nXCI9PXRoaXMucmVhZHlTdGF0ZXx8XCJjbG9zZWRcIj09dGhpcy5yZWFkeVN0YXRlKXtyZXR1cm59b3B0aW9ucz1vcHRpb25zfHx7fTtvcHRpb25zLmNvbXByZXNzPWZhbHNlIT09b3B0aW9ucy5jb21wcmVzczt2YXIgcGFja2V0PXt0eXBlOnR5cGUsZGF0YTpkYXRhLG9wdGlvbnM6b3B0aW9uc307dGhpcy5lbWl0KFwicGFja2V0Q3JlYXRlXCIscGFja2V0KTt0aGlzLndyaXRlQnVmZmVyLnB1c2gocGFja2V0KTtpZihmbil0aGlzLm9uY2UoXCJmbHVzaFwiLGZuKTt0aGlzLmZsdXNoKCl9O1NvY2tldC5wcm90b3R5cGUuY2xvc2U9ZnVuY3Rpb24oKXtpZihcIm9wZW5pbmdcIj09dGhpcy5yZWFkeVN0YXRlfHxcIm9wZW5cIj09dGhpcy5yZWFkeVN0YXRlKXt0aGlzLnJlYWR5U3RhdGU9XCJjbG9zaW5nXCI7dmFyIHNlbGY9dGhpcztpZih0aGlzLndyaXRlQnVmZmVyLmxlbmd0aCl7dGhpcy5vbmNlKFwiZHJhaW5cIixmdW5jdGlvbigpe2lmKHRoaXMudXBncmFkaW5nKXt3YWl0Rm9yVXBncmFkZSgpfWVsc2V7Y2xvc2UoKX19KX1lbHNlIGlmKHRoaXMudXBncmFkaW5nKXt3YWl0Rm9yVXBncmFkZSgpfWVsc2V7Y2xvc2UoKX19ZnVuY3Rpb24gY2xvc2UoKXtzZWxmLm9uQ2xvc2UoXCJmb3JjZWQgY2xvc2VcIik7ZGVidWcoXCJzb2NrZXQgY2xvc2luZyAtIHRlbGxpbmcgdHJhbnNwb3J0IHRvIGNsb3NlXCIpO3NlbGYudHJhbnNwb3J0LmNsb3NlKCl9ZnVuY3Rpb24gY2xlYW51cEFuZENsb3NlKCl7c2VsZi5yZW1vdmVMaXN0ZW5lcihcInVwZ3JhZGVcIixjbGVhbnVwQW5kQ2xvc2UpO3NlbGYucmVtb3ZlTGlzdGVuZXIoXCJ1cGdyYWRlRXJyb3JcIixjbGVhbnVwQW5kQ2xvc2UpO2Nsb3NlKCl9ZnVuY3Rpb24gd2FpdEZvclVwZ3JhZGUoKXtzZWxmLm9uY2UoXCJ1cGdyYWRlXCIsY2xlYW51cEFuZENsb3NlKTtzZWxmLm9uY2UoXCJ1cGdyYWRlRXJyb3JcIixjbGVhbnVwQW5kQ2xvc2UpfXJldHVybiB0aGlzfTtTb2NrZXQucHJvdG90eXBlLm9uRXJyb3I9ZnVuY3Rpb24oZXJyKXtkZWJ1ZyhcInNvY2tldCBlcnJvciAlalwiLGVycik7U29ja2V0LnByaW9yV2Vic29ja2V0U3VjY2Vzcz1mYWxzZTt0aGlzLmVtaXQoXCJlcnJvclwiLGVycik7dGhpcy5vbkNsb3NlKFwidHJhbnNwb3J0IGVycm9yXCIsZXJyKX07U29ja2V0LnByb3RvdHlwZS5vbkNsb3NlPWZ1bmN0aW9uKHJlYXNvbixkZXNjKXtpZihcIm9wZW5pbmdcIj09dGhpcy5yZWFkeVN0YXRlfHxcIm9wZW5cIj09dGhpcy5yZWFkeVN0YXRlfHxcImNsb3NpbmdcIj09dGhpcy5yZWFkeVN0YXRlKXtkZWJ1Zygnc29ja2V0IGNsb3NlIHdpdGggcmVhc29uOiBcIiVzXCInLHJlYXNvbik7dmFyIHNlbGY9dGhpcztjbGVhclRpbWVvdXQodGhpcy5waW5nSW50ZXJ2YWxUaW1lcik7Y2xlYXJUaW1lb3V0KHRoaXMucGluZ1RpbWVvdXRUaW1lcik7dGhpcy50cmFuc3BvcnQucmVtb3ZlQWxsTGlzdGVuZXJzKFwiY2xvc2VcIik7dGhpcy50cmFuc3BvcnQuY2xvc2UoKTt0aGlzLnRyYW5zcG9ydC5yZW1vdmVBbGxMaXN0ZW5lcnMoKTt0aGlzLnJlYWR5U3RhdGU9XCJjbG9zZWRcIjt0aGlzLmlkPW51bGw7dGhpcy5lbWl0KFwiY2xvc2VcIixyZWFzb24sZGVzYyk7c2VsZi53cml0ZUJ1ZmZlcj1bXTtzZWxmLnByZXZCdWZmZXJMZW49MH19O1NvY2tldC5wcm90b3R5cGUuZmlsdGVyVXBncmFkZXM9ZnVuY3Rpb24odXBncmFkZXMpe3ZhciBmaWx0ZXJlZFVwZ3JhZGVzPVtdO2Zvcih2YXIgaT0wLGo9dXBncmFkZXMubGVuZ3RoO2k8ajtpKyspe2lmKH5pbmRleCh0aGlzLnRyYW5zcG9ydHMsdXBncmFkZXNbaV0pKWZpbHRlcmVkVXBncmFkZXMucHVzaCh1cGdyYWRlc1tpXSl9cmV0dXJuIGZpbHRlcmVkVXBncmFkZXN9fSkuY2FsbCh0aGlzLHR5cGVvZiBzZWxmIT09XCJ1bmRlZmluZWRcIj9zZWxmOnR5cGVvZiB3aW5kb3chPT1cInVuZGVmaW5lZFwiP3dpbmRvdzp0eXBlb2YgZ2xvYmFsIT09XCJ1bmRlZmluZWRcIj9nbG9iYWw6e30pfSx7XCIuL3RyYW5zcG9ydFwiOjQsXCIuL3RyYW5zcG9ydHNcIjo1LFwiY29tcG9uZW50LWVtaXR0ZXJcIjoxNSxkZWJ1ZzoxNyxcImVuZ2luZS5pby1wYXJzZXJcIjoxOSxpbmRleG9mOjIzLHBhcnNlanNvbjoyNixwYXJzZXFzOjI3LHBhcnNldXJpOjI4fV0sNDpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7dmFyIHBhcnNlcj1fZGVyZXFfKFwiZW5naW5lLmlvLXBhcnNlclwiKTt2YXIgRW1pdHRlcj1fZGVyZXFfKFwiY29tcG9uZW50LWVtaXR0ZXJcIik7bW9kdWxlLmV4cG9ydHM9VHJhbnNwb3J0O2Z1bmN0aW9uIFRyYW5zcG9ydChvcHRzKXt0aGlzLnBhdGg9b3B0cy5wYXRoO3RoaXMuaG9zdG5hbWU9b3B0cy5ob3N0bmFtZTt0aGlzLnBvcnQ9b3B0cy5wb3J0O3RoaXMuc2VjdXJlPW9wdHMuc2VjdXJlO3RoaXMucXVlcnk9b3B0cy5xdWVyeTt0aGlzLnRpbWVzdGFtcFBhcmFtPW9wdHMudGltZXN0YW1wUGFyYW07dGhpcy50aW1lc3RhbXBSZXF1ZXN0cz1vcHRzLnRpbWVzdGFtcFJlcXVlc3RzO3RoaXMucmVhZHlTdGF0ZT1cIlwiO3RoaXMuYWdlbnQ9b3B0cy5hZ2VudHx8ZmFsc2U7dGhpcy5zb2NrZXQ9b3B0cy5zb2NrZXQ7dGhpcy5lbmFibGVzWERSPW9wdHMuZW5hYmxlc1hEUjt0aGlzLnBmeD1vcHRzLnBmeDt0aGlzLmtleT1vcHRzLmtleTt0aGlzLnBhc3NwaHJhc2U9b3B0cy5wYXNzcGhyYXNlO3RoaXMuY2VydD1vcHRzLmNlcnQ7dGhpcy5jYT1vcHRzLmNhO3RoaXMuY2lwaGVycz1vcHRzLmNpcGhlcnM7dGhpcy5yZWplY3RVbmF1dGhvcml6ZWQ9b3B0cy5yZWplY3RVbmF1dGhvcml6ZWQ7dGhpcy5leHRyYUhlYWRlcnM9b3B0cy5leHRyYUhlYWRlcnN9RW1pdHRlcihUcmFuc3BvcnQucHJvdG90eXBlKTtUcmFuc3BvcnQucHJvdG90eXBlLm9uRXJyb3I9ZnVuY3Rpb24obXNnLGRlc2Mpe3ZhciBlcnI9bmV3IEVycm9yKG1zZyk7ZXJyLnR5cGU9XCJUcmFuc3BvcnRFcnJvclwiO2Vyci5kZXNjcmlwdGlvbj1kZXNjO3RoaXMuZW1pdChcImVycm9yXCIsZXJyKTtyZXR1cm4gdGhpc307VHJhbnNwb3J0LnByb3RvdHlwZS5vcGVuPWZ1bmN0aW9uKCl7aWYoXCJjbG9zZWRcIj09dGhpcy5yZWFkeVN0YXRlfHxcIlwiPT10aGlzLnJlYWR5U3RhdGUpe3RoaXMucmVhZHlTdGF0ZT1cIm9wZW5pbmdcIjt0aGlzLmRvT3BlbigpfXJldHVybiB0aGlzfTtUcmFuc3BvcnQucHJvdG90eXBlLmNsb3NlPWZ1bmN0aW9uKCl7aWYoXCJvcGVuaW5nXCI9PXRoaXMucmVhZHlTdGF0ZXx8XCJvcGVuXCI9PXRoaXMucmVhZHlTdGF0ZSl7dGhpcy5kb0Nsb3NlKCk7dGhpcy5vbkNsb3NlKCl9cmV0dXJuIHRoaXN9O1RyYW5zcG9ydC5wcm90b3R5cGUuc2VuZD1mdW5jdGlvbihwYWNrZXRzKXtpZihcIm9wZW5cIj09dGhpcy5yZWFkeVN0YXRlKXt0aGlzLndyaXRlKHBhY2tldHMpfWVsc2V7dGhyb3cgbmV3IEVycm9yKFwiVHJhbnNwb3J0IG5vdCBvcGVuXCIpfX07VHJhbnNwb3J0LnByb3RvdHlwZS5vbk9wZW49ZnVuY3Rpb24oKXt0aGlzLnJlYWR5U3RhdGU9XCJvcGVuXCI7dGhpcy53cml0YWJsZT10cnVlO3RoaXMuZW1pdChcIm9wZW5cIil9O1RyYW5zcG9ydC5wcm90b3R5cGUub25EYXRhPWZ1bmN0aW9uKGRhdGEpe3ZhciBwYWNrZXQ9cGFyc2VyLmRlY29kZVBhY2tldChkYXRhLHRoaXMuc29ja2V0LmJpbmFyeVR5cGUpO3RoaXMub25QYWNrZXQocGFja2V0KX07VHJhbnNwb3J0LnByb3RvdHlwZS5vblBhY2tldD1mdW5jdGlvbihwYWNrZXQpe3RoaXMuZW1pdChcInBhY2tldFwiLHBhY2tldCl9O1RyYW5zcG9ydC5wcm90b3R5cGUub25DbG9zZT1mdW5jdGlvbigpe3RoaXMucmVhZHlTdGF0ZT1cImNsb3NlZFwiO3RoaXMuZW1pdChcImNsb3NlXCIpfX0se1wiY29tcG9uZW50LWVtaXR0ZXJcIjoxNSxcImVuZ2luZS5pby1wYXJzZXJcIjoxOX1dLDU6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpeyhmdW5jdGlvbihnbG9iYWwpe3ZhciBYTUxIdHRwUmVxdWVzdD1fZGVyZXFfKFwieG1saHR0cHJlcXVlc3Qtc3NsXCIpO3ZhciBYSFI9X2RlcmVxXyhcIi4vcG9sbGluZy14aHJcIik7dmFyIEpTT05QPV9kZXJlcV8oXCIuL3BvbGxpbmctanNvbnBcIik7dmFyIHdlYnNvY2tldD1fZGVyZXFfKFwiLi93ZWJzb2NrZXRcIik7ZXhwb3J0cy5wb2xsaW5nPXBvbGxpbmc7ZXhwb3J0cy53ZWJzb2NrZXQ9d2Vic29ja2V0O2Z1bmN0aW9uIHBvbGxpbmcob3B0cyl7dmFyIHhocjt2YXIgeGQ9ZmFsc2U7dmFyIHhzPWZhbHNlO3ZhciBqc29ucD1mYWxzZSE9PW9wdHMuanNvbnA7aWYoZ2xvYmFsLmxvY2F0aW9uKXt2YXIgaXNTU0w9XCJodHRwczpcIj09bG9jYXRpb24ucHJvdG9jb2w7dmFyIHBvcnQ9bG9jYXRpb24ucG9ydDtpZighcG9ydCl7cG9ydD1pc1NTTD80NDM6ODB9eGQ9b3B0cy5ob3N0bmFtZSE9bG9jYXRpb24uaG9zdG5hbWV8fHBvcnQhPW9wdHMucG9ydDt4cz1vcHRzLnNlY3VyZSE9aXNTU0x9b3B0cy54ZG9tYWluPXhkO29wdHMueHNjaGVtZT14czt4aHI9bmV3IFhNTEh0dHBSZXF1ZXN0KG9wdHMpO2lmKFwib3BlblwiaW4geGhyJiYhb3B0cy5mb3JjZUpTT05QKXtyZXR1cm4gbmV3IFhIUihvcHRzKX1lbHNle2lmKCFqc29ucCl0aHJvdyBuZXcgRXJyb3IoXCJKU09OUCBkaXNhYmxlZFwiKTtyZXR1cm4gbmV3IEpTT05QKG9wdHMpfX19KS5jYWxsKHRoaXMsdHlwZW9mIHNlbGYhPT1cInVuZGVmaW5lZFwiP3NlbGY6dHlwZW9mIHdpbmRvdyE9PVwidW5kZWZpbmVkXCI/d2luZG93OnR5cGVvZiBnbG9iYWwhPT1cInVuZGVmaW5lZFwiP2dsb2JhbDp7fSl9LHtcIi4vcG9sbGluZy1qc29ucFwiOjYsXCIuL3BvbGxpbmcteGhyXCI6NyxcIi4vd2Vic29ja2V0XCI6OSxcInhtbGh0dHByZXF1ZXN0LXNzbFwiOjEwfV0sNjpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7KGZ1bmN0aW9uKGdsb2JhbCl7dmFyIFBvbGxpbmc9X2RlcmVxXyhcIi4vcG9sbGluZ1wiKTt2YXIgaW5oZXJpdD1fZGVyZXFfKFwiY29tcG9uZW50LWluaGVyaXRcIik7bW9kdWxlLmV4cG9ydHM9SlNPTlBQb2xsaW5nO3ZhciByTmV3bGluZT0vXFxuL2c7dmFyIHJFc2NhcGVkTmV3bGluZT0vXFxcXG4vZzt2YXIgY2FsbGJhY2tzO3ZhciBpbmRleD0wO2Z1bmN0aW9uIGVtcHR5KCl7fWZ1bmN0aW9uIEpTT05QUG9sbGluZyhvcHRzKXtQb2xsaW5nLmNhbGwodGhpcyxvcHRzKTt0aGlzLnF1ZXJ5PXRoaXMucXVlcnl8fHt9O2lmKCFjYWxsYmFja3Mpe2lmKCFnbG9iYWwuX19fZWlvKWdsb2JhbC5fX19laW89W107Y2FsbGJhY2tzPWdsb2JhbC5fX19laW99dGhpcy5pbmRleD1jYWxsYmFja3MubGVuZ3RoO3ZhciBzZWxmPXRoaXM7Y2FsbGJhY2tzLnB1c2goZnVuY3Rpb24obXNnKXtzZWxmLm9uRGF0YShtc2cpfSk7dGhpcy5xdWVyeS5qPXRoaXMuaW5kZXg7aWYoZ2xvYmFsLmRvY3VtZW50JiZnbG9iYWwuYWRkRXZlbnRMaXN0ZW5lcil7Z2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIoXCJiZWZvcmV1bmxvYWRcIixmdW5jdGlvbigpe2lmKHNlbGYuc2NyaXB0KXNlbGYuc2NyaXB0Lm9uZXJyb3I9ZW1wdHl9LGZhbHNlKX19aW5oZXJpdChKU09OUFBvbGxpbmcsUG9sbGluZyk7SlNPTlBQb2xsaW5nLnByb3RvdHlwZS5zdXBwb3J0c0JpbmFyeT1mYWxzZTtKU09OUFBvbGxpbmcucHJvdG90eXBlLmRvQ2xvc2U9ZnVuY3Rpb24oKXtpZih0aGlzLnNjcmlwdCl7dGhpcy5zY3JpcHQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLnNjcmlwdCk7dGhpcy5zY3JpcHQ9bnVsbH1pZih0aGlzLmZvcm0pe3RoaXMuZm9ybS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuZm9ybSk7dGhpcy5mb3JtPW51bGw7dGhpcy5pZnJhbWU9bnVsbH1Qb2xsaW5nLnByb3RvdHlwZS5kb0Nsb3NlLmNhbGwodGhpcyl9O0pTT05QUG9sbGluZy5wcm90b3R5cGUuZG9Qb2xsPWZ1bmN0aW9uKCl7dmFyIHNlbGY9dGhpczt2YXIgc2NyaXB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik7aWYodGhpcy5zY3JpcHQpe3RoaXMuc2NyaXB0LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5zY3JpcHQpO3RoaXMuc2NyaXB0PW51bGx9c2NyaXB0LmFzeW5jPXRydWU7c2NyaXB0LnNyYz10aGlzLnVyaSgpO3NjcmlwdC5vbmVycm9yPWZ1bmN0aW9uKGUpe3NlbGYub25FcnJvcihcImpzb25wIHBvbGwgZXJyb3JcIixlKX07dmFyIGluc2VydEF0PWRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic2NyaXB0XCIpWzBdO2lmKGluc2VydEF0KXtpbnNlcnRBdC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShzY3JpcHQsaW5zZXJ0QXQpfWVsc2V7KGRvY3VtZW50LmhlYWR8fGRvY3VtZW50LmJvZHkpLmFwcGVuZENoaWxkKHNjcmlwdCl9dGhpcy5zY3JpcHQ9c2NyaXB0O3ZhciBpc1VBZ2Vja289XCJ1bmRlZmluZWRcIiE9dHlwZW9mIG5hdmlnYXRvciYmL2dlY2tvL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtpZihpc1VBZ2Vja28pe3NldFRpbWVvdXQoZnVuY3Rpb24oKXt2YXIgaWZyYW1lPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpZnJhbWVcIik7ZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChpZnJhbWUpO2RvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoaWZyYW1lKX0sMTAwKX19O0pTT05QUG9sbGluZy5wcm90b3R5cGUuZG9Xcml0ZT1mdW5jdGlvbihkYXRhLGZuKXt2YXIgc2VsZj10aGlzO2lmKCF0aGlzLmZvcm0pe3ZhciBmb3JtPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJmb3JtXCIpO3ZhciBhcmVhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZXh0YXJlYVwiKTt2YXIgaWQ9dGhpcy5pZnJhbWVJZD1cImVpb19pZnJhbWVfXCIrdGhpcy5pbmRleDt2YXIgaWZyYW1lO2Zvcm0uY2xhc3NOYW1lPVwic29ja2V0aW9cIjtmb3JtLnN0eWxlLnBvc2l0aW9uPVwiYWJzb2x1dGVcIjtmb3JtLnN0eWxlLnRvcD1cIi0xMDAwcHhcIjtmb3JtLnN0eWxlLmxlZnQ9XCItMTAwMHB4XCI7Zm9ybS50YXJnZXQ9aWQ7Zm9ybS5tZXRob2Q9XCJQT1NUXCI7Zm9ybS5zZXRBdHRyaWJ1dGUoXCJhY2NlcHQtY2hhcnNldFwiLFwidXRmLThcIik7YXJlYS5uYW1lPVwiZFwiO2Zvcm0uYXBwZW5kQ2hpbGQoYXJlYSk7ZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChmb3JtKTt0aGlzLmZvcm09Zm9ybTt0aGlzLmFyZWE9YXJlYX10aGlzLmZvcm0uYWN0aW9uPXRoaXMudXJpKCk7ZnVuY3Rpb24gY29tcGxldGUoKXtpbml0SWZyYW1lKCk7Zm4oKX1mdW5jdGlvbiBpbml0SWZyYW1lKCl7aWYoc2VsZi5pZnJhbWUpe3RyeXtzZWxmLmZvcm0ucmVtb3ZlQ2hpbGQoc2VsZi5pZnJhbWUpfWNhdGNoKGUpe3NlbGYub25FcnJvcihcImpzb25wIHBvbGxpbmcgaWZyYW1lIHJlbW92YWwgZXJyb3JcIixlKX19dHJ5e3ZhciBodG1sPSc8aWZyYW1lIHNyYz1cImphdmFzY3JpcHQ6MFwiIG5hbWU9XCInK3NlbGYuaWZyYW1lSWQrJ1wiPic7aWZyYW1lPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoaHRtbCl9Y2F0Y2goZSl7aWZyYW1lPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpZnJhbWVcIik7aWZyYW1lLm5hbWU9c2VsZi5pZnJhbWVJZDtpZnJhbWUuc3JjPVwiamF2YXNjcmlwdDowXCJ9aWZyYW1lLmlkPXNlbGYuaWZyYW1lSWQ7c2VsZi5mb3JtLmFwcGVuZENoaWxkKGlmcmFtZSk7c2VsZi5pZnJhbWU9aWZyYW1lfWluaXRJZnJhbWUoKTtkYXRhPWRhdGEucmVwbGFjZShyRXNjYXBlZE5ld2xpbmUsXCJcXFxcXFxuXCIpO3RoaXMuYXJlYS52YWx1ZT1kYXRhLnJlcGxhY2Uock5ld2xpbmUsXCJcXFxcblwiKTt0cnl7dGhpcy5mb3JtLnN1Ym1pdCgpfWNhdGNoKGUpe31pZih0aGlzLmlmcmFtZS5hdHRhY2hFdmVudCl7dGhpcy5pZnJhbWUub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7aWYoc2VsZi5pZnJhbWUucmVhZHlTdGF0ZT09XCJjb21wbGV0ZVwiKXtjb21wbGV0ZSgpfX19ZWxzZXt0aGlzLmlmcmFtZS5vbmxvYWQ9Y29tcGxldGV9fX0pLmNhbGwodGhpcyx0eXBlb2Ygc2VsZiE9PVwidW5kZWZpbmVkXCI/c2VsZjp0eXBlb2Ygd2luZG93IT09XCJ1bmRlZmluZWRcIj93aW5kb3c6dHlwZW9mIGdsb2JhbCE9PVwidW5kZWZpbmVkXCI/Z2xvYmFsOnt9KX0se1wiLi9wb2xsaW5nXCI6OCxcImNvbXBvbmVudC1pbmhlcml0XCI6MTZ9XSw3OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXsoZnVuY3Rpb24oZ2xvYmFsKXt2YXIgWE1MSHR0cFJlcXVlc3Q9X2RlcmVxXyhcInhtbGh0dHByZXF1ZXN0LXNzbFwiKTt2YXIgUG9sbGluZz1fZGVyZXFfKFwiLi9wb2xsaW5nXCIpO3ZhciBFbWl0dGVyPV9kZXJlcV8oXCJjb21wb25lbnQtZW1pdHRlclwiKTt2YXIgaW5oZXJpdD1fZGVyZXFfKFwiY29tcG9uZW50LWluaGVyaXRcIik7dmFyIGRlYnVnPV9kZXJlcV8oXCJkZWJ1Z1wiKShcImVuZ2luZS5pby1jbGllbnQ6cG9sbGluZy14aHJcIik7bW9kdWxlLmV4cG9ydHM9WEhSO21vZHVsZS5leHBvcnRzLlJlcXVlc3Q9UmVxdWVzdDtmdW5jdGlvbiBlbXB0eSgpe31mdW5jdGlvbiBYSFIob3B0cyl7UG9sbGluZy5jYWxsKHRoaXMsb3B0cyk7aWYoZ2xvYmFsLmxvY2F0aW9uKXt2YXIgaXNTU0w9XCJodHRwczpcIj09bG9jYXRpb24ucHJvdG9jb2w7dmFyIHBvcnQ9bG9jYXRpb24ucG9ydDtpZighcG9ydCl7cG9ydD1pc1NTTD80NDM6ODB9dGhpcy54ZD1vcHRzLmhvc3RuYW1lIT1nbG9iYWwubG9jYXRpb24uaG9zdG5hbWV8fHBvcnQhPW9wdHMucG9ydDt0aGlzLnhzPW9wdHMuc2VjdXJlIT1pc1NTTH1lbHNle3RoaXMuZXh0cmFIZWFkZXJzPW9wdHMuZXh0cmFIZWFkZXJzfX1pbmhlcml0KFhIUixQb2xsaW5nKTtYSFIucHJvdG90eXBlLnN1cHBvcnRzQmluYXJ5PXRydWU7WEhSLnByb3RvdHlwZS5yZXF1ZXN0PWZ1bmN0aW9uKG9wdHMpe29wdHM9b3B0c3x8e307b3B0cy51cmk9dGhpcy51cmkoKTtvcHRzLnhkPXRoaXMueGQ7b3B0cy54cz10aGlzLnhzO29wdHMuYWdlbnQ9dGhpcy5hZ2VudHx8ZmFsc2U7b3B0cy5zdXBwb3J0c0JpbmFyeT10aGlzLnN1cHBvcnRzQmluYXJ5O29wdHMuZW5hYmxlc1hEUj10aGlzLmVuYWJsZXNYRFI7b3B0cy5wZng9dGhpcy5wZng7b3B0cy5rZXk9dGhpcy5rZXk7b3B0cy5wYXNzcGhyYXNlPXRoaXMucGFzc3BocmFzZTtvcHRzLmNlcnQ9dGhpcy5jZXJ0O29wdHMuY2E9dGhpcy5jYTtvcHRzLmNpcGhlcnM9dGhpcy5jaXBoZXJzO29wdHMucmVqZWN0VW5hdXRob3JpemVkPXRoaXMucmVqZWN0VW5hdXRob3JpemVkO29wdHMuZXh0cmFIZWFkZXJzPXRoaXMuZXh0cmFIZWFkZXJzO3JldHVybiBuZXcgUmVxdWVzdChvcHRzKX07WEhSLnByb3RvdHlwZS5kb1dyaXRlPWZ1bmN0aW9uKGRhdGEsZm4pe3ZhciBpc0JpbmFyeT10eXBlb2YgZGF0YSE9PVwic3RyaW5nXCImJmRhdGEhPT11bmRlZmluZWQ7dmFyIHJlcT10aGlzLnJlcXVlc3Qoe21ldGhvZDpcIlBPU1RcIixkYXRhOmRhdGEsaXNCaW5hcnk6aXNCaW5hcnl9KTt2YXIgc2VsZj10aGlzO3JlcS5vbihcInN1Y2Nlc3NcIixmbik7cmVxLm9uKFwiZXJyb3JcIixmdW5jdGlvbihlcnIpe3NlbGYub25FcnJvcihcInhociBwb3N0IGVycm9yXCIsZXJyKX0pO3RoaXMuc2VuZFhocj1yZXF9O1hIUi5wcm90b3R5cGUuZG9Qb2xsPWZ1bmN0aW9uKCl7ZGVidWcoXCJ4aHIgcG9sbFwiKTt2YXIgcmVxPXRoaXMucmVxdWVzdCgpO3ZhciBzZWxmPXRoaXM7cmVxLm9uKFwiZGF0YVwiLGZ1bmN0aW9uKGRhdGEpe3NlbGYub25EYXRhKGRhdGEpfSk7cmVxLm9uKFwiZXJyb3JcIixmdW5jdGlvbihlcnIpe3NlbGYub25FcnJvcihcInhociBwb2xsIGVycm9yXCIsZXJyKX0pO3RoaXMucG9sbFhocj1yZXF9O2Z1bmN0aW9uIFJlcXVlc3Qob3B0cyl7dGhpcy5tZXRob2Q9b3B0cy5tZXRob2R8fFwiR0VUXCI7dGhpcy51cmk9b3B0cy51cmk7dGhpcy54ZD0hIW9wdHMueGQ7dGhpcy54cz0hIW9wdHMueHM7dGhpcy5hc3luYz1mYWxzZSE9PW9wdHMuYXN5bmM7dGhpcy5kYXRhPXVuZGVmaW5lZCE9b3B0cy5kYXRhP29wdHMuZGF0YTpudWxsO3RoaXMuYWdlbnQ9b3B0cy5hZ2VudDt0aGlzLmlzQmluYXJ5PW9wdHMuaXNCaW5hcnk7dGhpcy5zdXBwb3J0c0JpbmFyeT1vcHRzLnN1cHBvcnRzQmluYXJ5O3RoaXMuZW5hYmxlc1hEUj1vcHRzLmVuYWJsZXNYRFI7dGhpcy5wZng9b3B0cy5wZng7dGhpcy5rZXk9b3B0cy5rZXk7dGhpcy5wYXNzcGhyYXNlPW9wdHMucGFzc3BocmFzZTt0aGlzLmNlcnQ9b3B0cy5jZXJ0O3RoaXMuY2E9b3B0cy5jYTt0aGlzLmNpcGhlcnM9b3B0cy5jaXBoZXJzO3RoaXMucmVqZWN0VW5hdXRob3JpemVkPW9wdHMucmVqZWN0VW5hdXRob3JpemVkO3RoaXMuZXh0cmFIZWFkZXJzPW9wdHMuZXh0cmFIZWFkZXJzO3RoaXMuY3JlYXRlKCl9RW1pdHRlcihSZXF1ZXN0LnByb3RvdHlwZSk7UmVxdWVzdC5wcm90b3R5cGUuY3JlYXRlPWZ1bmN0aW9uKCl7dmFyIG9wdHM9e2FnZW50OnRoaXMuYWdlbnQseGRvbWFpbjp0aGlzLnhkLHhzY2hlbWU6dGhpcy54cyxlbmFibGVzWERSOnRoaXMuZW5hYmxlc1hEUn07b3B0cy5wZng9dGhpcy5wZng7b3B0cy5rZXk9dGhpcy5rZXk7b3B0cy5wYXNzcGhyYXNlPXRoaXMucGFzc3BocmFzZTtvcHRzLmNlcnQ9dGhpcy5jZXJ0O29wdHMuY2E9dGhpcy5jYTtvcHRzLmNpcGhlcnM9dGhpcy5jaXBoZXJzO29wdHMucmVqZWN0VW5hdXRob3JpemVkPXRoaXMucmVqZWN0VW5hdXRob3JpemVkO3ZhciB4aHI9dGhpcy54aHI9bmV3IFhNTEh0dHBSZXF1ZXN0KG9wdHMpO3ZhciBzZWxmPXRoaXM7dHJ5e2RlYnVnKFwieGhyIG9wZW4gJXM6ICVzXCIsdGhpcy5tZXRob2QsdGhpcy51cmkpO3hoci5vcGVuKHRoaXMubWV0aG9kLHRoaXMudXJpLHRoaXMuYXN5bmMpO3RyeXtpZih0aGlzLmV4dHJhSGVhZGVycyl7eGhyLnNldERpc2FibGVIZWFkZXJDaGVjayh0cnVlKTtmb3IodmFyIGkgaW4gdGhpcy5leHRyYUhlYWRlcnMpe2lmKHRoaXMuZXh0cmFIZWFkZXJzLmhhc093blByb3BlcnR5KGkpKXt4aHIuc2V0UmVxdWVzdEhlYWRlcihpLHRoaXMuZXh0cmFIZWFkZXJzW2ldKX19fX1jYXRjaChlKXt9aWYodGhpcy5zdXBwb3J0c0JpbmFyeSl7eGhyLnJlc3BvbnNlVHlwZT1cImFycmF5YnVmZmVyXCJ9aWYoXCJQT1NUXCI9PXRoaXMubWV0aG9kKXt0cnl7aWYodGhpcy5pc0JpbmFyeSl7eGhyLnNldFJlcXVlc3RIZWFkZXIoXCJDb250ZW50LXR5cGVcIixcImFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbVwiKX1lbHNle3hoci5zZXRSZXF1ZXN0SGVhZGVyKFwiQ29udGVudC10eXBlXCIsXCJ0ZXh0L3BsYWluO2NoYXJzZXQ9VVRGLThcIil9fWNhdGNoKGUpe319aWYoXCJ3aXRoQ3JlZGVudGlhbHNcImluIHhocil7eGhyLndpdGhDcmVkZW50aWFscz10cnVlfWlmKHRoaXMuaGFzWERSKCkpe3hoci5vbmxvYWQ9ZnVuY3Rpb24oKXtzZWxmLm9uTG9hZCgpfTt4aHIub25lcnJvcj1mdW5jdGlvbigpe3NlbGYub25FcnJvcih4aHIucmVzcG9uc2VUZXh0KX19ZWxzZXt4aHIub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7aWYoNCE9eGhyLnJlYWR5U3RhdGUpcmV0dXJuO2lmKDIwMD09eGhyLnN0YXR1c3x8MTIyMz09eGhyLnN0YXR1cyl7c2VsZi5vbkxvYWQoKX1lbHNle3NldFRpbWVvdXQoZnVuY3Rpb24oKXtzZWxmLm9uRXJyb3IoeGhyLnN0YXR1cyl9LDApfX19ZGVidWcoXCJ4aHIgZGF0YSAlc1wiLHRoaXMuZGF0YSk7eGhyLnNlbmQodGhpcy5kYXRhKX1jYXRjaChlKXtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7c2VsZi5vbkVycm9yKGUpfSwwKTtyZXR1cm59aWYoZ2xvYmFsLmRvY3VtZW50KXt0aGlzLmluZGV4PVJlcXVlc3QucmVxdWVzdHNDb3VudCsrO1JlcXVlc3QucmVxdWVzdHNbdGhpcy5pbmRleF09dGhpc319O1JlcXVlc3QucHJvdG90eXBlLm9uU3VjY2Vzcz1mdW5jdGlvbigpe3RoaXMuZW1pdChcInN1Y2Nlc3NcIik7dGhpcy5jbGVhbnVwKCl9O1JlcXVlc3QucHJvdG90eXBlLm9uRGF0YT1mdW5jdGlvbihkYXRhKXt0aGlzLmVtaXQoXCJkYXRhXCIsZGF0YSk7dGhpcy5vblN1Y2Nlc3MoKX07UmVxdWVzdC5wcm90b3R5cGUub25FcnJvcj1mdW5jdGlvbihlcnIpe3RoaXMuZW1pdChcImVycm9yXCIsZXJyKTt0aGlzLmNsZWFudXAodHJ1ZSl9O1JlcXVlc3QucHJvdG90eXBlLmNsZWFudXA9ZnVuY3Rpb24oZnJvbUVycm9yKXtpZihcInVuZGVmaW5lZFwiPT10eXBlb2YgdGhpcy54aHJ8fG51bGw9PT10aGlzLnhocil7cmV0dXJufWlmKHRoaXMuaGFzWERSKCkpe3RoaXMueGhyLm9ubG9hZD10aGlzLnhoci5vbmVycm9yPWVtcHR5fWVsc2V7dGhpcy54aHIub25yZWFkeXN0YXRlY2hhbmdlPWVtcHR5fWlmKGZyb21FcnJvcil7dHJ5e3RoaXMueGhyLmFib3J0KCl9Y2F0Y2goZSl7fX1pZihnbG9iYWwuZG9jdW1lbnQpe2RlbGV0ZSBSZXF1ZXN0LnJlcXVlc3RzW3RoaXMuaW5kZXhdfXRoaXMueGhyPW51bGx9O1JlcXVlc3QucHJvdG90eXBlLm9uTG9hZD1mdW5jdGlvbigpe3ZhciBkYXRhO3RyeXt2YXIgY29udGVudFR5cGU7dHJ5e2NvbnRlbnRUeXBlPXRoaXMueGhyLmdldFJlc3BvbnNlSGVhZGVyKFwiQ29udGVudC1UeXBlXCIpLnNwbGl0KFwiO1wiKVswXX1jYXRjaChlKXt9aWYoY29udGVudFR5cGU9PT1cImFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbVwiKXtkYXRhPXRoaXMueGhyLnJlc3BvbnNlfWVsc2V7aWYoIXRoaXMuc3VwcG9ydHNCaW5hcnkpe2RhdGE9dGhpcy54aHIucmVzcG9uc2VUZXh0fWVsc2V7dHJ5e2RhdGE9U3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLG5ldyBVaW50OEFycmF5KHRoaXMueGhyLnJlc3BvbnNlKSl9Y2F0Y2goZSl7dmFyIHVpOEFycj1uZXcgVWludDhBcnJheSh0aGlzLnhoci5yZXNwb25zZSk7dmFyIGRhdGFBcnJheT1bXTtmb3IodmFyIGlkeD0wLGxlbmd0aD11aThBcnIubGVuZ3RoO2lkeDxsZW5ndGg7aWR4Kyspe2RhdGFBcnJheS5wdXNoKHVpOEFycltpZHhdKX1kYXRhPVN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCxkYXRhQXJyYXkpfX19fWNhdGNoKGUpe3RoaXMub25FcnJvcihlKX1pZihudWxsIT1kYXRhKXt0aGlzLm9uRGF0YShkYXRhKX19O1JlcXVlc3QucHJvdG90eXBlLmhhc1hEUj1mdW5jdGlvbigpe3JldHVyblwidW5kZWZpbmVkXCIhPT10eXBlb2YgZ2xvYmFsLlhEb21haW5SZXF1ZXN0JiYhdGhpcy54cyYmdGhpcy5lbmFibGVzWERSfTtSZXF1ZXN0LnByb3RvdHlwZS5hYm9ydD1mdW5jdGlvbigpe3RoaXMuY2xlYW51cCgpfTtpZihnbG9iYWwuZG9jdW1lbnQpe1JlcXVlc3QucmVxdWVzdHNDb3VudD0wO1JlcXVlc3QucmVxdWVzdHM9e307aWYoZ2xvYmFsLmF0dGFjaEV2ZW50KXtnbG9iYWwuYXR0YWNoRXZlbnQoXCJvbnVubG9hZFwiLHVubG9hZEhhbmRsZXIpfWVsc2UgaWYoZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIpe2dsb2JhbC5hZGRFdmVudExpc3RlbmVyKFwiYmVmb3JldW5sb2FkXCIsdW5sb2FkSGFuZGxlcixmYWxzZSl9fWZ1bmN0aW9uIHVubG9hZEhhbmRsZXIoKXtmb3IodmFyIGkgaW4gUmVxdWVzdC5yZXF1ZXN0cyl7aWYoUmVxdWVzdC5yZXF1ZXN0cy5oYXNPd25Qcm9wZXJ0eShpKSl7UmVxdWVzdC5yZXF1ZXN0c1tpXS5hYm9ydCgpfX19fSkuY2FsbCh0aGlzLHR5cGVvZiBzZWxmIT09XCJ1bmRlZmluZWRcIj9zZWxmOnR5cGVvZiB3aW5kb3chPT1cInVuZGVmaW5lZFwiP3dpbmRvdzp0eXBlb2YgZ2xvYmFsIT09XCJ1bmRlZmluZWRcIj9nbG9iYWw6e30pfSx7XCIuL3BvbGxpbmdcIjo4LFwiY29tcG9uZW50LWVtaXR0ZXJcIjoxNSxcImNvbXBvbmVudC1pbmhlcml0XCI6MTYsZGVidWc6MTcsXCJ4bWxodHRwcmVxdWVzdC1zc2xcIjoxMH1dLDg6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe3ZhciBUcmFuc3BvcnQ9X2RlcmVxXyhcIi4uL3RyYW5zcG9ydFwiKTt2YXIgcGFyc2Vxcz1fZGVyZXFfKFwicGFyc2Vxc1wiKTt2YXIgcGFyc2VyPV9kZXJlcV8oXCJlbmdpbmUuaW8tcGFyc2VyXCIpO3ZhciBpbmhlcml0PV9kZXJlcV8oXCJjb21wb25lbnQtaW5oZXJpdFwiKTt2YXIgeWVhc3Q9X2RlcmVxXyhcInllYXN0XCIpO3ZhciBkZWJ1Zz1fZGVyZXFfKFwiZGVidWdcIikoXCJlbmdpbmUuaW8tY2xpZW50OnBvbGxpbmdcIik7bW9kdWxlLmV4cG9ydHM9UG9sbGluZzt2YXIgaGFzWEhSMj1mdW5jdGlvbigpe3ZhciBYTUxIdHRwUmVxdWVzdD1fZGVyZXFfKFwieG1saHR0cHJlcXVlc3Qtc3NsXCIpO3ZhciB4aHI9bmV3IFhNTEh0dHBSZXF1ZXN0KHt4ZG9tYWluOmZhbHNlfSk7cmV0dXJuIG51bGwhPXhoci5yZXNwb25zZVR5cGV9KCk7ZnVuY3Rpb24gUG9sbGluZyhvcHRzKXt2YXIgZm9yY2VCYXNlNjQ9b3B0cyYmb3B0cy5mb3JjZUJhc2U2NDtpZighaGFzWEhSMnx8Zm9yY2VCYXNlNjQpe3RoaXMuc3VwcG9ydHNCaW5hcnk9ZmFsc2V9VHJhbnNwb3J0LmNhbGwodGhpcyxvcHRzKX1pbmhlcml0KFBvbGxpbmcsVHJhbnNwb3J0KTtQb2xsaW5nLnByb3RvdHlwZS5uYW1lPVwicG9sbGluZ1wiO1BvbGxpbmcucHJvdG90eXBlLmRvT3Blbj1mdW5jdGlvbigpe3RoaXMucG9sbCgpfTtQb2xsaW5nLnByb3RvdHlwZS5wYXVzZT1mdW5jdGlvbihvblBhdXNlKXt2YXIgcGVuZGluZz0wO3ZhciBzZWxmPXRoaXM7dGhpcy5yZWFkeVN0YXRlPVwicGF1c2luZ1wiO2Z1bmN0aW9uIHBhdXNlKCl7ZGVidWcoXCJwYXVzZWRcIik7c2VsZi5yZWFkeVN0YXRlPVwicGF1c2VkXCI7b25QYXVzZSgpfWlmKHRoaXMucG9sbGluZ3x8IXRoaXMud3JpdGFibGUpe3ZhciB0b3RhbD0wO2lmKHRoaXMucG9sbGluZyl7ZGVidWcoXCJ3ZSBhcmUgY3VycmVudGx5IHBvbGxpbmcgLSB3YWl0aW5nIHRvIHBhdXNlXCIpO3RvdGFsKys7dGhpcy5vbmNlKFwicG9sbENvbXBsZXRlXCIsZnVuY3Rpb24oKXtkZWJ1ZyhcInByZS1wYXVzZSBwb2xsaW5nIGNvbXBsZXRlXCIpOy0tdG90YWx8fHBhdXNlKCl9KX1pZighdGhpcy53cml0YWJsZSl7ZGVidWcoXCJ3ZSBhcmUgY3VycmVudGx5IHdyaXRpbmcgLSB3YWl0aW5nIHRvIHBhdXNlXCIpO3RvdGFsKys7dGhpcy5vbmNlKFwiZHJhaW5cIixmdW5jdGlvbigpe2RlYnVnKFwicHJlLXBhdXNlIHdyaXRpbmcgY29tcGxldGVcIik7LS10b3RhbHx8cGF1c2UoKX0pfX1lbHNle3BhdXNlKCl9fTtQb2xsaW5nLnByb3RvdHlwZS5wb2xsPWZ1bmN0aW9uKCl7ZGVidWcoXCJwb2xsaW5nXCIpO3RoaXMucG9sbGluZz10cnVlO3RoaXMuZG9Qb2xsKCk7dGhpcy5lbWl0KFwicG9sbFwiKX07UG9sbGluZy5wcm90b3R5cGUub25EYXRhPWZ1bmN0aW9uKGRhdGEpe3ZhciBzZWxmPXRoaXM7ZGVidWcoXCJwb2xsaW5nIGdvdCBkYXRhICVzXCIsZGF0YSk7dmFyIGNhbGxiYWNrPWZ1bmN0aW9uKHBhY2tldCxpbmRleCx0b3RhbCl7aWYoXCJvcGVuaW5nXCI9PXNlbGYucmVhZHlTdGF0ZSl7c2VsZi5vbk9wZW4oKX1pZihcImNsb3NlXCI9PXBhY2tldC50eXBlKXtzZWxmLm9uQ2xvc2UoKTtyZXR1cm4gZmFsc2V9c2VsZi5vblBhY2tldChwYWNrZXQpfTtwYXJzZXIuZGVjb2RlUGF5bG9hZChkYXRhLHRoaXMuc29ja2V0LmJpbmFyeVR5cGUsY2FsbGJhY2spO2lmKFwiY2xvc2VkXCIhPXRoaXMucmVhZHlTdGF0ZSl7dGhpcy5wb2xsaW5nPWZhbHNlO3RoaXMuZW1pdChcInBvbGxDb21wbGV0ZVwiKTtpZihcIm9wZW5cIj09dGhpcy5yZWFkeVN0YXRlKXt0aGlzLnBvbGwoKX1lbHNle2RlYnVnKCdpZ25vcmluZyBwb2xsIC0gdHJhbnNwb3J0IHN0YXRlIFwiJXNcIicsdGhpcy5yZWFkeVN0YXRlKX19fTtQb2xsaW5nLnByb3RvdHlwZS5kb0Nsb3NlPWZ1bmN0aW9uKCl7dmFyIHNlbGY9dGhpcztmdW5jdGlvbiBjbG9zZSgpe2RlYnVnKFwid3JpdGluZyBjbG9zZSBwYWNrZXRcIik7c2VsZi53cml0ZShbe3R5cGU6XCJjbG9zZVwifV0pfWlmKFwib3BlblwiPT10aGlzLnJlYWR5U3RhdGUpe2RlYnVnKFwidHJhbnNwb3J0IG9wZW4gLSBjbG9zaW5nXCIpO2Nsb3NlKCl9ZWxzZXtkZWJ1ZyhcInRyYW5zcG9ydCBub3Qgb3BlbiAtIGRlZmVycmluZyBjbG9zZVwiKTt0aGlzLm9uY2UoXCJvcGVuXCIsY2xvc2UpfX07UG9sbGluZy5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24ocGFja2V0cyl7dmFyIHNlbGY9dGhpczt0aGlzLndyaXRhYmxlPWZhbHNlO3ZhciBjYWxsYmFja2ZuPWZ1bmN0aW9uKCl7c2VsZi53cml0YWJsZT10cnVlO3NlbGYuZW1pdChcImRyYWluXCIpfTt2YXIgc2VsZj10aGlzO3BhcnNlci5lbmNvZGVQYXlsb2FkKHBhY2tldHMsdGhpcy5zdXBwb3J0c0JpbmFyeSxmdW5jdGlvbihkYXRhKXtzZWxmLmRvV3JpdGUoZGF0YSxjYWxsYmFja2ZuKX0pfTtQb2xsaW5nLnByb3RvdHlwZS51cmk9ZnVuY3Rpb24oKXt2YXIgcXVlcnk9dGhpcy5xdWVyeXx8e307dmFyIHNjaGVtYT10aGlzLnNlY3VyZT9cImh0dHBzXCI6XCJodHRwXCI7dmFyIHBvcnQ9XCJcIjtpZihmYWxzZSE9PXRoaXMudGltZXN0YW1wUmVxdWVzdHMpe3F1ZXJ5W3RoaXMudGltZXN0YW1wUGFyYW1dPXllYXN0KCl9aWYoIXRoaXMuc3VwcG9ydHNCaW5hcnkmJiFxdWVyeS5zaWQpe3F1ZXJ5LmI2ND0xfXF1ZXJ5PXBhcnNlcXMuZW5jb2RlKHF1ZXJ5KTtpZih0aGlzLnBvcnQmJihcImh0dHBzXCI9PXNjaGVtYSYmdGhpcy5wb3J0IT00NDN8fFwiaHR0cFwiPT1zY2hlbWEmJnRoaXMucG9ydCE9ODApKXtwb3J0PVwiOlwiK3RoaXMucG9ydH1pZihxdWVyeS5sZW5ndGgpe3F1ZXJ5PVwiP1wiK3F1ZXJ5fXZhciBpcHY2PXRoaXMuaG9zdG5hbWUuaW5kZXhPZihcIjpcIikhPT0tMTtyZXR1cm4gc2NoZW1hK1wiOi8vXCIrKGlwdjY/XCJbXCIrdGhpcy5ob3N0bmFtZStcIl1cIjp0aGlzLmhvc3RuYW1lKStwb3J0K3RoaXMucGF0aCtxdWVyeX19LHtcIi4uL3RyYW5zcG9ydFwiOjQsXCJjb21wb25lbnQtaW5oZXJpdFwiOjE2LGRlYnVnOjE3LFwiZW5naW5lLmlvLXBhcnNlclwiOjE5LHBhcnNlcXM6MjcsXCJ4bWxodHRwcmVxdWVzdC1zc2xcIjoxMCx5ZWFzdDozMH1dLDk6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpeyhmdW5jdGlvbihnbG9iYWwpe3ZhciBUcmFuc3BvcnQ9X2RlcmVxXyhcIi4uL3RyYW5zcG9ydFwiKTt2YXIgcGFyc2VyPV9kZXJlcV8oXCJlbmdpbmUuaW8tcGFyc2VyXCIpO3ZhciBwYXJzZXFzPV9kZXJlcV8oXCJwYXJzZXFzXCIpO3ZhciBpbmhlcml0PV9kZXJlcV8oXCJjb21wb25lbnQtaW5oZXJpdFwiKTt2YXIgeWVhc3Q9X2RlcmVxXyhcInllYXN0XCIpO3ZhciBkZWJ1Zz1fZGVyZXFfKFwiZGVidWdcIikoXCJlbmdpbmUuaW8tY2xpZW50OndlYnNvY2tldFwiKTt2YXIgQnJvd3NlcldlYlNvY2tldD1nbG9iYWwuV2ViU29ja2V0fHxnbG9iYWwuTW96V2ViU29ja2V0O3ZhciBXZWJTb2NrZXQ9QnJvd3NlcldlYlNvY2tldDtpZighV2ViU29ja2V0JiZ0eXBlb2Ygd2luZG93PT09XCJ1bmRlZmluZWRcIil7dHJ5e1dlYlNvY2tldD1fZGVyZXFfKFwid3NcIil9Y2F0Y2goZSl7fX1tb2R1bGUuZXhwb3J0cz1XUztmdW5jdGlvbiBXUyhvcHRzKXt2YXIgZm9yY2VCYXNlNjQ9b3B0cyYmb3B0cy5mb3JjZUJhc2U2NDtpZihmb3JjZUJhc2U2NCl7dGhpcy5zdXBwb3J0c0JpbmFyeT1mYWxzZX10aGlzLnBlck1lc3NhZ2VEZWZsYXRlPW9wdHMucGVyTWVzc2FnZURlZmxhdGU7VHJhbnNwb3J0LmNhbGwodGhpcyxvcHRzKX1pbmhlcml0KFdTLFRyYW5zcG9ydCk7V1MucHJvdG90eXBlLm5hbWU9XCJ3ZWJzb2NrZXRcIjtXUy5wcm90b3R5cGUuc3VwcG9ydHNCaW5hcnk9dHJ1ZTtXUy5wcm90b3R5cGUuZG9PcGVuPWZ1bmN0aW9uKCl7aWYoIXRoaXMuY2hlY2soKSl7cmV0dXJufXZhciBzZWxmPXRoaXM7dmFyIHVyaT10aGlzLnVyaSgpO3ZhciBwcm90b2NvbHM9dm9pZCAwO3ZhciBvcHRzPXthZ2VudDp0aGlzLmFnZW50LHBlck1lc3NhZ2VEZWZsYXRlOnRoaXMucGVyTWVzc2FnZURlZmxhdGV9O29wdHMucGZ4PXRoaXMucGZ4O29wdHMua2V5PXRoaXMua2V5O29wdHMucGFzc3BocmFzZT10aGlzLnBhc3NwaHJhc2U7b3B0cy5jZXJ0PXRoaXMuY2VydDtvcHRzLmNhPXRoaXMuY2E7b3B0cy5jaXBoZXJzPXRoaXMuY2lwaGVycztvcHRzLnJlamVjdFVuYXV0aG9yaXplZD10aGlzLnJlamVjdFVuYXV0aG9yaXplZDtpZih0aGlzLmV4dHJhSGVhZGVycyl7b3B0cy5oZWFkZXJzPXRoaXMuZXh0cmFIZWFkZXJzfXRoaXMud3M9QnJvd3NlcldlYlNvY2tldD9uZXcgV2ViU29ja2V0KHVyaSk6bmV3IFdlYlNvY2tldCh1cmkscHJvdG9jb2xzLG9wdHMpO2lmKHRoaXMud3MuYmluYXJ5VHlwZT09PXVuZGVmaW5lZCl7dGhpcy5zdXBwb3J0c0JpbmFyeT1mYWxzZX1pZih0aGlzLndzLnN1cHBvcnRzJiZ0aGlzLndzLnN1cHBvcnRzLmJpbmFyeSl7dGhpcy5zdXBwb3J0c0JpbmFyeT10cnVlO3RoaXMud3MuYmluYXJ5VHlwZT1cImJ1ZmZlclwifWVsc2V7dGhpcy53cy5iaW5hcnlUeXBlPVwiYXJyYXlidWZmZXJcIn10aGlzLmFkZEV2ZW50TGlzdGVuZXJzKCl9O1dTLnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVycz1mdW5jdGlvbigpe3ZhciBzZWxmPXRoaXM7dGhpcy53cy5vbm9wZW49ZnVuY3Rpb24oKXtzZWxmLm9uT3BlbigpfTt0aGlzLndzLm9uY2xvc2U9ZnVuY3Rpb24oKXtzZWxmLm9uQ2xvc2UoKX07dGhpcy53cy5vbm1lc3NhZ2U9ZnVuY3Rpb24oZXYpe3NlbGYub25EYXRhKGV2LmRhdGEpfTt0aGlzLndzLm9uZXJyb3I9ZnVuY3Rpb24oZSl7c2VsZi5vbkVycm9yKFwid2Vic29ja2V0IGVycm9yXCIsZSl9fTtpZihcInVuZGVmaW5lZFwiIT10eXBlb2YgbmF2aWdhdG9yJiYvaVBhZHxpUGhvbmV8aVBvZC9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpe1dTLnByb3RvdHlwZS5vbkRhdGE9ZnVuY3Rpb24oZGF0YSl7dmFyIHNlbGY9dGhpcztzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7VHJhbnNwb3J0LnByb3RvdHlwZS5vbkRhdGEuY2FsbChzZWxmLGRhdGEpfSwwKX19V1MucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKHBhY2tldHMpe3ZhciBzZWxmPXRoaXM7dGhpcy53cml0YWJsZT1mYWxzZTt2YXIgdG90YWw9cGFja2V0cy5sZW5ndGg7Zm9yKHZhciBpPTAsbD10b3RhbDtpPGw7aSsrKXsoZnVuY3Rpb24ocGFja2V0KXtwYXJzZXIuZW5jb2RlUGFja2V0KHBhY2tldCxzZWxmLnN1cHBvcnRzQmluYXJ5LGZ1bmN0aW9uKGRhdGEpe2lmKCFCcm93c2VyV2ViU29ja2V0KXt2YXIgb3B0cz17fTtpZihwYWNrZXQub3B0aW9ucyl7b3B0cy5jb21wcmVzcz1wYWNrZXQub3B0aW9ucy5jb21wcmVzc31pZihzZWxmLnBlck1lc3NhZ2VEZWZsYXRlKXt2YXIgbGVuPVwic3RyaW5nXCI9PXR5cGVvZiBkYXRhP2dsb2JhbC5CdWZmZXIuYnl0ZUxlbmd0aChkYXRhKTpkYXRhLmxlbmd0aDtpZihsZW48c2VsZi5wZXJNZXNzYWdlRGVmbGF0ZS50aHJlc2hvbGQpe29wdHMuY29tcHJlc3M9ZmFsc2V9fX10cnl7aWYoQnJvd3NlcldlYlNvY2tldCl7c2VsZi53cy5zZW5kKGRhdGEpfWVsc2V7c2VsZi53cy5zZW5kKGRhdGEsb3B0cyl9fWNhdGNoKGUpe2RlYnVnKFwid2Vic29ja2V0IGNsb3NlZCBiZWZvcmUgb25jbG9zZSBldmVudFwiKX0tLXRvdGFsfHxkb25lKCl9KX0pKHBhY2tldHNbaV0pfWZ1bmN0aW9uIGRvbmUoKXtzZWxmLmVtaXQoXCJmbHVzaFwiKTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7c2VsZi53cml0YWJsZT10cnVlO3NlbGYuZW1pdChcImRyYWluXCIpfSwwKX19O1dTLnByb3RvdHlwZS5vbkNsb3NlPWZ1bmN0aW9uKCl7VHJhbnNwb3J0LnByb3RvdHlwZS5vbkNsb3NlLmNhbGwodGhpcyl9O1dTLnByb3RvdHlwZS5kb0Nsb3NlPWZ1bmN0aW9uKCl7aWYodHlwZW9mIHRoaXMud3MhPT1cInVuZGVmaW5lZFwiKXt0aGlzLndzLmNsb3NlKCl9fTtXUy5wcm90b3R5cGUudXJpPWZ1bmN0aW9uKCl7dmFyIHF1ZXJ5PXRoaXMucXVlcnl8fHt9O3ZhciBzY2hlbWE9dGhpcy5zZWN1cmU/XCJ3c3NcIjpcIndzXCI7dmFyIHBvcnQ9XCJcIjtpZih0aGlzLnBvcnQmJihcIndzc1wiPT1zY2hlbWEmJnRoaXMucG9ydCE9NDQzfHxcIndzXCI9PXNjaGVtYSYmdGhpcy5wb3J0IT04MCkpe3BvcnQ9XCI6XCIrdGhpcy5wb3J0fWlmKHRoaXMudGltZXN0YW1wUmVxdWVzdHMpe3F1ZXJ5W3RoaXMudGltZXN0YW1wUGFyYW1dPXllYXN0KCl9aWYoIXRoaXMuc3VwcG9ydHNCaW5hcnkpe3F1ZXJ5LmI2ND0xfXF1ZXJ5PXBhcnNlcXMuZW5jb2RlKHF1ZXJ5KTtpZihxdWVyeS5sZW5ndGgpe3F1ZXJ5PVwiP1wiK3F1ZXJ5fXZhciBpcHY2PXRoaXMuaG9zdG5hbWUuaW5kZXhPZihcIjpcIikhPT0tMTtyZXR1cm4gc2NoZW1hK1wiOi8vXCIrKGlwdjY/XCJbXCIrdGhpcy5ob3N0bmFtZStcIl1cIjp0aGlzLmhvc3RuYW1lKStwb3J0K3RoaXMucGF0aCtxdWVyeX07V1MucHJvdG90eXBlLmNoZWNrPWZ1bmN0aW9uKCl7cmV0dXJuISFXZWJTb2NrZXQmJiEoXCJfX2luaXRpYWxpemVcImluIFdlYlNvY2tldCYmdGhpcy5uYW1lPT09V1MucHJvdG90eXBlLm5hbWUpfX0pLmNhbGwodGhpcyx0eXBlb2Ygc2VsZiE9PVwidW5kZWZpbmVkXCI/c2VsZjp0eXBlb2Ygd2luZG93IT09XCJ1bmRlZmluZWRcIj93aW5kb3c6dHlwZW9mIGdsb2JhbCE9PVwidW5kZWZpbmVkXCI/Z2xvYmFsOnt9KX0se1wiLi4vdHJhbnNwb3J0XCI6NCxcImNvbXBvbmVudC1pbmhlcml0XCI6MTYsZGVidWc6MTcsXCJlbmdpbmUuaW8tcGFyc2VyXCI6MTkscGFyc2VxczoyNyx3czp1bmRlZmluZWQseWVhc3Q6MzB9XSwxMDpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7dmFyIGhhc0NPUlM9X2RlcmVxXyhcImhhcy1jb3JzXCIpO21vZHVsZS5leHBvcnRzPWZ1bmN0aW9uKG9wdHMpe3ZhciB4ZG9tYWluPW9wdHMueGRvbWFpbjt2YXIgeHNjaGVtZT1vcHRzLnhzY2hlbWU7dmFyIGVuYWJsZXNYRFI9b3B0cy5lbmFibGVzWERSO3RyeXtpZihcInVuZGVmaW5lZFwiIT10eXBlb2YgWE1MSHR0cFJlcXVlc3QmJigheGRvbWFpbnx8aGFzQ09SUykpe3JldHVybiBuZXcgWE1MSHR0cFJlcXVlc3R9fWNhdGNoKGUpe310cnl7aWYoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIFhEb21haW5SZXF1ZXN0JiYheHNjaGVtZSYmZW5hYmxlc1hEUil7cmV0dXJuIG5ldyBYRG9tYWluUmVxdWVzdH19Y2F0Y2goZSl7fWlmKCF4ZG9tYWluKXt0cnl7cmV0dXJuIG5ldyBBY3RpdmVYT2JqZWN0KFwiTWljcm9zb2Z0LlhNTEhUVFBcIil9Y2F0Y2goZSl7fX19fSx7XCJoYXMtY29yc1wiOjIyfV0sMTE6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe21vZHVsZS5leHBvcnRzPWFmdGVyO2Z1bmN0aW9uIGFmdGVyKGNvdW50LGNhbGxiYWNrLGVycl9jYil7dmFyIGJhaWw9ZmFsc2U7ZXJyX2NiPWVycl9jYnx8bm9vcDtwcm94eS5jb3VudD1jb3VudDtyZXR1cm4gY291bnQ9PT0wP2NhbGxiYWNrKCk6cHJveHk7ZnVuY3Rpb24gcHJveHkoZXJyLHJlc3VsdCl7aWYocHJveHkuY291bnQ8PTApe3Rocm93IG5ldyBFcnJvcihcImFmdGVyIGNhbGxlZCB0b28gbWFueSB0aW1lc1wiKX0tLXByb3h5LmNvdW50O2lmKGVycil7YmFpbD10cnVlO2NhbGxiYWNrKGVycik7Y2FsbGJhY2s9ZXJyX2NifWVsc2UgaWYocHJveHkuY291bnQ9PT0wJiYhYmFpbCl7Y2FsbGJhY2sobnVsbCxyZXN1bHQpfX19ZnVuY3Rpb24gbm9vcCgpe319LHt9XSwxMjpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24oYXJyYXlidWZmZXIsc3RhcnQsZW5kKXt2YXIgYnl0ZXM9YXJyYXlidWZmZXIuYnl0ZUxlbmd0aDtzdGFydD1zdGFydHx8MDtlbmQ9ZW5kfHxieXRlcztpZihhcnJheWJ1ZmZlci5zbGljZSl7cmV0dXJuIGFycmF5YnVmZmVyLnNsaWNlKHN0YXJ0LGVuZCl9aWYoc3RhcnQ8MCl7c3RhcnQrPWJ5dGVzfWlmKGVuZDwwKXtlbmQrPWJ5dGVzfWlmKGVuZD5ieXRlcyl7ZW5kPWJ5dGVzfWlmKHN0YXJ0Pj1ieXRlc3x8c3RhcnQ+PWVuZHx8Ynl0ZXM9PT0wKXtyZXR1cm4gbmV3IEFycmF5QnVmZmVyKDApfXZhciBhYnY9bmV3IFVpbnQ4QXJyYXkoYXJyYXlidWZmZXIpO3ZhciByZXN1bHQ9bmV3IFVpbnQ4QXJyYXkoZW5kLXN0YXJ0KTtmb3IodmFyIGk9c3RhcnQsaWk9MDtpPGVuZDtpKyssaWkrKyl7cmVzdWx0W2lpXT1hYnZbaV19cmV0dXJuIHJlc3VsdC5idWZmZXJ9fSx7fV0sMTM6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpeyhmdW5jdGlvbihjaGFycyl7XCJ1c2Ugc3RyaWN0XCI7ZXhwb3J0cy5lbmNvZGU9ZnVuY3Rpb24oYXJyYXlidWZmZXIpe3ZhciBieXRlcz1uZXcgVWludDhBcnJheShhcnJheWJ1ZmZlciksaSxsZW49Ynl0ZXMubGVuZ3RoLGJhc2U2ND1cIlwiO2ZvcihpPTA7aTxsZW47aSs9Myl7YmFzZTY0Kz1jaGFyc1tieXRlc1tpXT4+Ml07XG5iYXNlNjQrPWNoYXJzWyhieXRlc1tpXSYzKTw8NHxieXRlc1tpKzFdPj40XTtiYXNlNjQrPWNoYXJzWyhieXRlc1tpKzFdJjE1KTw8MnxieXRlc1tpKzJdPj42XTtiYXNlNjQrPWNoYXJzW2J5dGVzW2krMl0mNjNdfWlmKGxlbiUzPT09Mil7YmFzZTY0PWJhc2U2NC5zdWJzdHJpbmcoMCxiYXNlNjQubGVuZ3RoLTEpK1wiPVwifWVsc2UgaWYobGVuJTM9PT0xKXtiYXNlNjQ9YmFzZTY0LnN1YnN0cmluZygwLGJhc2U2NC5sZW5ndGgtMikrXCI9PVwifXJldHVybiBiYXNlNjR9O2V4cG9ydHMuZGVjb2RlPWZ1bmN0aW9uKGJhc2U2NCl7dmFyIGJ1ZmZlckxlbmd0aD1iYXNlNjQubGVuZ3RoKi43NSxsZW49YmFzZTY0Lmxlbmd0aCxpLHA9MCxlbmNvZGVkMSxlbmNvZGVkMixlbmNvZGVkMyxlbmNvZGVkNDtpZihiYXNlNjRbYmFzZTY0Lmxlbmd0aC0xXT09PVwiPVwiKXtidWZmZXJMZW5ndGgtLTtpZihiYXNlNjRbYmFzZTY0Lmxlbmd0aC0yXT09PVwiPVwiKXtidWZmZXJMZW5ndGgtLX19dmFyIGFycmF5YnVmZmVyPW5ldyBBcnJheUJ1ZmZlcihidWZmZXJMZW5ndGgpLGJ5dGVzPW5ldyBVaW50OEFycmF5KGFycmF5YnVmZmVyKTtmb3IoaT0wO2k8bGVuO2krPTQpe2VuY29kZWQxPWNoYXJzLmluZGV4T2YoYmFzZTY0W2ldKTtlbmNvZGVkMj1jaGFycy5pbmRleE9mKGJhc2U2NFtpKzFdKTtlbmNvZGVkMz1jaGFycy5pbmRleE9mKGJhc2U2NFtpKzJdKTtlbmNvZGVkND1jaGFycy5pbmRleE9mKGJhc2U2NFtpKzNdKTtieXRlc1twKytdPWVuY29kZWQxPDwyfGVuY29kZWQyPj40O2J5dGVzW3ArK109KGVuY29kZWQyJjE1KTw8NHxlbmNvZGVkMz4+MjtieXRlc1twKytdPShlbmNvZGVkMyYzKTw8NnxlbmNvZGVkNCY2M31yZXR1cm4gYXJyYXlidWZmZXJ9fSkoXCJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvXCIpfSx7fV0sMTQ6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpeyhmdW5jdGlvbihnbG9iYWwpe3ZhciBCbG9iQnVpbGRlcj1nbG9iYWwuQmxvYkJ1aWxkZXJ8fGdsb2JhbC5XZWJLaXRCbG9iQnVpbGRlcnx8Z2xvYmFsLk1TQmxvYkJ1aWxkZXJ8fGdsb2JhbC5Nb3pCbG9iQnVpbGRlcjt2YXIgYmxvYlN1cHBvcnRlZD1mdW5jdGlvbigpe3RyeXt2YXIgYT1uZXcgQmxvYihbXCJoaVwiXSk7cmV0dXJuIGEuc2l6ZT09PTJ9Y2F0Y2goZSl7cmV0dXJuIGZhbHNlfX0oKTt2YXIgYmxvYlN1cHBvcnRzQXJyYXlCdWZmZXJWaWV3PWJsb2JTdXBwb3J0ZWQmJmZ1bmN0aW9uKCl7dHJ5e3ZhciBiPW5ldyBCbG9iKFtuZXcgVWludDhBcnJheShbMSwyXSldKTtyZXR1cm4gYi5zaXplPT09Mn1jYXRjaChlKXtyZXR1cm4gZmFsc2V9fSgpO3ZhciBibG9iQnVpbGRlclN1cHBvcnRlZD1CbG9iQnVpbGRlciYmQmxvYkJ1aWxkZXIucHJvdG90eXBlLmFwcGVuZCYmQmxvYkJ1aWxkZXIucHJvdG90eXBlLmdldEJsb2I7ZnVuY3Rpb24gbWFwQXJyYXlCdWZmZXJWaWV3cyhhcnkpe2Zvcih2YXIgaT0wO2k8YXJ5Lmxlbmd0aDtpKyspe3ZhciBjaHVuaz1hcnlbaV07aWYoY2h1bmsuYnVmZmVyIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpe3ZhciBidWY9Y2h1bmsuYnVmZmVyO2lmKGNodW5rLmJ5dGVMZW5ndGghPT1idWYuYnl0ZUxlbmd0aCl7dmFyIGNvcHk9bmV3IFVpbnQ4QXJyYXkoY2h1bmsuYnl0ZUxlbmd0aCk7Y29weS5zZXQobmV3IFVpbnQ4QXJyYXkoYnVmLGNodW5rLmJ5dGVPZmZzZXQsY2h1bmsuYnl0ZUxlbmd0aCkpO2J1Zj1jb3B5LmJ1ZmZlcn1hcnlbaV09YnVmfX19ZnVuY3Rpb24gQmxvYkJ1aWxkZXJDb25zdHJ1Y3Rvcihhcnksb3B0aW9ucyl7b3B0aW9ucz1vcHRpb25zfHx7fTt2YXIgYmI9bmV3IEJsb2JCdWlsZGVyO21hcEFycmF5QnVmZmVyVmlld3MoYXJ5KTtmb3IodmFyIGk9MDtpPGFyeS5sZW5ndGg7aSsrKXtiYi5hcHBlbmQoYXJ5W2ldKX1yZXR1cm4gb3B0aW9ucy50eXBlP2JiLmdldEJsb2Iob3B0aW9ucy50eXBlKTpiYi5nZXRCbG9iKCl9ZnVuY3Rpb24gQmxvYkNvbnN0cnVjdG9yKGFyeSxvcHRpb25zKXttYXBBcnJheUJ1ZmZlclZpZXdzKGFyeSk7cmV0dXJuIG5ldyBCbG9iKGFyeSxvcHRpb25zfHx7fSl9bW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24oKXtpZihibG9iU3VwcG9ydGVkKXtyZXR1cm4gYmxvYlN1cHBvcnRzQXJyYXlCdWZmZXJWaWV3P2dsb2JhbC5CbG9iOkJsb2JDb25zdHJ1Y3Rvcn1lbHNlIGlmKGJsb2JCdWlsZGVyU3VwcG9ydGVkKXtyZXR1cm4gQmxvYkJ1aWxkZXJDb25zdHJ1Y3Rvcn1lbHNle3JldHVybiB1bmRlZmluZWR9fSgpfSkuY2FsbCh0aGlzLHR5cGVvZiBzZWxmIT09XCJ1bmRlZmluZWRcIj9zZWxmOnR5cGVvZiB3aW5kb3chPT1cInVuZGVmaW5lZFwiP3dpbmRvdzp0eXBlb2YgZ2xvYmFsIT09XCJ1bmRlZmluZWRcIj9nbG9iYWw6e30pfSx7fV0sMTU6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe21vZHVsZS5leHBvcnRzPUVtaXR0ZXI7ZnVuY3Rpb24gRW1pdHRlcihvYmope2lmKG9iailyZXR1cm4gbWl4aW4ob2JqKX1mdW5jdGlvbiBtaXhpbihvYmope2Zvcih2YXIga2V5IGluIEVtaXR0ZXIucHJvdG90eXBlKXtvYmpba2V5XT1FbWl0dGVyLnByb3RvdHlwZVtrZXldfXJldHVybiBvYmp9RW1pdHRlci5wcm90b3R5cGUub249RW1pdHRlci5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbihldmVudCxmbil7dGhpcy5fY2FsbGJhY2tzPXRoaXMuX2NhbGxiYWNrc3x8e307KHRoaXMuX2NhbGxiYWNrc1tldmVudF09dGhpcy5fY2FsbGJhY2tzW2V2ZW50XXx8W10pLnB1c2goZm4pO3JldHVybiB0aGlzfTtFbWl0dGVyLnByb3RvdHlwZS5vbmNlPWZ1bmN0aW9uKGV2ZW50LGZuKXt2YXIgc2VsZj10aGlzO3RoaXMuX2NhbGxiYWNrcz10aGlzLl9jYWxsYmFja3N8fHt9O2Z1bmN0aW9uIG9uKCl7c2VsZi5vZmYoZXZlbnQsb24pO2ZuLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1vbi5mbj1mbjt0aGlzLm9uKGV2ZW50LG9uKTtyZXR1cm4gdGhpc307RW1pdHRlci5wcm90b3R5cGUub2ZmPUVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyPUVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUFsbExpc3RlbmVycz1FbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyPWZ1bmN0aW9uKGV2ZW50LGZuKXt0aGlzLl9jYWxsYmFja3M9dGhpcy5fY2FsbGJhY2tzfHx7fTtpZigwPT1hcmd1bWVudHMubGVuZ3RoKXt0aGlzLl9jYWxsYmFja3M9e307cmV0dXJuIHRoaXN9dmFyIGNhbGxiYWNrcz10aGlzLl9jYWxsYmFja3NbZXZlbnRdO2lmKCFjYWxsYmFja3MpcmV0dXJuIHRoaXM7aWYoMT09YXJndW1lbnRzLmxlbmd0aCl7ZGVsZXRlIHRoaXMuX2NhbGxiYWNrc1tldmVudF07cmV0dXJuIHRoaXN9dmFyIGNiO2Zvcih2YXIgaT0wO2k8Y2FsbGJhY2tzLmxlbmd0aDtpKyspe2NiPWNhbGxiYWNrc1tpXTtpZihjYj09PWZufHxjYi5mbj09PWZuKXtjYWxsYmFja3Muc3BsaWNlKGksMSk7YnJlYWt9fXJldHVybiB0aGlzfTtFbWl0dGVyLnByb3RvdHlwZS5lbWl0PWZ1bmN0aW9uKGV2ZW50KXt0aGlzLl9jYWxsYmFja3M9dGhpcy5fY2FsbGJhY2tzfHx7fTt2YXIgYXJncz1bXS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKSxjYWxsYmFja3M9dGhpcy5fY2FsbGJhY2tzW2V2ZW50XTtpZihjYWxsYmFja3Mpe2NhbGxiYWNrcz1jYWxsYmFja3Muc2xpY2UoMCk7Zm9yKHZhciBpPTAsbGVuPWNhbGxiYWNrcy5sZW5ndGg7aTxsZW47KytpKXtjYWxsYmFja3NbaV0uYXBwbHkodGhpcyxhcmdzKX19cmV0dXJuIHRoaXN9O0VtaXR0ZXIucHJvdG90eXBlLmxpc3RlbmVycz1mdW5jdGlvbihldmVudCl7dGhpcy5fY2FsbGJhY2tzPXRoaXMuX2NhbGxiYWNrc3x8e307cmV0dXJuIHRoaXMuX2NhbGxiYWNrc1tldmVudF18fFtdfTtFbWl0dGVyLnByb3RvdHlwZS5oYXNMaXN0ZW5lcnM9ZnVuY3Rpb24oZXZlbnQpe3JldHVybiEhdGhpcy5saXN0ZW5lcnMoZXZlbnQpLmxlbmd0aH19LHt9XSwxNjpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24oYSxiKXt2YXIgZm49ZnVuY3Rpb24oKXt9O2ZuLnByb3RvdHlwZT1iLnByb3RvdHlwZTthLnByb3RvdHlwZT1uZXcgZm47YS5wcm90b3R5cGUuY29uc3RydWN0b3I9YX19LHt9XSwxNzpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7ZXhwb3J0cz1tb2R1bGUuZXhwb3J0cz1fZGVyZXFfKFwiLi9kZWJ1Z1wiKTtleHBvcnRzLmxvZz1sb2c7ZXhwb3J0cy5mb3JtYXRBcmdzPWZvcm1hdEFyZ3M7ZXhwb3J0cy5zYXZlPXNhdmU7ZXhwb3J0cy5sb2FkPWxvYWQ7ZXhwb3J0cy51c2VDb2xvcnM9dXNlQ29sb3JzO2V4cG9ydHMuc3RvcmFnZT1cInVuZGVmaW5lZFwiIT10eXBlb2YgY2hyb21lJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgY2hyb21lLnN0b3JhZ2U/Y2hyb21lLnN0b3JhZ2UubG9jYWw6bG9jYWxzdG9yYWdlKCk7ZXhwb3J0cy5jb2xvcnM9W1wibGlnaHRzZWFncmVlblwiLFwiZm9yZXN0Z3JlZW5cIixcImdvbGRlbnJvZFwiLFwiZG9kZ2VyYmx1ZVwiLFwiZGFya29yY2hpZFwiLFwiY3JpbXNvblwiXTtmdW5jdGlvbiB1c2VDb2xvcnMoKXtyZXR1cm5cIldlYmtpdEFwcGVhcmFuY2VcImluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZXx8d2luZG93LmNvbnNvbGUmJihjb25zb2xlLmZpcmVidWd8fGNvbnNvbGUuZXhjZXB0aW9uJiZjb25zb2xlLnRhYmxlKXx8bmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLm1hdGNoKC9maXJlZm94XFwvKFxcZCspLykmJnBhcnNlSW50KFJlZ0V4cC4kMSwxMCk+PTMxfWV4cG9ydHMuZm9ybWF0dGVycy5qPWZ1bmN0aW9uKHYpe3JldHVybiBKU09OLnN0cmluZ2lmeSh2KX07ZnVuY3Rpb24gZm9ybWF0QXJncygpe3ZhciBhcmdzPWFyZ3VtZW50czt2YXIgdXNlQ29sb3JzPXRoaXMudXNlQ29sb3JzO2FyZ3NbMF09KHVzZUNvbG9ycz9cIiVjXCI6XCJcIikrdGhpcy5uYW1lc3BhY2UrKHVzZUNvbG9ycz9cIiAlY1wiOlwiIFwiKSthcmdzWzBdKyh1c2VDb2xvcnM/XCIlYyBcIjpcIiBcIikrXCIrXCIrZXhwb3J0cy5odW1hbml6ZSh0aGlzLmRpZmYpO2lmKCF1c2VDb2xvcnMpcmV0dXJuIGFyZ3M7dmFyIGM9XCJjb2xvcjogXCIrdGhpcy5jb2xvcjthcmdzPVthcmdzWzBdLGMsXCJjb2xvcjogaW5oZXJpdFwiXS5jb25jYXQoQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJncywxKSk7dmFyIGluZGV4PTA7dmFyIGxhc3RDPTA7YXJnc1swXS5yZXBsYWNlKC8lW2EteiVdL2csZnVuY3Rpb24obWF0Y2gpe2lmKFwiJSVcIj09PW1hdGNoKXJldHVybjtpbmRleCsrO2lmKFwiJWNcIj09PW1hdGNoKXtsYXN0Qz1pbmRleH19KTthcmdzLnNwbGljZShsYXN0QywwLGMpO3JldHVybiBhcmdzfWZ1bmN0aW9uIGxvZygpe3JldHVyblwib2JqZWN0XCI9PT10eXBlb2YgY29uc29sZSYmY29uc29sZS5sb2cmJkZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseS5jYWxsKGNvbnNvbGUubG9nLGNvbnNvbGUsYXJndW1lbnRzKX1mdW5jdGlvbiBzYXZlKG5hbWVzcGFjZXMpe3RyeXtpZihudWxsPT1uYW1lc3BhY2VzKXtleHBvcnRzLnN0b3JhZ2UucmVtb3ZlSXRlbShcImRlYnVnXCIpfWVsc2V7ZXhwb3J0cy5zdG9yYWdlLmRlYnVnPW5hbWVzcGFjZXN9fWNhdGNoKGUpe319ZnVuY3Rpb24gbG9hZCgpe3ZhciByO3RyeXtyPWV4cG9ydHMuc3RvcmFnZS5kZWJ1Z31jYXRjaChlKXt9cmV0dXJuIHJ9ZXhwb3J0cy5lbmFibGUobG9hZCgpKTtmdW5jdGlvbiBsb2NhbHN0b3JhZ2UoKXt0cnl7cmV0dXJuIHdpbmRvdy5sb2NhbFN0b3JhZ2V9Y2F0Y2goZSl7fX19LHtcIi4vZGVidWdcIjoxOH1dLDE4OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtleHBvcnRzPW1vZHVsZS5leHBvcnRzPWRlYnVnO2V4cG9ydHMuY29lcmNlPWNvZXJjZTtleHBvcnRzLmRpc2FibGU9ZGlzYWJsZTtleHBvcnRzLmVuYWJsZT1lbmFibGU7ZXhwb3J0cy5lbmFibGVkPWVuYWJsZWQ7ZXhwb3J0cy5odW1hbml6ZT1fZGVyZXFfKFwibXNcIik7ZXhwb3J0cy5uYW1lcz1bXTtleHBvcnRzLnNraXBzPVtdO2V4cG9ydHMuZm9ybWF0dGVycz17fTt2YXIgcHJldkNvbG9yPTA7dmFyIHByZXZUaW1lO2Z1bmN0aW9uIHNlbGVjdENvbG9yKCl7cmV0dXJuIGV4cG9ydHMuY29sb3JzW3ByZXZDb2xvcisrJWV4cG9ydHMuY29sb3JzLmxlbmd0aF19ZnVuY3Rpb24gZGVidWcobmFtZXNwYWNlKXtmdW5jdGlvbiBkaXNhYmxlZCgpe31kaXNhYmxlZC5lbmFibGVkPWZhbHNlO2Z1bmN0aW9uIGVuYWJsZWQoKXt2YXIgc2VsZj1lbmFibGVkO3ZhciBjdXJyPStuZXcgRGF0ZTt2YXIgbXM9Y3Vyci0ocHJldlRpbWV8fGN1cnIpO3NlbGYuZGlmZj1tcztzZWxmLnByZXY9cHJldlRpbWU7c2VsZi5jdXJyPWN1cnI7cHJldlRpbWU9Y3VycjtpZihudWxsPT1zZWxmLnVzZUNvbG9ycylzZWxmLnVzZUNvbG9ycz1leHBvcnRzLnVzZUNvbG9ycygpO2lmKG51bGw9PXNlbGYuY29sb3ImJnNlbGYudXNlQ29sb3JzKXNlbGYuY29sb3I9c2VsZWN0Q29sb3IoKTt2YXIgYXJncz1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO2FyZ3NbMF09ZXhwb3J0cy5jb2VyY2UoYXJnc1swXSk7aWYoXCJzdHJpbmdcIiE9PXR5cGVvZiBhcmdzWzBdKXthcmdzPVtcIiVvXCJdLmNvbmNhdChhcmdzKX12YXIgaW5kZXg9MDthcmdzWzBdPWFyZ3NbMF0ucmVwbGFjZSgvJShbYS16JV0pL2csZnVuY3Rpb24obWF0Y2gsZm9ybWF0KXtpZihtYXRjaD09PVwiJSVcIilyZXR1cm4gbWF0Y2g7aW5kZXgrKzt2YXIgZm9ybWF0dGVyPWV4cG9ydHMuZm9ybWF0dGVyc1tmb3JtYXRdO2lmKFwiZnVuY3Rpb25cIj09PXR5cGVvZiBmb3JtYXR0ZXIpe3ZhciB2YWw9YXJnc1tpbmRleF07bWF0Y2g9Zm9ybWF0dGVyLmNhbGwoc2VsZix2YWwpO2FyZ3Muc3BsaWNlKGluZGV4LDEpO2luZGV4LS19cmV0dXJuIG1hdGNofSk7aWYoXCJmdW5jdGlvblwiPT09dHlwZW9mIGV4cG9ydHMuZm9ybWF0QXJncyl7YXJncz1leHBvcnRzLmZvcm1hdEFyZ3MuYXBwbHkoc2VsZixhcmdzKX12YXIgbG9nRm49ZW5hYmxlZC5sb2d8fGV4cG9ydHMubG9nfHxjb25zb2xlLmxvZy5iaW5kKGNvbnNvbGUpO2xvZ0ZuLmFwcGx5KHNlbGYsYXJncyl9ZW5hYmxlZC5lbmFibGVkPXRydWU7dmFyIGZuPWV4cG9ydHMuZW5hYmxlZChuYW1lc3BhY2UpP2VuYWJsZWQ6ZGlzYWJsZWQ7Zm4ubmFtZXNwYWNlPW5hbWVzcGFjZTtyZXR1cm4gZm59ZnVuY3Rpb24gZW5hYmxlKG5hbWVzcGFjZXMpe2V4cG9ydHMuc2F2ZShuYW1lc3BhY2VzKTt2YXIgc3BsaXQ9KG5hbWVzcGFjZXN8fFwiXCIpLnNwbGl0KC9bXFxzLF0rLyk7dmFyIGxlbj1zcGxpdC5sZW5ndGg7Zm9yKHZhciBpPTA7aTxsZW47aSsrKXtpZighc3BsaXRbaV0pY29udGludWU7bmFtZXNwYWNlcz1zcGxpdFtpXS5yZXBsYWNlKC9cXCovZyxcIi4qP1wiKTtpZihuYW1lc3BhY2VzWzBdPT09XCItXCIpe2V4cG9ydHMuc2tpcHMucHVzaChuZXcgUmVnRXhwKFwiXlwiK25hbWVzcGFjZXMuc3Vic3RyKDEpK1wiJFwiKSl9ZWxzZXtleHBvcnRzLm5hbWVzLnB1c2gobmV3IFJlZ0V4cChcIl5cIituYW1lc3BhY2VzK1wiJFwiKSl9fX1mdW5jdGlvbiBkaXNhYmxlKCl7ZXhwb3J0cy5lbmFibGUoXCJcIil9ZnVuY3Rpb24gZW5hYmxlZChuYW1lKXt2YXIgaSxsZW47Zm9yKGk9MCxsZW49ZXhwb3J0cy5za2lwcy5sZW5ndGg7aTxsZW47aSsrKXtpZihleHBvcnRzLnNraXBzW2ldLnRlc3QobmFtZSkpe3JldHVybiBmYWxzZX19Zm9yKGk9MCxsZW49ZXhwb3J0cy5uYW1lcy5sZW5ndGg7aTxsZW47aSsrKXtpZihleHBvcnRzLm5hbWVzW2ldLnRlc3QobmFtZSkpe3JldHVybiB0cnVlfX1yZXR1cm4gZmFsc2V9ZnVuY3Rpb24gY29lcmNlKHZhbCl7aWYodmFsIGluc3RhbmNlb2YgRXJyb3IpcmV0dXJuIHZhbC5zdGFja3x8dmFsLm1lc3NhZ2U7cmV0dXJuIHZhbH19LHttczoyNX1dLDE5OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXsoZnVuY3Rpb24oZ2xvYmFsKXt2YXIga2V5cz1fZGVyZXFfKFwiLi9rZXlzXCIpO3ZhciBoYXNCaW5hcnk9X2RlcmVxXyhcImhhcy1iaW5hcnlcIik7dmFyIHNsaWNlQnVmZmVyPV9kZXJlcV8oXCJhcnJheWJ1ZmZlci5zbGljZVwiKTt2YXIgYmFzZTY0ZW5jb2Rlcj1fZGVyZXFfKFwiYmFzZTY0LWFycmF5YnVmZmVyXCIpO3ZhciBhZnRlcj1fZGVyZXFfKFwiYWZ0ZXJcIik7dmFyIHV0Zjg9X2RlcmVxXyhcInV0ZjhcIik7dmFyIGlzQW5kcm9pZD1uYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9BbmRyb2lkL2kpO3ZhciBpc1BoYW50b21KUz0vUGhhbnRvbUpTL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTt2YXIgZG9udFNlbmRCbG9icz1pc0FuZHJvaWR8fGlzUGhhbnRvbUpTO2V4cG9ydHMucHJvdG9jb2w9Mzt2YXIgcGFja2V0cz1leHBvcnRzLnBhY2tldHM9e29wZW46MCxjbG9zZToxLHBpbmc6Mixwb25nOjMsbWVzc2FnZTo0LHVwZ3JhZGU6NSxub29wOjZ9O3ZhciBwYWNrZXRzbGlzdD1rZXlzKHBhY2tldHMpO3ZhciBlcnI9e3R5cGU6XCJlcnJvclwiLGRhdGE6XCJwYXJzZXIgZXJyb3JcIn07dmFyIEJsb2I9X2RlcmVxXyhcImJsb2JcIik7ZXhwb3J0cy5lbmNvZGVQYWNrZXQ9ZnVuY3Rpb24ocGFja2V0LHN1cHBvcnRzQmluYXJ5LHV0ZjhlbmNvZGUsY2FsbGJhY2spe2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIHN1cHBvcnRzQmluYXJ5KXtjYWxsYmFjaz1zdXBwb3J0c0JpbmFyeTtzdXBwb3J0c0JpbmFyeT1mYWxzZX1pZihcImZ1bmN0aW9uXCI9PXR5cGVvZiB1dGY4ZW5jb2RlKXtjYWxsYmFjaz11dGY4ZW5jb2RlO3V0ZjhlbmNvZGU9bnVsbH12YXIgZGF0YT1wYWNrZXQuZGF0YT09PXVuZGVmaW5lZD91bmRlZmluZWQ6cGFja2V0LmRhdGEuYnVmZmVyfHxwYWNrZXQuZGF0YTtpZihnbG9iYWwuQXJyYXlCdWZmZXImJmRhdGEgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcil7cmV0dXJuIGVuY29kZUFycmF5QnVmZmVyKHBhY2tldCxzdXBwb3J0c0JpbmFyeSxjYWxsYmFjayl9ZWxzZSBpZihCbG9iJiZkYXRhIGluc3RhbmNlb2YgZ2xvYmFsLkJsb2Ipe3JldHVybiBlbmNvZGVCbG9iKHBhY2tldCxzdXBwb3J0c0JpbmFyeSxjYWxsYmFjayl9aWYoZGF0YSYmZGF0YS5iYXNlNjQpe3JldHVybiBlbmNvZGVCYXNlNjRPYmplY3QocGFja2V0LGNhbGxiYWNrKX12YXIgZW5jb2RlZD1wYWNrZXRzW3BhY2tldC50eXBlXTtpZih1bmRlZmluZWQhPT1wYWNrZXQuZGF0YSl7ZW5jb2RlZCs9dXRmOGVuY29kZT91dGY4LmVuY29kZShTdHJpbmcocGFja2V0LmRhdGEpKTpTdHJpbmcocGFja2V0LmRhdGEpfXJldHVybiBjYWxsYmFjayhcIlwiK2VuY29kZWQpfTtmdW5jdGlvbiBlbmNvZGVCYXNlNjRPYmplY3QocGFja2V0LGNhbGxiYWNrKXt2YXIgbWVzc2FnZT1cImJcIitleHBvcnRzLnBhY2tldHNbcGFja2V0LnR5cGVdK3BhY2tldC5kYXRhLmRhdGE7cmV0dXJuIGNhbGxiYWNrKG1lc3NhZ2UpfWZ1bmN0aW9uIGVuY29kZUFycmF5QnVmZmVyKHBhY2tldCxzdXBwb3J0c0JpbmFyeSxjYWxsYmFjayl7aWYoIXN1cHBvcnRzQmluYXJ5KXtyZXR1cm4gZXhwb3J0cy5lbmNvZGVCYXNlNjRQYWNrZXQocGFja2V0LGNhbGxiYWNrKX12YXIgZGF0YT1wYWNrZXQuZGF0YTt2YXIgY29udGVudEFycmF5PW5ldyBVaW50OEFycmF5KGRhdGEpO3ZhciByZXN1bHRCdWZmZXI9bmV3IFVpbnQ4QXJyYXkoMStkYXRhLmJ5dGVMZW5ndGgpO3Jlc3VsdEJ1ZmZlclswXT1wYWNrZXRzW3BhY2tldC50eXBlXTtmb3IodmFyIGk9MDtpPGNvbnRlbnRBcnJheS5sZW5ndGg7aSsrKXtyZXN1bHRCdWZmZXJbaSsxXT1jb250ZW50QXJyYXlbaV19cmV0dXJuIGNhbGxiYWNrKHJlc3VsdEJ1ZmZlci5idWZmZXIpfWZ1bmN0aW9uIGVuY29kZUJsb2JBc0FycmF5QnVmZmVyKHBhY2tldCxzdXBwb3J0c0JpbmFyeSxjYWxsYmFjayl7aWYoIXN1cHBvcnRzQmluYXJ5KXtyZXR1cm4gZXhwb3J0cy5lbmNvZGVCYXNlNjRQYWNrZXQocGFja2V0LGNhbGxiYWNrKX12YXIgZnI9bmV3IEZpbGVSZWFkZXI7ZnIub25sb2FkPWZ1bmN0aW9uKCl7cGFja2V0LmRhdGE9ZnIucmVzdWx0O2V4cG9ydHMuZW5jb2RlUGFja2V0KHBhY2tldCxzdXBwb3J0c0JpbmFyeSx0cnVlLGNhbGxiYWNrKX07cmV0dXJuIGZyLnJlYWRBc0FycmF5QnVmZmVyKHBhY2tldC5kYXRhKX1mdW5jdGlvbiBlbmNvZGVCbG9iKHBhY2tldCxzdXBwb3J0c0JpbmFyeSxjYWxsYmFjayl7aWYoIXN1cHBvcnRzQmluYXJ5KXtyZXR1cm4gZXhwb3J0cy5lbmNvZGVCYXNlNjRQYWNrZXQocGFja2V0LGNhbGxiYWNrKX1pZihkb250U2VuZEJsb2JzKXtyZXR1cm4gZW5jb2RlQmxvYkFzQXJyYXlCdWZmZXIocGFja2V0LHN1cHBvcnRzQmluYXJ5LGNhbGxiYWNrKX12YXIgbGVuZ3RoPW5ldyBVaW50OEFycmF5KDEpO2xlbmd0aFswXT1wYWNrZXRzW3BhY2tldC50eXBlXTt2YXIgYmxvYj1uZXcgQmxvYihbbGVuZ3RoLmJ1ZmZlcixwYWNrZXQuZGF0YV0pO3JldHVybiBjYWxsYmFjayhibG9iKX1leHBvcnRzLmVuY29kZUJhc2U2NFBhY2tldD1mdW5jdGlvbihwYWNrZXQsY2FsbGJhY2spe3ZhciBtZXNzYWdlPVwiYlwiK2V4cG9ydHMucGFja2V0c1twYWNrZXQudHlwZV07aWYoQmxvYiYmcGFja2V0LmRhdGEgaW5zdGFuY2VvZiBnbG9iYWwuQmxvYil7dmFyIGZyPW5ldyBGaWxlUmVhZGVyO2ZyLm9ubG9hZD1mdW5jdGlvbigpe3ZhciBiNjQ9ZnIucmVzdWx0LnNwbGl0KFwiLFwiKVsxXTtjYWxsYmFjayhtZXNzYWdlK2I2NCl9O3JldHVybiBmci5yZWFkQXNEYXRhVVJMKHBhY2tldC5kYXRhKX12YXIgYjY0ZGF0YTt0cnl7YjY0ZGF0YT1TdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsbmV3IFVpbnQ4QXJyYXkocGFja2V0LmRhdGEpKX1jYXRjaChlKXt2YXIgdHlwZWQ9bmV3IFVpbnQ4QXJyYXkocGFja2V0LmRhdGEpO3ZhciBiYXNpYz1uZXcgQXJyYXkodHlwZWQubGVuZ3RoKTtmb3IodmFyIGk9MDtpPHR5cGVkLmxlbmd0aDtpKyspe2Jhc2ljW2ldPXR5cGVkW2ldfWI2NGRhdGE9U3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLGJhc2ljKX1tZXNzYWdlKz1nbG9iYWwuYnRvYShiNjRkYXRhKTtyZXR1cm4gY2FsbGJhY2sobWVzc2FnZSl9O2V4cG9ydHMuZGVjb2RlUGFja2V0PWZ1bmN0aW9uKGRhdGEsYmluYXJ5VHlwZSx1dGY4ZGVjb2RlKXtpZih0eXBlb2YgZGF0YT09XCJzdHJpbmdcInx8ZGF0YT09PXVuZGVmaW5lZCl7aWYoZGF0YS5jaGFyQXQoMCk9PVwiYlwiKXtyZXR1cm4gZXhwb3J0cy5kZWNvZGVCYXNlNjRQYWNrZXQoZGF0YS5zdWJzdHIoMSksYmluYXJ5VHlwZSl9aWYodXRmOGRlY29kZSl7dHJ5e2RhdGE9dXRmOC5kZWNvZGUoZGF0YSl9Y2F0Y2goZSl7cmV0dXJuIGVycn19dmFyIHR5cGU9ZGF0YS5jaGFyQXQoMCk7aWYoTnVtYmVyKHR5cGUpIT10eXBlfHwhcGFja2V0c2xpc3RbdHlwZV0pe3JldHVybiBlcnJ9aWYoZGF0YS5sZW5ndGg+MSl7cmV0dXJue3R5cGU6cGFja2V0c2xpc3RbdHlwZV0sZGF0YTpkYXRhLnN1YnN0cmluZygxKX19ZWxzZXtyZXR1cm57dHlwZTpwYWNrZXRzbGlzdFt0eXBlXX19fXZhciBhc0FycmF5PW5ldyBVaW50OEFycmF5KGRhdGEpO3ZhciB0eXBlPWFzQXJyYXlbMF07dmFyIHJlc3Q9c2xpY2VCdWZmZXIoZGF0YSwxKTtpZihCbG9iJiZiaW5hcnlUeXBlPT09XCJibG9iXCIpe3Jlc3Q9bmV3IEJsb2IoW3Jlc3RdKX1yZXR1cm57dHlwZTpwYWNrZXRzbGlzdFt0eXBlXSxkYXRhOnJlc3R9fTtleHBvcnRzLmRlY29kZUJhc2U2NFBhY2tldD1mdW5jdGlvbihtc2csYmluYXJ5VHlwZSl7dmFyIHR5cGU9cGFja2V0c2xpc3RbbXNnLmNoYXJBdCgwKV07aWYoIWdsb2JhbC5BcnJheUJ1ZmZlcil7cmV0dXJue3R5cGU6dHlwZSxkYXRhOntiYXNlNjQ6dHJ1ZSxkYXRhOm1zZy5zdWJzdHIoMSl9fX12YXIgZGF0YT1iYXNlNjRlbmNvZGVyLmRlY29kZShtc2cuc3Vic3RyKDEpKTtpZihiaW5hcnlUeXBlPT09XCJibG9iXCImJkJsb2Ipe2RhdGE9bmV3IEJsb2IoW2RhdGFdKX1yZXR1cm57dHlwZTp0eXBlLGRhdGE6ZGF0YX19O2V4cG9ydHMuZW5jb2RlUGF5bG9hZD1mdW5jdGlvbihwYWNrZXRzLHN1cHBvcnRzQmluYXJ5LGNhbGxiYWNrKXtpZih0eXBlb2Ygc3VwcG9ydHNCaW5hcnk9PVwiZnVuY3Rpb25cIil7Y2FsbGJhY2s9c3VwcG9ydHNCaW5hcnk7c3VwcG9ydHNCaW5hcnk9bnVsbH12YXIgaXNCaW5hcnk9aGFzQmluYXJ5KHBhY2tldHMpO2lmKHN1cHBvcnRzQmluYXJ5JiZpc0JpbmFyeSl7aWYoQmxvYiYmIWRvbnRTZW5kQmxvYnMpe3JldHVybiBleHBvcnRzLmVuY29kZVBheWxvYWRBc0Jsb2IocGFja2V0cyxjYWxsYmFjayl9cmV0dXJuIGV4cG9ydHMuZW5jb2RlUGF5bG9hZEFzQXJyYXlCdWZmZXIocGFja2V0cyxjYWxsYmFjayl9aWYoIXBhY2tldHMubGVuZ3RoKXtyZXR1cm4gY2FsbGJhY2soXCIwOlwiKX1mdW5jdGlvbiBzZXRMZW5ndGhIZWFkZXIobWVzc2FnZSl7cmV0dXJuIG1lc3NhZ2UubGVuZ3RoK1wiOlwiK21lc3NhZ2V9ZnVuY3Rpb24gZW5jb2RlT25lKHBhY2tldCxkb25lQ2FsbGJhY2spe2V4cG9ydHMuZW5jb2RlUGFja2V0KHBhY2tldCwhaXNCaW5hcnk/ZmFsc2U6c3VwcG9ydHNCaW5hcnksdHJ1ZSxmdW5jdGlvbihtZXNzYWdlKXtkb25lQ2FsbGJhY2sobnVsbCxzZXRMZW5ndGhIZWFkZXIobWVzc2FnZSkpfSl9bWFwKHBhY2tldHMsZW5jb2RlT25lLGZ1bmN0aW9uKGVycixyZXN1bHRzKXtyZXR1cm4gY2FsbGJhY2socmVzdWx0cy5qb2luKFwiXCIpKX0pfTtmdW5jdGlvbiBtYXAoYXJ5LGVhY2gsZG9uZSl7dmFyIHJlc3VsdD1uZXcgQXJyYXkoYXJ5Lmxlbmd0aCk7dmFyIG5leHQ9YWZ0ZXIoYXJ5Lmxlbmd0aCxkb25lKTt2YXIgZWFjaFdpdGhJbmRleD1mdW5jdGlvbihpLGVsLGNiKXtlYWNoKGVsLGZ1bmN0aW9uKGVycm9yLG1zZyl7cmVzdWx0W2ldPW1zZztjYihlcnJvcixyZXN1bHQpfSl9O2Zvcih2YXIgaT0wO2k8YXJ5Lmxlbmd0aDtpKyspe2VhY2hXaXRoSW5kZXgoaSxhcnlbaV0sbmV4dCl9fWV4cG9ydHMuZGVjb2RlUGF5bG9hZD1mdW5jdGlvbihkYXRhLGJpbmFyeVR5cGUsY2FsbGJhY2spe2lmKHR5cGVvZiBkYXRhIT1cInN0cmluZ1wiKXtyZXR1cm4gZXhwb3J0cy5kZWNvZGVQYXlsb2FkQXNCaW5hcnkoZGF0YSxiaW5hcnlUeXBlLGNhbGxiYWNrKX1pZih0eXBlb2YgYmluYXJ5VHlwZT09PVwiZnVuY3Rpb25cIil7Y2FsbGJhY2s9YmluYXJ5VHlwZTtiaW5hcnlUeXBlPW51bGx9dmFyIHBhY2tldDtpZihkYXRhPT1cIlwiKXtyZXR1cm4gY2FsbGJhY2soZXJyLDAsMSl9dmFyIGxlbmd0aD1cIlwiLG4sbXNnO2Zvcih2YXIgaT0wLGw9ZGF0YS5sZW5ndGg7aTxsO2krKyl7dmFyIGNocj1kYXRhLmNoYXJBdChpKTtpZihcIjpcIiE9Y2hyKXtsZW5ndGgrPWNocn1lbHNle2lmKFwiXCI9PWxlbmd0aHx8bGVuZ3RoIT0obj1OdW1iZXIobGVuZ3RoKSkpe3JldHVybiBjYWxsYmFjayhlcnIsMCwxKX1tc2c9ZGF0YS5zdWJzdHIoaSsxLG4pO2lmKGxlbmd0aCE9bXNnLmxlbmd0aCl7cmV0dXJuIGNhbGxiYWNrKGVyciwwLDEpfWlmKG1zZy5sZW5ndGgpe3BhY2tldD1leHBvcnRzLmRlY29kZVBhY2tldChtc2csYmluYXJ5VHlwZSx0cnVlKTtpZihlcnIudHlwZT09cGFja2V0LnR5cGUmJmVyci5kYXRhPT1wYWNrZXQuZGF0YSl7cmV0dXJuIGNhbGxiYWNrKGVyciwwLDEpfXZhciByZXQ9Y2FsbGJhY2socGFja2V0LGkrbixsKTtpZihmYWxzZT09PXJldClyZXR1cm59aSs9bjtsZW5ndGg9XCJcIn19aWYobGVuZ3RoIT1cIlwiKXtyZXR1cm4gY2FsbGJhY2soZXJyLDAsMSl9fTtleHBvcnRzLmVuY29kZVBheWxvYWRBc0FycmF5QnVmZmVyPWZ1bmN0aW9uKHBhY2tldHMsY2FsbGJhY2spe2lmKCFwYWNrZXRzLmxlbmd0aCl7cmV0dXJuIGNhbGxiYWNrKG5ldyBBcnJheUJ1ZmZlcigwKSl9ZnVuY3Rpb24gZW5jb2RlT25lKHBhY2tldCxkb25lQ2FsbGJhY2spe2V4cG9ydHMuZW5jb2RlUGFja2V0KHBhY2tldCx0cnVlLHRydWUsZnVuY3Rpb24oZGF0YSl7cmV0dXJuIGRvbmVDYWxsYmFjayhudWxsLGRhdGEpfSl9bWFwKHBhY2tldHMsZW5jb2RlT25lLGZ1bmN0aW9uKGVycixlbmNvZGVkUGFja2V0cyl7dmFyIHRvdGFsTGVuZ3RoPWVuY29kZWRQYWNrZXRzLnJlZHVjZShmdW5jdGlvbihhY2MscCl7dmFyIGxlbjtpZih0eXBlb2YgcD09PVwic3RyaW5nXCIpe2xlbj1wLmxlbmd0aH1lbHNle2xlbj1wLmJ5dGVMZW5ndGh9cmV0dXJuIGFjYytsZW4udG9TdHJpbmcoKS5sZW5ndGgrbGVuKzJ9LDApO3ZhciByZXN1bHRBcnJheT1uZXcgVWludDhBcnJheSh0b3RhbExlbmd0aCk7dmFyIGJ1ZmZlckluZGV4PTA7ZW5jb2RlZFBhY2tldHMuZm9yRWFjaChmdW5jdGlvbihwKXt2YXIgaXNTdHJpbmc9dHlwZW9mIHA9PT1cInN0cmluZ1wiO3ZhciBhYj1wO2lmKGlzU3RyaW5nKXt2YXIgdmlldz1uZXcgVWludDhBcnJheShwLmxlbmd0aCk7Zm9yKHZhciBpPTA7aTxwLmxlbmd0aDtpKyspe3ZpZXdbaV09cC5jaGFyQ29kZUF0KGkpfWFiPXZpZXcuYnVmZmVyfWlmKGlzU3RyaW5nKXtyZXN1bHRBcnJheVtidWZmZXJJbmRleCsrXT0wfWVsc2V7cmVzdWx0QXJyYXlbYnVmZmVySW5kZXgrK109MX12YXIgbGVuU3RyPWFiLmJ5dGVMZW5ndGgudG9TdHJpbmcoKTtmb3IodmFyIGk9MDtpPGxlblN0ci5sZW5ndGg7aSsrKXtyZXN1bHRBcnJheVtidWZmZXJJbmRleCsrXT1wYXJzZUludChsZW5TdHJbaV0pfXJlc3VsdEFycmF5W2J1ZmZlckluZGV4KytdPTI1NTt2YXIgdmlldz1uZXcgVWludDhBcnJheShhYik7Zm9yKHZhciBpPTA7aTx2aWV3Lmxlbmd0aDtpKyspe3Jlc3VsdEFycmF5W2J1ZmZlckluZGV4KytdPXZpZXdbaV19fSk7cmV0dXJuIGNhbGxiYWNrKHJlc3VsdEFycmF5LmJ1ZmZlcil9KX07ZXhwb3J0cy5lbmNvZGVQYXlsb2FkQXNCbG9iPWZ1bmN0aW9uKHBhY2tldHMsY2FsbGJhY2spe2Z1bmN0aW9uIGVuY29kZU9uZShwYWNrZXQsZG9uZUNhbGxiYWNrKXtleHBvcnRzLmVuY29kZVBhY2tldChwYWNrZXQsdHJ1ZSx0cnVlLGZ1bmN0aW9uKGVuY29kZWQpe3ZhciBiaW5hcnlJZGVudGlmaWVyPW5ldyBVaW50OEFycmF5KDEpO2JpbmFyeUlkZW50aWZpZXJbMF09MTtpZih0eXBlb2YgZW5jb2RlZD09PVwic3RyaW5nXCIpe3ZhciB2aWV3PW5ldyBVaW50OEFycmF5KGVuY29kZWQubGVuZ3RoKTtmb3IodmFyIGk9MDtpPGVuY29kZWQubGVuZ3RoO2krKyl7dmlld1tpXT1lbmNvZGVkLmNoYXJDb2RlQXQoaSl9ZW5jb2RlZD12aWV3LmJ1ZmZlcjtiaW5hcnlJZGVudGlmaWVyWzBdPTB9dmFyIGxlbj1lbmNvZGVkIGluc3RhbmNlb2YgQXJyYXlCdWZmZXI/ZW5jb2RlZC5ieXRlTGVuZ3RoOmVuY29kZWQuc2l6ZTt2YXIgbGVuU3RyPWxlbi50b1N0cmluZygpO3ZhciBsZW5ndGhBcnk9bmV3IFVpbnQ4QXJyYXkobGVuU3RyLmxlbmd0aCsxKTtmb3IodmFyIGk9MDtpPGxlblN0ci5sZW5ndGg7aSsrKXtsZW5ndGhBcnlbaV09cGFyc2VJbnQobGVuU3RyW2ldKX1sZW5ndGhBcnlbbGVuU3RyLmxlbmd0aF09MjU1O2lmKEJsb2Ipe3ZhciBibG9iPW5ldyBCbG9iKFtiaW5hcnlJZGVudGlmaWVyLmJ1ZmZlcixsZW5ndGhBcnkuYnVmZmVyLGVuY29kZWRdKTtkb25lQ2FsbGJhY2sobnVsbCxibG9iKX19KX1tYXAocGFja2V0cyxlbmNvZGVPbmUsZnVuY3Rpb24oZXJyLHJlc3VsdHMpe3JldHVybiBjYWxsYmFjayhuZXcgQmxvYihyZXN1bHRzKSl9KX07ZXhwb3J0cy5kZWNvZGVQYXlsb2FkQXNCaW5hcnk9ZnVuY3Rpb24oZGF0YSxiaW5hcnlUeXBlLGNhbGxiYWNrKXtpZih0eXBlb2YgYmluYXJ5VHlwZT09PVwiZnVuY3Rpb25cIil7Y2FsbGJhY2s9YmluYXJ5VHlwZTtiaW5hcnlUeXBlPW51bGx9dmFyIGJ1ZmZlclRhaWw9ZGF0YTt2YXIgYnVmZmVycz1bXTt2YXIgbnVtYmVyVG9vTG9uZz1mYWxzZTt3aGlsZShidWZmZXJUYWlsLmJ5dGVMZW5ndGg+MCl7dmFyIHRhaWxBcnJheT1uZXcgVWludDhBcnJheShidWZmZXJUYWlsKTt2YXIgaXNTdHJpbmc9dGFpbEFycmF5WzBdPT09MDt2YXIgbXNnTGVuZ3RoPVwiXCI7Zm9yKHZhciBpPTE7O2krKyl7aWYodGFpbEFycmF5W2ldPT0yNTUpYnJlYWs7aWYobXNnTGVuZ3RoLmxlbmd0aD4zMTApe251bWJlclRvb0xvbmc9dHJ1ZTticmVha31tc2dMZW5ndGgrPXRhaWxBcnJheVtpXX1pZihudW1iZXJUb29Mb25nKXJldHVybiBjYWxsYmFjayhlcnIsMCwxKTtidWZmZXJUYWlsPXNsaWNlQnVmZmVyKGJ1ZmZlclRhaWwsMittc2dMZW5ndGgubGVuZ3RoKTttc2dMZW5ndGg9cGFyc2VJbnQobXNnTGVuZ3RoKTt2YXIgbXNnPXNsaWNlQnVmZmVyKGJ1ZmZlclRhaWwsMCxtc2dMZW5ndGgpO2lmKGlzU3RyaW5nKXt0cnl7bXNnPVN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCxuZXcgVWludDhBcnJheShtc2cpKX1jYXRjaChlKXt2YXIgdHlwZWQ9bmV3IFVpbnQ4QXJyYXkobXNnKTttc2c9XCJcIjtmb3IodmFyIGk9MDtpPHR5cGVkLmxlbmd0aDtpKyspe21zZys9U3RyaW5nLmZyb21DaGFyQ29kZSh0eXBlZFtpXSl9fX1idWZmZXJzLnB1c2gobXNnKTtidWZmZXJUYWlsPXNsaWNlQnVmZmVyKGJ1ZmZlclRhaWwsbXNnTGVuZ3RoKX12YXIgdG90YWw9YnVmZmVycy5sZW5ndGg7YnVmZmVycy5mb3JFYWNoKGZ1bmN0aW9uKGJ1ZmZlcixpKXtjYWxsYmFjayhleHBvcnRzLmRlY29kZVBhY2tldChidWZmZXIsYmluYXJ5VHlwZSx0cnVlKSxpLHRvdGFsKX0pfX0pLmNhbGwodGhpcyx0eXBlb2Ygc2VsZiE9PVwidW5kZWZpbmVkXCI/c2VsZjp0eXBlb2Ygd2luZG93IT09XCJ1bmRlZmluZWRcIj93aW5kb3c6dHlwZW9mIGdsb2JhbCE9PVwidW5kZWZpbmVkXCI/Z2xvYmFsOnt9KX0se1wiLi9rZXlzXCI6MjAsYWZ0ZXI6MTEsXCJhcnJheWJ1ZmZlci5zbGljZVwiOjEyLFwiYmFzZTY0LWFycmF5YnVmZmVyXCI6MTMsYmxvYjoxNCxcImhhcy1iaW5hcnlcIjoyMSx1dGY4OjI5fV0sMjA6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe21vZHVsZS5leHBvcnRzPU9iamVjdC5rZXlzfHxmdW5jdGlvbiBrZXlzKG9iail7dmFyIGFycj1bXTt2YXIgaGFzPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7Zm9yKHZhciBpIGluIG9iail7aWYoaGFzLmNhbGwob2JqLGkpKXthcnIucHVzaChpKX19cmV0dXJuIGFycn19LHt9XSwyMTpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7KGZ1bmN0aW9uKGdsb2JhbCl7dmFyIGlzQXJyYXk9X2RlcmVxXyhcImlzYXJyYXlcIik7bW9kdWxlLmV4cG9ydHM9aGFzQmluYXJ5O2Z1bmN0aW9uIGhhc0JpbmFyeShkYXRhKXtmdW5jdGlvbiBfaGFzQmluYXJ5KG9iail7aWYoIW9iailyZXR1cm4gZmFsc2U7aWYoZ2xvYmFsLkJ1ZmZlciYmZ2xvYmFsLkJ1ZmZlci5pc0J1ZmZlcihvYmopfHxnbG9iYWwuQXJyYXlCdWZmZXImJm9iaiBpbnN0YW5jZW9mIEFycmF5QnVmZmVyfHxnbG9iYWwuQmxvYiYmb2JqIGluc3RhbmNlb2YgQmxvYnx8Z2xvYmFsLkZpbGUmJm9iaiBpbnN0YW5jZW9mIEZpbGUpe3JldHVybiB0cnVlfWlmKGlzQXJyYXkob2JqKSl7Zm9yKHZhciBpPTA7aTxvYmoubGVuZ3RoO2krKyl7aWYoX2hhc0JpbmFyeShvYmpbaV0pKXtyZXR1cm4gdHJ1ZX19fWVsc2UgaWYob2JqJiZcIm9iamVjdFwiPT10eXBlb2Ygb2JqKXtpZihvYmoudG9KU09OKXtvYmo9b2JqLnRvSlNPTigpfWZvcih2YXIga2V5IGluIG9iail7aWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaixrZXkpJiZfaGFzQmluYXJ5KG9ialtrZXldKSl7cmV0dXJuIHRydWV9fX1yZXR1cm4gZmFsc2V9cmV0dXJuIF9oYXNCaW5hcnkoZGF0YSl9fSkuY2FsbCh0aGlzLHR5cGVvZiBzZWxmIT09XCJ1bmRlZmluZWRcIj9zZWxmOnR5cGVvZiB3aW5kb3chPT1cInVuZGVmaW5lZFwiP3dpbmRvdzp0eXBlb2YgZ2xvYmFsIT09XCJ1bmRlZmluZWRcIj9nbG9iYWw6e30pfSx7aXNhcnJheToyNH1dLDIyOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXt0cnl7bW9kdWxlLmV4cG9ydHM9dHlwZW9mIFhNTEh0dHBSZXF1ZXN0IT09XCJ1bmRlZmluZWRcIiYmXCJ3aXRoQ3JlZGVudGlhbHNcImluIG5ldyBYTUxIdHRwUmVxdWVzdH1jYXRjaChlcnIpe21vZHVsZS5leHBvcnRzPWZhbHNlfX0se31dLDIzOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXt2YXIgaW5kZXhPZj1bXS5pbmRleE9mO21vZHVsZS5leHBvcnRzPWZ1bmN0aW9uKGFycixvYmope2lmKGluZGV4T2YpcmV0dXJuIGFyci5pbmRleE9mKG9iaik7Zm9yKHZhciBpPTA7aTxhcnIubGVuZ3RoOysraSl7aWYoYXJyW2ldPT09b2JqKXJldHVybiBpfXJldHVybi0xfX0se31dLDI0OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXttb2R1bGUuZXhwb3J0cz1BcnJheS5pc0FycmF5fHxmdW5jdGlvbihhcnIpe3JldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYXJyKT09XCJbb2JqZWN0IEFycmF5XVwifX0se31dLDI1OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXt2YXIgcz0xZTM7dmFyIG09cyo2MDt2YXIgaD1tKjYwO3ZhciBkPWgqMjQ7dmFyIHk9ZCozNjUuMjU7bW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24odmFsLG9wdGlvbnMpe29wdGlvbnM9b3B0aW9uc3x8e307aWYoXCJzdHJpbmdcIj09dHlwZW9mIHZhbClyZXR1cm4gcGFyc2UodmFsKTtyZXR1cm4gb3B0aW9ucy5sb25nP2xvbmcodmFsKTpzaG9ydCh2YWwpfTtmdW5jdGlvbiBwYXJzZShzdHIpe3N0cj1cIlwiK3N0cjtpZihzdHIubGVuZ3RoPjFlNClyZXR1cm47dmFyIG1hdGNoPS9eKCg/OlxcZCspP1xcLj9cXGQrKSAqKG1pbGxpc2Vjb25kcz98bXNlY3M/fG1zfHNlY29uZHM/fHNlY3M/fHN8bWludXRlcz98bWlucz98bXxob3Vycz98aHJzP3xofGRheXM/fGR8eWVhcnM/fHlycz98eSk/JC9pLmV4ZWMoc3RyKTtpZighbWF0Y2gpcmV0dXJuO3ZhciBuPXBhcnNlRmxvYXQobWF0Y2hbMV0pO3ZhciB0eXBlPShtYXRjaFsyXXx8XCJtc1wiKS50b0xvd2VyQ2FzZSgpO3N3aXRjaCh0eXBlKXtjYXNlXCJ5ZWFyc1wiOmNhc2VcInllYXJcIjpjYXNlXCJ5cnNcIjpjYXNlXCJ5clwiOmNhc2VcInlcIjpyZXR1cm4gbip5O2Nhc2VcImRheXNcIjpjYXNlXCJkYXlcIjpjYXNlXCJkXCI6cmV0dXJuIG4qZDtjYXNlXCJob3Vyc1wiOmNhc2VcImhvdXJcIjpjYXNlXCJocnNcIjpjYXNlXCJoclwiOmNhc2VcImhcIjpyZXR1cm4gbipoO2Nhc2VcIm1pbnV0ZXNcIjpjYXNlXCJtaW51dGVcIjpjYXNlXCJtaW5zXCI6Y2FzZVwibWluXCI6Y2FzZVwibVwiOnJldHVybiBuKm07Y2FzZVwic2Vjb25kc1wiOmNhc2VcInNlY29uZFwiOmNhc2VcInNlY3NcIjpjYXNlXCJzZWNcIjpjYXNlXCJzXCI6cmV0dXJuIG4qcztjYXNlXCJtaWxsaXNlY29uZHNcIjpjYXNlXCJtaWxsaXNlY29uZFwiOmNhc2VcIm1zZWNzXCI6Y2FzZVwibXNlY1wiOmNhc2VcIm1zXCI6cmV0dXJuIG59fWZ1bmN0aW9uIHNob3J0KG1zKXtpZihtcz49ZClyZXR1cm4gTWF0aC5yb3VuZChtcy9kKStcImRcIjtpZihtcz49aClyZXR1cm4gTWF0aC5yb3VuZChtcy9oKStcImhcIjtpZihtcz49bSlyZXR1cm4gTWF0aC5yb3VuZChtcy9tKStcIm1cIjtpZihtcz49cylyZXR1cm4gTWF0aC5yb3VuZChtcy9zKStcInNcIjtyZXR1cm4gbXMrXCJtc1wifWZ1bmN0aW9uIGxvbmcobXMpe3JldHVybiBwbHVyYWwobXMsZCxcImRheVwiKXx8cGx1cmFsKG1zLGgsXCJob3VyXCIpfHxwbHVyYWwobXMsbSxcIm1pbnV0ZVwiKXx8cGx1cmFsKG1zLHMsXCJzZWNvbmRcIil8fG1zK1wiIG1zXCJ9ZnVuY3Rpb24gcGx1cmFsKG1zLG4sbmFtZSl7aWYobXM8bilyZXR1cm47aWYobXM8bioxLjUpcmV0dXJuIE1hdGguZmxvb3IobXMvbikrXCIgXCIrbmFtZTtyZXR1cm4gTWF0aC5jZWlsKG1zL24pK1wiIFwiK25hbWUrXCJzXCJ9fSx7fV0sMjY6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpeyhmdW5jdGlvbihnbG9iYWwpe3ZhciBydmFsaWRjaGFycz0vXltcXF0sOnt9XFxzXSokLzt2YXIgcnZhbGlkZXNjYXBlPS9cXFxcKD86W1wiXFxcXFxcL2JmbnJ0XXx1WzAtOWEtZkEtRl17NH0pL2c7dmFyIHJ2YWxpZHRva2Vucz0vXCJbXlwiXFxcXFxcblxccl0qXCJ8dHJ1ZXxmYWxzZXxudWxsfC0/XFxkKyg/OlxcLlxcZCopPyg/OltlRV1bK1xcLV0/XFxkKyk/L2c7dmFyIHJ2YWxpZGJyYWNlcz0vKD86Xnw6fCwpKD86XFxzKlxcWykrL2c7dmFyIHJ0cmltTGVmdD0vXlxccysvO3ZhciBydHJpbVJpZ2h0PS9cXHMrJC87bW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24gcGFyc2Vqc29uKGRhdGEpe2lmKFwic3RyaW5nXCIhPXR5cGVvZiBkYXRhfHwhZGF0YSl7cmV0dXJuIG51bGx9ZGF0YT1kYXRhLnJlcGxhY2UocnRyaW1MZWZ0LFwiXCIpLnJlcGxhY2UocnRyaW1SaWdodCxcIlwiKTtpZihnbG9iYWwuSlNPTiYmSlNPTi5wYXJzZSl7cmV0dXJuIEpTT04ucGFyc2UoZGF0YSl9aWYocnZhbGlkY2hhcnMudGVzdChkYXRhLnJlcGxhY2UocnZhbGlkZXNjYXBlLFwiQFwiKS5yZXBsYWNlKHJ2YWxpZHRva2VucyxcIl1cIikucmVwbGFjZShydmFsaWRicmFjZXMsXCJcIikpKXtyZXR1cm4gbmV3IEZ1bmN0aW9uKFwicmV0dXJuIFwiK2RhdGEpKCl9fX0pLmNhbGwodGhpcyx0eXBlb2Ygc2VsZiE9PVwidW5kZWZpbmVkXCI/c2VsZjp0eXBlb2Ygd2luZG93IT09XCJ1bmRlZmluZWRcIj93aW5kb3c6dHlwZW9mIGdsb2JhbCE9PVwidW5kZWZpbmVkXCI/Z2xvYmFsOnt9KX0se31dLDI3OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtleHBvcnRzLmVuY29kZT1mdW5jdGlvbihvYmope3ZhciBzdHI9XCJcIjtmb3IodmFyIGkgaW4gb2JqKXtpZihvYmouaGFzT3duUHJvcGVydHkoaSkpe2lmKHN0ci5sZW5ndGgpc3RyKz1cIiZcIjtzdHIrPWVuY29kZVVSSUNvbXBvbmVudChpKStcIj1cIitlbmNvZGVVUklDb21wb25lbnQob2JqW2ldKX19cmV0dXJuIHN0cn07ZXhwb3J0cy5kZWNvZGU9ZnVuY3Rpb24ocXMpe3ZhciBxcnk9e307dmFyIHBhaXJzPXFzLnNwbGl0KFwiJlwiKTtmb3IodmFyIGk9MCxsPXBhaXJzLmxlbmd0aDtpPGw7aSsrKXt2YXIgcGFpcj1wYWlyc1tpXS5zcGxpdChcIj1cIik7cXJ5W2RlY29kZVVSSUNvbXBvbmVudChwYWlyWzBdKV09ZGVjb2RlVVJJQ29tcG9uZW50KHBhaXJbMV0pfXJldHVybiBxcnl9fSx7fV0sMjg6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe3ZhciByZT0vXig/Oig/IVteOkBdKzpbXjpAXFwvXSpAKShodHRwfGh0dHBzfHdzfHdzcyk6XFwvXFwvKT8oKD86KChbXjpAXSopKD86OihbXjpAXSopKT8pP0ApPygoPzpbYS1mMC05XXswLDR9Oil7Miw3fVthLWYwLTldezAsNH18W146XFwvPyNdKikoPzo6KFxcZCopKT8pKCgoXFwvKD86W14/I10oPyFbXj8jXFwvXSpcXC5bXj8jXFwvLl0rKD86Wz8jXXwkKSkpKlxcLz8pPyhbXj8jXFwvXSopKSg/OlxcPyhbXiNdKikpPyg/OiMoLiopKT8pLzt2YXIgcGFydHM9W1wic291cmNlXCIsXCJwcm90b2NvbFwiLFwiYXV0aG9yaXR5XCIsXCJ1c2VySW5mb1wiLFwidXNlclwiLFwicGFzc3dvcmRcIixcImhvc3RcIixcInBvcnRcIixcInJlbGF0aXZlXCIsXCJwYXRoXCIsXCJkaXJlY3RvcnlcIixcImZpbGVcIixcInF1ZXJ5XCIsXCJhbmNob3JcIl07bW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24gcGFyc2V1cmkoc3RyKXt2YXIgc3JjPXN0cixiPXN0ci5pbmRleE9mKFwiW1wiKSxlPXN0ci5pbmRleE9mKFwiXVwiKTtpZihiIT0tMSYmZSE9LTEpe3N0cj1zdHIuc3Vic3RyaW5nKDAsYikrc3RyLnN1YnN0cmluZyhiLGUpLnJlcGxhY2UoLzovZyxcIjtcIikrc3RyLnN1YnN0cmluZyhlLHN0ci5sZW5ndGgpfXZhciBtPXJlLmV4ZWMoc3RyfHxcIlwiKSx1cmk9e30saT0xNDt3aGlsZShpLS0pe3VyaVtwYXJ0c1tpXV09bVtpXXx8XCJcIn1pZihiIT0tMSYmZSE9LTEpe3VyaS5zb3VyY2U9c3JjO3VyaS5ob3N0PXVyaS5ob3N0LnN1YnN0cmluZygxLHVyaS5ob3N0Lmxlbmd0aC0xKS5yZXBsYWNlKC87L2csXCI6XCIpO3VyaS5hdXRob3JpdHk9dXJpLmF1dGhvcml0eS5yZXBsYWNlKFwiW1wiLFwiXCIpLnJlcGxhY2UoXCJdXCIsXCJcIikucmVwbGFjZSgvOy9nLFwiOlwiKTt1cmkuaXB2NnVyaT10cnVlfXJldHVybiB1cml9fSx7fV0sMjk6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpeyhmdW5jdGlvbihnbG9iYWwpeyhmdW5jdGlvbihyb290KXt2YXIgZnJlZUV4cG9ydHM9dHlwZW9mIGV4cG9ydHM9PVwib2JqZWN0XCImJmV4cG9ydHM7dmFyIGZyZWVNb2R1bGU9dHlwZW9mIG1vZHVsZT09XCJvYmplY3RcIiYmbW9kdWxlJiZtb2R1bGUuZXhwb3J0cz09ZnJlZUV4cG9ydHMmJm1vZHVsZTt2YXIgZnJlZUdsb2JhbD10eXBlb2YgZ2xvYmFsPT1cIm9iamVjdFwiJiZnbG9iYWw7aWYoZnJlZUdsb2JhbC5nbG9iYWw9PT1mcmVlR2xvYmFsfHxmcmVlR2xvYmFsLndpbmRvdz09PWZyZWVHbG9iYWwpe3Jvb3Q9ZnJlZUdsb2JhbH12YXIgc3RyaW5nRnJvbUNoYXJDb2RlPVN0cmluZy5mcm9tQ2hhckNvZGU7ZnVuY3Rpb24gdWNzMmRlY29kZShzdHJpbmcpe3ZhciBvdXRwdXQ9W107dmFyIGNvdW50ZXI9MDt2YXIgbGVuZ3RoPXN0cmluZy5sZW5ndGg7dmFyIHZhbHVlO3ZhciBleHRyYTt3aGlsZShjb3VudGVyPGxlbmd0aCl7dmFsdWU9c3RyaW5nLmNoYXJDb2RlQXQoY291bnRlcisrKTtpZih2YWx1ZT49NTUyOTYmJnZhbHVlPD01NjMxOSYmY291bnRlcjxsZW5ndGgpe2V4dHJhPXN0cmluZy5jaGFyQ29kZUF0KGNvdW50ZXIrKyk7aWYoKGV4dHJhJjY0NTEyKT09NTYzMjApe291dHB1dC5wdXNoKCgodmFsdWUmMTAyMyk8PDEwKSsoZXh0cmEmMTAyMykrNjU1MzYpfWVsc2V7b3V0cHV0LnB1c2godmFsdWUpO2NvdW50ZXItLX19ZWxzZXtvdXRwdXQucHVzaCh2YWx1ZSl9fXJldHVybiBvdXRwdXR9ZnVuY3Rpb24gdWNzMmVuY29kZShhcnJheSl7dmFyIGxlbmd0aD1hcnJheS5sZW5ndGg7dmFyIGluZGV4PS0xO3ZhciB2YWx1ZTt2YXIgb3V0cHV0PVwiXCI7d2hpbGUoKytpbmRleDxsZW5ndGgpe3ZhbHVlPWFycmF5W2luZGV4XTtpZih2YWx1ZT42NTUzNSl7dmFsdWUtPTY1NTM2O291dHB1dCs9c3RyaW5nRnJvbUNoYXJDb2RlKHZhbHVlPj4+MTAmMTAyM3w1NTI5Nik7dmFsdWU9NTYzMjB8dmFsdWUmMTAyM31vdXRwdXQrPXN0cmluZ0Zyb21DaGFyQ29kZSh2YWx1ZSl9cmV0dXJuIG91dHB1dH1mdW5jdGlvbiBjaGVja1NjYWxhclZhbHVlKGNvZGVQb2ludCl7aWYoY29kZVBvaW50Pj01NTI5NiYmY29kZVBvaW50PD01NzM0Myl7dGhyb3cgRXJyb3IoXCJMb25lIHN1cnJvZ2F0ZSBVK1wiK2NvZGVQb2ludC50b1N0cmluZygxNikudG9VcHBlckNhc2UoKStcIiBpcyBub3QgYSBzY2FsYXIgdmFsdWVcIil9fWZ1bmN0aW9uIGNyZWF0ZUJ5dGUoY29kZVBvaW50LHNoaWZ0KXtyZXR1cm4gc3RyaW5nRnJvbUNoYXJDb2RlKGNvZGVQb2ludD4+c2hpZnQmNjN8MTI4KX1mdW5jdGlvbiBlbmNvZGVDb2RlUG9pbnQoY29kZVBvaW50KXtpZigoY29kZVBvaW50JjQyOTQ5NjcxNjgpPT0wKXtyZXR1cm4gc3RyaW5nRnJvbUNoYXJDb2RlKGNvZGVQb2ludCl9dmFyIHN5bWJvbD1cIlwiO2lmKChjb2RlUG9pbnQmNDI5NDk2NTI0OCk9PTApe3N5bWJvbD1zdHJpbmdGcm9tQ2hhckNvZGUoY29kZVBvaW50Pj42JjMxfDE5Mil9ZWxzZSBpZigoY29kZVBvaW50JjQyOTQ5MDE3NjApPT0wKXtjaGVja1NjYWxhclZhbHVlKGNvZGVQb2ludCk7c3ltYm9sPXN0cmluZ0Zyb21DaGFyQ29kZShjb2RlUG9pbnQ+PjEyJjE1fDIyNCk7c3ltYm9sKz1jcmVhdGVCeXRlKGNvZGVQb2ludCw2KX1lbHNlIGlmKChjb2RlUG9pbnQmNDI5Mjg3MDE0NCk9PTApe3N5bWJvbD1zdHJpbmdGcm9tQ2hhckNvZGUoY29kZVBvaW50Pj4xOCY3fDI0MCk7c3ltYm9sKz1jcmVhdGVCeXRlKGNvZGVQb2ludCwxMik7c3ltYm9sKz1jcmVhdGVCeXRlKGNvZGVQb2ludCw2KX1zeW1ib2wrPXN0cmluZ0Zyb21DaGFyQ29kZShjb2RlUG9pbnQmNjN8MTI4KTtyZXR1cm4gc3ltYm9sfWZ1bmN0aW9uIHV0ZjhlbmNvZGUoc3RyaW5nKXt2YXIgY29kZVBvaW50cz11Y3MyZGVjb2RlKHN0cmluZyk7dmFyIGxlbmd0aD1jb2RlUG9pbnRzLmxlbmd0aDt2YXIgaW5kZXg9LTE7dmFyIGNvZGVQb2ludDt2YXIgYnl0ZVN0cmluZz1cIlwiO3doaWxlKCsraW5kZXg8bGVuZ3RoKXtjb2RlUG9pbnQ9Y29kZVBvaW50c1tpbmRleF07Ynl0ZVN0cmluZys9ZW5jb2RlQ29kZVBvaW50KGNvZGVQb2ludCl9cmV0dXJuIGJ5dGVTdHJpbmd9ZnVuY3Rpb24gcmVhZENvbnRpbnVhdGlvbkJ5dGUoKXtpZihieXRlSW5kZXg+PWJ5dGVDb3VudCl7dGhyb3cgRXJyb3IoXCJJbnZhbGlkIGJ5dGUgaW5kZXhcIil9dmFyIGNvbnRpbnVhdGlvbkJ5dGU9Ynl0ZUFycmF5W2J5dGVJbmRleF0mMjU1O2J5dGVJbmRleCsrO2lmKChjb250aW51YXRpb25CeXRlJjE5Mik9PTEyOCl7cmV0dXJuIGNvbnRpbnVhdGlvbkJ5dGUmNjN9dGhyb3cgRXJyb3IoXCJJbnZhbGlkIGNvbnRpbnVhdGlvbiBieXRlXCIpfWZ1bmN0aW9uIGRlY29kZVN5bWJvbCgpe3ZhciBieXRlMTt2YXIgYnl0ZTI7dmFyIGJ5dGUzO3ZhciBieXRlNDt2YXIgY29kZVBvaW50O2lmKGJ5dGVJbmRleD5ieXRlQ291bnQpe3Rocm93IEVycm9yKFwiSW52YWxpZCBieXRlIGluZGV4XCIpfWlmKGJ5dGVJbmRleD09Ynl0ZUNvdW50KXtyZXR1cm4gZmFsc2V9Ynl0ZTE9Ynl0ZUFycmF5W2J5dGVJbmRleF0mMjU1O2J5dGVJbmRleCsrO2lmKChieXRlMSYxMjgpPT0wKXtyZXR1cm4gYnl0ZTF9aWYoKGJ5dGUxJjIyNCk9PTE5Mil7dmFyIGJ5dGUyPXJlYWRDb250aW51YXRpb25CeXRlKCk7Y29kZVBvaW50PShieXRlMSYzMSk8PDZ8Ynl0ZTI7aWYoY29kZVBvaW50Pj0xMjgpe3JldHVybiBjb2RlUG9pbnR9ZWxzZXt0aHJvdyBFcnJvcihcIkludmFsaWQgY29udGludWF0aW9uIGJ5dGVcIil9fWlmKChieXRlMSYyNDApPT0yMjQpe2J5dGUyPXJlYWRDb250aW51YXRpb25CeXRlKCk7Ynl0ZTM9cmVhZENvbnRpbnVhdGlvbkJ5dGUoKTtjb2RlUG9pbnQ9KGJ5dGUxJjE1KTw8MTJ8Ynl0ZTI8PDZ8Ynl0ZTM7aWYoY29kZVBvaW50Pj0yMDQ4KXtjaGVja1NjYWxhclZhbHVlKGNvZGVQb2ludCk7cmV0dXJuIGNvZGVQb2ludH1lbHNle3Rocm93IEVycm9yKFwiSW52YWxpZCBjb250aW51YXRpb24gYnl0ZVwiKX19aWYoKGJ5dGUxJjI0OCk9PTI0MCl7Ynl0ZTI9cmVhZENvbnRpbnVhdGlvbkJ5dGUoKTtieXRlMz1yZWFkQ29udGludWF0aW9uQnl0ZSgpO2J5dGU0PXJlYWRDb250aW51YXRpb25CeXRlKCk7Y29kZVBvaW50PShieXRlMSYxNSk8PDE4fGJ5dGUyPDwxMnxieXRlMzw8NnxieXRlNDtpZihjb2RlUG9pbnQ+PTY1NTM2JiZjb2RlUG9pbnQ8PTExMTQxMTEpe3JldHVybiBjb2RlUG9pbnR9fXRocm93IEVycm9yKFwiSW52YWxpZCBVVEYtOCBkZXRlY3RlZFwiKX12YXIgYnl0ZUFycmF5O3ZhciBieXRlQ291bnQ7dmFyIGJ5dGVJbmRleDtmdW5jdGlvbiB1dGY4ZGVjb2RlKGJ5dGVTdHJpbmcpe2J5dGVBcnJheT11Y3MyZGVjb2RlKGJ5dGVTdHJpbmcpO2J5dGVDb3VudD1ieXRlQXJyYXkubGVuZ3RoO2J5dGVJbmRleD0wO3ZhciBjb2RlUG9pbnRzPVtdO3ZhciB0bXA7d2hpbGUoKHRtcD1kZWNvZGVTeW1ib2woKSkhPT1mYWxzZSl7Y29kZVBvaW50cy5wdXNoKHRtcCl9cmV0dXJuIHVjczJlbmNvZGUoY29kZVBvaW50cyl9dmFyIHV0Zjg9e3ZlcnNpb246XCIyLjAuMFwiLGVuY29kZTp1dGY4ZW5jb2RlLGRlY29kZTp1dGY4ZGVjb2RlfTtpZih0eXBlb2YgZGVmaW5lPT1cImZ1bmN0aW9uXCImJnR5cGVvZiBkZWZpbmUuYW1kPT1cIm9iamVjdFwiJiZkZWZpbmUuYW1kKXtkZWZpbmUoZnVuY3Rpb24oKXtyZXR1cm4gdXRmOH0pfWVsc2UgaWYoZnJlZUV4cG9ydHMmJiFmcmVlRXhwb3J0cy5ub2RlVHlwZSl7aWYoZnJlZU1vZHVsZSl7ZnJlZU1vZHVsZS5leHBvcnRzPXV0Zjh9ZWxzZXt2YXIgb2JqZWN0PXt9O3ZhciBoYXNPd25Qcm9wZXJ0eT1vYmplY3QuaGFzT3duUHJvcGVydHk7Zm9yKHZhciBrZXkgaW4gdXRmOCl7aGFzT3duUHJvcGVydHkuY2FsbCh1dGY4LGtleSkmJihmcmVlRXhwb3J0c1trZXldPXV0Zjhba2V5XSl9fX1lbHNle3Jvb3QudXRmOD11dGY4fX0pKHRoaXMpfSkuY2FsbCh0aGlzLHR5cGVvZiBzZWxmIT09XCJ1bmRlZmluZWRcIj9zZWxmOnR5cGVvZiB3aW5kb3chPT1cInVuZGVmaW5lZFwiP3dpbmRvdzp0eXBlb2YgZ2xvYmFsIT09XCJ1bmRlZmluZWRcIj9nbG9iYWw6e30pfSx7fV0sMzA6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1widXNlIHN0cmljdFwiO3ZhciBhbHBoYWJldD1cIjAxMjM0NTY3ODlBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6LV9cIi5zcGxpdChcIlwiKSxsZW5ndGg9NjQsbWFwPXt9LHNlZWQ9MCxpPTAscHJldjtmdW5jdGlvbiBlbmNvZGUobnVtKXt2YXIgZW5jb2RlZD1cIlwiO2Rve2VuY29kZWQ9YWxwaGFiZXRbbnVtJWxlbmd0aF0rZW5jb2RlZDtudW09TWF0aC5mbG9vcihudW0vbGVuZ3RoKX13aGlsZShudW0+MCk7cmV0dXJuIGVuY29kZWR9ZnVuY3Rpb24gZGVjb2RlKHN0cil7dmFyIGRlY29kZWQ9MDtmb3IoaT0wO2k8c3RyLmxlbmd0aDtpKyspe2RlY29kZWQ9ZGVjb2RlZCpsZW5ndGgrbWFwW3N0ci5jaGFyQXQoaSldfXJldHVybiBkZWNvZGVkfWZ1bmN0aW9uIHllYXN0KCl7dmFyIG5vdz1lbmNvZGUoK25ldyBEYXRlKTtpZihub3chPT1wcmV2KXJldHVybiBzZWVkPTAscHJldj1ub3c7cmV0dXJuIG5vdytcIi5cIitlbmNvZGUoc2VlZCsrKX1mb3IoO2k8bGVuZ3RoO2krKyltYXBbYWxwaGFiZXRbaV1dPWk7eWVhc3QuZW5jb2RlPWVuY29kZTt5ZWFzdC5kZWNvZGU9ZGVjb2RlO21vZHVsZS5leHBvcnRzPXllYXN0fSx7fV0sMzE6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe3ZhciB1cmw9X2RlcmVxXyhcIi4vdXJsXCIpO3ZhciBwYXJzZXI9X2RlcmVxXyhcInNvY2tldC5pby1wYXJzZXJcIik7dmFyIE1hbmFnZXI9X2RlcmVxXyhcIi4vbWFuYWdlclwiKTt2YXIgZGVidWc9X2RlcmVxXyhcImRlYnVnXCIpKFwic29ja2V0LmlvLWNsaWVudFwiKTttb2R1bGUuZXhwb3J0cz1leHBvcnRzPWxvb2t1cDt2YXIgY2FjaGU9ZXhwb3J0cy5tYW5hZ2Vycz17fTtmdW5jdGlvbiBsb29rdXAodXJpLG9wdHMpe2lmKHR5cGVvZiB1cmk9PVwib2JqZWN0XCIpe29wdHM9dXJpO3VyaT11bmRlZmluZWR9b3B0cz1vcHRzfHx7fTt2YXIgcGFyc2VkPXVybCh1cmkpO3ZhciBzb3VyY2U9cGFyc2VkLnNvdXJjZTt2YXIgaWQ9cGFyc2VkLmlkO3ZhciBwYXRoPXBhcnNlZC5wYXRoO3ZhciBzYW1lTmFtZXNwYWNlPWNhY2hlW2lkXSYmcGF0aCBpbiBjYWNoZVtpZF0ubnNwczt2YXIgbmV3Q29ubmVjdGlvbj1vcHRzLmZvcmNlTmV3fHxvcHRzW1wiZm9yY2UgbmV3IGNvbm5lY3Rpb25cIl18fGZhbHNlPT09b3B0cy5tdWx0aXBsZXh8fHNhbWVOYW1lc3BhY2U7dmFyIGlvO2lmKG5ld0Nvbm5lY3Rpb24pe2RlYnVnKFwiaWdub3Jpbmcgc29ja2V0IGNhY2hlIGZvciAlc1wiLHNvdXJjZSk7aW89TWFuYWdlcihzb3VyY2Usb3B0cyl9ZWxzZXtpZighY2FjaGVbaWRdKXtkZWJ1ZyhcIm5ldyBpbyBpbnN0YW5jZSBmb3IgJXNcIixzb3VyY2UpO2NhY2hlW2lkXT1NYW5hZ2VyKHNvdXJjZSxvcHRzKX1pbz1jYWNoZVtpZF19cmV0dXJuIGlvLnNvY2tldChwYXJzZWQucGF0aCl9ZXhwb3J0cy5wcm90b2NvbD1wYXJzZXIucHJvdG9jb2w7ZXhwb3J0cy5jb25uZWN0PWxvb2t1cDtleHBvcnRzLk1hbmFnZXI9X2RlcmVxXyhcIi4vbWFuYWdlclwiKTtleHBvcnRzLlNvY2tldD1fZGVyZXFfKFwiLi9zb2NrZXRcIil9LHtcIi4vbWFuYWdlclwiOjMyLFwiLi9zb2NrZXRcIjozNCxcIi4vdXJsXCI6MzUsZGVidWc6MzksXCJzb2NrZXQuaW8tcGFyc2VyXCI6NDd9XSwzMjpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7dmFyIGVpbz1fZGVyZXFfKFwiZW5naW5lLmlvLWNsaWVudFwiKTt2YXIgU29ja2V0PV9kZXJlcV8oXCIuL3NvY2tldFwiKTt2YXIgRW1pdHRlcj1fZGVyZXFfKFwiY29tcG9uZW50LWVtaXR0ZXJcIik7dmFyIHBhcnNlcj1fZGVyZXFfKFwic29ja2V0LmlvLXBhcnNlclwiKTt2YXIgb249X2RlcmVxXyhcIi4vb25cIik7dmFyIGJpbmQ9X2RlcmVxXyhcImNvbXBvbmVudC1iaW5kXCIpO3ZhciBkZWJ1Zz1fZGVyZXFfKFwiZGVidWdcIikoXCJzb2NrZXQuaW8tY2xpZW50Om1hbmFnZXJcIik7dmFyIGluZGV4T2Y9X2RlcmVxXyhcImluZGV4b2ZcIik7dmFyIEJhY2tvZmY9X2RlcmVxXyhcImJhY2tvMlwiKTt2YXIgaGFzPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7bW9kdWxlLmV4cG9ydHM9TWFuYWdlcjtmdW5jdGlvbiBNYW5hZ2VyKHVyaSxvcHRzKXtpZighKHRoaXMgaW5zdGFuY2VvZiBNYW5hZ2VyKSlyZXR1cm4gbmV3IE1hbmFnZXIodXJpLG9wdHMpO2lmKHVyaSYmXCJvYmplY3RcIj09dHlwZW9mIHVyaSl7b3B0cz11cmk7dXJpPXVuZGVmaW5lZH1vcHRzPW9wdHN8fHt9O29wdHMucGF0aD1vcHRzLnBhdGh8fFwiL3NvY2tldC5pb1wiO3RoaXMubnNwcz17fTt0aGlzLnN1YnM9W107dGhpcy5vcHRzPW9wdHM7dGhpcy5yZWNvbm5lY3Rpb24ob3B0cy5yZWNvbm5lY3Rpb24hPT1mYWxzZSk7dGhpcy5yZWNvbm5lY3Rpb25BdHRlbXB0cyhvcHRzLnJlY29ubmVjdGlvbkF0dGVtcHRzfHxJbmZpbml0eSk7dGhpcy5yZWNvbm5lY3Rpb25EZWxheShvcHRzLnJlY29ubmVjdGlvbkRlbGF5fHwxZTMpO3RoaXMucmVjb25uZWN0aW9uRGVsYXlNYXgob3B0cy5yZWNvbm5lY3Rpb25EZWxheU1heHx8NWUzKTt0aGlzLnJhbmRvbWl6YXRpb25GYWN0b3Iob3B0cy5yYW5kb21pemF0aW9uRmFjdG9yfHwuNSk7dGhpcy5iYWNrb2ZmPW5ldyBCYWNrb2ZmKHttaW46dGhpcy5yZWNvbm5lY3Rpb25EZWxheSgpLG1heDp0aGlzLnJlY29ubmVjdGlvbkRlbGF5TWF4KCksaml0dGVyOnRoaXMucmFuZG9taXphdGlvbkZhY3RvcigpfSk7dGhpcy50aW1lb3V0KG51bGw9PW9wdHMudGltZW91dD8yZTQ6b3B0cy50aW1lb3V0KTt0aGlzLnJlYWR5U3RhdGU9XCJjbG9zZWRcIjt0aGlzLnVyaT11cmk7dGhpcy5jb25uZWN0aW5nPVtdO3RoaXMubGFzdFBpbmc9bnVsbDt0aGlzLmVuY29kaW5nPWZhbHNlO3RoaXMucGFja2V0QnVmZmVyPVtdO3RoaXMuZW5jb2Rlcj1uZXcgcGFyc2VyLkVuY29kZXI7dGhpcy5kZWNvZGVyPW5ldyBwYXJzZXIuRGVjb2Rlcjt0aGlzLmF1dG9Db25uZWN0PW9wdHMuYXV0b0Nvbm5lY3QhPT1mYWxzZTtpZih0aGlzLmF1dG9Db25uZWN0KXRoaXMub3BlbigpfU1hbmFnZXIucHJvdG90eXBlLmVtaXRBbGw9ZnVuY3Rpb24oKXt0aGlzLmVtaXQuYXBwbHkodGhpcyxhcmd1bWVudHMpO2Zvcih2YXIgbnNwIGluIHRoaXMubnNwcyl7aWYoaGFzLmNhbGwodGhpcy5uc3BzLG5zcCkpe3RoaXMubnNwc1tuc3BdLmVtaXQuYXBwbHkodGhpcy5uc3BzW25zcF0sYXJndW1lbnRzKX19fTtNYW5hZ2VyLnByb3RvdHlwZS51cGRhdGVTb2NrZXRJZHM9ZnVuY3Rpb24oKXtmb3IodmFyIG5zcCBpbiB0aGlzLm5zcHMpe2lmKGhhcy5jYWxsKHRoaXMubnNwcyxuc3ApKXt0aGlzLm5zcHNbbnNwXS5pZD10aGlzLmVuZ2luZS5pZH19fTtFbWl0dGVyKE1hbmFnZXIucHJvdG90eXBlKTtNYW5hZ2VyLnByb3RvdHlwZS5yZWNvbm5lY3Rpb249ZnVuY3Rpb24odil7aWYoIWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIHRoaXMuX3JlY29ubmVjdGlvbjt0aGlzLl9yZWNvbm5lY3Rpb249ISF2O3JldHVybiB0aGlzfTtNYW5hZ2VyLnByb3RvdHlwZS5yZWNvbm5lY3Rpb25BdHRlbXB0cz1mdW5jdGlvbih2KXtpZighYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gdGhpcy5fcmVjb25uZWN0aW9uQXR0ZW1wdHM7dGhpcy5fcmVjb25uZWN0aW9uQXR0ZW1wdHM9djtyZXR1cm4gdGhpc307TWFuYWdlci5wcm90b3R5cGUucmVjb25uZWN0aW9uRGVsYXk9ZnVuY3Rpb24odil7aWYoIWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIHRoaXMuX3JlY29ubmVjdGlvbkRlbGF5O3RoaXMuX3JlY29ubmVjdGlvbkRlbGF5PXY7dGhpcy5iYWNrb2ZmJiZ0aGlzLmJhY2tvZmYuc2V0TWluKHYpO3JldHVybiB0aGlzfTtNYW5hZ2VyLnByb3RvdHlwZS5yYW5kb21pemF0aW9uRmFjdG9yPWZ1bmN0aW9uKHYpe2lmKCFhcmd1bWVudHMubGVuZ3RoKXJldHVybiB0aGlzLl9yYW5kb21pemF0aW9uRmFjdG9yO3RoaXMuX3JhbmRvbWl6YXRpb25GYWN0b3I9djt0aGlzLmJhY2tvZmYmJnRoaXMuYmFja29mZi5zZXRKaXR0ZXIodik7cmV0dXJuIHRoaXN9O01hbmFnZXIucHJvdG90eXBlLnJlY29ubmVjdGlvbkRlbGF5TWF4PWZ1bmN0aW9uKHYpe2lmKCFhcmd1bWVudHMubGVuZ3RoKXJldHVybiB0aGlzLl9yZWNvbm5lY3Rpb25EZWxheU1heDt0aGlzLl9yZWNvbm5lY3Rpb25EZWxheU1heD12O3RoaXMuYmFja29mZiYmdGhpcy5iYWNrb2ZmLnNldE1heCh2KTtyZXR1cm4gdGhpc307TWFuYWdlci5wcm90b3R5cGUudGltZW91dD1mdW5jdGlvbih2KXtpZighYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gdGhpcy5fdGltZW91dDt0aGlzLl90aW1lb3V0PXY7cmV0dXJuIHRoaXN9O01hbmFnZXIucHJvdG90eXBlLm1heWJlUmVjb25uZWN0T25PcGVuPWZ1bmN0aW9uKCl7aWYoIXRoaXMucmVjb25uZWN0aW5nJiZ0aGlzLl9yZWNvbm5lY3Rpb24mJnRoaXMuYmFja29mZi5hdHRlbXB0cz09PTApe3RoaXMucmVjb25uZWN0KCl9fTtNYW5hZ2VyLnByb3RvdHlwZS5vcGVuPU1hbmFnZXIucHJvdG90eXBlLmNvbm5lY3Q9ZnVuY3Rpb24oZm4pe2RlYnVnKFwicmVhZHlTdGF0ZSAlc1wiLHRoaXMucmVhZHlTdGF0ZSk7aWYofnRoaXMucmVhZHlTdGF0ZS5pbmRleE9mKFwib3BlblwiKSlyZXR1cm4gdGhpcztkZWJ1ZyhcIm9wZW5pbmcgJXNcIix0aGlzLnVyaSk7dGhpcy5lbmdpbmU9ZWlvKHRoaXMudXJpLHRoaXMub3B0cyk7dmFyIHNvY2tldD10aGlzLmVuZ2luZTt2YXIgc2VsZj10aGlzO3RoaXMucmVhZHlTdGF0ZT1cIm9wZW5pbmdcIjt0aGlzLnNraXBSZWNvbm5lY3Q9ZmFsc2U7dmFyIG9wZW5TdWI9b24oc29ja2V0LFwib3BlblwiLGZ1bmN0aW9uKCl7c2VsZi5vbm9wZW4oKTtmbiYmZm4oKX0pO3ZhciBlcnJvclN1Yj1vbihzb2NrZXQsXCJlcnJvclwiLGZ1bmN0aW9uKGRhdGEpe2RlYnVnKFwiY29ubmVjdF9lcnJvclwiKTtzZWxmLmNsZWFudXAoKTtzZWxmLnJlYWR5U3RhdGU9XCJjbG9zZWRcIjtzZWxmLmVtaXRBbGwoXCJjb25uZWN0X2Vycm9yXCIsZGF0YSk7aWYoZm4pe3ZhciBlcnI9bmV3IEVycm9yKFwiQ29ubmVjdGlvbiBlcnJvclwiKTtlcnIuZGF0YT1kYXRhO2ZuKGVycil9ZWxzZXtzZWxmLm1heWJlUmVjb25uZWN0T25PcGVuKCl9fSk7aWYoZmFsc2UhPT10aGlzLl90aW1lb3V0KXt2YXIgdGltZW91dD10aGlzLl90aW1lb3V0O2RlYnVnKFwiY29ubmVjdCBhdHRlbXB0IHdpbGwgdGltZW91dCBhZnRlciAlZFwiLHRpbWVvdXQpO3ZhciB0aW1lcj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZGVidWcoXCJjb25uZWN0IGF0dGVtcHQgdGltZWQgb3V0IGFmdGVyICVkXCIsdGltZW91dCk7b3BlblN1Yi5kZXN0cm95KCk7c29ja2V0LmNsb3NlKCk7c29ja2V0LmVtaXQoXCJlcnJvclwiLFwidGltZW91dFwiKTtzZWxmLmVtaXRBbGwoXCJjb25uZWN0X3RpbWVvdXRcIix0aW1lb3V0KX0sdGltZW91dCk7dGhpcy5zdWJzLnB1c2goe2Rlc3Ryb3k6ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQodGltZXIpfX0pfXRoaXMuc3Vicy5wdXNoKG9wZW5TdWIpO3RoaXMuc3Vicy5wdXNoKGVycm9yU3ViKTtyZXR1cm4gdGhpc307TWFuYWdlci5wcm90b3R5cGUub25vcGVuPWZ1bmN0aW9uKCl7ZGVidWcoXCJvcGVuXCIpO3RoaXMuY2xlYW51cCgpO3RoaXMucmVhZHlTdGF0ZT1cIm9wZW5cIjt0aGlzLmVtaXQoXCJvcGVuXCIpO3ZhciBzb2NrZXQ9dGhpcy5lbmdpbmU7dGhpcy5zdWJzLnB1c2gob24oc29ja2V0LFwiZGF0YVwiLGJpbmQodGhpcyxcIm9uZGF0YVwiKSkpO3RoaXMuc3Vicy5wdXNoKG9uKHNvY2tldCxcInBpbmdcIixiaW5kKHRoaXMsXCJvbnBpbmdcIikpKTt0aGlzLnN1YnMucHVzaChvbihzb2NrZXQsXCJwb25nXCIsYmluZCh0aGlzLFwib25wb25nXCIpKSk7dGhpcy5zdWJzLnB1c2gob24oc29ja2V0LFwiZXJyb3JcIixiaW5kKHRoaXMsXCJvbmVycm9yXCIpKSk7dGhpcy5zdWJzLnB1c2gob24oc29ja2V0LFwiY2xvc2VcIixiaW5kKHRoaXMsXCJvbmNsb3NlXCIpKSk7dGhpcy5zdWJzLnB1c2gob24odGhpcy5kZWNvZGVyLFwiZGVjb2RlZFwiLGJpbmQodGhpcyxcIm9uZGVjb2RlZFwiKSkpfTtNYW5hZ2VyLnByb3RvdHlwZS5vbnBpbmc9ZnVuY3Rpb24oKXt0aGlzLmxhc3RQaW5nPW5ldyBEYXRlO3RoaXMuZW1pdEFsbChcInBpbmdcIil9O01hbmFnZXIucHJvdG90eXBlLm9ucG9uZz1mdW5jdGlvbigpe3RoaXMuZW1pdEFsbChcInBvbmdcIixuZXcgRGF0ZS10aGlzLmxhc3RQaW5nKX07TWFuYWdlci5wcm90b3R5cGUub25kYXRhPWZ1bmN0aW9uKGRhdGEpe3RoaXMuZGVjb2Rlci5hZGQoZGF0YSl9O01hbmFnZXIucHJvdG90eXBlLm9uZGVjb2RlZD1mdW5jdGlvbihwYWNrZXQpe3RoaXMuZW1pdChcInBhY2tldFwiLHBhY2tldCl9O01hbmFnZXIucHJvdG90eXBlLm9uZXJyb3I9ZnVuY3Rpb24oZXJyKXtkZWJ1ZyhcImVycm9yXCIsZXJyKTt0aGlzLmVtaXRBbGwoXCJlcnJvclwiLGVycil9O01hbmFnZXIucHJvdG90eXBlLnNvY2tldD1mdW5jdGlvbihuc3Ape3ZhciBzb2NrZXQ9dGhpcy5uc3BzW25zcF07aWYoIXNvY2tldCl7c29ja2V0PW5ldyBTb2NrZXQodGhpcyxuc3ApO3RoaXMubnNwc1tuc3BdPXNvY2tldDt2YXIgc2VsZj10aGlzO3NvY2tldC5vbihcImNvbm5lY3RpbmdcIixvbkNvbm5lY3RpbmcpO1xuc29ja2V0Lm9uKFwiY29ubmVjdFwiLGZ1bmN0aW9uKCl7c29ja2V0LmlkPXNlbGYuZW5naW5lLmlkfSk7aWYodGhpcy5hdXRvQ29ubmVjdCl7b25Db25uZWN0aW5nKCl9fWZ1bmN0aW9uIG9uQ29ubmVjdGluZygpe2lmKCF+aW5kZXhPZihzZWxmLmNvbm5lY3Rpbmcsc29ja2V0KSl7c2VsZi5jb25uZWN0aW5nLnB1c2goc29ja2V0KX19cmV0dXJuIHNvY2tldH07TWFuYWdlci5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbihzb2NrZXQpe3ZhciBpbmRleD1pbmRleE9mKHRoaXMuY29ubmVjdGluZyxzb2NrZXQpO2lmKH5pbmRleCl0aGlzLmNvbm5lY3Rpbmcuc3BsaWNlKGluZGV4LDEpO2lmKHRoaXMuY29ubmVjdGluZy5sZW5ndGgpcmV0dXJuO3RoaXMuY2xvc2UoKX07TWFuYWdlci5wcm90b3R5cGUucGFja2V0PWZ1bmN0aW9uKHBhY2tldCl7ZGVidWcoXCJ3cml0aW5nIHBhY2tldCAlalwiLHBhY2tldCk7dmFyIHNlbGY9dGhpcztpZighc2VsZi5lbmNvZGluZyl7c2VsZi5lbmNvZGluZz10cnVlO3RoaXMuZW5jb2Rlci5lbmNvZGUocGFja2V0LGZ1bmN0aW9uKGVuY29kZWRQYWNrZXRzKXtmb3IodmFyIGk9MDtpPGVuY29kZWRQYWNrZXRzLmxlbmd0aDtpKyspe3NlbGYuZW5naW5lLndyaXRlKGVuY29kZWRQYWNrZXRzW2ldLHBhY2tldC5vcHRpb25zKX1zZWxmLmVuY29kaW5nPWZhbHNlO3NlbGYucHJvY2Vzc1BhY2tldFF1ZXVlKCl9KX1lbHNle3NlbGYucGFja2V0QnVmZmVyLnB1c2gocGFja2V0KX19O01hbmFnZXIucHJvdG90eXBlLnByb2Nlc3NQYWNrZXRRdWV1ZT1mdW5jdGlvbigpe2lmKHRoaXMucGFja2V0QnVmZmVyLmxlbmd0aD4wJiYhdGhpcy5lbmNvZGluZyl7dmFyIHBhY2s9dGhpcy5wYWNrZXRCdWZmZXIuc2hpZnQoKTt0aGlzLnBhY2tldChwYWNrKX19O01hbmFnZXIucHJvdG90eXBlLmNsZWFudXA9ZnVuY3Rpb24oKXtkZWJ1ZyhcImNsZWFudXBcIik7dmFyIHN1Yjt3aGlsZShzdWI9dGhpcy5zdWJzLnNoaWZ0KCkpc3ViLmRlc3Ryb3koKTt0aGlzLnBhY2tldEJ1ZmZlcj1bXTt0aGlzLmVuY29kaW5nPWZhbHNlO3RoaXMubGFzdFBpbmc9bnVsbDt0aGlzLmRlY29kZXIuZGVzdHJveSgpfTtNYW5hZ2VyLnByb3RvdHlwZS5jbG9zZT1NYW5hZ2VyLnByb3RvdHlwZS5kaXNjb25uZWN0PWZ1bmN0aW9uKCl7ZGVidWcoXCJkaXNjb25uZWN0XCIpO3RoaXMuc2tpcFJlY29ubmVjdD10cnVlO3RoaXMucmVjb25uZWN0aW5nPWZhbHNlO2lmKFwib3BlbmluZ1wiPT10aGlzLnJlYWR5U3RhdGUpe3RoaXMuY2xlYW51cCgpfXRoaXMuYmFja29mZi5yZXNldCgpO3RoaXMucmVhZHlTdGF0ZT1cImNsb3NlZFwiO2lmKHRoaXMuZW5naW5lKXRoaXMuZW5naW5lLmNsb3NlKCl9O01hbmFnZXIucHJvdG90eXBlLm9uY2xvc2U9ZnVuY3Rpb24ocmVhc29uKXtkZWJ1ZyhcIm9uY2xvc2VcIik7dGhpcy5jbGVhbnVwKCk7dGhpcy5iYWNrb2ZmLnJlc2V0KCk7dGhpcy5yZWFkeVN0YXRlPVwiY2xvc2VkXCI7dGhpcy5lbWl0KFwiY2xvc2VcIixyZWFzb24pO2lmKHRoaXMuX3JlY29ubmVjdGlvbiYmIXRoaXMuc2tpcFJlY29ubmVjdCl7dGhpcy5yZWNvbm5lY3QoKX19O01hbmFnZXIucHJvdG90eXBlLnJlY29ubmVjdD1mdW5jdGlvbigpe2lmKHRoaXMucmVjb25uZWN0aW5nfHx0aGlzLnNraXBSZWNvbm5lY3QpcmV0dXJuIHRoaXM7dmFyIHNlbGY9dGhpcztpZih0aGlzLmJhY2tvZmYuYXR0ZW1wdHM+PXRoaXMuX3JlY29ubmVjdGlvbkF0dGVtcHRzKXtkZWJ1ZyhcInJlY29ubmVjdCBmYWlsZWRcIik7dGhpcy5iYWNrb2ZmLnJlc2V0KCk7dGhpcy5lbWl0QWxsKFwicmVjb25uZWN0X2ZhaWxlZFwiKTt0aGlzLnJlY29ubmVjdGluZz1mYWxzZX1lbHNle3ZhciBkZWxheT10aGlzLmJhY2tvZmYuZHVyYXRpb24oKTtkZWJ1ZyhcIndpbGwgd2FpdCAlZG1zIGJlZm9yZSByZWNvbm5lY3QgYXR0ZW1wdFwiLGRlbGF5KTt0aGlzLnJlY29ubmVjdGluZz10cnVlO3ZhciB0aW1lcj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aWYoc2VsZi5za2lwUmVjb25uZWN0KXJldHVybjtkZWJ1ZyhcImF0dGVtcHRpbmcgcmVjb25uZWN0XCIpO3NlbGYuZW1pdEFsbChcInJlY29ubmVjdF9hdHRlbXB0XCIsc2VsZi5iYWNrb2ZmLmF0dGVtcHRzKTtzZWxmLmVtaXRBbGwoXCJyZWNvbm5lY3RpbmdcIixzZWxmLmJhY2tvZmYuYXR0ZW1wdHMpO2lmKHNlbGYuc2tpcFJlY29ubmVjdClyZXR1cm47c2VsZi5vcGVuKGZ1bmN0aW9uKGVycil7aWYoZXJyKXtkZWJ1ZyhcInJlY29ubmVjdCBhdHRlbXB0IGVycm9yXCIpO3NlbGYucmVjb25uZWN0aW5nPWZhbHNlO3NlbGYucmVjb25uZWN0KCk7c2VsZi5lbWl0QWxsKFwicmVjb25uZWN0X2Vycm9yXCIsZXJyLmRhdGEpfWVsc2V7ZGVidWcoXCJyZWNvbm5lY3Qgc3VjY2Vzc1wiKTtzZWxmLm9ucmVjb25uZWN0KCl9fSl9LGRlbGF5KTt0aGlzLnN1YnMucHVzaCh7ZGVzdHJveTpmdW5jdGlvbigpe2NsZWFyVGltZW91dCh0aW1lcil9fSl9fTtNYW5hZ2VyLnByb3RvdHlwZS5vbnJlY29ubmVjdD1mdW5jdGlvbigpe3ZhciBhdHRlbXB0PXRoaXMuYmFja29mZi5hdHRlbXB0czt0aGlzLnJlY29ubmVjdGluZz1mYWxzZTt0aGlzLmJhY2tvZmYucmVzZXQoKTt0aGlzLnVwZGF0ZVNvY2tldElkcygpO3RoaXMuZW1pdEFsbChcInJlY29ubmVjdFwiLGF0dGVtcHQpfX0se1wiLi9vblwiOjMzLFwiLi9zb2NrZXRcIjozNCxiYWNrbzI6MzYsXCJjb21wb25lbnQtYmluZFwiOjM3LFwiY29tcG9uZW50LWVtaXR0ZXJcIjozOCxkZWJ1ZzozOSxcImVuZ2luZS5pby1jbGllbnRcIjoxLGluZGV4b2Y6NDIsXCJzb2NrZXQuaW8tcGFyc2VyXCI6NDd9XSwzMzpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHM9b247ZnVuY3Rpb24gb24ob2JqLGV2LGZuKXtvYmoub24oZXYsZm4pO3JldHVybntkZXN0cm95OmZ1bmN0aW9uKCl7b2JqLnJlbW92ZUxpc3RlbmVyKGV2LGZuKX19fX0se31dLDM0OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXt2YXIgcGFyc2VyPV9kZXJlcV8oXCJzb2NrZXQuaW8tcGFyc2VyXCIpO3ZhciBFbWl0dGVyPV9kZXJlcV8oXCJjb21wb25lbnQtZW1pdHRlclwiKTt2YXIgdG9BcnJheT1fZGVyZXFfKFwidG8tYXJyYXlcIik7dmFyIG9uPV9kZXJlcV8oXCIuL29uXCIpO3ZhciBiaW5kPV9kZXJlcV8oXCJjb21wb25lbnQtYmluZFwiKTt2YXIgZGVidWc9X2RlcmVxXyhcImRlYnVnXCIpKFwic29ja2V0LmlvLWNsaWVudDpzb2NrZXRcIik7dmFyIGhhc0Jpbj1fZGVyZXFfKFwiaGFzLWJpbmFyeVwiKTttb2R1bGUuZXhwb3J0cz1leHBvcnRzPVNvY2tldDt2YXIgZXZlbnRzPXtjb25uZWN0OjEsY29ubmVjdF9lcnJvcjoxLGNvbm5lY3RfdGltZW91dDoxLGNvbm5lY3Rpbmc6MSxkaXNjb25uZWN0OjEsZXJyb3I6MSxyZWNvbm5lY3Q6MSxyZWNvbm5lY3RfYXR0ZW1wdDoxLHJlY29ubmVjdF9mYWlsZWQ6MSxyZWNvbm5lY3RfZXJyb3I6MSxyZWNvbm5lY3Rpbmc6MSxwaW5nOjEscG9uZzoxfTt2YXIgZW1pdD1FbWl0dGVyLnByb3RvdHlwZS5lbWl0O2Z1bmN0aW9uIFNvY2tldChpbyxuc3Ape3RoaXMuaW89aW87dGhpcy5uc3A9bnNwO3RoaXMuanNvbj10aGlzO3RoaXMuaWRzPTA7dGhpcy5hY2tzPXt9O3RoaXMucmVjZWl2ZUJ1ZmZlcj1bXTt0aGlzLnNlbmRCdWZmZXI9W107dGhpcy5jb25uZWN0ZWQ9ZmFsc2U7dGhpcy5kaXNjb25uZWN0ZWQ9dHJ1ZTtpZih0aGlzLmlvLmF1dG9Db25uZWN0KXRoaXMub3BlbigpfUVtaXR0ZXIoU29ja2V0LnByb3RvdHlwZSk7U29ja2V0LnByb3RvdHlwZS5zdWJFdmVudHM9ZnVuY3Rpb24oKXtpZih0aGlzLnN1YnMpcmV0dXJuO3ZhciBpbz10aGlzLmlvO3RoaXMuc3Vicz1bb24oaW8sXCJvcGVuXCIsYmluZCh0aGlzLFwib25vcGVuXCIpKSxvbihpbyxcInBhY2tldFwiLGJpbmQodGhpcyxcIm9ucGFja2V0XCIpKSxvbihpbyxcImNsb3NlXCIsYmluZCh0aGlzLFwib25jbG9zZVwiKSldfTtTb2NrZXQucHJvdG90eXBlLm9wZW49U29ja2V0LnByb3RvdHlwZS5jb25uZWN0PWZ1bmN0aW9uKCl7aWYodGhpcy5jb25uZWN0ZWQpcmV0dXJuIHRoaXM7dGhpcy5zdWJFdmVudHMoKTt0aGlzLmlvLm9wZW4oKTtpZihcIm9wZW5cIj09dGhpcy5pby5yZWFkeVN0YXRlKXRoaXMub25vcGVuKCk7dGhpcy5lbWl0KFwiY29ubmVjdGluZ1wiKTtyZXR1cm4gdGhpc307U29ja2V0LnByb3RvdHlwZS5zZW5kPWZ1bmN0aW9uKCl7dmFyIGFyZ3M9dG9BcnJheShhcmd1bWVudHMpO2FyZ3MudW5zaGlmdChcIm1lc3NhZ2VcIik7dGhpcy5lbWl0LmFwcGx5KHRoaXMsYXJncyk7cmV0dXJuIHRoaXN9O1NvY2tldC5wcm90b3R5cGUuZW1pdD1mdW5jdGlvbihldil7aWYoZXZlbnRzLmhhc093blByb3BlcnR5KGV2KSl7ZW1pdC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIHRoaXN9dmFyIGFyZ3M9dG9BcnJheShhcmd1bWVudHMpO3ZhciBwYXJzZXJUeXBlPXBhcnNlci5FVkVOVDtpZihoYXNCaW4oYXJncykpe3BhcnNlclR5cGU9cGFyc2VyLkJJTkFSWV9FVkVOVH12YXIgcGFja2V0PXt0eXBlOnBhcnNlclR5cGUsZGF0YTphcmdzfTtwYWNrZXQub3B0aW9ucz17fTtwYWNrZXQub3B0aW9ucy5jb21wcmVzcz0hdGhpcy5mbGFnc3x8ZmFsc2UhPT10aGlzLmZsYWdzLmNvbXByZXNzO2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIGFyZ3NbYXJncy5sZW5ndGgtMV0pe2RlYnVnKFwiZW1pdHRpbmcgcGFja2V0IHdpdGggYWNrIGlkICVkXCIsdGhpcy5pZHMpO3RoaXMuYWNrc1t0aGlzLmlkc109YXJncy5wb3AoKTtwYWNrZXQuaWQ9dGhpcy5pZHMrK31pZih0aGlzLmNvbm5lY3RlZCl7dGhpcy5wYWNrZXQocGFja2V0KX1lbHNle3RoaXMuc2VuZEJ1ZmZlci5wdXNoKHBhY2tldCl9ZGVsZXRlIHRoaXMuZmxhZ3M7cmV0dXJuIHRoaXN9O1NvY2tldC5wcm90b3R5cGUucGFja2V0PWZ1bmN0aW9uKHBhY2tldCl7cGFja2V0Lm5zcD10aGlzLm5zcDt0aGlzLmlvLnBhY2tldChwYWNrZXQpfTtTb2NrZXQucHJvdG90eXBlLm9ub3Blbj1mdW5jdGlvbigpe2RlYnVnKFwidHJhbnNwb3J0IGlzIG9wZW4gLSBjb25uZWN0aW5nXCIpO2lmKFwiL1wiIT10aGlzLm5zcCl7dGhpcy5wYWNrZXQoe3R5cGU6cGFyc2VyLkNPTk5FQ1R9KX19O1NvY2tldC5wcm90b3R5cGUub25jbG9zZT1mdW5jdGlvbihyZWFzb24pe2RlYnVnKFwiY2xvc2UgKCVzKVwiLHJlYXNvbik7dGhpcy5jb25uZWN0ZWQ9ZmFsc2U7dGhpcy5kaXNjb25uZWN0ZWQ9dHJ1ZTtkZWxldGUgdGhpcy5pZDt0aGlzLmVtaXQoXCJkaXNjb25uZWN0XCIscmVhc29uKX07U29ja2V0LnByb3RvdHlwZS5vbnBhY2tldD1mdW5jdGlvbihwYWNrZXQpe2lmKHBhY2tldC5uc3AhPXRoaXMubnNwKXJldHVybjtzd2l0Y2gocGFja2V0LnR5cGUpe2Nhc2UgcGFyc2VyLkNPTk5FQ1Q6dGhpcy5vbmNvbm5lY3QoKTticmVhaztjYXNlIHBhcnNlci5FVkVOVDp0aGlzLm9uZXZlbnQocGFja2V0KTticmVhaztjYXNlIHBhcnNlci5CSU5BUllfRVZFTlQ6dGhpcy5vbmV2ZW50KHBhY2tldCk7YnJlYWs7Y2FzZSBwYXJzZXIuQUNLOnRoaXMub25hY2socGFja2V0KTticmVhaztjYXNlIHBhcnNlci5CSU5BUllfQUNLOnRoaXMub25hY2socGFja2V0KTticmVhaztjYXNlIHBhcnNlci5ESVNDT05ORUNUOnRoaXMub25kaXNjb25uZWN0KCk7YnJlYWs7Y2FzZSBwYXJzZXIuRVJST1I6dGhpcy5lbWl0KFwiZXJyb3JcIixwYWNrZXQuZGF0YSk7YnJlYWt9fTtTb2NrZXQucHJvdG90eXBlLm9uZXZlbnQ9ZnVuY3Rpb24ocGFja2V0KXt2YXIgYXJncz1wYWNrZXQuZGF0YXx8W107ZGVidWcoXCJlbWl0dGluZyBldmVudCAlalwiLGFyZ3MpO2lmKG51bGwhPXBhY2tldC5pZCl7ZGVidWcoXCJhdHRhY2hpbmcgYWNrIGNhbGxiYWNrIHRvIGV2ZW50XCIpO2FyZ3MucHVzaCh0aGlzLmFjayhwYWNrZXQuaWQpKX1pZih0aGlzLmNvbm5lY3RlZCl7ZW1pdC5hcHBseSh0aGlzLGFyZ3MpfWVsc2V7dGhpcy5yZWNlaXZlQnVmZmVyLnB1c2goYXJncyl9fTtTb2NrZXQucHJvdG90eXBlLmFjaz1mdW5jdGlvbihpZCl7dmFyIHNlbGY9dGhpczt2YXIgc2VudD1mYWxzZTtyZXR1cm4gZnVuY3Rpb24oKXtpZihzZW50KXJldHVybjtzZW50PXRydWU7dmFyIGFyZ3M9dG9BcnJheShhcmd1bWVudHMpO2RlYnVnKFwic2VuZGluZyBhY2sgJWpcIixhcmdzKTt2YXIgdHlwZT1oYXNCaW4oYXJncyk/cGFyc2VyLkJJTkFSWV9BQ0s6cGFyc2VyLkFDSztzZWxmLnBhY2tldCh7dHlwZTp0eXBlLGlkOmlkLGRhdGE6YXJnc30pfX07U29ja2V0LnByb3RvdHlwZS5vbmFjaz1mdW5jdGlvbihwYWNrZXQpe3ZhciBhY2s9dGhpcy5hY2tzW3BhY2tldC5pZF07aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgYWNrKXtkZWJ1ZyhcImNhbGxpbmcgYWNrICVzIHdpdGggJWpcIixwYWNrZXQuaWQscGFja2V0LmRhdGEpO2Fjay5hcHBseSh0aGlzLHBhY2tldC5kYXRhKTtkZWxldGUgdGhpcy5hY2tzW3BhY2tldC5pZF19ZWxzZXtkZWJ1ZyhcImJhZCBhY2sgJXNcIixwYWNrZXQuaWQpfX07U29ja2V0LnByb3RvdHlwZS5vbmNvbm5lY3Q9ZnVuY3Rpb24oKXt0aGlzLmNvbm5lY3RlZD10cnVlO3RoaXMuZGlzY29ubmVjdGVkPWZhbHNlO3RoaXMuZW1pdChcImNvbm5lY3RcIik7dGhpcy5lbWl0QnVmZmVyZWQoKX07U29ja2V0LnByb3RvdHlwZS5lbWl0QnVmZmVyZWQ9ZnVuY3Rpb24oKXt2YXIgaTtmb3IoaT0wO2k8dGhpcy5yZWNlaXZlQnVmZmVyLmxlbmd0aDtpKyspe2VtaXQuYXBwbHkodGhpcyx0aGlzLnJlY2VpdmVCdWZmZXJbaV0pfXRoaXMucmVjZWl2ZUJ1ZmZlcj1bXTtmb3IoaT0wO2k8dGhpcy5zZW5kQnVmZmVyLmxlbmd0aDtpKyspe3RoaXMucGFja2V0KHRoaXMuc2VuZEJ1ZmZlcltpXSl9dGhpcy5zZW5kQnVmZmVyPVtdfTtTb2NrZXQucHJvdG90eXBlLm9uZGlzY29ubmVjdD1mdW5jdGlvbigpe2RlYnVnKFwic2VydmVyIGRpc2Nvbm5lY3QgKCVzKVwiLHRoaXMubnNwKTt0aGlzLmRlc3Ryb3koKTt0aGlzLm9uY2xvc2UoXCJpbyBzZXJ2ZXIgZGlzY29ubmVjdFwiKX07U29ja2V0LnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7aWYodGhpcy5zdWJzKXtmb3IodmFyIGk9MDtpPHRoaXMuc3Vicy5sZW5ndGg7aSsrKXt0aGlzLnN1YnNbaV0uZGVzdHJveSgpfXRoaXMuc3Vicz1udWxsfXRoaXMuaW8uZGVzdHJveSh0aGlzKX07U29ja2V0LnByb3RvdHlwZS5jbG9zZT1Tb2NrZXQucHJvdG90eXBlLmRpc2Nvbm5lY3Q9ZnVuY3Rpb24oKXtpZih0aGlzLmNvbm5lY3RlZCl7ZGVidWcoXCJwZXJmb3JtaW5nIGRpc2Nvbm5lY3QgKCVzKVwiLHRoaXMubnNwKTt0aGlzLnBhY2tldCh7dHlwZTpwYXJzZXIuRElTQ09OTkVDVH0pfXRoaXMuZGVzdHJveSgpO2lmKHRoaXMuY29ubmVjdGVkKXt0aGlzLm9uY2xvc2UoXCJpbyBjbGllbnQgZGlzY29ubmVjdFwiKX1yZXR1cm4gdGhpc307U29ja2V0LnByb3RvdHlwZS5jb21wcmVzcz1mdW5jdGlvbihjb21wcmVzcyl7dGhpcy5mbGFncz10aGlzLmZsYWdzfHx7fTt0aGlzLmZsYWdzLmNvbXByZXNzPWNvbXByZXNzO3JldHVybiB0aGlzfX0se1wiLi9vblwiOjMzLFwiY29tcG9uZW50LWJpbmRcIjozNyxcImNvbXBvbmVudC1lbWl0dGVyXCI6MzgsZGVidWc6MzksXCJoYXMtYmluYXJ5XCI6NDEsXCJzb2NrZXQuaW8tcGFyc2VyXCI6NDcsXCJ0by1hcnJheVwiOjUxfV0sMzU6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpeyhmdW5jdGlvbihnbG9iYWwpe3ZhciBwYXJzZXVyaT1fZGVyZXFfKFwicGFyc2V1cmlcIik7dmFyIGRlYnVnPV9kZXJlcV8oXCJkZWJ1Z1wiKShcInNvY2tldC5pby1jbGllbnQ6dXJsXCIpO21vZHVsZS5leHBvcnRzPXVybDtmdW5jdGlvbiB1cmwodXJpLGxvYyl7dmFyIG9iaj11cmk7dmFyIGxvYz1sb2N8fGdsb2JhbC5sb2NhdGlvbjtpZihudWxsPT11cmkpdXJpPWxvYy5wcm90b2NvbCtcIi8vXCIrbG9jLmhvc3Q7aWYoXCJzdHJpbmdcIj09dHlwZW9mIHVyaSl7aWYoXCIvXCI9PXVyaS5jaGFyQXQoMCkpe2lmKFwiL1wiPT11cmkuY2hhckF0KDEpKXt1cmk9bG9jLnByb3RvY29sK3VyaX1lbHNle3VyaT1sb2MuaG9zdCt1cml9fWlmKCEvXihodHRwcz98d3NzPyk6XFwvXFwvLy50ZXN0KHVyaSkpe2RlYnVnKFwicHJvdG9jb2wtbGVzcyB1cmwgJXNcIix1cmkpO2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBsb2Mpe3VyaT1sb2MucHJvdG9jb2wrXCIvL1wiK3VyaX1lbHNle3VyaT1cImh0dHBzOi8vXCIrdXJpfX1kZWJ1ZyhcInBhcnNlICVzXCIsdXJpKTtvYmo9cGFyc2V1cmkodXJpKX1pZighb2JqLnBvcnQpe2lmKC9eKGh0dHB8d3MpJC8udGVzdChvYmoucHJvdG9jb2wpKXtvYmoucG9ydD1cIjgwXCJ9ZWxzZSBpZigvXihodHRwfHdzKXMkLy50ZXN0KG9iai5wcm90b2NvbCkpe29iai5wb3J0PVwiNDQzXCJ9fW9iai5wYXRoPW9iai5wYXRofHxcIi9cIjt2YXIgaXB2Nj1vYmouaG9zdC5pbmRleE9mKFwiOlwiKSE9PS0xO3ZhciBob3N0PWlwdjY/XCJbXCIrb2JqLmhvc3QrXCJdXCI6b2JqLmhvc3Q7b2JqLmlkPW9iai5wcm90b2NvbCtcIjovL1wiK2hvc3QrXCI6XCIrb2JqLnBvcnQ7b2JqLmhyZWY9b2JqLnByb3RvY29sK1wiOi8vXCIraG9zdCsobG9jJiZsb2MucG9ydD09b2JqLnBvcnQ/XCJcIjpcIjpcIitvYmoucG9ydCk7cmV0dXJuIG9ian19KS5jYWxsKHRoaXMsdHlwZW9mIHNlbGYhPT1cInVuZGVmaW5lZFwiP3NlbGY6dHlwZW9mIHdpbmRvdyE9PVwidW5kZWZpbmVkXCI/d2luZG93OnR5cGVvZiBnbG9iYWwhPT1cInVuZGVmaW5lZFwiP2dsb2JhbDp7fSl9LHtkZWJ1ZzozOSxwYXJzZXVyaTo0NX1dLDM2OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXttb2R1bGUuZXhwb3J0cz1CYWNrb2ZmO2Z1bmN0aW9uIEJhY2tvZmYob3B0cyl7b3B0cz1vcHRzfHx7fTt0aGlzLm1zPW9wdHMubWlufHwxMDA7dGhpcy5tYXg9b3B0cy5tYXh8fDFlNDt0aGlzLmZhY3Rvcj1vcHRzLmZhY3Rvcnx8Mjt0aGlzLmppdHRlcj1vcHRzLmppdHRlcj4wJiZvcHRzLmppdHRlcjw9MT9vcHRzLmppdHRlcjowO3RoaXMuYXR0ZW1wdHM9MH1CYWNrb2ZmLnByb3RvdHlwZS5kdXJhdGlvbj1mdW5jdGlvbigpe3ZhciBtcz10aGlzLm1zKk1hdGgucG93KHRoaXMuZmFjdG9yLHRoaXMuYXR0ZW1wdHMrKyk7aWYodGhpcy5qaXR0ZXIpe3ZhciByYW5kPU1hdGgucmFuZG9tKCk7dmFyIGRldmlhdGlvbj1NYXRoLmZsb29yKHJhbmQqdGhpcy5qaXR0ZXIqbXMpO21zPShNYXRoLmZsb29yKHJhbmQqMTApJjEpPT0wP21zLWRldmlhdGlvbjptcytkZXZpYXRpb259cmV0dXJuIE1hdGgubWluKG1zLHRoaXMubWF4KXwwfTtCYWNrb2ZmLnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbigpe3RoaXMuYXR0ZW1wdHM9MH07QmFja29mZi5wcm90b3R5cGUuc2V0TWluPWZ1bmN0aW9uKG1pbil7dGhpcy5tcz1taW59O0JhY2tvZmYucHJvdG90eXBlLnNldE1heD1mdW5jdGlvbihtYXgpe3RoaXMubWF4PW1heH07QmFja29mZi5wcm90b3R5cGUuc2V0Sml0dGVyPWZ1bmN0aW9uKGppdHRlcil7dGhpcy5qaXR0ZXI9aml0dGVyfX0se31dLDM3OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXt2YXIgc2xpY2U9W10uc2xpY2U7bW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24ob2JqLGZuKXtpZihcInN0cmluZ1wiPT10eXBlb2YgZm4pZm49b2JqW2ZuXTtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBmbil0aHJvdyBuZXcgRXJyb3IoXCJiaW5kKCkgcmVxdWlyZXMgYSBmdW5jdGlvblwiKTt2YXIgYXJncz1zbGljZS5jYWxsKGFyZ3VtZW50cywyKTtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZm4uYXBwbHkob2JqLGFyZ3MuY29uY2F0KHNsaWNlLmNhbGwoYXJndW1lbnRzKSkpfX19LHt9XSwzODpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHM9RW1pdHRlcjtmdW5jdGlvbiBFbWl0dGVyKG9iail7aWYob2JqKXJldHVybiBtaXhpbihvYmopfWZ1bmN0aW9uIG1peGluKG9iail7Zm9yKHZhciBrZXkgaW4gRW1pdHRlci5wcm90b3R5cGUpe29ialtrZXldPUVtaXR0ZXIucHJvdG90eXBlW2tleV19cmV0dXJuIG9ian1FbWl0dGVyLnByb3RvdHlwZS5vbj1FbWl0dGVyLnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyPWZ1bmN0aW9uKGV2ZW50LGZuKXt0aGlzLl9jYWxsYmFja3M9dGhpcy5fY2FsbGJhY2tzfHx7fTsodGhpcy5fY2FsbGJhY2tzW1wiJFwiK2V2ZW50XT10aGlzLl9jYWxsYmFja3NbXCIkXCIrZXZlbnRdfHxbXSkucHVzaChmbik7cmV0dXJuIHRoaXN9O0VtaXR0ZXIucHJvdG90eXBlLm9uY2U9ZnVuY3Rpb24oZXZlbnQsZm4pe2Z1bmN0aW9uIG9uKCl7dGhpcy5vZmYoZXZlbnQsb24pO2ZuLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1vbi5mbj1mbjt0aGlzLm9uKGV2ZW50LG9uKTtyZXR1cm4gdGhpc307RW1pdHRlci5wcm90b3R5cGUub2ZmPUVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyPUVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUFsbExpc3RlbmVycz1FbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyPWZ1bmN0aW9uKGV2ZW50LGZuKXt0aGlzLl9jYWxsYmFja3M9dGhpcy5fY2FsbGJhY2tzfHx7fTtpZigwPT1hcmd1bWVudHMubGVuZ3RoKXt0aGlzLl9jYWxsYmFja3M9e307cmV0dXJuIHRoaXN9dmFyIGNhbGxiYWNrcz10aGlzLl9jYWxsYmFja3NbXCIkXCIrZXZlbnRdO2lmKCFjYWxsYmFja3MpcmV0dXJuIHRoaXM7aWYoMT09YXJndW1lbnRzLmxlbmd0aCl7ZGVsZXRlIHRoaXMuX2NhbGxiYWNrc1tcIiRcIitldmVudF07cmV0dXJuIHRoaXN9dmFyIGNiO2Zvcih2YXIgaT0wO2k8Y2FsbGJhY2tzLmxlbmd0aDtpKyspe2NiPWNhbGxiYWNrc1tpXTtpZihjYj09PWZufHxjYi5mbj09PWZuKXtjYWxsYmFja3Muc3BsaWNlKGksMSk7YnJlYWt9fXJldHVybiB0aGlzfTtFbWl0dGVyLnByb3RvdHlwZS5lbWl0PWZ1bmN0aW9uKGV2ZW50KXt0aGlzLl9jYWxsYmFja3M9dGhpcy5fY2FsbGJhY2tzfHx7fTt2YXIgYXJncz1bXS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKSxjYWxsYmFja3M9dGhpcy5fY2FsbGJhY2tzW1wiJFwiK2V2ZW50XTtpZihjYWxsYmFja3Mpe2NhbGxiYWNrcz1jYWxsYmFja3Muc2xpY2UoMCk7Zm9yKHZhciBpPTAsbGVuPWNhbGxiYWNrcy5sZW5ndGg7aTxsZW47KytpKXtjYWxsYmFja3NbaV0uYXBwbHkodGhpcyxhcmdzKX19cmV0dXJuIHRoaXN9O0VtaXR0ZXIucHJvdG90eXBlLmxpc3RlbmVycz1mdW5jdGlvbihldmVudCl7dGhpcy5fY2FsbGJhY2tzPXRoaXMuX2NhbGxiYWNrc3x8e307cmV0dXJuIHRoaXMuX2NhbGxiYWNrc1tcIiRcIitldmVudF18fFtdfTtFbWl0dGVyLnByb3RvdHlwZS5oYXNMaXN0ZW5lcnM9ZnVuY3Rpb24oZXZlbnQpe3JldHVybiEhdGhpcy5saXN0ZW5lcnMoZXZlbnQpLmxlbmd0aH19LHt9XSwzOTpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7YXJndW1lbnRzWzRdWzE3XVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cyl9LHtcIi4vZGVidWdcIjo0MCxkdXA6MTd9XSw0MDpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7YXJndW1lbnRzWzRdWzE4XVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cyl9LHtkdXA6MTgsbXM6NDR9XSw0MTpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7KGZ1bmN0aW9uKGdsb2JhbCl7dmFyIGlzQXJyYXk9X2RlcmVxXyhcImlzYXJyYXlcIik7bW9kdWxlLmV4cG9ydHM9aGFzQmluYXJ5O2Z1bmN0aW9uIGhhc0JpbmFyeShkYXRhKXtmdW5jdGlvbiBfaGFzQmluYXJ5KG9iail7aWYoIW9iailyZXR1cm4gZmFsc2U7aWYoZ2xvYmFsLkJ1ZmZlciYmZ2xvYmFsLkJ1ZmZlci5pc0J1ZmZlciYmZ2xvYmFsLkJ1ZmZlci5pc0J1ZmZlcihvYmopfHxnbG9iYWwuQXJyYXlCdWZmZXImJm9iaiBpbnN0YW5jZW9mIEFycmF5QnVmZmVyfHxnbG9iYWwuQmxvYiYmb2JqIGluc3RhbmNlb2YgQmxvYnx8Z2xvYmFsLkZpbGUmJm9iaiBpbnN0YW5jZW9mIEZpbGUpe3JldHVybiB0cnVlfWlmKGlzQXJyYXkob2JqKSl7Zm9yKHZhciBpPTA7aTxvYmoubGVuZ3RoO2krKyl7aWYoX2hhc0JpbmFyeShvYmpbaV0pKXtyZXR1cm4gdHJ1ZX19fWVsc2UgaWYob2JqJiZcIm9iamVjdFwiPT10eXBlb2Ygb2JqKXtpZihvYmoudG9KU09OJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBvYmoudG9KU09OKXtvYmo9b2JqLnRvSlNPTigpfWZvcih2YXIga2V5IGluIG9iail7aWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaixrZXkpJiZfaGFzQmluYXJ5KG9ialtrZXldKSl7cmV0dXJuIHRydWV9fX1yZXR1cm4gZmFsc2V9cmV0dXJuIF9oYXNCaW5hcnkoZGF0YSl9fSkuY2FsbCh0aGlzLHR5cGVvZiBzZWxmIT09XCJ1bmRlZmluZWRcIj9zZWxmOnR5cGVvZiB3aW5kb3chPT1cInVuZGVmaW5lZFwiP3dpbmRvdzp0eXBlb2YgZ2xvYmFsIT09XCJ1bmRlZmluZWRcIj9nbG9iYWw6e30pfSx7aXNhcnJheTo0M31dLDQyOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXthcmd1bWVudHNbNF1bMjNdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKX0se2R1cDoyM31dLDQzOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXthcmd1bWVudHNbNF1bMjRdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKX0se2R1cDoyNH1dLDQ0OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXthcmd1bWVudHNbNF1bMjVdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKX0se2R1cDoyNX1dLDQ1OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXthcmd1bWVudHNbNF1bMjhdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKX0se2R1cDoyOH1dLDQ2OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXsoZnVuY3Rpb24oZ2xvYmFsKXt2YXIgaXNBcnJheT1fZGVyZXFfKFwiaXNhcnJheVwiKTt2YXIgaXNCdWY9X2RlcmVxXyhcIi4vaXMtYnVmZmVyXCIpO2V4cG9ydHMuZGVjb25zdHJ1Y3RQYWNrZXQ9ZnVuY3Rpb24ocGFja2V0KXt2YXIgYnVmZmVycz1bXTt2YXIgcGFja2V0RGF0YT1wYWNrZXQuZGF0YTtmdW5jdGlvbiBfZGVjb25zdHJ1Y3RQYWNrZXQoZGF0YSl7aWYoIWRhdGEpcmV0dXJuIGRhdGE7aWYoaXNCdWYoZGF0YSkpe3ZhciBwbGFjZWhvbGRlcj17X3BsYWNlaG9sZGVyOnRydWUsbnVtOmJ1ZmZlcnMubGVuZ3RofTtidWZmZXJzLnB1c2goZGF0YSk7cmV0dXJuIHBsYWNlaG9sZGVyfWVsc2UgaWYoaXNBcnJheShkYXRhKSl7dmFyIG5ld0RhdGE9bmV3IEFycmF5KGRhdGEubGVuZ3RoKTtmb3IodmFyIGk9MDtpPGRhdGEubGVuZ3RoO2krKyl7bmV3RGF0YVtpXT1fZGVjb25zdHJ1Y3RQYWNrZXQoZGF0YVtpXSl9cmV0dXJuIG5ld0RhdGF9ZWxzZSBpZihcIm9iamVjdFwiPT10eXBlb2YgZGF0YSYmIShkYXRhIGluc3RhbmNlb2YgRGF0ZSkpe3ZhciBuZXdEYXRhPXt9O2Zvcih2YXIga2V5IGluIGRhdGEpe25ld0RhdGFba2V5XT1fZGVjb25zdHJ1Y3RQYWNrZXQoZGF0YVtrZXldKX1yZXR1cm4gbmV3RGF0YX1yZXR1cm4gZGF0YX12YXIgcGFjaz1wYWNrZXQ7cGFjay5kYXRhPV9kZWNvbnN0cnVjdFBhY2tldChwYWNrZXREYXRhKTtwYWNrLmF0dGFjaG1lbnRzPWJ1ZmZlcnMubGVuZ3RoO3JldHVybntwYWNrZXQ6cGFjayxidWZmZXJzOmJ1ZmZlcnN9fTtleHBvcnRzLnJlY29uc3RydWN0UGFja2V0PWZ1bmN0aW9uKHBhY2tldCxidWZmZXJzKXt2YXIgY3VyUGxhY2VIb2xkZXI9MDtmdW5jdGlvbiBfcmVjb25zdHJ1Y3RQYWNrZXQoZGF0YSl7aWYoZGF0YSYmZGF0YS5fcGxhY2Vob2xkZXIpe3ZhciBidWY9YnVmZmVyc1tkYXRhLm51bV07cmV0dXJuIGJ1Zn1lbHNlIGlmKGlzQXJyYXkoZGF0YSkpe2Zvcih2YXIgaT0wO2k8ZGF0YS5sZW5ndGg7aSsrKXtkYXRhW2ldPV9yZWNvbnN0cnVjdFBhY2tldChkYXRhW2ldKX1yZXR1cm4gZGF0YX1lbHNlIGlmKGRhdGEmJlwib2JqZWN0XCI9PXR5cGVvZiBkYXRhKXtmb3IodmFyIGtleSBpbiBkYXRhKXtkYXRhW2tleV09X3JlY29uc3RydWN0UGFja2V0KGRhdGFba2V5XSl9cmV0dXJuIGRhdGF9cmV0dXJuIGRhdGF9cGFja2V0LmRhdGE9X3JlY29uc3RydWN0UGFja2V0KHBhY2tldC5kYXRhKTtwYWNrZXQuYXR0YWNobWVudHM9dW5kZWZpbmVkO3JldHVybiBwYWNrZXR9O2V4cG9ydHMucmVtb3ZlQmxvYnM9ZnVuY3Rpb24oZGF0YSxjYWxsYmFjayl7ZnVuY3Rpb24gX3JlbW92ZUJsb2JzKG9iaixjdXJLZXksY29udGFpbmluZ09iamVjdCl7aWYoIW9iailyZXR1cm4gb2JqO2lmKGdsb2JhbC5CbG9iJiZvYmogaW5zdGFuY2VvZiBCbG9ifHxnbG9iYWwuRmlsZSYmb2JqIGluc3RhbmNlb2YgRmlsZSl7cGVuZGluZ0Jsb2JzKys7dmFyIGZpbGVSZWFkZXI9bmV3IEZpbGVSZWFkZXI7ZmlsZVJlYWRlci5vbmxvYWQ9ZnVuY3Rpb24oKXtpZihjb250YWluaW5nT2JqZWN0KXtjb250YWluaW5nT2JqZWN0W2N1cktleV09dGhpcy5yZXN1bHR9ZWxzZXtibG9ibGVzc0RhdGE9dGhpcy5yZXN1bHR9aWYoIS0tcGVuZGluZ0Jsb2JzKXtjYWxsYmFjayhibG9ibGVzc0RhdGEpfX07ZmlsZVJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcihvYmopfWVsc2UgaWYoaXNBcnJheShvYmopKXtmb3IodmFyIGk9MDtpPG9iai5sZW5ndGg7aSsrKXtfcmVtb3ZlQmxvYnMob2JqW2ldLGksb2JqKX19ZWxzZSBpZihvYmomJlwib2JqZWN0XCI9PXR5cGVvZiBvYmomJiFpc0J1ZihvYmopKXtmb3IodmFyIGtleSBpbiBvYmope19yZW1vdmVCbG9icyhvYmpba2V5XSxrZXksb2JqKX19fXZhciBwZW5kaW5nQmxvYnM9MDt2YXIgYmxvYmxlc3NEYXRhPWRhdGE7X3JlbW92ZUJsb2JzKGJsb2JsZXNzRGF0YSk7aWYoIXBlbmRpbmdCbG9icyl7Y2FsbGJhY2soYmxvYmxlc3NEYXRhKX19fSkuY2FsbCh0aGlzLHR5cGVvZiBzZWxmIT09XCJ1bmRlZmluZWRcIj9zZWxmOnR5cGVvZiB3aW5kb3chPT1cInVuZGVmaW5lZFwiP3dpbmRvdzp0eXBlb2YgZ2xvYmFsIT09XCJ1bmRlZmluZWRcIj9nbG9iYWw6e30pfSx7XCIuL2lzLWJ1ZmZlclwiOjQ4LGlzYXJyYXk6NDN9XSw0NzpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7dmFyIGRlYnVnPV9kZXJlcV8oXCJkZWJ1Z1wiKShcInNvY2tldC5pby1wYXJzZXJcIik7dmFyIGpzb249X2RlcmVxXyhcImpzb24zXCIpO3ZhciBpc0FycmF5PV9kZXJlcV8oXCJpc2FycmF5XCIpO3ZhciBFbWl0dGVyPV9kZXJlcV8oXCJjb21wb25lbnQtZW1pdHRlclwiKTt2YXIgYmluYXJ5PV9kZXJlcV8oXCIuL2JpbmFyeVwiKTt2YXIgaXNCdWY9X2RlcmVxXyhcIi4vaXMtYnVmZmVyXCIpO2V4cG9ydHMucHJvdG9jb2w9NDtleHBvcnRzLnR5cGVzPVtcIkNPTk5FQ1RcIixcIkRJU0NPTk5FQ1RcIixcIkVWRU5UXCIsXCJCSU5BUllfRVZFTlRcIixcIkFDS1wiLFwiQklOQVJZX0FDS1wiLFwiRVJST1JcIl07ZXhwb3J0cy5DT05ORUNUPTA7ZXhwb3J0cy5ESVNDT05ORUNUPTE7ZXhwb3J0cy5FVkVOVD0yO2V4cG9ydHMuQUNLPTM7ZXhwb3J0cy5FUlJPUj00O2V4cG9ydHMuQklOQVJZX0VWRU5UPTU7ZXhwb3J0cy5CSU5BUllfQUNLPTY7ZXhwb3J0cy5FbmNvZGVyPUVuY29kZXI7ZXhwb3J0cy5EZWNvZGVyPURlY29kZXI7ZnVuY3Rpb24gRW5jb2Rlcigpe31FbmNvZGVyLnByb3RvdHlwZS5lbmNvZGU9ZnVuY3Rpb24ob2JqLGNhbGxiYWNrKXtkZWJ1ZyhcImVuY29kaW5nIHBhY2tldCAlalwiLG9iaik7aWYoZXhwb3J0cy5CSU5BUllfRVZFTlQ9PW9iai50eXBlfHxleHBvcnRzLkJJTkFSWV9BQ0s9PW9iai50eXBlKXtlbmNvZGVBc0JpbmFyeShvYmosY2FsbGJhY2spfWVsc2V7dmFyIGVuY29kaW5nPWVuY29kZUFzU3RyaW5nKG9iaik7Y2FsbGJhY2soW2VuY29kaW5nXSl9fTtmdW5jdGlvbiBlbmNvZGVBc1N0cmluZyhvYmope3ZhciBzdHI9XCJcIjt2YXIgbnNwPWZhbHNlO3N0cis9b2JqLnR5cGU7aWYoZXhwb3J0cy5CSU5BUllfRVZFTlQ9PW9iai50eXBlfHxleHBvcnRzLkJJTkFSWV9BQ0s9PW9iai50eXBlKXtzdHIrPW9iai5hdHRhY2htZW50cztzdHIrPVwiLVwifWlmKG9iai5uc3AmJlwiL1wiIT1vYmoubnNwKXtuc3A9dHJ1ZTtzdHIrPW9iai5uc3B9aWYobnVsbCE9b2JqLmlkKXtpZihuc3Ape3N0cis9XCIsXCI7bnNwPWZhbHNlfXN0cis9b2JqLmlkfWlmKG51bGwhPW9iai5kYXRhKXtpZihuc3Apc3RyKz1cIixcIjtzdHIrPWpzb24uc3RyaW5naWZ5KG9iai5kYXRhKX1kZWJ1ZyhcImVuY29kZWQgJWogYXMgJXNcIixvYmosc3RyKTtyZXR1cm4gc3RyfWZ1bmN0aW9uIGVuY29kZUFzQmluYXJ5KG9iaixjYWxsYmFjayl7ZnVuY3Rpb24gd3JpdGVFbmNvZGluZyhibG9ibGVzc0RhdGEpe3ZhciBkZWNvbnN0cnVjdGlvbj1iaW5hcnkuZGVjb25zdHJ1Y3RQYWNrZXQoYmxvYmxlc3NEYXRhKTt2YXIgcGFjaz1lbmNvZGVBc1N0cmluZyhkZWNvbnN0cnVjdGlvbi5wYWNrZXQpO3ZhciBidWZmZXJzPWRlY29uc3RydWN0aW9uLmJ1ZmZlcnM7YnVmZmVycy51bnNoaWZ0KHBhY2spO2NhbGxiYWNrKGJ1ZmZlcnMpfWJpbmFyeS5yZW1vdmVCbG9icyhvYmosd3JpdGVFbmNvZGluZyl9ZnVuY3Rpb24gRGVjb2Rlcigpe3RoaXMucmVjb25zdHJ1Y3Rvcj1udWxsfUVtaXR0ZXIoRGVjb2Rlci5wcm90b3R5cGUpO0RlY29kZXIucHJvdG90eXBlLmFkZD1mdW5jdGlvbihvYmope3ZhciBwYWNrZXQ7aWYoXCJzdHJpbmdcIj09dHlwZW9mIG9iail7cGFja2V0PWRlY29kZVN0cmluZyhvYmopO2lmKGV4cG9ydHMuQklOQVJZX0VWRU5UPT1wYWNrZXQudHlwZXx8ZXhwb3J0cy5CSU5BUllfQUNLPT1wYWNrZXQudHlwZSl7dGhpcy5yZWNvbnN0cnVjdG9yPW5ldyBCaW5hcnlSZWNvbnN0cnVjdG9yKHBhY2tldCk7aWYodGhpcy5yZWNvbnN0cnVjdG9yLnJlY29uUGFjay5hdHRhY2htZW50cz09PTApe3RoaXMuZW1pdChcImRlY29kZWRcIixwYWNrZXQpfX1lbHNle3RoaXMuZW1pdChcImRlY29kZWRcIixwYWNrZXQpfX1lbHNlIGlmKGlzQnVmKG9iail8fG9iai5iYXNlNjQpe2lmKCF0aGlzLnJlY29uc3RydWN0b3Ipe3Rocm93IG5ldyBFcnJvcihcImdvdCBiaW5hcnkgZGF0YSB3aGVuIG5vdCByZWNvbnN0cnVjdGluZyBhIHBhY2tldFwiKX1lbHNle3BhY2tldD10aGlzLnJlY29uc3RydWN0b3IudGFrZUJpbmFyeURhdGEob2JqKTtpZihwYWNrZXQpe3RoaXMucmVjb25zdHJ1Y3Rvcj1udWxsO3RoaXMuZW1pdChcImRlY29kZWRcIixwYWNrZXQpfX19ZWxzZXt0aHJvdyBuZXcgRXJyb3IoXCJVbmtub3duIHR5cGU6IFwiK29iail9fTtmdW5jdGlvbiBkZWNvZGVTdHJpbmcoc3RyKXt2YXIgcD17fTt2YXIgaT0wO3AudHlwZT1OdW1iZXIoc3RyLmNoYXJBdCgwKSk7aWYobnVsbD09ZXhwb3J0cy50eXBlc1twLnR5cGVdKXJldHVybiBlcnJvcigpO2lmKGV4cG9ydHMuQklOQVJZX0VWRU5UPT1wLnR5cGV8fGV4cG9ydHMuQklOQVJZX0FDSz09cC50eXBlKXt2YXIgYnVmPVwiXCI7d2hpbGUoc3RyLmNoYXJBdCgrK2kpIT1cIi1cIil7YnVmKz1zdHIuY2hhckF0KGkpO2lmKGk9PXN0ci5sZW5ndGgpYnJlYWt9aWYoYnVmIT1OdW1iZXIoYnVmKXx8c3RyLmNoYXJBdChpKSE9XCItXCIpe3Rocm93IG5ldyBFcnJvcihcIklsbGVnYWwgYXR0YWNobWVudHNcIil9cC5hdHRhY2htZW50cz1OdW1iZXIoYnVmKX1pZihcIi9cIj09c3RyLmNoYXJBdChpKzEpKXtwLm5zcD1cIlwiO3doaWxlKCsraSl7dmFyIGM9c3RyLmNoYXJBdChpKTtpZihcIixcIj09YylicmVhaztwLm5zcCs9YztpZihpPT1zdHIubGVuZ3RoKWJyZWFrfX1lbHNle3AubnNwPVwiL1wifXZhciBuZXh0PXN0ci5jaGFyQXQoaSsxKTtpZihcIlwiIT09bmV4dCYmTnVtYmVyKG5leHQpPT1uZXh0KXtwLmlkPVwiXCI7d2hpbGUoKytpKXt2YXIgYz1zdHIuY2hhckF0KGkpO2lmKG51bGw9PWN8fE51bWJlcihjKSE9Yyl7LS1pO2JyZWFrfXAuaWQrPXN0ci5jaGFyQXQoaSk7aWYoaT09c3RyLmxlbmd0aClicmVha31wLmlkPU51bWJlcihwLmlkKX1pZihzdHIuY2hhckF0KCsraSkpe3RyeXtwLmRhdGE9anNvbi5wYXJzZShzdHIuc3Vic3RyKGkpKX1jYXRjaChlKXtyZXR1cm4gZXJyb3IoKX19ZGVidWcoXCJkZWNvZGVkICVzIGFzICVqXCIsc3RyLHApO3JldHVybiBwfURlY29kZXIucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXtpZih0aGlzLnJlY29uc3RydWN0b3Ipe3RoaXMucmVjb25zdHJ1Y3Rvci5maW5pc2hlZFJlY29uc3RydWN0aW9uKCl9fTtmdW5jdGlvbiBCaW5hcnlSZWNvbnN0cnVjdG9yKHBhY2tldCl7dGhpcy5yZWNvblBhY2s9cGFja2V0O3RoaXMuYnVmZmVycz1bXX1CaW5hcnlSZWNvbnN0cnVjdG9yLnByb3RvdHlwZS50YWtlQmluYXJ5RGF0YT1mdW5jdGlvbihiaW5EYXRhKXt0aGlzLmJ1ZmZlcnMucHVzaChiaW5EYXRhKTtpZih0aGlzLmJ1ZmZlcnMubGVuZ3RoPT10aGlzLnJlY29uUGFjay5hdHRhY2htZW50cyl7dmFyIHBhY2tldD1iaW5hcnkucmVjb25zdHJ1Y3RQYWNrZXQodGhpcy5yZWNvblBhY2ssdGhpcy5idWZmZXJzKTt0aGlzLmZpbmlzaGVkUmVjb25zdHJ1Y3Rpb24oKTtyZXR1cm4gcGFja2V0fXJldHVybiBudWxsfTtCaW5hcnlSZWNvbnN0cnVjdG9yLnByb3RvdHlwZS5maW5pc2hlZFJlY29uc3RydWN0aW9uPWZ1bmN0aW9uKCl7dGhpcy5yZWNvblBhY2s9bnVsbDt0aGlzLmJ1ZmZlcnM9W119O2Z1bmN0aW9uIGVycm9yKGRhdGEpe3JldHVybnt0eXBlOmV4cG9ydHMuRVJST1IsZGF0YTpcInBhcnNlciBlcnJvclwifX19LHtcIi4vYmluYXJ5XCI6NDYsXCIuL2lzLWJ1ZmZlclwiOjQ4LFwiY29tcG9uZW50LWVtaXR0ZXJcIjo0OSxkZWJ1ZzozOSxpc2FycmF5OjQzLGpzb24zOjUwfV0sNDg6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpeyhmdW5jdGlvbihnbG9iYWwpe21vZHVsZS5leHBvcnRzPWlzQnVmO2Z1bmN0aW9uIGlzQnVmKG9iail7cmV0dXJuIGdsb2JhbC5CdWZmZXImJmdsb2JhbC5CdWZmZXIuaXNCdWZmZXIob2JqKXx8Z2xvYmFsLkFycmF5QnVmZmVyJiZvYmogaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcn19KS5jYWxsKHRoaXMsdHlwZW9mIHNlbGYhPT1cInVuZGVmaW5lZFwiP3NlbGY6dHlwZW9mIHdpbmRvdyE9PVwidW5kZWZpbmVkXCI/d2luZG93OnR5cGVvZiBnbG9iYWwhPT1cInVuZGVmaW5lZFwiP2dsb2JhbDp7fSl9LHt9XSw0OTpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7YXJndW1lbnRzWzRdWzE1XVswXS5hcHBseShleHBvcnRzLGFyZ3VtZW50cyl9LHtkdXA6MTV9XSw1MDpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7KGZ1bmN0aW9uKGdsb2JhbCl7KGZ1bmN0aW9uKCl7dmFyIGlzTG9hZGVyPXR5cGVvZiBkZWZpbmU9PT1cImZ1bmN0aW9uXCImJmRlZmluZS5hbWQ7dmFyIG9iamVjdFR5cGVzPXtcImZ1bmN0aW9uXCI6dHJ1ZSxvYmplY3Q6dHJ1ZX07dmFyIGZyZWVFeHBvcnRzPW9iamVjdFR5cGVzW3R5cGVvZiBleHBvcnRzXSYmZXhwb3J0cyYmIWV4cG9ydHMubm9kZVR5cGUmJmV4cG9ydHM7dmFyIHJvb3Q9b2JqZWN0VHlwZXNbdHlwZW9mIHdpbmRvd10mJndpbmRvd3x8dGhpcyxmcmVlR2xvYmFsPWZyZWVFeHBvcnRzJiZvYmplY3RUeXBlc1t0eXBlb2YgbW9kdWxlXSYmbW9kdWxlJiYhbW9kdWxlLm5vZGVUeXBlJiZ0eXBlb2YgZ2xvYmFsPT1cIm9iamVjdFwiJiZnbG9iYWw7aWYoZnJlZUdsb2JhbCYmKGZyZWVHbG9iYWxbXCJnbG9iYWxcIl09PT1mcmVlR2xvYmFsfHxmcmVlR2xvYmFsW1wid2luZG93XCJdPT09ZnJlZUdsb2JhbHx8ZnJlZUdsb2JhbFtcInNlbGZcIl09PT1mcmVlR2xvYmFsKSl7cm9vdD1mcmVlR2xvYmFsfWZ1bmN0aW9uIHJ1bkluQ29udGV4dChjb250ZXh0LGV4cG9ydHMpe2NvbnRleHR8fChjb250ZXh0PXJvb3RbXCJPYmplY3RcIl0oKSk7ZXhwb3J0c3x8KGV4cG9ydHM9cm9vdFtcIk9iamVjdFwiXSgpKTt2YXIgTnVtYmVyPWNvbnRleHRbXCJOdW1iZXJcIl18fHJvb3RbXCJOdW1iZXJcIl0sU3RyaW5nPWNvbnRleHRbXCJTdHJpbmdcIl18fHJvb3RbXCJTdHJpbmdcIl0sT2JqZWN0PWNvbnRleHRbXCJPYmplY3RcIl18fHJvb3RbXCJPYmplY3RcIl0sRGF0ZT1jb250ZXh0W1wiRGF0ZVwiXXx8cm9vdFtcIkRhdGVcIl0sU3ludGF4RXJyb3I9Y29udGV4dFtcIlN5bnRheEVycm9yXCJdfHxyb290W1wiU3ludGF4RXJyb3JcIl0sVHlwZUVycm9yPWNvbnRleHRbXCJUeXBlRXJyb3JcIl18fHJvb3RbXCJUeXBlRXJyb3JcIl0sTWF0aD1jb250ZXh0W1wiTWF0aFwiXXx8cm9vdFtcIk1hdGhcIl0sbmF0aXZlSlNPTj1jb250ZXh0W1wiSlNPTlwiXXx8cm9vdFtcIkpTT05cIl07aWYodHlwZW9mIG5hdGl2ZUpTT049PVwib2JqZWN0XCImJm5hdGl2ZUpTT04pe2V4cG9ydHMuc3RyaW5naWZ5PW5hdGl2ZUpTT04uc3RyaW5naWZ5O2V4cG9ydHMucGFyc2U9bmF0aXZlSlNPTi5wYXJzZX12YXIgb2JqZWN0UHJvdG89T2JqZWN0LnByb3RvdHlwZSxnZXRDbGFzcz1vYmplY3RQcm90by50b1N0cmluZyxpc1Byb3BlcnR5LGZvckVhY2gsdW5kZWY7dmFyIGlzRXh0ZW5kZWQ9bmV3IERhdGUoLTB4Yzc4MmI1YjgwMGNlYyk7dHJ5e2lzRXh0ZW5kZWQ9aXNFeHRlbmRlZC5nZXRVVENGdWxsWWVhcigpPT0tMTA5MjUyJiZpc0V4dGVuZGVkLmdldFVUQ01vbnRoKCk9PT0wJiZpc0V4dGVuZGVkLmdldFVUQ0RhdGUoKT09PTEmJmlzRXh0ZW5kZWQuZ2V0VVRDSG91cnMoKT09MTAmJmlzRXh0ZW5kZWQuZ2V0VVRDTWludXRlcygpPT0zNyYmaXNFeHRlbmRlZC5nZXRVVENTZWNvbmRzKCk9PTYmJmlzRXh0ZW5kZWQuZ2V0VVRDTWlsbGlzZWNvbmRzKCk9PTcwOH1jYXRjaChleGNlcHRpb24pe31mdW5jdGlvbiBoYXMobmFtZSl7aWYoaGFzW25hbWVdIT09dW5kZWYpe3JldHVybiBoYXNbbmFtZV19dmFyIGlzU3VwcG9ydGVkO2lmKG5hbWU9PVwiYnVnLXN0cmluZy1jaGFyLWluZGV4XCIpe2lzU3VwcG9ydGVkPVwiYVwiWzBdIT1cImFcIn1lbHNlIGlmKG5hbWU9PVwianNvblwiKXtpc1N1cHBvcnRlZD1oYXMoXCJqc29uLXN0cmluZ2lmeVwiKSYmaGFzKFwianNvbi1wYXJzZVwiKX1lbHNle3ZhciB2YWx1ZSxzZXJpYWxpemVkPSd7XCJhXCI6WzEsdHJ1ZSxmYWxzZSxudWxsLFwiXFxcXHUwMDAwXFxcXGJcXFxcblxcXFxmXFxcXHJcXFxcdFwiXX0nO2lmKG5hbWU9PVwianNvbi1zdHJpbmdpZnlcIil7dmFyIHN0cmluZ2lmeT1leHBvcnRzLnN0cmluZ2lmeSxzdHJpbmdpZnlTdXBwb3J0ZWQ9dHlwZW9mIHN0cmluZ2lmeT09XCJmdW5jdGlvblwiJiZpc0V4dGVuZGVkO2lmKHN0cmluZ2lmeVN1cHBvcnRlZCl7KHZhbHVlPWZ1bmN0aW9uKCl7cmV0dXJuIDF9KS50b0pTT049dmFsdWU7dHJ5e3N0cmluZ2lmeVN1cHBvcnRlZD1zdHJpbmdpZnkoMCk9PT1cIjBcIiYmc3RyaW5naWZ5KG5ldyBOdW1iZXIpPT09XCIwXCImJnN0cmluZ2lmeShuZXcgU3RyaW5nKT09J1wiXCInJiZzdHJpbmdpZnkoZ2V0Q2xhc3MpPT09dW5kZWYmJnN0cmluZ2lmeSh1bmRlZik9PT11bmRlZiYmc3RyaW5naWZ5KCk9PT11bmRlZiYmc3RyaW5naWZ5KHZhbHVlKT09PVwiMVwiJiZzdHJpbmdpZnkoW3ZhbHVlXSk9PVwiWzFdXCImJnN0cmluZ2lmeShbdW5kZWZdKT09XCJbbnVsbF1cIiYmc3RyaW5naWZ5KG51bGwpPT1cIm51bGxcIiYmc3RyaW5naWZ5KFt1bmRlZixnZXRDbGFzcyxudWxsXSk9PVwiW251bGwsbnVsbCxudWxsXVwiJiZzdHJpbmdpZnkoe2E6W3ZhbHVlLHRydWUsZmFsc2UsbnVsbCxcIlxceDAwXFxiXFxuXFxmXFxyXHRcIl19KT09c2VyaWFsaXplZCYmc3RyaW5naWZ5KG51bGwsdmFsdWUpPT09XCIxXCImJnN0cmluZ2lmeShbMSwyXSxudWxsLDEpPT1cIltcXG4gMSxcXG4gMlxcbl1cIiYmc3RyaW5naWZ5KG5ldyBEYXRlKC04NjRlMTMpKT09J1wiLTI3MTgyMS0wNC0yMFQwMDowMDowMC4wMDBaXCInJiZzdHJpbmdpZnkobmV3IERhdGUoODY0ZTEzKSk9PSdcIisyNzU3NjAtMDktMTNUMDA6MDA6MDAuMDAwWlwiJyYmc3RyaW5naWZ5KG5ldyBEYXRlKC02MjE5ODc1NTJlNSkpPT0nXCItMDAwMDAxLTAxLTAxVDAwOjAwOjAwLjAwMFpcIicmJnN0cmluZ2lmeShuZXcgRGF0ZSgtMSkpPT0nXCIxOTY5LTEyLTMxVDIzOjU5OjU5Ljk5OVpcIid9Y2F0Y2goZXhjZXB0aW9uKXtzdHJpbmdpZnlTdXBwb3J0ZWQ9ZmFsc2V9fWlzU3VwcG9ydGVkPXN0cmluZ2lmeVN1cHBvcnRlZH1pZihuYW1lPT1cImpzb24tcGFyc2VcIil7dmFyIHBhcnNlPWV4cG9ydHMucGFyc2U7aWYodHlwZW9mIHBhcnNlPT1cImZ1bmN0aW9uXCIpe3RyeXtpZihwYXJzZShcIjBcIik9PT0wJiYhcGFyc2UoZmFsc2UpKXt2YWx1ZT1wYXJzZShzZXJpYWxpemVkKTt2YXIgcGFyc2VTdXBwb3J0ZWQ9dmFsdWVbXCJhXCJdLmxlbmd0aD09NSYmdmFsdWVbXCJhXCJdWzBdPT09MTtpZihwYXJzZVN1cHBvcnRlZCl7dHJ5e3BhcnNlU3VwcG9ydGVkPSFwYXJzZSgnXCJcdFwiJyl9Y2F0Y2goZXhjZXB0aW9uKXt9aWYocGFyc2VTdXBwb3J0ZWQpe3RyeXtwYXJzZVN1cHBvcnRlZD1wYXJzZShcIjAxXCIpIT09MX1jYXRjaChleGNlcHRpb24pe319aWYocGFyc2VTdXBwb3J0ZWQpe3RyeXtwYXJzZVN1cHBvcnRlZD1wYXJzZShcIjEuXCIpIT09MX1jYXRjaChleGNlcHRpb24pe319fX19Y2F0Y2goZXhjZXB0aW9uKXtwYXJzZVN1cHBvcnRlZD1mYWxzZX19aXNTdXBwb3J0ZWQ9cGFyc2VTdXBwb3J0ZWR9fXJldHVybiBoYXNbbmFtZV09ISFpc1N1cHBvcnRlZH1pZighaGFzKFwianNvblwiKSl7dmFyIGZ1bmN0aW9uQ2xhc3M9XCJbb2JqZWN0IEZ1bmN0aW9uXVwiLGRhdGVDbGFzcz1cIltvYmplY3QgRGF0ZV1cIixudW1iZXJDbGFzcz1cIltvYmplY3QgTnVtYmVyXVwiLHN0cmluZ0NsYXNzPVwiW29iamVjdCBTdHJpbmddXCIsYXJyYXlDbGFzcz1cIltvYmplY3QgQXJyYXldXCIsYm9vbGVhbkNsYXNzPVwiW29iamVjdCBCb29sZWFuXVwiO3ZhciBjaGFySW5kZXhCdWdneT1oYXMoXCJidWctc3RyaW5nLWNoYXItaW5kZXhcIik7aWYoIWlzRXh0ZW5kZWQpe3ZhciBmbG9vcj1NYXRoLmZsb29yO3ZhciBNb250aHM9WzAsMzEsNTksOTAsMTIwLDE1MSwxODEsMjEyLDI0MywyNzMsMzA0LDMzNF07dmFyIGdldERheT1mdW5jdGlvbih5ZWFyLG1vbnRoKXtyZXR1cm4gTW9udGhzW21vbnRoXSszNjUqKHllYXItMTk3MCkrZmxvb3IoKHllYXItMTk2OSsobW9udGg9Kyhtb250aD4xKSkpLzQpLWZsb29yKCh5ZWFyLTE5MDErbW9udGgpLzEwMCkrZmxvb3IoKHllYXItMTYwMSttb250aCkvNDAwKX19aWYoIShpc1Byb3BlcnR5PW9iamVjdFByb3RvLmhhc093blByb3BlcnR5KSl7aXNQcm9wZXJ0eT1mdW5jdGlvbihwcm9wZXJ0eSl7dmFyIG1lbWJlcnM9e30sY29uc3RydWN0b3I7aWYoKG1lbWJlcnMuX19wcm90b19fPW51bGwsbWVtYmVycy5fX3Byb3RvX189e3RvU3RyaW5nOjF9LG1lbWJlcnMpLnRvU3RyaW5nIT1nZXRDbGFzcyl7aXNQcm9wZXJ0eT1mdW5jdGlvbihwcm9wZXJ0eSl7dmFyIG9yaWdpbmFsPXRoaXMuX19wcm90b19fLHJlc3VsdD1wcm9wZXJ0eSBpbih0aGlzLl9fcHJvdG9fXz1udWxsLHRoaXMpO3RoaXMuX19wcm90b19fPW9yaWdpbmFsO3JldHVybiByZXN1bHR9fWVsc2V7Y29uc3RydWN0b3I9bWVtYmVycy5jb25zdHJ1Y3Rvcjtpc1Byb3BlcnR5PWZ1bmN0aW9uKHByb3BlcnR5KXt2YXIgcGFyZW50PSh0aGlzLmNvbnN0cnVjdG9yfHxjb25zdHJ1Y3RvcikucHJvdG90eXBlO3JldHVybiBwcm9wZXJ0eSBpbiB0aGlzJiYhKHByb3BlcnR5IGluIHBhcmVudCYmdGhpc1twcm9wZXJ0eV09PT1wYXJlbnRbcHJvcGVydHldKX19bWVtYmVycz1udWxsO3JldHVybiBpc1Byb3BlcnR5LmNhbGwodGhpcyxwcm9wZXJ0eSl9fWZvckVhY2g9ZnVuY3Rpb24ob2JqZWN0LGNhbGxiYWNrKXt2YXIgc2l6ZT0wLFByb3BlcnRpZXMsbWVtYmVycyxwcm9wZXJ0eTsoUHJvcGVydGllcz1mdW5jdGlvbigpe3RoaXMudmFsdWVPZj0wfSkucHJvdG90eXBlLnZhbHVlT2Y9MDttZW1iZXJzPW5ldyBQcm9wZXJ0aWVzO2Zvcihwcm9wZXJ0eSBpbiBtZW1iZXJzKXtpZihpc1Byb3BlcnR5LmNhbGwobWVtYmVycyxwcm9wZXJ0eSkpe3NpemUrK319UHJvcGVydGllcz1tZW1iZXJzPW51bGw7aWYoIXNpemUpe21lbWJlcnM9W1widmFsdWVPZlwiLFwidG9TdHJpbmdcIixcInRvTG9jYWxlU3RyaW5nXCIsXCJwcm9wZXJ0eUlzRW51bWVyYWJsZVwiLFwiaXNQcm90b3R5cGVPZlwiLFwiaGFzT3duUHJvcGVydHlcIixcImNvbnN0cnVjdG9yXCJdO2ZvckVhY2g9ZnVuY3Rpb24ob2JqZWN0LGNhbGxiYWNrKXt2YXIgaXNGdW5jdGlvbj1nZXRDbGFzcy5jYWxsKG9iamVjdCk9PWZ1bmN0aW9uQ2xhc3MscHJvcGVydHksbGVuZ3RoO3ZhciBoYXNQcm9wZXJ0eT0haXNGdW5jdGlvbiYmdHlwZW9mIG9iamVjdC5jb25zdHJ1Y3RvciE9XCJmdW5jdGlvblwiJiZvYmplY3RUeXBlc1t0eXBlb2Ygb2JqZWN0Lmhhc093blByb3BlcnR5XSYmb2JqZWN0Lmhhc093blByb3BlcnR5fHxpc1Byb3BlcnR5O2Zvcihwcm9wZXJ0eSBpbiBvYmplY3Qpe2lmKCEoaXNGdW5jdGlvbiYmcHJvcGVydHk9PVwicHJvdG90eXBlXCIpJiZoYXNQcm9wZXJ0eS5jYWxsKG9iamVjdCxwcm9wZXJ0eSkpe2NhbGxiYWNrKHByb3BlcnR5KX19Zm9yKGxlbmd0aD1tZW1iZXJzLmxlbmd0aDtwcm9wZXJ0eT1tZW1iZXJzWy0tbGVuZ3RoXTtoYXNQcm9wZXJ0eS5jYWxsKG9iamVjdCxwcm9wZXJ0eSkmJmNhbGxiYWNrKHByb3BlcnR5KSk7fX1lbHNlIGlmKHNpemU9PTIpe2ZvckVhY2g9ZnVuY3Rpb24ob2JqZWN0LGNhbGxiYWNrKXt2YXIgbWVtYmVycz17fSxpc0Z1bmN0aW9uPWdldENsYXNzLmNhbGwob2JqZWN0KT09ZnVuY3Rpb25DbGFzcyxwcm9wZXJ0eTtmb3IocHJvcGVydHkgaW4gb2JqZWN0KXtpZighKGlzRnVuY3Rpb24mJnByb3BlcnR5PT1cInByb3RvdHlwZVwiKSYmIWlzUHJvcGVydHkuY2FsbChtZW1iZXJzLHByb3BlcnR5KSYmKG1lbWJlcnNbcHJvcGVydHldPTEpJiZpc1Byb3BlcnR5LmNhbGwob2JqZWN0LHByb3BlcnR5KSl7Y2FsbGJhY2socHJvcGVydHkpfX19fWVsc2V7Zm9yRWFjaD1mdW5jdGlvbihvYmplY3QsY2FsbGJhY2spe3ZhciBpc0Z1bmN0aW9uPWdldENsYXNzLmNhbGwob2JqZWN0KT09ZnVuY3Rpb25DbGFzcyxwcm9wZXJ0eSxpc0NvbnN0cnVjdG9yO2Zvcihwcm9wZXJ0eSBpbiBvYmplY3Qpe2lmKCEoaXNGdW5jdGlvbiYmcHJvcGVydHk9PVwicHJvdG90eXBlXCIpJiZpc1Byb3BlcnR5LmNhbGwob2JqZWN0LHByb3BlcnR5KSYmIShpc0NvbnN0cnVjdG9yPXByb3BlcnR5PT09XCJjb25zdHJ1Y3RvclwiKSl7Y2FsbGJhY2socHJvcGVydHkpfX1pZihpc0NvbnN0cnVjdG9yfHxpc1Byb3BlcnR5LmNhbGwob2JqZWN0LHByb3BlcnR5PVwiY29uc3RydWN0b3JcIikpe2NhbGxiYWNrKHByb3BlcnR5KX19fXJldHVybiBmb3JFYWNoKG9iamVjdCxjYWxsYmFjayl9O2lmKCFoYXMoXCJqc29uLXN0cmluZ2lmeVwiKSl7dmFyIEVzY2FwZXM9ezkyOlwiXFxcXFxcXFxcIiwzNDonXFxcXFwiJyw4OlwiXFxcXGJcIiwxMjpcIlxcXFxmXCIsMTA6XCJcXFxcblwiLDEzOlwiXFxcXHJcIiw5OlwiXFxcXHRcIn07dmFyIGxlYWRpbmdaZXJvZXM9XCIwMDAwMDBcIjt2YXIgdG9QYWRkZWRTdHJpbmc9ZnVuY3Rpb24od2lkdGgsdmFsdWUpe3JldHVybihsZWFkaW5nWmVyb2VzKyh2YWx1ZXx8MCkpLnNsaWNlKC13aWR0aCl9O3ZhciB1bmljb2RlUHJlZml4PVwiXFxcXHUwMFwiO3ZhciBxdW90ZT1mdW5jdGlvbih2YWx1ZSl7dmFyIHJlc3VsdD0nXCInLGluZGV4PTAsbGVuZ3RoPXZhbHVlLmxlbmd0aCx1c2VDaGFySW5kZXg9IWNoYXJJbmRleEJ1Z2d5fHxsZW5ndGg+MTA7dmFyIHN5bWJvbHM9dXNlQ2hhckluZGV4JiYoY2hhckluZGV4QnVnZ3k/dmFsdWUuc3BsaXQoXCJcIik6dmFsdWUpO2Zvcig7aW5kZXg8bGVuZ3RoO2luZGV4Kyspe3ZhciBjaGFyQ29kZT12YWx1ZS5jaGFyQ29kZUF0KGluZGV4KTtzd2l0Y2goY2hhckNvZGUpe2Nhc2UgODpjYXNlIDk6Y2FzZSAxMDpjYXNlIDEyOmNhc2UgMTM6Y2FzZSAzNDpjYXNlIDkyOnJlc3VsdCs9RXNjYXBlc1tjaGFyQ29kZV07YnJlYWs7ZGVmYXVsdDppZihjaGFyQ29kZTwzMil7cmVzdWx0Kz11bmljb2RlUHJlZml4K3RvUGFkZGVkU3RyaW5nKDIsY2hhckNvZGUudG9TdHJpbmcoMTYpKTticmVha31yZXN1bHQrPXVzZUNoYXJJbmRleD9zeW1ib2xzW2luZGV4XTp2YWx1ZS5jaGFyQXQoaW5kZXgpfX1yZXR1cm4gcmVzdWx0KydcIid9O3ZhciBzZXJpYWxpemU9ZnVuY3Rpb24ocHJvcGVydHksb2JqZWN0LGNhbGxiYWNrLHByb3BlcnRpZXMsd2hpdGVzcGFjZSxpbmRlbnRhdGlvbixzdGFjayl7dmFyIHZhbHVlLGNsYXNzTmFtZSx5ZWFyLG1vbnRoLGRhdGUsdGltZSxob3VycyxtaW51dGVzLHNlY29uZHMsbWlsbGlzZWNvbmRzLHJlc3VsdHMsZWxlbWVudCxpbmRleCxsZW5ndGgscHJlZml4LHJlc3VsdDt0cnl7dmFsdWU9b2JqZWN0W3Byb3BlcnR5XX1jYXRjaChleGNlcHRpb24pe31pZih0eXBlb2YgdmFsdWU9PVwib2JqZWN0XCImJnZhbHVlKXtjbGFzc05hbWU9Z2V0Q2xhc3MuY2FsbCh2YWx1ZSk7aWYoY2xhc3NOYW1lPT1kYXRlQ2xhc3MmJiFpc1Byb3BlcnR5LmNhbGwodmFsdWUsXCJ0b0pTT05cIikpe2lmKHZhbHVlPi0xLzAmJnZhbHVlPDEvMCl7aWYoZ2V0RGF5KXtkYXRlPWZsb29yKHZhbHVlLzg2NGU1KTtmb3IoeWVhcj1mbG9vcihkYXRlLzM2NS4yNDI1KSsxOTcwLTE7Z2V0RGF5KHllYXIrMSwwKTw9ZGF0ZTt5ZWFyKyspO2Zvcihtb250aD1mbG9vcigoZGF0ZS1nZXREYXkoeWVhciwwKSkvMzAuNDIpO2dldERheSh5ZWFyLG1vbnRoKzEpPD1kYXRlO21vbnRoKyspO2RhdGU9MStkYXRlLWdldERheSh5ZWFyLG1vbnRoKTt0aW1lPSh2YWx1ZSU4NjRlNSs4NjRlNSklODY0ZTU7aG91cnM9Zmxvb3IodGltZS8zNmU1KSUyNDttaW51dGVzPWZsb29yKHRpbWUvNmU0KSU2MDtzZWNvbmRzPWZsb29yKHRpbWUvMWUzKSU2MDttaWxsaXNlY29uZHM9dGltZSUxZTN9ZWxzZXt5ZWFyPXZhbHVlLmdldFVUQ0Z1bGxZZWFyKCk7bW9udGg9dmFsdWUuZ2V0VVRDTW9udGgoKTtkYXRlPXZhbHVlLmdldFVUQ0RhdGUoKTtob3Vycz12YWx1ZS5nZXRVVENIb3VycygpO21pbnV0ZXM9dmFsdWUuZ2V0VVRDTWludXRlcygpO3NlY29uZHM9dmFsdWUuZ2V0VVRDU2Vjb25kcygpO21pbGxpc2Vjb25kcz12YWx1ZS5nZXRVVENNaWxsaXNlY29uZHMoKX12YWx1ZT0oeWVhcjw9MHx8eWVhcj49MWU0Pyh5ZWFyPDA/XCItXCI6XCIrXCIpK3RvUGFkZGVkU3RyaW5nKDYseWVhcjwwPy15ZWFyOnllYXIpOnRvUGFkZGVkU3RyaW5nKDQseWVhcikpK1wiLVwiK3RvUGFkZGVkU3RyaW5nKDIsbW9udGgrMSkrXCItXCIrdG9QYWRkZWRTdHJpbmcoMixkYXRlKStcIlRcIit0b1BhZGRlZFN0cmluZygyLGhvdXJzKStcIjpcIit0b1BhZGRlZFN0cmluZygyLG1pbnV0ZXMpK1wiOlwiK3RvUGFkZGVkU3RyaW5nKDIsc2Vjb25kcykrXCIuXCIrdG9QYWRkZWRTdHJpbmcoMyxtaWxsaXNlY29uZHMpK1wiWlwifWVsc2V7dmFsdWU9bnVsbH19ZWxzZSBpZih0eXBlb2YgdmFsdWUudG9KU09OPT1cImZ1bmN0aW9uXCImJihjbGFzc05hbWUhPW51bWJlckNsYXNzJiZjbGFzc05hbWUhPXN0cmluZ0NsYXNzJiZjbGFzc05hbWUhPWFycmF5Q2xhc3N8fGlzUHJvcGVydHkuY2FsbCh2YWx1ZSxcInRvSlNPTlwiKSkpe3ZhbHVlPXZhbHVlLnRvSlNPTihwcm9wZXJ0eSl9fWlmKGNhbGxiYWNrKXt2YWx1ZT1jYWxsYmFjay5jYWxsKG9iamVjdCxwcm9wZXJ0eSx2YWx1ZSl9aWYodmFsdWU9PT1udWxsKXtyZXR1cm5cIm51bGxcIn1jbGFzc05hbWU9Z2V0Q2xhc3MuY2FsbCh2YWx1ZSk7aWYoY2xhc3NOYW1lPT1ib29sZWFuQ2xhc3Mpe3JldHVyblwiXCIrdmFsdWV9ZWxzZSBpZihjbGFzc05hbWU9PW51bWJlckNsYXNzKXtyZXR1cm4gdmFsdWU+LTEvMCYmdmFsdWU8MS8wP1wiXCIrdmFsdWU6XCJudWxsXCJ9ZWxzZSBpZihjbGFzc05hbWU9PXN0cmluZ0NsYXNzKXtyZXR1cm4gcXVvdGUoXCJcIit2YWx1ZSl9aWYodHlwZW9mIHZhbHVlPT1cIm9iamVjdFwiKXtmb3IobGVuZ3RoPXN0YWNrLmxlbmd0aDtsZW5ndGgtLTspe2lmKHN0YWNrW2xlbmd0aF09PT12YWx1ZSl7dGhyb3cgVHlwZUVycm9yKCl9fXN0YWNrLnB1c2godmFsdWUpO3Jlc3VsdHM9W107cHJlZml4PWluZGVudGF0aW9uO2luZGVudGF0aW9uKz13aGl0ZXNwYWNlO2lmKGNsYXNzTmFtZT09YXJyYXlDbGFzcyl7Zm9yKGluZGV4PTAsbGVuZ3RoPXZhbHVlLmxlbmd0aDtpbmRleDxsZW5ndGg7aW5kZXgrKyl7ZWxlbWVudD1zZXJpYWxpemUoaW5kZXgsdmFsdWUsY2FsbGJhY2sscHJvcGVydGllcyx3aGl0ZXNwYWNlLGluZGVudGF0aW9uLHN0YWNrKTtyZXN1bHRzLnB1c2goZWxlbWVudD09PXVuZGVmP1wibnVsbFwiOmVsZW1lbnQpfXJlc3VsdD1yZXN1bHRzLmxlbmd0aD93aGl0ZXNwYWNlP1wiW1xcblwiK2luZGVudGF0aW9uK3Jlc3VsdHMuam9pbihcIixcXG5cIitpbmRlbnRhdGlvbikrXCJcXG5cIitwcmVmaXgrXCJdXCI6XCJbXCIrcmVzdWx0cy5qb2luKFwiLFwiKStcIl1cIjpcIltdXCJ9ZWxzZXtmb3JFYWNoKHByb3BlcnRpZXN8fHZhbHVlLGZ1bmN0aW9uKHByb3BlcnR5KXt2YXIgZWxlbWVudD1zZXJpYWxpemUocHJvcGVydHksdmFsdWUsY2FsbGJhY2sscHJvcGVydGllcyx3aGl0ZXNwYWNlLGluZGVudGF0aW9uLHN0YWNrKTtpZihlbGVtZW50IT09dW5kZWYpe3Jlc3VsdHMucHVzaChxdW90ZShwcm9wZXJ0eSkrXCI6XCIrKHdoaXRlc3BhY2U/XCIgXCI6XCJcIikrZWxlbWVudCl9fSk7cmVzdWx0PXJlc3VsdHMubGVuZ3RoP3doaXRlc3BhY2U/XCJ7XFxuXCIraW5kZW50YXRpb24rcmVzdWx0cy5qb2luKFwiLFxcblwiK2luZGVudGF0aW9uKStcIlxcblwiK3ByZWZpeCtcIn1cIjpcIntcIityZXN1bHRzLmpvaW4oXCIsXCIpK1wifVwiOlwie31cIn1zdGFjay5wb3AoKTtyZXR1cm4gcmVzdWx0fX07ZXhwb3J0cy5zdHJpbmdpZnk9ZnVuY3Rpb24oc291cmNlLGZpbHRlcix3aWR0aCl7dmFyIHdoaXRlc3BhY2UsY2FsbGJhY2sscHJvcGVydGllcyxjbGFzc05hbWU7aWYob2JqZWN0VHlwZXNbdHlwZW9mIGZpbHRlcl0mJmZpbHRlcil7aWYoKGNsYXNzTmFtZT1nZXRDbGFzcy5jYWxsKGZpbHRlcikpPT1mdW5jdGlvbkNsYXNzKXtjYWxsYmFjaz1maWx0ZXJ9ZWxzZSBpZihjbGFzc05hbWU9PWFycmF5Q2xhc3Mpe3Byb3BlcnRpZXM9e307Zm9yKHZhciBpbmRleD0wLGxlbmd0aD1maWx0ZXIubGVuZ3RoLHZhbHVlO2luZGV4PGxlbmd0aDt2YWx1ZT1maWx0ZXJbaW5kZXgrK10sKGNsYXNzTmFtZT1nZXRDbGFzcy5jYWxsKHZhbHVlKSxjbGFzc05hbWU9PXN0cmluZ0NsYXNzfHxjbGFzc05hbWU9PW51bWJlckNsYXNzKSYmKHByb3BlcnRpZXNbdmFsdWVdPTEpKTt9fWlmKHdpZHRoKXtpZigoY2xhc3NOYW1lPWdldENsYXNzLmNhbGwod2lkdGgpKT09bnVtYmVyQ2xhc3Mpe2lmKCh3aWR0aC09d2lkdGglMSk+MCl7Zm9yKHdoaXRlc3BhY2U9XCJcIix3aWR0aD4xMCYmKHdpZHRoPTEwKTt3aGl0ZXNwYWNlLmxlbmd0aDx3aWR0aDt3aGl0ZXNwYWNlKz1cIiBcIik7fX1lbHNlIGlmKGNsYXNzTmFtZT09c3RyaW5nQ2xhc3Mpe3doaXRlc3BhY2U9d2lkdGgubGVuZ3RoPD0xMD93aWR0aDp3aWR0aC5zbGljZSgwLDEwKX19cmV0dXJuIHNlcmlhbGl6ZShcIlwiLCh2YWx1ZT17fSx2YWx1ZVtcIlwiXT1zb3VyY2UsdmFsdWUpLGNhbGxiYWNrLHByb3BlcnRpZXMsd2hpdGVzcGFjZSxcIlwiLFtdKX19aWYoIWhhcyhcImpzb24tcGFyc2VcIikpe3ZhciBmcm9tQ2hhckNvZGU9U3RyaW5nLmZyb21DaGFyQ29kZTt2YXIgVW5lc2NhcGVzPXs5MjpcIlxcXFxcIiwzNDonXCInLDQ3OlwiL1wiLDk4OlwiXFxiXCIsMTE2OlwiXHRcIiwxMTA6XCJcXG5cIiwxMDI6XCJcXGZcIiwxMTQ6XCJcXHJcIn07dmFyIEluZGV4LFNvdXJjZTt2YXIgYWJvcnQ9ZnVuY3Rpb24oKXtJbmRleD1Tb3VyY2U9bnVsbDt0aHJvdyBTeW50YXhFcnJvcigpfTt2YXIgbGV4PWZ1bmN0aW9uKCl7dmFyIHNvdXJjZT1Tb3VyY2UsbGVuZ3RoPXNvdXJjZS5sZW5ndGgsdmFsdWUsYmVnaW4scG9zaXRpb24saXNTaWduZWQsY2hhckNvZGU7d2hpbGUoSW5kZXg8bGVuZ3RoKXtjaGFyQ29kZT1zb3VyY2UuY2hhckNvZGVBdChJbmRleCk7c3dpdGNoKGNoYXJDb2RlKXtjYXNlIDk6Y2FzZSAxMDpjYXNlIDEzOmNhc2UgMzI6SW5kZXgrKzticmVhaztjYXNlIDEyMzpjYXNlIDEyNTpjYXNlIDkxOmNhc2UgOTM6Y2FzZSA1ODpjYXNlIDQ0OnZhbHVlPWNoYXJJbmRleEJ1Z2d5P3NvdXJjZS5jaGFyQXQoSW5kZXgpOnNvdXJjZVtJbmRleF07SW5kZXgrKztyZXR1cm4gdmFsdWU7Y2FzZSAzNDpmb3IodmFsdWU9XCJAXCIsSW5kZXgrKztJbmRleDxsZW5ndGg7KXtjaGFyQ29kZT1zb3VyY2UuY2hhckNvZGVBdChJbmRleCk7aWYoY2hhckNvZGU8MzIpe2Fib3J0KCl9ZWxzZSBpZihjaGFyQ29kZT09OTIpe2NoYXJDb2RlPXNvdXJjZS5jaGFyQ29kZUF0KCsrSW5kZXgpO3N3aXRjaChjaGFyQ29kZSl7Y2FzZSA5MjpjYXNlIDM0OmNhc2UgNDc6Y2FzZSA5ODpjYXNlIDExNjpjYXNlIDExMDpjYXNlIDEwMjpjYXNlIDExNDp2YWx1ZSs9VW5lc2NhcGVzW2NoYXJDb2RlXTtJbmRleCsrO2JyZWFrO2Nhc2UgMTE3OmJlZ2luPSsrSW5kZXg7Zm9yKHBvc2l0aW9uPUluZGV4KzQ7SW5kZXg8cG9zaXRpb247SW5kZXgrKyl7Y2hhckNvZGU9c291cmNlLmNoYXJDb2RlQXQoSW5kZXgpO2lmKCEoY2hhckNvZGU+PTQ4JiZjaGFyQ29kZTw9NTd8fGNoYXJDb2RlPj05NyYmY2hhckNvZGU8PTEwMnx8Y2hhckNvZGU+PTY1JiZjaGFyQ29kZTw9NzApKXthYm9ydCgpfX12YWx1ZSs9ZnJvbUNoYXJDb2RlKFwiMHhcIitzb3VyY2Uuc2xpY2UoYmVnaW4sSW5kZXgpKTticmVhaztkZWZhdWx0OmFib3J0KCl9fWVsc2V7aWYoY2hhckNvZGU9PTM0KXticmVha31jaGFyQ29kZT1zb3VyY2UuY2hhckNvZGVBdChJbmRleCk7YmVnaW49SW5kZXg7d2hpbGUoY2hhckNvZGU+PTMyJiZjaGFyQ29kZSE9OTImJmNoYXJDb2RlIT0zNCl7Y2hhckNvZGU9c291cmNlLmNoYXJDb2RlQXQoKytJbmRleCl9dmFsdWUrPXNvdXJjZS5zbGljZShiZWdpbixJbmRleCl9fWlmKHNvdXJjZS5jaGFyQ29kZUF0KEluZGV4KT09MzQpe0luZGV4Kys7cmV0dXJuIHZhbHVlfWFib3J0KCk7ZGVmYXVsdDpiZWdpbj1JbmRleDtpZihjaGFyQ29kZT09NDUpe2lzU2lnbmVkPXRydWU7Y2hhckNvZGU9c291cmNlLmNoYXJDb2RlQXQoKytJbmRleCl9aWYoY2hhckNvZGU+PTQ4JiZjaGFyQ29kZTw9NTcpe2lmKGNoYXJDb2RlPT00OCYmKGNoYXJDb2RlPXNvdXJjZS5jaGFyQ29kZUF0KEluZGV4KzEpLGNoYXJDb2RlPj00OCYmY2hhckNvZGU8PTU3KSl7YWJvcnQoKX1pc1NpZ25lZD1mYWxzZTtmb3IoO0luZGV4PGxlbmd0aCYmKGNoYXJDb2RlPXNvdXJjZS5jaGFyQ29kZUF0KEluZGV4KSxjaGFyQ29kZT49NDgmJmNoYXJDb2RlPD01Nyk7SW5kZXgrKyk7aWYoc291cmNlLmNoYXJDb2RlQXQoSW5kZXgpPT00Nil7cG9zaXRpb249KytJbmRleDtmb3IoO3Bvc2l0aW9uPGxlbmd0aCYmKGNoYXJDb2RlPXNvdXJjZS5jaGFyQ29kZUF0KHBvc2l0aW9uKSxjaGFyQ29kZT49NDgmJmNoYXJDb2RlPD01Nyk7cG9zaXRpb24rKyk7aWYocG9zaXRpb249PUluZGV4KXthYm9ydCgpfUluZGV4PXBvc2l0aW9ufWNoYXJDb2RlPXNvdXJjZS5jaGFyQ29kZUF0KEluZGV4KTtpZihjaGFyQ29kZT09MTAxfHxjaGFyQ29kZT09Njkpe2NoYXJDb2RlPXNvdXJjZS5jaGFyQ29kZUF0KCsrSW5kZXgpO2lmKGNoYXJDb2RlPT00M3x8Y2hhckNvZGU9PTQ1KXtJbmRleCsrfWZvcihwb3NpdGlvbj1JbmRleDtwb3NpdGlvbjxsZW5ndGgmJihjaGFyQ29kZT1zb3VyY2UuY2hhckNvZGVBdChwb3NpdGlvbiksY2hhckNvZGU+PTQ4JiZjaGFyQ29kZTw9NTcpO3Bvc2l0aW9uKyspO2lmKHBvc2l0aW9uPT1JbmRleCl7YWJvcnQoKX1JbmRleD1wb3NpdGlvbn1yZXR1cm4rc291cmNlLnNsaWNlKGJlZ2luLEluZGV4KX1pZihpc1NpZ25lZCl7YWJvcnQoKX1pZihzb3VyY2Uuc2xpY2UoSW5kZXgsSW5kZXgrNCk9PVwidHJ1ZVwiKXtJbmRleCs9NDtyZXR1cm4gdHJ1ZX1lbHNlIGlmKHNvdXJjZS5zbGljZShJbmRleCxJbmRleCs1KT09XCJmYWxzZVwiKXtJbmRleCs9NTtyZXR1cm4gZmFsc2V9ZWxzZSBpZihzb3VyY2Uuc2xpY2UoSW5kZXgsSW5kZXgrNCk9PVwibnVsbFwiKXtJbmRleCs9NDtyZXR1cm4gbnVsbH1hYm9ydCgpfX1yZXR1cm5cIiRcIn07dmFyIGdldD1mdW5jdGlvbih2YWx1ZSl7dmFyIHJlc3VsdHMsaGFzTWVtYmVycztpZih2YWx1ZT09XCIkXCIpe2Fib3J0KCl9aWYodHlwZW9mIHZhbHVlPT1cInN0cmluZ1wiKXtpZigoY2hhckluZGV4QnVnZ3k/dmFsdWUuY2hhckF0KDApOnZhbHVlWzBdKT09XCJAXCIpe3JldHVybiB2YWx1ZS5zbGljZSgxKX1pZih2YWx1ZT09XCJbXCIpe3Jlc3VsdHM9W107Zm9yKDs7aGFzTWVtYmVyc3x8KGhhc01lbWJlcnM9dHJ1ZSkpe3ZhbHVlPWxleCgpO2lmKHZhbHVlPT1cIl1cIil7YnJlYWt9aWYoaGFzTWVtYmVycyl7aWYodmFsdWU9PVwiLFwiKXt2YWx1ZT1sZXgoKTtpZih2YWx1ZT09XCJdXCIpe2Fib3J0KCl9fWVsc2V7YWJvcnQoKX19aWYodmFsdWU9PVwiLFwiKXthYm9ydCgpfXJlc3VsdHMucHVzaChnZXQodmFsdWUpKX1yZXR1cm4gcmVzdWx0c31lbHNlIGlmKHZhbHVlPT1cIntcIil7cmVzdWx0cz17fTtmb3IoOztoYXNNZW1iZXJzfHwoaGFzTWVtYmVycz10cnVlKSl7dmFsdWU9bGV4KCk7aWYodmFsdWU9PVwifVwiKXticmVha31pZihoYXNNZW1iZXJzKXtpZih2YWx1ZT09XCIsXCIpe3ZhbHVlPWxleCgpO2lmKHZhbHVlPT1cIn1cIil7YWJvcnQoKX19ZWxzZXthYm9ydCgpfX1pZih2YWx1ZT09XCIsXCJ8fHR5cGVvZiB2YWx1ZSE9XCJzdHJpbmdcInx8KGNoYXJJbmRleEJ1Z2d5P3ZhbHVlLmNoYXJBdCgwKTp2YWx1ZVswXSkhPVwiQFwifHxsZXgoKSE9XCI6XCIpe2Fib3J0KCl9cmVzdWx0c1t2YWx1ZS5zbGljZSgxKV09Z2V0KGxleCgpKVxufXJldHVybiByZXN1bHRzfWFib3J0KCl9cmV0dXJuIHZhbHVlfTt2YXIgdXBkYXRlPWZ1bmN0aW9uKHNvdXJjZSxwcm9wZXJ0eSxjYWxsYmFjayl7dmFyIGVsZW1lbnQ9d2Fsayhzb3VyY2UscHJvcGVydHksY2FsbGJhY2spO2lmKGVsZW1lbnQ9PT11bmRlZil7ZGVsZXRlIHNvdXJjZVtwcm9wZXJ0eV19ZWxzZXtzb3VyY2VbcHJvcGVydHldPWVsZW1lbnR9fTt2YXIgd2Fsaz1mdW5jdGlvbihzb3VyY2UscHJvcGVydHksY2FsbGJhY2spe3ZhciB2YWx1ZT1zb3VyY2VbcHJvcGVydHldLGxlbmd0aDtpZih0eXBlb2YgdmFsdWU9PVwib2JqZWN0XCImJnZhbHVlKXtpZihnZXRDbGFzcy5jYWxsKHZhbHVlKT09YXJyYXlDbGFzcyl7Zm9yKGxlbmd0aD12YWx1ZS5sZW5ndGg7bGVuZ3RoLS07KXt1cGRhdGUodmFsdWUsbGVuZ3RoLGNhbGxiYWNrKX19ZWxzZXtmb3JFYWNoKHZhbHVlLGZ1bmN0aW9uKHByb3BlcnR5KXt1cGRhdGUodmFsdWUscHJvcGVydHksY2FsbGJhY2spfSl9fXJldHVybiBjYWxsYmFjay5jYWxsKHNvdXJjZSxwcm9wZXJ0eSx2YWx1ZSl9O2V4cG9ydHMucGFyc2U9ZnVuY3Rpb24oc291cmNlLGNhbGxiYWNrKXt2YXIgcmVzdWx0LHZhbHVlO0luZGV4PTA7U291cmNlPVwiXCIrc291cmNlO3Jlc3VsdD1nZXQobGV4KCkpO2lmKGxleCgpIT1cIiRcIil7YWJvcnQoKX1JbmRleD1Tb3VyY2U9bnVsbDtyZXR1cm4gY2FsbGJhY2smJmdldENsYXNzLmNhbGwoY2FsbGJhY2spPT1mdW5jdGlvbkNsYXNzP3dhbGsoKHZhbHVlPXt9LHZhbHVlW1wiXCJdPXJlc3VsdCx2YWx1ZSksXCJcIixjYWxsYmFjayk6cmVzdWx0fX19ZXhwb3J0c1tcInJ1bkluQ29udGV4dFwiXT1ydW5JbkNvbnRleHQ7cmV0dXJuIGV4cG9ydHN9aWYoZnJlZUV4cG9ydHMmJiFpc0xvYWRlcil7cnVuSW5Db250ZXh0KHJvb3QsZnJlZUV4cG9ydHMpfWVsc2V7dmFyIG5hdGl2ZUpTT049cm9vdC5KU09OLHByZXZpb3VzSlNPTj1yb290W1wiSlNPTjNcIl0saXNSZXN0b3JlZD1mYWxzZTt2YXIgSlNPTjM9cnVuSW5Db250ZXh0KHJvb3Qscm9vdFtcIkpTT04zXCJdPXtub0NvbmZsaWN0OmZ1bmN0aW9uKCl7aWYoIWlzUmVzdG9yZWQpe2lzUmVzdG9yZWQ9dHJ1ZTtyb290LkpTT049bmF0aXZlSlNPTjtyb290W1wiSlNPTjNcIl09cHJldmlvdXNKU09OO25hdGl2ZUpTT049cHJldmlvdXNKU09OPW51bGx9cmV0dXJuIEpTT04zfX0pO3Jvb3QuSlNPTj17cGFyc2U6SlNPTjMucGFyc2Usc3RyaW5naWZ5OkpTT04zLnN0cmluZ2lmeX19aWYoaXNMb2FkZXIpe2RlZmluZShmdW5jdGlvbigpe3JldHVybiBKU09OM30pfX0pLmNhbGwodGhpcyl9KS5jYWxsKHRoaXMsdHlwZW9mIHNlbGYhPT1cInVuZGVmaW5lZFwiP3NlbGY6dHlwZW9mIHdpbmRvdyE9PVwidW5kZWZpbmVkXCI/d2luZG93OnR5cGVvZiBnbG9iYWwhPT1cInVuZGVmaW5lZFwiP2dsb2JhbDp7fSl9LHt9XSw1MTpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHM9dG9BcnJheTtmdW5jdGlvbiB0b0FycmF5KGxpc3QsaW5kZXgpe3ZhciBhcnJheT1bXTtpbmRleD1pbmRleHx8MDtmb3IodmFyIGk9aW5kZXh8fDA7aTxsaXN0Lmxlbmd0aDtpKyspe2FycmF5W2ktaW5kZXhdPWxpc3RbaV19cmV0dXJuIGFycmF5fX0se31dfSx7fSxbMzFdKSgzMSl9KTtcbiIsIi8vIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXG52YXIgY2xpZW50U29ja2V0O1xudmFyIHNlcnZpY2VUb1BsdWdpbk1hcDtcbnZhciBwZW5kaW5nVGVsZW1ldHJ5RXZlbnRzID0gW107XG5cbmZ1bmN0aW9uIGluaXQoc29ja2V0KSB7XG4gICAgY2xpZW50U29ja2V0ID0gc29ja2V0O1xuICAgIHRyeVNlbmRQZW5kaW5nRXZlbnRzKCk7XG59XG5cbmZ1bmN0aW9uIHJlZ2lzdGVyUGx1Z2luU2VydmljZXMocGx1Z2luU2VydmljZXMpIHtcbiAgICBzZXJ2aWNlVG9QbHVnaW5NYXAgPSBwbHVnaW5TZXJ2aWNlcztcbiAgICB0cnlTZW5kUGVuZGluZ0V2ZW50cygpO1xufVxuXG5mdW5jdGlvbiB0cnlTZW5kUGVuZGluZ0V2ZW50cygpIHtcbiAgICBpZiAoIWNsaWVudFNvY2tldCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIHVuc2VudCA9IFtdO1xuXG4gICAgcGVuZGluZ1RlbGVtZXRyeUV2ZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChldmVudERhdGEpIHtcbiAgICAgICAgaWYgKG11c3RNYXBTZXJ2aWNlVG9QbHVnaW4oZXZlbnREYXRhKSAmJiAhc2VydmljZVRvUGx1Z2luTWFwKSB7XG4gICAgICAgICAgICB1bnNlbnQucHVzaChldmVudERhdGEpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2VuZENsaWVudFRlbGVtZXRyeShldmVudERhdGEpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgcGVuZGluZ1RlbGVtZXRyeUV2ZW50cyA9IHVuc2VudDtcbn1cblxuZnVuY3Rpb24gbXVzdE1hcFNlcnZpY2VUb1BsdWdpbihldmVudERhdGEpIHtcbiAgICByZXR1cm4gISFldmVudERhdGEucHJvcHMuc2VydmljZSAmJiAhZXZlbnREYXRhLnBsdWdpbjtcbn1cblxuZnVuY3Rpb24gc2VuZENsaWVudFRlbGVtZXRyeShldmVudCwgcHJvcHMsIHBpaVByb3BzKSB7XG4gICAgdmFyIGV2ZW50RGF0YSA9IHtcbiAgICAgICAgZXZlbnQ6IGV2ZW50LFxuICAgICAgICBwcm9wczogcHJvcHMsXG4gICAgICAgIHBpaVByb3BzOiBwaWlQcm9wc1xuICAgIH07XG5cbiAgICBpZiAoIWNsaWVudFNvY2tldCkge1xuICAgICAgICBwZW5kaW5nVGVsZW1ldHJ5RXZlbnRzLnB1c2goZXZlbnREYXRhKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChtdXN0TWFwU2VydmljZVRvUGx1Z2luKGV2ZW50RGF0YSkpIHtcbiAgICAgICAgaWYgKCFzZXJ2aWNlVG9QbHVnaW5NYXApIHtcbiAgICAgICAgICAgIHBlbmRpbmdUZWxlbWV0cnlFdmVudHMucHVzaChldmVudERhdGEpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgZXZlbnREYXRhLnByb3BzLnBsdWdpbiA9IHNlcnZpY2VUb1BsdWdpbk1hcFtldmVudERhdGEucHJvcHMuc2VydmljZV0gfHwgJ191bmtub3duJztcbiAgICB9XG5cbiAgICBjbGllbnRTb2NrZXQuZW1pdCgndGVsZW1ldHJ5JywgZXZlbnREYXRhKTtcbn1cblxuZnVuY3Rpb24gc2VuZFVJVGVsZW1ldHJ5KHVpQ29udHJvbERhdGEpIHtcbiAgICBzZW5kQ2xpZW50VGVsZW1ldHJ5KCdwbHVnaW4tdWktaW50ZXJhY3Rpb24nLCB1aUNvbnRyb2xEYXRhKTtcbn1cblxubW9kdWxlLmV4cG9ydHMuaW5pdCA9IGluaXQ7XG5tb2R1bGUuZXhwb3J0cy5yZWdpc3RlclBsdWdpblNlcnZpY2VzID0gcmVnaXN0ZXJQbHVnaW5TZXJ2aWNlcztcbm1vZHVsZS5leHBvcnRzLnNlbmRDbGllbnRUZWxlbWV0cnkgPSBzZW5kQ2xpZW50VGVsZW1ldHJ5O1xubW9kdWxlLmV4cG9ydHMuc2VuZFVJVGVsZW1ldHJ5ID0gc2VuZFVJVGVsZW1ldHJ5O1xuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBCYXNlZCBpbiBwYXJ0IG9uIGNvZGUgZnJvbSBBcGFjaGUgUmlwcGxlLCBodHRwczovL2dpdGh1Yi5jb20vYXBhY2hlL2luY3ViYXRvci1yaXBwbGVcblxudmFyIHNlbGYsXG4gICAgZXhjZXB0aW9uID0gcmVxdWlyZSgnZXhjZXB0aW9uJyk7XG5cbnNlbGYgPSBtb2R1bGUuZXhwb3J0cyA9IHtcbiAgICB2YWxpZGF0ZUFyZ3VtZW50VHlwZTogZnVuY3Rpb24gKGFyZywgYXJnVHlwZSwgY3VzdG9tRXhjZXB0aW9uVHlwZSwgY3VzdG9tRXhjZXB0aW9uTWVzc2FnZSwgY3VzdG9tRXhjZXB0aW9uT2JqZWN0KSB7XG4gICAgICAgIHZhciBpbnZhbGlkQXJnID0gZmFsc2UsXG4gICAgICAgICAgICBtc2c7XG5cbiAgICAgICAgc3dpdGNoIChhcmdUeXBlKSB7XG4gICAgICAgICAgICBjYXNlICdhcnJheSc6XG4gICAgICAgICAgICAgICAgaWYgKCEoYXJnIGluc3RhbmNlb2YgQXJyYXkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGludmFsaWRBcmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ2RhdGUnOlxuICAgICAgICAgICAgICAgIGlmICghKGFyZyBpbnN0YW5jZW9mIERhdGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGludmFsaWRBcmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ2ludGVnZXInOlxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgYXJnID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoYXJnICE9PSBNYXRoLmZsb29yKGFyZykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGludmFsaWRBcmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpbnZhbGlkQXJnID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgYXJnICE9PSBhcmdUeXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIGludmFsaWRBcmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpbnZhbGlkQXJnKSB7XG4gICAgICAgICAgICBtc2cgPSBjdXN0b21FeGNlcHRpb25NZXNzYWdlICsgKCdcXG5cXG5JbnZhbGlkIEFyZ3VtZW50IHR5cGUuIGFyZ3VtZW50OiAnICsgYXJnICsgJyA9PT4gd2FzIGV4cGVjdGVkIHRvIGJlIG9mIHR5cGU6ICcgKyBhcmdUeXBlKTtcbiAgICAgICAgICAgIGV4Y2VwdGlvbi5yYWlzZSgoY3VzdG9tRXhjZXB0aW9uVHlwZSB8fCBleGNlcHRpb24udHlwZXMuQXJndW1lbnRUeXBlKSwgbXNnLCBjdXN0b21FeGNlcHRpb25PYmplY3QpO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIGZvckVhY2g6IGZ1bmN0aW9uIChvYmosIGFjdGlvbiwgc2NvcGUpIHtcbiAgICAgICAgaWYgKG9iaiBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICAgICAgICByZXR1cm4gb2JqLmZvckVhY2goYWN0aW9uLCBzY29wZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZWxmLm1hcChvYmosIGFjdGlvbiwgc2NvcGUpO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIG1hcDogZnVuY3Rpb24gKG9iaiwgZnVuYywgc2NvcGUpIHtcbiAgICAgICAgdmFyIGksXG4gICAgICAgICAgICByZXR1cm5WYWwgPSBudWxsLFxuICAgICAgICAgICAgcmVzdWx0ICAgID0gW107XG5cbiAgICAgICAgLy9Nb3pIYWNrIGZvciBOYW1lZE5vZGVNYXBcbiAgICAgICAgLyoganNoaW50IGlnbm9yZTpzdGFydCAqL1xuICAgICAgICBpZiAod2luZG93Lk1vek5hbWVkQXR0ck1hcCkge1xuICAgICAgICAgICAgTmFtZWROb2RlTWFwID0gd2luZG93Lk1vek5hbWVkQXR0ck1hcDsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1nbG9iYWwtYXNzaWduXG4gICAgICAgIH1cbiAgICAgICAgLyoganNoaW50IGlnbm9yZTplbmQgKi9cblxuICAgICAgICBpZiAob2JqIGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgICAgIHJldHVybiBvYmoubWFwKGZ1bmMsIHNjb3BlKTtcbiAgICAgICAgfSBlbHNlIGlmIChvYmogaW5zdGFuY2VvZiBOYW1lZE5vZGVNYXApIHtcbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBvYmoubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICByZXR1cm5WYWwgPSBmdW5jLmFwcGx5KHNjb3BlLCBbb2JqW2ldLCBpXSk7XG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2gocmV0dXJuVmFsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZvciAoaSBpbiBvYmopIHtcbiAgICAgICAgICAgICAgICBpZiAob2JqLmhhc093blByb3BlcnR5KGkpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVyblZhbCA9IGZ1bmMuYXBwbHkoc2NvcGUsIFtvYmpbaV0sIGldKTtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2gocmV0dXJuVmFsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0sXG5cbiAgICBiaW5kQXV0b1NhdmVFdmVudDogZnVuY3Rpb24gKHNlbGVjdG9yLCBzYXZlQ2FsbGJhY2spIHtcbiAgICAgICAgdmFyIG9sZFNldFRpbWVvdXRJZDtcbiAgICAgICAgdmFyIG5vZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcblxuICAgICAgICBpZiAoIW5vZGUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdBVVRPIFNBVkU6IFJFSU5TVEFURSBPTkNFIFdFIEhBVkUgJyArIHNlbGVjdG9yICsgJyBFTEVNRU5UJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBub2RlLmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBpZiAoZXZlbnQua2V5Q29kZSAhPT0gOSkge1xuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChvbGRTZXRUaW1lb3V0SWQpO1xuICAgICAgICAgICAgICAgIG9sZFNldFRpbWVvdXRJZCA9IHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgc2F2ZUNhbGxiYWNrKCk7XG4gICAgICAgICAgICAgICAgfSwgNTAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIG1peGluOiBmdW5jdGlvbiAobWl4aW4sIHRvKSB7XG4gICAgICAgIGZvciAodmFyIHByb3AgaW4gbWl4aW4pIHtcbiAgICAgICAgICAgIGlmIChPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtaXhpbiwgcHJvcCkpIHtcbiAgICAgICAgICAgICAgICB0b1twcm9wXSA9IG1peGluW3Byb3BdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcblxuICAgIGNvcHk6IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgdmFyIGksXG4gICAgICAgICAgICBuZXdPYmogPSBBcnJheS5pc0FycmF5KG9iaikgPyBbXSA6IHt9O1xuXG4gICAgICAgIGlmICh0eXBlb2Ygb2JqID09PSAnbnVtYmVyJyB8fFxuICAgICAgICAgICAgdHlwZW9mIG9iaiA9PT0gJ3N0cmluZycgfHxcbiAgICAgICAgICAgIHR5cGVvZiBvYmogPT09ICdib29sZWFuJyB8fFxuICAgICAgICAgICAgb2JqID09PSBudWxsIHx8XG4gICAgICAgICAgICBvYmogPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIG9iajtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvYmogaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IERhdGUob2JqKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvYmogaW5zdGFuY2VvZiBSZWdFeHApIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUmVnRXhwKG9iaik7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKGkgaW4gb2JqKSB7XG4gICAgICAgICAgICBpZiAob2JqLmhhc093blByb3BlcnR5KGkpKSB7XG4gICAgICAgICAgICAgICAgaWYgKG9ialtpXSAmJiB0eXBlb2Ygb2JqW2ldID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgICAgICBpZiAob2JqW2ldIGluc3RhbmNlb2YgRGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3T2JqW2ldID0gb2JqW2ldO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3T2JqW2ldID0gc2VsZi5jb3B5KG9ialtpXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld09ialtpXSA9IG9ialtpXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbmV3T2JqO1xuICAgIH0sXG5cbiAgICBuYXZIZWxwZXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIERpcmVjdGlvbnM6IHtcbiAgICAgICAgICAgICAgICBOOiAnTicsXG4gICAgICAgICAgICAgICAgTkU6ICdORScsXG4gICAgICAgICAgICAgICAgRTogJ0UnLFxuICAgICAgICAgICAgICAgIFNFOiAnU0UnLFxuICAgICAgICAgICAgICAgIFM6ICdTJyxcbiAgICAgICAgICAgICAgICBTVzogJ1NXJyxcbiAgICAgICAgICAgICAgICBXOiAnVycsXG4gICAgICAgICAgICAgICAgTlc6ICdOVydcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogR2V0IHRoZSBkaXJlY3Rpb24gYWNjb3JkaW5nIHRvIHRoZSBoZWFkaW5nIHZhbHVlLlxuICAgICAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IGhlYWRpbmcgQSBudW1iZXIgZnJvbSAwIHRvIDM1OS45OS5cbiAgICAgICAgICAgICAqIEByZXR1cm4ge3N0cmluZ30gZGlyZWN0aW9uIEl0IGNhbiBiZSBvbmUgb2YgdGhlIGZvbGxvd2luZzogTiwgTkUsIEUsIFNFLCBTLCBTVywgVyBvciBOVy5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgZ2V0RGlyZWN0aW9uOiBmdW5jdGlvbiAoaGVhZGluZykge1xuICAgICAgICAgICAgICAgIGlmIChoZWFkaW5nID4gMzM3LjUgfHwgKGhlYWRpbmcgPj0gMCAmJiBoZWFkaW5nIDw9IDIyLjUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLkRpcmVjdGlvbnMuTjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoaGVhZGluZyA+IDIyLjUgJiYgaGVhZGluZyA8PSA2Ny41KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLkRpcmVjdGlvbnMuTkU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGhlYWRpbmcgPiA2Ny41ICYmIGhlYWRpbmcgPD0gMTEyLjUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuRGlyZWN0aW9ucy5FO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChoZWFkaW5nID4gMTEyLjUgJiYgaGVhZGluZyA8PSAxNTcuNSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5EaXJlY3Rpb25zLlNFO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChoZWFkaW5nID4gMTU3LjUgJiYgaGVhZGluZyA8PSAyMDIuNSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5EaXJlY3Rpb25zLlM7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGhlYWRpbmcgPiAyMDIuNSAmJiBoZWFkaW5nIDw9IDI0Ny41KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLkRpcmVjdGlvbnMuU1c7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGhlYWRpbmcgPiAyNDcuNSAmJiBoZWFkaW5nIDw9IDI5Mi41KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLkRpcmVjdGlvbnMuVztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBoZWFkaW5nID4gMjkyLjUgJiYgaGVhZGluZyA8PSAzMzcuNVxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLkRpcmVjdGlvbnMuTlc7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBnZXRIZWFkaW5nOiBmdW5jdGlvbiAobGF0MSwgbG9uMSwgbGF0MiwgbG9uMikge1xuICAgICAgICAgICAgICAgIHZhciBkTG9uICA9IHRoaXMucmFkKGxvbjIgLSBsb24xKSxcbiAgICAgICAgICAgICAgICAgICAgbGxhdDEgPSB0aGlzLnJhZChsYXQxKSxcbiAgICAgICAgICAgICAgICAgICAgbGxhdDIgPSB0aGlzLnJhZChsYXQyKSxcbiAgICAgICAgICAgICAgICAgICAgeSAgICAgPSBNYXRoLnNpbihkTG9uKSAqIE1hdGguY29zKGxsYXQyKSxcbiAgICAgICAgICAgICAgICAgICAgeCAgICAgPSBNYXRoLmNvcyhsbGF0MSkgKiBNYXRoLnNpbihsbGF0MikgLSBNYXRoLnNpbihsbGF0MSkgKiBNYXRoLmNvcyhsbGF0MikgKiBNYXRoLmNvcyhkTG9uKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gKHRoaXMuZGVnKE1hdGguYXRhbjIoeSwgeCkpICsgMzYwKSAlIDM2MDtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIGdldERpc3RhbmNlOiBmdW5jdGlvbiAobGF0MSwgbG9uMSwgbGF0MiwgbG9uMikge1xuICAgICAgICAgICAgICAgIHZhciBkTGF0ID0gdGhpcy5yYWQobGF0MiAtIGxhdDEpLFxuICAgICAgICAgICAgICAgICAgICBkTG9uID0gdGhpcy5yYWQobG9uMiAtIGxvbjEpLFxuICAgICAgICAgICAgICAgICAgICBhICAgID0gTWF0aC5zaW4oZExhdCAvIDIpICogTWF0aC5zaW4oZExhdCAvIDIpICsgTWF0aC5jb3ModGhpcy5yYWQobGF0MSkpICogTWF0aC5jb3ModGhpcy5yYWQobGF0MikpICogTWF0aC5zaW4oZExvbiAvIDIpICogTWF0aC5zaW4oZExvbiAvIDIpLFxuICAgICAgICAgICAgICAgICAgICBjICAgID0gMiAqIE1hdGguYXNpbihNYXRoLnNxcnQoYSkpLFxuICAgICAgICAgICAgICAgICAgICBkICAgID0gNjM3ODEwMCAqIGM7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGQ7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBzaW11bGF0ZVRyYXZlbDogZnVuY3Rpb24gKGxhdCwgbG9uLCBoZGcsIGRpc3QpIHtcbiAgICAgICAgICAgICAgICB2YXIgbGF0MSAgICAgICAgICAgID0gdGhpcy5yYWQobGF0KSxcbiAgICAgICAgICAgICAgICAgICAgbG9uMSAgICAgICAgICAgID0gdGhpcy5yYWQobG9uKSxcbiAgICAgICAgICAgICAgICAgICAgYnJuZyAgICAgICAgICAgID0gdGhpcy5yYWQoaGRnKSxcbiAgICAgICAgICAgICAgICAgICAgYW5ndWxhckRpc3RhbmNlID0gZGlzdCAvIDYzNzgxMDAsXG4gICAgICAgICAgICAgICAgICAgIGxhdDIgICAgICAgICAgICA9IE1hdGguYXNpbihNYXRoLnNpbihsYXQxKSAqIE1hdGguY29zKGFuZ3VsYXJEaXN0YW5jZSkgKyBNYXRoLmNvcyhsYXQxKSAqIE1hdGguc2luKGFuZ3VsYXJEaXN0YW5jZSkgKiBNYXRoLmNvcyhicm5nKSksXG4gICAgICAgICAgICAgICAgICAgIGxvbjIgICAgICAgICAgICA9IGxvbjEgKyBNYXRoLmF0YW4yKE1hdGguc2luKGJybmcpICogTWF0aC5zaW4oYW5ndWxhckRpc3RhbmNlKSAqIE1hdGguY29zKGxhdDEpLCBNYXRoLmNvcyhhbmd1bGFyRGlzdGFuY2UpIC0gTWF0aC5zaW4obGF0MSkgKiBNYXRoLnNpbihsYXQyKSk7XG4gICAgICAgICAgICAgICAgbG9uMiA9IChsb24yICsgMyAqIE1hdGguUEkpICUgKDIgKiBNYXRoLlBJKSAtIE1hdGguUEk7IC8vIE5vcm1hbGl6ZSB0byAtMTgwLi4rMTgwXG5cbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBsYXRpdHVkZTogdGhpcy5kZWcobGF0MiksXG4gICAgICAgICAgICAgICAgICAgIGxvbmdpdHVkZTogdGhpcy5kZWcobG9uMilcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgZGVnOiBmdW5jdGlvbiAobnVtKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bSAqIDE4MCAvIE1hdGguUEk7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICByYWQ6IGZ1bmN0aW9uIChudW0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVtICogTWF0aC5QSSAvIDE4MDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9LFxuXG4gICAgY3JlYXRlVVVJRDogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gY3JlYXRlVVVJRFBhcnQoNCkgKyAnLScgK1xuICAgICAgICAgICAgY3JlYXRlVVVJRFBhcnQoMikgKyAnLScgK1xuICAgICAgICAgICAgY3JlYXRlVVVJRFBhcnQoMikgKyAnLScgK1xuICAgICAgICAgICAgY3JlYXRlVVVJRFBhcnQoMikgKyAnLScgK1xuICAgICAgICAgICAgY3JlYXRlVVVJRFBhcnQoNik7XG4gICAgfSxcblxuICAgIHR5cGVOYW1lOiBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsKS5zbGljZSg4LCAtMSk7XG4gICAgfSxcblxuICAgIHBhcnNlVXJsOiBmdW5jdGlvbiAodXJsKSB7XG4gICAgICAgIHZhciBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuXG4gICAgICAgIGEuaHJlZiA9IHVybDtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaHJlZjogYS5ocmVmLFxuICAgICAgICAgICAgaG9zdDogYS5ob3N0LFxuICAgICAgICAgICAgb3JpZ2luOiBhLm9yaWdpbixcbiAgICAgICAgICAgIHBvcnQ6IGEucG9ydCxcbiAgICAgICAgICAgIHByb3RvY29sOiBhLnByb3RvY29sLFxuICAgICAgICAgICAgc2VhcmNoOiBhLnNlYXJjaFxuICAgICAgICB9O1xuICAgIH0sXG5cbiAgICBpc1NhbWVPcmlnaW5SZXF1ZXN0OiBmdW5jdGlvbiAodXJsKSB7XG4gICAgICAgIHVybCA9IHRoaXMucGFyc2VVcmwodXJsKTtcblxuICAgICAgICBpZiAodXJsLnBvcnQgIT09IGxvY2F0aW9uLnBvcnQpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBzYW1lT3JpZ2luID0gdXJsLmhyZWYubWF0Y2gobG9jYXRpb24ub3JpZ2luLnJlcGxhY2UoL3d3d1xcLi8sICcnKSkgfHxcbiAgICAgICAgICAgICF1cmwuaHJlZi5tYXRjaCgvXmh0dHBzPzpcXC9cXC98XmZpbGU6XFwvXFwvLyk7XG5cbiAgICAgICAgcmV0dXJuICEhc2FtZU9yaWdpbjtcbiAgICB9LFxuXG4gICAgaXNOdW1iZXI6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB2YXIgdHlwZSA9IHR5cGVvZiB2YWx1ZTtcblxuICAgICAgICByZXR1cm4gKHR5cGUgPT09ICdudW1iZXInIHx8IHR5cGUgPT09ICdzdHJpbmcnKSAmJiAhaXNOYU4odmFsdWUgLSBwYXJzZUZsb2F0KHZhbHVlKSk7XG4gICAgfVxufTtcblxuZnVuY3Rpb24gY3JlYXRlVVVJRFBhcnQobGVuZ3RoKSB7XG4gICAgdmFyIHV1aWRwYXJ0ID0gJyc7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgdXVpZGNoYXIgPSBwYXJzZUludCgoTWF0aC5yYW5kb20oKSAqIDI1NiksIDEwKS50b1N0cmluZygxNik7XG4gICAgICAgIGlmICh1dWlkY2hhci5sZW5ndGggPT0gMSkge1xuICAgICAgICAgICAgdXVpZGNoYXIgPSAnMCcgKyB1dWlkY2hhcjtcbiAgICAgICAgfVxuICAgICAgICB1dWlkcGFydCArPSB1dWlkY2hhcjtcbiAgICB9XG4gICAgcmV0dXJuIHV1aWRwYXJ0O1xufVxuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IChjKSAyMDE0IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIFRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG4gKiBUaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbiAqIENvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG4gKiBzdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuICovXG4vLyBAdmVyc2lvbiAwLjcuMjBcbiFmdW5jdGlvbigpe3dpbmRvdy5XZWJDb21wb25lbnRzPXdpbmRvdy5XZWJDb21wb25lbnRzfHx7ZmxhZ3M6e319O3ZhciBlPVwid2ViY29tcG9uZW50cy5qc1wiLHQ9ZG9jdW1lbnQucXVlcnlTZWxlY3Rvcignc2NyaXB0W3NyYyo9XCInK2UrJ1wiXScpLG49e307aWYoIW4ubm9PcHRzKXtpZihsb2NhdGlvbi5zZWFyY2guc2xpY2UoMSkuc3BsaXQoXCImXCIpLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHQscj1lLnNwbGl0KFwiPVwiKTtyWzBdJiYodD1yWzBdLm1hdGNoKC93Yy0oLispLykpJiYoblt0WzFdXT1yWzFdfHwhMCl9KSx0KWZvcih2YXIgcixvPTA7cj10LmF0dHJpYnV0ZXNbb107bysrKVwic3JjXCIhPT1yLm5hbWUmJihuW3IubmFtZV09ci52YWx1ZXx8ITApO2lmKG4ubG9nJiZuLmxvZy5zcGxpdCl7dmFyIGk9bi5sb2cuc3BsaXQoXCIsXCIpO24ubG9nPXt9LGkuZm9yRWFjaChmdW5jdGlvbihlKXtuLmxvZ1tlXT0hMH0pfWVsc2Ugbi5sb2c9e319bi5zaGFkb3c9bi5zaGFkb3d8fG4uc2hhZG93ZG9tfHxuLnBvbHlmaWxsLFwibmF0aXZlXCI9PT1uLnNoYWRvdz9uLnNoYWRvdz0hMTpuLnNoYWRvdz1uLnNoYWRvd3x8IUhUTUxFbGVtZW50LnByb3RvdHlwZS5jcmVhdGVTaGFkb3dSb290LG4ucmVnaXN0ZXImJih3aW5kb3cuQ3VzdG9tRWxlbWVudHM9d2luZG93LkN1c3RvbUVsZW1lbnRzfHx7ZmxhZ3M6e319LHdpbmRvdy5DdXN0b21FbGVtZW50cy5mbGFncy5yZWdpc3Rlcj1uLnJlZ2lzdGVyKSxXZWJDb21wb25lbnRzLmZsYWdzPW59KCksV2ViQ29tcG9uZW50cy5mbGFncy5zaGFkb3cmJihcInVuZGVmaW5lZFwiPT10eXBlb2YgV2Vha01hcCYmIWZ1bmN0aW9uKCl7dmFyIGU9T2JqZWN0LmRlZmluZVByb3BlcnR5LHQ9RGF0ZS5ub3coKSUxZTksbj1mdW5jdGlvbigpe3RoaXMubmFtZT1cIl9fc3RcIisoMWU5Kk1hdGgucmFuZG9tKCk+Pj4wKSsodCsrICtcIl9fXCIpfTtuLnByb3RvdHlwZT17c2V0OmZ1bmN0aW9uKHQsbil7dmFyIHI9dFt0aGlzLm5hbWVdO3JldHVybiByJiZyWzBdPT09dD9yWzFdPW46ZSh0LHRoaXMubmFtZSx7dmFsdWU6W3Qsbl0sd3JpdGFibGU6ITB9KSx0aGlzfSxnZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuKHQ9ZVt0aGlzLm5hbWVdKSYmdFswXT09PWU/dFsxXTp2b2lkIDB9LFwiZGVsZXRlXCI6ZnVuY3Rpb24oZSl7dmFyIHQ9ZVt0aGlzLm5hbWVdO3JldHVybiB0JiZ0WzBdPT09ZT8odFswXT10WzFdPXZvaWQgMCwhMCk6ITF9LGhhczpmdW5jdGlvbihlKXt2YXIgdD1lW3RoaXMubmFtZV07cmV0dXJuIHQ/dFswXT09PWU6ITF9fSx3aW5kb3cuV2Vha01hcD1ufSgpLHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbD17fSxmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiB0KCl7aWYoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGNocm9tZSYmY2hyb21lLmFwcCYmY2hyb21lLmFwcC5ydW50aW1lKXJldHVybiExO2lmKG5hdmlnYXRvci5nZXREZXZpY2VTdG9yYWdlKXJldHVybiExO3RyeXt2YXIgZT1uZXcgRnVuY3Rpb24oXCJyZXR1cm4gdHJ1ZTtcIik7cmV0dXJuIGUoKX1jYXRjaCh0KXtyZXR1cm4hMX19ZnVuY3Rpb24gbihlKXtpZighZSl0aHJvdyBuZXcgRXJyb3IoXCJBc3NlcnRpb24gZmFpbGVkXCIpfWZ1bmN0aW9uIHIoZSx0KXtmb3IodmFyIG49Vyh0KSxyPTA7cjxuLmxlbmd0aDtyKyspe3ZhciBvPW5bcl07QShlLG8sRih0LG8pKX1yZXR1cm4gZX1mdW5jdGlvbiBvKGUsdCl7Zm9yKHZhciBuPVcodCkscj0wO3I8bi5sZW5ndGg7cisrKXt2YXIgbz1uW3JdO3N3aXRjaChvKXtjYXNlXCJhcmd1bWVudHNcIjpjYXNlXCJjYWxsZXJcIjpjYXNlXCJsZW5ndGhcIjpjYXNlXCJuYW1lXCI6Y2FzZVwicHJvdG90eXBlXCI6Y2FzZVwidG9TdHJpbmdcIjpjb250aW51ZX1BKGUsbyxGKHQsbykpfXJldHVybiBlfWZ1bmN0aW9uIGkoZSx0KXtmb3IodmFyIG49MDtuPHQubGVuZ3RoO24rKylpZih0W25daW4gZSlyZXR1cm4gdFtuXX1mdW5jdGlvbiBhKGUsdCxuKXtVLnZhbHVlPW4sQShlLHQsVSl9ZnVuY3Rpb24gcyhlLHQpe3ZhciBuPWUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSk7aWYocSl0cnl7VyhuKX1jYXRjaChyKXtuPW4uX19wcm90b19ffXZhciBvPVIuZ2V0KG4pO2lmKG8pcmV0dXJuIG87dmFyIGk9cyhuKSxhPUUoaSk7cmV0dXJuIGcobixhLHQpLGF9ZnVuY3Rpb24gYyhlLHQpe3coZSx0LCEwKX1mdW5jdGlvbiBsKGUsdCl7dyh0LGUsITEpfWZ1bmN0aW9uIHUoZSl7cmV0dXJuL15vblthLXpdKyQvLnRlc3QoZSl9ZnVuY3Rpb24gZChlKXtyZXR1cm4vXlthLXpBLVpfJF1bYS16QS1aXyQwLTldKiQvLnRlc3QoZSl9ZnVuY3Rpb24gcChlKXtyZXR1cm4gayYmZChlKT9uZXcgRnVuY3Rpb24oXCJyZXR1cm4gdGhpcy5fX2ltcGw0Y2YxZTc4MmhnX18uXCIrZSk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fX2ltcGw0Y2YxZTc4MmhnX19bZV19fWZ1bmN0aW9uIGgoZSl7cmV0dXJuIGsmJmQoZSk/bmV3IEZ1bmN0aW9uKFwidlwiLFwidGhpcy5fX2ltcGw0Y2YxZTc4MmhnX18uXCIrZStcIiA9IHZcIik6ZnVuY3Rpb24odCl7dGhpcy5fX2ltcGw0Y2YxZTc4MmhnX19bZV09dH19ZnVuY3Rpb24gZihlKXtyZXR1cm4gayYmZChlKT9uZXcgRnVuY3Rpb24oXCJyZXR1cm4gdGhpcy5fX2ltcGw0Y2YxZTc4MmhnX18uXCIrZStcIi5hcHBseSh0aGlzLl9faW1wbDRjZjFlNzgyaGdfXywgYXJndW1lbnRzKVwiKTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9faW1wbDRjZjFlNzgyaGdfX1tlXS5hcHBseSh0aGlzLl9faW1wbDRjZjFlNzgyaGdfXyxhcmd1bWVudHMpfX1mdW5jdGlvbiBtKGUsdCl7dHJ5e3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsdCl9Y2F0Y2gobil7cmV0dXJuIEJ9fWZ1bmN0aW9uIHcodCxuLHIsbyl7Zm9yKHZhciBpPVcodCksYT0wO2E8aS5sZW5ndGg7YSsrKXt2YXIgcz1pW2FdO2lmKFwicG9seW1lckJsYWNrTGlzdF9cIiE9PXMmJiEocyBpbiBufHx0LnBvbHltZXJCbGFja0xpc3RfJiZ0LnBvbHltZXJCbGFja0xpc3RfW3NdKSl7cSYmdC5fX2xvb2t1cEdldHRlcl9fKHMpO3ZhciBjLGwsZD1tKHQscyk7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgZC52YWx1ZSl7dmFyIHc9dShzKTtjPXc/ZS5nZXRFdmVudEhhbmRsZXJHZXR0ZXIocyk6cChzKSwoZC53cml0YWJsZXx8ZC5zZXR8fFYpJiYobD13P2UuZ2V0RXZlbnRIYW5kbGVyU2V0dGVyKHMpOmgocykpO3ZhciB2PVZ8fGQuY29uZmlndXJhYmxlO0EobixzLHtnZXQ6YyxzZXQ6bCxjb25maWd1cmFibGU6dixlbnVtZXJhYmxlOmQuZW51bWVyYWJsZX0pfWVsc2UgciYmKG5bc109ZihzKSl9fX1mdW5jdGlvbiB2KGUsdCxuKXtpZihudWxsIT1lKXt2YXIgcj1lLnByb3RvdHlwZTtnKHIsdCxuKSxvKHQsZSl9fWZ1bmN0aW9uIGcoZSx0LHIpe3ZhciBvPXQucHJvdG90eXBlO24odm9pZCAwPT09Ui5nZXQoZSkpLFIuc2V0KGUsdCksSS5zZXQobyxlKSxjKGUsbyksciYmbChvLHIpLGEobyxcImNvbnN0cnVjdG9yXCIsdCksdC5wcm90b3R5cGU9b31mdW5jdGlvbiBiKGUsdCl7cmV0dXJuIFIuZ2V0KHQucHJvdG90eXBlKT09PWV9ZnVuY3Rpb24geShlKXt2YXIgdD1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZSksbj1zKHQpLHI9RShuKTtyZXR1cm4gZyh0LHIsZSkscn1mdW5jdGlvbiBFKGUpe2Z1bmN0aW9uIHQodCl7ZS5jYWxsKHRoaXMsdCl9dmFyIG49T2JqZWN0LmNyZWF0ZShlLnByb3RvdHlwZSk7cmV0dXJuIG4uY29uc3RydWN0b3I9dCx0LnByb3RvdHlwZT1uLHR9ZnVuY3Rpb24gXyhlKXtyZXR1cm4gZSYmZS5fX2ltcGw0Y2YxZTc4MmhnX199ZnVuY3Rpb24gUyhlKXtyZXR1cm4hXyhlKX1mdW5jdGlvbiBUKGUpe2lmKG51bGw9PT1lKXJldHVybiBudWxsO24oUyhlKSk7dmFyIHQ9ZS5fX3dyYXBwZXI4ZTNkZDkzYTYwX187cmV0dXJuIG51bGwhPXQ/dDplLl9fd3JhcHBlcjhlM2RkOTNhNjBfXz1uZXcocyhlLGUpKShlKX1mdW5jdGlvbiBNKGUpe3JldHVybiBudWxsPT09ZT9udWxsOihuKF8oZSkpLGUuX19pbXBsNGNmMWU3ODJoZ19fKX1mdW5jdGlvbiBPKGUpe3JldHVybiBlLl9faW1wbDRjZjFlNzgyaGdfX31mdW5jdGlvbiBMKGUsdCl7dC5fX2ltcGw0Y2YxZTc4MmhnX189ZSxlLl9fd3JhcHBlcjhlM2RkOTNhNjBfXz10fWZ1bmN0aW9uIE4oZSl7cmV0dXJuIGUmJl8oZSk/TShlKTplfWZ1bmN0aW9uIEMoZSl7cmV0dXJuIGUmJiFfKGUpP1QoZSk6ZX1mdW5jdGlvbiBqKGUsdCl7bnVsbCE9PXQmJihuKFMoZSkpLG4odm9pZCAwPT09dHx8Xyh0KSksZS5fX3dyYXBwZXI4ZTNkZDkzYTYwX189dCl9ZnVuY3Rpb24gRChlLHQsbil7Ry5nZXQ9bixBKGUucHJvdG90eXBlLHQsRyl9ZnVuY3Rpb24gSChlLHQpe0QoZSx0LGZ1bmN0aW9uKCl7cmV0dXJuIFQodGhpcy5fX2ltcGw0Y2YxZTc4MmhnX19bdF0pfSl9ZnVuY3Rpb24geChlLHQpe2UuZm9yRWFjaChmdW5jdGlvbihlKXt0LmZvckVhY2goZnVuY3Rpb24odCl7ZS5wcm90b3R5cGVbdF09ZnVuY3Rpb24oKXt2YXIgZT1DKHRoaXMpO3JldHVybiBlW3RdLmFwcGx5KGUsYXJndW1lbnRzKX19KX0pfXZhciBSPW5ldyBXZWFrTWFwLEk9bmV3IFdlYWtNYXAsUD1PYmplY3QuY3JlYXRlKG51bGwpLGs9dCgpLEE9T2JqZWN0LmRlZmluZVByb3BlcnR5LFc9T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMsRj1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yLFU9e3ZhbHVlOnZvaWQgMCxjb25maWd1cmFibGU6ITAsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMH07Vyh3aW5kb3cpO3ZhciBxPS9GaXJlZm94Ly50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpLEI9e2dldDpmdW5jdGlvbigpe30sc2V0OmZ1bmN0aW9uKGUpe30sY29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITB9LFY9ZnVuY3Rpb24oKXt2YXIgZT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKE5vZGUucHJvdG90eXBlLFwibm9kZVR5cGVcIik7cmV0dXJuIGUmJiFlLmdldCYmIWUuc2V0fSgpLEc9e2dldDp2b2lkIDAsY29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITB9O2UuYWRkRm9yd2FyZGluZ1Byb3BlcnRpZXM9YyxlLmFzc2VydD1uLGUuY29uc3RydWN0b3JUYWJsZT1SLGUuZGVmaW5lR2V0dGVyPUQsZS5kZWZpbmVXcmFwR2V0dGVyPUgsZS5mb3J3YXJkTWV0aG9kc1RvV3JhcHBlcj14LGUuaXNJZGVudGlmaWVyTmFtZT1kLGUuaXNXcmFwcGVyPV8sZS5pc1dyYXBwZXJGb3I9YixlLm1peGluPXIsZS5uYXRpdmVQcm90b3R5cGVUYWJsZT1JLGUub25lT2Y9aSxlLnJlZ2lzdGVyT2JqZWN0PXksZS5yZWdpc3RlcldyYXBwZXI9dixlLnJld3JhcD1qLGUuc2V0V3JhcHBlcj1MLGUudW5zYWZlVW53cmFwPU8sZS51bndyYXA9TSxlLnVud3JhcElmTmVlZGVkPU4sZS53cmFwPVQsZS53cmFwSWZOZWVkZWQ9QyxlLndyYXBwZXJzPVB9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gdChlLHQsbil7cmV0dXJue2luZGV4OmUscmVtb3ZlZDp0LGFkZGVkQ291bnQ6bn19ZnVuY3Rpb24gbigpe312YXIgcj0wLG89MSxpPTIsYT0zO24ucHJvdG90eXBlPXtjYWxjRWRpdERpc3RhbmNlczpmdW5jdGlvbihlLHQsbixyLG8saSl7Zm9yKHZhciBhPWktbysxLHM9bi10KzEsYz1uZXcgQXJyYXkoYSksbD0wO2E+bDtsKyspY1tsXT1uZXcgQXJyYXkocyksY1tsXVswXT1sO2Zvcih2YXIgdT0wO3M+dTt1KyspY1swXVt1XT11O2Zvcih2YXIgbD0xO2E+bDtsKyspZm9yKHZhciB1PTE7cz51O3UrKylpZih0aGlzLmVxdWFscyhlW3QrdS0xXSxyW28rbC0xXSkpY1tsXVt1XT1jW2wtMV1bdS0xXTtlbHNle3ZhciBkPWNbbC0xXVt1XSsxLHA9Y1tsXVt1LTFdKzE7Y1tsXVt1XT1wPmQ/ZDpwfXJldHVybiBjfSxzcGxpY2VPcGVyYXRpb25zRnJvbUVkaXREaXN0YW5jZXM6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PWUubGVuZ3RoLTEsbj1lWzBdLmxlbmd0aC0xLHM9ZVt0XVtuXSxjPVtdO3Q+MHx8bj4wOylpZigwIT10KWlmKDAhPW4pe3ZhciBsLHU9ZVt0LTFdW24tMV0sZD1lW3QtMV1bbl0scD1lW3RdW24tMV07bD1wPmQ/dT5kP2Q6dTp1PnA/cDp1LGw9PXU/KHU9PXM/Yy5wdXNoKHIpOihjLnB1c2gobykscz11KSx0LS0sbi0tKTpsPT1kPyhjLnB1c2goYSksdC0tLHM9ZCk6KGMucHVzaChpKSxuLS0scz1wKX1lbHNlIGMucHVzaChhKSx0LS07ZWxzZSBjLnB1c2goaSksbi0tO3JldHVybiBjLnJldmVyc2UoKSxjfSxjYWxjU3BsaWNlczpmdW5jdGlvbihlLG4scyxjLGwsdSl7dmFyIGQ9MCxwPTAsaD1NYXRoLm1pbihzLW4sdS1sKTtpZigwPT1uJiYwPT1sJiYoZD10aGlzLnNoYXJlZFByZWZpeChlLGMsaCkpLHM9PWUubGVuZ3RoJiZ1PT1jLmxlbmd0aCYmKHA9dGhpcy5zaGFyZWRTdWZmaXgoZSxjLGgtZCkpLG4rPWQsbCs9ZCxzLT1wLHUtPXAscy1uPT0wJiZ1LWw9PTApcmV0dXJuW107aWYobj09cyl7Zm9yKHZhciBmPXQobixbXSwwKTt1Pmw7KWYucmVtb3ZlZC5wdXNoKGNbbCsrXSk7cmV0dXJuW2ZdfWlmKGw9PXUpcmV0dXJuW3QobixbXSxzLW4pXTtmb3IodmFyIG09dGhpcy5zcGxpY2VPcGVyYXRpb25zRnJvbUVkaXREaXN0YW5jZXModGhpcy5jYWxjRWRpdERpc3RhbmNlcyhlLG4scyxjLGwsdSkpLGY9dm9pZCAwLHc9W10sdj1uLGc9bCxiPTA7YjxtLmxlbmd0aDtiKyspc3dpdGNoKG1bYl0pe2Nhc2UgcjpmJiYody5wdXNoKGYpLGY9dm9pZCAwKSx2KyssZysrO2JyZWFrO2Nhc2UgbzpmfHwoZj10KHYsW10sMCkpLGYuYWRkZWRDb3VudCsrLHYrKyxmLnJlbW92ZWQucHVzaChjW2ddKSxnKys7YnJlYWs7Y2FzZSBpOmZ8fChmPXQodixbXSwwKSksZi5hZGRlZENvdW50KyssdisrO2JyZWFrO2Nhc2UgYTpmfHwoZj10KHYsW10sMCkpLGYucmVtb3ZlZC5wdXNoKGNbZ10pLGcrK31yZXR1cm4gZiYmdy5wdXNoKGYpLHd9LHNoYXJlZFByZWZpeDpmdW5jdGlvbihlLHQsbil7Zm9yKHZhciByPTA7bj5yO3IrKylpZighdGhpcy5lcXVhbHMoZVtyXSx0W3JdKSlyZXR1cm4gcjtyZXR1cm4gbn0sc2hhcmVkU3VmZml4OmZ1bmN0aW9uKGUsdCxuKXtmb3IodmFyIHI9ZS5sZW5ndGgsbz10Lmxlbmd0aCxpPTA7bj5pJiZ0aGlzLmVxdWFscyhlWy0tcl0sdFstLW9dKTspaSsrO3JldHVybiBpfSxjYWxjdWxhdGVTcGxpY2VzOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuY2FsY1NwbGljZXMoZSwwLGUubGVuZ3RoLHQsMCx0Lmxlbmd0aCl9LGVxdWFsczpmdW5jdGlvbihlLHQpe3JldHVybiBlPT09dH19LGUuQXJyYXlTcGxpY2U9bn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiB0KCl7YT0hMTt2YXIgZT1pLnNsaWNlKDApO2k9W107Zm9yKHZhciB0PTA7dDxlLmxlbmd0aDt0KyspKDAsZVt0XSkoKX1mdW5jdGlvbiBuKGUpe2kucHVzaChlKSxhfHwoYT0hMCxyKHQsMCkpfXZhciByLG89d2luZG93Lk11dGF0aW9uT2JzZXJ2ZXIsaT1bXSxhPSExO2lmKG8pe3ZhciBzPTEsYz1uZXcgbyh0KSxsPWRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHMpO2Mub2JzZXJ2ZShsLHtjaGFyYWN0ZXJEYXRhOiEwfSkscj1mdW5jdGlvbigpe3M9KHMrMSklMixsLmRhdGE9c319ZWxzZSByPXdpbmRvdy5zZXRUaW1lb3V0O2Uuc2V0RW5kT2ZNaWNyb3Rhc2s9bn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiB0KGUpe2Uuc2NoZWR1bGVkX3x8KGUuc2NoZWR1bGVkXz0hMCxmLnB1c2goZSksbXx8KHUobiksbT0hMCkpfWZ1bmN0aW9uIG4oKXtmb3IobT0hMTtmLmxlbmd0aDspe3ZhciBlPWY7Zj1bXSxlLnNvcnQoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS51aWRfLXQudWlkX30pO2Zvcih2YXIgdD0wO3Q8ZS5sZW5ndGg7dCsrKXt2YXIgbj1lW3RdO24uc2NoZWR1bGVkXz0hMTt2YXIgcj1uLnRha2VSZWNvcmRzKCk7aShuKSxyLmxlbmd0aCYmbi5jYWxsYmFja18ocixuKX19fWZ1bmN0aW9uIHIoZSx0KXt0aGlzLnR5cGU9ZSx0aGlzLnRhcmdldD10LHRoaXMuYWRkZWROb2Rlcz1uZXcgcC5Ob2RlTGlzdCx0aGlzLnJlbW92ZWROb2Rlcz1uZXcgcC5Ob2RlTGlzdCx0aGlzLnByZXZpb3VzU2libGluZz1udWxsLHRoaXMubmV4dFNpYmxpbmc9bnVsbCx0aGlzLmF0dHJpYnV0ZU5hbWU9bnVsbCx0aGlzLmF0dHJpYnV0ZU5hbWVzcGFjZT1udWxsLHRoaXMub2xkVmFsdWU9bnVsbH1mdW5jdGlvbiBvKGUsdCl7Zm9yKDtlO2U9ZS5wYXJlbnROb2RlKXt2YXIgbj1oLmdldChlKTtpZihuKWZvcih2YXIgcj0wO3I8bi5sZW5ndGg7cisrKXt2YXIgbz1uW3JdO28ub3B0aW9ucy5zdWJ0cmVlJiZvLmFkZFRyYW5zaWVudE9ic2VydmVyKHQpfX19ZnVuY3Rpb24gaShlKXtmb3IodmFyIHQ9MDt0PGUubm9kZXNfLmxlbmd0aDt0Kyspe3ZhciBuPWUubm9kZXNfW3RdLHI9aC5nZXQobik7aWYoIXIpcmV0dXJuO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXt2YXIgaT1yW29dO2kub2JzZXJ2ZXI9PT1lJiZpLnJlbW92ZVRyYW5zaWVudE9ic2VydmVycygpfX19ZnVuY3Rpb24gYShlLG4sbyl7Zm9yKHZhciBpPU9iamVjdC5jcmVhdGUobnVsbCksYT1PYmplY3QuY3JlYXRlKG51bGwpLHM9ZTtzO3M9cy5wYXJlbnROb2RlKXt2YXIgYz1oLmdldChzKTtpZihjKWZvcih2YXIgbD0wO2w8Yy5sZW5ndGg7bCsrKXt2YXIgdT1jW2xdLGQ9dS5vcHRpb25zO2lmKChzPT09ZXx8ZC5zdWJ0cmVlKSYmKFwiYXR0cmlidXRlc1wiIT09bnx8ZC5hdHRyaWJ1dGVzKSYmKFwiYXR0cmlidXRlc1wiIT09bnx8IWQuYXR0cmlidXRlRmlsdGVyfHxudWxsPT09by5uYW1lc3BhY2UmJi0xIT09ZC5hdHRyaWJ1dGVGaWx0ZXIuaW5kZXhPZihvLm5hbWUpKSYmKFwiY2hhcmFjdGVyRGF0YVwiIT09bnx8ZC5jaGFyYWN0ZXJEYXRhKSYmKFwiY2hpbGRMaXN0XCIhPT1ufHxkLmNoaWxkTGlzdCkpe3ZhciBwPXUub2JzZXJ2ZXI7aVtwLnVpZF9dPXAsKFwiYXR0cmlidXRlc1wiPT09biYmZC5hdHRyaWJ1dGVPbGRWYWx1ZXx8XCJjaGFyYWN0ZXJEYXRhXCI9PT1uJiZkLmNoYXJhY3RlckRhdGFPbGRWYWx1ZSkmJihhW3AudWlkX109by5vbGRWYWx1ZSl9fX1mb3IodmFyIGYgaW4gaSl7dmFyIHA9aVtmXSxtPW5ldyByKG4sZSk7XCJuYW1lXCJpbiBvJiZcIm5hbWVzcGFjZVwiaW4gbyYmKG0uYXR0cmlidXRlTmFtZT1vLm5hbWUsbS5hdHRyaWJ1dGVOYW1lc3BhY2U9by5uYW1lc3BhY2UpLG8uYWRkZWROb2RlcyYmKG0uYWRkZWROb2Rlcz1vLmFkZGVkTm9kZXMpLG8ucmVtb3ZlZE5vZGVzJiYobS5yZW1vdmVkTm9kZXM9by5yZW1vdmVkTm9kZXMpLG8ucHJldmlvdXNTaWJsaW5nJiYobS5wcmV2aW91c1NpYmxpbmc9by5wcmV2aW91c1NpYmxpbmcpLG8ubmV4dFNpYmxpbmcmJihtLm5leHRTaWJsaW5nPW8ubmV4dFNpYmxpbmcpLHZvaWQgMCE9PWFbZl0mJihtLm9sZFZhbHVlPWFbZl0pLHQocCkscC5yZWNvcmRzXy5wdXNoKG0pfX1mdW5jdGlvbiBzKGUpe2lmKHRoaXMuY2hpbGRMaXN0PSEhZS5jaGlsZExpc3QsdGhpcy5zdWJ0cmVlPSEhZS5zdWJ0cmVlLFwiYXR0cmlidXRlc1wiaW4gZXx8IShcImF0dHJpYnV0ZU9sZFZhbHVlXCJpbiBlfHxcImF0dHJpYnV0ZUZpbHRlclwiaW4gZSk/dGhpcy5hdHRyaWJ1dGVzPSEhZS5hdHRyaWJ1dGVzOnRoaXMuYXR0cmlidXRlcz0hMCxcImNoYXJhY3RlckRhdGFPbGRWYWx1ZVwiaW4gZSYmIShcImNoYXJhY3RlckRhdGFcImluIGUpP3RoaXMuY2hhcmFjdGVyRGF0YT0hMDp0aGlzLmNoYXJhY3RlckRhdGE9ISFlLmNoYXJhY3RlckRhdGEsIXRoaXMuYXR0cmlidXRlcyYmKGUuYXR0cmlidXRlT2xkVmFsdWV8fFwiYXR0cmlidXRlRmlsdGVyXCJpbiBlKXx8IXRoaXMuY2hhcmFjdGVyRGF0YSYmZS5jaGFyYWN0ZXJEYXRhT2xkVmFsdWUpdGhyb3cgbmV3IFR5cGVFcnJvcjtpZih0aGlzLmNoYXJhY3RlckRhdGE9ISFlLmNoYXJhY3RlckRhdGEsdGhpcy5hdHRyaWJ1dGVPbGRWYWx1ZT0hIWUuYXR0cmlidXRlT2xkVmFsdWUsdGhpcy5jaGFyYWN0ZXJEYXRhT2xkVmFsdWU9ISFlLmNoYXJhY3RlckRhdGFPbGRWYWx1ZSxcImF0dHJpYnV0ZUZpbHRlclwiaW4gZSl7aWYobnVsbD09ZS5hdHRyaWJ1dGVGaWx0ZXJ8fFwib2JqZWN0XCIhPXR5cGVvZiBlLmF0dHJpYnV0ZUZpbHRlcil0aHJvdyBuZXcgVHlwZUVycm9yO3RoaXMuYXR0cmlidXRlRmlsdGVyPXcuY2FsbChlLmF0dHJpYnV0ZUZpbHRlcil9ZWxzZSB0aGlzLmF0dHJpYnV0ZUZpbHRlcj1udWxsfWZ1bmN0aW9uIGMoZSl7dGhpcy5jYWxsYmFja189ZSx0aGlzLm5vZGVzXz1bXSx0aGlzLnJlY29yZHNfPVtdLHRoaXMudWlkXz0rK3YsdGhpcy5zY2hlZHVsZWRfPSExfWZ1bmN0aW9uIGwoZSx0LG4pe3RoaXMub2JzZXJ2ZXI9ZSx0aGlzLnRhcmdldD10LHRoaXMub3B0aW9ucz1uLHRoaXMudHJhbnNpZW50T2JzZXJ2ZWROb2Rlcz1bXX12YXIgdT1lLnNldEVuZE9mTWljcm90YXNrLGQ9ZS53cmFwSWZOZWVkZWQscD1lLndyYXBwZXJzLGg9bmV3IFdlYWtNYXAsZj1bXSxtPSExLHc9QXJyYXkucHJvdG90eXBlLnNsaWNlLHY9MDtjLnByb3RvdHlwZT17Y29uc3RydWN0b3I6YyxvYnNlcnZlOmZ1bmN0aW9uKGUsdCl7ZT1kKGUpO3ZhciBuLHI9bmV3IHModCksbz1oLmdldChlKTtvfHxoLnNldChlLG89W10pO2Zvcih2YXIgaT0wO2k8by5sZW5ndGg7aSsrKW9baV0ub2JzZXJ2ZXI9PT10aGlzJiYobj1vW2ldLG4ucmVtb3ZlVHJhbnNpZW50T2JzZXJ2ZXJzKCksbi5vcHRpb25zPXIpO258fChuPW5ldyBsKHRoaXMsZSxyKSxvLnB1c2gobiksdGhpcy5ub2Rlc18ucHVzaChlKSl9LGRpc2Nvbm5lY3Q6ZnVuY3Rpb24oKXt0aGlzLm5vZGVzXy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1oLmdldChlKSxuPTA7bjx0Lmxlbmd0aDtuKyspe3ZhciByPXRbbl07aWYoci5vYnNlcnZlcj09PXRoaXMpe3Quc3BsaWNlKG4sMSk7YnJlYWt9fX0sdGhpcyksdGhpcy5yZWNvcmRzXz1bXX0sdGFrZVJlY29yZHM6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnJlY29yZHNfO3JldHVybiB0aGlzLnJlY29yZHNfPVtdLGV9fSxsLnByb3RvdHlwZT17YWRkVHJhbnNpZW50T2JzZXJ2ZXI6ZnVuY3Rpb24oZSl7aWYoZSE9PXRoaXMudGFyZ2V0KXt0KHRoaXMub2JzZXJ2ZXIpLHRoaXMudHJhbnNpZW50T2JzZXJ2ZWROb2Rlcy5wdXNoKGUpO3ZhciBuPWguZ2V0KGUpO258fGguc2V0KGUsbj1bXSksbi5wdXNoKHRoaXMpfX0scmVtb3ZlVHJhbnNpZW50T2JzZXJ2ZXJzOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy50cmFuc2llbnRPYnNlcnZlZE5vZGVzO3RoaXMudHJhbnNpZW50T2JzZXJ2ZWROb2Rlcz1bXTtmb3IodmFyIHQ9MDt0PGUubGVuZ3RoO3QrKylmb3IodmFyIG49ZVt0XSxyPWguZ2V0KG4pLG89MDtvPHIubGVuZ3RoO28rKylpZihyW29dPT09dGhpcyl7ci5zcGxpY2UobywxKTticmVha319fSxlLmVucXVldWVNdXRhdGlvbj1hLGUucmVnaXN0ZXJUcmFuc2llbnRPYnNlcnZlcnM9byxlLndyYXBwZXJzLk11dGF0aW9uT2JzZXJ2ZXI9YyxlLndyYXBwZXJzLk11dGF0aW9uUmVjb3JkPXJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gdChlLHQpe3RoaXMucm9vdD1lLHRoaXMucGFyZW50PXR9ZnVuY3Rpb24gbihlLHQpe2lmKGUudHJlZVNjb3BlXyE9PXQpe2UudHJlZVNjb3BlXz10O2Zvcih2YXIgcj1lLnNoYWRvd1Jvb3Q7cjtyPXIub2xkZXJTaGFkb3dSb290KXIudHJlZVNjb3BlXy5wYXJlbnQ9dDtmb3IodmFyIG89ZS5maXJzdENoaWxkO287bz1vLm5leHRTaWJsaW5nKW4obyx0KX19ZnVuY3Rpb24gcihuKXtpZihuIGluc3RhbmNlb2YgZS53cmFwcGVycy5XaW5kb3csbi50cmVlU2NvcGVfKXJldHVybiBuLnRyZWVTY29wZV87dmFyIG8saT1uLnBhcmVudE5vZGU7cmV0dXJuIG89aT9yKGkpOm5ldyB0KG4sbnVsbCksbi50cmVlU2NvcGVfPW99dC5wcm90b3R5cGU9e2dldCByZW5kZXJlcigpe3JldHVybiB0aGlzLnJvb3QgaW5zdGFuY2VvZiBlLndyYXBwZXJzLlNoYWRvd1Jvb3Q/ZS5nZXRSZW5kZXJlckZvckhvc3QodGhpcy5yb290Lmhvc3QpOm51bGx9LGNvbnRhaW5zOmZ1bmN0aW9uKGUpe2Zvcig7ZTtlPWUucGFyZW50KWlmKGU9PT10aGlzKXJldHVybiEwO3JldHVybiExfX0sZS5UcmVlU2NvcGU9dCxlLmdldFRyZWVTY29wZT1yLGUuc2V0VHJlZVNjb3BlPW59KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gdChlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIEcuU2hhZG93Um9vdH1mdW5jdGlvbiBuKGUpe3JldHVybiBBKGUpLnJvb3R9ZnVuY3Rpb24gcihlLHIpe3ZhciBzPVtdLGM9ZTtmb3Iocy5wdXNoKGMpO2M7KXt2YXIgbD1hKGMpO2lmKGwmJmwubGVuZ3RoPjApe2Zvcih2YXIgdT0wO3U8bC5sZW5ndGg7dSsrKXt2YXIgcD1sW3VdO2lmKGkocCkpe3ZhciBoPW4ocCksZj1oLm9sZGVyU2hhZG93Um9vdDtmJiZzLnB1c2goZil9cy5wdXNoKHApfWM9bFtsLmxlbmd0aC0xXX1lbHNlIGlmKHQoYykpe2lmKGQoZSxjKSYmbyhyKSlicmVhaztjPWMuaG9zdCxzLnB1c2goYyl9ZWxzZSBjPWMucGFyZW50Tm9kZSxjJiZzLnB1c2goYyl9cmV0dXJuIHN9ZnVuY3Rpb24gbyhlKXtpZighZSlyZXR1cm4hMTtzd2l0Y2goZS50eXBlKXtjYXNlXCJhYm9ydFwiOmNhc2VcImVycm9yXCI6Y2FzZVwic2VsZWN0XCI6Y2FzZVwiY2hhbmdlXCI6Y2FzZVwibG9hZFwiOmNhc2VcInJlc2V0XCI6Y2FzZVwicmVzaXplXCI6Y2FzZVwic2Nyb2xsXCI6Y2FzZVwic2VsZWN0c3RhcnRcIjpyZXR1cm4hMH1yZXR1cm4hMX1mdW5jdGlvbiBpKGUpe3JldHVybiBlIGluc3RhbmNlb2YgSFRNTFNoYWRvd0VsZW1lbnR9ZnVuY3Rpb24gYSh0KXtyZXR1cm4gZS5nZXREZXN0aW5hdGlvbkluc2VydGlvblBvaW50cyh0KX1mdW5jdGlvbiBzKGUsdCl7aWYoMD09PWUubGVuZ3RoKXJldHVybiB0O3QgaW5zdGFuY2VvZiBHLldpbmRvdyYmKHQ9dC5kb2N1bWVudCk7Zm9yKHZhciBuPUEodCkscj1lWzBdLG89QShyKSxpPWwobixvKSxhPTA7YTxlLmxlbmd0aDthKyspe3ZhciBzPWVbYV07aWYoQShzKT09PWkpcmV0dXJuIHN9cmV0dXJuIGVbZS5sZW5ndGgtMV19ZnVuY3Rpb24gYyhlKXtmb3IodmFyIHQ9W107ZTtlPWUucGFyZW50KXQucHVzaChlKTtyZXR1cm4gdH1mdW5jdGlvbiBsKGUsdCl7Zm9yKHZhciBuPWMoZSkscj1jKHQpLG89bnVsbDtuLmxlbmd0aD4wJiZyLmxlbmd0aD4wOyl7dmFyIGk9bi5wb3AoKSxhPXIucG9wKCk7aWYoaSE9PWEpYnJlYWs7bz1pfXJldHVybiBvfWZ1bmN0aW9uIHUoZSx0LG4pe3QgaW5zdGFuY2VvZiBHLldpbmRvdyYmKHQ9dC5kb2N1bWVudCk7dmFyIG8saT1BKHQpLGE9QShuKSxzPXIobixlKSxvPWwoaSxhKTtvfHwobz1hLnJvb3QpO2Zvcih2YXIgYz1vO2M7Yz1jLnBhcmVudClmb3IodmFyIHU9MDt1PHMubGVuZ3RoO3UrKyl7dmFyIGQ9c1t1XTtpZihBKGQpPT09YylyZXR1cm4gZH1yZXR1cm4gbnVsbH1mdW5jdGlvbiBkKGUsdCl7cmV0dXJuIEEoZSk9PT1BKHQpfWZ1bmN0aW9uIHAoZSl7aWYoIUsuZ2V0KGUpJiYoSy5zZXQoZSwhMCksZihWKGUpLFYoZS50YXJnZXQpKSxQKSl7dmFyIHQ9UDt0aHJvdyBQPW51bGwsdH19ZnVuY3Rpb24gaChlKXtzd2l0Y2goZS50eXBlKXtjYXNlXCJsb2FkXCI6Y2FzZVwiYmVmb3JldW5sb2FkXCI6Y2FzZVwidW5sb2FkXCI6cmV0dXJuITB9cmV0dXJuITF9ZnVuY3Rpb24gZih0LG4pe2lmKCQuZ2V0KHQpKXRocm93IG5ldyBFcnJvcihcIkludmFsaWRTdGF0ZUVycm9yXCIpOyQuc2V0KHQsITApLGUucmVuZGVyQWxsUGVuZGluZygpO3ZhciBvLGksYTtpZihoKHQpJiYhdC5idWJibGVzKXt2YXIgcz1uO3MgaW5zdGFuY2VvZiBHLkRvY3VtZW50JiYoYT1zLmRlZmF1bHRWaWV3KSYmKGk9cyxvPVtdKX1pZighbylpZihuIGluc3RhbmNlb2YgRy5XaW5kb3cpYT1uLG89W107ZWxzZSBpZihvPXIobix0KSwhaCh0KSl7dmFyIHM9b1tvLmxlbmd0aC0xXTtzIGluc3RhbmNlb2YgRy5Eb2N1bWVudCYmKGE9cy5kZWZhdWx0Vmlldyl9cmV0dXJuIG5lLnNldCh0LG8pLG0odCxvLGEsaSkmJncodCxvLGEsaSkmJnYodCxvLGEsaSksSi5zZXQodCxyZSksWVtcImRlbGV0ZVwiXSh0LG51bGwpLCRbXCJkZWxldGVcIl0odCksdC5kZWZhdWx0UHJldmVudGVkfWZ1bmN0aW9uIG0oZSx0LG4scil7dmFyIG89b2U7aWYobiYmIWcobixlLG8sdCxyKSlyZXR1cm4hMTtmb3IodmFyIGk9dC5sZW5ndGgtMTtpPjA7aS0tKWlmKCFnKHRbaV0sZSxvLHQscikpcmV0dXJuITE7cmV0dXJuITB9ZnVuY3Rpb24gdyhlLHQsbixyKXt2YXIgbz1pZSxpPXRbMF18fG47cmV0dXJuIGcoaSxlLG8sdCxyKX1mdW5jdGlvbiB2KGUsdCxuLHIpe2Zvcih2YXIgbz1hZSxpPTE7aTx0Lmxlbmd0aDtpKyspaWYoIWcodFtpXSxlLG8sdCxyKSlyZXR1cm47biYmdC5sZW5ndGg+MCYmZyhuLGUsbyx0LHIpfWZ1bmN0aW9uIGcoZSx0LG4scixvKXt2YXIgaT16LmdldChlKTtpZighaSlyZXR1cm4hMDt2YXIgYT1vfHxzKHIsZSk7aWYoYT09PWUpe2lmKG49PT1vZSlyZXR1cm4hMDtuPT09YWUmJihuPWllKX1lbHNlIGlmKG49PT1hZSYmIXQuYnViYmxlcylyZXR1cm4hMDtpZihcInJlbGF0ZWRUYXJnZXRcImluIHQpe3ZhciBjPUIodCksbD1jLnJlbGF0ZWRUYXJnZXQ7aWYobCl7aWYobCBpbnN0YW5jZW9mIE9iamVjdCYmbC5hZGRFdmVudExpc3RlbmVyKXt2YXIgZD1WKGwpLHA9dSh0LGUsZCk7aWYocD09PWEpcmV0dXJuITB9ZWxzZSBwPW51bGw7Wi5zZXQodCxwKX19Si5zZXQodCxuKTt2YXIgaD10LnR5cGUsZj0hMTtYLnNldCh0LGEpLFkuc2V0KHQsZSksaS5kZXB0aCsrO2Zvcih2YXIgbT0wLHc9aS5sZW5ndGg7dz5tO20rKyl7dmFyIHY9aVttXTtpZih2LnJlbW92ZWQpZj0hMDtlbHNlIGlmKCEodi50eXBlIT09aHx8IXYuY2FwdHVyZSYmbj09PW9lfHx2LmNhcHR1cmUmJm49PT1hZSkpdHJ5e2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIHYuaGFuZGxlcj92LmhhbmRsZXIuY2FsbChlLHQpOnYuaGFuZGxlci5oYW5kbGVFdmVudCh0KSxlZS5nZXQodCkpcmV0dXJuITF9Y2F0Y2goZyl7UHx8KFA9Zyl9fWlmKGkuZGVwdGgtLSxmJiYwPT09aS5kZXB0aCl7dmFyIGI9aS5zbGljZSgpO2kubGVuZ3RoPTA7Zm9yKHZhciBtPTA7bTxiLmxlbmd0aDttKyspYlttXS5yZW1vdmVkfHxpLnB1c2goYlttXSl9cmV0dXJuIVEuZ2V0KHQpfWZ1bmN0aW9uIGIoZSx0LG4pe3RoaXMudHlwZT1lLHRoaXMuaGFuZGxlcj10LHRoaXMuY2FwdHVyZT1Cb29sZWFuKG4pfWZ1bmN0aW9uIHkoZSx0KXtpZighKGUgaW5zdGFuY2VvZiBzZSkpcmV0dXJuIFYoVChzZSxcIkV2ZW50XCIsZSx0KSk7dmFyIG49ZTtyZXR1cm4gYmV8fFwiYmVmb3JldW5sb2FkXCIhPT1uLnR5cGV8fHRoaXMgaW5zdGFuY2VvZiBNP3ZvaWQgVShuLHRoaXMpOm5ldyBNKG4pfWZ1bmN0aW9uIEUoZSl7cmV0dXJuIGUmJmUucmVsYXRlZFRhcmdldD9PYmplY3QuY3JlYXRlKGUse3JlbGF0ZWRUYXJnZXQ6e3ZhbHVlOkIoZS5yZWxhdGVkVGFyZ2V0KX19KTplfWZ1bmN0aW9uIF8oZSx0LG4pe3ZhciByPXdpbmRvd1tlXSxvPWZ1bmN0aW9uKHQsbil7cmV0dXJuIHQgaW5zdGFuY2VvZiByP3ZvaWQgVSh0LHRoaXMpOlYoVChyLGUsdCxuKSl9O2lmKG8ucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodC5wcm90b3R5cGUpLG4mJlcoby5wcm90b3R5cGUsbikscil0cnl7RihyLG8sbmV3IHIoXCJ0ZW1wXCIpKX1jYXRjaChpKXtGKHIsbyxkb2N1bWVudC5jcmVhdGVFdmVudChlKSl9cmV0dXJuIG99ZnVuY3Rpb24gUyhlLHQpe3JldHVybiBmdW5jdGlvbigpe2FyZ3VtZW50c1t0XT1CKGFyZ3VtZW50c1t0XSk7dmFyIG49Qih0aGlzKTtuW2VdLmFwcGx5KG4sYXJndW1lbnRzKX19ZnVuY3Rpb24gVChlLHQsbixyKXtpZih2ZSlyZXR1cm4gbmV3IGUobixFKHIpKTt2YXIgbz1CKGRvY3VtZW50LmNyZWF0ZUV2ZW50KHQpKSxpPXdlW3RdLGE9W25dO3JldHVybiBPYmplY3Qua2V5cyhpKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciB0PW51bGwhPXImJmUgaW4gcj9yW2VdOmlbZV07XCJyZWxhdGVkVGFyZ2V0XCI9PT1lJiYodD1CKHQpKSxhLnB1c2godCl9KSxvW1wiaW5pdFwiK3RdLmFwcGx5KG8sYSksb31mdW5jdGlvbiBNKGUpe3kuY2FsbCh0aGlzLGUpfWZ1bmN0aW9uIE8oZSl7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgZT8hMDplJiZlLmhhbmRsZUV2ZW50fWZ1bmN0aW9uIEwoZSl7c3dpdGNoKGUpe2Nhc2VcIkRPTUF0dHJNb2RpZmllZFwiOmNhc2VcIkRPTUF0dHJpYnV0ZU5hbWVDaGFuZ2VkXCI6Y2FzZVwiRE9NQ2hhcmFjdGVyRGF0YU1vZGlmaWVkXCI6Y2FzZVwiRE9NRWxlbWVudE5hbWVDaGFuZ2VkXCI6Y2FzZVwiRE9NTm9kZUluc2VydGVkXCI6Y2FzZVwiRE9NTm9kZUluc2VydGVkSW50b0RvY3VtZW50XCI6Y2FzZVwiRE9NTm9kZVJlbW92ZWRcIjpjYXNlXCJET01Ob2RlUmVtb3ZlZEZyb21Eb2N1bWVudFwiOmNhc2VcIkRPTVN1YnRyZWVNb2RpZmllZFwiOnJldHVybiEwfXJldHVybiExfWZ1bmN0aW9uIE4oZSl7VShlLHRoaXMpfWZ1bmN0aW9uIEMoZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiBHLlNoYWRvd1Jvb3QmJihlPWUuaG9zdCksQihlKX1mdW5jdGlvbiBqKGUsdCl7dmFyIG49ei5nZXQoZSk7aWYobilmb3IodmFyIHI9MDtyPG4ubGVuZ3RoO3IrKylpZighbltyXS5yZW1vdmVkJiZuW3JdLnR5cGU9PT10KXJldHVybiEwO3JldHVybiExfWZ1bmN0aW9uIEQoZSx0KXtmb3IodmFyIG49QihlKTtuO249bi5wYXJlbnROb2RlKWlmKGooVihuKSx0KSlyZXR1cm4hMDtyZXR1cm4hMX1mdW5jdGlvbiBIKGUpe2soZSxFZSl9ZnVuY3Rpb24geCh0LG4sbyxpKXtlLnJlbmRlckFsbFBlbmRpbmcoKTt2YXIgYT1WKF9lLmNhbGwocShuKSxvLGkpKTtpZighYSlyZXR1cm4gbnVsbDt2YXIgYz1yKGEsbnVsbCksbD1jLmxhc3RJbmRleE9mKHQpO3JldHVybi0xPT1sP251bGw6KGM9Yy5zbGljZSgwLGwpLHMoYyx0KSl9ZnVuY3Rpb24gUihlKXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgdD10ZS5nZXQodGhpcyk7cmV0dXJuIHQmJnRbZV0mJnRbZV0udmFsdWV8fG51bGx9fWZ1bmN0aW9uIEkoZSl7dmFyIHQ9ZS5zbGljZSgyKTtyZXR1cm4gZnVuY3Rpb24obil7dmFyIHI9dGUuZ2V0KHRoaXMpO3J8fChyPU9iamVjdC5jcmVhdGUobnVsbCksdGUuc2V0KHRoaXMscikpO3ZhciBvPXJbZV07aWYobyYmdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKHQsby53cmFwcGVkLCExKSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBuKXt2YXIgaT1mdW5jdGlvbih0KXt2YXIgcj1uLmNhbGwodGhpcyx0KTtyPT09ITE/dC5wcmV2ZW50RGVmYXVsdCgpOlwib25iZWZvcmV1bmxvYWRcIj09PWUmJlwic3RyaW5nXCI9PXR5cGVvZiByJiYodC5yZXR1cm5WYWx1ZT1yKX07dGhpcy5hZGRFdmVudExpc3RlbmVyKHQsaSwhMSkscltlXT17dmFsdWU6bix3cmFwcGVkOml9fX19dmFyIFAsaz1lLmZvcndhcmRNZXRob2RzVG9XcmFwcGVyLEE9ZS5nZXRUcmVlU2NvcGUsVz1lLm1peGluLEY9ZS5yZWdpc3RlcldyYXBwZXIsVT1lLnNldFdyYXBwZXIscT1lLnVuc2FmZVVud3JhcCxCPWUudW53cmFwLFY9ZS53cmFwLEc9ZS53cmFwcGVycyx6PShuZXcgV2Vha01hcCxuZXcgV2Vha01hcCksSz1uZXcgV2Vha01hcCwkPW5ldyBXZWFrTWFwLFg9bmV3IFdlYWtNYXAsWT1uZXcgV2Vha01hcCxaPW5ldyBXZWFrTWFwLEo9bmV3IFdlYWtNYXAsUT1uZXcgV2Vha01hcCxlZT1uZXcgV2Vha01hcCx0ZT1uZXcgV2Vha01hcCxuZT1uZXcgV2Vha01hcCxyZT0wLG9lPTEsaWU9MixhZT0zO2IucHJvdG90eXBlPXtlcXVhbHM6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuaGFuZGxlcj09PWUuaGFuZGxlciYmdGhpcy50eXBlPT09ZS50eXBlJiZ0aGlzLmNhcHR1cmU9PT1lLmNhcHR1cmV9LGdldCByZW1vdmVkKCl7cmV0dXJuIG51bGw9PT10aGlzLmhhbmRsZXJ9LHJlbW92ZTpmdW5jdGlvbigpe3RoaXMuaGFuZGxlcj1udWxsfX07dmFyIHNlPXdpbmRvdy5FdmVudDtzZS5wcm90b3R5cGUucG9seW1lckJsYWNrTGlzdF89e3JldHVyblZhbHVlOiEwLGtleUxvY2F0aW9uOiEwfSx5LnByb3RvdHlwZT17Z2V0IHRhcmdldCgpe3JldHVybiBYLmdldCh0aGlzKX0sZ2V0IGN1cnJlbnRUYXJnZXQoKXtyZXR1cm4gWS5nZXQodGhpcyl9LGdldCBldmVudFBoYXNlKCl7cmV0dXJuIEouZ2V0KHRoaXMpfSxnZXQgcGF0aCgpe3ZhciBlPW5lLmdldCh0aGlzKTtyZXR1cm4gZT9lLnNsaWNlKCk6W119LHN0b3BQcm9wYWdhdGlvbjpmdW5jdGlvbigpe1Euc2V0KHRoaXMsITApfSxzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb246ZnVuY3Rpb24oKXtRLnNldCh0aGlzLCEwKSxlZS5zZXQodGhpcywhMCl9fTt2YXIgY2U9ZnVuY3Rpb24oKXt2YXIgZT1kb2N1bWVudC5jcmVhdGVFdmVudChcIkV2ZW50XCIpO3JldHVybiBlLmluaXRFdmVudChcInRlc3RcIiwhMCwhMCksZS5wcmV2ZW50RGVmYXVsdCgpLGUuZGVmYXVsdFByZXZlbnRlZH0oKTtjZXx8KHkucHJvdG90eXBlLnByZXZlbnREZWZhdWx0PWZ1bmN0aW9uKCl7dGhpcy5jYW5jZWxhYmxlJiYocSh0aGlzKS5wcmV2ZW50RGVmYXVsdCgpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwiZGVmYXVsdFByZXZlbnRlZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4hMH0sY29uZmlndXJhYmxlOiEwfSkpfSksRihzZSx5LGRvY3VtZW50LmNyZWF0ZUV2ZW50KFwiRXZlbnRcIikpO3ZhciBsZT1fKFwiVUlFdmVudFwiLHkpLHVlPV8oXCJDdXN0b21FdmVudFwiLHkpLGRlPXtnZXQgcmVsYXRlZFRhcmdldCgpe3ZhciBlPVouZ2V0KHRoaXMpO3JldHVybiB2b2lkIDAhPT1lP2U6VihCKHRoaXMpLnJlbGF0ZWRUYXJnZXQpfX0scGU9Vyh7aW5pdE1vdXNlRXZlbnQ6UyhcImluaXRNb3VzZUV2ZW50XCIsMTQpfSxkZSksaGU9Vyh7aW5pdEZvY3VzRXZlbnQ6UyhcImluaXRGb2N1c0V2ZW50XCIsNSl9LGRlKSxmZT1fKFwiTW91c2VFdmVudFwiLGxlLHBlKSxtZT1fKFwiRm9jdXNFdmVudFwiLGxlLGhlKSx3ZT1PYmplY3QuY3JlYXRlKG51bGwpLHZlPWZ1bmN0aW9uKCl7dHJ5e25ldyB3aW5kb3cuRm9jdXNFdmVudChcImZvY3VzXCIpfWNhdGNoKGUpe3JldHVybiExfXJldHVybiEwfSgpO2lmKCF2ZSl7dmFyIGdlPWZ1bmN0aW9uKGUsdCxuKXtpZihuKXt2YXIgcj13ZVtuXTt0PVcoVyh7fSxyKSx0KX13ZVtlXT10fTtnZShcIkV2ZW50XCIse2J1YmJsZXM6ITEsY2FuY2VsYWJsZTohMX0pLGdlKFwiQ3VzdG9tRXZlbnRcIix7ZGV0YWlsOm51bGx9LFwiRXZlbnRcIiksZ2UoXCJVSUV2ZW50XCIse3ZpZXc6bnVsbCxkZXRhaWw6MH0sXCJFdmVudFwiKSxnZShcIk1vdXNlRXZlbnRcIix7c2NyZWVuWDowLHNjcmVlblk6MCxjbGllbnRYOjAsY2xpZW50WTowLGN0cmxLZXk6ITEsYWx0S2V5OiExLHNoaWZ0S2V5OiExLG1ldGFLZXk6ITEsYnV0dG9uOjAscmVsYXRlZFRhcmdldDpudWxsfSxcIlVJRXZlbnRcIiksZ2UoXCJGb2N1c0V2ZW50XCIse3JlbGF0ZWRUYXJnZXQ6bnVsbH0sXCJVSUV2ZW50XCIpfXZhciBiZT13aW5kb3cuQmVmb3JlVW5sb2FkRXZlbnQ7TS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh5LnByb3RvdHlwZSksVyhNLnByb3RvdHlwZSx7Z2V0IHJldHVyblZhbHVlKCl7cmV0dXJuIHEodGhpcykucmV0dXJuVmFsdWV9LHNldCByZXR1cm5WYWx1ZShlKXtxKHRoaXMpLnJldHVyblZhbHVlPWV9fSksYmUmJkYoYmUsTSk7dmFyIHllPXdpbmRvdy5FdmVudFRhcmdldCxFZT1bXCJhZGRFdmVudExpc3RlbmVyXCIsXCJyZW1vdmVFdmVudExpc3RlbmVyXCIsXCJkaXNwYXRjaEV2ZW50XCJdO1tOb2RlLFdpbmRvd10uZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgdD1lLnByb3RvdHlwZTtFZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGUrXCJfXCIse3ZhbHVlOnRbZV19KX0pfSksTi5wcm90b3R5cGU9e2FkZEV2ZW50TGlzdGVuZXI6ZnVuY3Rpb24oZSx0LG4pe2lmKE8odCkmJiFMKGUpKXt2YXIgcj1uZXcgYihlLHQsbiksbz16LmdldCh0aGlzKTtpZihvKXtmb3IodmFyIGk9MDtpPG8ubGVuZ3RoO2krKylpZihyLmVxdWFscyhvW2ldKSlyZXR1cm59ZWxzZSBvPVtdLG8uZGVwdGg9MCx6LnNldCh0aGlzLG8pO28ucHVzaChyKTt2YXIgYT1DKHRoaXMpO2EuYWRkRXZlbnRMaXN0ZW5lcl8oZSxwLCEwKX19LHJlbW92ZUV2ZW50TGlzdGVuZXI6ZnVuY3Rpb24oZSx0LG4pe249Qm9vbGVhbihuKTt2YXIgcj16LmdldCh0aGlzKTtpZihyKXtmb3IodmFyIG89MCxpPSExLGE9MDthPHIubGVuZ3RoO2ErKylyW2FdLnR5cGU9PT1lJiZyW2FdLmNhcHR1cmU9PT1uJiYobysrLHJbYV0uaGFuZGxlcj09PXQmJihpPSEwLHJbYV0ucmVtb3ZlKCkpKTtpZihpJiYxPT09byl7dmFyIHM9Qyh0aGlzKTtzLnJlbW92ZUV2ZW50TGlzdGVuZXJfKGUscCwhMCl9fX0sZGlzcGF0Y2hFdmVudDpmdW5jdGlvbih0KXt2YXIgbj1CKHQpLHI9bi50eXBlO0suc2V0KG4sITEpLGUucmVuZGVyQWxsUGVuZGluZygpO3ZhciBvO0QodGhpcyxyKXx8KG89ZnVuY3Rpb24oKXt9LHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihyLG8sITApKTt0cnl7cmV0dXJuIEIodGhpcykuZGlzcGF0Y2hFdmVudF8obil9ZmluYWxseXtvJiZ0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIocixvLCEwKX19fSx5ZSYmRih5ZSxOKTt2YXIgX2U9ZG9jdW1lbnQuZWxlbWVudEZyb21Qb2ludDtlLmVsZW1lbnRGcm9tUG9pbnQ9eCxlLmdldEV2ZW50SGFuZGxlckdldHRlcj1SLGUuZ2V0RXZlbnRIYW5kbGVyU2V0dGVyPUksZS53cmFwRXZlbnRUYXJnZXRNZXRob2RzPUgsZS53cmFwcGVycy5CZWZvcmVVbmxvYWRFdmVudD1NLGUud3JhcHBlcnMuQ3VzdG9tRXZlbnQ9dWUsZS53cmFwcGVycy5FdmVudD15LGUud3JhcHBlcnMuRXZlbnRUYXJnZXQ9TixlLndyYXBwZXJzLkZvY3VzRXZlbnQ9bWUsZS53cmFwcGVycy5Nb3VzZUV2ZW50PWZlLGUud3JhcHBlcnMuVUlFdmVudD1sZX0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiB0KGUsdCl7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCxtKX1mdW5jdGlvbiBuKGUpe2woZSx0aGlzKX1mdW5jdGlvbiByKCl7dGhpcy5sZW5ndGg9MCx0KHRoaXMsXCJsZW5ndGhcIil9ZnVuY3Rpb24gbyhlKXtmb3IodmFyIHQ9bmV3IHIsbz0wO288ZS5sZW5ndGg7bysrKXRbb109bmV3IG4oZVtvXSk7cmV0dXJuIHQubGVuZ3RoPW8sdH1mdW5jdGlvbiBpKGUpe2EuY2FsbCh0aGlzLGUpfXZhciBhPWUud3JhcHBlcnMuVUlFdmVudCxzPWUubWl4aW4sYz1lLnJlZ2lzdGVyV3JhcHBlcixsPWUuc2V0V3JhcHBlcix1PWUudW5zYWZlVW53cmFwLGQ9ZS53cmFwLHA9d2luZG93LlRvdWNoRXZlbnQ7aWYocCl7dmFyIGg7dHJ5e2g9ZG9jdW1lbnQuY3JlYXRlRXZlbnQoXCJUb3VjaEV2ZW50XCIpfWNhdGNoKGYpe3JldHVybn12YXIgbT17ZW51bWVyYWJsZTohMX07bi5wcm90b3R5cGU9e2dldCB0YXJnZXQoKXtyZXR1cm4gZCh1KHRoaXMpLnRhcmdldCl9fTt2YXIgdz17Y29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITAsZ2V0Om51bGx9O1tcImNsaWVudFhcIixcImNsaWVudFlcIixcInNjcmVlblhcIixcInNjcmVlbllcIixcInBhZ2VYXCIsXCJwYWdlWVwiLFwiaWRlbnRpZmllclwiLFwid2Via2l0UmFkaXVzWFwiLFwid2Via2l0UmFkaXVzWVwiLFwid2Via2l0Um90YXRpb25BbmdsZVwiLFwid2Via2l0Rm9yY2VcIl0uZm9yRWFjaChmdW5jdGlvbihlKXt3LmdldD1mdW5jdGlvbigpe3JldHVybiB1KHRoaXMpW2VdfSxPYmplY3QuZGVmaW5lUHJvcGVydHkobi5wcm90b3R5cGUsZSx3KX0pLHIucHJvdG90eXBlPXtpdGVtOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzW2VdfX0saS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShhLnByb3RvdHlwZSkscyhpLnByb3RvdHlwZSx7Z2V0IHRvdWNoZXMoKXtyZXR1cm4gbyh1KHRoaXMpLnRvdWNoZXMpfSxnZXQgdGFyZ2V0VG91Y2hlcygpe3JldHVybiBvKHUodGhpcykudGFyZ2V0VG91Y2hlcyl9LGdldCBjaGFuZ2VkVG91Y2hlcygpe3JldHVybiBvKHUodGhpcykuY2hhbmdlZFRvdWNoZXMpfSxpbml0VG91Y2hFdmVudDpmdW5jdGlvbigpe3Rocm93IG5ldyBFcnJvcihcIk5vdCBpbXBsZW1lbnRlZFwiKX19KSxjKHAsaSxoKSxlLndyYXBwZXJzLlRvdWNoPW4sZS53cmFwcGVycy5Ub3VjaEV2ZW50PWksZS53cmFwcGVycy5Ub3VjaExpc3Q9cn19KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gdChlLHQpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHQscyl9ZnVuY3Rpb24gbigpe3RoaXMubGVuZ3RoPTAsdCh0aGlzLFwibGVuZ3RoXCIpfWZ1bmN0aW9uIHIoZSl7aWYobnVsbD09ZSlyZXR1cm4gZTtmb3IodmFyIHQ9bmV3IG4scj0wLG89ZS5sZW5ndGg7bz5yO3IrKyl0W3JdPWEoZVtyXSk7cmV0dXJuIHQubGVuZ3RoPW8sdH1mdW5jdGlvbiBvKGUsdCl7ZS5wcm90b3R5cGVbdF09ZnVuY3Rpb24oKXtyZXR1cm4gcihpKHRoaXMpW3RdLmFwcGx5KGkodGhpcyksYXJndW1lbnRzKSl9fXZhciBpPWUudW5zYWZlVW53cmFwLGE9ZS53cmFwLHM9e2VudW1lcmFibGU6ITF9O24ucHJvdG90eXBlPXtpdGVtOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzW2VdfX0sdChuLnByb3RvdHlwZSxcIml0ZW1cIiksZS53cmFwcGVycy5Ob2RlTGlzdD1uLGUuYWRkV3JhcE5vZGVMaXN0TWV0aG9kPW8sZS53cmFwTm9kZUxpc3Q9cn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjtlLndyYXBIVE1MQ29sbGVjdGlvbj1lLndyYXBOb2RlTGlzdCxlLndyYXBwZXJzLkhUTUxDb2xsZWN0aW9uPWUud3JhcHBlcnMuTm9kZUxpc3R9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gdChlKXtPKGUgaW5zdGFuY2VvZiBfKX1mdW5jdGlvbiBuKGUpe3ZhciB0PW5ldyBUO3JldHVybiB0WzBdPWUsdC5sZW5ndGg9MSx0fWZ1bmN0aW9uIHIoZSx0LG4pe04odCxcImNoaWxkTGlzdFwiLHtyZW1vdmVkTm9kZXM6bixwcmV2aW91c1NpYmxpbmc6ZS5wcmV2aW91c1NpYmxpbmcsbmV4dFNpYmxpbmc6ZS5uZXh0U2libGluZ30pfWZ1bmN0aW9uIG8oZSx0KXtOKGUsXCJjaGlsZExpc3RcIix7cmVtb3ZlZE5vZGVzOnR9KX1mdW5jdGlvbiBpKGUsdCxyLG8pe2lmKGUgaW5zdGFuY2VvZiBEb2N1bWVudEZyYWdtZW50KXt2YXIgaT1zKGUpO1U9ITA7Zm9yKHZhciBhPWkubGVuZ3RoLTE7YT49MDthLS0pZS5yZW1vdmVDaGlsZChpW2FdKSxpW2FdLnBhcmVudE5vZGVfPXQ7VT0hMTtmb3IodmFyIGE9MDthPGkubGVuZ3RoO2ErKylpW2FdLnByZXZpb3VzU2libGluZ189aVthLTFdfHxyLGlbYV0ubmV4dFNpYmxpbmdfPWlbYSsxXXx8bztyZXR1cm4gciYmKHIubmV4dFNpYmxpbmdfPWlbMF0pLG8mJihvLnByZXZpb3VzU2libGluZ189aVtpLmxlbmd0aC0xXSksaX12YXIgaT1uKGUpLGM9ZS5wYXJlbnROb2RlO3JldHVybiBjJiZjLnJlbW92ZUNoaWxkKGUpLGUucGFyZW50Tm9kZV89dCxlLnByZXZpb3VzU2libGluZ189cixlLm5leHRTaWJsaW5nXz1vLHImJihyLm5leHRTaWJsaW5nXz1lKSxvJiYoby5wcmV2aW91c1NpYmxpbmdfPWUpLGl9ZnVuY3Rpb24gYShlKXtpZihlIGluc3RhbmNlb2YgRG9jdW1lbnRGcmFnbWVudClyZXR1cm4gcyhlKTt2YXIgdD1uKGUpLG89ZS5wYXJlbnROb2RlO3JldHVybiBvJiZyKGUsbyx0KSx0fWZ1bmN0aW9uIHMoZSl7Zm9yKHZhciB0PW5ldyBULG49MCxyPWUuZmlyc3RDaGlsZDtyO3I9ci5uZXh0U2libGluZyl0W24rK109cjtyZXR1cm4gdC5sZW5ndGg9bixvKGUsdCksdH1mdW5jdGlvbiBjKGUpe3JldHVybiBlfWZ1bmN0aW9uIGwoZSx0KXtSKGUsdCksZS5ub2RlSXNJbnNlcnRlZF8oKX1mdW5jdGlvbiB1KGUsdCl7Zm9yKHZhciBuPUModCkscj0wO3I8ZS5sZW5ndGg7cisrKWwoZVtyXSxuKX1mdW5jdGlvbiBkKGUpe1IoZSxuZXcgTShlLG51bGwpKX1mdW5jdGlvbiBwKGUpe2Zvcih2YXIgdD0wO3Q8ZS5sZW5ndGg7dCsrKWQoZVt0XSl9ZnVuY3Rpb24gaChlLHQpe3ZhciBuPWUubm9kZVR5cGU9PT1fLkRPQ1VNRU5UX05PREU/ZTplLm93bmVyRG9jdW1lbnQ7biE9PXQub3duZXJEb2N1bWVudCYmbi5hZG9wdE5vZGUodCl9ZnVuY3Rpb24gZih0LG4pe2lmKG4ubGVuZ3RoKXt2YXIgcj10Lm93bmVyRG9jdW1lbnQ7aWYociE9PW5bMF0ub3duZXJEb2N1bWVudClmb3IodmFyIG89MDtvPG4ubGVuZ3RoO28rKyllLmFkb3B0Tm9kZU5vUmVtb3ZlKG5bb10scil9fWZ1bmN0aW9uIG0oZSx0KXtmKGUsdCk7dmFyIG49dC5sZW5ndGg7aWYoMT09PW4pcmV0dXJuIFAodFswXSk7Zm9yKHZhciByPVAoZS5vd25lckRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSksbz0wO24+bztvKyspci5hcHBlbmRDaGlsZChQKHRbb10pKTtyZXR1cm4gcn1mdW5jdGlvbiB3KGUpe2lmKHZvaWQgMCE9PWUuZmlyc3RDaGlsZF8pZm9yKHZhciB0PWUuZmlyc3RDaGlsZF87dDspe3ZhciBuPXQ7dD10Lm5leHRTaWJsaW5nXyxuLnBhcmVudE5vZGVfPW4ucHJldmlvdXNTaWJsaW5nXz1uLm5leHRTaWJsaW5nXz12b2lkIDB9ZS5maXJzdENoaWxkXz1lLmxhc3RDaGlsZF89dm9pZCAwfWZ1bmN0aW9uIHYoZSl7aWYoZS5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoKSl7Zm9yKHZhciB0PWUuZmlyc3RDaGlsZDt0Oyl7Tyh0LnBhcmVudE5vZGU9PT1lKTt2YXIgbj10Lm5leHRTaWJsaW5nLHI9UCh0KSxvPXIucGFyZW50Tm9kZTtvJiZYLmNhbGwobyxyKSx0LnByZXZpb3VzU2libGluZ189dC5uZXh0U2libGluZ189dC5wYXJlbnROb2RlXz1udWxsLHQ9bn1lLmZpcnN0Q2hpbGRfPWUubGFzdENoaWxkXz1udWxsfWVsc2UgZm9yKHZhciBuLGk9UChlKSxhPWkuZmlyc3RDaGlsZDthOyluPWEubmV4dFNpYmxpbmcsWC5jYWxsKGksYSksYT1ufWZ1bmN0aW9uIGcoZSl7dmFyIHQ9ZS5wYXJlbnROb2RlO3JldHVybiB0JiZ0LmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpfWZ1bmN0aW9uIGIoZSl7Zm9yKHZhciB0LG49MDtuPGUubGVuZ3RoO24rKyl0PWVbbl0sdC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHQpfWZ1bmN0aW9uIHkoZSx0LG4pe3ZhciByO2lmKHI9QShuP3EuY2FsbChuLEkoZSksITEpOkIuY2FsbChJKGUpLCExKSksdCl7Zm9yKHZhciBvPWUuZmlyc3RDaGlsZDtvO289by5uZXh0U2libGluZylyLmFwcGVuZENoaWxkKHkobywhMCxuKSk7aWYoZSBpbnN0YW5jZW9mIEYuSFRNTFRlbXBsYXRlRWxlbWVudClmb3IodmFyIGk9ci5jb250ZW50LG89ZS5jb250ZW50LmZpcnN0Q2hpbGQ7bztvPW8ubmV4dFNpYmxpbmcpaS5hcHBlbmRDaGlsZCh5KG8sITAsbikpfXJldHVybiByfWZ1bmN0aW9uIEUoZSx0KXtpZighdHx8QyhlKSE9PUModCkpcmV0dXJuITE7Zm9yKHZhciBuPXQ7bjtuPW4ucGFyZW50Tm9kZSlpZihuPT09ZSlyZXR1cm4hMDtyZXR1cm4hMX1mdW5jdGlvbiBfKGUpe08oZSBpbnN0YW5jZW9mIFYpLFMuY2FsbCh0aGlzLGUpLHRoaXMucGFyZW50Tm9kZV89dm9pZCAwLHRoaXMuZmlyc3RDaGlsZF89dm9pZCAwLHRoaXMubGFzdENoaWxkXz12b2lkIDAsdGhpcy5uZXh0U2libGluZ189dm9pZCAwLHRoaXMucHJldmlvdXNTaWJsaW5nXz12b2lkIDAsdGhpcy50cmVlU2NvcGVfPXZvaWQgMH12YXIgUz1lLndyYXBwZXJzLkV2ZW50VGFyZ2V0LFQ9ZS53cmFwcGVycy5Ob2RlTGlzdCxNPWUuVHJlZVNjb3BlLE89ZS5hc3NlcnQsTD1lLmRlZmluZVdyYXBHZXR0ZXIsTj1lLmVucXVldWVNdXRhdGlvbixDPWUuZ2V0VHJlZVNjb3BlLGo9ZS5pc1dyYXBwZXIsRD1lLm1peGluLEg9ZS5yZWdpc3RlclRyYW5zaWVudE9ic2VydmVycyx4PWUucmVnaXN0ZXJXcmFwcGVyLFI9ZS5zZXRUcmVlU2NvcGUsST1lLnVuc2FmZVVud3JhcCxQPWUudW53cmFwLGs9ZS51bndyYXBJZk5lZWRlZCxBPWUud3JhcCxXPWUud3JhcElmTmVlZGVkLEY9ZS53cmFwcGVycyxVPSExLHE9ZG9jdW1lbnQuaW1wb3J0Tm9kZSxCPXdpbmRvdy5Ob2RlLnByb3RvdHlwZS5jbG9uZU5vZGUsVj13aW5kb3cuTm9kZSxHPXdpbmRvdy5Eb2N1bWVudEZyYWdtZW50LHo9KFYucHJvdG90eXBlLmFwcGVuZENoaWxkLFYucHJvdG90eXBlLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKSxLPVYucHJvdG90eXBlLmlzRXF1YWxOb2RlLCQ9Vi5wcm90b3R5cGUuaW5zZXJ0QmVmb3JlLFg9Vi5wcm90b3R5cGUucmVtb3ZlQ2hpbGQsWT1WLnByb3RvdHlwZS5yZXBsYWNlQ2hpbGQsWj0vVHJpZGVudHxFZGdlLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpLEo9Wj9mdW5jdGlvbihlLHQpe3RyeXtYLmNhbGwoZSx0KX1jYXRjaChuKXtpZighKGUgaW5zdGFuY2VvZiBHKSl0aHJvdyBufX06ZnVuY3Rpb24oZSx0KXtYLmNhbGwoZSx0KX07Xy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShTLnByb3RvdHlwZSksRChfLnByb3RvdHlwZSx7YXBwZW5kQ2hpbGQ6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuaW5zZXJ0QmVmb3JlKGUsbnVsbCl9LGluc2VydEJlZm9yZTpmdW5jdGlvbihlLG4pe3QoZSk7dmFyIHI7bj9qKG4pP3I9UChuKToocj1uLG49QShyKSk6KG49bnVsbCxyPW51bGwpLG4mJk8obi5wYXJlbnROb2RlPT09dGhpcyk7dmFyIG8scz1uP24ucHJldmlvdXNTaWJsaW5nOnRoaXMubGFzdENoaWxkLGM9IXRoaXMuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyKCkmJiFnKGUpO2lmKG89Yz9hKGUpOmkoZSx0aGlzLHMsbiksYyloKHRoaXMsZSksdyh0aGlzKSwkLmNhbGwoSSh0aGlzKSxQKGUpLHIpO2Vsc2V7c3x8KHRoaXMuZmlyc3RDaGlsZF89b1swXSksbnx8KHRoaXMubGFzdENoaWxkXz1vW28ubGVuZ3RoLTFdLHZvaWQgMD09PXRoaXMuZmlyc3RDaGlsZF8mJih0aGlzLmZpcnN0Q2hpbGRfPXRoaXMuZmlyc3RDaGlsZCkpO3ZhciBsPXI/ci5wYXJlbnROb2RlOkkodGhpcyk7bD8kLmNhbGwobCxtKHRoaXMsbykscik6Zih0aGlzLG8pfXJldHVybiBOKHRoaXMsXCJjaGlsZExpc3RcIix7YWRkZWROb2RlczpvLG5leHRTaWJsaW5nOm4scHJldmlvdXNTaWJsaW5nOnN9KSx1KG8sdGhpcyksZX0scmVtb3ZlQ2hpbGQ6ZnVuY3Rpb24oZSl7aWYodChlKSxlLnBhcmVudE5vZGUhPT10aGlzKXtmb3IodmFyIHI9ITEsbz0odGhpcy5jaGlsZE5vZGVzLHRoaXMuZmlyc3RDaGlsZCk7bztvPW8ubmV4dFNpYmxpbmcpaWYobz09PWUpe3I9ITA7YnJlYWt9aWYoIXIpdGhyb3cgbmV3IEVycm9yKFwiTm90Rm91bmRFcnJvclwiKX12YXIgaT1QKGUpLGE9ZS5uZXh0U2libGluZyxzPWUucHJldmlvdXNTaWJsaW5nO2lmKHRoaXMuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyKCkpe3ZhciBjPXRoaXMuZmlyc3RDaGlsZCxsPXRoaXMubGFzdENoaWxkLHU9aS5wYXJlbnROb2RlO3UmJkoodSxpKSxjPT09ZSYmKHRoaXMuZmlyc3RDaGlsZF89YSksbD09PWUmJih0aGlzLmxhc3RDaGlsZF89cykscyYmKHMubmV4dFNpYmxpbmdfPWEpLGEmJihhLnByZXZpb3VzU2libGluZ189cyksZS5wcmV2aW91c1NpYmxpbmdfPWUubmV4dFNpYmxpbmdfPWUucGFyZW50Tm9kZV89dm9pZCAwfWVsc2Ugdyh0aGlzKSxKKEkodGhpcyksaSk7cmV0dXJuIFV8fE4odGhpcyxcImNoaWxkTGlzdFwiLHtyZW1vdmVkTm9kZXM6bihlKSxuZXh0U2libGluZzphLHByZXZpb3VzU2libGluZzpzfSksSCh0aGlzLGUpLGV9LHJlcGxhY2VDaGlsZDpmdW5jdGlvbihlLHIpe3QoZSk7dmFyIG87aWYoaihyKT9vPVAocik6KG89cixyPUEobykpLHIucGFyZW50Tm9kZSE9PXRoaXMpdGhyb3cgbmV3IEVycm9yKFwiTm90Rm91bmRFcnJvclwiKTt2YXIgcyxjPXIubmV4dFNpYmxpbmcsbD1yLnByZXZpb3VzU2libGluZyxwPSF0aGlzLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpJiYhZyhlKTtyZXR1cm4gcD9zPWEoZSk6KGM9PT1lJiYoYz1lLm5leHRTaWJsaW5nKSxzPWkoZSx0aGlzLGwsYykpLHA/KGgodGhpcyxlKSx3KHRoaXMpLFkuY2FsbChJKHRoaXMpLFAoZSksbykpOih0aGlzLmZpcnN0Q2hpbGQ9PT1yJiYodGhpcy5maXJzdENoaWxkXz1zWzBdKSx0aGlzLmxhc3RDaGlsZD09PXImJih0aGlzLmxhc3RDaGlsZF89c1tzLmxlbmd0aC0xXSksci5wcmV2aW91c1NpYmxpbmdfPXIubmV4dFNpYmxpbmdfPXIucGFyZW50Tm9kZV89dm9pZCAwLG8ucGFyZW50Tm9kZSYmWS5jYWxsKG8ucGFyZW50Tm9kZSxtKHRoaXMscyksbykpLE4odGhpcyxcImNoaWxkTGlzdFwiLHthZGRlZE5vZGVzOnMscmVtb3ZlZE5vZGVzOm4ociksbmV4dFNpYmxpbmc6YyxwcmV2aW91c1NpYmxpbmc6bH0pLGQociksdShzLHRoaXMpLHJ9LG5vZGVJc0luc2VydGVkXzpmdW5jdGlvbigpe2Zvcih2YXIgZT10aGlzLmZpcnN0Q2hpbGQ7ZTtlPWUubmV4dFNpYmxpbmcpZS5ub2RlSXNJbnNlcnRlZF8oKX0saGFzQ2hpbGROb2RlczpmdW5jdGlvbigpe3JldHVybiBudWxsIT09dGhpcy5maXJzdENoaWxkfSxnZXQgcGFyZW50Tm9kZSgpe3JldHVybiB2b2lkIDAhPT10aGlzLnBhcmVudE5vZGVfP3RoaXMucGFyZW50Tm9kZV86QShJKHRoaXMpLnBhcmVudE5vZGUpfSxnZXQgZmlyc3RDaGlsZCgpe3JldHVybiB2b2lkIDAhPT10aGlzLmZpcnN0Q2hpbGRfP3RoaXMuZmlyc3RDaGlsZF86QShJKHRoaXMpLmZpcnN0Q2hpbGQpfSxnZXQgbGFzdENoaWxkKCl7cmV0dXJuIHZvaWQgMCE9PXRoaXMubGFzdENoaWxkXz90aGlzLmxhc3RDaGlsZF86QShJKHRoaXMpLmxhc3RDaGlsZCl9LGdldCBuZXh0U2libGluZygpe3JldHVybiB2b2lkIDAhPT10aGlzLm5leHRTaWJsaW5nXz90aGlzLm5leHRTaWJsaW5nXzpBKEkodGhpcykubmV4dFNpYmxpbmcpfSxnZXQgcHJldmlvdXNTaWJsaW5nKCl7cmV0dXJuIHZvaWQgMCE9PXRoaXMucHJldmlvdXNTaWJsaW5nXz90aGlzLnByZXZpb3VzU2libGluZ186QShJKHRoaXMpLnByZXZpb3VzU2libGluZyl9LGdldCBwYXJlbnRFbGVtZW50KCl7Zm9yKHZhciBlPXRoaXMucGFyZW50Tm9kZTtlJiZlLm5vZGVUeXBlIT09Xy5FTEVNRU5UX05PREU7KWU9ZS5wYXJlbnROb2RlO3JldHVybiBlfSxnZXQgdGV4dENvbnRlbnQoKXtmb3IodmFyIGU9XCJcIix0PXRoaXMuZmlyc3RDaGlsZDt0O3Q9dC5uZXh0U2libGluZyl0Lm5vZGVUeXBlIT1fLkNPTU1FTlRfTk9ERSYmKGUrPXQudGV4dENvbnRlbnQpO3JldHVybiBlfSxzZXQgdGV4dENvbnRlbnQoZSl7bnVsbD09ZSYmKGU9XCJcIik7dmFyIHQ9Yyh0aGlzLmNoaWxkTm9kZXMpO2lmKHRoaXMuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyKCkpe2lmKHYodGhpcyksXCJcIiE9PWUpe3ZhciBuPUkodGhpcykub3duZXJEb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShlKTt0aGlzLmFwcGVuZENoaWxkKG4pfX1lbHNlIHcodGhpcyksSSh0aGlzKS50ZXh0Q29udGVudD1lO3ZhciByPWModGhpcy5jaGlsZE5vZGVzKTtOKHRoaXMsXCJjaGlsZExpc3RcIix7YWRkZWROb2RlczpyLHJlbW92ZWROb2Rlczp0fSkscCh0KSx1KHIsdGhpcyl9LGdldCBjaGlsZE5vZGVzKCl7Zm9yKHZhciBlPW5ldyBULHQ9MCxuPXRoaXMuZmlyc3RDaGlsZDtuO249bi5uZXh0U2libGluZyllW3QrK109bjtyZXR1cm4gZS5sZW5ndGg9dCxlfSxjbG9uZU5vZGU6ZnVuY3Rpb24oZSl7cmV0dXJuIHkodGhpcyxlKX0sY29udGFpbnM6ZnVuY3Rpb24oZSl7cmV0dXJuIEUodGhpcyxXKGUpKX0sY29tcGFyZURvY3VtZW50UG9zaXRpb246ZnVuY3Rpb24oZSl7cmV0dXJuIHouY2FsbChJKHRoaXMpLGsoZSkpfSxpc0VxdWFsTm9kZTpmdW5jdGlvbihlKXtyZXR1cm4gSy5jYWxsKEkodGhpcyksayhlKSl9LG5vcm1hbGl6ZTpmdW5jdGlvbigpe2Zvcih2YXIgZSx0LG49Yyh0aGlzLmNoaWxkTm9kZXMpLHI9W10sbz1cIlwiLGk9MDtpPG4ubGVuZ3RoO2krKyl0PW5baV0sdC5ub2RlVHlwZT09PV8uVEVYVF9OT0RFP2V8fHQuZGF0YS5sZW5ndGg/ZT8obys9dC5kYXRhLHIucHVzaCh0KSk6ZT10OnRoaXMucmVtb3ZlQ2hpbGQodCk6KGUmJnIubGVuZ3RoJiYoZS5kYXRhKz1vLGIocikpLHI9W10sbz1cIlwiLGU9bnVsbCx0LmNoaWxkTm9kZXMubGVuZ3RoJiZ0Lm5vcm1hbGl6ZSgpKTtlJiZyLmxlbmd0aCYmKGUuZGF0YSs9byxiKHIpKX19KSxMKF8sXCJvd25lckRvY3VtZW50XCIpLHgoVixfLGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSksZGVsZXRlIF8ucHJvdG90eXBlLnF1ZXJ5U2VsZWN0b3IsZGVsZXRlIF8ucHJvdG90eXBlLnF1ZXJ5U2VsZWN0b3JBbGwsXy5wcm90b3R5cGU9RChPYmplY3QuY3JlYXRlKFMucHJvdG90eXBlKSxfLnByb3RvdHlwZSksZS5jbG9uZU5vZGU9eSxlLm5vZGVXYXNBZGRlZD1sLGUubm9kZVdhc1JlbW92ZWQ9ZCxlLm5vZGVzV2VyZUFkZGVkPXUsZS5ub2Rlc1dlcmVSZW1vdmVkPXAsZS5vcmlnaW5hbEluc2VydEJlZm9yZT0kLGUub3JpZ2luYWxSZW1vdmVDaGlsZD1YLGUuc25hcHNob3ROb2RlTGlzdD1jLGUud3JhcHBlcnMuTm9kZT1ffSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHQodCxuLHIsbyl7Zm9yKHZhciBpPW51bGwsYT1udWxsLHM9MCxjPXQubGVuZ3RoO2M+cztzKyspaT1iKHRbc10pLCFvJiYoYT12KGkpLnJvb3QpJiZhIGluc3RhbmNlb2YgZS53cmFwcGVycy5TaGFkb3dSb290fHwocltuKytdPWkpO3JldHVybiBufWZ1bmN0aW9uIG4oZSl7cmV0dXJuIFN0cmluZyhlKS5yZXBsYWNlKC9cXC9kZWVwXFwvfDo6c2hhZG93fD4+Pi9nLFwiIFwiKX1mdW5jdGlvbiByKGUpe3JldHVybiBTdHJpbmcoZSkucmVwbGFjZSgvOmhvc3RcXCgoW15cXHNdKylcXCkvZyxcIiQxXCIpLnJlcGxhY2UoLyhbXlxcc10pOmhvc3QvZyxcIiQxXCIpLnJlcGxhY2UoXCI6aG9zdFwiLFwiKlwiKS5yZXBsYWNlKC9cXF58XFwvc2hhZG93XFwvfFxcL3NoYWRvdy1kZWVwXFwvfDo6c2hhZG93fFxcL2RlZXBcXC98Ojpjb250ZW50fD4+Pi9nLFwiIFwiKX1mdW5jdGlvbiBvKGUsdCl7Zm9yKHZhciBuLHI9ZS5maXJzdEVsZW1lbnRDaGlsZDtyOyl7aWYoci5tYXRjaGVzKHQpKXJldHVybiByO2lmKG49byhyLHQpKXJldHVybiBuO3I9ci5uZXh0RWxlbWVudFNpYmxpbmd9cmV0dXJuIG51bGx9ZnVuY3Rpb24gaShlLHQpe3JldHVybiBlLm1hdGNoZXModCl9ZnVuY3Rpb24gYShlLHQsbil7dmFyIHI9ZS5sb2NhbE5hbWU7cmV0dXJuIHI9PT10fHxyPT09biYmZS5uYW1lc3BhY2VVUkk9PT1qfWZ1bmN0aW9uIHMoKXtyZXR1cm4hMH1mdW5jdGlvbiBjKGUsdCxuKXtyZXR1cm4gZS5sb2NhbE5hbWU9PT1ufWZ1bmN0aW9uIGwoZSx0KXtyZXR1cm4gZS5uYW1lc3BhY2VVUkk9PT10fWZ1bmN0aW9uIHUoZSx0LG4pe3JldHVybiBlLm5hbWVzcGFjZVVSST09PXQmJmUubG9jYWxOYW1lPT09bn1mdW5jdGlvbiBkKGUsdCxuLHIsbyxpKXtmb3IodmFyIGE9ZS5maXJzdEVsZW1lbnRDaGlsZDthOylyKGEsbyxpKSYmKG5bdCsrXT1hKSx0PWQoYSx0LG4scixvLGkpLGE9YS5uZXh0RWxlbWVudFNpYmxpbmc7cmV0dXJuIHR9ZnVuY3Rpb24gcChuLHIsbyxpLGEpe3ZhciBzLGM9Zyh0aGlzKSxsPXYodGhpcykucm9vdDtpZihsIGluc3RhbmNlb2YgZS53cmFwcGVycy5TaGFkb3dSb290KXJldHVybiBkKHRoaXMscixvLG4saSxudWxsKTtpZihjIGluc3RhbmNlb2YgTilzPVMuY2FsbChjLGkpO2Vsc2V7aWYoIShjIGluc3RhbmNlb2YgQykpcmV0dXJuIGQodGhpcyxyLG8sbixpLG51bGwpO3M9Xy5jYWxsKGMsaSl9cmV0dXJuIHQocyxyLG8sYSl9ZnVuY3Rpb24gaChuLHIsbyxpLGEpe3ZhciBzLGM9Zyh0aGlzKSxsPXYodGhpcykucm9vdDtpZihsIGluc3RhbmNlb2YgZS53cmFwcGVycy5TaGFkb3dSb290KXJldHVybiBkKHRoaXMscixvLG4saSxhKTtpZihjIGluc3RhbmNlb2YgTilzPU0uY2FsbChjLGksYSk7ZWxzZXtpZighKGMgaW5zdGFuY2VvZiBDKSlyZXR1cm4gZCh0aGlzLHIsbyxuLGksYSk7cz1ULmNhbGwoYyxpLGEpfXJldHVybiB0KHMscixvLCExKX1mdW5jdGlvbiBmKG4scixvLGksYSl7dmFyIHMsYz1nKHRoaXMpLGw9dih0aGlzKS5yb290O2lmKGwgaW5zdGFuY2VvZiBlLndyYXBwZXJzLlNoYWRvd1Jvb3QpcmV0dXJuIGQodGhpcyxyLG8sbixpLGEpO2lmKGMgaW5zdGFuY2VvZiBOKXM9TC5jYWxsKGMsaSxhKTtlbHNle2lmKCEoYyBpbnN0YW5jZW9mIEMpKXJldHVybiBkKHRoaXMscixvLG4saSxhKTtzPU8uY2FsbChjLGksYSl9cmV0dXJuIHQocyxyLG8sITEpfXZhciBtPWUud3JhcHBlcnMuSFRNTENvbGxlY3Rpb24sdz1lLndyYXBwZXJzLk5vZGVMaXN0LHY9ZS5nZXRUcmVlU2NvcGUsZz1lLnVuc2FmZVVud3JhcCxiPWUud3JhcCx5PWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IsRT1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQucXVlcnlTZWxlY3RvcixfPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwsUz1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCxUPWRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lLE09ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lLE89ZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyxMPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZU5TLE49d2luZG93LkVsZW1lbnQsQz13aW5kb3cuSFRNTERvY3VtZW50fHx3aW5kb3cuRG9jdW1lbnQsaj1cImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWxcIixEPXtcbnF1ZXJ5U2VsZWN0b3I6ZnVuY3Rpb24odCl7dmFyIHI9bih0KSxpPXIhPT10O3Q9cjt2YXIgYSxzPWcodGhpcyksYz12KHRoaXMpLnJvb3Q7aWYoYyBpbnN0YW5jZW9mIGUud3JhcHBlcnMuU2hhZG93Um9vdClyZXR1cm4gbyh0aGlzLHQpO2lmKHMgaW5zdGFuY2VvZiBOKWE9YihFLmNhbGwocyx0KSk7ZWxzZXtpZighKHMgaW5zdGFuY2VvZiBDKSlyZXR1cm4gbyh0aGlzLHQpO2E9Yih5LmNhbGwocyx0KSl9cmV0dXJuIGEmJiFpJiYoYz12KGEpLnJvb3QpJiZjIGluc3RhbmNlb2YgZS53cmFwcGVycy5TaGFkb3dSb290P28odGhpcyx0KTphfSxxdWVyeVNlbGVjdG9yQWxsOmZ1bmN0aW9uKGUpe3ZhciB0PW4oZSkscj10IT09ZTtlPXQ7dmFyIG89bmV3IHc7cmV0dXJuIG8ubGVuZ3RoPXAuY2FsbCh0aGlzLGksMCxvLGUsciksb319LEg9e21hdGNoZXM6ZnVuY3Rpb24odCl7cmV0dXJuIHQ9cih0KSxlLm9yaWdpbmFsTWF0Y2hlcy5jYWxsKGcodGhpcyksdCl9fSx4PXtnZXRFbGVtZW50c0J5VGFnTmFtZTpmdW5jdGlvbihlKXt2YXIgdD1uZXcgbSxuPVwiKlwiPT09ZT9zOmE7cmV0dXJuIHQubGVuZ3RoPWguY2FsbCh0aGlzLG4sMCx0LGUsZS50b0xvd2VyQ2FzZSgpKSx0fSxnZXRFbGVtZW50c0J5Q2xhc3NOYW1lOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuXCIrZSl9LGdldEVsZW1lbnRzQnlUYWdOYW1lTlM6ZnVuY3Rpb24oZSx0KXt2YXIgbj1uZXcgbSxyPW51bGw7cmV0dXJuIHI9XCIqXCI9PT1lP1wiKlwiPT09dD9zOmM6XCIqXCI9PT10P2w6dSxuLmxlbmd0aD1mLmNhbGwodGhpcyxyLDAsbixlfHxudWxsLHQpLG59fTtlLkdldEVsZW1lbnRzQnlJbnRlcmZhY2U9eCxlLlNlbGVjdG9yc0ludGVyZmFjZT1ELGUuTWF0Y2hlc0ludGVyZmFjZT1IfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHQoZSl7Zm9yKDtlJiZlLm5vZGVUeXBlIT09Tm9kZS5FTEVNRU5UX05PREU7KWU9ZS5uZXh0U2libGluZztyZXR1cm4gZX1mdW5jdGlvbiBuKGUpe2Zvcig7ZSYmZS5ub2RlVHlwZSE9PU5vZGUuRUxFTUVOVF9OT0RFOyllPWUucHJldmlvdXNTaWJsaW5nO3JldHVybiBlfXZhciByPWUud3JhcHBlcnMuTm9kZUxpc3Qsbz17Z2V0IGZpcnN0RWxlbWVudENoaWxkKCl7cmV0dXJuIHQodGhpcy5maXJzdENoaWxkKX0sZ2V0IGxhc3RFbGVtZW50Q2hpbGQoKXtyZXR1cm4gbih0aGlzLmxhc3RDaGlsZCl9LGdldCBjaGlsZEVsZW1lbnRDb3VudCgpe2Zvcih2YXIgZT0wLHQ9dGhpcy5maXJzdEVsZW1lbnRDaGlsZDt0O3Q9dC5uZXh0RWxlbWVudFNpYmxpbmcpZSsrO3JldHVybiBlfSxnZXQgY2hpbGRyZW4oKXtmb3IodmFyIGU9bmV3IHIsdD0wLG49dGhpcy5maXJzdEVsZW1lbnRDaGlsZDtuO249bi5uZXh0RWxlbWVudFNpYmxpbmcpZVt0KytdPW47cmV0dXJuIGUubGVuZ3RoPXQsZX0scmVtb3ZlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5wYXJlbnROb2RlO2UmJmUucmVtb3ZlQ2hpbGQodGhpcyl9fSxpPXtnZXQgbmV4dEVsZW1lbnRTaWJsaW5nKCl7cmV0dXJuIHQodGhpcy5uZXh0U2libGluZyl9LGdldCBwcmV2aW91c0VsZW1lbnRTaWJsaW5nKCl7cmV0dXJuIG4odGhpcy5wcmV2aW91c1NpYmxpbmcpfX0sYT17Z2V0RWxlbWVudEJ5SWQ6ZnVuY3Rpb24oZSl7cmV0dXJuL1sgXFx0XFxuXFxyXFxmXS8udGVzdChlKT9udWxsOnRoaXMucXVlcnlTZWxlY3RvcignW2lkPVwiJytlKydcIl0nKX19O2UuQ2hpbGROb2RlSW50ZXJmYWNlPWksZS5Ob25FbGVtZW50UGFyZW50Tm9kZUludGVyZmFjZT1hLGUuUGFyZW50Tm9kZUludGVyZmFjZT1vfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHQoZSl7ci5jYWxsKHRoaXMsZSl9dmFyIG49ZS5DaGlsZE5vZGVJbnRlcmZhY2Uscj1lLndyYXBwZXJzLk5vZGUsbz1lLmVucXVldWVNdXRhdGlvbixpPWUubWl4aW4sYT1lLnJlZ2lzdGVyV3JhcHBlcixzPWUudW5zYWZlVW53cmFwLGM9d2luZG93LkNoYXJhY3RlckRhdGE7dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShyLnByb3RvdHlwZSksaSh0LnByb3RvdHlwZSx7Z2V0IG5vZGVWYWx1ZSgpe3JldHVybiB0aGlzLmRhdGF9LHNldCBub2RlVmFsdWUoZSl7dGhpcy5kYXRhPWV9LGdldCB0ZXh0Q29udGVudCgpe3JldHVybiB0aGlzLmRhdGF9LHNldCB0ZXh0Q29udGVudChlKXt0aGlzLmRhdGE9ZX0sZ2V0IGRhdGEoKXtyZXR1cm4gcyh0aGlzKS5kYXRhfSxzZXQgZGF0YShlKXt2YXIgdD1zKHRoaXMpLmRhdGE7byh0aGlzLFwiY2hhcmFjdGVyRGF0YVwiLHtvbGRWYWx1ZTp0fSkscyh0aGlzKS5kYXRhPWV9fSksaSh0LnByb3RvdHlwZSxuKSxhKGMsdCxkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcIlwiKSksZS53cmFwcGVycy5DaGFyYWN0ZXJEYXRhPXR9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gdChlKXtyZXR1cm4gZT4+PjB9ZnVuY3Rpb24gbihlKXtyLmNhbGwodGhpcyxlKX12YXIgcj1lLndyYXBwZXJzLkNoYXJhY3RlckRhdGEsbz0oZS5lbnF1ZXVlTXV0YXRpb24sZS5taXhpbiksaT1lLnJlZ2lzdGVyV3JhcHBlcixhPXdpbmRvdy5UZXh0O24ucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoci5wcm90b3R5cGUpLG8obi5wcm90b3R5cGUse3NwbGl0VGV4dDpmdW5jdGlvbihlKXtlPXQoZSk7dmFyIG49dGhpcy5kYXRhO2lmKGU+bi5sZW5ndGgpdGhyb3cgbmV3IEVycm9yKFwiSW5kZXhTaXplRXJyb3JcIik7dmFyIHI9bi5zbGljZSgwLGUpLG89bi5zbGljZShlKTt0aGlzLmRhdGE9cjt2YXIgaT10aGlzLm93bmVyRG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUobyk7cmV0dXJuIHRoaXMucGFyZW50Tm9kZSYmdGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShpLHRoaXMubmV4dFNpYmxpbmcpLGl9fSksaShhLG4sZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoXCJcIikpLGUud3JhcHBlcnMuVGV4dD1ufSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHQoZSl7cmV0dXJuIGkoZSkuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIil9ZnVuY3Rpb24gbihlLHQpe2EoZSxcImF0dHJpYnV0ZXNcIix7bmFtZTpcImNsYXNzXCIsbmFtZXNwYWNlOm51bGwsb2xkVmFsdWU6dH0pfWZ1bmN0aW9uIHIodCl7ZS5pbnZhbGlkYXRlUmVuZGVyZXJCYXNlZE9uQXR0cmlidXRlKHQsXCJjbGFzc1wiKX1mdW5jdGlvbiBvKGUsbyxpKXt2YXIgYT1lLm93bmVyRWxlbWVudF87aWYobnVsbD09YSlyZXR1cm4gby5hcHBseShlLGkpO3ZhciBzPXQoYSksYz1vLmFwcGx5KGUsaSk7cmV0dXJuIHQoYSkhPT1zJiYobihhLHMpLHIoYSkpLGN9aWYoIXdpbmRvdy5ET01Ub2tlbkxpc3QpcmV0dXJuIHZvaWQgY29uc29sZS53YXJuKFwiTWlzc2luZyBET01Ub2tlbkxpc3QgcHJvdG90eXBlLCBwbGVhc2UgaW5jbHVkZSBhIGNvbXBhdGlibGUgY2xhc3NMaXN0IHBvbHlmaWxsIHN1Y2ggYXMgaHR0cDovL2dvby5nbC91VGNlcEguXCIpO3ZhciBpPWUudW5zYWZlVW53cmFwLGE9ZS5lbnF1ZXVlTXV0YXRpb24scz1ET01Ub2tlbkxpc3QucHJvdG90eXBlLmFkZDtET01Ub2tlbkxpc3QucHJvdG90eXBlLmFkZD1mdW5jdGlvbigpe28odGhpcyxzLGFyZ3VtZW50cyl9O3ZhciBjPURPTVRva2VuTGlzdC5wcm90b3R5cGUucmVtb3ZlO0RPTVRva2VuTGlzdC5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKCl7byh0aGlzLGMsYXJndW1lbnRzKX07dmFyIGw9RE9NVG9rZW5MaXN0LnByb3RvdHlwZS50b2dnbGU7RE9NVG9rZW5MaXN0LnByb3RvdHlwZS50b2dnbGU9ZnVuY3Rpb24oKXtyZXR1cm4gbyh0aGlzLGwsYXJndW1lbnRzKX19KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gdCh0LG4pe3ZhciByPXQucGFyZW50Tm9kZTtpZihyJiZyLnNoYWRvd1Jvb3Qpe3ZhciBvPWUuZ2V0UmVuZGVyZXJGb3JIb3N0KHIpO28uZGVwZW5kc09uQXR0cmlidXRlKG4pJiZvLmludmFsaWRhdGUoKX19ZnVuY3Rpb24gbihlLHQsbil7dShlLFwiYXR0cmlidXRlc1wiLHtuYW1lOnQsbmFtZXNwYWNlOm51bGwsb2xkVmFsdWU6bn0pfWZ1bmN0aW9uIHIoZSl7YS5jYWxsKHRoaXMsZSl9dmFyIG89ZS5DaGlsZE5vZGVJbnRlcmZhY2UsaT1lLkdldEVsZW1lbnRzQnlJbnRlcmZhY2UsYT1lLndyYXBwZXJzLk5vZGUscz1lLlBhcmVudE5vZGVJbnRlcmZhY2UsYz1lLlNlbGVjdG9yc0ludGVyZmFjZSxsPWUuTWF0Y2hlc0ludGVyZmFjZSx1PShlLmFkZFdyYXBOb2RlTGlzdE1ldGhvZCxlLmVucXVldWVNdXRhdGlvbiksZD1lLm1peGluLHA9KGUub25lT2YsZS5yZWdpc3RlcldyYXBwZXIpLGg9ZS51bnNhZmVVbndyYXAsZj1lLndyYXBwZXJzLG09d2luZG93LkVsZW1lbnQsdz1bXCJtYXRjaGVzXCIsXCJtb3pNYXRjaGVzU2VsZWN0b3JcIixcIm1zTWF0Y2hlc1NlbGVjdG9yXCIsXCJ3ZWJraXRNYXRjaGVzU2VsZWN0b3JcIl0uZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBtLnByb3RvdHlwZVtlXX0pLHY9d1swXSxnPW0ucHJvdG90eXBlW3ZdLGI9bmV3IFdlYWtNYXA7ci5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShhLnByb3RvdHlwZSksZChyLnByb3RvdHlwZSx7Y3JlYXRlU2hhZG93Um9vdDpmdW5jdGlvbigpe3ZhciB0PW5ldyBmLlNoYWRvd1Jvb3QodGhpcyk7aCh0aGlzKS5wb2x5bWVyU2hhZG93Um9vdF89dDt2YXIgbj1lLmdldFJlbmRlcmVyRm9ySG9zdCh0aGlzKTtyZXR1cm4gbi5pbnZhbGlkYXRlKCksdH0sZ2V0IHNoYWRvd1Jvb3QoKXtyZXR1cm4gaCh0aGlzKS5wb2x5bWVyU2hhZG93Um9vdF98fG51bGx9LHNldEF0dHJpYnV0ZTpmdW5jdGlvbihlLHIpe3ZhciBvPWgodGhpcykuZ2V0QXR0cmlidXRlKGUpO2godGhpcykuc2V0QXR0cmlidXRlKGUsciksbih0aGlzLGUsbyksdCh0aGlzLGUpfSxyZW1vdmVBdHRyaWJ1dGU6ZnVuY3Rpb24oZSl7dmFyIHI9aCh0aGlzKS5nZXRBdHRyaWJ1dGUoZSk7aCh0aGlzKS5yZW1vdmVBdHRyaWJ1dGUoZSksbih0aGlzLGUsciksdCh0aGlzLGUpfSxnZXQgY2xhc3NMaXN0KCl7dmFyIGU9Yi5nZXQodGhpcyk7aWYoIWUpe2lmKGU9aCh0aGlzKS5jbGFzc0xpc3QsIWUpcmV0dXJuO2Uub3duZXJFbGVtZW50Xz10aGlzLGIuc2V0KHRoaXMsZSl9cmV0dXJuIGV9LGdldCBjbGFzc05hbWUoKXtyZXR1cm4gaCh0aGlzKS5jbGFzc05hbWV9LHNldCBjbGFzc05hbWUoZSl7dGhpcy5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLGUpfSxnZXQgaWQoKXtyZXR1cm4gaCh0aGlzKS5pZH0sc2V0IGlkKGUpe3RoaXMuc2V0QXR0cmlidXRlKFwiaWRcIixlKX19KSx3LmZvckVhY2goZnVuY3Rpb24oZSl7XCJtYXRjaGVzXCIhPT1lJiYoci5wcm90b3R5cGVbZV09ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMubWF0Y2hlcyhlKX0pfSksbS5wcm90b3R5cGUud2Via2l0Q3JlYXRlU2hhZG93Um9vdCYmKHIucHJvdG90eXBlLndlYmtpdENyZWF0ZVNoYWRvd1Jvb3Q9ci5wcm90b3R5cGUuY3JlYXRlU2hhZG93Um9vdCksZChyLnByb3RvdHlwZSxvKSxkKHIucHJvdG90eXBlLGkpLGQoci5wcm90b3R5cGUscyksZChyLnByb3RvdHlwZSxjKSxkKHIucHJvdG90eXBlLGwpLHAobSxyLGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhudWxsLFwieFwiKSksZS5pbnZhbGlkYXRlUmVuZGVyZXJCYXNlZE9uQXR0cmlidXRlPXQsZS5tYXRjaGVzTmFtZXM9dyxlLm9yaWdpbmFsTWF0Y2hlcz1nLGUud3JhcHBlcnMuRWxlbWVudD1yfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHQoZSl7c3dpdGNoKGUpe2Nhc2VcIiZcIjpyZXR1cm5cIiZhbXA7XCI7Y2FzZVwiPFwiOnJldHVyblwiJmx0O1wiO2Nhc2VcIj5cIjpyZXR1cm5cIiZndDtcIjtjYXNlJ1wiJzpyZXR1cm5cIiZxdW90O1wiO2Nhc2VcIsKgXCI6cmV0dXJuXCImbmJzcDtcIn19ZnVuY3Rpb24gbihlKXtyZXR1cm4gZS5yZXBsYWNlKEwsdCl9ZnVuY3Rpb24gcihlKXtyZXR1cm4gZS5yZXBsYWNlKE4sdCl9ZnVuY3Rpb24gbyhlKXtmb3IodmFyIHQ9e30sbj0wO248ZS5sZW5ndGg7bisrKXRbZVtuXV09ITA7cmV0dXJuIHR9ZnVuY3Rpb24gaShlKXtpZihlLm5hbWVzcGFjZVVSSSE9PUQpcmV0dXJuITA7dmFyIHQ9ZS5vd25lckRvY3VtZW50LmRvY3R5cGU7cmV0dXJuIHQmJnQucHVibGljSWQmJnQuc3lzdGVtSWR9ZnVuY3Rpb24gYShlLHQpe3N3aXRjaChlLm5vZGVUeXBlKXtjYXNlIE5vZGUuRUxFTUVOVF9OT0RFOmZvcih2YXIgbyxhPWUudGFnTmFtZS50b0xvd2VyQ2FzZSgpLGM9XCI8XCIrYSxsPWUuYXR0cmlidXRlcyx1PTA7bz1sW3VdO3UrKyljKz1cIiBcIitvLm5hbWUrJz1cIicrbihvLnZhbHVlKSsnXCInO3JldHVybiBDW2FdPyhpKGUpJiYoYys9XCIvXCIpLGMrXCI+XCIpOmMrXCI+XCIrcyhlKStcIjwvXCIrYStcIj5cIjtjYXNlIE5vZGUuVEVYVF9OT0RFOnZhciBkPWUuZGF0YTtyZXR1cm4gdCYmalt0LmxvY2FsTmFtZV0/ZDpyKGQpO2Nhc2UgTm9kZS5DT01NRU5UX05PREU6cmV0dXJuXCI8IS0tXCIrZS5kYXRhK1wiLS0+XCI7ZGVmYXVsdDp0aHJvdyBjb25zb2xlLmVycm9yKGUpLG5ldyBFcnJvcihcIm5vdCBpbXBsZW1lbnRlZFwiKX19ZnVuY3Rpb24gcyhlKXtlIGluc3RhbmNlb2YgTy5IVE1MVGVtcGxhdGVFbGVtZW50JiYoZT1lLmNvbnRlbnQpO2Zvcih2YXIgdD1cIlwiLG49ZS5maXJzdENoaWxkO247bj1uLm5leHRTaWJsaW5nKXQrPWEobixlKTtyZXR1cm4gdH1mdW5jdGlvbiBjKGUsdCxuKXt2YXIgcj1ufHxcImRpdlwiO2UudGV4dENvbnRlbnQ9XCJcIjt2YXIgbz1UKGUub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KHIpKTtvLmlubmVySFRNTD10O2Zvcih2YXIgaTtpPW8uZmlyc3RDaGlsZDspZS5hcHBlbmRDaGlsZChNKGkpKX1mdW5jdGlvbiBsKGUpe20uY2FsbCh0aGlzLGUpfWZ1bmN0aW9uIHUoZSx0KXt2YXIgbj1UKGUuY2xvbmVOb2RlKCExKSk7bi5pbm5lckhUTUw9dDtmb3IodmFyIHIsbz1UKGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSk7cj1uLmZpcnN0Q2hpbGQ7KW8uYXBwZW5kQ2hpbGQocik7cmV0dXJuIE0obyl9ZnVuY3Rpb24gZCh0KXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZS5yZW5kZXJBbGxQZW5kaW5nKCksUyh0aGlzKVt0XX19ZnVuY3Rpb24gcChlKXt3KGwsZSxkKGUpKX1mdW5jdGlvbiBoKHQpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShsLnByb3RvdHlwZSx0LHtnZXQ6ZCh0KSxzZXQ6ZnVuY3Rpb24obil7ZS5yZW5kZXJBbGxQZW5kaW5nKCksUyh0aGlzKVt0XT1ufSxjb25maWd1cmFibGU6ITAsZW51bWVyYWJsZTohMH0pfWZ1bmN0aW9uIGYodCl7T2JqZWN0LmRlZmluZVByb3BlcnR5KGwucHJvdG90eXBlLHQse3ZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIGUucmVuZGVyQWxsUGVuZGluZygpLFModGhpcylbdF0uYXBwbHkoUyh0aGlzKSxhcmd1bWVudHMpfSxjb25maWd1cmFibGU6ITAsZW51bWVyYWJsZTohMH0pfXZhciBtPWUud3JhcHBlcnMuRWxlbWVudCx3PWUuZGVmaW5lR2V0dGVyLHY9ZS5lbnF1ZXVlTXV0YXRpb24sZz1lLm1peGluLGI9ZS5ub2Rlc1dlcmVBZGRlZCx5PWUubm9kZXNXZXJlUmVtb3ZlZCxFPWUucmVnaXN0ZXJXcmFwcGVyLF89ZS5zbmFwc2hvdE5vZGVMaXN0LFM9ZS51bnNhZmVVbndyYXAsVD1lLnVud3JhcCxNPWUud3JhcCxPPWUud3JhcHBlcnMsTD0vWyZcXHUwMEEwXCJdL2csTj0vWyZcXHUwMEEwPD5dL2csQz1vKFtcImFyZWFcIixcImJhc2VcIixcImJyXCIsXCJjb2xcIixcImNvbW1hbmRcIixcImVtYmVkXCIsXCJoclwiLFwiaW1nXCIsXCJpbnB1dFwiLFwia2V5Z2VuXCIsXCJsaW5rXCIsXCJtZXRhXCIsXCJwYXJhbVwiLFwic291cmNlXCIsXCJ0cmFja1wiLFwid2JyXCJdKSxqPW8oW1wic3R5bGVcIixcInNjcmlwdFwiLFwieG1wXCIsXCJpZnJhbWVcIixcIm5vZW1iZWRcIixcIm5vZnJhbWVzXCIsXCJwbGFpbnRleHRcIixcIm5vc2NyaXB0XCJdKSxEPVwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbFwiLEg9L01TSUUvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkseD13aW5kb3cuSFRNTEVsZW1lbnQsUj13aW5kb3cuSFRNTFRlbXBsYXRlRWxlbWVudDtsLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKG0ucHJvdG90eXBlKSxnKGwucHJvdG90eXBlLHtnZXQgaW5uZXJIVE1MKCl7cmV0dXJuIHModGhpcyl9LHNldCBpbm5lckhUTUwoZSl7aWYoSCYmalt0aGlzLmxvY2FsTmFtZV0pcmV0dXJuIHZvaWQodGhpcy50ZXh0Q29udGVudD1lKTt2YXIgdD1fKHRoaXMuY2hpbGROb2Rlcyk7dGhpcy5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoKT90aGlzIGluc3RhbmNlb2YgTy5IVE1MVGVtcGxhdGVFbGVtZW50P2ModGhpcy5jb250ZW50LGUpOmModGhpcyxlLHRoaXMudGFnTmFtZSk6IVImJnRoaXMgaW5zdGFuY2VvZiBPLkhUTUxUZW1wbGF0ZUVsZW1lbnQ/Yyh0aGlzLmNvbnRlbnQsZSk6Uyh0aGlzKS5pbm5lckhUTUw9ZTt2YXIgbj1fKHRoaXMuY2hpbGROb2Rlcyk7dih0aGlzLFwiY2hpbGRMaXN0XCIse2FkZGVkTm9kZXM6bixyZW1vdmVkTm9kZXM6dH0pLHkodCksYihuLHRoaXMpfSxnZXQgb3V0ZXJIVE1MKCl7cmV0dXJuIGEodGhpcyx0aGlzLnBhcmVudE5vZGUpfSxzZXQgb3V0ZXJIVE1MKGUpe3ZhciB0PXRoaXMucGFyZW50Tm9kZTtpZih0KXt0LmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpO3ZhciBuPXUodCxlKTt0LnJlcGxhY2VDaGlsZChuLHRoaXMpfX0saW5zZXJ0QWRqYWNlbnRIVE1MOmZ1bmN0aW9uKGUsdCl7dmFyIG4scjtzd2l0Y2goU3RyaW5nKGUpLnRvTG93ZXJDYXNlKCkpe2Nhc2VcImJlZm9yZWJlZ2luXCI6bj10aGlzLnBhcmVudE5vZGUscj10aGlzO2JyZWFrO2Nhc2VcImFmdGVyZW5kXCI6bj10aGlzLnBhcmVudE5vZGUscj10aGlzLm5leHRTaWJsaW5nO2JyZWFrO2Nhc2VcImFmdGVyYmVnaW5cIjpuPXRoaXMscj10aGlzLmZpcnN0Q2hpbGQ7YnJlYWs7Y2FzZVwiYmVmb3JlZW5kXCI6bj10aGlzLHI9bnVsbDticmVhaztkZWZhdWx0OnJldHVybn12YXIgbz11KG4sdCk7bi5pbnNlcnRCZWZvcmUobyxyKX0sZ2V0IGhpZGRlbigpe3JldHVybiB0aGlzLmhhc0F0dHJpYnV0ZShcImhpZGRlblwiKX0sc2V0IGhpZGRlbihlKXtlP3RoaXMuc2V0QXR0cmlidXRlKFwiaGlkZGVuXCIsXCJcIik6dGhpcy5yZW1vdmVBdHRyaWJ1dGUoXCJoaWRkZW5cIil9fSksW1wiY2xpZW50SGVpZ2h0XCIsXCJjbGllbnRMZWZ0XCIsXCJjbGllbnRUb3BcIixcImNsaWVudFdpZHRoXCIsXCJvZmZzZXRIZWlnaHRcIixcIm9mZnNldExlZnRcIixcIm9mZnNldFRvcFwiLFwib2Zmc2V0V2lkdGhcIixcInNjcm9sbEhlaWdodFwiLFwic2Nyb2xsV2lkdGhcIl0uZm9yRWFjaChwKSxbXCJzY3JvbGxMZWZ0XCIsXCJzY3JvbGxUb3BcIl0uZm9yRWFjaChoKSxbXCJmb2N1c1wiLFwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0XCIsXCJnZXRDbGllbnRSZWN0c1wiLFwic2Nyb2xsSW50b1ZpZXdcIl0uZm9yRWFjaChmKSxFKHgsbCxkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYlwiKSksZS53cmFwcGVycy5IVE1MRWxlbWVudD1sLGUuZ2V0SW5uZXJIVE1MPXMsZS5zZXRJbm5lckhUTUw9Y30od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiB0KGUpe24uY2FsbCh0aGlzLGUpfXZhciBuPWUud3JhcHBlcnMuSFRNTEVsZW1lbnQscj1lLm1peGluLG89ZS5yZWdpc3RlcldyYXBwZXIsaT1lLnVuc2FmZVVud3JhcCxhPWUud3JhcCxzPXdpbmRvdy5IVE1MQ2FudmFzRWxlbWVudDt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKG4ucHJvdG90eXBlKSxyKHQucHJvdG90eXBlLHtnZXRDb250ZXh0OmZ1bmN0aW9uKCl7dmFyIGU9aSh0aGlzKS5nZXRDb250ZXh0LmFwcGx5KGkodGhpcyksYXJndW1lbnRzKTtyZXR1cm4gZSYmYShlKX19KSxvKHMsdCxkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpKSxlLndyYXBwZXJzLkhUTUxDYW52YXNFbGVtZW50PXR9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gdChlKXtuLmNhbGwodGhpcyxlKX12YXIgbj1lLndyYXBwZXJzLkhUTUxFbGVtZW50LHI9ZS5taXhpbixvPWUucmVnaXN0ZXJXcmFwcGVyLGk9d2luZG93LkhUTUxDb250ZW50RWxlbWVudDt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKG4ucHJvdG90eXBlKSxyKHQucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp0LGdldCBzZWxlY3QoKXtyZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGUoXCJzZWxlY3RcIil9LHNldCBzZWxlY3QoZSl7dGhpcy5zZXRBdHRyaWJ1dGUoXCJzZWxlY3RcIixlKX0sc2V0QXR0cmlidXRlOmZ1bmN0aW9uKGUsdCl7bi5wcm90b3R5cGUuc2V0QXR0cmlidXRlLmNhbGwodGhpcyxlLHQpLFwic2VsZWN0XCI9PT1TdHJpbmcoZSkudG9Mb3dlckNhc2UoKSYmdGhpcy5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoITApfX0pLGkmJm8oaSx0KSxlLndyYXBwZXJzLkhUTUxDb250ZW50RWxlbWVudD10fSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHQoZSl7bi5jYWxsKHRoaXMsZSl9dmFyIG49ZS53cmFwcGVycy5IVE1MRWxlbWVudCxyPWUubWl4aW4sbz1lLnJlZ2lzdGVyV3JhcHBlcixpPWUud3JhcEhUTUxDb2xsZWN0aW9uLGE9ZS51bndyYXAscz13aW5kb3cuSFRNTEZvcm1FbGVtZW50O3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUobi5wcm90b3R5cGUpLHIodC5wcm90b3R5cGUse2dldCBlbGVtZW50cygpe3JldHVybiBpKGEodGhpcykuZWxlbWVudHMpfX0pLG8ocyx0LGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJmb3JtXCIpKSxlLndyYXBwZXJzLkhUTUxGb3JtRWxlbWVudD10fSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHQoZSl7ci5jYWxsKHRoaXMsZSl9ZnVuY3Rpb24gbihlLHQpe2lmKCEodGhpcyBpbnN0YW5jZW9mIG4pKXRocm93IG5ldyBUeXBlRXJyb3IoXCJET00gb2JqZWN0IGNvbnN0cnVjdG9yIGNhbm5vdCBiZSBjYWxsZWQgYXMgYSBmdW5jdGlvbi5cIik7dmFyIG89aShkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpKTtyLmNhbGwodGhpcyxvKSxhKG8sdGhpcyksdm9pZCAwIT09ZSYmKG8ud2lkdGg9ZSksdm9pZCAwIT09dCYmKG8uaGVpZ2h0PXQpfXZhciByPWUud3JhcHBlcnMuSFRNTEVsZW1lbnQsbz1lLnJlZ2lzdGVyV3JhcHBlcixpPWUudW53cmFwLGE9ZS5yZXdyYXAscz13aW5kb3cuSFRNTEltYWdlRWxlbWVudDt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHIucHJvdG90eXBlKSxvKHMsdCxkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpKSxuLnByb3RvdHlwZT10LnByb3RvdHlwZSxlLndyYXBwZXJzLkhUTUxJbWFnZUVsZW1lbnQ9dCxlLndyYXBwZXJzLkltYWdlPW59KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gdChlKXtuLmNhbGwodGhpcyxlKX12YXIgbj1lLndyYXBwZXJzLkhUTUxFbGVtZW50LHI9KGUubWl4aW4sZS53cmFwcGVycy5Ob2RlTGlzdCxlLnJlZ2lzdGVyV3JhcHBlciksbz13aW5kb3cuSFRNTFNoYWRvd0VsZW1lbnQ7dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShuLnByb3RvdHlwZSksdC5wcm90b3R5cGUuY29uc3RydWN0b3I9dCxvJiZyKG8sdCksZS53cmFwcGVycy5IVE1MU2hhZG93RWxlbWVudD10fSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHQoZSl7aWYoIWUuZGVmYXVsdFZpZXcpcmV0dXJuIGU7dmFyIHQ9ZC5nZXQoZSk7aWYoIXQpe2Zvcih0PWUuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KFwiXCIpO3QubGFzdENoaWxkOyl0LnJlbW92ZUNoaWxkKHQubGFzdENoaWxkKTtkLnNldChlLHQpfXJldHVybiB0fWZ1bmN0aW9uIG4oZSl7Zm9yKHZhciBuLHI9dChlLm93bmVyRG9jdW1lbnQpLG89YyhyLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSk7bj1lLmZpcnN0Q2hpbGQ7KW8uYXBwZW5kQ2hpbGQobik7cmV0dXJuIG99ZnVuY3Rpb24gcihlKXtpZihvLmNhbGwodGhpcyxlKSwhcCl7dmFyIHQ9bihlKTt1LnNldCh0aGlzLGwodCkpfX12YXIgbz1lLndyYXBwZXJzLkhUTUxFbGVtZW50LGk9ZS5taXhpbixhPWUucmVnaXN0ZXJXcmFwcGVyLHM9ZS51bnNhZmVVbndyYXAsYz1lLnVud3JhcCxsPWUud3JhcCx1PW5ldyBXZWFrTWFwLGQ9bmV3IFdlYWtNYXAscD13aW5kb3cuSFRNTFRlbXBsYXRlRWxlbWVudDtyLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKG8ucHJvdG90eXBlKSxpKHIucHJvdG90eXBlLHtjb25zdHJ1Y3RvcjpyLGdldCBjb250ZW50KCl7cmV0dXJuIHA/bChzKHRoaXMpLmNvbnRlbnQpOnUuZ2V0KHRoaXMpfX0pLHAmJmEocCxyKSxlLndyYXBwZXJzLkhUTUxUZW1wbGF0ZUVsZW1lbnQ9cn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiB0KGUpe24uY2FsbCh0aGlzLGUpfXZhciBuPWUud3JhcHBlcnMuSFRNTEVsZW1lbnQscj1lLnJlZ2lzdGVyV3JhcHBlcixvPXdpbmRvdy5IVE1MTWVkaWFFbGVtZW50O28mJih0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKG4ucHJvdG90eXBlKSxyKG8sdCxkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYXVkaW9cIikpLGUud3JhcHBlcnMuSFRNTE1lZGlhRWxlbWVudD10KX0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiB0KGUpe3IuY2FsbCh0aGlzLGUpfWZ1bmN0aW9uIG4oZSl7aWYoISh0aGlzIGluc3RhbmNlb2YgbikpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkRPTSBvYmplY3QgY29uc3RydWN0b3IgY2Fubm90IGJlIGNhbGxlZCBhcyBhIGZ1bmN0aW9uLlwiKTt2YXIgdD1pKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhdWRpb1wiKSk7ci5jYWxsKHRoaXMsdCksYSh0LHRoaXMpLHQuc2V0QXR0cmlidXRlKFwicHJlbG9hZFwiLFwiYXV0b1wiKSx2b2lkIDAhPT1lJiZ0LnNldEF0dHJpYnV0ZShcInNyY1wiLGUpfXZhciByPWUud3JhcHBlcnMuSFRNTE1lZGlhRWxlbWVudCxvPWUucmVnaXN0ZXJXcmFwcGVyLGk9ZS51bndyYXAsYT1lLnJld3JhcCxzPXdpbmRvdy5IVE1MQXVkaW9FbGVtZW50O3MmJih0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHIucHJvdG90eXBlKSxvKHMsdCxkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYXVkaW9cIikpLG4ucHJvdG90eXBlPXQucHJvdG90eXBlLGUud3JhcHBlcnMuSFRNTEF1ZGlvRWxlbWVudD10LGUud3JhcHBlcnMuQXVkaW89bil9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gdChlKXtyZXR1cm4gZS5yZXBsYWNlKC9cXHMrL2csXCIgXCIpLnRyaW0oKX1mdW5jdGlvbiBuKGUpe28uY2FsbCh0aGlzLGUpfWZ1bmN0aW9uIHIoZSx0LG4saSl7aWYoISh0aGlzIGluc3RhbmNlb2YgcikpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkRPTSBvYmplY3QgY29uc3RydWN0b3IgY2Fubm90IGJlIGNhbGxlZCBhcyBhIGZ1bmN0aW9uLlwiKTt2YXIgYT1jKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIikpO28uY2FsbCh0aGlzLGEpLHMoYSx0aGlzKSx2b2lkIDAhPT1lJiYoYS50ZXh0PWUpLHZvaWQgMCE9PXQmJmEuc2V0QXR0cmlidXRlKFwidmFsdWVcIix0KSxuPT09ITAmJmEuc2V0QXR0cmlidXRlKFwic2VsZWN0ZWRcIixcIlwiKSxhLnNlbGVjdGVkPWk9PT0hMH12YXIgbz1lLndyYXBwZXJzLkhUTUxFbGVtZW50LGk9ZS5taXhpbixhPWUucmVnaXN0ZXJXcmFwcGVyLHM9ZS5yZXdyYXAsYz1lLnVud3JhcCxsPWUud3JhcCx1PXdpbmRvdy5IVE1MT3B0aW9uRWxlbWVudDtuLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKG8ucHJvdG90eXBlKSxpKG4ucHJvdG90eXBlLHtnZXQgdGV4dCgpe3JldHVybiB0KHRoaXMudGV4dENvbnRlbnQpfSxzZXQgdGV4dChlKXt0aGlzLnRleHRDb250ZW50PXQoU3RyaW5nKGUpKX0sZ2V0IGZvcm0oKXtyZXR1cm4gbChjKHRoaXMpLmZvcm0pfX0pLGEodSxuLGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIikpLHIucHJvdG90eXBlPW4ucHJvdG90eXBlLGUud3JhcHBlcnMuSFRNTE9wdGlvbkVsZW1lbnQ9bixlLndyYXBwZXJzLk9wdGlvbj1yfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHQoZSl7bi5jYWxsKHRoaXMsZSl9dmFyIG49ZS53cmFwcGVycy5IVE1MRWxlbWVudCxyPWUubWl4aW4sbz1lLnJlZ2lzdGVyV3JhcHBlcixpPWUudW53cmFwLGE9ZS53cmFwLHM9d2luZG93LkhUTUxTZWxlY3RFbGVtZW50O3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUobi5wcm90b3R5cGUpLHIodC5wcm90b3R5cGUse2FkZDpmdW5jdGlvbihlLHQpe1wib2JqZWN0XCI9PXR5cGVvZiB0JiYodD1pKHQpKSxpKHRoaXMpLmFkZChpKGUpLHQpfSxyZW1vdmU6ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMD09PWU/dm9pZCBuLnByb3RvdHlwZS5yZW1vdmUuY2FsbCh0aGlzKTooXCJvYmplY3RcIj09dHlwZW9mIGUmJihlPWkoZSkpLHZvaWQgaSh0aGlzKS5yZW1vdmUoZSkpfSxnZXQgZm9ybSgpe3JldHVybiBhKGkodGhpcykuZm9ybSl9fSksbyhzLHQsZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNlbGVjdFwiKSksZS53cmFwcGVycy5IVE1MU2VsZWN0RWxlbWVudD10fSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHQoZSl7bi5jYWxsKHRoaXMsZSl9dmFyIG49ZS53cmFwcGVycy5IVE1MRWxlbWVudCxyPWUubWl4aW4sbz1lLnJlZ2lzdGVyV3JhcHBlcixpPWUudW53cmFwLGE9ZS53cmFwLHM9ZS53cmFwSFRNTENvbGxlY3Rpb24sYz13aW5kb3cuSFRNTFRhYmxlRWxlbWVudDt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKG4ucHJvdG90eXBlKSxyKHQucHJvdG90eXBlLHtnZXQgY2FwdGlvbigpe3JldHVybiBhKGkodGhpcykuY2FwdGlvbil9LGNyZWF0ZUNhcHRpb246ZnVuY3Rpb24oKXtyZXR1cm4gYShpKHRoaXMpLmNyZWF0ZUNhcHRpb24oKSl9LGdldCB0SGVhZCgpe3JldHVybiBhKGkodGhpcykudEhlYWQpfSxjcmVhdGVUSGVhZDpmdW5jdGlvbigpe3JldHVybiBhKGkodGhpcykuY3JlYXRlVEhlYWQoKSl9LGNyZWF0ZVRGb290OmZ1bmN0aW9uKCl7cmV0dXJuIGEoaSh0aGlzKS5jcmVhdGVURm9vdCgpKX0sZ2V0IHRGb290KCl7cmV0dXJuIGEoaSh0aGlzKS50Rm9vdCl9LGdldCB0Qm9kaWVzKCl7cmV0dXJuIHMoaSh0aGlzKS50Qm9kaWVzKX0sY3JlYXRlVEJvZHk6ZnVuY3Rpb24oKXtyZXR1cm4gYShpKHRoaXMpLmNyZWF0ZVRCb2R5KCkpfSxnZXQgcm93cygpe3JldHVybiBzKGkodGhpcykucm93cyl9LGluc2VydFJvdzpmdW5jdGlvbihlKXtyZXR1cm4gYShpKHRoaXMpLmluc2VydFJvdyhlKSl9fSksbyhjLHQsZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRhYmxlXCIpKSxlLndyYXBwZXJzLkhUTUxUYWJsZUVsZW1lbnQ9dH0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiB0KGUpe24uY2FsbCh0aGlzLGUpfXZhciBuPWUud3JhcHBlcnMuSFRNTEVsZW1lbnQscj1lLm1peGluLG89ZS5yZWdpc3RlcldyYXBwZXIsaT1lLndyYXBIVE1MQ29sbGVjdGlvbixhPWUudW53cmFwLHM9ZS53cmFwLGM9d2luZG93LkhUTUxUYWJsZVNlY3Rpb25FbGVtZW50O3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUobi5wcm90b3R5cGUpLHIodC5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnQsZ2V0IHJvd3MoKXtyZXR1cm4gaShhKHRoaXMpLnJvd3MpfSxpbnNlcnRSb3c6ZnVuY3Rpb24oZSl7cmV0dXJuIHMoYSh0aGlzKS5pbnNlcnRSb3coZSkpfX0pLG8oYyx0LGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0aGVhZFwiKSksZS53cmFwcGVycy5IVE1MVGFibGVTZWN0aW9uRWxlbWVudD10fSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHQoZSl7bi5jYWxsKHRoaXMsZSl9dmFyIG49ZS53cmFwcGVycy5IVE1MRWxlbWVudCxyPWUubWl4aW4sbz1lLnJlZ2lzdGVyV3JhcHBlcixpPWUud3JhcEhUTUxDb2xsZWN0aW9uLGE9ZS51bndyYXAscz1lLndyYXAsYz13aW5kb3cuSFRNTFRhYmxlUm93RWxlbWVudDt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKG4ucHJvdG90eXBlKSxyKHQucHJvdG90eXBlLHtnZXQgY2VsbHMoKXtyZXR1cm4gaShhKHRoaXMpLmNlbGxzKX0saW5zZXJ0Q2VsbDpmdW5jdGlvbihlKXtyZXR1cm4gcyhhKHRoaXMpLmluc2VydENlbGwoZSkpfX0pLG8oYyx0LGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0clwiKSksZS53cmFwcGVycy5IVE1MVGFibGVSb3dFbGVtZW50PXR9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gdChlKXtzd2l0Y2goZS5sb2NhbE5hbWUpe2Nhc2VcImNvbnRlbnRcIjpyZXR1cm4gbmV3IG4oZSk7Y2FzZVwic2hhZG93XCI6cmV0dXJuIG5ldyBvKGUpO2Nhc2VcInRlbXBsYXRlXCI6cmV0dXJuIG5ldyBpKGUpfXIuY2FsbCh0aGlzLGUpfXZhciBuPWUud3JhcHBlcnMuSFRNTENvbnRlbnRFbGVtZW50LHI9ZS53cmFwcGVycy5IVE1MRWxlbWVudCxvPWUud3JhcHBlcnMuSFRNTFNoYWRvd0VsZW1lbnQsaT1lLndyYXBwZXJzLkhUTUxUZW1wbGF0ZUVsZW1lbnQsYT0oZS5taXhpbixlLnJlZ2lzdGVyV3JhcHBlcikscz13aW5kb3cuSFRNTFVua25vd25FbGVtZW50O3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoci5wcm90b3R5cGUpLGEocyx0KSxlLndyYXBwZXJzLkhUTUxVbmtub3duRWxlbWVudD10fSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHQoZSl7bi5jYWxsKHRoaXMsZSl9dmFyIG49ZS53cmFwcGVycy5FbGVtZW50LHI9ZS53cmFwcGVycy5IVE1MRWxlbWVudCxvPWUucmVnaXN0ZXJXcmFwcGVyLGk9KGUuZGVmaW5lV3JhcEdldHRlcixlLnVuc2FmZVVud3JhcCksYT1lLndyYXAscz1lLm1peGluLGM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLGw9d2luZG93LlNWR0VsZW1lbnQsdT1kb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoYyxcInRpdGxlXCIpO2lmKCEoXCJjbGFzc0xpc3RcImluIHUpKXt2YXIgZD1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG4ucHJvdG90eXBlLFwiY2xhc3NMaXN0XCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLnByb3RvdHlwZSxcImNsYXNzTGlzdFwiLGQpLGRlbGV0ZSBuLnByb3RvdHlwZS5jbGFzc0xpc3R9dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShuLnByb3RvdHlwZSkscyh0LnByb3RvdHlwZSx7Z2V0IG93bmVyU1ZHRWxlbWVudCgpe3JldHVybiBhKGkodGhpcykub3duZXJTVkdFbGVtZW50KX19KSxvKGwsdCxkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoYyxcInRpdGxlXCIpKSxlLndyYXBwZXJzLlNWR0VsZW1lbnQ9dH0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiB0KGUpe3AuY2FsbCh0aGlzLGUpfXZhciBuPWUubWl4aW4scj1lLnJlZ2lzdGVyV3JhcHBlcixvPWUudW53cmFwLGk9ZS53cmFwLGE9d2luZG93LlNWR1VzZUVsZW1lbnQscz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsYz1pKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhzLFwiZ1wiKSksbD1kb2N1bWVudC5jcmVhdGVFbGVtZW50TlMocyxcInVzZVwiKSx1PWMuY29uc3RydWN0b3IsZD1PYmplY3QuZ2V0UHJvdG90eXBlT2YodS5wcm90b3R5cGUpLHA9ZC5jb25zdHJ1Y3Rvcjt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGQpLFwiaW5zdGFuY2VSb290XCJpbiBsJiZuKHQucHJvdG90eXBlLHtnZXQgaW5zdGFuY2VSb290KCl7cmV0dXJuIGkobyh0aGlzKS5pbnN0YW5jZVJvb3QpfSxnZXQgYW5pbWF0ZWRJbnN0YW5jZVJvb3QoKXtyZXR1cm4gaShvKHRoaXMpLmFuaW1hdGVkSW5zdGFuY2VSb290KX19KSxyKGEsdCxsKSxlLndyYXBwZXJzLlNWR1VzZUVsZW1lbnQ9dH0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiB0KGUpe24uY2FsbCh0aGlzLGUpfXZhciBuPWUud3JhcHBlcnMuRXZlbnRUYXJnZXQscj1lLm1peGluLG89ZS5yZWdpc3RlcldyYXBwZXIsaT1lLnVuc2FmZVVud3JhcCxhPWUud3JhcCxzPXdpbmRvdy5TVkdFbGVtZW50SW5zdGFuY2U7cyYmKHQucHJvdG90eXBlPU9iamVjdC5jcmVhdGUobi5wcm90b3R5cGUpLHIodC5wcm90b3R5cGUse2dldCBjb3JyZXNwb25kaW5nRWxlbWVudCgpe3JldHVybiBhKGkodGhpcykuY29ycmVzcG9uZGluZ0VsZW1lbnQpfSxnZXQgY29ycmVzcG9uZGluZ1VzZUVsZW1lbnQoKXtyZXR1cm4gYShpKHRoaXMpLmNvcnJlc3BvbmRpbmdVc2VFbGVtZW50KX0sZ2V0IHBhcmVudE5vZGUoKXtyZXR1cm4gYShpKHRoaXMpLnBhcmVudE5vZGUpfSxnZXQgY2hpbGROb2Rlcygpe3Rocm93IG5ldyBFcnJvcihcIk5vdCBpbXBsZW1lbnRlZFwiKX0sZ2V0IGZpcnN0Q2hpbGQoKXtyZXR1cm4gYShpKHRoaXMpLmZpcnN0Q2hpbGQpfSxnZXQgbGFzdENoaWxkKCl7cmV0dXJuIGEoaSh0aGlzKS5sYXN0Q2hpbGQpfSxnZXQgcHJldmlvdXNTaWJsaW5nKCl7cmV0dXJuIGEoaSh0aGlzKS5wcmV2aW91c1NpYmxpbmcpfSxnZXQgbmV4dFNpYmxpbmcoKXtyZXR1cm4gYShpKHRoaXMpLm5leHRTaWJsaW5nKX19KSxvKHMsdCksZS53cmFwcGVycy5TVkdFbGVtZW50SW5zdGFuY2U9dCl9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gdChlKXtvKGUsdGhpcyl9dmFyIG49ZS5taXhpbixyPWUucmVnaXN0ZXJXcmFwcGVyLG89ZS5zZXRXcmFwcGVyLGk9ZS51bnNhZmVVbndyYXAsYT1lLnVud3JhcCxzPWUudW53cmFwSWZOZWVkZWQsYz1lLndyYXAsbD13aW5kb3cuQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO24odC5wcm90b3R5cGUse2dldCBjYW52YXMoKXtyZXR1cm4gYyhpKHRoaXMpLmNhbnZhcyl9LGRyYXdJbWFnZTpmdW5jdGlvbigpe2FyZ3VtZW50c1swXT1zKGFyZ3VtZW50c1swXSksaSh0aGlzKS5kcmF3SW1hZ2UuYXBwbHkoaSh0aGlzKSxhcmd1bWVudHMpfSxjcmVhdGVQYXR0ZXJuOmZ1bmN0aW9uKCl7cmV0dXJuIGFyZ3VtZW50c1swXT1hKGFyZ3VtZW50c1swXSksaSh0aGlzKS5jcmVhdGVQYXR0ZXJuLmFwcGx5KGkodGhpcyksYXJndW1lbnRzKX19KSxyKGwsdCxkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpLmdldENvbnRleHQoXCIyZFwiKSksZS53cmFwcGVycy5DYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ9dH0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiB0KGUpe2koZSx0aGlzKX12YXIgbj1lLmFkZEZvcndhcmRpbmdQcm9wZXJ0aWVzLHI9ZS5taXhpbixvPWUucmVnaXN0ZXJXcmFwcGVyLGk9ZS5zZXRXcmFwcGVyLGE9ZS51bnNhZmVVbndyYXAscz1lLnVud3JhcElmTmVlZGVkLGM9ZS53cmFwLGw9d2luZG93LldlYkdMUmVuZGVyaW5nQ29udGV4dDtpZihsKXtyKHQucHJvdG90eXBlLHtnZXQgY2FudmFzKCl7cmV0dXJuIGMoYSh0aGlzKS5jYW52YXMpfSx0ZXhJbWFnZTJEOmZ1bmN0aW9uKCl7YXJndW1lbnRzWzVdPXMoYXJndW1lbnRzWzVdKSxhKHRoaXMpLnRleEltYWdlMkQuYXBwbHkoYSh0aGlzKSxhcmd1bWVudHMpfSx0ZXhTdWJJbWFnZTJEOmZ1bmN0aW9uKCl7YXJndW1lbnRzWzZdPXMoYXJndW1lbnRzWzZdKSxhKHRoaXMpLnRleFN1YkltYWdlMkQuYXBwbHkoYSh0aGlzKSxhcmd1bWVudHMpfX0pO3ZhciB1PU9iamVjdC5nZXRQcm90b3R5cGVPZihsLnByb3RvdHlwZSk7dSE9PU9iamVjdC5wcm90b3R5cGUmJm4odSx0LnByb3RvdHlwZSk7dmFyIGQ9L1dlYktpdC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KT97ZHJhd2luZ0J1ZmZlckhlaWdodDpudWxsLGRyYXdpbmdCdWZmZXJXaWR0aDpudWxsfTp7fTtvKGwsdCxkKSxlLndyYXBwZXJzLldlYkdMUmVuZGVyaW5nQ29udGV4dD10fX0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiB0KGUpe24uY2FsbCh0aGlzLGUpfXZhciBuPWUud3JhcHBlcnMuTm9kZSxyPWUuR2V0RWxlbWVudHNCeUludGVyZmFjZSxvPWUuTm9uRWxlbWVudFBhcmVudE5vZGVJbnRlcmZhY2UsaT1lLlBhcmVudE5vZGVJbnRlcmZhY2UsYT1lLlNlbGVjdG9yc0ludGVyZmFjZSxzPWUubWl4aW4sYz1lLnJlZ2lzdGVyT2JqZWN0LGw9ZS5yZWdpc3RlcldyYXBwZXIsdT13aW5kb3cuRG9jdW1lbnRGcmFnbWVudDt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKG4ucHJvdG90eXBlKSxzKHQucHJvdG90eXBlLGkpLHModC5wcm90b3R5cGUsYSkscyh0LnByb3RvdHlwZSxyKSxzKHQucHJvdG90eXBlLG8pLGwodSx0LGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSksZS53cmFwcGVycy5Eb2N1bWVudEZyYWdtZW50PXQ7dmFyIGQ9Yyhkb2N1bWVudC5jcmVhdGVDb21tZW50KFwiXCIpKTtlLndyYXBwZXJzLkNvbW1lbnQ9ZH0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiB0KGUpe3ZhciB0PWQodShlKS5vd25lckRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSk7bi5jYWxsKHRoaXMsdCksYyh0LHRoaXMpO3ZhciBvPWUuc2hhZG93Um9vdDtmLnNldCh0aGlzLG8pLHRoaXMudHJlZVNjb3BlXz1uZXcgcih0aGlzLGEob3x8ZSkpLGguc2V0KHRoaXMsZSl9dmFyIG49ZS53cmFwcGVycy5Eb2N1bWVudEZyYWdtZW50LHI9ZS5UcmVlU2NvcGUsbz1lLmVsZW1lbnRGcm9tUG9pbnQsaT1lLmdldElubmVySFRNTCxhPWUuZ2V0VHJlZVNjb3BlLHM9ZS5taXhpbixjPWUucmV3cmFwLGw9ZS5zZXRJbm5lckhUTUwsdT1lLnVuc2FmZVVud3JhcCxkPWUudW53cmFwLHA9ZS53cmFwLGg9bmV3IFdlYWtNYXAsZj1uZXcgV2Vha01hcDt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKG4ucHJvdG90eXBlKSxzKHQucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp0LGdldCBpbm5lckhUTUwoKXtyZXR1cm4gaSh0aGlzKX0sc2V0IGlubmVySFRNTChlKXtsKHRoaXMsZSksdGhpcy5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoKX0sZ2V0IG9sZGVyU2hhZG93Um9vdCgpe3JldHVybiBmLmdldCh0aGlzKXx8bnVsbH0sZ2V0IGhvc3QoKXtyZXR1cm4gaC5nZXQodGhpcyl8fG51bGx9LGludmFsaWRhdGVTaGFkb3dSZW5kZXJlcjpmdW5jdGlvbigpe3JldHVybiBoLmdldCh0aGlzKS5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoKX0sZWxlbWVudEZyb21Qb2ludDpmdW5jdGlvbihlLHQpe3JldHVybiBvKHRoaXMsdGhpcy5vd25lckRvY3VtZW50LGUsdCl9LGdldFNlbGVjdGlvbjpmdW5jdGlvbigpe3JldHVybiBkb2N1bWVudC5nZXRTZWxlY3Rpb24oKX0sZ2V0IGFjdGl2ZUVsZW1lbnQoKXt2YXIgZT1kKHRoaXMpLm93bmVyRG9jdW1lbnQuYWN0aXZlRWxlbWVudDtpZighZXx8IWUubm9kZVR5cGUpcmV0dXJuIG51bGw7dmFyIHQ9cChlKTtpZih0PT09dGhpcy5ob3N0KXJldHVybiBudWxsO2Zvcig7IXRoaXMuY29udGFpbnModCkmJiF0aGlzLmhvc3QuY29udGFpbnModCk7KXtmb3IoO3QucGFyZW50Tm9kZTspdD10LnBhcmVudE5vZGU7aWYoIXQuaG9zdClyZXR1cm4gbnVsbDt0PXQuaG9zdH1yZXR1cm4gdH19KSxlLndyYXBwZXJzLlNoYWRvd1Jvb3Q9dH0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiB0KGUpe3ZhciB0PWQoZSkucm9vdDtyZXR1cm4gdCBpbnN0YW5jZW9mIGg/dC5ob3N0Om51bGx9ZnVuY3Rpb24gbih0LG4pe2lmKHQuc2hhZG93Um9vdCl7bj1NYXRoLm1pbih0LmNoaWxkTm9kZXMubGVuZ3RoLTEsbik7dmFyIHI9dC5jaGlsZE5vZGVzW25dO2lmKHIpe3ZhciBvPWUuZ2V0RGVzdGluYXRpb25JbnNlcnRpb25Qb2ludHMocik7aWYoby5sZW5ndGg+MCl7dmFyIGk9b1swXS5wYXJlbnROb2RlO2kubm9kZVR5cGU9PU5vZGUuRUxFTUVOVF9OT0RFJiYodD1pKX19fXJldHVybiB0fWZ1bmN0aW9uIHIoZSl7cmV0dXJuIGU9dShlKSx0KGUpfHxlfWZ1bmN0aW9uIG8oZSl7YShlLHRoaXMpfXZhciBpPWUucmVnaXN0ZXJXcmFwcGVyLGE9ZS5zZXRXcmFwcGVyLHM9ZS51bnNhZmVVbndyYXAsYz1lLnVud3JhcCxsPWUudW53cmFwSWZOZWVkZWQsdT1lLndyYXAsZD1lLmdldFRyZWVTY29wZSxwPXdpbmRvdy5SYW5nZSxoPWUud3JhcHBlcnMuU2hhZG93Um9vdDtvLnByb3RvdHlwZT17Z2V0IHN0YXJ0Q29udGFpbmVyKCl7cmV0dXJuIHIocyh0aGlzKS5zdGFydENvbnRhaW5lcil9LGdldCBlbmRDb250YWluZXIoKXtyZXR1cm4gcihzKHRoaXMpLmVuZENvbnRhaW5lcil9LGdldCBjb21tb25BbmNlc3RvckNvbnRhaW5lcigpe3JldHVybiByKHModGhpcykuY29tbW9uQW5jZXN0b3JDb250YWluZXIpfSxzZXRTdGFydDpmdW5jdGlvbihlLHQpe2U9bihlLHQpLHModGhpcykuc2V0U3RhcnQobChlKSx0KX0sc2V0RW5kOmZ1bmN0aW9uKGUsdCl7ZT1uKGUsdCkscyh0aGlzKS5zZXRFbmQobChlKSx0KX0sc2V0U3RhcnRCZWZvcmU6ZnVuY3Rpb24oZSl7cyh0aGlzKS5zZXRTdGFydEJlZm9yZShsKGUpKX0sc2V0U3RhcnRBZnRlcjpmdW5jdGlvbihlKXtzKHRoaXMpLnNldFN0YXJ0QWZ0ZXIobChlKSl9LHNldEVuZEJlZm9yZTpmdW5jdGlvbihlKXtzKHRoaXMpLnNldEVuZEJlZm9yZShsKGUpKX0sc2V0RW5kQWZ0ZXI6ZnVuY3Rpb24oZSl7cyh0aGlzKS5zZXRFbmRBZnRlcihsKGUpKX0sc2VsZWN0Tm9kZTpmdW5jdGlvbihlKXtzKHRoaXMpLnNlbGVjdE5vZGUobChlKSl9LHNlbGVjdE5vZGVDb250ZW50czpmdW5jdGlvbihlKXtzKHRoaXMpLnNlbGVjdE5vZGVDb250ZW50cyhsKGUpKX0sY29tcGFyZUJvdW5kYXJ5UG9pbnRzOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHModGhpcykuY29tcGFyZUJvdW5kYXJ5UG9pbnRzKGUsYyh0KSl9LGV4dHJhY3RDb250ZW50czpmdW5jdGlvbigpe3JldHVybiB1KHModGhpcykuZXh0cmFjdENvbnRlbnRzKCkpfSxjbG9uZUNvbnRlbnRzOmZ1bmN0aW9uKCl7cmV0dXJuIHUocyh0aGlzKS5jbG9uZUNvbnRlbnRzKCkpfSxpbnNlcnROb2RlOmZ1bmN0aW9uKGUpe3ModGhpcykuaW5zZXJ0Tm9kZShsKGUpKX0sc3Vycm91bmRDb250ZW50czpmdW5jdGlvbihlKXtzKHRoaXMpLnN1cnJvdW5kQ29udGVudHMobChlKSl9LGNsb25lUmFuZ2U6ZnVuY3Rpb24oKXtyZXR1cm4gdShzKHRoaXMpLmNsb25lUmFuZ2UoKSl9LGlzUG9pbnRJblJhbmdlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHModGhpcykuaXNQb2ludEluUmFuZ2UobChlKSx0KX0sY29tcGFyZVBvaW50OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHModGhpcykuY29tcGFyZVBvaW50KGwoZSksdCl9LGludGVyc2VjdHNOb2RlOmZ1bmN0aW9uKGUpe3JldHVybiBzKHRoaXMpLmludGVyc2VjdHNOb2RlKGwoZSkpfSx0b1N0cmluZzpmdW5jdGlvbigpe3JldHVybiBzKHRoaXMpLnRvU3RyaW5nKCl9fSxwLnByb3RvdHlwZS5jcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQmJihvLnByb3RvdHlwZS5jcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHUocyh0aGlzKS5jcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQoZSkpfSksaSh3aW5kb3cuUmFuZ2Usbyxkb2N1bWVudC5jcmVhdGVSYW5nZSgpKSxlLndyYXBwZXJzLlJhbmdlPW99KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gdChlKXtlLnByZXZpb3VzU2libGluZ189ZS5wcmV2aW91c1NpYmxpbmcsZS5uZXh0U2libGluZ189ZS5uZXh0U2libGluZyxlLnBhcmVudE5vZGVfPWUucGFyZW50Tm9kZX1mdW5jdGlvbiBuKG4sbyxpKXt2YXIgYT14KG4pLHM9eChvKSxjPWk/eChpKTpudWxsO2lmKHIobyksdChvKSxpKW4uZmlyc3RDaGlsZD09PWkmJihuLmZpcnN0Q2hpbGRfPWkpLGkucHJldmlvdXNTaWJsaW5nXz1pLnByZXZpb3VzU2libGluZztlbHNle24ubGFzdENoaWxkXz1uLmxhc3RDaGlsZCxuLmxhc3RDaGlsZD09PW4uZmlyc3RDaGlsZCYmKG4uZmlyc3RDaGlsZF89bi5maXJzdENoaWxkKTt2YXIgbD1SKGEubGFzdENoaWxkKTtsJiYobC5uZXh0U2libGluZ189bC5uZXh0U2libGluZyl9ZS5vcmlnaW5hbEluc2VydEJlZm9yZS5jYWxsKGEscyxjKX1mdW5jdGlvbiByKG4pe3ZhciByPXgobiksbz1yLnBhcmVudE5vZGU7aWYobyl7dmFyIGk9UihvKTt0KG4pLG4ucHJldmlvdXNTaWJsaW5nJiYobi5wcmV2aW91c1NpYmxpbmcubmV4dFNpYmxpbmdfPW4pLG4ubmV4dFNpYmxpbmcmJihuLm5leHRTaWJsaW5nLnByZXZpb3VzU2libGluZ189biksaS5sYXN0Q2hpbGQ9PT1uJiYoaS5sYXN0Q2hpbGRfPW4pLGkuZmlyc3RDaGlsZD09PW4mJihpLmZpcnN0Q2hpbGRfPW4pLGUub3JpZ2luYWxSZW1vdmVDaGlsZC5jYWxsKG8scil9fWZ1bmN0aW9uIG8oZSl7UC5zZXQoZSxbXSl9ZnVuY3Rpb24gaShlKXt2YXIgdD1QLmdldChlKTtyZXR1cm4gdHx8UC5zZXQoZSx0PVtdKSx0fWZ1bmN0aW9uIGEoZSl7Zm9yKHZhciB0PVtdLG49MCxyPWUuZmlyc3RDaGlsZDtyO3I9ci5uZXh0U2libGluZyl0W24rK109cjtyZXR1cm4gdH1mdW5jdGlvbiBzKCl7Zm9yKHZhciBlPTA7ZTxGLmxlbmd0aDtlKyspe3ZhciB0PUZbZV0sbj10LnBhcmVudFJlbmRlcmVyO24mJm4uZGlydHl8fHQucmVuZGVyKCl9Rj1bXX1mdW5jdGlvbiBjKCl7VD1udWxsLHMoKX1mdW5jdGlvbiBsKGUpe3ZhciB0PUEuZ2V0KGUpO3JldHVybiB0fHwodD1uZXcgaChlKSxBLnNldChlLHQpKSx0fWZ1bmN0aW9uIHUoZSl7dmFyIHQ9aihlKS5yb290O3JldHVybiB0IGluc3RhbmNlb2YgQz90Om51bGx9ZnVuY3Rpb24gZChlKXtyZXR1cm4gbChlLmhvc3QpfWZ1bmN0aW9uIHAoZSl7dGhpcy5za2lwPSExLHRoaXMubm9kZT1lLHRoaXMuY2hpbGROb2Rlcz1bXX1mdW5jdGlvbiBoKGUpe3RoaXMuaG9zdD1lLHRoaXMuZGlydHk9ITEsdGhpcy5pbnZhbGlkYXRlQXR0cmlidXRlcygpLHRoaXMuYXNzb2NpYXRlTm9kZShlKX1mdW5jdGlvbiBmKGUpe2Zvcih2YXIgdD1bXSxuPWUuZmlyc3RDaGlsZDtuO249bi5uZXh0U2libGluZylFKG4pP3QucHVzaC5hcHBseSh0LGkobikpOnQucHVzaChuKTtyZXR1cm4gdH1mdW5jdGlvbiBtKGUpe2lmKGUgaW5zdGFuY2VvZiBMKXJldHVybiBlO2lmKGUgaW5zdGFuY2VvZiBPKXJldHVybiBudWxsO2Zvcih2YXIgdD1lLmZpcnN0Q2hpbGQ7dDt0PXQubmV4dFNpYmxpbmcpe3ZhciBuPW0odCk7aWYobilyZXR1cm4gbn1yZXR1cm4gbnVsbH1mdW5jdGlvbiB3KGUsdCl7aSh0KS5wdXNoKGUpO3ZhciBuPWsuZ2V0KGUpO24/bi5wdXNoKHQpOmsuc2V0KGUsW3RdKX1mdW5jdGlvbiB2KGUpe3JldHVybiBrLmdldChlKX1mdW5jdGlvbiBnKGUpe2suc2V0KGUsdm9pZCAwKX1mdW5jdGlvbiBiKGUsdCl7dmFyIG49dC5nZXRBdHRyaWJ1dGUoXCJzZWxlY3RcIik7aWYoIW4pcmV0dXJuITA7aWYobj1uLnRyaW0oKSwhbilyZXR1cm4hMDtpZighKGUgaW5zdGFuY2VvZiBNKSlyZXR1cm4hMTtpZighcS50ZXN0KG4pKXJldHVybiExO3RyeXtyZXR1cm4gZS5tYXRjaGVzKG4pfWNhdGNoKHIpe3JldHVybiExfX1mdW5jdGlvbiB5KGUsdCl7dmFyIG49dih0KTtyZXR1cm4gbiYmbltuLmxlbmd0aC0xXT09PWV9ZnVuY3Rpb24gRShlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIE98fGUgaW5zdGFuY2VvZiBMfWZ1bmN0aW9uIF8oZSl7cmV0dXJuIGUuc2hhZG93Um9vdH1mdW5jdGlvbiBTKGUpe2Zvcih2YXIgdD1bXSxuPWUuc2hhZG93Um9vdDtuO249bi5vbGRlclNoYWRvd1Jvb3QpdC5wdXNoKG4pO3JldHVybiB0fXZhciBULE09ZS53cmFwcGVycy5FbGVtZW50LE89ZS53cmFwcGVycy5IVE1MQ29udGVudEVsZW1lbnQsTD1lLndyYXBwZXJzLkhUTUxTaGFkb3dFbGVtZW50LE49ZS53cmFwcGVycy5Ob2RlLEM9ZS53cmFwcGVycy5TaGFkb3dSb290LGo9KGUuYXNzZXJ0LGUuZ2V0VHJlZVNjb3BlKSxEPShlLm1peGluLGUub25lT2YpLEg9ZS51bnNhZmVVbndyYXAseD1lLnVud3JhcCxSPWUud3JhcCxJPWUuQXJyYXlTcGxpY2UsUD1uZXcgV2Vha01hcCxrPW5ldyBXZWFrTWFwLEE9bmV3IFdlYWtNYXAsVz1EKHdpbmRvdyxbXCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWVcIixcIm1velJlcXVlc3RBbmltYXRpb25GcmFtZVwiLFwid2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lXCIsXCJzZXRUaW1lb3V0XCJdKSxGPVtdLFU9bmV3IEk7VS5lcXVhbHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4geChlLm5vZGUpPT09dH0scC5wcm90b3R5cGU9e2FwcGVuZDpmdW5jdGlvbihlKXt2YXIgdD1uZXcgcChlKTtyZXR1cm4gdGhpcy5jaGlsZE5vZGVzLnB1c2godCksdH0sc3luYzpmdW5jdGlvbihlKXtpZighdGhpcy5za2lwKXtmb3IodmFyIHQ9dGhpcy5ub2RlLG89dGhpcy5jaGlsZE5vZGVzLGk9YSh4KHQpKSxzPWV8fG5ldyBXZWFrTWFwLGM9VS5jYWxjdWxhdGVTcGxpY2VzKG8saSksbD0wLHU9MCxkPTAscD0wO3A8Yy5sZW5ndGg7cCsrKXtmb3IodmFyIGg9Y1twXTtkPGguaW5kZXg7ZCsrKXUrKyxvW2wrK10uc3luYyhzKTtmb3IodmFyIGY9aC5yZW1vdmVkLmxlbmd0aCxtPTA7Zj5tO20rKyl7dmFyIHc9UihpW3UrK10pO3MuZ2V0KHcpfHxyKHcpfWZvcih2YXIgdj1oLmFkZGVkQ291bnQsZz1pW3VdJiZSKGlbdV0pLG09MDt2Pm07bSsrKXt2YXIgYj1vW2wrK10seT1iLm5vZGU7bih0LHksZykscy5zZXQoeSwhMCksYi5zeW5jKHMpfWQrPXZ9Zm9yKHZhciBwPWQ7cDxvLmxlbmd0aDtwKyspb1twXS5zeW5jKHMpfX19LGgucHJvdG90eXBlPXtyZW5kZXI6ZnVuY3Rpb24oZSl7aWYodGhpcy5kaXJ0eSl7dGhpcy5pbnZhbGlkYXRlQXR0cmlidXRlcygpO3ZhciB0PXRoaXMuaG9zdDt0aGlzLmRpc3RyaWJ1dGlvbih0KTt2YXIgbj1lfHxuZXcgcCh0KTt0aGlzLmJ1aWxkUmVuZGVyVHJlZShuLHQpO3ZhciByPSFlO3ImJm4uc3luYygpLHRoaXMuZGlydHk9ITF9fSxnZXQgcGFyZW50UmVuZGVyZXIoKXtyZXR1cm4gaih0aGlzLmhvc3QpLnJlbmRlcmVyfSxpbnZhbGlkYXRlOmZ1bmN0aW9uKCl7aWYoIXRoaXMuZGlydHkpe3RoaXMuZGlydHk9ITA7dmFyIGU9dGhpcy5wYXJlbnRSZW5kZXJlcjtpZihlJiZlLmludmFsaWRhdGUoKSxGLnB1c2godGhpcyksVClyZXR1cm47VD13aW5kb3dbV10oYywwKX19LGRpc3RyaWJ1dGlvbjpmdW5jdGlvbihlKXt0aGlzLnJlc2V0QWxsU3VidHJlZXMoZSksdGhpcy5kaXN0cmlidXRpb25SZXNvbHV0aW9uKGUpfSxyZXNldEFsbDpmdW5jdGlvbihlKXtFKGUpP28oZSk6ZyhlKSx0aGlzLnJlc2V0QWxsU3VidHJlZXMoZSl9LHJlc2V0QWxsU3VidHJlZXM6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PWUuZmlyc3RDaGlsZDt0O3Q9dC5uZXh0U2libGluZyl0aGlzLnJlc2V0QWxsKHQpO2Uuc2hhZG93Um9vdCYmdGhpcy5yZXNldEFsbChlLnNoYWRvd1Jvb3QpLGUub2xkZXJTaGFkb3dSb290JiZ0aGlzLnJlc2V0QWxsKGUub2xkZXJTaGFkb3dSb290KX0sZGlzdHJpYnV0aW9uUmVzb2x1dGlvbjpmdW5jdGlvbihlKXtpZihfKGUpKXtmb3IodmFyIHQ9ZSxuPWYodCkscj1TKHQpLG89MDtvPHIubGVuZ3RoO28rKyl0aGlzLnBvb2xEaXN0cmlidXRpb24ocltvXSxuKTtmb3IodmFyIG89ci5sZW5ndGgtMTtvPj0wO28tLSl7dmFyIGk9cltvXSxhPW0oaSk7aWYoYSl7dmFyIHM9aS5vbGRlclNoYWRvd1Jvb3Q7cyYmKG49ZihzKSk7Zm9yKHZhciBjPTA7YzxuLmxlbmd0aDtjKyspdyhuW2NdLGEpfXRoaXMuZGlzdHJpYnV0aW9uUmVzb2x1dGlvbihpKX19Zm9yKHZhciBsPWUuZmlyc3RDaGlsZDtsO2w9bC5uZXh0U2libGluZyl0aGlzLmRpc3RyaWJ1dGlvblJlc29sdXRpb24obCl9LHBvb2xEaXN0cmlidXRpb246ZnVuY3Rpb24oZSx0KXtpZighKGUgaW5zdGFuY2VvZiBMKSlpZihlIGluc3RhbmNlb2YgTyl7dmFyIG49ZTt0aGlzLnVwZGF0ZURlcGVuZGVudEF0dHJpYnV0ZXMobi5nZXRBdHRyaWJ1dGUoXCJzZWxlY3RcIikpO2Zvcih2YXIgcj0hMSxvPTA7bzx0Lmxlbmd0aDtvKyspe3ZhciBlPXRbb107ZSYmYihlLG4pJiYodyhlLG4pLHRbb109dm9pZCAwLHI9ITApfWlmKCFyKWZvcih2YXIgaT1uLmZpcnN0Q2hpbGQ7aTtpPWkubmV4dFNpYmxpbmcpdyhpLG4pfWVsc2UgZm9yKHZhciBpPWUuZmlyc3RDaGlsZDtpO2k9aS5uZXh0U2libGluZyl0aGlzLnBvb2xEaXN0cmlidXRpb24oaSx0KX0sYnVpbGRSZW5kZXJUcmVlOmZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuPXRoaXMuY29tcG9zZSh0KSxyPTA7cjxuLmxlbmd0aDtyKyspe3ZhciBvPW5bcl0saT1lLmFwcGVuZChvKTt0aGlzLmJ1aWxkUmVuZGVyVHJlZShpLG8pfWlmKF8odCkpe3ZhciBhPWwodCk7YS5kaXJ0eT0hMX19LGNvbXBvc2U6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PVtdLG49ZS5zaGFkb3dSb290fHxlLHI9bi5maXJzdENoaWxkO3I7cj1yLm5leHRTaWJsaW5nKWlmKEUocikpe3RoaXMuYXNzb2NpYXRlTm9kZShuKTtmb3IodmFyIG89aShyKSxhPTA7YTxvLmxlbmd0aDthKyspe3ZhciBzPW9bYV07eShyLHMpJiZ0LnB1c2gocyl9fWVsc2UgdC5wdXNoKHIpO3JldHVybiB0fSxpbnZhbGlkYXRlQXR0cmlidXRlczpmdW5jdGlvbigpe3RoaXMuYXR0cmlidXRlcz1PYmplY3QuY3JlYXRlKG51bGwpfSx1cGRhdGVEZXBlbmRlbnRBdHRyaWJ1dGVzOmZ1bmN0aW9uKGUpe2lmKGUpe3ZhciB0PXRoaXMuYXR0cmlidXRlczsvXFwuXFx3Ky8udGVzdChlKSYmKHRbXCJjbGFzc1wiXT0hMCksLyNcXHcrLy50ZXN0KGUpJiYodC5pZD0hMCksZS5yZXBsYWNlKC9cXFtcXHMqKFteXFxzPVxcfH5cXF1dKykvZyxmdW5jdGlvbihlLG4pe3Rbbl09ITB9KX19LGRlcGVuZHNPbkF0dHJpYnV0ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5hdHRyaWJ1dGVzW2VdfSxhc3NvY2lhdGVOb2RlOmZ1bmN0aW9uKGUpe0goZSkucG9seW1lclNoYWRvd1JlbmRlcmVyXz10aGlzfX07dmFyIHE9L14oOm5vdFxcKCk/WyouI1thLXpBLVpffF0vO04ucHJvdG90eXBlLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcj1mdW5jdGlvbihlKXt2YXIgdD1IKHRoaXMpLnBvbHltZXJTaGFkb3dSZW5kZXJlcl87cmV0dXJuIHQ/KHQuaW52YWxpZGF0ZSgpLCEwKTohMX0sTy5wcm90b3R5cGUuZ2V0RGlzdHJpYnV0ZWROb2Rlcz1MLnByb3RvdHlwZS5nZXREaXN0cmlidXRlZE5vZGVzPWZ1bmN0aW9uKCl7cmV0dXJuIHMoKSxpKHRoaXMpfSxNLnByb3RvdHlwZS5nZXREZXN0aW5hdGlvbkluc2VydGlvblBvaW50cz1mdW5jdGlvbigpe3JldHVybiBzKCksdih0aGlzKXx8W119LE8ucHJvdG90eXBlLm5vZGVJc0luc2VydGVkXz1MLnByb3RvdHlwZS5ub2RlSXNJbnNlcnRlZF89ZnVuY3Rpb24oKXt0aGlzLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpO3ZhciBlLHQ9dSh0aGlzKTt0JiYoZT1kKHQpKSxIKHRoaXMpLnBvbHltZXJTaGFkb3dSZW5kZXJlcl89ZSxlJiZlLmludmFsaWRhdGUoKX0sZS5nZXRSZW5kZXJlckZvckhvc3Q9bCxlLmdldFNoYWRvd1RyZWVzPVMsZS5yZW5kZXJBbGxQZW5kaW5nPXMsZS5nZXREZXN0aW5hdGlvbkluc2VydGlvblBvaW50cz12LGUudmlzdWFsPXtpbnNlcnRCZWZvcmU6bixyZW1vdmU6cn19KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gdCh0KXtpZih3aW5kb3dbdF0pe3IoIWUud3JhcHBlcnNbdF0pO3ZhciBjPWZ1bmN0aW9uKGUpe24uY2FsbCh0aGlzLGUpfTtjLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKG4ucHJvdG90eXBlKSxvKGMucHJvdG90eXBlLHtnZXQgZm9ybSgpe3JldHVybiBzKGEodGhpcykuZm9ybSl9fSksaSh3aW5kb3dbdF0sYyxkb2N1bWVudC5jcmVhdGVFbGVtZW50KHQuc2xpY2UoNCwtNykpKSxlLndyYXBwZXJzW3RdPWN9fXZhciBuPWUud3JhcHBlcnMuSFRNTEVsZW1lbnQscj1lLmFzc2VydCxvPWUubWl4aW4saT1lLnJlZ2lzdGVyV3JhcHBlcixhPWUudW53cmFwLHM9ZS53cmFwLGM9W1wiSFRNTEJ1dHRvbkVsZW1lbnRcIixcIkhUTUxGaWVsZFNldEVsZW1lbnRcIixcIkhUTUxJbnB1dEVsZW1lbnRcIixcIkhUTUxLZXlnZW5FbGVtZW50XCIsXCJIVE1MTGFiZWxFbGVtZW50XCIsXCJIVE1MTGVnZW5kRWxlbWVudFwiLFwiSFRNTE9iamVjdEVsZW1lbnRcIixcIkhUTUxPdXRwdXRFbGVtZW50XCIsXCJIVE1MVGV4dEFyZWFFbGVtZW50XCJdO2MuZm9yRWFjaCh0KX0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiB0KGUpe3IoZSx0aGlzKX12YXIgbj1lLnJlZ2lzdGVyV3JhcHBlcixyPWUuc2V0V3JhcHBlcixvPWUudW5zYWZlVW53cmFwLGk9ZS51bndyYXAsYT1lLnVud3JhcElmTmVlZGVkLHM9ZS53cmFwLGM9d2luZG93LlNlbGVjdGlvbjt0LnByb3RvdHlwZT17Z2V0IGFuY2hvck5vZGUoKXtyZXR1cm4gcyhvKHRoaXMpLmFuY2hvck5vZGUpfSxnZXQgZm9jdXNOb2RlKCl7cmV0dXJuIHMobyh0aGlzKS5mb2N1c05vZGUpfSxhZGRSYW5nZTpmdW5jdGlvbihlKXtvKHRoaXMpLmFkZFJhbmdlKGEoZSkpfSxjb2xsYXBzZTpmdW5jdGlvbihlLHQpe28odGhpcykuY29sbGFwc2UoYShlKSx0KX0sY29udGFpbnNOb2RlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIG8odGhpcykuY29udGFpbnNOb2RlKGEoZSksdCl9LGdldFJhbmdlQXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIHMobyh0aGlzKS5nZXRSYW5nZUF0KGUpKX0scmVtb3ZlUmFuZ2U6ZnVuY3Rpb24oZSl7byh0aGlzKS5yZW1vdmVSYW5nZShpKGUpKX0sc2VsZWN0QWxsQ2hpbGRyZW46ZnVuY3Rpb24oZSl7byh0aGlzKS5zZWxlY3RBbGxDaGlsZHJlbihlIGluc3RhbmNlb2YgU2hhZG93Um9vdD9vKGUuaG9zdCk6YShlKSl9LHRvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIG8odGhpcykudG9TdHJpbmcoKX19LGMucHJvdG90eXBlLmV4dGVuZCYmKHQucHJvdG90eXBlLmV4dGVuZD1mdW5jdGlvbihlLHQpe28odGhpcykuZXh0ZW5kKGEoZSksdCl9KSxuKHdpbmRvdy5TZWxlY3Rpb24sdCx3aW5kb3cuZ2V0U2VsZWN0aW9uKCkpLGUud3JhcHBlcnMuU2VsZWN0aW9uPXR9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gdChlKXtyKGUsdGhpcyl9dmFyIG49ZS5yZWdpc3RlcldyYXBwZXIscj1lLnNldFdyYXBwZXIsbz1lLnVuc2FmZVVud3JhcCxpPWUudW53cmFwSWZOZWVkZWQsYT1lLndyYXAscz13aW5kb3cuVHJlZVdhbGtlcjt0LnByb3RvdHlwZT17Z2V0IHJvb3QoKXtyZXR1cm4gYShvKHRoaXMpLnJvb3QpfSxnZXQgY3VycmVudE5vZGUoKXtyZXR1cm4gYShvKHRoaXMpLmN1cnJlbnROb2RlKX0sc2V0IGN1cnJlbnROb2RlKGUpe28odGhpcykuY3VycmVudE5vZGU9aShlKX0sZ2V0IGZpbHRlcigpe3JldHVybiBvKHRoaXMpLmZpbHRlcn0scGFyZW50Tm9kZTpmdW5jdGlvbigpe3JldHVybiBhKG8odGhpcykucGFyZW50Tm9kZSgpKX0sZmlyc3RDaGlsZDpmdW5jdGlvbigpe3JldHVybiBhKG8odGhpcykuZmlyc3RDaGlsZCgpKX0sbGFzdENoaWxkOmZ1bmN0aW9uKCl7cmV0dXJuIGEobyh0aGlzKS5sYXN0Q2hpbGQoKSl9LHByZXZpb3VzU2libGluZzpmdW5jdGlvbigpe3JldHVybiBhKG8odGhpcykucHJldmlvdXNTaWJsaW5nKCkpfSxwcmV2aW91c05vZGU6ZnVuY3Rpb24oKXtyZXR1cm4gYShvKHRoaXMpLnByZXZpb3VzTm9kZSgpKX0sbmV4dE5vZGU6ZnVuY3Rpb24oKXtyZXR1cm4gYShvKHRoaXMpLm5leHROb2RlKCkpfX0sbihzLHQpLGUud3JhcHBlcnMuVHJlZVdhbGtlcj10fSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHQoZSl7dS5jYWxsKHRoaXMsZSksdGhpcy50cmVlU2NvcGVfPW5ldyB3KHRoaXMsbnVsbCl9ZnVuY3Rpb24gbihlKXt2YXIgbj1kb2N1bWVudFtlXTt0LnByb3RvdHlwZVtlXT1mdW5jdGlvbigpe3JldHVybiBqKG4uYXBwbHkoTih0aGlzKSxhcmd1bWVudHMpKX19ZnVuY3Rpb24gcihlLHQpe3guY2FsbChOKHQpLEMoZSkpLG8oZSx0KX1mdW5jdGlvbiBvKGUsdCl7ZS5zaGFkb3dSb290JiZ0LmFkb3B0Tm9kZShlLnNoYWRvd1Jvb3QpLGUgaW5zdGFuY2VvZiBtJiZpKGUsdCk7Zm9yKHZhciBuPWUuZmlyc3RDaGlsZDtuO249bi5uZXh0U2libGluZylvKG4sdCl9ZnVuY3Rpb24gaShlLHQpe3ZhciBuPWUub2xkZXJTaGFkb3dSb290O24mJnQuYWRvcHROb2RlKG4pfWZ1bmN0aW9uIGEoZSl7TChlLHRoaXMpfWZ1bmN0aW9uIHMoZSx0KXtcbnZhciBuPWRvY3VtZW50LmltcGxlbWVudGF0aW9uW3RdO2UucHJvdG90eXBlW3RdPWZ1bmN0aW9uKCl7cmV0dXJuIGoobi5hcHBseShOKHRoaXMpLGFyZ3VtZW50cykpfX1mdW5jdGlvbiBjKGUsdCl7dmFyIG49ZG9jdW1lbnQuaW1wbGVtZW50YXRpb25bdF07ZS5wcm90b3R5cGVbdF09ZnVuY3Rpb24oKXtyZXR1cm4gbi5hcHBseShOKHRoaXMpLGFyZ3VtZW50cyl9fXZhciBsPWUuR2V0RWxlbWVudHNCeUludGVyZmFjZSx1PWUud3JhcHBlcnMuTm9kZSxkPWUuUGFyZW50Tm9kZUludGVyZmFjZSxwPWUuTm9uRWxlbWVudFBhcmVudE5vZGVJbnRlcmZhY2UsaD1lLndyYXBwZXJzLlNlbGVjdGlvbixmPWUuU2VsZWN0b3JzSW50ZXJmYWNlLG09ZS53cmFwcGVycy5TaGFkb3dSb290LHc9ZS5UcmVlU2NvcGUsdj1lLmNsb25lTm9kZSxnPWUuZGVmaW5lR2V0dGVyLGI9ZS5kZWZpbmVXcmFwR2V0dGVyLHk9ZS5lbGVtZW50RnJvbVBvaW50LEU9ZS5mb3J3YXJkTWV0aG9kc1RvV3JhcHBlcixfPWUubWF0Y2hlc05hbWVzLFM9ZS5taXhpbixUPWUucmVnaXN0ZXJXcmFwcGVyLE09ZS5yZW5kZXJBbGxQZW5kaW5nLE89ZS5yZXdyYXAsTD1lLnNldFdyYXBwZXIsTj1lLnVuc2FmZVVud3JhcCxDPWUudW53cmFwLGo9ZS53cmFwLEQ9ZS53cmFwRXZlbnRUYXJnZXRNZXRob2RzLEg9KGUud3JhcE5vZGVMaXN0LG5ldyBXZWFrTWFwKTt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHUucHJvdG90eXBlKSxiKHQsXCJkb2N1bWVudEVsZW1lbnRcIiksYih0LFwiYm9keVwiKSxiKHQsXCJoZWFkXCIpLGcodCxcImFjdGl2ZUVsZW1lbnRcIixmdW5jdGlvbigpe3ZhciBlPUModGhpcykuYWN0aXZlRWxlbWVudDtpZighZXx8IWUubm9kZVR5cGUpcmV0dXJuIG51bGw7Zm9yKHZhciB0PWooZSk7IXRoaXMuY29udGFpbnModCk7KXtmb3IoO3QucGFyZW50Tm9kZTspdD10LnBhcmVudE5vZGU7aWYoIXQuaG9zdClyZXR1cm4gbnVsbDt0PXQuaG9zdH1yZXR1cm4gdH0pLFtcImNyZWF0ZUNvbW1lbnRcIixcImNyZWF0ZURvY3VtZW50RnJhZ21lbnRcIixcImNyZWF0ZUVsZW1lbnRcIixcImNyZWF0ZUVsZW1lbnROU1wiLFwiY3JlYXRlRXZlbnRcIixcImNyZWF0ZUV2ZW50TlNcIixcImNyZWF0ZVJhbmdlXCIsXCJjcmVhdGVUZXh0Tm9kZVwiXS5mb3JFYWNoKG4pO3ZhciB4PWRvY3VtZW50LmFkb3B0Tm9kZSxSPWRvY3VtZW50LmdldFNlbGVjdGlvbjtTKHQucHJvdG90eXBlLHthZG9wdE5vZGU6ZnVuY3Rpb24oZSl7cmV0dXJuIGUucGFyZW50Tm9kZSYmZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGUpLHIoZSx0aGlzKSxlfSxlbGVtZW50RnJvbVBvaW50OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHkodGhpcyx0aGlzLGUsdCl9LGltcG9ydE5vZGU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdihlLHQsTih0aGlzKSl9LGdldFNlbGVjdGlvbjpmdW5jdGlvbigpe3JldHVybiBNKCksbmV3IGgoUi5jYWxsKEModGhpcykpKX0sZ2V0RWxlbWVudHNCeU5hbWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGYucXVlcnlTZWxlY3RvckFsbC5jYWxsKHRoaXMsXCJbbmFtZT1cIitKU09OLnN0cmluZ2lmeShTdHJpbmcoZSkpK1wiXVwiKX19KTt2YXIgST1kb2N1bWVudC5jcmVhdGVUcmVlV2Fsa2VyLFA9ZS53cmFwcGVycy5UcmVlV2Fsa2VyO2lmKHQucHJvdG90eXBlLmNyZWF0ZVRyZWVXYWxrZXI9ZnVuY3Rpb24oZSx0LG4scil7dmFyIG89bnVsbDtyZXR1cm4gbiYmKG4uYWNjZXB0Tm9kZSYmXCJmdW5jdGlvblwiPT10eXBlb2Ygbi5hY2NlcHROb2RlP289e2FjY2VwdE5vZGU6ZnVuY3Rpb24oZSl7cmV0dXJuIG4uYWNjZXB0Tm9kZShqKGUpKX19OlwiZnVuY3Rpb25cIj09dHlwZW9mIG4mJihvPWZ1bmN0aW9uKGUpe3JldHVybiBuKGooZSkpfSkpLG5ldyBQKEkuY2FsbChDKHRoaXMpLEMoZSksdCxvLHIpKX0sZG9jdW1lbnQucmVnaXN0ZXJFbGVtZW50KXt2YXIgaz1kb2N1bWVudC5yZWdpc3RlckVsZW1lbnQ7dC5wcm90b3R5cGUucmVnaXN0ZXJFbGVtZW50PWZ1bmN0aW9uKHQsbil7ZnVuY3Rpb24gcihlKXtyZXR1cm4gZT92b2lkIEwoZSx0aGlzKTppP2RvY3VtZW50LmNyZWF0ZUVsZW1lbnQoaSx0KTpkb2N1bWVudC5jcmVhdGVFbGVtZW50KHQpfXZhciBvLGk7aWYodm9pZCAwIT09biYmKG89bi5wcm90b3R5cGUsaT1uW1wiZXh0ZW5kc1wiXSksb3x8KG89T2JqZWN0LmNyZWF0ZShIVE1MRWxlbWVudC5wcm90b3R5cGUpKSxlLm5hdGl2ZVByb3RvdHlwZVRhYmxlLmdldChvKSl0aHJvdyBuZXcgRXJyb3IoXCJOb3RTdXBwb3J0ZWRFcnJvclwiKTtmb3IodmFyIGEscz1PYmplY3QuZ2V0UHJvdG90eXBlT2YobyksYz1bXTtzJiYhKGE9ZS5uYXRpdmVQcm90b3R5cGVUYWJsZS5nZXQocykpOyljLnB1c2gocykscz1PYmplY3QuZ2V0UHJvdG90eXBlT2Yocyk7aWYoIWEpdGhyb3cgbmV3IEVycm9yKFwiTm90U3VwcG9ydGVkRXJyb3JcIik7Zm9yKHZhciBsPU9iamVjdC5jcmVhdGUoYSksdT1jLmxlbmd0aC0xO3U+PTA7dS0tKWw9T2JqZWN0LmNyZWF0ZShsKTtbXCJjcmVhdGVkQ2FsbGJhY2tcIixcImF0dGFjaGVkQ2FsbGJhY2tcIixcImRldGFjaGVkQ2FsbGJhY2tcIixcImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja1wiXS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciB0PW9bZV07dCYmKGxbZV09ZnVuY3Rpb24oKXtqKHRoaXMpaW5zdGFuY2VvZiByfHxPKHRoaXMpLHQuYXBwbHkoaih0aGlzKSxhcmd1bWVudHMpfSl9KTt2YXIgZD17cHJvdG90eXBlOmx9O2kmJihkW1wiZXh0ZW5kc1wiXT1pKSxyLnByb3RvdHlwZT1vLHIucHJvdG90eXBlLmNvbnN0cnVjdG9yPXIsZS5jb25zdHJ1Y3RvclRhYmxlLnNldChsLHIpLGUubmF0aXZlUHJvdG90eXBlVGFibGUuc2V0KG8sbCk7ay5jYWxsKEModGhpcyksdCxkKTtyZXR1cm4gcn0sRShbd2luZG93LkhUTUxEb2N1bWVudHx8d2luZG93LkRvY3VtZW50XSxbXCJyZWdpc3RlckVsZW1lbnRcIl0pfUUoW3dpbmRvdy5IVE1MQm9keUVsZW1lbnQsd2luZG93LkhUTUxEb2N1bWVudHx8d2luZG93LkRvY3VtZW50LHdpbmRvdy5IVE1MSGVhZEVsZW1lbnQsd2luZG93LkhUTUxIdG1sRWxlbWVudF0sW1wiYXBwZW5kQ2hpbGRcIixcImNvbXBhcmVEb2N1bWVudFBvc2l0aW9uXCIsXCJjb250YWluc1wiLFwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZVwiLFwiZ2V0RWxlbWVudHNCeVRhZ05hbWVcIixcImdldEVsZW1lbnRzQnlUYWdOYW1lTlNcIixcImluc2VydEJlZm9yZVwiLFwicXVlcnlTZWxlY3RvclwiLFwicXVlcnlTZWxlY3RvckFsbFwiLFwicmVtb3ZlQ2hpbGRcIixcInJlcGxhY2VDaGlsZFwiXSksRShbd2luZG93LkhUTUxCb2R5RWxlbWVudCx3aW5kb3cuSFRNTEhlYWRFbGVtZW50LHdpbmRvdy5IVE1MSHRtbEVsZW1lbnRdLF8pLEUoW3dpbmRvdy5IVE1MRG9jdW1lbnR8fHdpbmRvdy5Eb2N1bWVudF0sW1wiYWRvcHROb2RlXCIsXCJpbXBvcnROb2RlXCIsXCJjb250YWluc1wiLFwiY3JlYXRlQ29tbWVudFwiLFwiY3JlYXRlRG9jdW1lbnRGcmFnbWVudFwiLFwiY3JlYXRlRWxlbWVudFwiLFwiY3JlYXRlRWxlbWVudE5TXCIsXCJjcmVhdGVFdmVudFwiLFwiY3JlYXRlRXZlbnROU1wiLFwiY3JlYXRlUmFuZ2VcIixcImNyZWF0ZVRleHROb2RlXCIsXCJjcmVhdGVUcmVlV2Fsa2VyXCIsXCJlbGVtZW50RnJvbVBvaW50XCIsXCJnZXRFbGVtZW50QnlJZFwiLFwiZ2V0RWxlbWVudHNCeU5hbWVcIixcImdldFNlbGVjdGlvblwiXSksUyh0LnByb3RvdHlwZSxsKSxTKHQucHJvdG90eXBlLGQpLFModC5wcm90b3R5cGUsZiksUyh0LnByb3RvdHlwZSxwKSxTKHQucHJvdG90eXBlLHtnZXQgaW1wbGVtZW50YXRpb24oKXt2YXIgZT1ILmdldCh0aGlzKTtyZXR1cm4gZT9lOihlPW5ldyBhKEModGhpcykuaW1wbGVtZW50YXRpb24pLEguc2V0KHRoaXMsZSksZSl9LGdldCBkZWZhdWx0Vmlldygpe3JldHVybiBqKEModGhpcykuZGVmYXVsdFZpZXcpfX0pLFQod2luZG93LkRvY3VtZW50LHQsZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KFwiXCIpKSx3aW5kb3cuSFRNTERvY3VtZW50JiZUKHdpbmRvdy5IVE1MRG9jdW1lbnQsdCksRChbd2luZG93LkhUTUxCb2R5RWxlbWVudCx3aW5kb3cuSFRNTERvY3VtZW50fHx3aW5kb3cuRG9jdW1lbnQsd2luZG93LkhUTUxIZWFkRWxlbWVudF0pO3ZhciBBPWRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZURvY3VtZW50O2EucHJvdG90eXBlLmNyZWF0ZURvY3VtZW50PWZ1bmN0aW9uKCl7cmV0dXJuIGFyZ3VtZW50c1syXT1DKGFyZ3VtZW50c1syXSksaihBLmFwcGx5KE4odGhpcyksYXJndW1lbnRzKSl9LHMoYSxcImNyZWF0ZURvY3VtZW50VHlwZVwiKSxzKGEsXCJjcmVhdGVIVE1MRG9jdW1lbnRcIiksYyhhLFwiaGFzRmVhdHVyZVwiKSxUKHdpbmRvdy5ET01JbXBsZW1lbnRhdGlvbixhKSxFKFt3aW5kb3cuRE9NSW1wbGVtZW50YXRpb25dLFtcImNyZWF0ZURvY3VtZW50XCIsXCJjcmVhdGVEb2N1bWVudFR5cGVcIixcImNyZWF0ZUhUTUxEb2N1bWVudFwiLFwiaGFzRmVhdHVyZVwiXSksZS5hZG9wdE5vZGVOb1JlbW92ZT1yLGUud3JhcHBlcnMuRE9NSW1wbGVtZW50YXRpb249YSxlLndyYXBwZXJzLkRvY3VtZW50PXR9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gdChlKXtuLmNhbGwodGhpcyxlKX12YXIgbj1lLndyYXBwZXJzLkV2ZW50VGFyZ2V0LHI9ZS53cmFwcGVycy5TZWxlY3Rpb24sbz1lLm1peGluLGk9ZS5yZWdpc3RlcldyYXBwZXIsYT1lLnJlbmRlckFsbFBlbmRpbmcscz1lLnVud3JhcCxjPWUudW53cmFwSWZOZWVkZWQsbD1lLndyYXAsdT13aW5kb3cuV2luZG93LGQ9d2luZG93LmdldENvbXB1dGVkU3R5bGUscD13aW5kb3cuZ2V0RGVmYXVsdENvbXB1dGVkU3R5bGUsaD13aW5kb3cuZ2V0U2VsZWN0aW9uO3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUobi5wcm90b3R5cGUpLHUucHJvdG90eXBlLmdldENvbXB1dGVkU3R5bGU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbCh0aGlzfHx3aW5kb3cpLmdldENvbXB1dGVkU3R5bGUoYyhlKSx0KX0scCYmKHUucHJvdG90eXBlLmdldERlZmF1bHRDb21wdXRlZFN0eWxlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGwodGhpc3x8d2luZG93KS5nZXREZWZhdWx0Q29tcHV0ZWRTdHlsZShjKGUpLHQpfSksdS5wcm90b3R5cGUuZ2V0U2VsZWN0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIGwodGhpc3x8d2luZG93KS5nZXRTZWxlY3Rpb24oKX0sZGVsZXRlIHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlLGRlbGV0ZSB3aW5kb3cuZ2V0RGVmYXVsdENvbXB1dGVkU3R5bGUsZGVsZXRlIHdpbmRvdy5nZXRTZWxlY3Rpb24sW1wiYWRkRXZlbnRMaXN0ZW5lclwiLFwicmVtb3ZlRXZlbnRMaXN0ZW5lclwiLFwiZGlzcGF0Y2hFdmVudFwiXS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3UucHJvdG90eXBlW2VdPWZ1bmN0aW9uKCl7dmFyIHQ9bCh0aGlzfHx3aW5kb3cpO3JldHVybiB0W2VdLmFwcGx5KHQsYXJndW1lbnRzKX0sZGVsZXRlIHdpbmRvd1tlXX0pLG8odC5wcm90b3R5cGUse2dldENvbXB1dGVkU3R5bGU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gYSgpLGQuY2FsbChzKHRoaXMpLGMoZSksdCl9LGdldFNlbGVjdGlvbjpmdW5jdGlvbigpe3JldHVybiBhKCksbmV3IHIoaC5jYWxsKHModGhpcykpKX0sZ2V0IGRvY3VtZW50KCl7cmV0dXJuIGwocyh0aGlzKS5kb2N1bWVudCl9fSkscCYmKHQucHJvdG90eXBlLmdldERlZmF1bHRDb21wdXRlZFN0eWxlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGEoKSxwLmNhbGwocyh0aGlzKSxjKGUpLHQpfSksaSh1LHQsd2luZG93KSxlLndyYXBwZXJzLldpbmRvdz10fSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO3ZhciB0PWUudW53cmFwLG49d2luZG93LkRhdGFUcmFuc2Zlcnx8d2luZG93LkNsaXBib2FyZCxyPW4ucHJvdG90eXBlLnNldERyYWdJbWFnZTtyJiYobi5wcm90b3R5cGUuc2V0RHJhZ0ltYWdlPWZ1bmN0aW9uKGUsbixvKXtyLmNhbGwodGhpcyx0KGUpLG4sbyl9KX0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiB0KGUpe3ZhciB0O3Q9ZSBpbnN0YW5jZW9mIGk/ZTpuZXcgaShlJiZvKGUpKSxyKHQsdGhpcyl9dmFyIG49ZS5yZWdpc3RlcldyYXBwZXIscj1lLnNldFdyYXBwZXIsbz1lLnVud3JhcCxpPXdpbmRvdy5Gb3JtRGF0YTtpJiYobihpLHQsbmV3IGkpLGUud3JhcHBlcnMuRm9ybURhdGE9dCl9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIHQ9ZS51bndyYXBJZk5lZWRlZCxuPVhNTEh0dHBSZXF1ZXN0LnByb3RvdHlwZS5zZW5kO1hNTEh0dHBSZXF1ZXN0LnByb3RvdHlwZS5zZW5kPWZ1bmN0aW9uKGUpe3JldHVybiBuLmNhbGwodGhpcyx0KGUpKX19KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gdChlKXt2YXIgdD1uW2VdLHI9d2luZG93W3RdO2lmKHIpe3ZhciBvPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoZSksaT1vLmNvbnN0cnVjdG9yO3dpbmRvd1t0XT1pfX12YXIgbj0oZS5pc1dyYXBwZXJGb3Ise2E6XCJIVE1MQW5jaG9yRWxlbWVudFwiLGFyZWE6XCJIVE1MQXJlYUVsZW1lbnRcIixhdWRpbzpcIkhUTUxBdWRpb0VsZW1lbnRcIixiYXNlOlwiSFRNTEJhc2VFbGVtZW50XCIsYm9keTpcIkhUTUxCb2R5RWxlbWVudFwiLGJyOlwiSFRNTEJSRWxlbWVudFwiLGJ1dHRvbjpcIkhUTUxCdXR0b25FbGVtZW50XCIsY2FudmFzOlwiSFRNTENhbnZhc0VsZW1lbnRcIixjYXB0aW9uOlwiSFRNTFRhYmxlQ2FwdGlvbkVsZW1lbnRcIixjb2w6XCJIVE1MVGFibGVDb2xFbGVtZW50XCIsY29udGVudDpcIkhUTUxDb250ZW50RWxlbWVudFwiLGRhdGE6XCJIVE1MRGF0YUVsZW1lbnRcIixkYXRhbGlzdDpcIkhUTUxEYXRhTGlzdEVsZW1lbnRcIixkZWw6XCJIVE1MTW9kRWxlbWVudFwiLGRpcjpcIkhUTUxEaXJlY3RvcnlFbGVtZW50XCIsZGl2OlwiSFRNTERpdkVsZW1lbnRcIixkbDpcIkhUTUxETGlzdEVsZW1lbnRcIixlbWJlZDpcIkhUTUxFbWJlZEVsZW1lbnRcIixmaWVsZHNldDpcIkhUTUxGaWVsZFNldEVsZW1lbnRcIixmb250OlwiSFRNTEZvbnRFbGVtZW50XCIsZm9ybTpcIkhUTUxGb3JtRWxlbWVudFwiLGZyYW1lOlwiSFRNTEZyYW1lRWxlbWVudFwiLGZyYW1lc2V0OlwiSFRNTEZyYW1lU2V0RWxlbWVudFwiLGgxOlwiSFRNTEhlYWRpbmdFbGVtZW50XCIsaGVhZDpcIkhUTUxIZWFkRWxlbWVudFwiLGhyOlwiSFRNTEhSRWxlbWVudFwiLGh0bWw6XCJIVE1MSHRtbEVsZW1lbnRcIixpZnJhbWU6XCJIVE1MSUZyYW1lRWxlbWVudFwiLGltZzpcIkhUTUxJbWFnZUVsZW1lbnRcIixpbnB1dDpcIkhUTUxJbnB1dEVsZW1lbnRcIixrZXlnZW46XCJIVE1MS2V5Z2VuRWxlbWVudFwiLGxhYmVsOlwiSFRNTExhYmVsRWxlbWVudFwiLGxlZ2VuZDpcIkhUTUxMZWdlbmRFbGVtZW50XCIsbGk6XCJIVE1MTElFbGVtZW50XCIsbGluazpcIkhUTUxMaW5rRWxlbWVudFwiLG1hcDpcIkhUTUxNYXBFbGVtZW50XCIsbWFycXVlZTpcIkhUTUxNYXJxdWVlRWxlbWVudFwiLG1lbnU6XCJIVE1MTWVudUVsZW1lbnRcIixtZW51aXRlbTpcIkhUTUxNZW51SXRlbUVsZW1lbnRcIixtZXRhOlwiSFRNTE1ldGFFbGVtZW50XCIsbWV0ZXI6XCJIVE1MTWV0ZXJFbGVtZW50XCIsb2JqZWN0OlwiSFRNTE9iamVjdEVsZW1lbnRcIixvbDpcIkhUTUxPTGlzdEVsZW1lbnRcIixvcHRncm91cDpcIkhUTUxPcHRHcm91cEVsZW1lbnRcIixvcHRpb246XCJIVE1MT3B0aW9uRWxlbWVudFwiLG91dHB1dDpcIkhUTUxPdXRwdXRFbGVtZW50XCIscDpcIkhUTUxQYXJhZ3JhcGhFbGVtZW50XCIscGFyYW06XCJIVE1MUGFyYW1FbGVtZW50XCIscHJlOlwiSFRNTFByZUVsZW1lbnRcIixwcm9ncmVzczpcIkhUTUxQcm9ncmVzc0VsZW1lbnRcIixxOlwiSFRNTFF1b3RlRWxlbWVudFwiLHNjcmlwdDpcIkhUTUxTY3JpcHRFbGVtZW50XCIsc2VsZWN0OlwiSFRNTFNlbGVjdEVsZW1lbnRcIixzaGFkb3c6XCJIVE1MU2hhZG93RWxlbWVudFwiLHNvdXJjZTpcIkhUTUxTb3VyY2VFbGVtZW50XCIsc3BhbjpcIkhUTUxTcGFuRWxlbWVudFwiLHN0eWxlOlwiSFRNTFN0eWxlRWxlbWVudFwiLHRhYmxlOlwiSFRNTFRhYmxlRWxlbWVudFwiLHRib2R5OlwiSFRNTFRhYmxlU2VjdGlvbkVsZW1lbnRcIix0ZW1wbGF0ZTpcIkhUTUxUZW1wbGF0ZUVsZW1lbnRcIix0ZXh0YXJlYTpcIkhUTUxUZXh0QXJlYUVsZW1lbnRcIix0aGVhZDpcIkhUTUxUYWJsZVNlY3Rpb25FbGVtZW50XCIsdGltZTpcIkhUTUxUaW1lRWxlbWVudFwiLHRpdGxlOlwiSFRNTFRpdGxlRWxlbWVudFwiLHRyOlwiSFRNTFRhYmxlUm93RWxlbWVudFwiLHRyYWNrOlwiSFRNTFRyYWNrRWxlbWVudFwiLHVsOlwiSFRNTFVMaXN0RWxlbWVudFwiLHZpZGVvOlwiSFRNTFZpZGVvRWxlbWVudFwifSk7T2JqZWN0LmtleXMobikuZm9yRWFjaCh0KSxPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhlLndyYXBwZXJzKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3dpbmRvd1t0XT1lLndyYXBwZXJzW3RdfSl9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlLHQpe3ZhciBuPVwiXCI7cmV0dXJuIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoZSxmdW5jdGlvbihlKXtuKz1lLnRleHRDb250ZW50K1wiXFxuXFxuXCJ9KSx0fHwobj1uLnJlcGxhY2UoZCxcIlwiKSksbn1mdW5jdGlvbiBuKGUpe3ZhciB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtyZXR1cm4gdC50ZXh0Q29udGVudD1lLHR9ZnVuY3Rpb24gcihlKXt2YXIgdD1uKGUpO2RvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQodCk7dmFyIHI9W107aWYodC5zaGVldCl0cnl7cj10LnNoZWV0LmNzc1J1bGVzfWNhdGNoKG8pe31lbHNlIGNvbnNvbGUud2FybihcInNoZWV0IG5vdCBmb3VuZFwiLHQpO3JldHVybiB0LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodCkscn1mdW5jdGlvbiBvKCl7Qy5pbml0aWFsaXplZD0hMCxkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKEMpO3ZhciBlPUMuY29udGVudERvY3VtZW50LHQ9ZS5jcmVhdGVFbGVtZW50KFwiYmFzZVwiKTt0LmhyZWY9ZG9jdW1lbnQuYmFzZVVSSSxlLmhlYWQuYXBwZW5kQ2hpbGQodCl9ZnVuY3Rpb24gaShlKXtDLmluaXRpYWxpemVkfHxvKCksZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChDKSxlKEMuY29udGVudERvY3VtZW50KSxkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKEMpfWZ1bmN0aW9uIGEoZSx0KXtpZih0KXt2YXIgbztpZihlLm1hdGNoKFwiQGltcG9ydFwiKSYmRCl7dmFyIGE9bihlKTtpKGZ1bmN0aW9uKGUpe2UuaGVhZC5hcHBlbmRDaGlsZChhLmltcGwpLG89QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYS5zaGVldC5jc3NSdWxlcywwKSx0KG8pfSl9ZWxzZSBvPXIoZSksdChvKX19ZnVuY3Rpb24gcyhlKXtlJiZsKCkuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoZSkpfWZ1bmN0aW9uIGMoZSx0KXt2YXIgcj1uKGUpO3Iuc2V0QXR0cmlidXRlKHQsXCJcIiksci5zZXRBdHRyaWJ1dGUoeCxcIlwiKSxkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHIpfWZ1bmN0aW9uIGwoKXtyZXR1cm4ganx8KGo9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpLGouc2V0QXR0cmlidXRlKHgsXCJcIiksalt4XT0hMCksan12YXIgdT17c3RyaWN0U3R5bGluZzohMSxyZWdpc3RyeTp7fSxzaGltU3R5bGluZzpmdW5jdGlvbihlLG4scil7dmFyIG89dGhpcy5wcmVwYXJlUm9vdChlLG4sciksaT10aGlzLmlzVHlwZUV4dGVuc2lvbihyKSxhPXRoaXMubWFrZVNjb3BlU2VsZWN0b3IobixpKSxzPXQobywhMCk7cz10aGlzLnNjb3BlQ3NzVGV4dChzLGEpLGUmJihlLnNoaW1tZWRTdHlsZT1zKSx0aGlzLmFkZENzc1RvRG9jdW1lbnQocyxuKX0sc2hpbVN0eWxlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuc2hpbUNzc1RleHQoZS50ZXh0Q29udGVudCx0KX0sc2hpbUNzc1RleHQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT10aGlzLmluc2VydERpcmVjdGl2ZXMoZSksdGhpcy5zY29wZUNzc1RleHQoZSx0KX0sbWFrZVNjb3BlU2VsZWN0b3I6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT90P1wiW2lzPVwiK2UrXCJdXCI6ZTpcIlwifSxpc1R5cGVFeHRlbnNpb246ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJmUuaW5kZXhPZihcIi1cIik8MH0scHJlcGFyZVJvb3Q6ZnVuY3Rpb24oZSx0LG4pe3ZhciByPXRoaXMucmVnaXN0ZXJSb290KGUsdCxuKTtyZXR1cm4gdGhpcy5yZXBsYWNlVGV4dEluU3R5bGVzKHIucm9vdFN0eWxlcyx0aGlzLmluc2VydERpcmVjdGl2ZXMpLHRoaXMucmVtb3ZlU3R5bGVzKGUsci5yb290U3R5bGVzKSx0aGlzLnN0cmljdFN0eWxpbmcmJnRoaXMuYXBwbHlTY29wZVRvQ29udGVudChlLHQpLHIuc2NvcGVTdHlsZXN9LHJlbW92ZVN0eWxlczpmdW5jdGlvbihlLHQpe2Zvcih2YXIgbixyPTAsbz10Lmxlbmd0aDtvPnImJihuPXRbcl0pO3IrKyluLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobil9LHJlZ2lzdGVyUm9vdDpmdW5jdGlvbihlLHQsbil7dmFyIHI9dGhpcy5yZWdpc3RyeVt0XT17cm9vdDplLG5hbWU6dCxleHRlbmRzTmFtZTpufSxvPXRoaXMuZmluZFN0eWxlcyhlKTtyLnJvb3RTdHlsZXM9byxyLnNjb3BlU3R5bGVzPXIucm9vdFN0eWxlczt2YXIgaT10aGlzLnJlZ2lzdHJ5W3IuZXh0ZW5kc05hbWVdO3JldHVybiBpJiYoci5zY29wZVN0eWxlcz1pLnNjb3BlU3R5bGVzLmNvbmNhdChyLnNjb3BlU3R5bGVzKSkscn0sZmluZFN0eWxlczpmdW5jdGlvbihlKXtpZighZSlyZXR1cm5bXTt2YXIgdD1lLnF1ZXJ5U2VsZWN0b3JBbGwoXCJzdHlsZVwiKTtyZXR1cm4gQXJyYXkucHJvdG90eXBlLmZpbHRlci5jYWxsKHQsZnVuY3Rpb24oZSl7cmV0dXJuIWUuaGFzQXR0cmlidXRlKFIpfSl9LGFwcGx5U2NvcGVUb0NvbnRlbnQ6ZnVuY3Rpb24oZSx0KXtlJiYoQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChlLnF1ZXJ5U2VsZWN0b3JBbGwoXCIqXCIpLGZ1bmN0aW9uKGUpe2Uuc2V0QXR0cmlidXRlKHQsXCJcIil9KSxBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGUucXVlcnlTZWxlY3RvckFsbChcInRlbXBsYXRlXCIpLGZ1bmN0aW9uKGUpe3RoaXMuYXBwbHlTY29wZVRvQ29udGVudChlLmNvbnRlbnQsdCl9LHRoaXMpKX0saW5zZXJ0RGlyZWN0aXZlczpmdW5jdGlvbihlKXtyZXR1cm4gZT10aGlzLmluc2VydFBvbHlmaWxsRGlyZWN0aXZlc0luQ3NzVGV4dChlKSx0aGlzLmluc2VydFBvbHlmaWxsUnVsZXNJbkNzc1RleHQoZSl9LGluc2VydFBvbHlmaWxsRGlyZWN0aXZlc0luQ3NzVGV4dDpmdW5jdGlvbihlKXtyZXR1cm4gZT1lLnJlcGxhY2UocCxmdW5jdGlvbihlLHQpe3JldHVybiB0LnNsaWNlKDAsLTIpK1wie1wifSksZS5yZXBsYWNlKGgsZnVuY3Rpb24oZSx0KXtyZXR1cm4gdCtcIiB7XCJ9KX0saW5zZXJ0UG9seWZpbGxSdWxlc0luQ3NzVGV4dDpmdW5jdGlvbihlKXtyZXR1cm4gZT1lLnJlcGxhY2UoZixmdW5jdGlvbihlLHQpe3JldHVybiB0LnNsaWNlKDAsLTEpfSksZS5yZXBsYWNlKG0sZnVuY3Rpb24oZSx0LG4scil7dmFyIG89ZS5yZXBsYWNlKHQsXCJcIikucmVwbGFjZShuLFwiXCIpO3JldHVybiByK299KX0sc2NvcGVDc3NUZXh0OmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5leHRyYWN0VW5zY29wZWRSdWxlc0Zyb21Dc3NUZXh0KGUpO2lmKGU9dGhpcy5pbnNlcnRQb2x5ZmlsbEhvc3RJbkNzc1RleHQoZSksZT10aGlzLmNvbnZlcnRDb2xvbkhvc3QoZSksZT10aGlzLmNvbnZlcnRDb2xvbkhvc3RDb250ZXh0KGUpLGU9dGhpcy5jb252ZXJ0U2hhZG93RE9NU2VsZWN0b3JzKGUpLHQpe3ZhciBlLHI9dGhpczthKGUsZnVuY3Rpb24obil7ZT1yLnNjb3BlUnVsZXMobix0KX0pfXJldHVybiBlPWUrXCJcXG5cIituLGUudHJpbSgpfSxleHRyYWN0VW5zY29wZWRSdWxlc0Zyb21Dc3NUZXh0OmZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxuPVwiXCI7dD13LmV4ZWMoZSk7KW4rPXRbMV0uc2xpY2UoMCwtMSkrXCJcXG5cXG5cIjtmb3IoO3Q9di5leGVjKGUpOyluKz10WzBdLnJlcGxhY2UodFsyXSxcIlwiKS5yZXBsYWNlKHRbMV0sdFszXSkrXCJcXG5cXG5cIjtyZXR1cm4gbn0sY29udmVydENvbG9uSG9zdDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5jb252ZXJ0Q29sb25SdWxlKGUsRSx0aGlzLmNvbG9uSG9zdFBhcnRSZXBsYWNlcil9LGNvbnZlcnRDb2xvbkhvc3RDb250ZXh0OmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmNvbnZlcnRDb2xvblJ1bGUoZSxfLHRoaXMuY29sb25Ib3N0Q29udGV4dFBhcnRSZXBsYWNlcil9LGNvbnZlcnRDb2xvblJ1bGU6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBlLnJlcGxhY2UodCxmdW5jdGlvbihlLHQscixvKXtpZih0PU8scil7Zm9yKHZhciBpLGE9ci5zcGxpdChcIixcIikscz1bXSxjPTAsbD1hLmxlbmd0aDtsPmMmJihpPWFbY10pO2MrKylpPWkudHJpbSgpLHMucHVzaChuKHQsaSxvKSk7cmV0dXJuIHMuam9pbihcIixcIil9cmV0dXJuIHQrb30pfSxjb2xvbkhvc3RDb250ZXh0UGFydFJlcGxhY2VyOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdC5tYXRjaChnKT90aGlzLmNvbG9uSG9zdFBhcnRSZXBsYWNlcihlLHQsbik6ZSt0K24rXCIsIFwiK3QrXCIgXCIrZStufSxjb2xvbkhvc3RQYXJ0UmVwbGFjZXI6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBlK3QucmVwbGFjZShnLFwiXCIpK259LGNvbnZlcnRTaGFkb3dET01TZWxlY3RvcnM6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTA7dDxOLmxlbmd0aDt0KyspZT1lLnJlcGxhY2UoTlt0XSxcIiBcIik7cmV0dXJuIGV9LHNjb3BlUnVsZXM6ZnVuY3Rpb24oZSx0KXt2YXIgbj1cIlwiO3JldHVybiBlJiZBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGUsZnVuY3Rpb24oZSl7aWYoZS5zZWxlY3RvclRleHQmJmUuc3R5bGUmJnZvaWQgMCE9PWUuc3R5bGUuY3NzVGV4dCluKz10aGlzLnNjb3BlU2VsZWN0b3IoZS5zZWxlY3RvclRleHQsdCx0aGlzLnN0cmljdFN0eWxpbmcpK1wiIHtcXG5cdFwiLG4rPXRoaXMucHJvcGVydGllc0Zyb21SdWxlKGUpK1wiXFxufVxcblxcblwiO2Vsc2UgaWYoZS50eXBlPT09Q1NTUnVsZS5NRURJQV9SVUxFKW4rPVwiQG1lZGlhIFwiK2UubWVkaWEubWVkaWFUZXh0K1wiIHtcXG5cIixuKz10aGlzLnNjb3BlUnVsZXMoZS5jc3NSdWxlcyx0KSxuKz1cIlxcbn1cXG5cXG5cIjtlbHNlIHRyeXtlLmNzc1RleHQmJihuKz1lLmNzc1RleHQrXCJcXG5cXG5cIil9Y2F0Y2gocil7ZS50eXBlPT09Q1NTUnVsZS5LRVlGUkFNRVNfUlVMRSYmZS5jc3NSdWxlcyYmKG4rPXRoaXMuaWVTYWZlQ3NzVGV4dEZyb21LZXlGcmFtZVJ1bGUoZSkpfX0sdGhpcyksbn0saWVTYWZlQ3NzVGV4dEZyb21LZXlGcmFtZVJ1bGU6ZnVuY3Rpb24oZSl7dmFyIHQ9XCJAa2V5ZnJhbWVzIFwiK2UubmFtZStcIiB7XCI7cmV0dXJuIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoZS5jc3NSdWxlcyxmdW5jdGlvbihlKXt0Kz1cIiBcIitlLmtleVRleHQrXCIge1wiK2Uuc3R5bGUuY3NzVGV4dCtcIn1cIn0pLHQrPVwiIH1cIn0sc2NvcGVTZWxlY3RvcjpmdW5jdGlvbihlLHQsbil7dmFyIHI9W10sbz1lLnNwbGl0KFwiLFwiKTtyZXR1cm4gby5mb3JFYWNoKGZ1bmN0aW9uKGUpe2U9ZS50cmltKCksdGhpcy5zZWxlY3Rvck5lZWRzU2NvcGluZyhlLHQpJiYoZT1uJiYhZS5tYXRjaChPKT90aGlzLmFwcGx5U3RyaWN0U2VsZWN0b3JTY29wZShlLHQpOnRoaXMuYXBwbHlTZWxlY3RvclNjb3BlKGUsdCkpLHIucHVzaChlKX0sdGhpcyksci5qb2luKFwiLCBcIil9LHNlbGVjdG9yTmVlZHNTY29waW5nOmZ1bmN0aW9uKGUsdCl7aWYoQXJyYXkuaXNBcnJheSh0KSlyZXR1cm4hMDt2YXIgbj10aGlzLm1ha2VTY29wZU1hdGNoZXIodCk7cmV0dXJuIWUubWF0Y2gobil9LG1ha2VTY29wZU1hdGNoZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIGU9ZS5yZXBsYWNlKC9cXFsvZyxcIlxcXFxbXCIpLnJlcGxhY2UoL1xcXS9nLFwiXFxcXF1cIiksbmV3IFJlZ0V4cChcIl4oXCIrZStcIilcIitTLFwibVwiKX0sYXBwbHlTZWxlY3RvclNjb3BlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIEFycmF5LmlzQXJyYXkodCk/dGhpcy5hcHBseVNlbGVjdG9yU2NvcGVMaXN0KGUsdCk6dGhpcy5hcHBseVNpbXBsZVNlbGVjdG9yU2NvcGUoZSx0KX0sYXBwbHlTZWxlY3RvclNjb3BlTGlzdDpmdW5jdGlvbihlLHQpe2Zvcih2YXIgbixyPVtdLG89MDtuPXRbb107bysrKXIucHVzaCh0aGlzLmFwcGx5U2ltcGxlU2VsZWN0b3JTY29wZShlLG4pKTtyZXR1cm4gci5qb2luKFwiLCBcIil9LGFwcGx5U2ltcGxlU2VsZWN0b3JTY29wZTpmdW5jdGlvbihlLHQpe3JldHVybiBlLm1hdGNoKEwpPyhlPWUucmVwbGFjZShPLHQpLGUucmVwbGFjZShMLHQrXCIgXCIpKTp0K1wiIFwiK2V9LGFwcGx5U3RyaWN0U2VsZWN0b3JTY29wZTpmdW5jdGlvbihlLHQpe3Q9dC5yZXBsYWNlKC9cXFtpcz0oW15cXF1dKilcXF0vZyxcIiQxXCIpO3ZhciBuPVtcIiBcIixcIj5cIixcIitcIixcIn5cIl0scj1lLG89XCJbXCIrdCtcIl1cIjtyZXR1cm4gbi5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciB0PXIuc3BsaXQoZSk7cj10Lm1hcChmdW5jdGlvbihlKXt2YXIgdD1lLnRyaW0oKS5yZXBsYWNlKEwsXCJcIik7cmV0dXJuIHQmJm4uaW5kZXhPZih0KTwwJiZ0LmluZGV4T2Yobyk8MCYmKGU9dC5yZXBsYWNlKC8oW146XSopKDoqKSguKikvLFwiJDFcIitvK1wiJDIkM1wiKSksZX0pLmpvaW4oZSl9KSxyfSxpbnNlcnRQb2x5ZmlsbEhvc3RJbkNzc1RleHQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVwbGFjZShNLGIpLnJlcGxhY2UoVCxnKX0scHJvcGVydGllc0Zyb21SdWxlOmZ1bmN0aW9uKGUpe3ZhciB0PWUuc3R5bGUuY3NzVGV4dDtlLnN0eWxlLmNvbnRlbnQmJiFlLnN0eWxlLmNvbnRlbnQubWF0Y2goL1snXCJdK3xhdHRyLykmJih0PXQucmVwbGFjZSgvY29udGVudDpbXjtdKjsvZyxcImNvbnRlbnQ6ICdcIitlLnN0eWxlLmNvbnRlbnQrXCInO1wiKSk7dmFyIG49ZS5zdHlsZTtmb3IodmFyIHIgaW4gbilcImluaXRpYWxcIj09PW5bcl0mJih0Kz1yK1wiOiBpbml0aWFsOyBcIik7cmV0dXJuIHR9LHJlcGxhY2VUZXh0SW5TdHlsZXM6ZnVuY3Rpb24oZSx0KXtlJiZ0JiYoZSBpbnN0YW5jZW9mIEFycmF5fHwoZT1bZV0pLEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoZSxmdW5jdGlvbihlKXtlLnRleHRDb250ZW50PXQuY2FsbCh0aGlzLGUudGV4dENvbnRlbnQpfSx0aGlzKSl9LGFkZENzc1RvRG9jdW1lbnQ6ZnVuY3Rpb24oZSx0KXtlLm1hdGNoKFwiQGltcG9ydFwiKT9jKGUsdCk6cyhlKX19LGQ9L1xcL1xcKlteKl0qXFwqKyhbXlxcLypdW14qXSpcXCorKSpcXC8vZ2ltLHA9L1xcL1xcKlxccypAcG9seWZpbGwgKFteKl0qXFwqKyhbXlxcLypdW14qXSpcXCorKSpcXC8pKFtee10qPyl7L2dpbSxoPS9wb2x5ZmlsbC1uZXh0LXNlbGVjdG9yW159XSpjb250ZW50XFw6W1xcc10qP1snXCJdKC4qPylbJ1wiXVs7XFxzXSp9KFtee10qPyl7L2dpbSxmPS9cXC9cXCpcXHNAcG9seWZpbGwtcnVsZShbXipdKlxcKisoW15cXC8qXVteKl0qXFwqKykqKVxcLy9naW0sbT0vKHBvbHlmaWxsLXJ1bGUpW159XSooY29udGVudFxcOltcXHNdKlsnXCJdKC4qPylbJ1wiXSlbO1xcc10qW159XSp9L2dpbSx3PS9cXC9cXCpcXHNAcG9seWZpbGwtdW5zY29wZWQtcnVsZShbXipdKlxcKisoW15cXC8qXVteKl0qXFwqKykqKVxcLy9naW0sdj0vKHBvbHlmaWxsLXVuc2NvcGVkLXJ1bGUpW159XSooY29udGVudFxcOltcXHNdKlsnXCJdKC4qPylbJ1wiXSlbO1xcc10qW159XSp9L2dpbSxnPVwiLXNoYWRvd2Nzc2hvc3RcIixiPVwiLXNoYWRvd2Nzc2NvbnRleHRcIix5PVwiKSg/OlxcXFwoKCg/OlxcXFwoW14pKF0qXFxcXCl8W14pKF0qKSs/KVxcXFwpKT8oW14se10qKVwiLEU9bmV3IFJlZ0V4cChcIihcIitnK3ksXCJnaW1cIiksXz1uZXcgUmVnRXhwKFwiKFwiK2IreSxcImdpbVwiKSxTPVwiKFs+XFxcXHN+K1suLHs6XVtcXFxcc1xcXFxTXSopPyRcIixUPS9cXDpob3N0L2dpbSxNPS9cXDpob3N0LWNvbnRleHQvZ2ltLE89ZytcIi1uby1jb21iaW5hdG9yXCIsTD1uZXcgUmVnRXhwKGcsXCJnaW1cIiksTj0obmV3IFJlZ0V4cChiLFwiZ2ltXCIpLFsvPj4+L2csLzo6c2hhZG93L2csLzo6Y29udGVudC9nLC9cXC9kZWVwXFwvL2csL1xcL3NoYWRvd1xcLy9nLC9cXC9zaGFkb3ctZGVlcFxcLy9nLC9cXF5cXF4vZywvXFxeL2ddKSxDPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpZnJhbWVcIik7Qy5zdHlsZS5kaXNwbGF5PVwibm9uZVwiO3ZhciBqLEQ9bmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaChcIkNocm9tZVwiKSxIPVwic2hpbS1zaGFkb3dkb21cIix4PVwic2hpbS1zaGFkb3dkb20tY3NzXCIsUj1cIm5vLXNoaW1cIjtpZih3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpe3MoXCJzdHlsZSB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfVxcblwiKTt2YXIgST1TaGFkb3dET01Qb2x5ZmlsbC53cmFwKGRvY3VtZW50KSxQPUkucXVlcnlTZWxlY3RvcihcImhlYWRcIik7UC5pbnNlcnRCZWZvcmUobCgpLFAuY2hpbGROb2Rlc1swXSksZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIixmdW5jdGlvbigpe2UudXJsUmVzb2x2ZXI7aWYod2luZG93LkhUTUxJbXBvcnRzJiYhSFRNTEltcG9ydHMudXNlTmF0aXZlKXt2YXIgdD1cImxpbmtbcmVsPXN0eWxlc2hlZXRdW1wiK0grXCJdXCIsbj1cInN0eWxlW1wiK0grXCJdXCI7SFRNTEltcG9ydHMuaW1wb3J0ZXIuZG9jdW1lbnRQcmVsb2FkU2VsZWN0b3JzKz1cIixcIit0LEhUTUxJbXBvcnRzLmltcG9ydGVyLmltcG9ydHNQcmVsb2FkU2VsZWN0b3JzKz1cIixcIit0LEhUTUxJbXBvcnRzLnBhcnNlci5kb2N1bWVudFNlbGVjdG9ycz1bSFRNTEltcG9ydHMucGFyc2VyLmRvY3VtZW50U2VsZWN0b3JzLHQsbl0uam9pbihcIixcIik7dmFyIHI9SFRNTEltcG9ydHMucGFyc2VyLnBhcnNlR2VuZXJpYztIVE1MSW1wb3J0cy5wYXJzZXIucGFyc2VHZW5lcmljPWZ1bmN0aW9uKGUpe2lmKCFlW3hdKXt2YXIgdD1lLl9faW1wb3J0RWxlbWVudHx8ZTtpZighdC5oYXNBdHRyaWJ1dGUoSCkpcmV0dXJuIHZvaWQgci5jYWxsKHRoaXMsZSk7ZS5fX3Jlc291cmNlJiYodD1lLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpLHQudGV4dENvbnRlbnQ9ZS5fX3Jlc291cmNlKSxIVE1MSW1wb3J0cy5wYXRoLnJlc29sdmVVcmxzSW5TdHlsZSh0LGUuaHJlZiksdC50ZXh0Q29udGVudD11LnNoaW1TdHlsZSh0KSx0LnJlbW92ZUF0dHJpYnV0ZShILFwiXCIpLHQuc2V0QXR0cmlidXRlKHgsXCJcIiksdFt4XT0hMCx0LnBhcmVudE5vZGUhPT1QJiYoZS5wYXJlbnROb2RlPT09UD9QLnJlcGxhY2VDaGlsZCh0LGUpOnRoaXMuYWRkRWxlbWVudFRvRG9jdW1lbnQodCkpLHQuX19pbXBvcnRQYXJzZWQ9ITAsdGhpcy5tYXJrUGFyc2luZ0NvbXBsZXRlKGUpLHRoaXMucGFyc2VOZXh0KCl9fTt2YXIgbz1IVE1MSW1wb3J0cy5wYXJzZXIuaGFzUmVzb3VyY2U7SFRNTEltcG9ydHMucGFyc2VyLmhhc1Jlc291cmNlPWZ1bmN0aW9uKGUpe3JldHVyblwibGlua1wiPT09ZS5sb2NhbE5hbWUmJlwic3R5bGVzaGVldFwiPT09ZS5yZWwmJmUuaGFzQXR0cmlidXRlKEgpP2UuX19yZXNvdXJjZTpvLmNhbGwodGhpcyxlKX19fSl9ZS5TaGFkb3dDU1M9dX0od2luZG93LldlYkNvbXBvbmVudHMpKSxmdW5jdGlvbihlKXt3aW5kb3cuU2hhZG93RE9NUG9seWZpbGw/KHdpbmRvdy53cmFwPVNoYWRvd0RPTVBvbHlmaWxsLndyYXBJZk5lZWRlZCx3aW5kb3cudW53cmFwPVNoYWRvd0RPTVBvbHlmaWxsLnVud3JhcElmTmVlZGVkKTp3aW5kb3cud3JhcD13aW5kb3cudW53cmFwPWZ1bmN0aW9uKGUpe3JldHVybiBlfX0od2luZG93LldlYkNvbXBvbmVudHMpLGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHQoZSl7cmV0dXJuIHZvaWQgMCE9PXBbZV19ZnVuY3Rpb24gbigpe3MuY2FsbCh0aGlzKSx0aGlzLl9pc0ludmFsaWQ9ITB9ZnVuY3Rpb24gcihlKXtyZXR1cm5cIlwiPT1lJiZuLmNhbGwodGhpcyksZS50b0xvd2VyQ2FzZSgpfWZ1bmN0aW9uIG8oZSl7dmFyIHQ9ZS5jaGFyQ29kZUF0KDApO3JldHVybiB0PjMyJiYxMjc+dCYmLTE9PVszNCwzNSw2MCw2Miw2Myw5Nl0uaW5kZXhPZih0KT9lOmVuY29kZVVSSUNvbXBvbmVudChlKX1mdW5jdGlvbiBpKGUpe3ZhciB0PWUuY2hhckNvZGVBdCgwKTtyZXR1cm4gdD4zMiYmMTI3PnQmJi0xPT1bMzQsMzUsNjAsNjIsOTZdLmluZGV4T2YodCk/ZTplbmNvZGVVUklDb21wb25lbnQoZSl9ZnVuY3Rpb24gYShlLGEscyl7ZnVuY3Rpb24gYyhlKXtiLnB1c2goZSl9dmFyIGw9YXx8XCJzY2hlbWUgc3RhcnRcIix1PTAsZD1cIlwiLHY9ITEsZz0hMSxiPVtdO2U6Zm9yKDsoZVt1LTFdIT1mfHwwPT11KSYmIXRoaXMuX2lzSW52YWxpZDspe3ZhciB5PWVbdV07c3dpdGNoKGwpe2Nhc2VcInNjaGVtZSBzdGFydFwiOmlmKCF5fHwhbS50ZXN0KHkpKXtpZihhKXtjKFwiSW52YWxpZCBzY2hlbWUuXCIpO2JyZWFrIGV9ZD1cIlwiLGw9XCJubyBzY2hlbWVcIjtjb250aW51ZX1kKz15LnRvTG93ZXJDYXNlKCksbD1cInNjaGVtZVwiO2JyZWFrO2Nhc2VcInNjaGVtZVwiOmlmKHkmJncudGVzdCh5KSlkKz15LnRvTG93ZXJDYXNlKCk7ZWxzZXtpZihcIjpcIiE9eSl7aWYoYSl7aWYoZj09eSlicmVhayBlO2MoXCJDb2RlIHBvaW50IG5vdCBhbGxvd2VkIGluIHNjaGVtZTogXCIreSk7YnJlYWsgZX1kPVwiXCIsdT0wLGw9XCJubyBzY2hlbWVcIjtjb250aW51ZX1pZih0aGlzLl9zY2hlbWU9ZCxkPVwiXCIsYSlicmVhayBlO3QodGhpcy5fc2NoZW1lKSYmKHRoaXMuX2lzUmVsYXRpdmU9ITApLGw9XCJmaWxlXCI9PXRoaXMuX3NjaGVtZT9cInJlbGF0aXZlXCI6dGhpcy5faXNSZWxhdGl2ZSYmcyYmcy5fc2NoZW1lPT10aGlzLl9zY2hlbWU/XCJyZWxhdGl2ZSBvciBhdXRob3JpdHlcIjp0aGlzLl9pc1JlbGF0aXZlP1wiYXV0aG9yaXR5IGZpcnN0IHNsYXNoXCI6XCJzY2hlbWUgZGF0YVwifWJyZWFrO2Nhc2VcInNjaGVtZSBkYXRhXCI6XCI/XCI9PXk/KHRoaXMuX3F1ZXJ5PVwiP1wiLGw9XCJxdWVyeVwiKTpcIiNcIj09eT8odGhpcy5fZnJhZ21lbnQ9XCIjXCIsbD1cImZyYWdtZW50XCIpOmYhPXkmJlwiXHRcIiE9eSYmXCJcXG5cIiE9eSYmXCJcXHJcIiE9eSYmKHRoaXMuX3NjaGVtZURhdGErPW8oeSkpO2JyZWFrO2Nhc2VcIm5vIHNjaGVtZVwiOmlmKHMmJnQocy5fc2NoZW1lKSl7bD1cInJlbGF0aXZlXCI7Y29udGludWV9YyhcIk1pc3Npbmcgc2NoZW1lLlwiKSxuLmNhbGwodGhpcyk7YnJlYWs7Y2FzZVwicmVsYXRpdmUgb3IgYXV0aG9yaXR5XCI6aWYoXCIvXCIhPXl8fFwiL1wiIT1lW3UrMV0pe2MoXCJFeHBlY3RlZCAvLCBnb3Q6IFwiK3kpLGw9XCJyZWxhdGl2ZVwiO2NvbnRpbnVlfWw9XCJhdXRob3JpdHkgaWdub3JlIHNsYXNoZXNcIjticmVhaztjYXNlXCJyZWxhdGl2ZVwiOmlmKHRoaXMuX2lzUmVsYXRpdmU9ITAsXCJmaWxlXCIhPXRoaXMuX3NjaGVtZSYmKHRoaXMuX3NjaGVtZT1zLl9zY2hlbWUpLGY9PXkpe3RoaXMuX2hvc3Q9cy5faG9zdCx0aGlzLl9wb3J0PXMuX3BvcnQsdGhpcy5fcGF0aD1zLl9wYXRoLnNsaWNlKCksdGhpcy5fcXVlcnk9cy5fcXVlcnksdGhpcy5fdXNlcm5hbWU9cy5fdXNlcm5hbWUsdGhpcy5fcGFzc3dvcmQ9cy5fcGFzc3dvcmQ7YnJlYWsgZX1pZihcIi9cIj09eXx8XCJcXFxcXCI9PXkpXCJcXFxcXCI9PXkmJmMoXCJcXFxcIGlzIGFuIGludmFsaWQgY29kZSBwb2ludC5cIiksbD1cInJlbGF0aXZlIHNsYXNoXCI7ZWxzZSBpZihcIj9cIj09eSl0aGlzLl9ob3N0PXMuX2hvc3QsdGhpcy5fcG9ydD1zLl9wb3J0LHRoaXMuX3BhdGg9cy5fcGF0aC5zbGljZSgpLHRoaXMuX3F1ZXJ5PVwiP1wiLHRoaXMuX3VzZXJuYW1lPXMuX3VzZXJuYW1lLHRoaXMuX3Bhc3N3b3JkPXMuX3Bhc3N3b3JkLGw9XCJxdWVyeVwiO2Vsc2V7aWYoXCIjXCIhPXkpe3ZhciBFPWVbdSsxXSxfPWVbdSsyXTsoXCJmaWxlXCIhPXRoaXMuX3NjaGVtZXx8IW0udGVzdCh5KXx8XCI6XCIhPUUmJlwifFwiIT1FfHxmIT1fJiZcIi9cIiE9XyYmXCJcXFxcXCIhPV8mJlwiP1wiIT1fJiZcIiNcIiE9XykmJih0aGlzLl9ob3N0PXMuX2hvc3QsdGhpcy5fcG9ydD1zLl9wb3J0LHRoaXMuX3VzZXJuYW1lPXMuX3VzZXJuYW1lLHRoaXMuX3Bhc3N3b3JkPXMuX3Bhc3N3b3JkLHRoaXMuX3BhdGg9cy5fcGF0aC5zbGljZSgpLHRoaXMuX3BhdGgucG9wKCkpLGw9XCJyZWxhdGl2ZSBwYXRoXCI7Y29udGludWV9dGhpcy5faG9zdD1zLl9ob3N0LHRoaXMuX3BvcnQ9cy5fcG9ydCx0aGlzLl9wYXRoPXMuX3BhdGguc2xpY2UoKSx0aGlzLl9xdWVyeT1zLl9xdWVyeSx0aGlzLl9mcmFnbWVudD1cIiNcIix0aGlzLl91c2VybmFtZT1zLl91c2VybmFtZSx0aGlzLl9wYXNzd29yZD1zLl9wYXNzd29yZCxsPVwiZnJhZ21lbnRcIn1icmVhaztjYXNlXCJyZWxhdGl2ZSBzbGFzaFwiOmlmKFwiL1wiIT15JiZcIlxcXFxcIiE9eSl7XCJmaWxlXCIhPXRoaXMuX3NjaGVtZSYmKHRoaXMuX2hvc3Q9cy5faG9zdCx0aGlzLl9wb3J0PXMuX3BvcnQsdGhpcy5fdXNlcm5hbWU9cy5fdXNlcm5hbWUsdGhpcy5fcGFzc3dvcmQ9cy5fcGFzc3dvcmQpLGw9XCJyZWxhdGl2ZSBwYXRoXCI7Y29udGludWV9XCJcXFxcXCI9PXkmJmMoXCJcXFxcIGlzIGFuIGludmFsaWQgY29kZSBwb2ludC5cIiksbD1cImZpbGVcIj09dGhpcy5fc2NoZW1lP1wiZmlsZSBob3N0XCI6XCJhdXRob3JpdHkgaWdub3JlIHNsYXNoZXNcIjticmVhaztjYXNlXCJhdXRob3JpdHkgZmlyc3Qgc2xhc2hcIjppZihcIi9cIiE9eSl7YyhcIkV4cGVjdGVkICcvJywgZ290OiBcIit5KSxsPVwiYXV0aG9yaXR5IGlnbm9yZSBzbGFzaGVzXCI7Y29udGludWV9bD1cImF1dGhvcml0eSBzZWNvbmQgc2xhc2hcIjticmVhaztjYXNlXCJhdXRob3JpdHkgc2Vjb25kIHNsYXNoXCI6aWYobD1cImF1dGhvcml0eSBpZ25vcmUgc2xhc2hlc1wiLFwiL1wiIT15KXtjKFwiRXhwZWN0ZWQgJy8nLCBnb3Q6IFwiK3kpO2NvbnRpbnVlfWJyZWFrO2Nhc2VcImF1dGhvcml0eSBpZ25vcmUgc2xhc2hlc1wiOmlmKFwiL1wiIT15JiZcIlxcXFxcIiE9eSl7bD1cImF1dGhvcml0eVwiO2NvbnRpbnVlfWMoXCJFeHBlY3RlZCBhdXRob3JpdHksIGdvdDogXCIreSk7YnJlYWs7Y2FzZVwiYXV0aG9yaXR5XCI6aWYoXCJAXCI9PXkpe3YmJihjKFwiQCBhbHJlYWR5IHNlZW4uXCIpLGQrPVwiJTQwXCIpLHY9ITA7Zm9yKHZhciBTPTA7UzxkLmxlbmd0aDtTKyspe3ZhciBUPWRbU107aWYoXCJcdFwiIT1UJiZcIlxcblwiIT1UJiZcIlxcclwiIT1UKWlmKFwiOlwiIT1UfHxudWxsIT09dGhpcy5fcGFzc3dvcmQpe3ZhciBNPW8oVCk7bnVsbCE9PXRoaXMuX3Bhc3N3b3JkP3RoaXMuX3Bhc3N3b3JkKz1NOnRoaXMuX3VzZXJuYW1lKz1NfWVsc2UgdGhpcy5fcGFzc3dvcmQ9XCJcIjtlbHNlIGMoXCJJbnZhbGlkIHdoaXRlc3BhY2UgaW4gYXV0aG9yaXR5LlwiKX1kPVwiXCJ9ZWxzZXtpZihmPT15fHxcIi9cIj09eXx8XCJcXFxcXCI9PXl8fFwiP1wiPT15fHxcIiNcIj09eSl7dS09ZC5sZW5ndGgsZD1cIlwiLGw9XCJob3N0XCI7Y29udGludWV9ZCs9eX1icmVhaztjYXNlXCJmaWxlIGhvc3RcIjppZihmPT15fHxcIi9cIj09eXx8XCJcXFxcXCI9PXl8fFwiP1wiPT15fHxcIiNcIj09eSl7MiE9ZC5sZW5ndGh8fCFtLnRlc3QoZFswXSl8fFwiOlwiIT1kWzFdJiZcInxcIiE9ZFsxXT8wPT1kLmxlbmd0aD9sPVwicmVsYXRpdmUgcGF0aCBzdGFydFwiOih0aGlzLl9ob3N0PXIuY2FsbCh0aGlzLGQpLGQ9XCJcIixsPVwicmVsYXRpdmUgcGF0aCBzdGFydFwiKTpsPVwicmVsYXRpdmUgcGF0aFwiO2NvbnRpbnVlfVwiXHRcIj09eXx8XCJcXG5cIj09eXx8XCJcXHJcIj09eT9jKFwiSW52YWxpZCB3aGl0ZXNwYWNlIGluIGZpbGUgaG9zdC5cIik6ZCs9eTticmVhaztjYXNlXCJob3N0XCI6Y2FzZVwiaG9zdG5hbWVcIjppZihcIjpcIiE9eXx8Zyl7aWYoZj09eXx8XCIvXCI9PXl8fFwiXFxcXFwiPT15fHxcIj9cIj09eXx8XCIjXCI9PXkpe2lmKHRoaXMuX2hvc3Q9ci5jYWxsKHRoaXMsZCksZD1cIlwiLGw9XCJyZWxhdGl2ZSBwYXRoIHN0YXJ0XCIsYSlicmVhayBlO2NvbnRpbnVlfVwiXHRcIiE9eSYmXCJcXG5cIiE9eSYmXCJcXHJcIiE9eT8oXCJbXCI9PXk/Zz0hMDpcIl1cIj09eSYmKGc9ITEpLGQrPXkpOmMoXCJJbnZhbGlkIGNvZGUgcG9pbnQgaW4gaG9zdC9ob3N0bmFtZTogXCIreSl9ZWxzZSBpZih0aGlzLl9ob3N0PXIuY2FsbCh0aGlzLGQpLGQ9XCJcIixsPVwicG9ydFwiLFwiaG9zdG5hbWVcIj09YSlicmVhayBlO2JyZWFrO2Nhc2VcInBvcnRcIjppZigvWzAtOV0vLnRlc3QoeSkpZCs9eTtlbHNle2lmKGY9PXl8fFwiL1wiPT15fHxcIlxcXFxcIj09eXx8XCI/XCI9PXl8fFwiI1wiPT15fHxhKXtpZihcIlwiIT1kKXt2YXIgTz1wYXJzZUludChkLDEwKTtPIT1wW3RoaXMuX3NjaGVtZV0mJih0aGlzLl9wb3J0PU8rXCJcIiksZD1cIlwifWlmKGEpYnJlYWsgZTtsPVwicmVsYXRpdmUgcGF0aCBzdGFydFwiO2NvbnRpbnVlfVwiXHRcIj09eXx8XCJcXG5cIj09eXx8XCJcXHJcIj09eT9jKFwiSW52YWxpZCBjb2RlIHBvaW50IGluIHBvcnQ6IFwiK3kpOm4uY2FsbCh0aGlzKX1icmVhaztjYXNlXCJyZWxhdGl2ZSBwYXRoIHN0YXJ0XCI6aWYoXCJcXFxcXCI9PXkmJmMoXCInXFxcXCcgbm90IGFsbG93ZWQgaW4gcGF0aC5cIiksbD1cInJlbGF0aXZlIHBhdGhcIixcIi9cIiE9eSYmXCJcXFxcXCIhPXkpY29udGludWU7YnJlYWs7Y2FzZVwicmVsYXRpdmUgcGF0aFwiOmlmKGYhPXkmJlwiL1wiIT15JiZcIlxcXFxcIiE9eSYmKGF8fFwiP1wiIT15JiZcIiNcIiE9eSkpXCJcdFwiIT15JiZcIlxcblwiIT15JiZcIlxcclwiIT15JiYoZCs9byh5KSk7ZWxzZXtcIlxcXFxcIj09eSYmYyhcIlxcXFwgbm90IGFsbG93ZWQgaW4gcmVsYXRpdmUgcGF0aC5cIik7dmFyIEw7KEw9aFtkLnRvTG93ZXJDYXNlKCldKSYmKGQ9TCksXCIuLlwiPT1kPyh0aGlzLl9wYXRoLnBvcCgpLFwiL1wiIT15JiZcIlxcXFxcIiE9eSYmdGhpcy5fcGF0aC5wdXNoKFwiXCIpKTpcIi5cIj09ZCYmXCIvXCIhPXkmJlwiXFxcXFwiIT15P3RoaXMuX3BhdGgucHVzaChcIlwiKTpcIi5cIiE9ZCYmKFwiZmlsZVwiPT10aGlzLl9zY2hlbWUmJjA9PXRoaXMuX3BhdGgubGVuZ3RoJiYyPT1kLmxlbmd0aCYmbS50ZXN0KGRbMF0pJiZcInxcIj09ZFsxXSYmKGQ9ZFswXStcIjpcIiksdGhpcy5fcGF0aC5wdXNoKGQpKSxkPVwiXCIsXCI/XCI9PXk/KHRoaXMuX3F1ZXJ5PVwiP1wiLGw9XCJxdWVyeVwiKTpcIiNcIj09eSYmKHRoaXMuX2ZyYWdtZW50PVwiI1wiLGw9XCJmcmFnbWVudFwiKX1icmVhaztjYXNlXCJxdWVyeVwiOmF8fFwiI1wiIT15P2YhPXkmJlwiXHRcIiE9eSYmXCJcXG5cIiE9eSYmXCJcXHJcIiE9eSYmKHRoaXMuX3F1ZXJ5Kz1pKHkpKToodGhpcy5fZnJhZ21lbnQ9XCIjXCIsbD1cImZyYWdtZW50XCIpO2JyZWFrO2Nhc2VcImZyYWdtZW50XCI6ZiE9eSYmXCJcdFwiIT15JiZcIlxcblwiIT15JiZcIlxcclwiIT15JiYodGhpcy5fZnJhZ21lbnQrPXkpfXUrK319ZnVuY3Rpb24gcygpe3RoaXMuX3NjaGVtZT1cIlwiLHRoaXMuX3NjaGVtZURhdGE9XCJcIix0aGlzLl91c2VybmFtZT1cIlwiLHRoaXMuX3Bhc3N3b3JkPW51bGwsdGhpcy5faG9zdD1cIlwiLHRoaXMuX3BvcnQ9XCJcIix0aGlzLl9wYXRoPVtdLHRoaXMuX3F1ZXJ5PVwiXCIsdGhpcy5fZnJhZ21lbnQ9XCJcIix0aGlzLl9pc0ludmFsaWQ9ITEsdGhpcy5faXNSZWxhdGl2ZT0hMX1mdW5jdGlvbiBjKGUsdCl7dm9pZCAwPT09dHx8dCBpbnN0YW5jZW9mIGN8fCh0PW5ldyBjKFN0cmluZyh0KSkpLHRoaXMuX3VybD1lLHMuY2FsbCh0aGlzKTt2YXIgbj1lLnJlcGxhY2UoL15bIFxcdFxcclxcblxcZl0rfFsgXFx0XFxyXFxuXFxmXSskL2csXCJcIik7YS5jYWxsKHRoaXMsbixudWxsLHQpfXZhciBsPSExO2lmKCFlLmZvcmNlSlVSTCl0cnl7dmFyIHU9bmV3IFVSTChcImJcIixcImh0dHA6Ly9hXCIpO3UucGF0aG5hbWU9XCJjJTIwZFwiLGw9XCJodHRwOi8vYS9jJTIwZFwiPT09dS5ocmVmfWNhdGNoKGQpe31pZighbCl7dmFyIHA9T2JqZWN0LmNyZWF0ZShudWxsKTtwLmZ0cD0yMSxwLmZpbGU9MCxwLmdvcGhlcj03MCxwLmh0dHA9ODAscC5odHRwcz00NDMscC53cz04MCxwLndzcz00NDM7dmFyIGg9T2JqZWN0LmNyZWF0ZShudWxsKTtoW1wiJTJlXCJdPVwiLlwiLGhbXCIuJTJlXCJdPVwiLi5cIixoW1wiJTJlLlwiXT1cIi4uXCIsaFtcIiUyZSUyZVwiXT1cIi4uXCI7dmFyIGY9dm9pZCAwLG09L1thLXpBLVpdLyx3PS9bYS16QS1aMC05XFwrXFwtXFwuXS87Yy5wcm90b3R5cGU9e3RvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaHJlZn0sZ2V0IGhyZWYoKXtpZih0aGlzLl9pc0ludmFsaWQpcmV0dXJuIHRoaXMuX3VybDt2YXIgZT1cIlwiO3JldHVybihcIlwiIT10aGlzLl91c2VybmFtZXx8bnVsbCE9dGhpcy5fcGFzc3dvcmQpJiYoZT10aGlzLl91c2VybmFtZSsobnVsbCE9dGhpcy5fcGFzc3dvcmQ/XCI6XCIrdGhpcy5fcGFzc3dvcmQ6XCJcIikrXCJAXCIpLHRoaXMucHJvdG9jb2wrKHRoaXMuX2lzUmVsYXRpdmU/XCIvL1wiK2UrdGhpcy5ob3N0OlwiXCIpK3RoaXMucGF0aG5hbWUrdGhpcy5fcXVlcnkrdGhpcy5fZnJhZ21lbnR9LHNldCBocmVmKGUpe3MuY2FsbCh0aGlzKSxhLmNhbGwodGhpcyxlKX0sZ2V0IHByb3RvY29sKCl7cmV0dXJuIHRoaXMuX3NjaGVtZStcIjpcIn0sc2V0IHByb3RvY29sKGUpe3RoaXMuX2lzSW52YWxpZHx8YS5jYWxsKHRoaXMsZStcIjpcIixcInNjaGVtZSBzdGFydFwiKX0sZ2V0IGhvc3QoKXtyZXR1cm4gdGhpcy5faXNJbnZhbGlkP1wiXCI6dGhpcy5fcG9ydD90aGlzLl9ob3N0K1wiOlwiK3RoaXMuX3BvcnQ6dGhpcy5faG9zdH0sc2V0IGhvc3QoZSl7IXRoaXMuX2lzSW52YWxpZCYmdGhpcy5faXNSZWxhdGl2ZSYmYS5jYWxsKHRoaXMsZSxcImhvc3RcIil9LGdldCBob3N0bmFtZSgpe3JldHVybiB0aGlzLl9ob3N0fSxzZXQgaG9zdG5hbWUoZSl7IXRoaXMuX2lzSW52YWxpZCYmdGhpcy5faXNSZWxhdGl2ZSYmYS5jYWxsKHRoaXMsZSxcImhvc3RuYW1lXCIpfSxnZXQgcG9ydCgpe3JldHVybiB0aGlzLl9wb3J0fSxzZXQgcG9ydChlKXshdGhpcy5faXNJbnZhbGlkJiZ0aGlzLl9pc1JlbGF0aXZlJiZhLmNhbGwodGhpcyxlLFwicG9ydFwiKX0sZ2V0IHBhdGhuYW1lKCl7cmV0dXJuIHRoaXMuX2lzSW52YWxpZD9cIlwiOnRoaXMuX2lzUmVsYXRpdmU/XCIvXCIrdGhpcy5fcGF0aC5qb2luKFwiL1wiKTp0aGlzLl9zY2hlbWVEYXRhfSxzZXQgcGF0aG5hbWUoZSl7IXRoaXMuX2lzSW52YWxpZCYmdGhpcy5faXNSZWxhdGl2ZSYmKHRoaXMuX3BhdGg9W10sYS5jYWxsKHRoaXMsZSxcInJlbGF0aXZlIHBhdGggc3RhcnRcIikpfSxnZXQgc2VhcmNoKCl7cmV0dXJuIHRoaXMuX2lzSW52YWxpZHx8IXRoaXMuX3F1ZXJ5fHxcIj9cIj09dGhpcy5fcXVlcnk/XCJcIjp0aGlzLl9xdWVyeX0sc2V0IHNlYXJjaChlKXshdGhpcy5faXNJbnZhbGlkJiZ0aGlzLl9pc1JlbGF0aXZlJiYodGhpcy5fcXVlcnk9XCI/XCIsXCI/XCI9PWVbMF0mJihlPWUuc2xpY2UoMSkpLGEuY2FsbCh0aGlzLGUsXCJxdWVyeVwiKSl9LGdldCBoYXNoKCl7cmV0dXJuIHRoaXMuX2lzSW52YWxpZHx8IXRoaXMuX2ZyYWdtZW50fHxcIiNcIj09dGhpcy5fZnJhZ21lbnQ/XCJcIjp0aGlzLl9mcmFnbWVudH0sc2V0IGhhc2goZSl7dGhpcy5faXNJbnZhbGlkfHwodGhpcy5fZnJhZ21lbnQ9XCIjXCIsXCIjXCI9PWVbMF0mJihlPWUuc2xpY2UoMSkpLGEuY2FsbCh0aGlzLGUsXCJmcmFnbWVudFwiKSl9LGdldCBvcmlnaW4oKXt2YXIgZTtpZih0aGlzLl9pc0ludmFsaWR8fCF0aGlzLl9zY2hlbWUpcmV0dXJuXCJcIjtzd2l0Y2godGhpcy5fc2NoZW1lKXtjYXNlXCJkYXRhXCI6Y2FzZVwiZmlsZVwiOmNhc2VcImphdmFzY3JpcHRcIjpjYXNlXCJtYWlsdG9cIjpyZXR1cm5cIm51bGxcIn1yZXR1cm4gZT10aGlzLmhvc3QsZT90aGlzLl9zY2hlbWUrXCI6Ly9cIitlOlwiXCJ9fTt2YXIgdj1lLlVSTDt2JiYoYy5jcmVhdGVPYmplY3RVUkw9ZnVuY3Rpb24oZSl7cmV0dXJuIHYuY3JlYXRlT2JqZWN0VVJMLmFwcGx5KHYsYXJndW1lbnRzKX0sYy5yZXZva2VPYmplY3RVUkw9ZnVuY3Rpb24oZSl7di5yZXZva2VPYmplY3RVUkwoZSl9KSxlLlVSTD1jfX0oc2VsZiksZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlKXt5LnB1c2goZSksYnx8KGI9ITAsbShyKSl9ZnVuY3Rpb24gbihlKXtyZXR1cm4gd2luZG93LlNoYWRvd0RPTVBvbHlmaWxsJiZ3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwud3JhcElmTmVlZGVkKGUpfHxlfWZ1bmN0aW9uIHIoKXtiPSExO3ZhciBlPXk7eT1bXSxlLnNvcnQoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS51aWRfLXQudWlkX30pO3ZhciB0PSExO2UuZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgbj1lLnRha2VSZWNvcmRzKCk7byhlKSxuLmxlbmd0aCYmKGUuY2FsbGJhY2tfKG4sZSksdD0hMCl9KSx0JiZyKCl9ZnVuY3Rpb24gbyhlKXtlLm5vZGVzXy5mb3JFYWNoKGZ1bmN0aW9uKHQpe3ZhciBuPXcuZ2V0KHQpO24mJm4uZm9yRWFjaChmdW5jdGlvbih0KXt0Lm9ic2VydmVyPT09ZSYmdC5yZW1vdmVUcmFuc2llbnRPYnNlcnZlcnMoKX0pfSl9ZnVuY3Rpb24gaShlLHQpe2Zvcih2YXIgbj1lO247bj1uLnBhcmVudE5vZGUpe3ZhciByPXcuZ2V0KG4pO2lmKHIpZm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspe3ZhciBpPXJbb10sYT1pLm9wdGlvbnM7aWYobj09PWV8fGEuc3VidHJlZSl7dmFyIHM9dChhKTtzJiZpLmVucXVldWUocyl9fX19ZnVuY3Rpb24gYShlKXt0aGlzLmNhbGxiYWNrXz1lLHRoaXMubm9kZXNfPVtdLHRoaXMucmVjb3Jkc189W10sdGhpcy51aWRfPSsrRX1mdW5jdGlvbiBzKGUsdCl7dGhpcy50eXBlPWUsdGhpcy50YXJnZXQ9dCx0aGlzLmFkZGVkTm9kZXM9W10sdGhpcy5yZW1vdmVkTm9kZXM9W10sdGhpcy5wcmV2aW91c1NpYmxpbmc9bnVsbCx0aGlzLm5leHRTaWJsaW5nPW51bGwsdGhpcy5hdHRyaWJ1dGVOYW1lPW51bGwsdGhpcy5hdHRyaWJ1dGVOYW1lc3BhY2U9bnVsbCx0aGlzLm9sZFZhbHVlPW51bGx9ZnVuY3Rpb24gYyhlKXt2YXIgdD1uZXcgcyhlLnR5cGUsZS50YXJnZXQpO3JldHVybiB0LmFkZGVkTm9kZXM9ZS5hZGRlZE5vZGVzLnNsaWNlKCksdC5yZW1vdmVkTm9kZXM9ZS5yZW1vdmVkTm9kZXMuc2xpY2UoKSx0LnByZXZpb3VzU2libGluZz1lLnByZXZpb3VzU2libGluZyx0Lm5leHRTaWJsaW5nPWUubmV4dFNpYmxpbmcsdC5hdHRyaWJ1dGVOYW1lPWUuYXR0cmlidXRlTmFtZSx0LmF0dHJpYnV0ZU5hbWVzcGFjZT1lLmF0dHJpYnV0ZU5hbWVzcGFjZSx0Lm9sZFZhbHVlPWUub2xkVmFsdWUsdH1mdW5jdGlvbiBsKGUsdCl7cmV0dXJuIF89bmV3IHMoZSx0KX1mdW5jdGlvbiB1KGUpe3JldHVybiBTP1M6KFM9YyhfKSxTLm9sZFZhbHVlPWUsUyl9ZnVuY3Rpb24gZCgpe189Uz12b2lkIDB9ZnVuY3Rpb24gcChlKXtyZXR1cm4gZT09PVN8fGU9PT1ffWZ1bmN0aW9uIGgoZSx0KXtyZXR1cm4gZT09PXQ/ZTpTJiZwKGUpP1M6bnVsbH1mdW5jdGlvbiBmKGUsdCxuKXt0aGlzLm9ic2VydmVyPWUsdGhpcy50YXJnZXQ9dCx0aGlzLm9wdGlvbnM9bix0aGlzLnRyYW5zaWVudE9ic2VydmVkTm9kZXM9W119aWYoIWUuSnNNdXRhdGlvbk9ic2VydmVyKXt2YXIgbSx3PW5ldyBXZWFrTWFwO2lmKC9UcmlkZW50fEVkZ2UvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpbT1zZXRUaW1lb3V0O2Vsc2UgaWYod2luZG93LnNldEltbWVkaWF0ZSltPXdpbmRvdy5zZXRJbW1lZGlhdGU7ZWxzZXt2YXIgdj1bXSxnPVN0cmluZyhNYXRoLnJhbmRvbSgpKTt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIixmdW5jdGlvbihlKXtpZihlLmRhdGE9PT1nKXt2YXIgdD12O3Y9W10sdC5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UoKX0pfX0pLG09ZnVuY3Rpb24oZSl7di5wdXNoKGUpLHdpbmRvdy5wb3N0TWVzc2FnZShnLFwiKlwiKX19dmFyIGI9ITEseT1bXSxFPTA7YS5wcm90b3R5cGU9e29ic2VydmU6ZnVuY3Rpb24oZSx0KXtpZihlPW4oZSksIXQuY2hpbGRMaXN0JiYhdC5hdHRyaWJ1dGVzJiYhdC5jaGFyYWN0ZXJEYXRhfHx0LmF0dHJpYnV0ZU9sZFZhbHVlJiYhdC5hdHRyaWJ1dGVzfHx0LmF0dHJpYnV0ZUZpbHRlciYmdC5hdHRyaWJ1dGVGaWx0ZXIubGVuZ3RoJiYhdC5hdHRyaWJ1dGVzfHx0LmNoYXJhY3RlckRhdGFPbGRWYWx1ZSYmIXQuY2hhcmFjdGVyRGF0YSl0aHJvdyBuZXcgU3ludGF4RXJyb3I7dmFyIHI9dy5nZXQoZSk7cnx8dy5zZXQoZSxyPVtdKTtmb3IodmFyIG8saT0wO2k8ci5sZW5ndGg7aSsrKWlmKHJbaV0ub2JzZXJ2ZXI9PT10aGlzKXtvPXJbaV0sby5yZW1vdmVMaXN0ZW5lcnMoKSxvLm9wdGlvbnM9dDticmVha31vfHwobz1uZXcgZih0aGlzLGUsdCksci5wdXNoKG8pLHRoaXMubm9kZXNfLnB1c2goZSkpLG8uYWRkTGlzdGVuZXJzKCl9LGRpc2Nvbm5lY3Q6ZnVuY3Rpb24oKXt0aGlzLm5vZGVzXy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2Zvcih2YXIgdD13LmdldChlKSxuPTA7bjx0Lmxlbmd0aDtuKyspe3ZhciByPXRbbl07aWYoci5vYnNlcnZlcj09PXRoaXMpe3IucmVtb3ZlTGlzdGVuZXJzKCksdC5zcGxpY2UobiwxKTticmVha319fSx0aGlzKSx0aGlzLnJlY29yZHNfPVtdfSx0YWtlUmVjb3JkczpmdW5jdGlvbigpe3ZhciBlPXRoaXMucmVjb3Jkc187cmV0dXJuIHRoaXMucmVjb3Jkc189W10sZX19O3ZhciBfLFM7Zi5wcm90b3R5cGU9e2VucXVldWU6ZnVuY3Rpb24oZSl7dmFyIG49dGhpcy5vYnNlcnZlci5yZWNvcmRzXyxyPW4ubGVuZ3RoO2lmKG4ubGVuZ3RoPjApe3ZhciBvPW5bci0xXSxpPWgobyxlKTtpZihpKXJldHVybiB2b2lkKG5bci0xXT1pKX1lbHNlIHQodGhpcy5vYnNlcnZlcik7bltyXT1lfSxhZGRMaXN0ZW5lcnM6ZnVuY3Rpb24oKXt0aGlzLmFkZExpc3RlbmVyc18odGhpcy50YXJnZXQpfSxhZGRMaXN0ZW5lcnNfOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMub3B0aW9uczt0LmF0dHJpYnV0ZXMmJmUuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUF0dHJNb2RpZmllZFwiLHRoaXMsITApLHQuY2hhcmFjdGVyRGF0YSYmZS5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ2hhcmFjdGVyRGF0YU1vZGlmaWVkXCIsdGhpcywhMCksdC5jaGlsZExpc3QmJmUuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTU5vZGVJbnNlcnRlZFwiLHRoaXMsITApLCh0LmNoaWxkTGlzdHx8dC5zdWJ0cmVlKSYmZS5hZGRFdmVudExpc3RlbmVyKFwiRE9NTm9kZVJlbW92ZWRcIix0aGlzLCEwKX0scmVtb3ZlTGlzdGVuZXJzOmZ1bmN0aW9uKCl7dGhpcy5yZW1vdmVMaXN0ZW5lcnNfKHRoaXMudGFyZ2V0KX0scmVtb3ZlTGlzdGVuZXJzXzpmdW5jdGlvbihlKXt2YXIgdD10aGlzLm9wdGlvbnM7dC5hdHRyaWJ1dGVzJiZlLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJET01BdHRyTW9kaWZpZWRcIix0aGlzLCEwKSx0LmNoYXJhY3RlckRhdGEmJmUucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIkRPTUNoYXJhY3RlckRhdGFNb2RpZmllZFwiLHRoaXMsITApLHQuY2hpbGRMaXN0JiZlLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJET01Ob2RlSW5zZXJ0ZWRcIix0aGlzLCEwKSwodC5jaGlsZExpc3R8fHQuc3VidHJlZSkmJmUucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIkRPTU5vZGVSZW1vdmVkXCIsdGhpcywhMCl9LGFkZFRyYW5zaWVudE9ic2VydmVyOmZ1bmN0aW9uKGUpe2lmKGUhPT10aGlzLnRhcmdldCl7dGhpcy5hZGRMaXN0ZW5lcnNfKGUpLHRoaXMudHJhbnNpZW50T2JzZXJ2ZWROb2Rlcy5wdXNoKGUpO3ZhciB0PXcuZ2V0KGUpO3R8fHcuc2V0KGUsdD1bXSksdC5wdXNoKHRoaXMpfX0scmVtb3ZlVHJhbnNpZW50T2JzZXJ2ZXJzOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy50cmFuc2llbnRPYnNlcnZlZE5vZGVzO3RoaXMudHJhbnNpZW50T2JzZXJ2ZWROb2Rlcz1bXSxlLmZvckVhY2goZnVuY3Rpb24oZSl7dGhpcy5yZW1vdmVMaXN0ZW5lcnNfKGUpO2Zvcih2YXIgdD13LmdldChlKSxuPTA7bjx0Lmxlbmd0aDtuKyspaWYodFtuXT09PXRoaXMpe3Quc3BsaWNlKG4sMSk7YnJlYWt9fSx0aGlzKX0saGFuZGxlRXZlbnQ6ZnVuY3Rpb24oZSl7c3dpdGNoKGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCksZS50eXBlKXtjYXNlXCJET01BdHRyTW9kaWZpZWRcIjp2YXIgdD1lLmF0dHJOYW1lLG49ZS5yZWxhdGVkTm9kZS5uYW1lc3BhY2VVUkkscj1lLnRhcmdldCxvPW5ldyBsKFwiYXR0cmlidXRlc1wiLHIpO28uYXR0cmlidXRlTmFtZT10LG8uYXR0cmlidXRlTmFtZXNwYWNlPW47dmFyIGE9ZS5hdHRyQ2hhbmdlPT09TXV0YXRpb25FdmVudC5BRERJVElPTj9udWxsOmUucHJldlZhbHVlO2kocixmdW5jdGlvbihlKXtyZXR1cm4hZS5hdHRyaWJ1dGVzfHxlLmF0dHJpYnV0ZUZpbHRlciYmZS5hdHRyaWJ1dGVGaWx0ZXIubGVuZ3RoJiYtMT09PWUuYXR0cmlidXRlRmlsdGVyLmluZGV4T2YodCkmJi0xPT09ZS5hdHRyaWJ1dGVGaWx0ZXIuaW5kZXhPZihuKT92b2lkIDA6ZS5hdHRyaWJ1dGVPbGRWYWx1ZT91KGEpOm99KTticmVhaztjYXNlXCJET01DaGFyYWN0ZXJEYXRhTW9kaWZpZWRcIjp2YXIgcj1lLnRhcmdldCxvPWwoXCJjaGFyYWN0ZXJEYXRhXCIsciksYT1lLnByZXZWYWx1ZTtpKHIsZnVuY3Rpb24oZSl7cmV0dXJuIGUuY2hhcmFjdGVyRGF0YT9lLmNoYXJhY3RlckRhdGFPbGRWYWx1ZT91KGEpOm86dm9pZCAwfSk7YnJlYWs7Y2FzZVwiRE9NTm9kZVJlbW92ZWRcIjp0aGlzLmFkZFRyYW5zaWVudE9ic2VydmVyKGUudGFyZ2V0KTtjYXNlXCJET01Ob2RlSW5zZXJ0ZWRcIjp2YXIgcyxjLHA9ZS50YXJnZXQ7XCJET01Ob2RlSW5zZXJ0ZWRcIj09PWUudHlwZT8ocz1bcF0sYz1bXSk6KHM9W10sYz1bcF0pO3ZhciBoPXAucHJldmlvdXNTaWJsaW5nLGY9cC5uZXh0U2libGluZyxvPWwoXCJjaGlsZExpc3RcIixlLnRhcmdldC5wYXJlbnROb2RlKTtvLmFkZGVkTm9kZXM9cyxvLnJlbW92ZWROb2Rlcz1jLG8ucHJldmlvdXNTaWJsaW5nPWgsby5uZXh0U2libGluZz1mLGkoZS5yZWxhdGVkTm9kZSxmdW5jdGlvbihlKXtyZXR1cm4gZS5jaGlsZExpc3Q/bzp2b2lkIDB9KX1kKCl9fSxlLkpzTXV0YXRpb25PYnNlcnZlcj1hLGUuTXV0YXRpb25PYnNlcnZlcnx8KGUuTXV0YXRpb25PYnNlcnZlcj1hLGEuX2lzUG9seWZpbGxlZD0hMCl9fShzZWxmKSxmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjtpZighd2luZG93LnBlcmZvcm1hbmNlKXt2YXIgdD1EYXRlLm5vdygpO3dpbmRvdy5wZXJmb3JtYW5jZT17bm93OmZ1bmN0aW9uKCl7cmV0dXJuIERhdGUubm93KCktdH19fXdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fCh3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lPWZ1bmN0aW9uKCl7dmFyIGU9d2luZG93LndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZXx8d2luZG93Lm1velJlcXVlc3RBbmltYXRpb25GcmFtZTtyZXR1cm4gZT9mdW5jdGlvbih0KXtyZXR1cm4gZShmdW5jdGlvbigpe3QocGVyZm9ybWFuY2Uubm93KCkpfSl9OmZ1bmN0aW9uKGUpe3JldHVybiB3aW5kb3cuc2V0VGltZW91dChlLDFlMy82MCl9fSgpKSx3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWV8fCh3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWU9ZnVuY3Rpb24oKXtyZXR1cm4gd2luZG93LndlYmtpdENhbmNlbEFuaW1hdGlvbkZyYW1lfHx3aW5kb3cubW96Q2FuY2VsQW5pbWF0aW9uRnJhbWV8fGZ1bmN0aW9uKGUpe2NsZWFyVGltZW91dChlKX19KCkpO3ZhciBuPWZ1bmN0aW9uKCl7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRXZlbnQoXCJFdmVudFwiKTtyZXR1cm4gZS5pbml0RXZlbnQoXCJmb29cIiwhMCwhMCksZS5wcmV2ZW50RGVmYXVsdCgpLGUuZGVmYXVsdFByZXZlbnRlZH0oKTtpZighbil7dmFyIHI9RXZlbnQucHJvdG90eXBlLnByZXZlbnREZWZhdWx0O0V2ZW50LnByb3RvdHlwZS5wcmV2ZW50RGVmYXVsdD1mdW5jdGlvbigpe3RoaXMuY2FuY2VsYWJsZSYmKHIuY2FsbCh0aGlzKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcImRlZmF1bHRQcmV2ZW50ZWRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuITB9LGNvbmZpZ3VyYWJsZTohMH0pKX19dmFyIG89L1RyaWRlbnQvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7aWYoKCF3aW5kb3cuQ3VzdG9tRXZlbnR8fG8mJlwiZnVuY3Rpb25cIiE9dHlwZW9mIHdpbmRvdy5DdXN0b21FdmVudCkmJih3aW5kb3cuQ3VzdG9tRXZlbnQ9ZnVuY3Rpb24oZSx0KXt0PXR8fHt9O3ZhciBuPWRvY3VtZW50LmNyZWF0ZUV2ZW50KFwiQ3VzdG9tRXZlbnRcIik7cmV0dXJuIG4uaW5pdEN1c3RvbUV2ZW50KGUsQm9vbGVhbih0LmJ1YmJsZXMpLEJvb2xlYW4odC5jYW5jZWxhYmxlKSx0LmRldGFpbCksbn0sd2luZG93LkN1c3RvbUV2ZW50LnByb3RvdHlwZT13aW5kb3cuRXZlbnQucHJvdG90eXBlKSwhd2luZG93LkV2ZW50fHxvJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiB3aW5kb3cuRXZlbnQpe3ZhciBpPXdpbmRvdy5FdmVudDt3aW5kb3cuRXZlbnQ9ZnVuY3Rpb24oZSx0KXt0PXR8fHt9O3ZhciBuPWRvY3VtZW50LmNyZWF0ZUV2ZW50KFwiRXZlbnRcIik7cmV0dXJuIG4uaW5pdEV2ZW50KGUsQm9vbGVhbih0LmJ1YmJsZXMpLEJvb2xlYW4odC5jYW5jZWxhYmxlKSksbn0sd2luZG93LkV2ZW50LnByb3RvdHlwZT1pLnByb3RvdHlwZX19KHdpbmRvdy5XZWJDb21wb25lbnRzKSx3aW5kb3cuSFRNTEltcG9ydHM9d2luZG93LkhUTUxJbXBvcnRzfHx7ZmxhZ3M6e319LGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSx0KXt0PXR8fGYscihmdW5jdGlvbigpe2koZSx0KX0sdCl9ZnVuY3Rpb24gbihlKXtyZXR1cm5cImNvbXBsZXRlXCI9PT1lLnJlYWR5U3RhdGV8fGUucmVhZHlTdGF0ZT09PXZ9ZnVuY3Rpb24gcihlLHQpe2lmKG4odCkpZSYmZSgpO2Vsc2V7dmFyIG89ZnVuY3Rpb24oKXsoXCJjb21wbGV0ZVwiPT09dC5yZWFkeVN0YXRlfHx0LnJlYWR5U3RhdGU9PT12KSYmKHQucmVtb3ZlRXZlbnRMaXN0ZW5lcihnLG8pLHIoZSx0KSl9O3QuYWRkRXZlbnRMaXN0ZW5lcihnLG8pfX1mdW5jdGlvbiBvKGUpe2UudGFyZ2V0Ll9fbG9hZGVkPSEwfWZ1bmN0aW9uIGkoZSx0KXtmdW5jdGlvbiBuKCl7Yz09bCYmZSYmZSh7YWxsSW1wb3J0czpzLGxvYWRlZEltcG9ydHM6dSxlcnJvckltcG9ydHM6ZH0pfWZ1bmN0aW9uIHIoZSl7byhlKSx1LnB1c2godGhpcyksXG5jKyssbigpfWZ1bmN0aW9uIGkoZSl7ZC5wdXNoKHRoaXMpLGMrKyxuKCl9dmFyIHM9dC5xdWVyeVNlbGVjdG9yQWxsKFwibGlua1tyZWw9aW1wb3J0XVwiKSxjPTAsbD1zLmxlbmd0aCx1PVtdLGQ9W107aWYobClmb3IodmFyIHAsaD0wO2w+aCYmKHA9c1toXSk7aCsrKWEocCk/KHUucHVzaCh0aGlzKSxjKyssbigpKToocC5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLHIpLHAuYWRkRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsaSkpO2Vsc2UgbigpfWZ1bmN0aW9uIGEoZSl7cmV0dXJuIGQ/ZS5fX2xvYWRlZHx8ZVtcImltcG9ydFwiXSYmXCJsb2FkaW5nXCIhPT1lW1wiaW1wb3J0XCJdLnJlYWR5U3RhdGU6ZS5fX2ltcG9ydFBhcnNlZH1mdW5jdGlvbiBzKGUpe2Zvcih2YXIgdCxuPTAscj1lLmxlbmd0aDtyPm4mJih0PWVbbl0pO24rKyljKHQpJiZsKHQpfWZ1bmN0aW9uIGMoZSl7cmV0dXJuXCJsaW5rXCI9PT1lLmxvY2FsTmFtZSYmXCJpbXBvcnRcIj09PWUucmVsfWZ1bmN0aW9uIGwoZSl7dmFyIHQ9ZVtcImltcG9ydFwiXTt0P28oe3RhcmdldDplfSk6KGUuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIixvKSxlLmFkZEV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLG8pKX12YXIgdT1cImltcG9ydFwiLGQ9Qm9vbGVhbih1IGluIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaW5rXCIpKSxwPUJvb2xlYW4od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxoPWZ1bmN0aW9uKGUpe3JldHVybiBwP3dpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbC53cmFwSWZOZWVkZWQoZSk6ZX0sZj1oKGRvY3VtZW50KSxtPXtnZXQ6ZnVuY3Rpb24oKXt2YXIgZT13aW5kb3cuSFRNTEltcG9ydHMuY3VycmVudFNjcmlwdHx8ZG9jdW1lbnQuY3VycmVudFNjcmlwdHx8KFwiY29tcGxldGVcIiE9PWRvY3VtZW50LnJlYWR5U3RhdGU/ZG9jdW1lbnQuc2NyaXB0c1tkb2N1bWVudC5zY3JpcHRzLmxlbmd0aC0xXTpudWxsKTtyZXR1cm4gaChlKX0sY29uZmlndXJhYmxlOiEwfTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZG9jdW1lbnQsXCJfY3VycmVudFNjcmlwdFwiLG0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShmLFwiX2N1cnJlbnRTY3JpcHRcIixtKTt2YXIgdz0vVHJpZGVudC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSx2PXc/XCJjb21wbGV0ZVwiOlwiaW50ZXJhY3RpdmVcIixnPVwicmVhZHlzdGF0ZWNoYW5nZVwiO2QmJihuZXcgTXV0YXRpb25PYnNlcnZlcihmdW5jdGlvbihlKXtmb3IodmFyIHQsbj0wLHI9ZS5sZW5ndGg7cj5uJiYodD1lW25dKTtuKyspdC5hZGRlZE5vZGVzJiZzKHQuYWRkZWROb2Rlcyl9KS5vYnNlcnZlKGRvY3VtZW50LmhlYWQse2NoaWxkTGlzdDohMH0pLGZ1bmN0aW9uKCl7aWYoXCJsb2FkaW5nXCI9PT1kb2N1bWVudC5yZWFkeVN0YXRlKWZvcih2YXIgZSx0PWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJsaW5rW3JlbD1pbXBvcnRdXCIpLG49MCxyPXQubGVuZ3RoO3I+biYmKGU9dFtuXSk7bisrKWwoZSl9KCkpLHQoZnVuY3Rpb24oZSl7d2luZG93LkhUTUxJbXBvcnRzLnJlYWR5PSEwLHdpbmRvdy5IVE1MSW1wb3J0cy5yZWFkeVRpbWU9KG5ldyBEYXRlKS5nZXRUaW1lKCk7dmFyIHQ9Zi5jcmVhdGVFdmVudChcIkN1c3RvbUV2ZW50XCIpO3QuaW5pdEN1c3RvbUV2ZW50KFwiSFRNTEltcG9ydHNMb2FkZWRcIiwhMCwhMCxlKSxmLmRpc3BhdGNoRXZlbnQodCl9KSxlLklNUE9SVF9MSU5LX1RZUEU9dSxlLnVzZU5hdGl2ZT1kLGUucm9vdERvY3VtZW50PWYsZS53aGVuUmVhZHk9dCxlLmlzSUU9d30od2luZG93LkhUTUxJbXBvcnRzKSxmdW5jdGlvbihlKXt2YXIgdD1bXSxuPWZ1bmN0aW9uKGUpe3QucHVzaChlKX0scj1mdW5jdGlvbigpe3QuZm9yRWFjaChmdW5jdGlvbih0KXt0KGUpfSl9O2UuYWRkTW9kdWxlPW4sZS5pbml0aWFsaXplTW9kdWxlcz1yfSh3aW5kb3cuSFRNTEltcG9ydHMpLHdpbmRvdy5IVE1MSW1wb3J0cy5hZGRNb2R1bGUoZnVuY3Rpb24oZSl7dmFyIHQ9Lyh1cmxcXCgpKFteKV0qKShcXCkpL2csbj0vKEBpbXBvcnRbXFxzXSsoPyF1cmxcXCgpKShbXjtdKikoOykvZyxyPXtyZXNvbHZlVXJsc0luU3R5bGU6ZnVuY3Rpb24oZSx0KXt2YXIgbj1lLm93bmVyRG9jdW1lbnQscj1uLmNyZWF0ZUVsZW1lbnQoXCJhXCIpO3JldHVybiBlLnRleHRDb250ZW50PXRoaXMucmVzb2x2ZVVybHNJbkNzc1RleHQoZS50ZXh0Q29udGVudCx0LHIpLGV9LHJlc29sdmVVcmxzSW5Dc3NUZXh0OmZ1bmN0aW9uKGUscixvKXt2YXIgaT10aGlzLnJlcGxhY2VVcmxzKGUsbyxyLHQpO3JldHVybiBpPXRoaXMucmVwbGFjZVVybHMoaSxvLHIsbil9LHJlcGxhY2VVcmxzOmZ1bmN0aW9uKGUsdCxuLHIpe3JldHVybiBlLnJlcGxhY2UocixmdW5jdGlvbihlLHIsbyxpKXt2YXIgYT1vLnJlcGxhY2UoL1tcIiddL2csXCJcIik7cmV0dXJuIG4mJihhPW5ldyBVUkwoYSxuKS5ocmVmKSx0LmhyZWY9YSxhPXQuaHJlZixyK1wiJ1wiK2ErXCInXCIraX0pfX07ZS5wYXRoPXJ9KSx3aW5kb3cuSFRNTEltcG9ydHMuYWRkTW9kdWxlKGZ1bmN0aW9uKGUpe3ZhciB0PXthc3luYzohMCxvazpmdW5jdGlvbihlKXtyZXR1cm4gZS5zdGF0dXM+PTIwMCYmZS5zdGF0dXM8MzAwfHwzMDQ9PT1lLnN0YXR1c3x8MD09PWUuc3RhdHVzfSxsb2FkOmZ1bmN0aW9uKG4scixvKXt2YXIgaT1uZXcgWE1MSHR0cFJlcXVlc3Q7cmV0dXJuKGUuZmxhZ3MuZGVidWd8fGUuZmxhZ3MuYnVzdCkmJihuKz1cIj9cIitNYXRoLnJhbmRvbSgpKSxpLm9wZW4oXCJHRVRcIixuLHQuYXN5bmMpLGkuYWRkRXZlbnRMaXN0ZW5lcihcInJlYWR5c3RhdGVjaGFuZ2VcIixmdW5jdGlvbihlKXtpZig0PT09aS5yZWFkeVN0YXRlKXt2YXIgbj1udWxsO3RyeXt2YXIgYT1pLmdldFJlc3BvbnNlSGVhZGVyKFwiTG9jYXRpb25cIik7YSYmKG49XCIvXCI9PT1hLnN1YnN0cigwLDEpP2xvY2F0aW9uLm9yaWdpbithOmEpfWNhdGNoKGUpe2NvbnNvbGUuZXJyb3IoZS5tZXNzYWdlKX1yLmNhbGwobywhdC5vayhpKSYmaSxpLnJlc3BvbnNlfHxpLnJlc3BvbnNlVGV4dCxuKX19KSxpLnNlbmQoKSxpfSxsb2FkRG9jdW1lbnQ6ZnVuY3Rpb24oZSx0LG4pe3RoaXMubG9hZChlLHQsbikucmVzcG9uc2VUeXBlPVwiZG9jdW1lbnRcIn19O2UueGhyPXR9KSx3aW5kb3cuSFRNTEltcG9ydHMuYWRkTW9kdWxlKGZ1bmN0aW9uKGUpe3ZhciB0PWUueGhyLG49ZS5mbGFncyxyPWZ1bmN0aW9uKGUsdCl7dGhpcy5jYWNoZT17fSx0aGlzLm9ubG9hZD1lLHRoaXMub25jb21wbGV0ZT10LHRoaXMuaW5mbGlnaHQ9MCx0aGlzLnBlbmRpbmc9e319O3IucHJvdG90eXBlPXthZGROb2RlczpmdW5jdGlvbihlKXt0aGlzLmluZmxpZ2h0Kz1lLmxlbmd0aDtmb3IodmFyIHQsbj0wLHI9ZS5sZW5ndGg7cj5uJiYodD1lW25dKTtuKyspdGhpcy5yZXF1aXJlKHQpO3RoaXMuY2hlY2tEb25lKCl9LGFkZE5vZGU6ZnVuY3Rpb24oZSl7dGhpcy5pbmZsaWdodCsrLHRoaXMucmVxdWlyZShlKSx0aGlzLmNoZWNrRG9uZSgpfSxyZXF1aXJlOmZ1bmN0aW9uKGUpe3ZhciB0PWUuc3JjfHxlLmhyZWY7ZS5fX25vZGVVcmw9dCx0aGlzLmRlZHVwZSh0LGUpfHx0aGlzLmZldGNoKHQsZSl9LGRlZHVwZTpmdW5jdGlvbihlLHQpe2lmKHRoaXMucGVuZGluZ1tlXSlyZXR1cm4gdGhpcy5wZW5kaW5nW2VdLnB1c2godCksITA7cmV0dXJuIHRoaXMuY2FjaGVbZV0/KHRoaXMub25sb2FkKGUsdCx0aGlzLmNhY2hlW2VdKSx0aGlzLnRhaWwoKSwhMCk6KHRoaXMucGVuZGluZ1tlXT1bdF0sITEpfSxmZXRjaDpmdW5jdGlvbihlLHIpe2lmKG4ubG9hZCYmY29uc29sZS5sb2coXCJmZXRjaFwiLGUsciksZSlpZihlLm1hdGNoKC9eZGF0YTovKSl7dmFyIG89ZS5zcGxpdChcIixcIiksaT1vWzBdLGE9b1sxXTthPWkuaW5kZXhPZihcIjtiYXNlNjRcIik+LTE/YXRvYihhKTpkZWNvZGVVUklDb21wb25lbnQoYSksc2V0VGltZW91dChmdW5jdGlvbigpe3RoaXMucmVjZWl2ZShlLHIsbnVsbCxhKX0uYmluZCh0aGlzKSwwKX1lbHNle3ZhciBzPWZ1bmN0aW9uKHQsbixvKXt0aGlzLnJlY2VpdmUoZSxyLHQsbixvKX0uYmluZCh0aGlzKTt0LmxvYWQoZSxzKX1lbHNlIHNldFRpbWVvdXQoZnVuY3Rpb24oKXt0aGlzLnJlY2VpdmUoZSxyLHtlcnJvcjpcImhyZWYgbXVzdCBiZSBzcGVjaWZpZWRcIn0sbnVsbCl9LmJpbmQodGhpcyksMCl9LHJlY2VpdmU6ZnVuY3Rpb24oZSx0LG4scixvKXt0aGlzLmNhY2hlW2VdPXI7Zm9yKHZhciBpLGE9dGhpcy5wZW5kaW5nW2VdLHM9MCxjPWEubGVuZ3RoO2M+cyYmKGk9YVtzXSk7cysrKXRoaXMub25sb2FkKGUsaSxyLG4sbyksdGhpcy50YWlsKCk7dGhpcy5wZW5kaW5nW2VdPW51bGx9LHRhaWw6ZnVuY3Rpb24oKXstLXRoaXMuaW5mbGlnaHQsdGhpcy5jaGVja0RvbmUoKX0sY2hlY2tEb25lOmZ1bmN0aW9uKCl7dGhpcy5pbmZsaWdodHx8dGhpcy5vbmNvbXBsZXRlKCl9fSxlLkxvYWRlcj1yfSksd2luZG93LkhUTUxJbXBvcnRzLmFkZE1vZHVsZShmdW5jdGlvbihlKXt2YXIgdD1mdW5jdGlvbihlKXt0aGlzLmFkZENhbGxiYWNrPWUsdGhpcy5tbz1uZXcgTXV0YXRpb25PYnNlcnZlcih0aGlzLmhhbmRsZXIuYmluZCh0aGlzKSl9O3QucHJvdG90eXBlPXtoYW5kbGVyOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxuPTAscj1lLmxlbmd0aDtyPm4mJih0PWVbbl0pO24rKylcImNoaWxkTGlzdFwiPT09dC50eXBlJiZ0LmFkZGVkTm9kZXMubGVuZ3RoJiZ0aGlzLmFkZGVkTm9kZXModC5hZGRlZE5vZGVzKX0sYWRkZWROb2RlczpmdW5jdGlvbihlKXt0aGlzLmFkZENhbGxiYWNrJiZ0aGlzLmFkZENhbGxiYWNrKGUpO2Zvcih2YXIgdCxuPTAscj1lLmxlbmd0aDtyPm4mJih0PWVbbl0pO24rKyl0LmNoaWxkcmVuJiZ0LmNoaWxkcmVuLmxlbmd0aCYmdGhpcy5hZGRlZE5vZGVzKHQuY2hpbGRyZW4pfSxvYnNlcnZlOmZ1bmN0aW9uKGUpe3RoaXMubW8ub2JzZXJ2ZShlLHtjaGlsZExpc3Q6ITAsc3VidHJlZTohMH0pfX0sZS5PYnNlcnZlcj10fSksd2luZG93LkhUTUxJbXBvcnRzLmFkZE1vZHVsZShmdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUpe3JldHVyblwibGlua1wiPT09ZS5sb2NhbE5hbWUmJmUucmVsPT09dX1mdW5jdGlvbiBuKGUpe3ZhciB0PXIoZSk7cmV0dXJuXCJkYXRhOnRleHQvamF2YXNjcmlwdDtjaGFyc2V0PXV0Zi04LFwiK2VuY29kZVVSSUNvbXBvbmVudCh0KX1mdW5jdGlvbiByKGUpe3JldHVybiBlLnRleHRDb250ZW50K28oZSl9ZnVuY3Rpb24gbyhlKXt2YXIgdD1lLm93bmVyRG9jdW1lbnQ7dC5fX2ltcG9ydGVkU2NyaXB0cz10Ll9faW1wb3J0ZWRTY3JpcHRzfHwwO3ZhciBuPWUub3duZXJEb2N1bWVudC5iYXNlVVJJLHI9dC5fX2ltcG9ydGVkU2NyaXB0cz9cIi1cIit0Ll9faW1wb3J0ZWRTY3JpcHRzOlwiXCI7cmV0dXJuIHQuX19pbXBvcnRlZFNjcmlwdHMrKyxcIlxcbi8vIyBzb3VyY2VVUkw9XCIrbityK1wiLmpzXFxuXCJ9ZnVuY3Rpb24gaShlKXt2YXIgdD1lLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO3JldHVybiB0LnRleHRDb250ZW50PWUudGV4dENvbnRlbnQsYS5yZXNvbHZlVXJsc0luU3R5bGUodCksdH12YXIgYT1lLnBhdGgscz1lLnJvb3REb2N1bWVudCxjPWUuZmxhZ3MsbD1lLmlzSUUsdT1lLklNUE9SVF9MSU5LX1RZUEUsZD1cImxpbmtbcmVsPVwiK3UrXCJdXCIscD17ZG9jdW1lbnRTZWxlY3RvcnM6ZCxpbXBvcnRzU2VsZWN0b3JzOltkLFwibGlua1tyZWw9c3R5bGVzaGVldF06bm90KFt0eXBlXSlcIixcInN0eWxlOm5vdChbdHlwZV0pXCIsXCJzY3JpcHQ6bm90KFt0eXBlXSlcIiwnc2NyaXB0W3R5cGU9XCJhcHBsaWNhdGlvbi9qYXZhc2NyaXB0XCJdJywnc2NyaXB0W3R5cGU9XCJ0ZXh0L2phdmFzY3JpcHRcIl0nXS5qb2luKFwiLFwiKSxtYXA6e2xpbms6XCJwYXJzZUxpbmtcIixzY3JpcHQ6XCJwYXJzZVNjcmlwdFwiLHN0eWxlOlwicGFyc2VTdHlsZVwifSxkeW5hbWljRWxlbWVudHM6W10scGFyc2VOZXh0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5uZXh0VG9QYXJzZSgpO2UmJnRoaXMucGFyc2UoZSl9LHBhcnNlOmZ1bmN0aW9uKGUpe2lmKHRoaXMuaXNQYXJzZWQoZSkpcmV0dXJuIHZvaWQoYy5wYXJzZSYmY29uc29sZS5sb2coXCJbJXNdIGlzIGFscmVhZHkgcGFyc2VkXCIsZS5sb2NhbE5hbWUpKTt2YXIgdD10aGlzW3RoaXMubWFwW2UubG9jYWxOYW1lXV07dCYmKHRoaXMubWFya1BhcnNpbmcoZSksdC5jYWxsKHRoaXMsZSkpfSxwYXJzZUR5bmFtaWM6ZnVuY3Rpb24oZSx0KXt0aGlzLmR5bmFtaWNFbGVtZW50cy5wdXNoKGUpLHR8fHRoaXMucGFyc2VOZXh0KCl9LG1hcmtQYXJzaW5nOmZ1bmN0aW9uKGUpe2MucGFyc2UmJmNvbnNvbGUubG9nKFwicGFyc2luZ1wiLGUpLHRoaXMucGFyc2luZ0VsZW1lbnQ9ZX0sbWFya1BhcnNpbmdDb21wbGV0ZTpmdW5jdGlvbihlKXtlLl9faW1wb3J0UGFyc2VkPSEwLHRoaXMubWFya0R5bmFtaWNQYXJzaW5nQ29tcGxldGUoZSksZS5fX2ltcG9ydEVsZW1lbnQmJihlLl9faW1wb3J0RWxlbWVudC5fX2ltcG9ydFBhcnNlZD0hMCx0aGlzLm1hcmtEeW5hbWljUGFyc2luZ0NvbXBsZXRlKGUuX19pbXBvcnRFbGVtZW50KSksdGhpcy5wYXJzaW5nRWxlbWVudD1udWxsLGMucGFyc2UmJmNvbnNvbGUubG9nKFwiY29tcGxldGVkXCIsZSl9LG1hcmtEeW5hbWljUGFyc2luZ0NvbXBsZXRlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZHluYW1pY0VsZW1lbnRzLmluZGV4T2YoZSk7dD49MCYmdGhpcy5keW5hbWljRWxlbWVudHMuc3BsaWNlKHQsMSl9LHBhcnNlSW1wb3J0OmZ1bmN0aW9uKGUpe2lmKGVbXCJpbXBvcnRcIl09ZS5fX2RvYyx3aW5kb3cuSFRNTEltcG9ydHMuX19pbXBvcnRzUGFyc2luZ0hvb2smJndpbmRvdy5IVE1MSW1wb3J0cy5fX2ltcG9ydHNQYXJzaW5nSG9vayhlKSxlW1wiaW1wb3J0XCJdJiYoZVtcImltcG9ydFwiXS5fX2ltcG9ydFBhcnNlZD0hMCksdGhpcy5tYXJrUGFyc2luZ0NvbXBsZXRlKGUpLGUuX19yZXNvdXJjZSYmIWUuX19lcnJvcj9lLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KFwibG9hZFwiLHtidWJibGVzOiExfSkpOmUuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoXCJlcnJvclwiLHtidWJibGVzOiExfSkpLGUuX19wZW5kaW5nKWZvcih2YXIgdDtlLl9fcGVuZGluZy5sZW5ndGg7KXQ9ZS5fX3BlbmRpbmcuc2hpZnQoKSx0JiZ0KHt0YXJnZXQ6ZX0pO3RoaXMucGFyc2VOZXh0KCl9LHBhcnNlTGluazpmdW5jdGlvbihlKXt0KGUpP3RoaXMucGFyc2VJbXBvcnQoZSk6KGUuaHJlZj1lLmhyZWYsdGhpcy5wYXJzZUdlbmVyaWMoZSkpfSxwYXJzZVN0eWxlOmZ1bmN0aW9uKGUpe3ZhciB0PWU7ZT1pKGUpLHQuX19hcHBsaWVkRWxlbWVudD1lLGUuX19pbXBvcnRFbGVtZW50PXQsdGhpcy5wYXJzZUdlbmVyaWMoZSl9LHBhcnNlR2VuZXJpYzpmdW5jdGlvbihlKXt0aGlzLnRyYWNrRWxlbWVudChlKSx0aGlzLmFkZEVsZW1lbnRUb0RvY3VtZW50KGUpfSxyb290SW1wb3J0Rm9yRWxlbWVudDpmdW5jdGlvbihlKXtmb3IodmFyIHQ9ZTt0Lm93bmVyRG9jdW1lbnQuX19pbXBvcnRMaW5rOyl0PXQub3duZXJEb2N1bWVudC5fX2ltcG9ydExpbms7cmV0dXJuIHR9LGFkZEVsZW1lbnRUb0RvY3VtZW50OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMucm9vdEltcG9ydEZvckVsZW1lbnQoZS5fX2ltcG9ydEVsZW1lbnR8fGUpO3QucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZSx0KX0sdHJhY2tFbGVtZW50OmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcyxyPWZ1bmN0aW9uKG8pe2UucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImxvYWRcIixyKSxlLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLHIpLHQmJnQobyksbi5tYXJrUGFyc2luZ0NvbXBsZXRlKGUpLG4ucGFyc2VOZXh0KCl9O2lmKGUuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIixyKSxlLmFkZEV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLHIpLGwmJlwic3R5bGVcIj09PWUubG9jYWxOYW1lKXt2YXIgbz0hMTtpZigtMT09ZS50ZXh0Q29udGVudC5pbmRleE9mKFwiQGltcG9ydFwiKSlvPSEwO2Vsc2UgaWYoZS5zaGVldCl7bz0hMDtmb3IodmFyIGksYT1lLnNoZWV0LmNzc1J1bGVzLHM9YT9hLmxlbmd0aDowLGM9MDtzPmMmJihpPWFbY10pO2MrKylpLnR5cGU9PT1DU1NSdWxlLklNUE9SVF9SVUxFJiYobz1vJiZCb29sZWFuKGkuc3R5bGVTaGVldCkpfW8mJnNldFRpbWVvdXQoZnVuY3Rpb24oKXtlLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KFwibG9hZFwiLHtidWJibGVzOiExfSkpfSl9fSxwYXJzZVNjcmlwdDpmdW5jdGlvbih0KXt2YXIgcj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO3IuX19pbXBvcnRFbGVtZW50PXQsci5zcmM9dC5zcmM/dC5zcmM6bih0KSxlLmN1cnJlbnRTY3JpcHQ9dCx0aGlzLnRyYWNrRWxlbWVudChyLGZ1bmN0aW9uKHQpe3IucGFyZW50Tm9kZSYmci5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHIpLGUuY3VycmVudFNjcmlwdD1udWxsfSksdGhpcy5hZGRFbGVtZW50VG9Eb2N1bWVudChyKX0sbmV4dFRvUGFyc2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWF5UGFyc2U9W10sIXRoaXMucGFyc2luZ0VsZW1lbnQmJih0aGlzLm5leHRUb1BhcnNlSW5Eb2Mocyl8fHRoaXMubmV4dFRvUGFyc2VEeW5hbWljKCkpfSxuZXh0VG9QYXJzZUluRG9jOmZ1bmN0aW9uKGUsbil7aWYoZSYmdGhpcy5fbWF5UGFyc2UuaW5kZXhPZihlKTwwKXt0aGlzLl9tYXlQYXJzZS5wdXNoKGUpO2Zvcih2YXIgcixvPWUucXVlcnlTZWxlY3RvckFsbCh0aGlzLnBhcnNlU2VsZWN0b3JzRm9yTm9kZShlKSksaT0wLGE9by5sZW5ndGg7YT5pJiYocj1vW2ldKTtpKyspaWYoIXRoaXMuaXNQYXJzZWQocikpcmV0dXJuIHRoaXMuaGFzUmVzb3VyY2Uocik/dChyKT90aGlzLm5leHRUb1BhcnNlSW5Eb2Moci5fX2RvYyxyKTpyOnZvaWQgMH1yZXR1cm4gbn0sbmV4dFRvUGFyc2VEeW5hbWljOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZHluYW1pY0VsZW1lbnRzWzBdfSxwYXJzZVNlbGVjdG9yc0Zvck5vZGU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5vd25lckRvY3VtZW50fHxlO3JldHVybiB0PT09cz90aGlzLmRvY3VtZW50U2VsZWN0b3JzOnRoaXMuaW1wb3J0c1NlbGVjdG9yc30saXNQYXJzZWQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuX19pbXBvcnRQYXJzZWR9LG5lZWRzRHluYW1pY1BhcnNpbmc6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZHluYW1pY0VsZW1lbnRzLmluZGV4T2YoZSk+PTB9LGhhc1Jlc291cmNlOmZ1bmN0aW9uKGUpe3JldHVybiB0KGUpJiZ2b2lkIDA9PT1lLl9fZG9jPyExOiEwfX07ZS5wYXJzZXI9cCxlLklNUE9SVF9TRUxFQ1RPUj1kfSksd2luZG93LkhUTUxJbXBvcnRzLmFkZE1vZHVsZShmdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUpe3JldHVybiBuKGUsYSl9ZnVuY3Rpb24gbihlLHQpe3JldHVyblwibGlua1wiPT09ZS5sb2NhbE5hbWUmJmUuZ2V0QXR0cmlidXRlKFwicmVsXCIpPT09dH1mdW5jdGlvbiByKGUpe3JldHVybiEhT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLFwiYmFzZVVSSVwiKX1mdW5jdGlvbiBvKGUsdCl7dmFyIG49ZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KGEpO24uX1VSTD10O3ZhciBvPW4uY3JlYXRlRWxlbWVudChcImJhc2VcIik7by5zZXRBdHRyaWJ1dGUoXCJocmVmXCIsdCksbi5iYXNlVVJJfHxyKG4pfHxPYmplY3QuZGVmaW5lUHJvcGVydHkobixcImJhc2VVUklcIix7dmFsdWU6dH0pO3ZhciBpPW4uY3JlYXRlRWxlbWVudChcIm1ldGFcIik7cmV0dXJuIGkuc2V0QXR0cmlidXRlKFwiY2hhcnNldFwiLFwidXRmLThcIiksbi5oZWFkLmFwcGVuZENoaWxkKGkpLG4uaGVhZC5hcHBlbmRDaGlsZChvKSxuLmJvZHkuaW5uZXJIVE1MPWUsd2luZG93LkhUTUxUZW1wbGF0ZUVsZW1lbnQmJkhUTUxUZW1wbGF0ZUVsZW1lbnQuYm9vdHN0cmFwJiZIVE1MVGVtcGxhdGVFbGVtZW50LmJvb3RzdHJhcChuKSxufXZhciBpPWUuZmxhZ3MsYT1lLklNUE9SVF9MSU5LX1RZUEUscz1lLklNUE9SVF9TRUxFQ1RPUixjPWUucm9vdERvY3VtZW50LGw9ZS5Mb2FkZXIsdT1lLk9ic2VydmVyLGQ9ZS5wYXJzZXIscD17ZG9jdW1lbnRzOnt9LGRvY3VtZW50UHJlbG9hZFNlbGVjdG9yczpzLGltcG9ydHNQcmVsb2FkU2VsZWN0b3JzOltzXS5qb2luKFwiLFwiKSxsb2FkTm9kZTpmdW5jdGlvbihlKXtoLmFkZE5vZGUoZSl9LGxvYWRTdWJ0cmVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMubWFyc2hhbE5vZGVzKGUpO2guYWRkTm9kZXModCl9LG1hcnNoYWxOb2RlczpmdW5jdGlvbihlKXtyZXR1cm4gZS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMubG9hZFNlbGVjdG9yc0Zvck5vZGUoZSkpfSxsb2FkU2VsZWN0b3JzRm9yTm9kZTpmdW5jdGlvbihlKXt2YXIgdD1lLm93bmVyRG9jdW1lbnR8fGU7cmV0dXJuIHQ9PT1jP3RoaXMuZG9jdW1lbnRQcmVsb2FkU2VsZWN0b3JzOnRoaXMuaW1wb3J0c1ByZWxvYWRTZWxlY3RvcnN9LGxvYWRlZDpmdW5jdGlvbihlLG4scixhLHMpe2lmKGkubG9hZCYmY29uc29sZS5sb2coXCJsb2FkZWRcIixlLG4pLG4uX19yZXNvdXJjZT1yLG4uX19lcnJvcj1hLHQobikpe3ZhciBjPXRoaXMuZG9jdW1lbnRzW2VdO3ZvaWQgMD09PWMmJihjPWE/bnVsbDpvKHIsc3x8ZSksYyYmKGMuX19pbXBvcnRMaW5rPW4sdGhpcy5ib290RG9jdW1lbnQoYykpLHRoaXMuZG9jdW1lbnRzW2VdPWMpLG4uX19kb2M9Y31kLnBhcnNlTmV4dCgpfSxib290RG9jdW1lbnQ6ZnVuY3Rpb24oZSl7dGhpcy5sb2FkU3VidHJlZShlKSx0aGlzLm9ic2VydmVyLm9ic2VydmUoZSksZC5wYXJzZU5leHQoKX0sbG9hZGVkQWxsOmZ1bmN0aW9uKCl7ZC5wYXJzZU5leHQoKX19LGg9bmV3IGwocC5sb2FkZWQuYmluZChwKSxwLmxvYWRlZEFsbC5iaW5kKHApKTtpZihwLm9ic2VydmVyPW5ldyB1LCFkb2N1bWVudC5iYXNlVVJJKXt2YXIgZj17Z2V0OmZ1bmN0aW9uKCl7dmFyIGU9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImJhc2VcIik7cmV0dXJuIGU/ZS5ocmVmOndpbmRvdy5sb2NhdGlvbi5ocmVmfSxjb25maWd1cmFibGU6ITB9O09iamVjdC5kZWZpbmVQcm9wZXJ0eShkb2N1bWVudCxcImJhc2VVUklcIixmKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoYyxcImJhc2VVUklcIixmKX1lLmltcG9ydGVyPXAsZS5pbXBvcnRMb2FkZXI9aH0pLHdpbmRvdy5IVE1MSW1wb3J0cy5hZGRNb2R1bGUoZnVuY3Rpb24oZSl7dmFyIHQ9ZS5wYXJzZXIsbj1lLmltcG9ydGVyLHI9e2FkZGVkOmZ1bmN0aW9uKGUpe2Zvcih2YXIgcixvLGksYSxzPTAsYz1lLmxlbmd0aDtjPnMmJihhPWVbc10pO3MrKylyfHwocj1hLm93bmVyRG9jdW1lbnQsbz10LmlzUGFyc2VkKHIpKSxpPXRoaXMuc2hvdWxkTG9hZE5vZGUoYSksaSYmbi5sb2FkTm9kZShhKSx0aGlzLnNob3VsZFBhcnNlTm9kZShhKSYmbyYmdC5wYXJzZUR5bmFtaWMoYSxpKX0sc2hvdWxkTG9hZE5vZGU6ZnVuY3Rpb24oZSl7cmV0dXJuIDE9PT1lLm5vZGVUeXBlJiZvLmNhbGwoZSxuLmxvYWRTZWxlY3RvcnNGb3JOb2RlKGUpKX0sc2hvdWxkUGFyc2VOb2RlOmZ1bmN0aW9uKGUpe3JldHVybiAxPT09ZS5ub2RlVHlwZSYmby5jYWxsKGUsdC5wYXJzZVNlbGVjdG9yc0Zvck5vZGUoZSkpfX07bi5vYnNlcnZlci5hZGRDYWxsYmFjaz1yLmFkZGVkLmJpbmQocik7dmFyIG89SFRNTEVsZW1lbnQucHJvdG90eXBlLm1hdGNoZXN8fEhUTUxFbGVtZW50LnByb3RvdHlwZS5tYXRjaGVzU2VsZWN0b3J8fEhUTUxFbGVtZW50LnByb3RvdHlwZS53ZWJraXRNYXRjaGVzU2VsZWN0b3J8fEhUTUxFbGVtZW50LnByb3RvdHlwZS5tb3pNYXRjaGVzU2VsZWN0b3J8fEhUTUxFbGVtZW50LnByb3RvdHlwZS5tc01hdGNoZXNTZWxlY3Rvcn0pLGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXt3aW5kb3cuSFRNTEltcG9ydHMuaW1wb3J0ZXIuYm9vdERvY3VtZW50KHIpfXZhciBuPWUuaW5pdGlhbGl6ZU1vZHVsZXM7ZS5pc0lFO2lmKCFlLnVzZU5hdGl2ZSl7bigpO3ZhciByPWUucm9vdERvY3VtZW50O1wiY29tcGxldGVcIj09PWRvY3VtZW50LnJlYWR5U3RhdGV8fFwiaW50ZXJhY3RpdmVcIj09PWRvY3VtZW50LnJlYWR5U3RhdGUmJiF3aW5kb3cuYXR0YWNoRXZlbnQ/dCgpOmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsdCl9fSh3aW5kb3cuSFRNTEltcG9ydHMpLHdpbmRvdy5DdXN0b21FbGVtZW50cz13aW5kb3cuQ3VzdG9tRWxlbWVudHN8fHtmbGFnczp7fX0sZnVuY3Rpb24oZSl7dmFyIHQ9ZS5mbGFncyxuPVtdLHI9ZnVuY3Rpb24oZSl7bi5wdXNoKGUpfSxvPWZ1bmN0aW9uKCl7bi5mb3JFYWNoKGZ1bmN0aW9uKHQpe3QoZSl9KX07ZS5hZGRNb2R1bGU9cixlLmluaXRpYWxpemVNb2R1bGVzPW8sZS5oYXNOYXRpdmU9Qm9vbGVhbihkb2N1bWVudC5yZWdpc3RlckVsZW1lbnQpLGUuaXNJRT0vVHJpZGVudC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxlLnVzZU5hdGl2ZT0hdC5yZWdpc3RlciYmZS5oYXNOYXRpdmUmJiF3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwmJighd2luZG93LkhUTUxJbXBvcnRzfHx3aW5kb3cuSFRNTEltcG9ydHMudXNlTmF0aXZlKX0od2luZG93LkN1c3RvbUVsZW1lbnRzKSx3aW5kb3cuQ3VzdG9tRWxlbWVudHMuYWRkTW9kdWxlKGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSx0KXtuKGUsZnVuY3Rpb24oZSl7cmV0dXJuIHQoZSk/ITA6dm9pZCByKGUsdCl9KSxyKGUsdCl9ZnVuY3Rpb24gbihlLHQscil7dmFyIG89ZS5maXJzdEVsZW1lbnRDaGlsZDtpZighbylmb3Iobz1lLmZpcnN0Q2hpbGQ7byYmby5ub2RlVHlwZSE9PU5vZGUuRUxFTUVOVF9OT0RFOylvPW8ubmV4dFNpYmxpbmc7Zm9yKDtvOyl0KG8scikhPT0hMCYmbihvLHQsciksbz1vLm5leHRFbGVtZW50U2libGluZztyZXR1cm4gbnVsbH1mdW5jdGlvbiByKGUsbil7Zm9yKHZhciByPWUuc2hhZG93Um9vdDtyOyl0KHIsbikscj1yLm9sZGVyU2hhZG93Um9vdH1mdW5jdGlvbiBvKGUsdCl7aShlLHQsW10pfWZ1bmN0aW9uIGkoZSx0LG4pe2lmKGU9d2luZG93LndyYXAoZSksIShuLmluZGV4T2YoZSk+PTApKXtuLnB1c2goZSk7Zm9yKHZhciByLG89ZS5xdWVyeVNlbGVjdG9yQWxsKFwibGlua1tyZWw9XCIrYStcIl1cIikscz0wLGM9by5sZW5ndGg7Yz5zJiYocj1vW3NdKTtzKyspcltcImltcG9ydFwiXSYmaShyW1wiaW1wb3J0XCJdLHQsbik7dChlKX19dmFyIGE9d2luZG93LkhUTUxJbXBvcnRzP3dpbmRvdy5IVE1MSW1wb3J0cy5JTVBPUlRfTElOS19UWVBFOlwibm9uZVwiO2UuZm9yRG9jdW1lbnRUcmVlPW8sZS5mb3JTdWJ0cmVlPXR9KSx3aW5kb3cuQ3VzdG9tRWxlbWVudHMuYWRkTW9kdWxlKGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSx0KXtyZXR1cm4gbihlLHQpfHxyKGUsdCl9ZnVuY3Rpb24gbih0LG4pe3JldHVybiBlLnVwZ3JhZGUodCxuKT8hMDp2b2lkKG4mJmEodCkpfWZ1bmN0aW9uIHIoZSx0KXtiKGUsZnVuY3Rpb24oZSl7cmV0dXJuIG4oZSx0KT8hMDp2b2lkIDB9KX1mdW5jdGlvbiBvKGUpe1MucHVzaChlKSxffHwoXz0hMCxzZXRUaW1lb3V0KGkpKX1mdW5jdGlvbiBpKCl7Xz0hMTtmb3IodmFyIGUsdD1TLG49MCxyPXQubGVuZ3RoO3I+biYmKGU9dFtuXSk7bisrKWUoKTtTPVtdfWZ1bmN0aW9uIGEoZSl7RT9vKGZ1bmN0aW9uKCl7cyhlKX0pOnMoZSl9ZnVuY3Rpb24gcyhlKXtlLl9fdXBncmFkZWRfXyYmIWUuX19hdHRhY2hlZCYmKGUuX19hdHRhY2hlZD0hMCxlLmF0dGFjaGVkQ2FsbGJhY2smJmUuYXR0YWNoZWRDYWxsYmFjaygpKX1mdW5jdGlvbiBjKGUpe2woZSksYihlLGZ1bmN0aW9uKGUpe2woZSl9KX1mdW5jdGlvbiBsKGUpe0U/byhmdW5jdGlvbigpe3UoZSl9KTp1KGUpfWZ1bmN0aW9uIHUoZSl7ZS5fX3VwZ3JhZGVkX18mJmUuX19hdHRhY2hlZCYmKGUuX19hdHRhY2hlZD0hMSxlLmRldGFjaGVkQ2FsbGJhY2smJmUuZGV0YWNoZWRDYWxsYmFjaygpKX1mdW5jdGlvbiBkKGUpe2Zvcih2YXIgdD1lLG49d2luZG93LndyYXAoZG9jdW1lbnQpO3Q7KXtpZih0PT1uKXJldHVybiEwO3Q9dC5wYXJlbnROb2RlfHx0Lm5vZGVUeXBlPT09Tm9kZS5ET0NVTUVOVF9GUkFHTUVOVF9OT0RFJiZ0Lmhvc3R9fWZ1bmN0aW9uIHAoZSl7aWYoZS5zaGFkb3dSb290JiYhZS5zaGFkb3dSb290Ll9fd2F0Y2hlZCl7Zy5kb20mJmNvbnNvbGUubG9nKFwid2F0Y2hpbmcgc2hhZG93LXJvb3QgZm9yOiBcIixlLmxvY2FsTmFtZSk7Zm9yKHZhciB0PWUuc2hhZG93Um9vdDt0OyltKHQpLHQ9dC5vbGRlclNoYWRvd1Jvb3R9fWZ1bmN0aW9uIGgoZSxuKXtpZihnLmRvbSl7dmFyIHI9blswXTtpZihyJiZcImNoaWxkTGlzdFwiPT09ci50eXBlJiZyLmFkZGVkTm9kZXMmJnIuYWRkZWROb2Rlcyl7Zm9yKHZhciBvPXIuYWRkZWROb2Rlc1swXTtvJiZvIT09ZG9jdW1lbnQmJiFvLmhvc3Q7KW89by5wYXJlbnROb2RlO3ZhciBpPW8mJihvLlVSTHx8by5fVVJMfHxvLmhvc3QmJm8uaG9zdC5sb2NhbE5hbWUpfHxcIlwiO2k9aS5zcGxpdChcIi8/XCIpLnNoaWZ0KCkuc3BsaXQoXCIvXCIpLnBvcCgpfWNvbnNvbGUuZ3JvdXAoXCJtdXRhdGlvbnMgKCVkKSBbJXNdXCIsbi5sZW5ndGgsaXx8XCJcIil9dmFyIGE9ZChlKTtuLmZvckVhY2goZnVuY3Rpb24oZSl7XCJjaGlsZExpc3RcIj09PWUudHlwZSYmKFQoZS5hZGRlZE5vZGVzLGZ1bmN0aW9uKGUpe2UubG9jYWxOYW1lJiZ0KGUsYSl9KSxUKGUucmVtb3ZlZE5vZGVzLGZ1bmN0aW9uKGUpe2UubG9jYWxOYW1lJiZjKGUpfSkpfSksZy5kb20mJmNvbnNvbGUuZ3JvdXBFbmQoKX1mdW5jdGlvbiBmKGUpe2ZvcihlPXdpbmRvdy53cmFwKGUpLGV8fChlPXdpbmRvdy53cmFwKGRvY3VtZW50KSk7ZS5wYXJlbnROb2RlOyllPWUucGFyZW50Tm9kZTt2YXIgdD1lLl9fb2JzZXJ2ZXI7dCYmKGgoZSx0LnRha2VSZWNvcmRzKCkpLGkoKSl9ZnVuY3Rpb24gbShlKXtpZighZS5fX29ic2VydmVyKXt2YXIgdD1uZXcgTXV0YXRpb25PYnNlcnZlcihoLmJpbmQodGhpcyxlKSk7dC5vYnNlcnZlKGUse2NoaWxkTGlzdDohMCxzdWJ0cmVlOiEwfSksZS5fX29ic2VydmVyPXR9fWZ1bmN0aW9uIHcoZSl7ZT13aW5kb3cud3JhcChlKSxnLmRvbSYmY29uc29sZS5ncm91cChcInVwZ3JhZGVEb2N1bWVudDogXCIsZS5iYXNlVVJJLnNwbGl0KFwiL1wiKS5wb3AoKSk7dmFyIG49ZT09PXdpbmRvdy53cmFwKGRvY3VtZW50KTt0KGUsbiksbShlKSxnLmRvbSYmY29uc29sZS5ncm91cEVuZCgpfWZ1bmN0aW9uIHYoZSl7eShlLHcpfXZhciBnPWUuZmxhZ3MsYj1lLmZvclN1YnRyZWUseT1lLmZvckRvY3VtZW50VHJlZSxFPXdpbmRvdy5NdXRhdGlvbk9ic2VydmVyLl9pc1BvbHlmaWxsZWQmJmdbXCJ0aHJvdHRsZS1hdHRhY2hlZFwiXTtlLmhhc1BvbHlmaWxsTXV0YXRpb25zPUUsZS5oYXNUaHJvdHRsZWRBdHRhY2hlZD1FO3ZhciBfPSExLFM9W10sVD1BcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsLmJpbmQoQXJyYXkucHJvdG90eXBlLmZvckVhY2gpLE09RWxlbWVudC5wcm90b3R5cGUuY3JlYXRlU2hhZG93Um9vdDtNJiYoRWxlbWVudC5wcm90b3R5cGUuY3JlYXRlU2hhZG93Um9vdD1mdW5jdGlvbigpe3ZhciBlPU0uY2FsbCh0aGlzKTtyZXR1cm4gd2luZG93LkN1c3RvbUVsZW1lbnRzLndhdGNoU2hhZG93KHRoaXMpLGV9KSxlLndhdGNoU2hhZG93PXAsZS51cGdyYWRlRG9jdW1lbnRUcmVlPXYsZS51cGdyYWRlRG9jdW1lbnQ9dyxlLnVwZ3JhZGVTdWJ0cmVlPXIsZS51cGdyYWRlQWxsPXQsZS5hdHRhY2hlZD1hLGUudGFrZVJlY29yZHM9Zn0pLHdpbmRvdy5DdXN0b21FbGVtZW50cy5hZGRNb2R1bGUoZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LHIpe2lmKFwidGVtcGxhdGVcIj09PXQubG9jYWxOYW1lJiZ3aW5kb3cuSFRNTFRlbXBsYXRlRWxlbWVudCYmSFRNTFRlbXBsYXRlRWxlbWVudC5kZWNvcmF0ZSYmSFRNTFRlbXBsYXRlRWxlbWVudC5kZWNvcmF0ZSh0KSwhdC5fX3VwZ3JhZGVkX18mJnQubm9kZVR5cGU9PT1Ob2RlLkVMRU1FTlRfTk9ERSl7dmFyIG89dC5nZXRBdHRyaWJ1dGUoXCJpc1wiKSxpPWUuZ2V0UmVnaXN0ZXJlZERlZmluaXRpb24odC5sb2NhbE5hbWUpfHxlLmdldFJlZ2lzdGVyZWREZWZpbml0aW9uKG8pO2lmKGkmJihvJiZpLnRhZz09dC5sb2NhbE5hbWV8fCFvJiYhaVtcImV4dGVuZHNcIl0pKXJldHVybiBuKHQsaSxyKX19ZnVuY3Rpb24gbih0LG4sbyl7cmV0dXJuIGEudXBncmFkZSYmY29uc29sZS5ncm91cChcInVwZ3JhZGU6XCIsdC5sb2NhbE5hbWUpLG4uaXMmJnQuc2V0QXR0cmlidXRlKFwiaXNcIixuLmlzKSxyKHQsbiksdC5fX3VwZ3JhZGVkX189ITAsaSh0KSxvJiZlLmF0dGFjaGVkKHQpLGUudXBncmFkZVN1YnRyZWUodCxvKSxhLnVwZ3JhZGUmJmNvbnNvbGUuZ3JvdXBFbmQoKSx0fWZ1bmN0aW9uIHIoZSx0KXtPYmplY3QuX19wcm90b19fP2UuX19wcm90b19fPXQucHJvdG90eXBlOihvKGUsdC5wcm90b3R5cGUsdFtcIm5hdGl2ZVwiXSksZS5fX3Byb3RvX189dC5wcm90b3R5cGUpfWZ1bmN0aW9uIG8oZSx0LG4pe2Zvcih2YXIgcj17fSxvPXQ7byE9PW4mJm8hPT1IVE1MRWxlbWVudC5wcm90b3R5cGU7KXtmb3IodmFyIGksYT1PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhvKSxzPTA7aT1hW3NdO3MrKylyW2ldfHwoT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsaSxPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG8saSkpLHJbaV09MSk7bz1PYmplY3QuZ2V0UHJvdG90eXBlT2Yobyl9fWZ1bmN0aW9uIGkoZSl7ZS5jcmVhdGVkQ2FsbGJhY2smJmUuY3JlYXRlZENhbGxiYWNrKCl9dmFyIGE9ZS5mbGFncztlLnVwZ3JhZGU9dCxlLnVwZ3JhZGVXaXRoRGVmaW5pdGlvbj1uLGUuaW1wbGVtZW50UHJvdG90eXBlPXJ9KSx3aW5kb3cuQ3VzdG9tRWxlbWVudHMuYWRkTW9kdWxlKGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyKXt2YXIgYz1yfHx7fTtpZighdCl0aHJvdyBuZXcgRXJyb3IoXCJkb2N1bWVudC5yZWdpc3RlckVsZW1lbnQ6IGZpcnN0IGFyZ3VtZW50IGBuYW1lYCBtdXN0IG5vdCBiZSBlbXB0eVwiKTtpZih0LmluZGV4T2YoXCItXCIpPDApdGhyb3cgbmV3IEVycm9yKFwiZG9jdW1lbnQucmVnaXN0ZXJFbGVtZW50OiBmaXJzdCBhcmd1bWVudCAoJ25hbWUnKSBtdXN0IGNvbnRhaW4gYSBkYXNoICgnLScpLiBBcmd1bWVudCBwcm92aWRlZCB3YXMgJ1wiK1N0cmluZyh0KStcIicuXCIpO2lmKG8odCkpdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGV4ZWN1dGUgJ3JlZ2lzdGVyRWxlbWVudCcgb24gJ0RvY3VtZW50JzogUmVnaXN0cmF0aW9uIGZhaWxlZCBmb3IgdHlwZSAnXCIrU3RyaW5nKHQpK1wiJy4gVGhlIHR5cGUgbmFtZSBpcyBpbnZhbGlkLlwiKTtpZihsKHQpKXRocm93IG5ldyBFcnJvcihcIkR1cGxpY2F0ZURlZmluaXRpb25FcnJvcjogYSB0eXBlIHdpdGggbmFtZSAnXCIrU3RyaW5nKHQpK1wiJyBpcyBhbHJlYWR5IHJlZ2lzdGVyZWRcIik7cmV0dXJuIGMucHJvdG90eXBlfHwoYy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShIVE1MRWxlbWVudC5wcm90b3R5cGUpKSxjLl9fbmFtZT10LnRvTG93ZXJDYXNlKCksYy5saWZlY3ljbGU9Yy5saWZlY3ljbGV8fHt9LGMuYW5jZXN0cnk9aShjW1wiZXh0ZW5kc1wiXSksYShjKSxzKGMpLG4oYy5wcm90b3R5cGUpLHUoYy5fX25hbWUsYyksYy5jdG9yPWQoYyksYy5jdG9yLnByb3RvdHlwZT1jLnByb3RvdHlwZSxjLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1jLmN0b3IsZS5yZWFkeSYmdihkb2N1bWVudCksYy5jdG9yfWZ1bmN0aW9uIG4oZSl7aWYoIWUuc2V0QXR0cmlidXRlLl9wb2x5ZmlsbGVkKXt2YXIgdD1lLnNldEF0dHJpYnV0ZTtlLnNldEF0dHJpYnV0ZT1mdW5jdGlvbihlLG4pe3IuY2FsbCh0aGlzLGUsbix0KX07dmFyIG49ZS5yZW1vdmVBdHRyaWJ1dGU7ZS5yZW1vdmVBdHRyaWJ1dGU9ZnVuY3Rpb24oZSl7ci5jYWxsKHRoaXMsZSxudWxsLG4pfSxlLnNldEF0dHJpYnV0ZS5fcG9seWZpbGxlZD0hMH19ZnVuY3Rpb24gcihlLHQsbil7ZT1lLnRvTG93ZXJDYXNlKCk7dmFyIHI9dGhpcy5nZXRBdHRyaWJ1dGUoZSk7bi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIG89dGhpcy5nZXRBdHRyaWJ1dGUoZSk7dGhpcy5hdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2smJm8hPT1yJiZ0aGlzLmF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayhlLHIsbyl9ZnVuY3Rpb24gbyhlKXtmb3IodmFyIHQ9MDt0PF8ubGVuZ3RoO3QrKylpZihlPT09X1t0XSlyZXR1cm4hMH1mdW5jdGlvbiBpKGUpe3ZhciB0PWwoZSk7cmV0dXJuIHQ/aSh0W1wiZXh0ZW5kc1wiXSkuY29uY2F0KFt0XSk6W119ZnVuY3Rpb24gYShlKXtmb3IodmFyIHQsbj1lW1wiZXh0ZW5kc1wiXSxyPTA7dD1lLmFuY2VzdHJ5W3JdO3IrKyluPXQuaXMmJnQudGFnO2UudGFnPW58fGUuX19uYW1lLG4mJihlLmlzPWUuX19uYW1lKX1mdW5jdGlvbiBzKGUpe2lmKCFPYmplY3QuX19wcm90b19fKXt2YXIgdD1IVE1MRWxlbWVudC5wcm90b3R5cGU7aWYoZS5pcyl7dmFyIG49ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChlLnRhZyk7dD1PYmplY3QuZ2V0UHJvdG90eXBlT2Yobil9Zm9yKHZhciByLG89ZS5wcm90b3R5cGUsaT0hMTtvOylvPT10JiYoaT0hMCkscj1PYmplY3QuZ2V0UHJvdG90eXBlT2YobyksciYmKG8uX19wcm90b19fPXIpLG89cjtpfHxjb25zb2xlLndhcm4oZS50YWcrXCIgcHJvdG90eXBlIG5vdCBmb3VuZCBpbiBwcm90b3R5cGUgY2hhaW4gZm9yIFwiK2UuaXMpLGVbXCJuYXRpdmVcIl09dH19ZnVuY3Rpb24gYyhlKXtyZXR1cm4gYihNKGUudGFnKSxlKX1mdW5jdGlvbiBsKGUpe3JldHVybiBlP1NbZS50b0xvd2VyQ2FzZSgpXTp2b2lkIDB9ZnVuY3Rpb24gdShlLHQpe1NbZV09dH1mdW5jdGlvbiBkKGUpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBjKGUpfX1mdW5jdGlvbiBwKGUsdCxuKXtyZXR1cm4gZT09PVQ/aCh0LG4pOk8oZSx0KX1mdW5jdGlvbiBoKGUsdCl7ZSYmKGU9ZS50b0xvd2VyQ2FzZSgpKSx0JiYodD10LnRvTG93ZXJDYXNlKCkpO3ZhciBuPWwodHx8ZSk7aWYobil7aWYoZT09bi50YWcmJnQ9PW4uaXMpcmV0dXJuIG5ldyBuLmN0b3I7aWYoIXQmJiFuLmlzKXJldHVybiBuZXcgbi5jdG9yfXZhciByO3JldHVybiB0PyhyPWgoZSksci5zZXRBdHRyaWJ1dGUoXCJpc1wiLHQpLHIpOihyPU0oZSksZS5pbmRleE9mKFwiLVwiKT49MCYmeShyLEhUTUxFbGVtZW50KSxyKX1mdW5jdGlvbiBmKGUsdCl7dmFyIG49ZVt0XTtlW3RdPWZ1bmN0aW9uKCl7dmFyIGU9bi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIGcoZSksZX19dmFyIG0sdz1lLmlzSUUsdj1lLnVwZ3JhZGVEb2N1bWVudFRyZWUsZz1lLnVwZ3JhZGVBbGwsYj1lLnVwZ3JhZGVXaXRoRGVmaW5pdGlvbix5PWUuaW1wbGVtZW50UHJvdG90eXBlLEU9ZS51c2VOYXRpdmUsXz1bXCJhbm5vdGF0aW9uLXhtbFwiLFwiY29sb3ItcHJvZmlsZVwiLFwiZm9udC1mYWNlXCIsXCJmb250LWZhY2Utc3JjXCIsXCJmb250LWZhY2UtdXJpXCIsXCJmb250LWZhY2UtZm9ybWF0XCIsXCJmb250LWZhY2UtbmFtZVwiLFwibWlzc2luZy1nbHlwaFwiXSxTPXt9LFQ9XCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sXCIsTT1kb2N1bWVudC5jcmVhdGVFbGVtZW50LmJpbmQoZG9jdW1lbnQpLE89ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TLmJpbmQoZG9jdW1lbnQpO209T2JqZWN0Ll9fcHJvdG9fX3x8RT9mdW5jdGlvbihlLHQpe3JldHVybiBlIGluc3RhbmNlb2YgdH06ZnVuY3Rpb24oZSx0KXtpZihlIGluc3RhbmNlb2YgdClyZXR1cm4hMDtmb3IodmFyIG49ZTtuOyl7aWYobj09PXQucHJvdG90eXBlKXJldHVybiEwO249bi5fX3Byb3RvX199cmV0dXJuITF9LGYoTm9kZS5wcm90b3R5cGUsXCJjbG9uZU5vZGVcIiksZihkb2N1bWVudCxcImltcG9ydE5vZGVcIiksdyYmIWZ1bmN0aW9uKCl7dmFyIGU9ZG9jdW1lbnQuaW1wb3J0Tm9kZTtkb2N1bWVudC5pbXBvcnROb2RlPWZ1bmN0aW9uKCl7dmFyIHQ9ZS5hcHBseShkb2N1bWVudCxhcmd1bWVudHMpO2lmKHQubm9kZVR5cGU9PXQuRE9DVU1FTlRfRlJBR01FTlRfTk9ERSl7dmFyIG49ZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO3JldHVybiBuLmFwcGVuZENoaWxkKHQpLG59cmV0dXJuIHR9fSgpLGRvY3VtZW50LnJlZ2lzdGVyRWxlbWVudD10LGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQ9aCxkb2N1bWVudC5jcmVhdGVFbGVtZW50TlM9cCxlLnJlZ2lzdHJ5PVMsZVtcImluc3RhbmNlb2ZcIl09bSxlLnJlc2VydmVkVGFnTGlzdD1fLGUuZ2V0UmVnaXN0ZXJlZERlZmluaXRpb249bCxkb2N1bWVudC5yZWdpc3Rlcj1kb2N1bWVudC5yZWdpc3RlckVsZW1lbnR9KSxmdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7aSh3aW5kb3cud3JhcChkb2N1bWVudCkpLHdpbmRvdy5DdXN0b21FbGVtZW50cy5yZWFkeT0hMDt2YXIgZT13aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lfHxmdW5jdGlvbihlKXtzZXRUaW1lb3V0KGUsMTYpfTtlKGZ1bmN0aW9uKCl7c2V0VGltZW91dChmdW5jdGlvbigpe3dpbmRvdy5DdXN0b21FbGVtZW50cy5yZWFkeVRpbWU9RGF0ZS5ub3coKSx3aW5kb3cuSFRNTEltcG9ydHMmJih3aW5kb3cuQ3VzdG9tRWxlbWVudHMuZWxhcHNlZD13aW5kb3cuQ3VzdG9tRWxlbWVudHMucmVhZHlUaW1lLXdpbmRvdy5IVE1MSW1wb3J0cy5yZWFkeVRpbWUpLGRvY3VtZW50LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KFwiV2ViQ29tcG9uZW50c1JlYWR5XCIse2J1YmJsZXM6ITB9KSl9KX0pfXZhciBuPWUudXNlTmF0aXZlLHI9ZS5pbml0aWFsaXplTW9kdWxlcztlLmlzSUU7aWYobil7dmFyIG89ZnVuY3Rpb24oKXt9O2Uud2F0Y2hTaGFkb3c9byxlLnVwZ3JhZGU9byxlLnVwZ3JhZGVBbGw9byxlLnVwZ3JhZGVEb2N1bWVudFRyZWU9byxlLnVwZ3JhZGVTdWJ0cmVlPW8sZS50YWtlUmVjb3Jkcz1vLGVbXCJpbnN0YW5jZW9mXCJdPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUgaW5zdGFuY2VvZiB0fX1lbHNlIHIoKTt2YXIgaT1lLnVwZ3JhZGVEb2N1bWVudFRyZWUsYT1lLnVwZ3JhZGVEb2N1bWVudDtpZih3aW5kb3cud3JhcHx8KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbD8od2luZG93LndyYXA9d2luZG93LlNoYWRvd0RPTVBvbHlmaWxsLndyYXBJZk5lZWRlZCx3aW5kb3cudW53cmFwPXdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbC51bndyYXBJZk5lZWRlZCk6d2luZG93LndyYXA9d2luZG93LnVud3JhcD1mdW5jdGlvbihlKXtyZXR1cm4gZX0pLHdpbmRvdy5IVE1MSW1wb3J0cyYmKHdpbmRvdy5IVE1MSW1wb3J0cy5fX2ltcG9ydHNQYXJzaW5nSG9vaz1mdW5jdGlvbihlKXtlW1wiaW1wb3J0XCJdJiZhKHdyYXAoZVtcImltcG9ydFwiXSkpfSksXCJjb21wbGV0ZVwiPT09ZG9jdW1lbnQucmVhZHlTdGF0ZXx8ZS5mbGFncy5lYWdlcil0KCk7ZWxzZSBpZihcImludGVyYWN0aXZlXCIhPT1kb2N1bWVudC5yZWFkeVN0YXRlfHx3aW5kb3cuYXR0YWNoRXZlbnR8fHdpbmRvdy5IVE1MSW1wb3J0cyYmIXdpbmRvdy5IVE1MSW1wb3J0cy5yZWFkeSl7dmFyIHM9d2luZG93LkhUTUxJbXBvcnRzJiYhd2luZG93LkhUTUxJbXBvcnRzLnJlYWR5P1wiSFRNTEltcG9ydHNMb2FkZWRcIjpcIkRPTUNvbnRlbnRMb2FkZWRcIjt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihzLHQpfWVsc2UgdCgpfSh3aW5kb3cuQ3VzdG9tRWxlbWVudHMpLGZ1bmN0aW9uKGUpe0Z1bmN0aW9uLnByb3RvdHlwZS5iaW5kfHwoRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQ9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgcj1uLnNsaWNlKCk7cmV0dXJuIHIucHVzaC5hcHBseShyLGFyZ3VtZW50cyksdC5hcHBseShlLHIpfX0pfSh3aW5kb3cuV2ViQ29tcG9uZW50cyksZnVuY3Rpb24oZSl7dmFyIHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO3QudGV4dENvbnRlbnQ9XCJib2R5IHt0cmFuc2l0aW9uOiBvcGFjaXR5IGVhc2UtaW4gMC4yczsgfSBcXG5ib2R5W3VucmVzb2x2ZWRdIHtvcGFjaXR5OiAwOyBkaXNwbGF5OiBibG9jazsgb3ZlcmZsb3c6IGhpZGRlbjsgcG9zaXRpb246IHJlbGF0aXZlOyB9IFxcblwiO3ZhciBuPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJoZWFkXCIpO24uaW5zZXJ0QmVmb3JlKHQsbi5maXJzdENoaWxkKX0od2luZG93LldlYkNvbXBvbmVudHMpLGZ1bmN0aW9uKGUpe3dpbmRvdy5QbGF0Zm9ybT1lfSh3aW5kb3cuV2ViQ29tcG9uZW50cyk7IiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vLyBCYXNlZCBpbiBwYXJ0IG9uIGNvZGUgZnJvbSBBcGFjaGUgUmlwcGxlLCBodHRwczovL2dpdGh1Yi5jb20vYXBhY2hlL2luY3ViYXRvci1yaXBwbGVcblxudmFyIHV0aWxzID0gcmVxdWlyZSgndXRpbHMnKTtcblxudmFyIGluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIF9YTUxIdHRwUmVxdWVzdCA9IFhNTEh0dHBSZXF1ZXN0O1xuICAgIHdpbmRvdy5YTUxIdHRwUmVxdWVzdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHhociA9IG5ldyBfWE1MSHR0cFJlcXVlc3QoKSxcbiAgICAgICAgICAgIG9yaWdNZXRob2RzID0ge1xuICAgICAgICAgICAgICAgIHNldFJlcXVlc3RIZWFkZXI6IHhoci5zZXRSZXF1ZXN0SGVhZGVyLFxuICAgICAgICAgICAgICAgIG9wZW46IHhoci5vcGVuXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIHhoci5vcGVuID0gZnVuY3Rpb24gKG1ldGhvZCwgdXJsKSB7XG4gICAgICAgICAgICB2YXIgc2FtZU9yaWdpbiA9IHV0aWxzLmlzU2FtZU9yaWdpblJlcXVlc3QodXJsKTtcblxuICAgICAgICAgICAgaWYgKCFzYW1lT3JpZ2luKSB7XG4gICAgICAgICAgICAgICAgdXJsID0gJy94aHJfcHJveHk/cnVybD0nICsgZXNjYXBlKHVybCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIG9yaWdNZXRob2RzLm9wZW4uYXBwbHkoeGhyLCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpKTtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4geGhyO1xuICAgIH07XG5cbiAgICAvLyBFbnN1cmUgdGhhdCB3ZSByZXRhaW4gYWxsIHN0YXRpYyBwcm9wZXJ0aWVzLCBzdWNoIGFzIERPTkVcbiAgICB3aW5kb3cuWE1MSHR0cFJlcXVlc3QuX19wcm90b19fID0gX1hNTEh0dHBSZXF1ZXN0O1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgaW5pdDogaW5pdFxufTtcbiJdfQ==
